{"content":"---\ntitle: \"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration\"\nms.date: \"03/30/2017\"\nms.assetid: f49664d9-e9e0-425c-a259-93f0a569d01b\n---\n# Anticipating Adopting the Windows Communication Foundation: Easing Future Migration\nTo ensure an easier future migration of new ASP.NET applications to WCF, follow the preceding recommendations as well as the following recommendations.  \n  \n## Protocols  \n Disable ASP.NET 2.0’s support for SOAP 1.2:  \n  \n```xml  \n<configuration>  \n     <system.web>  \n      <webServices >  \n          <protocols>  \n           <remove name=\"HttpSoap12\"/>  \n          </protocols>    \n      </webServices>  \n     </system.web>   \n</configuration>  \n```  \n  \n Doing so is advisable because WCF requires messages conforming to different protocols, like SOAP 1.1 and SOAP 1.2, to go by using different endpoints. If an ASP.NET 2.0 Web service is configured to support both SOAP 1.1 and SOAP 1.2, which is the default configuration, then it cannot be migrated forward to a single WCF endpoint at the original address that would be certainly be compatible with all of the ASP.NET Web service’s existing clients. Also choosing SOAP 1.2 instead of 1.1 will more severely restrict the clientele of the service.  \n  \n## Service Development  \n WCF allows you to define service contracts by applying the <xref:System.ServiceModel.ServiceContractAttribute> either to interfaces or to classes. It is recommended to apply the attribute to an interface rather than to a class, because doing so creates a definition of a contract that can be variously implemented by any number of classes. ASP.NET 2.0 supports the option of applying the <xref:System.Web.Services.WebService> attribute to interfaces as well as classes. However, as mentioned already, there is a defect in ASP.NET 2.0, by which the Namespace parameter of the <xref:System.Web.Services.WebService> attribute has no effect when that attribute is applied to an interface rather than a class. Since it is generally advisable to modify the namespace of a service from the default value, `http://tempuri.org`, using the Namespace parameter of the <xref:System.Web.Services.WebService> attribute, one should continue defining ASP.NET Web Services by applying the <xref:System.ServiceModel.ServiceContractAttribute> attribute either to interfaces or to classes.  \n  \n-   Have as little code as possible in the methods by which those interfaces are defined. Have them delegate their work to other classes. New WCF service types could then also delegate their substantive work to those classes.  \n  \n-   Provide explicit names for the operations of a service using the `MessageName` parameter of the <xref:System.Web.Services.WebMethodAttribute>.  \n  \n    ```csharp  \n    [WebMethod(MessageName=\"ExplicitName\")]  \n    string Echo(string input);  \n    ```  \n  \n     Doing so is important, because the default names for operations in ASP.NET are different from the default names supplied by WCF. By providing explicit names, you avoid relying on the default ones.  \n  \n-   Do not implement ASP.NET Web service operations with polymorphic methods, because WCF does not support implementing operations with polymorphic methods.  \n  \n-   Use the <xref:System.Web.Services.Protocols.SoapDocumentMethodAttribute> to provide explicit values for the SOAPAction HTTP headers by which HTTP requests will be routed to methods.  \n  \n    ```csharp  \n    [WebMethod]  \n    [SoapDocumentMethod(RequestElementName=\"ExplicitAction\")]  \n    string Echo(string input);  \n    ```  \n  \n     Taking this approach will circumvent having to rely on the default SOAPAction values used by ASP.NET and WCF being the same.  \n  \n-   Avoid using SOAP extensions. If SOAP extensions are required, then determine whether the purpose for which they are being considered is a feature that is already provided by WCF. If that is indeed the case, then reconsider the choice to not adopt WCF right away.  \n  \n## State Management  \n Avoid having to maintain state in services. Not only does maintaining state tend to compromise the scalability of an application, but the state management mechanisms of ASP.NET and WCF are very different, although WCF does support the ASP.NET mechanisms in ASP.NET compatibility mode.  \n  \n## Exception Handling  \n In designing the structures of the data types to be sent and received by a service, also design structures to represent the various types of exceptions that might occur within a service that one might wish to convey to a client.  \n  \n```csharp  \n[Serializable]  \n[XmlRoot(  \n     Namespace=\"ExplicitNamespace\", IsNullable=true)]  \n    public partial class AnticipatedException {  \n  \n     private string anticipatedExceptionInformationField;  \n  \n     public string AnticipatedExceptionInformation {  \n      get {  \n          return this.anticipatedExceptionInformationField;  \n          }  \n      set {  \n          this.anticipatedExceptionInformationField = value;  \n          }  \n     }  \n}  \n```  \n  \n Give such classes the ability to serialize themselves to XML:  \n  \n```csharp  \npublic XmlNode ToXML()  \n{  \n     XmlSerializer serializer = new XmlSerializer(  \n      typeof(AnticipatedException));  \n     MemoryStream memoryStream = new MemoryStream();  \n     XmlTextWriter writer = new XmlTextWriter(  \n     memoryStream, UnicodeEncoding.UTF8);  \n     serializer.Serialize(writer, this);  \n     XmlDocument document = new XmlDocument();  \n     document.LoadXml(new string(  \n     UnicodeEncoding.UTF8.GetChars(  \n     memoryStream.GetBuffer())).Trim());  \n    return document.DocumentElement;  \n}  \n```  \n  \n The classes can then be used to provide the details for explicitly thrown <xref:System.Web.Services.Protocols.SoapException> instances:  \n  \n```csharp  \nAnctipatedException exception = new AnticipatedException();  \nexception.AnticipatedExceptionInformation = \"…\";  \nthrow new SoapException(  \n     \"Fault occurred\",  \n     SoapException.ClientFaultCode,  \n     Context.Request.Url.AbsoluteUri,  \n     exception.ToXML());  \n```  \n  \n These exception classes will be readily reusable with the WCF <xref:System.ServiceModel.FaultException%601> class to throw a new `FaultException<AnticipatedException>(anticipatedException);`  \n  \n## Security  \n The following are some security recommendations.  \n  \n-   Avoid using ASP.NET 2.0 Profiles, as using them would restrict the use of ASP.NET Integration Mode if the service was migrated to WCF.  \n  \n-   Avoid using ACLs to control access to services, as ASP.NET Web services supports ACLs using Internet Information Services (IIS), WCF does not—because ASP.NET Web services depend on IIS for hosting, and WCF does not necessarily have to be hosted in IIS.  \n  \n-   Do consider using ASP.NET 2.0 Role Providers for authorizing access to the resources of a service.  \n  \n## See also\n\n- [Anticipating Adopting the Windows Communication Foundation: Easing Future Integration](../../../../docs/framework/wcf/feature-details/anticipating-adopting-the-wcf-easing-future-integration.md)\n","nodes":[{"pos":[4,167],"embed":true,"restype":"x-metadata","content":"title: \"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration\"\nms.date: \"03/30/2017\"\nms.assetid: f49664d9-e9e0-425c-a259-93f0a569d01b","nodes":[{"content":"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration","nodes":[{"pos":[0,83],"content":"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration","nodes":[{"content":"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration","pos":[0,83]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[174,257],"content":"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration","linkify":"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration","nodes":[{"content":"Anticipating Adopting the Windows Communication Foundation: Easing Future Migration","pos":[0,83]}]},{"content":"To ensure an easier future migration of new ASP.NET applications to WCF, follow the preceding recommendations as well as the following recommendations.","pos":[258,409]},{"pos":[418,427],"content":"Protocols","linkify":"Protocols","nodes":[{"content":"Protocols","pos":[0,9]}]},{"content":"Disable ASP.NET 2.0’s support for SOAP 1.2:","pos":[431,474]},{"content":"Doing so is advisable because WCF requires messages conforming to different protocols, like SOAP 1.1 and SOAP 1.2, to go by using different endpoints.","pos":[716,866]},{"content":"If an ASP.NET 2.0 Web service is configured to support both SOAP 1.1 and SOAP 1.2, which is the default configuration, then it cannot be migrated forward to a single WCF endpoint at the original address that would be certainly be compatible with all of the ASP.NET Web service’s existing clients.","pos":[867,1163]},{"content":"Also choosing SOAP 1.2 instead of 1.1 will more severely restrict the clientele of the service.","pos":[1164,1259]},{"pos":[1268,1287],"content":"Service Development","linkify":"Service Development","nodes":[{"content":"Service Development","pos":[0,19]}]},{"content":"WCF allows you to define service contracts by applying the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph> either to interfaces or to classes.","pos":[1291,1437],"source":"WCF allows you to define service contracts by applying the <xref:System.ServiceModel.ServiceContractAttribute> either to interfaces or to classes."},{"content":"It is recommended to apply the attribute to an interface rather than to a class, because doing so creates a definition of a contract that can be variously implemented by any number of classes.","pos":[1438,1630]},{"content":"ASP.NET 2.0 supports the option of applying the <ph id=\"ph1\">&lt;xref:System.Web.Services.WebService&gt;</ph> attribute to interfaces as well as classes.","pos":[1631,1760],"source":" ASP.NET 2.0 supports the option of applying the <xref:System.Web.Services.WebService> attribute to interfaces as well as classes."},{"content":"However, as mentioned already, there is a defect in ASP.NET 2.0, by which the Namespace parameter of the <ph id=\"ph1\">&lt;xref:System.Web.Services.WebService&gt;</ph> attribute has no effect when that attribute is applied to an interface rather than a class.","pos":[1761,1995],"source":" However, as mentioned already, there is a defect in ASP.NET 2.0, by which the Namespace parameter of the <xref:System.Web.Services.WebService> attribute has no effect when that attribute is applied to an interface rather than a class."},{"content":"Since it is generally advisable to modify the namespace of a service from the default value, <ph id=\"ph1\">`http://tempuri.org`</ph>, using the Namespace parameter of the <ph id=\"ph2\">&lt;xref:System.Web.Services.WebService&gt;</ph> attribute, one should continue defining ASP.NET Web Services by applying the <ph id=\"ph3\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph> attribute either to interfaces or to classes.","pos":[1996,2360],"source":" Since it is generally advisable to modify the namespace of a service from the default value, `http://tempuri.org`, using the Namespace parameter of the <xref:System.Web.Services.WebService> attribute, one should continue defining ASP.NET Web Services by applying the <xref:System.ServiceModel.ServiceContractAttribute> attribute either to interfaces or to classes."},{"content":"Have as little code as possible in the methods by which those interfaces are defined.","pos":[2370,2455]},{"content":"Have them delegate their work to other classes.","pos":[2456,2503]},{"content":"New WCF service types could then also delegate their substantive work to those classes.","pos":[2504,2591]},{"pos":[2601,2743],"content":"Provide explicit names for the operations of a service using the <ph id=\"ph1\">`MessageName`</ph> parameter of the <ph id=\"ph2\">&lt;xref:System.Web.Services.WebMethodAttribute&gt;</ph>.","source":"Provide explicit names for the operations of a service using the `MessageName` parameter of the <xref:System.Web.Services.WebMethodAttribute>."},{"content":"Doing so is important, because the default names for operations in ASP.NET are different from the default names supplied by WCF.","pos":[2862,2990]},{"content":"By providing explicit names, you avoid relying on the default ones.","pos":[2991,3058]},{"content":"Do not implement ASP.NET Web service operations with polymorphic methods, because WCF does not support implementing operations with polymorphic methods.","pos":[3068,3220]},{"pos":[3230,3411],"content":"Use the <ph id=\"ph1\">&lt;xref:System.Web.Services.Protocols.SoapDocumentMethodAttribute&gt;</ph> to provide explicit values for the SOAPAction HTTP headers by which HTTP requests will be routed to methods.","source":"Use the <xref:System.Web.Services.Protocols.SoapDocumentMethodAttribute> to provide explicit values for the SOAPAction HTTP headers by which HTTP requests will be routed to methods."},{"content":"Taking this approach will circumvent having to rely on the default SOAPAction values used by ASP.NET and WCF being the same.","pos":[3566,3690]},{"content":"Avoid using SOAP extensions.","pos":[3700,3728]},{"content":"If SOAP extensions are required, then determine whether the purpose for which they are being considered is a feature that is already provided by WCF.","pos":[3729,3878]},{"content":"If that is indeed the case, then reconsider the choice to not adopt WCF right away.","pos":[3879,3962]},{"pos":[3971,3987],"content":"State Management","linkify":"State Management","nodes":[{"content":"State Management","pos":[0,16]}]},{"content":"Avoid having to maintain state in services.","pos":[3991,4034]},{"content":"Not only does maintaining state tend to compromise the scalability of an application, but the state management mechanisms of ASP.NET and WCF are very different, although WCF does support the ASP.NET mechanisms in ASP.NET compatibility mode.","pos":[4035,4275]},{"pos":[4284,4302],"content":"Exception Handling","linkify":"Exception Handling","nodes":[{"content":"Exception Handling","pos":[0,18]}]},{"content":"In designing the structures of the data types to be sent and received by a service, also design structures to represent the various types of exceptions that might occur within a service that one might wish to convey to a client.","pos":[4306,4534]},{"content":"Give such classes the ability to serialize themselves to XML:","pos":[5012,5073]},{"pos":[5622,5757],"content":"The classes can then be used to provide the details for explicitly thrown <ph id=\"ph1\">&lt;xref:System.Web.Services.Protocols.SoapException&gt;</ph> instances:","source":"The classes can then be used to provide the details for explicitly thrown <xref:System.Web.Services.Protocols.SoapException> instances:"},{"pos":[6055,6245],"content":"These exception classes will be readily reusable with the WCF <ph id=\"ph1\">&lt;xref:System.ServiceModel.FaultException%601&gt;</ph> class to throw a new <ph id=\"ph2\">`FaultException&lt;AnticipatedException&gt;(anticipatedException);`</ph>","source":"These exception classes will be readily reusable with the WCF <xref:System.ServiceModel.FaultException%601> class to throw a new `FaultException<AnticipatedException>(anticipatedException);`"},{"pos":[6254,6262],"content":"Security","linkify":"Security","nodes":[{"content":"Security","pos":[0,8]}]},{"content":"The following are some security recommendations.","pos":[6266,6314]},{"content":"Avoid using ASP.NET 2.0 Profiles, as using them would restrict the use of ASP.NET Integration Mode if the service was migrated to WCF.","pos":[6324,6458]},{"content":"Avoid using ACLs to control access to services, as ASP.NET Web services supports ACLs using Internet Information Services (IIS), WCF does not—because ASP.NET Web services depend on IIS for hosting, and WCF does not necessarily have to be hosted in IIS.","pos":[6468,6720]},{"content":"Do consider using ASP.NET 2.0 Role Providers for authorizing access to the resources of a service.","pos":[6730,6828]},{"pos":[6837,6845],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6849,7043],"content":"<bpt id=\"p1\">[</bpt>Anticipating Adopting the Windows Communication Foundation: Easing Future Integration<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/anticipating-adopting-the-wcf-easing-future-integration.md)</ept>","source":"[Anticipating Adopting the Windows Communication Foundation: Easing Future Integration](../../../../docs/framework/wcf/feature-details/anticipating-adopting-the-wcf-easing-future-integration.md)"}]}