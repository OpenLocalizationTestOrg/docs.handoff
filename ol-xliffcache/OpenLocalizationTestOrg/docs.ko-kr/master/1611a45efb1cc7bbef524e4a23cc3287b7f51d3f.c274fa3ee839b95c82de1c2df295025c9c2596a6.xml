{"content":"---\ntitle: \"Throttling\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"service behaviors, throttling sample\"\n  - \"Throttling Sample [Windows Communication Foundation]\"\nms.assetid: 40bb3582-8ae9-4410-96f0-6c515bfaf47c\n---\n# Throttling\nThe Throttling sample demonstrates the use of throttling controls. Throttling controls place limits on the number of concurrent calls, instances, or sessions to prevent over-consumption of resources. Throttling behavior is specified in service configuration file settings. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service.  \n  \n In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The service configuration file specifies throttling controls in a [\\<serviceThrottling>](../../../../docs/framework/configure-apps/file-schema/wcf/servicethrottling.md), as shown in the following sample configuration.  \n  \n```xml  \n<behaviors>  \n  <serviceBehaviors>  \n    <behavior name=\"CalculatorServiceBehavior\">  \n      <serviceDebug includeExceptionDetailInFaults=\"False\" />  \n      <serviceMetadata httpGetEnabled=\"True\"/>  \n      <!-- Specify throttling behavior -->  \n    <serviceThrottling maxConcurrentCalls=\"2\"  \n                       maxConcurrentInstances=\"10\"/>  \n    </behavior>  \n  </serviceBehaviors>  \n</behaviors>  \n```  \n  \n As configured, the service limits the maximum concurrent calls to 2, and the maximum number of concurrent instances to 10.  \n  \n In order to demonstrate throttling we define a sleep time on the service methods as follows:  \n  \n```csharp\npublic double Add(double n1, double n2)  \n{  \n    System.Threading.Thread.Sleep(2000);  \n    return n1 + n2;  \n}  \n```  \n  \n When you run the sample, the operation requests and responses are displayed in the client console window. The Add and Subtract methods are executed concurrently and the Multiply and Divide methods are executed concurrently proving that not more than 2 methods can be executed concurrently thus demonstrating throttling.  \n  \n```console  \nPress <ENTER> to terminate client.  \nAdd(100,15.99)  \nSubtract(145,76.54)  \nMultiply(9,81.25)  \nDivide(22,7)  \n  \nAdd Result: 115.99  \nSubtract Result: 68.46  \nMultiply Result: 731.25  \nDivide Result: 3.14285714285714  \n  \nPress any key to continue . . .  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\Behaviors\\Throttling`  \n","nodes":[{"pos":[4,218],"embed":true,"restype":"x-metadata","content":"title: \"Throttling\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"service behaviors, throttling sample\"\n  - \"Throttling Sample [Windows Communication Foundation]\"\nms.assetid: 40bb3582-8ae9-4410-96f0-6c515bfaf47c","nodes":[{"content":"Throttling","nodes":[{"pos":[0,10],"content":"Throttling","nodes":[{"content":"Throttling","pos":[0,10]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[225,235],"content":"Throttling","linkify":"Throttling","nodes":[{"content":"Throttling","pos":[0,10]}]},{"content":"The Throttling sample demonstrates the use of throttling controls.","pos":[236,302]},{"content":"Throttling controls place limits on the number of concurrent calls, instances, or sessions to prevent over-consumption of resources.","pos":[303,435]},{"content":"Throttling behavior is specified in service configuration file settings.","pos":[436,508]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept> that implements a calculator service.","pos":[509,658],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service."},{"content":"In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).","pos":[665,789]},{"pos":[797,904],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"pos":[911,1128],"content":"The service configuration file specifies throttling controls in a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceThrottling&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicethrottling.md)</ept>, as shown in the following sample configuration.","source":"The service configuration file specifies throttling controls in a [\\<serviceThrottling>](../../../../docs/framework/configure-apps/file-schema/wcf/servicethrottling.md), as shown in the following sample configuration."},{"content":"As configured, the service limits the maximum concurrent calls to 2, and the maximum number of concurrent instances to 10.","pos":[1558,1680]},{"content":"In order to demonstrate throttling we define a sleep time on the service methods as follows:","pos":[1687,1779]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[1920,2025]},{"content":"The Add and Subtract methods are executed concurrently and the Multiply and Divide methods are executed concurrently proving that not more than 2 methods can be executed concurrently thus demonstrating throttling.","pos":[2026,2239]},{"pos":[2528,2564],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2574,2773],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[2783,2992],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3002,3210],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[3218,3350],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3404,3714],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3715,3765]}]}