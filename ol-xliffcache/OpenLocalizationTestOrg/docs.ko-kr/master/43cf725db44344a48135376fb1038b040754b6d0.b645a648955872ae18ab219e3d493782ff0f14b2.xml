{"content":"---\ntitle: \"Runtime Changes in the .NET Framework 4.6.1 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"runtime changes, .NET Framework\"\n  - \"runtime changes, .NET Framework 4.6.1\"\n  - \"application compatibility\"\nms.assetid: 9d97421c-5fee-4523-98c9-a158e7e6a1ee\ncaps.latest.revision: 5\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Runtime Changes in the .NET Framework 4.6.1\nIn rare cases, runtime changes may affect existing apps that target the previous versions of the .NET Framework but run on a later version of the .NET Framework runtime. They also include differences in behavior between applications that run on different .NET Framework runtime environments. The [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] includes changes in the following areas:  \n  \n-   [Windows Communication Foundation (WCF)](#WCF)  \n  \n-   [Windows Presentation Foundation (WPF)](#WPF)  \n  \n<a name=\"WCF\"></a>   \n## Windows Communication Foundation (WCF)  \n  \n|Feature|Change|Impact|Scope|  \n|-------------|------------|------------|-----------|  \n|WCF binding with the `TransportWithMessageCredential`  security mode|By default, WCF binding that uses the `TransportWithMessageCredential` security mode does not allow messages with an unsigned \"to\" header for asymmetric security keys. Starting with apps that run under the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], it is possible to relax this requirement and receive messages that do not have signed \"to\" headers.|This is an opt-in behavior. To allow messages with unsigned \"to\" headers, add the following configuration setting to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the app’s configuration file:<br /><br /> `<runtime>     <AppContextSwitchOverrides value=\"Switch.System.ServiceModel.AllowUnsignedToHeader=true\" />  </runtime>`<br /><br /> Because this is an opt-in feature, it should not affect the behavior of existing apps.|Edge|  \n  \n<a name=\"WPF\"></a>   \n## Windows Presentation Foundation (WPF)  \n  \n|Feature|Change|Impact|Scope|  \n|-------------|------------|------------|-----------|  \n|<xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName>|When an <xref:System.Windows.Controls.ItemsControl> displays a collection using virtualization (<xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A> = `true`) and item-scrolling (<xref:System.Windows.Controls.VirtualizingPanel.ScrollUnit%2A>=<xref:System.Windows.Controls.ScrollUnit?displayProperty=fullName>), and when the control scrolls to display an item whose height in pixels differs from its neighbors, the <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName> iterates over all items in the collection.   The UI is unresponsive during this iteration;  if the collection is large, this can be perceived as a hang.<br /><br /> This iteration occurs in other circumstances, even in releases prior to the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)]. For example, it occurs when pixel-scrolling (<xref:System.Windows.Controls.VirtualizingPanel.ScrollUnit%2A>=<xref:System.Windows.Controls.ScrollUnit?displayProperty=fullName>) upon encountering an item with a different pixel height, and when item-scrolling hierarchical data (such as in a <xref:System.Windows.Controls.TreeView> control or an <xref:System.Windows.Controls.ItemsControl> with grouping enabled) upon encountering an item with a different number of descendant items than its neighbors.<br /><br /> For the case of item-scrolling and different pixel heights, the iteration was introduced in the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] to fix bugs in the layout of hierarchical data.  It is not needed if the data is flat (has no hierarchy), and the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] does not do it in that case.|If the iteration occurs in the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] but not in earlier releases -- that is, if the <xref:System.Windows.Controls.ItemsControl> is item-scrolling a flat list with items of different pixel height -- there are two remedies:<br /><br /> Install the  [.NET Framework 4.6.2](../../../docs/framework/install/guide-for-developers.md).<br /><br /> Install [hotfix HR 1605](https://support.microsoft.com/en-us/kb/3154529) for the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)].|Minor|  \n## See Also  \n [Application Compatibility in 4.6.1](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)","nodes":[{"pos":[12,72],"content":"Runtime Changes in the .NET Framework 4.6.1 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Runtime Changes in the .NET Framework 4.6.1 | Microsoft Docs","pos":[0,60]}]},{"pos":[511,554],"content":"Runtime Changes in the .NET Framework 4.6.1","linkify":"Runtime Changes in the .NET Framework 4.6.1","nodes":[{"content":"Runtime Changes in the .NET Framework 4.6.1","pos":[0,43]}]},{"content":"In rare cases, runtime changes may affect existing apps that target the previous versions of the .NET Framework but run on a later version of the .NET Framework runtime.","pos":[555,724]},{"content":"They also include differences in behavior between applications that run on different .NET Framework runtime environments.","pos":[725,846]},{"content":"The <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> includes changes in the following areas:","pos":[847,946],"source":" The [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] includes changes in the following areas:"},{"pos":[956,1002],"content":"<bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF)<ept id=\"p1\">](#WCF)</ept>","source":"[Windows Communication Foundation (WCF)](#WCF)"},{"pos":[1012,1057],"content":"<bpt id=\"p1\">[</bpt>Windows Presentation Foundation (WPF)<ept id=\"p1\">](#WPF)</ept>","source":"[Windows Presentation Foundation (WPF)](#WPF)"},{"pos":[1088,1126],"content":"Windows Communication Foundation (WCF)","linkify":"Windows Communication Foundation (WCF)","nodes":[{"content":"Windows Communication Foundation (WCF)","pos":[0,38]}]},{"content":"Feature","pos":[1133,1140]},{"content":"Change","pos":[1141,1147]},{"content":"Impact","pos":[1148,1154]},{"content":"Scope","pos":[1155,1160]},{"pos":[1221,1289],"content":"WCF binding with the <ph id=\"ph1\">`TransportWithMessageCredential`</ph>  security mode","source":"WCF binding with the `TransportWithMessageCredential`  security mode"},{"content":"By default, WCF binding that uses the <ph id=\"ph1\">`TransportWithMessageCredential`</ph> security mode does not allow messages with an unsigned \"to\" header for asymmetric security keys.","pos":[1290,1457],"source":"By default, WCF binding that uses the `TransportWithMessageCredential` security mode does not allow messages with an unsigned \"to\" header for asymmetric security keys."},{"content":"Starting with apps that run under the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph>, it is possible to relax this requirement and receive messages that do not have signed \"to\" headers.","pos":[1458,1651],"source":" Starting with apps that run under the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], it is possible to relax this requirement and receive messages that do not have signed \"to\" headers."},{"content":"This is an opt-in behavior.","pos":[1652,1679]},{"content":"To allow messages with unsigned \"to\" headers, add the following configuration setting to the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of the app’s configuration file:","pos":[1680,1905],"source":" To allow messages with unsigned \"to\" headers, add the following configuration setting to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the app’s configuration file:"},{"content":"Because this is an opt-in feature, it should not affect the behavior of existing apps.","pos":[2050,2136]},{"content":"Edge","pos":[2137,2141]},{"pos":[2173,2210],"content":"Windows Presentation Foundation (WPF)","linkify":"Windows Presentation Foundation (WPF)","nodes":[{"content":"Windows Presentation Foundation (WPF)","pos":[0,37]}]},{"content":"Feature","pos":[2217,2224]},{"content":"Change","pos":[2225,2231]},{"content":"Impact","pos":[2232,2238]},{"content":"Scope","pos":[2239,2244]},{"content":"When an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> displays a collection using virtualization (<ph id=\"ph2\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A&gt;</ph><ph id=\"ph3\"> = </ph><ph id=\"ph4\">`true`</ph>) and item-scrolling (<ph id=\"ph5\">&lt;xref:System.Windows.Controls.VirtualizingPanel.ScrollUnit%2A&gt;</ph><ph id=\"ph6\">=</ph><ph id=\"ph7\">&lt;xref:System.Windows.Controls.ScrollUnit?displayProperty=fullName&gt;</ph>), and when the control scrolls to display an item whose height in pixels differs from its neighbors, the <ph id=\"ph8\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName&gt;</ph> iterates over all items in the collection.","pos":[2384,2938],"source":"When an <xref:System.Windows.Controls.ItemsControl> displays a collection using virtualization (<xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A> = `true`) and item-scrolling (<xref:System.Windows.Controls.VirtualizingPanel.ScrollUnit%2A>=<xref:System.Windows.Controls.ScrollUnit?displayProperty=fullName>), and when the control scrolls to display an item whose height in pixels differs from its neighbors, the <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=fullName> iterates over all items in the collection."},{"content":"The UI is unresponsive during this iteration;  if the collection is large, this can be perceived as a hang.","pos":[2941,3048]},{"content":"This iteration occurs in other circumstances, even in releases prior to the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph>.","pos":[3061,3192],"source":" This iteration occurs in other circumstances, even in releases prior to the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)]."},{"content":"For example, it occurs when pixel-scrolling (<ph id=\"ph1\">&lt;xref:System.Windows.Controls.VirtualizingPanel.ScrollUnit%2A&gt;</ph><ph id=\"ph2\">=</ph><ph id=\"ph3\">&lt;xref:System.Windows.Controls.ScrollUnit?displayProperty=fullName&gt;</ph>) upon encountering an item with a different pixel height, and when item-scrolling hierarchical data (such as in a <ph id=\"ph4\">&lt;xref:System.Windows.Controls.TreeView&gt;</ph> control or an <ph id=\"ph5\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> with grouping enabled) upon encountering an item with a different number of descendant items than its neighbors.","pos":[3193,3692],"source":" For example, it occurs when pixel-scrolling (<xref:System.Windows.Controls.VirtualizingPanel.ScrollUnit%2A>=<xref:System.Windows.Controls.ScrollUnit?displayProperty=fullName>) upon encountering an item with a different pixel height, and when item-scrolling hierarchical data (such as in a <xref:System.Windows.Controls.TreeView> control or an <xref:System.Windows.Controls.ItemsControl> with grouping enabled) upon encountering an item with a different number of descendant items than its neighbors."},{"content":"For the case of item-scrolling and different pixel heights, the iteration was introduced in the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> to fix bugs in the layout of hierarchical data.","pos":[3705,3903],"source":" For the case of item-scrolling and different pixel heights, the iteration was introduced in the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] to fix bugs in the layout of hierarchical data."},{"content":"It is not needed if the data is flat (has no hierarchy), and the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> does not do it in that case.","pos":[3905,4053],"source":"  It is not needed if the data is flat (has no hierarchy), and the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] does not do it in that case."},{"content":"If the iteration occurs in the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> but not in earlier releases -- that is, if the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> is item-scrolling a flat list with items of different pixel height -- there are two remedies:","pos":[4054,4324],"source":"If the iteration occurs in the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] but not in earlier releases -- that is, if the <xref:System.Windows.Controls.ItemsControl> is item-scrolling a flat list with items of different pixel height -- there are two remedies:"},{"content":"Install the  <bpt id=\"p1\">[</bpt>.NET Framework 4.6.2<ept id=\"p1\">](../../../docs/framework/install/guide-for-developers.md)</ept>.","pos":[4337,4430],"source":" Install the  [.NET Framework 4.6.2](../../../docs/framework/install/guide-for-developers.md)."},{"content":"Install <bpt id=\"p1\">[</bpt>hotfix HR 1605<ept id=\"p1\">](https://support.microsoft.com/en-us/kb/3154529)</ept> for the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph>.","pos":[4443,4579],"source":" Install [hotfix HR 1605](https://support.microsoft.com/en-us/kb/3154529) for the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)]."},{"content":"Minor","pos":[4580,4585]},{"pos":[4592,4600],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[4604,4737],"content":"<bpt id=\"p1\">[</bpt>Application Compatibility in 4.6.1<ept id=\"p1\">](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)</ept>","source":"[Application Compatibility in 4.6.1](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)"}]}