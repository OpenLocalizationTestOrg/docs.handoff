{"content":"---\ntitle: \"Anonymous Methods - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"anonymous methods [C#]\"\n  - \"methods [C#], anonymous\"\n  - \"delegates [C#], anonymous methods\"\nms.assetid: a62441fa-f0a3-4acb-9aa6-93762a635275\n---\n# Anonymous Methods (C# Programming Guide)\nIn versions of C# before 2.0, the only way to declare a [delegate](../../../csharp/language-reference/keywords/delegate.md) was to use [named methods](../../../csharp/programming-guide/delegates/delegates-with-named-vs-anonymous-methods.md). C# 2.0 introduced anonymous methods and in C# 3.0 and later, lambda expressions supersede anonymous methods as the preferred way to write inline code. However, the information about anonymous methods in this topic also applies to lambda expressions. There is one case in which an anonymous method provides functionality not found in lambda expressions. Anonymous methods enable you to omit the parameter list. This means that an anonymous method can be converted to delegates with a variety of signatures. This is not possible with lambda expressions. For more information specifically about lambda expressions, see [Lambda Expressions](../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md).  \n  \n Creating anonymous methods is essentially a way to pass a code block as a delegate parameter. Here are two examples:  \n  \n [!code-csharp[csProgGuideDelegates#6](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#6)]  \n  \n [!code-csharp[csProgGuideDelegates#5](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#5)]  \n  \n By using anonymous methods, you reduce the coding overhead in instantiating delegates because you do not have to create a separate method.  \n  \n For example, specifying a code block instead of a delegate can be useful in a situation when having to create a method might seem an unnecessary overhead. A good example would be when you start a new thread. This class creates a thread and also contains the code that the thread executes without creating an additional method for the delegate.  \n  \n [!code-csharp[csProgGuideDelegates#7](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#7)]  \n  \n## Remarks  \n The scope of the parameters of an anonymous method is the *anonymous-method-block*.  \n  \n It is an error to have a jump statement, such as [goto](../../../csharp/language-reference/keywords/goto.md), [break](../../../csharp/language-reference/keywords/break.md), or [continue](../../../csharp/language-reference/keywords/continue.md), inside the anonymous method block if the target is outside the block. It is also an error to have a jump statement, such as `goto`, `break`, or `continue`, outside the anonymous method block if the target is inside the block.  \n  \n The local variables and parameters whose scope contains an anonymous method declaration are called *outer* variables of the anonymous method. For example, in the following code segment, `n` is an outer variable:  \n  \n [!code-csharp[csProgGuideDelegates#8](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#8)]  \n  \n A reference to the outer variable `n` is said to be *captured* when the delegate is created. Unlike local variables, the lifetime of a captured variable extends until the delegates that reference the anonymous methods are eligible for garbage collection.  \n  \n An anonymous method cannot access the [in](../../../csharp/language-reference/keywords/in.md), [ref](../../../csharp/language-reference/keywords/ref.md) or [out](../../../csharp/language-reference/keywords/out-parameter-modifier.md) parameters of an outer scope.  \n  \n No unsafe code can be accessed within the *anonymous-method-block*.  \n  \n Anonymous methods are not allowed on the left side of the [is](../../../csharp/language-reference/keywords/is.md) operator.  \n  \n## Example  \n The following example demonstrates two ways of instantiating a delegate:  \n  \n-   Associating the delegate with an anonymous method.  \n  \n-   Associating the delegate with a named method (`DoWork`).  \n  \n In each case, a message is displayed when the delegate is invoked.  \n  \n [!code-csharp[csProgGuideDelegates#4](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideDelegates/CS/Delegates.cs#4)]  \n  \n## See also\n\n- [C# Reference](../../../csharp/language-reference/index.md)\n- [C# Programming Guide](../../../csharp/programming-guide/index.md)\n- [Delegates](../../../csharp/programming-guide/delegates/index.md)\n- [Lambda Expressions](../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md)\n- [Unsafe Code and Pointers](../../../csharp/programming-guide/unsafe-code-pointers/index.md)\n- [Methods](../../../csharp/programming-guide/classes-and-structs/methods.md)\n- [Delegates with Named vs. Anonymous Methods](../../../csharp/programming-guide/delegates/delegates-with-named-vs-anonymous-methods.md)\n","nodes":[{"pos":[4,263],"embed":true,"restype":"x-metadata","content":"title: \"Anonymous Methods - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"anonymous methods [C#]\"\n  - \"methods [C#], anonymous\"\n  - \"delegates [C#], anonymous methods\"\nms.assetid: a62441fa-f0a3-4acb-9aa6-93762a635275","nodes":[{"content":"Anonymous Methods - C# Programming Guide","nodes":[{"pos":[0,40],"content":"Anonymous Methods - C# Programming Guide","nodes":[{"content":"Anonymous Methods - C# Programming Guide","pos":[0,40]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[270,310],"content":"Anonymous Methods (C# Programming Guide)","linkify":"Anonymous Methods (C# Programming Guide)","nodes":[{"content":"Anonymous Methods (C# Programming Guide)","pos":[0,40]}]},{"content":"In versions of C# before 2.0, the only way to declare a <bpt id=\"p1\">[</bpt>delegate<ept id=\"p1\">](../../../csharp/language-reference/keywords/delegate.md)</ept> was to use <bpt id=\"p2\">[</bpt>named methods<ept id=\"p2\">](../../../csharp/programming-guide/delegates/delegates-with-named-vs-anonymous-methods.md)</ept>.","pos":[311,552],"source":"In versions of C# before 2.0, the only way to declare a [delegate](../../../csharp/language-reference/keywords/delegate.md) was to use [named methods](../../../csharp/programming-guide/delegates/delegates-with-named-vs-anonymous-methods.md)."},{"content":"C# 2.0 introduced anonymous methods and in C# 3.0 and later, lambda expressions supersede anonymous methods as the preferred way to write inline code.","pos":[553,703]},{"content":"However, the information about anonymous methods in this topic also applies to lambda expressions.","pos":[704,802]},{"content":"There is one case in which an anonymous method provides functionality not found in lambda expressions.","pos":[803,905]},{"content":"Anonymous methods enable you to omit the parameter list.","pos":[906,962]},{"content":"This means that an anonymous method can be converted to delegates with a variety of signatures.","pos":[963,1058]},{"content":"This is not possible with lambda expressions.","pos":[1059,1104]},{"content":"For more information specifically about lambda expressions, see <bpt id=\"p1\">[</bpt>Lambda Expressions<ept id=\"p1\">](../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md)</ept>.","pos":[1105,1280],"source":" For more information specifically about lambda expressions, see [Lambda Expressions](../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md)."},{"content":"Creating anonymous methods is essentially a way to pass a code block as a delegate parameter.","pos":[1287,1380]},{"content":"Here are two examples:","pos":[1381,1403]},{"content":"By using anonymous methods, you reduce the coding overhead in instantiating delegates because you do not have to create a separate method.","pos":[1674,1812]},{"content":"For example, specifying a code block instead of a delegate can be useful in a situation when having to create a method might seem an unnecessary overhead.","pos":[1819,1973]},{"content":"A good example would be when you start a new thread.","pos":[1974,2026]},{"content":"This class creates a thread and also contains the code that the thread executes without creating an additional method for the delegate.","pos":[2027,2162]},{"pos":[2303,2310],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[2314,2397],"content":"The scope of the parameters of an anonymous method is the <bpt id=\"p1\">*</bpt>anonymous-method-block<ept id=\"p1\">*</ept>.","source":"The scope of the parameters of an anonymous method is the *anonymous-method-block*."},{"content":"It is an error to have a jump statement, such as <bpt id=\"p1\">[</bpt>goto<ept id=\"p1\">](../../../csharp/language-reference/keywords/goto.md)</ept>, <bpt id=\"p2\">[</bpt>break<ept id=\"p2\">](../../../csharp/language-reference/keywords/break.md)</ept>, or <bpt id=\"p3\">[</bpt>continue<ept id=\"p3\">](../../../csharp/language-reference/keywords/continue.md)</ept>, inside the anonymous method block if the target is outside the block.","pos":[2404,2718],"source":"It is an error to have a jump statement, such as [goto](../../../csharp/language-reference/keywords/goto.md), [break](../../../csharp/language-reference/keywords/break.md), or [continue](../../../csharp/language-reference/keywords/continue.md), inside the anonymous method block if the target is outside the block."},{"content":"It is also an error to have a jump statement, such as <ph id=\"ph1\">`goto`</ph>, <ph id=\"ph2\">`break`</ph>, or <ph id=\"ph3\">`continue`</ph>, outside the anonymous method block if the target is inside the block.","pos":[2719,2874],"source":" It is also an error to have a jump statement, such as `goto`, `break`, or `continue`, outside the anonymous method block if the target is inside the block."},{"content":"The local variables and parameters whose scope contains an anonymous method declaration are called <bpt id=\"p1\">*</bpt>outer<ept id=\"p1\">*</ept> variables of the anonymous method.","pos":[2881,3022],"source":"The local variables and parameters whose scope contains an anonymous method declaration are called *outer* variables of the anonymous method."},{"content":"For example, in the following code segment, <ph id=\"ph1\">`n`</ph> is an outer variable:","pos":[3023,3092],"source":" For example, in the following code segment, `n` is an outer variable:"},{"content":"A reference to the outer variable <ph id=\"ph1\">`n`</ph> is said to be <bpt id=\"p1\">*</bpt>captured<ept id=\"p1\">*</ept> when the delegate is created.","pos":[3231,3323],"source":"A reference to the outer variable `n` is said to be *captured* when the delegate is created."},{"content":"Unlike local variables, the lifetime of a captured variable extends until the delegates that reference the anonymous methods are eligible for garbage collection.","pos":[3324,3485]},{"pos":[3492,3754],"content":"An anonymous method cannot access the <bpt id=\"p1\">[</bpt>in<ept id=\"p1\">](../../../csharp/language-reference/keywords/in.md)</ept>, <bpt id=\"p2\">[</bpt>ref<ept id=\"p2\">](../../../csharp/language-reference/keywords/ref.md)</ept> or <bpt id=\"p3\">[</bpt>out<ept id=\"p3\">](../../../csharp/language-reference/keywords/out-parameter-modifier.md)</ept> parameters of an outer scope.","source":"An anonymous method cannot access the [in](../../../csharp/language-reference/keywords/in.md), [ref](../../../csharp/language-reference/keywords/ref.md) or [out](../../../csharp/language-reference/keywords/out-parameter-modifier.md) parameters of an outer scope."},{"pos":[3761,3828],"content":"No unsafe code can be accessed within the <bpt id=\"p1\">*</bpt>anonymous-method-block<ept id=\"p1\">*</ept>.","source":"No unsafe code can be accessed within the *anonymous-method-block*."},{"pos":[3835,3958],"content":"Anonymous methods are not allowed on the left side of the <bpt id=\"p1\">[</bpt>is<ept id=\"p1\">](../../../csharp/language-reference/keywords/is.md)</ept> operator.","source":"Anonymous methods are not allowed on the left side of the [is](../../../csharp/language-reference/keywords/is.md) operator."},{"pos":[3967,3974],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example demonstrates two ways of instantiating a delegate:","pos":[3978,4050]},{"content":"Associating the delegate with an anonymous method.","pos":[4060,4110]},{"pos":[4120,4176],"content":"Associating the delegate with a named method (<ph id=\"ph1\">`DoWork`</ph>).","source":"Associating the delegate with a named method (`DoWork`)."},{"content":"In each case, a message is displayed when the delegate is invoked.","pos":[4183,4249]},{"pos":[4390,4398],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4402,4461],"content":"<bpt id=\"p1\">[</bpt>C# Reference<ept id=\"p1\">](../../../csharp/language-reference/index.md)</ept>","source":"[C# Reference](../../../csharp/language-reference/index.md)"},{"pos":[4464,4530],"content":"<bpt id=\"p1\">[</bpt>C# Programming Guide<ept id=\"p1\">](../../../csharp/programming-guide/index.md)</ept>","source":"[C# Programming Guide](../../../csharp/programming-guide/index.md)"},{"pos":[4533,4598],"content":"<bpt id=\"p1\">[</bpt>Delegates<ept id=\"p1\">](../../../csharp/programming-guide/delegates/index.md)</ept>","source":"[Delegates](../../../csharp/programming-guide/delegates/index.md)"},{"pos":[4601,4711],"content":"<bpt id=\"p1\">[</bpt>Lambda Expressions<ept id=\"p1\">](../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md)</ept>","source":"[Lambda Expressions](../../../csharp/programming-guide/statements-expressions-operators/lambda-expressions.md)"},{"pos":[4714,4805],"content":"<bpt id=\"p1\">[</bpt>Unsafe Code and Pointers<ept id=\"p1\">](../../../csharp/programming-guide/unsafe-code-pointers/index.md)</ept>","source":"[Unsafe Code and Pointers](../../../csharp/programming-guide/unsafe-code-pointers/index.md)"},{"pos":[4808,4883],"content":"<bpt id=\"p1\">[</bpt>Methods<ept id=\"p1\">](../../../csharp/programming-guide/classes-and-structs/methods.md)</ept>","source":"[Methods](../../../csharp/programming-guide/classes-and-structs/methods.md)"},{"pos":[4886,5020],"content":"<bpt id=\"p1\">[</bpt>Delegates with Named vs. Anonymous Methods<ept id=\"p1\">](../../../csharp/programming-guide/delegates/delegates-with-named-vs-anonymous-methods.md)</ept>","source":"[Delegates with Named vs. Anonymous Methods](../../../csharp/programming-guide/delegates/delegates-with-named-vs-anonymous-methods.md)"}]}