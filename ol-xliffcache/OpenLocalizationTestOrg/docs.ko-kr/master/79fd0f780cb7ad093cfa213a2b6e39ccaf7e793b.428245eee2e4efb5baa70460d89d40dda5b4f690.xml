{"content":"---\ntitle: \"&lt;caches&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 4651091b-3a20-40d8-b293-4408c0710143\ncaps.latest.revision: 7\nauthor: \"BrucePerlerMS\"\nms.author: \"bruceper\"\nmanager: \"mbaldwin\"\n---\n# &lt;caches&gt;\nRegisters the caches used for session tokens and token replay detection.  \n  \n \\<system.identityModel>  \n\\<identityConfiguration>  \n\\<caches>  \n  \n## Syntax  \n  \n```  \n<system.identityModel>  \n  <identityConfiguration>  \n    <caches>  \n    </caches>  \n  </identityConfiguration>  \n</system.identityModel>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n None  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<sessionSecurityTokenCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/sessionsecuritytokencache.md)|Registers a cache for session tokens with a service or a security token handler collection.|  \n|[\\<tokenReplayCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaycache.md)|Registers a token replay cache with a service or a security token handler collection.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)|Specifies service-level identity settings.|  \n|[\\<securityTokenHandlerConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)|Provides configuration for a collection of security token handlers.|  \n  \n## Remarks  \n A `<caches>` element can be specified at the service level under the `<identityConfiguration>` element or on the security token handler collection level under the `<securityTokenHandlerConfiguration>` element. Settings on a token handler collection override those specified on the service.  \n  \n The `<caches>` element is represented by the <xref:System.IdentityModel.Configuration.IdentityModelCachesElement> class. The configured caches are represented by the <xref:System.IdentityModel.Configuration.IdentityModelCaches> class.  \n  \n## Example  \n The following XML shows the configuration of a custom cache for holding session security tokens (<xref:System.IdentityModel.Tokens.SessionSecurityToken>). The configuration is taken from the `ClaimsAwareWebFarm` sample.  \n  \n```  \n<caches>  \n  <sessionSecurityTokenCache type=\"CacheLibrary.SharedSessionSecurityTokenCache, CacheLibrary\">  \n    <!--cacheServiceAddress points to the centralized session security token cache service running in the web farm.-->  \n    <cacheServiceAddress url=\"http://localhost:4161/SessionSecurityTokenCacheService.svc\" />  \n  </sessionSecurityTokenCache>  \n</caches>  \n```\n","nodes":[{"pos":[12,43],"content":"&lt;caches&gt; | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>caches<ph id=\"ph2\">&amp;gt;</ph> | Microsoft Docs","pos":[0,31],"source":"&lt;caches&gt; | Microsoft Docs"}]},{"pos":[352,366],"content":"&lt;caches&gt;","linkify":"&lt;caches&gt;","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>caches<ph id=\"ph2\">&amp;gt;</ph>","pos":[0,14],"source":"&lt;caches&gt;"}]},{"content":"Registers the caches used for session tokens and token replay detection.","pos":[367,439]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.identityModel&gt;","pos":[446,469],"source":"\\<system.identityModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;","pos":[472,496],"source":"\\<identityConfiguration>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>caches&gt;","pos":[499,508],"source":"\\<caches>"},{"pos":[517,523],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[686,709],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[713,793]},{"pos":[803,813],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"None","pos":[817,821]},{"pos":[831,845],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[852,859]},{"content":"Description","pos":[860,871]},{"pos":[912,1057],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>sessionSecurityTokenCache&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/sessionsecuritytokencache.md)</ept>","source":"[\\<sessionSecurityTokenCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/sessionsecuritytokencache.md)"},{"content":"Registers a cache for session tokens with a service or a security token handler collection.","pos":[1058,1149]},{"pos":[1154,1281],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>tokenReplayCache&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaycache.md)</ept>","source":"[\\<tokenReplayCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaycache.md)"},{"content":"Registers a token replay cache with a service or a security token handler collection.","pos":[1282,1367]},{"pos":[1378,1393],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[1400,1407]},{"content":"Description","pos":[1408,1419]},{"pos":[1460,1597],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)</ept>","source":"[\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)"},{"content":"Specifies service-level identity settings.","pos":[1598,1640]},{"pos":[1645,1806],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>securityTokenHandlerConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)</ept>","source":"[\\<securityTokenHandlerConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)"},{"content":"Provides configuration for a collection of security token handlers.","pos":[1807,1874]},{"pos":[1884,1891],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"A <ph id=\"ph1\">`&lt;caches&gt;`</ph> element can be specified at the service level under the <ph id=\"ph2\">`&lt;identityConfiguration&gt;`</ph> element or on the security token handler collection level under the <ph id=\"ph3\">`&lt;securityTokenHandlerConfiguration&gt;`</ph> element.","pos":[1895,2104],"source":"A `<caches>` element can be specified at the service level under the `<identityConfiguration>` element or on the security token handler collection level under the `<securityTokenHandlerConfiguration>` element."},{"content":"Settings on a token handler collection override those specified on the service.","pos":[2105,2184]},{"content":"The <ph id=\"ph1\">`&lt;caches&gt;`</ph> element is represented by the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Configuration.IdentityModelCachesElement&gt;</ph> class.","pos":[2191,2311],"source":"The `<caches>` element is represented by the <xref:System.IdentityModel.Configuration.IdentityModelCachesElement> class."},{"content":"The configured caches are represented by the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Configuration.IdentityModelCaches&gt;</ph> class.","pos":[2312,2425],"source":" The configured caches are represented by the <xref:System.IdentityModel.Configuration.IdentityModelCaches> class."},{"pos":[2434,2441],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following XML shows the configuration of a custom cache for holding session security tokens (<ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.SessionSecurityToken&gt;</ph>).","pos":[2445,2599],"source":"The following XML shows the configuration of a custom cache for holding session security tokens (<xref:System.IdentityModel.Tokens.SessionSecurityToken>)."},{"content":"The configuration is taken from the <ph id=\"ph1\">`ClaimsAwareWebFarm`</ph> sample.","pos":[2600,2664],"source":" The configuration is taken from the `ClaimsAwareWebFarm` sample."}]}