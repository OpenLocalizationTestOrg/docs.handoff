{"content":"---\ntitle: \"Multiple Contracts\"\nms.date: \"03/30/2017\"\nms.assetid: 2bef319b-fe9c-4d49-ac6c-dfb23eb35099\n---\n# Multiple Contracts\nThe Multiple Contracts sample demonstrates how to implement more than one contract on a service and how to configure endpoints for communicating with each of the implemented contracts. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md). The service has been modified to define two contracts, the `ICalculator` contract and the `ICalculatorSession` contract.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The service class implements both the `ICalculator` and `ICalculatorSession` contracts. Because one of the contracts requires a session, the service uses the <xref:System.ServiceModel.InstanceContextMode.PerSession> instance mode to maintain the state over the lifetime of the session.  \n  \n The service configuration has been modified to define two endpoints to expose each contract. The `ICalculator` endpoint is exposed at the base address using a `basicHttpBinding`. The `ICalculatorSession` endpoint is exposed at the baseaddress/session using a `wsHttpBinding` with the `bindingConfiguration` attribute set to `BindingWithSession`, as shown in the following sample configuration.  \n  \n```xml  \n<service   \n    name=\"Microsoft.ServiceModel.Samples.CalculatorService\"  \n    behaviorConfiguration=\"CalculatorServiceBehavior\">  \n  <!-- ICalculator endpoint is exposed using BasicBinding at the base  \n       address provided by host:   \n       http://localhost/servicemodelsamples/service.svc  -->  \n  <endpoint address=\"\"  \n            binding=\"basicHttpBinding\"  \n            contract=\"Microsoft.ServiceModel.Samples.ICalculator\" />  \n  <!-- ICalculatorSession endpoint is exposed using BindingWithSession  \n       at {baseaddress}/session:  \n       http://localhost/servicemodelsamples/service.svc/session -->  \n  <endpoint address=\"session\"  \n            binding=\"wsHttpBinding\"  \n            bindingConfiguration=\"BindingWithSession\"   \n           contract=\"Microsoft.ServiceModel.Samples.ICalculatorSession\" />  \n  ...  \n</service>  \n```  \n  \n The generated client code now includes a client class for both the original `ICalculator` contract and the new `ICalculatorSession` contract. The client configuration and code have been modified to communicate with each contract at the appropriate service endpoint.  \n  \n The client is a console windows application (.exe). The service is hosted by Internet Information Services (IIS).  \n  \n The client console window displays the operations sent to each of the endpoints, first the basic endpoint, followed by the secure endpoint.  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\MultipleContracts`  \n","nodes":[{"pos":[4,102],"embed":true,"restype":"x-metadata","content":"title: \"Multiple Contracts\"\nms.date: \"03/30/2017\"\nms.assetid: 2bef319b-fe9c-4d49-ac6c-dfb23eb35099","nodes":[{"content":"Multiple Contracts","nodes":[{"pos":[0,18],"content":"Multiple Contracts","nodes":[{"content":"Multiple Contracts","pos":[0,18]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[109,127],"content":"Multiple Contracts","linkify":"Multiple Contracts","nodes":[{"content":"Multiple Contracts","pos":[0,18]}]},{"content":"The Multiple Contracts sample demonstrates how to implement more than one contract on a service and how to configure endpoints for communicating with each of the implemented contracts.","pos":[128,312]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>.","pos":[313,425],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md)."},{"content":"The service has been modified to define two contracts, the <ph id=\"ph1\">`ICalculator`</ph> contract and the <ph id=\"ph2\">`ICalculatorSession`</ph> contract.","pos":[426,546],"source":" The service has been modified to define two contracts, the `ICalculator` contract and the `ICalculatorSession` contract."},{"pos":[554,661],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The service class implements both the <ph id=\"ph1\">`ICalculator`</ph> and <ph id=\"ph2\">`ICalculatorSession`</ph> contracts.","pos":[668,755],"source":"The service class implements both the `ICalculator` and `ICalculatorSession` contracts."},{"content":"Because one of the contracts requires a session, the service uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode.PerSession&gt;</ph> instance mode to maintain the state over the lifetime of the session.","pos":[756,953],"source":" Because one of the contracts requires a session, the service uses the <xref:System.ServiceModel.InstanceContextMode.PerSession> instance mode to maintain the state over the lifetime of the session."},{"content":"The service configuration has been modified to define two endpoints to expose each contract.","pos":[960,1052]},{"content":"The <ph id=\"ph1\">`ICalculator`</ph> endpoint is exposed at the base address using a <ph id=\"ph2\">`basicHttpBinding`</ph>.","pos":[1053,1138],"source":" The `ICalculator` endpoint is exposed at the base address using a `basicHttpBinding`."},{"content":"The <ph id=\"ph1\">`ICalculatorSession`</ph> endpoint is exposed at the baseaddress/session using a <ph id=\"ph2\">`wsHttpBinding`</ph> with the <ph id=\"ph3\">`bindingConfiguration`</ph> attribute set to <ph id=\"ph4\">`BindingWithSession`</ph>, as shown in the following sample configuration.","pos":[1139,1353],"source":" The `ICalculatorSession` endpoint is exposed at the baseaddress/session using a `wsHttpBinding` with the `bindingConfiguration` attribute set to `BindingWithSession`, as shown in the following sample configuration."},{"content":"The generated client code now includes a client class for both the original <ph id=\"ph1\">`ICalculator`</ph> contract and the new <ph id=\"ph2\">`ICalculatorSession`</ph> contract.","pos":[2220,2361],"source":"The generated client code now includes a client class for both the original `ICalculator` contract and the new `ICalculatorSession` contract."},{"content":"The client configuration and code have been modified to communicate with each contract at the appropriate service endpoint.","pos":[2362,2485]},{"content":"The client is a console windows application (.exe).","pos":[2492,2543]},{"content":"The service is hosted by Internet Information Services (IIS).","pos":[2544,2605]},{"content":"The client console window displays the operations sent to each of the endpoints, first the basic endpoint, followed by the secure endpoint.","pos":[2612,2751]},{"pos":[2761,2797],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2807,3006],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3016,3225],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3235,3443],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[3451,3583],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3637,3947],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3948,3998]}]}