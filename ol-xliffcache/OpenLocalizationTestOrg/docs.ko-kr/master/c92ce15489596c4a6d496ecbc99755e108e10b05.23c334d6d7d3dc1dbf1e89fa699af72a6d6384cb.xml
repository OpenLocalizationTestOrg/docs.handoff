{"content":"---\ntitle: \"&lt;filters&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 37a87222-ec78-4728-8105-9ca1bd961f0c\ncaps.latest.revision: 5\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n\n# &lt;filters&gt;\n\nThe `filters` element holds a collection of XPath filters used to control what kind of message is logged.\n\nFilters are applied only at the transport layer, specified by `logMessagesAtTransportLevel` is `true`. Service level and malformed message logging are not affected by filters.\n\nTo add a filter to the collection, use the `add` keyword. When one or more filters are defined, only messages that match at least one of the filters are logged. If no filter is defined, all messages pass through.\n\nFilters support the full XPath syntax, and are applied in the order they appear in the configuration file. A syntactically incorrect filter results in a configuration exception.\n\nThe following is an example of how to configure a filter that records only messages that have a SOAP Header section.\n\n```xml\n<messageLogging logEntireMessage=\"true\"\n                logMalformedMessages=\"true\"\n                logMessagesAtServiceLevel=\"true\"\n                logMessagesAtTransportLevel=\"true\"\n                maxMessagesToLog=\"420\">  \n  <filters>  \n    <add xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">  \n      /soap:Envelope/soap:Headers  \n    </add>  \n  </filters>  \n</messageLogging>\n```\n\n## See also\n\n <xref:System.ServiceModel.Configuration.DiagnosticSection>\n <xref:System.ServiceModel.Diagnostics>\n <xref:System.ServiceModel.Configuration.DiagnosticSection.MessageLogging%2A>\n <xref:System.ServiceModel.Configuration.MessageLoggingElement>\n <xref:System.ServiceModel.Configuration.MessageLoggingElement.Filters%2A>\n <xref:System.ServiceModel.Configuration.XPathMessageFilterElementCollection>\n <xref:System.ServiceModel.Configuration.XPathMessageFilterElement>\n <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>\n [Configuring Message Logging](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)\n [\\<messageLogging>](../../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)","nodes":[{"pos":[12,44],"content":"&lt;filters&gt; | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>filters<ph id=\"ph2\">&amp;gt;</ph> | Microsoft Docs","pos":[0,32],"source":"&lt;filters&gt; | Microsoft Docs"}]},{"pos":[343,358],"content":"&lt;filters&gt;","linkify":"&lt;filters&gt;","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>filters<ph id=\"ph2\">&amp;gt;</ph>","pos":[0,15],"source":"&lt;filters&gt;"}]},{"pos":[360,465],"content":"The <ph id=\"ph1\">`filters`</ph> element holds a collection of XPath filters used to control what kind of message is logged.","source":"The `filters` element holds a collection of XPath filters used to control what kind of message is logged."},{"content":"Filters are applied only at the transport layer, specified by <ph id=\"ph1\">`logMessagesAtTransportLevel`</ph> is <ph id=\"ph2\">`true`</ph>.","pos":[467,569],"source":"Filters are applied only at the transport layer, specified by `logMessagesAtTransportLevel` is `true`."},{"content":"Service level and malformed message logging are not affected by filters.","pos":[570,642]},{"content":"To add a filter to the collection, use the <ph id=\"ph1\">`add`</ph> keyword.","pos":[644,701],"source":"To add a filter to the collection, use the `add` keyword."},{"content":"When one or more filters are defined, only messages that match at least one of the filters are logged.","pos":[702,804]},{"content":"If no filter is defined, all messages pass through.","pos":[805,856]},{"content":"Filters support the full XPath syntax, and are applied in the order they appear in the configuration file.","pos":[858,964]},{"content":"A syntactically incorrect filter results in a configuration exception.","pos":[965,1035]},{"content":"The following is an example of how to configure a filter that records only messages that have a SOAP Header section.","pos":[1037,1153]},{"pos":[1557,1565],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[1568,2297],"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.DiagnosticSection&gt;</ph> <ph id=\"ph2\">&lt;xref:System.ServiceModel.Diagnostics&gt;</ph> <ph id=\"ph3\">&lt;xref:System.ServiceModel.Configuration.DiagnosticSection.MessageLogging%2A&gt;</ph> <ph id=\"ph4\">&lt;xref:System.ServiceModel.Configuration.MessageLoggingElement&gt;</ph> <ph id=\"ph5\">&lt;xref:System.ServiceModel.Configuration.MessageLoggingElement.Filters%2A&gt;</ph> <ph id=\"ph6\">&lt;xref:System.ServiceModel.Configuration.XPathMessageFilterElementCollection&gt;</ph> <ph id=\"ph7\">&lt;xref:System.ServiceModel.Configuration.XPathMessageFilterElement&gt;</ph> <ph id=\"ph8\">&lt;xref:System.ServiceModel.Dispatcher.XPathMessageFilter&gt;</ph> <bpt id=\"p1\"> [</bpt>Configuring Message Logging<ept id=\"p1\">](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)</ept><ph id=\"ph9\">\n</ph><bpt id=\"p2\"> [</bpt><ph id=\"ph10\">\\&lt;</ph>messageLogging&gt;<ept id=\"p2\">](../../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)</ept>","source":"<xref:System.ServiceModel.Configuration.DiagnosticSection>\n <xref:System.ServiceModel.Diagnostics>\n <xref:System.ServiceModel.Configuration.DiagnosticSection.MessageLogging%2A>\n <xref:System.ServiceModel.Configuration.MessageLoggingElement>\n <xref:System.ServiceModel.Configuration.MessageLoggingElement.Filters%2A>\n <xref:System.ServiceModel.Configuration.XPathMessageFilterElementCollection>\n <xref:System.ServiceModel.Configuration.XPathMessageFilterElement>\n <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>\n [Configuring Message Logging](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)\n [\\<messageLogging>](../../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)"}]}