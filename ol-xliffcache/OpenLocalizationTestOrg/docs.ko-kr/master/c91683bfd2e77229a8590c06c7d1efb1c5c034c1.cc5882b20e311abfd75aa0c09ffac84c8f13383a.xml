{"content":"---\ntitle: \"Workflow Transactions | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 6081fb02-c0f2-483d-97b8-f3b7dc03011d\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Workflow Transactions\n[!INCLUDE[wf1](../../../includes/wf1-md.md)] provides support for participating in <xref:System.Transactions> transactions by using the <xref:System.Activities.Statements.TransactionScope> activity to scope a transacted unit of work. While the <xref:System.Transactions.TransactionScope?displayProperty=fullName> must be explicitly completed the <xref:System.Activities.Statements.TransactionScope?displayProperty=fullName> activity implicitly calls complete on the transaction upon successful completion. Any activities that are contained in the <xref:System.Activities.Statements.TransactionScope.Body%2A> of the <xref:System.Activities.Statements.TransactionScope> activity participate in the transaction. WF can to flow transactions into a workflow through the use of the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity. Like the <xref:System.Activities.Statements.TransactionScope> activity, any activity contained in the <xref:System.ServiceModel.Activities.TransactedReceiveScope.Body%2A> participates in the transaction. WF ensures that activities dependent on <xref:System.Transactions.Transaction.Current%2A?displayProperty=fullName> works with both <xref:System.Activities.Statements.TransactionScope> and <xref:System.ServiceModel.Activities.TransactedReceiveScope>. If the system-provided activities do not address all requirements, custom activities can be built using the <xref:System.Activities.RuntimeTransactionHandle> to enable advanced flow and transaction control scenarios.  \n  \n In the following example, taken from the [Basic TransactionScope](../../../docs/framework/windows-workflow-foundation/samples/basic-transactionscope.md) sample, a workflow is constructed consisting of a <xref:System.Activities.Statements.Sequence> activity that contains child activities including a <xref:System.Activities.Statements.TransactionScope> activity. The <xref:System.Activities.Statements.TransactionScope.Body%2A> activities of the <xref:System.Activities.Statements.TransactionScope> execute under the transaction initialized by the <xref:System.Activities.Statements.TransactionScope> activity.  \n  \n```csharp  \nstatic Activity ScenarioOne()  \n{  \n    return new Sequence  \n    {  \n        Activities =  \n        {  \n            new WriteLine { Text = \"    Begin workflow\" },  \n  \n            new TransactionScope  \n            {  \n                Body = new Sequence  \n                {  \n                    Activities =   \n                    {  \n                        new WriteLine { Text = \"    Begin TransactionScope\" },  \n  \n                        new PrintTransactionId(),  \n  \n                        new TransactionScopeTest(),  \n  \n                        new WriteLine { Text = \"    End TransactionScope\" },  \n                    },  \n                },  \n            },  \n  \n            new WriteLine { Text = \"    End workflow\" },  \n        }  \n    };  \n}  \n  \n```  \n  \n [!INCLUDE[crdefault](../../../includes/crdefault-md.md)] the basic [Transactions](../../../docs/framework/windows-workflow-foundation/samples/transactions.md) samples, and the scenario based [Transactions](../../../docs/framework/windows-workflow-foundation/samples/transactions.md) samples. [!INCLUDE[crdefault](../../../includes/crdefault-md.md)] about using <xref:System.ServiceModel.Activities.TransactedReceiveScope>, see [Flowing Transactions into and out of Workflow Services](../../../docs/framework/wcf/feature-details/flowing-transactions-into-and-out-of-workflow-services.md).  \n  \n## See Also  \n <xref:System.Activities.Statements.TransactionScope>   \n <xref:System.Transactions.TransactionScope>   \n <xref:System.Transactions.Transaction.Current%2A?displayProperty=fullName>","nodes":[{"pos":[4,309],"embed":true,"restype":"x-metadata","content":"title: \"Workflow Transactions | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 6081fb02-c0f2-483d-97b8-f3b7dc03011d\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"Workflow Transactions | Microsoft Docs","nodes":[{"pos":[0,38],"content":"Workflow Transactions | Microsoft Docs","nodes":[{"content":"Workflow Transactions | Microsoft Docs","pos":[0,38]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[316,337],"content":"Workflow Transactions","linkify":"Workflow Transactions","nodes":[{"content":"Workflow Transactions","pos":[0,21]}]},{"content":"provides support for participating in <ph id=\"ph1\">&lt;xref:System.Transactions&gt;</ph> transactions by using the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity to scope a transacted unit of work.","pos":[383,571],"source":" provides support for participating in <xref:System.Transactions> transactions by using the <xref:System.Activities.Statements.TransactionScope> activity to scope a transacted unit of work."},{"content":"While the <ph id=\"ph1\">&lt;xref:System.Transactions.TransactionScope?displayProperty=fullName&gt;</ph> must be explicitly completed the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope?displayProperty=fullName&gt;</ph> activity implicitly calls complete on the transaction upon successful completion.","pos":[572,843],"source":" While the <xref:System.Transactions.TransactionScope?displayProperty=fullName> must be explicitly completed the <xref:System.Activities.Statements.TransactionScope?displayProperty=fullName> activity implicitly calls complete on the transaction upon successful completion."},{"content":"Any activities that are contained in the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TransactionScope.Body%2A&gt;</ph> of the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity participate in the transaction.","pos":[844,1046],"source":" Any activities that are contained in the <xref:System.Activities.Statements.TransactionScope.Body%2A> of the <xref:System.Activities.Statements.TransactionScope> activity participate in the transaction."},{"content":"WF can to flow transactions into a workflow through the use of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity.","pos":[1047,1184],"source":" WF can to flow transactions into a workflow through the use of the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity."},{"content":"Like the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity, any activity contained in the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope.Body%2A&gt;</ph> participates in the transaction.","pos":[1185,1388],"source":" Like the <xref:System.Activities.Statements.TransactionScope> activity, any activity contained in the <xref:System.ServiceModel.Activities.TransactedReceiveScope.Body%2A> participates in the transaction."},{"content":"WF ensures that activities dependent on <ph id=\"ph1\">&lt;xref:System.Transactions.Transaction.Current%2A?displayProperty=fullName&gt;</ph> works with both <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph>.","pos":[1389,1638],"source":" WF ensures that activities dependent on <xref:System.Transactions.Transaction.Current%2A?displayProperty=fullName> works with both <xref:System.Activities.Statements.TransactionScope> and <xref:System.ServiceModel.Activities.TransactedReceiveScope>."},{"content":"If the system-provided activities do not address all requirements, custom activities can be built using the <ph id=\"ph1\">&lt;xref:System.Activities.RuntimeTransactionHandle&gt;</ph> to enable advanced flow and transaction control scenarios.","pos":[1639,1855],"source":" If the system-provided activities do not address all requirements, custom activities can be built using the <xref:System.Activities.RuntimeTransactionHandle> to enable advanced flow and transaction control scenarios."},{"content":"In the following example, taken from the <bpt id=\"p1\">[</bpt>Basic TransactionScope<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/basic-transactionscope.md)</ept> sample, a workflow is constructed consisting of a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> activity that contains child activities including a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity.","pos":[1862,2224],"source":"In the following example, taken from the [Basic TransactionScope](../../../docs/framework/windows-workflow-foundation/samples/basic-transactionscope.md) sample, a workflow is constructed consisting of a <xref:System.Activities.Statements.Sequence> activity that contains child activities including a <xref:System.Activities.Statements.TransactionScope> activity."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TransactionScope.Body%2A&gt;</ph> activities of the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> execute under the transaction initialized by the <ph id=\"ph3\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity.","pos":[2225,2472],"source":" The <xref:System.Activities.Statements.TransactionScope.Body%2A> activities of the <xref:System.Activities.Statements.TransactionScope> execute under the transaction initialized by the <xref:System.Activities.Statements.TransactionScope> activity."},{"content":"the basic <bpt id=\"p1\">[</bpt>Transactions<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/transactions.md)</ept> samples, and the scenario based <bpt id=\"p2\">[</bpt>Transactions<ept id=\"p2\">](../../../docs/framework/windows-workflow-foundation/samples/transactions.md)</ept> samples.","pos":[3323,3557],"source":" the basic [Transactions](../../../docs/framework/windows-workflow-foundation/samples/transactions.md) samples, and the scenario based [Transactions](../../../docs/framework/windows-workflow-foundation/samples/transactions.md) samples."},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../includes/crdefault-md.md)]</ph> about using <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph>, see <bpt id=\"p1\">[</bpt>Flowing Transactions into and out of Workflow Services<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/flowing-transactions-into-and-out-of-workflow-services.md)</ept>.","pos":[3558,3853],"source":"[!INCLUDE[crdefault](../../../includes/crdefault-md.md)] about using <xref:System.ServiceModel.Activities.TransactedReceiveScope>, see [Flowing Transactions into and out of Workflow Services](../../../docs/framework/wcf/feature-details/flowing-transactions-into-and-out-of-workflow-services.md)."},{"pos":[3862,3870],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}