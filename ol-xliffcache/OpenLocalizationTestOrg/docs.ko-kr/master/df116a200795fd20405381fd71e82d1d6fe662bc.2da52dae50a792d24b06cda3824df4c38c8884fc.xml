{"content":"---\ntitle: \"using statement - C# Reference\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords:\n  - \"using statement [C#]\"\nms.assetid: afc355e6-f0b9-4240-94dd-0d93f17d9fc3\n---\n# using statement (C# Reference)\n\nProvides a convenient syntax that ensures the correct use of <xref:System.IDisposable> objects.\n\n## Example\n\nThe following example shows how to use the `using` statement.\n\n[!code-csharp[csrefKeywordsNamespace#4](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csrefKeywordsNamespace/CS/csrefKeywordsNamespace.cs#4)]\n\n## Remarks\n\n<xref:System.IO.File> and <xref:System.Drawing.Font> are examples of managed types that access unmanaged resources (in this case file handles and device contexts). There are many other kinds of unmanaged resources and class library types that encapsulate them. All such types must implement the <xref:System.IDisposable> interface.\n\nWhen the lifetime of an `IDisposable` object is limited to a single method, you should declare and instantiate it in the `using` statement. The `using` statement calls the <xref:System.IDisposable.Dispose%2A> method on the object in the correct way, and (when you use it as shown earlier) it also causes the object itself to go out of scope as soon as <xref:System.IDisposable.Dispose%2A> is called. Within the `using` block, the object is read-only and cannot be modified or reassigned.\n\nThe `using` statement ensures that <xref:System.IDisposable.Dispose%2A> is called even if an exception occurs within the `using` block. You can achieve the same result by putting the object inside a `try` block and then calling <xref:System.IDisposable.Dispose%2A> in a `finally` block; in fact, this is how the `using` statement is translated by the compiler. The code example earlier expands to the following code at compile time (note the extra curly braces to create the limited scope for the object):\n\n[!code-csharp[csrefKeywordsNamespace#5](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csrefKeywordsNamespace/CS/csrefKeywordsNamespace.cs#5)]\n\nFor more information about the `try`-`finally` statement, see the [try-finally](try-finally.md) topic.\n\nMultiple instances of a type can be declared in the `using` statement, as shown in the following example:\n\n[!code-csharp[csrefKeywordsNamespace#6](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csrefKeywordsNamespace/CS/csrefKeywordsNamespace.cs#6)]\n\nYou can instantiate the resource object and then pass the variable to the `using` statement, but this is not a best practice. In this case, after control leaves the `using` block, the object remains in scope but probably has no access to its unmanaged resources. In other words, it's not fully initialized anymore. If you try to use the object outside the `using` block, you risk causing an exception to be thrown. For this reason, it's generally better to instantiate the object in the `using` statement and limit its scope to the `using` block.\n\n[!code-csharp[csrefKeywordsNamespace#7](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csrefKeywordsNamespace/CS/csrefKeywordsNamespace.cs#7)]\n\nFor more information about disposing of `IDisposable` objects, see [Using objects that implement IDisposable](../../../standard/garbage-collection/using-objects.md).\n\n## C# language specification\n\nFor more information, see [The using statement](~/_csharplang/spec/statements.md#the-using-statement) in the [C# Language Specification](../language-specification/index.md). The language specification is the definitive source for C# syntax and usage.\n\n## See also\n\n- [C# Reference](../index.md)\n- [C# Programming Guide](../../programming-guide/index.md)\n- [C# Keywords](index.md)\n- [using Directive](using-directive.md)\n- [Garbage Collection](../../../standard/garbage-collection/index.md)\n- [Using objects that implement IDisposable](../../../standard/garbage-collection/using-objects.md)\n- [IDisposable interface](xref:System.IDisposable)","nodes":[{"pos":[4,180],"embed":true,"restype":"x-metadata","content":"title: \"using statement - C# Reference\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords:\n  - \"using statement [C#]\"\nms.assetid: afc355e6-f0b9-4240-94dd-0d93f17d9fc3","nodes":[{"content":"using statement - C# Reference","nodes":[{"pos":[0,30],"content":"using statement - C# Reference","nodes":[{"content":"using statement - C# Reference","pos":[0,30]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[187,217],"content":"using statement (C# Reference)","linkify":"using statement (C# Reference)","nodes":[{"content":"using statement (C# Reference)","pos":[0,30]}]},{"pos":[219,314],"content":"Provides a convenient syntax that ensures the correct use of <ph id=\"ph1\">&lt;xref:System.IDisposable&gt;</ph> objects.","source":"Provides a convenient syntax that ensures the correct use of <xref:System.IDisposable> objects."},{"pos":[319,326],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[328,389],"content":"The following example shows how to use the <ph id=\"ph1\">`using`</ph> statement.","source":"The following example shows how to use the `using` statement."},{"pos":[538,545],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.IO.File&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Drawing.Font&gt;</ph> are examples of managed types that access unmanaged resources (in this case file handles and device contexts).","pos":[547,710],"source":"<xref:System.IO.File> and <xref:System.Drawing.Font> are examples of managed types that access unmanaged resources (in this case file handles and device contexts)."},{"content":"There are many other kinds of unmanaged resources and class library types that encapsulate them.","pos":[711,807]},{"content":"All such types must implement the <ph id=\"ph1\">&lt;xref:System.IDisposable&gt;</ph> interface.","pos":[808,878],"source":" All such types must implement the <xref:System.IDisposable> interface."},{"content":"When the lifetime of an <ph id=\"ph1\">`IDisposable`</ph> object is limited to a single method, you should declare and instantiate it in the <ph id=\"ph2\">`using`</ph> statement.","pos":[880,1019],"source":"When the lifetime of an `IDisposable` object is limited to a single method, you should declare and instantiate it in the `using` statement."},{"content":"The <ph id=\"ph1\">`using`</ph> statement calls the <ph id=\"ph2\">&lt;xref:System.IDisposable.Dispose%2A&gt;</ph> method on the object in the correct way, and (when you use it as shown earlier) it also causes the object itself to go out of scope as soon as <ph id=\"ph3\">&lt;xref:System.IDisposable.Dispose%2A&gt;</ph> is called.","pos":[1020,1279],"source":" The `using` statement calls the <xref:System.IDisposable.Dispose%2A> method on the object in the correct way, and (when you use it as shown earlier) it also causes the object itself to go out of scope as soon as <xref:System.IDisposable.Dispose%2A> is called."},{"content":"Within the <ph id=\"ph1\">`using`</ph> block, the object is read-only and cannot be modified or reassigned.","pos":[1280,1367],"source":" Within the `using` block, the object is read-only and cannot be modified or reassigned."},{"content":"The <ph id=\"ph1\">`using`</ph> statement ensures that <ph id=\"ph2\">&lt;xref:System.IDisposable.Dispose%2A&gt;</ph> is called even if an exception occurs within the <ph id=\"ph3\">`using`</ph> block.","pos":[1369,1504],"source":"The `using` statement ensures that <xref:System.IDisposable.Dispose%2A> is called even if an exception occurs within the `using` block."},{"content":"You can achieve the same result by putting the object inside a <ph id=\"ph1\">`try`</ph> block and then calling <ph id=\"ph2\">&lt;xref:System.IDisposable.Dispose%2A&gt;</ph> in a <ph id=\"ph3\">`finally`</ph> block; in fact, this is how the <ph id=\"ph4\">`using`</ph> statement is translated by the compiler.","pos":[1505,1729],"source":" You can achieve the same result by putting the object inside a `try` block and then calling <xref:System.IDisposable.Dispose%2A> in a `finally` block; in fact, this is how the `using` statement is translated by the compiler."},{"content":"The code example earlier expands to the following code at compile time (note the extra curly braces to create the limited scope for the object):","pos":[1730,1874]},{"pos":[2020,2122],"content":"For more information about the <ph id=\"ph1\">`try`</ph><ph id=\"ph2\">-</ph><ph id=\"ph3\">`finally`</ph> statement, see the <bpt id=\"p1\">[</bpt>try-finally<ept id=\"p1\">](try-finally.md)</ept> topic.","source":"For more information about the `try`-`finally` statement, see the [try-finally](try-finally.md) topic."},{"pos":[2124,2229],"content":"Multiple instances of a type can be declared in the <ph id=\"ph1\">`using`</ph> statement, as shown in the following example:","source":"Multiple instances of a type can be declared in the `using` statement, as shown in the following example:"},{"content":"You can instantiate the resource object and then pass the variable to the <ph id=\"ph1\">`using`</ph> statement, but this is not a best practice.","pos":[2375,2500],"source":"You can instantiate the resource object and then pass the variable to the `using` statement, but this is not a best practice."},{"content":"In this case, after control leaves the <ph id=\"ph1\">`using`</ph> block, the object remains in scope but probably has no access to its unmanaged resources.","pos":[2501,2637],"source":" In this case, after control leaves the `using` block, the object remains in scope but probably has no access to its unmanaged resources."},{"content":"In other words, it's not fully initialized anymore.","pos":[2638,2689]},{"content":"If you try to use the object outside the <ph id=\"ph1\">`using`</ph> block, you risk causing an exception to be thrown.","pos":[2690,2789],"source":" If you try to use the object outside the `using` block, you risk causing an exception to be thrown."},{"content":"For this reason, it's generally better to instantiate the object in the <ph id=\"ph1\">`using`</ph> statement and limit its scope to the <ph id=\"ph2\">`using`</ph> block.","pos":[2790,2921],"source":" For this reason, it's generally better to instantiate the object in the `using` statement and limit its scope to the `using` block."},{"pos":[3067,3232],"content":"For more information about disposing of <ph id=\"ph1\">`IDisposable`</ph> objects, see <bpt id=\"p1\">[</bpt>Using objects that implement IDisposable<ept id=\"p1\">](../../../standard/garbage-collection/using-objects.md)</ept>.","source":"For more information about disposing of `IDisposable` objects, see [Using objects that implement IDisposable](../../../standard/garbage-collection/using-objects.md)."},{"pos":[3237,3262],"content":"C# language specification","linkify":"C# language specification","nodes":[{"content":"C# language specification","pos":[0,25]}]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>The using statement<ept id=\"p1\">](~/_csharplang/spec/statements.md#the-using-statement)</ept> in the <bpt id=\"p2\">[</bpt>C# Language Specification<ept id=\"p2\">](../language-specification/index.md)</ept>.","pos":[3264,3437],"source":"For more information, see [The using statement](~/_csharplang/spec/statements.md#the-using-statement) in the [C# Language Specification](../language-specification/index.md)."},{"content":"The language specification is the definitive source for C# syntax and usage.","pos":[3438,3514]},{"pos":[3519,3527],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3531,3558],"content":"<bpt id=\"p1\">[</bpt>C# Reference<ept id=\"p1\">](../index.md)</ept>","source":"[C# Reference](../index.md)"},{"pos":[3561,3617],"content":"<bpt id=\"p1\">[</bpt>C# Programming Guide<ept id=\"p1\">](../../programming-guide/index.md)</ept>","source":"[C# Programming Guide](../../programming-guide/index.md)"},{"pos":[3620,3643],"content":"<bpt id=\"p1\">[</bpt>C# Keywords<ept id=\"p1\">](index.md)</ept>","source":"[C# Keywords](index.md)"},{"pos":[3646,3683],"content":"<bpt id=\"p1\">[</bpt>using Directive<ept id=\"p1\">](using-directive.md)</ept>","source":"[using Directive](using-directive.md)"},{"pos":[3686,3753],"content":"<bpt id=\"p1\">[</bpt>Garbage Collection<ept id=\"p1\">](../../../standard/garbage-collection/index.md)</ept>","source":"[Garbage Collection](../../../standard/garbage-collection/index.md)"},{"pos":[3756,3853],"content":"<bpt id=\"p1\">[</bpt>Using objects that implement IDisposable<ept id=\"p1\">](../../../standard/garbage-collection/using-objects.md)</ept>","source":"[Using objects that implement IDisposable](../../../standard/garbage-collection/using-objects.md)"},{"pos":[3856,3904],"content":"<bpt id=\"p1\">[</bpt>IDisposable interface<ept id=\"p1\">](xref:System.IDisposable)</ept>","source":"[IDisposable interface](xref:System.IDisposable)"}]}