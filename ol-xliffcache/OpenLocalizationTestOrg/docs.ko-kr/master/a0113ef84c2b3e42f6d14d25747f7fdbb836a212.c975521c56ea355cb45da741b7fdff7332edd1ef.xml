{"content":"---\ntitle: \"Working with calendars\"\nms.date: \"04/01/2019\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"globalization [.NET], calendars\"\n  - \"calendars, global applications\"\n  - \"global applications, calendars\"\n  - \"world-ready applications, calendars\"\n  - \"international applications [.NET], calendars\"\n  - \"culture, calendars\"\nms.assetid: 0c1534e5-979b-4c8a-a588-1c24301aefb3\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Working with calendars\n\nAlthough a date and time value represents a moment in time, its string representation is culture-sensitive and depends both on the conventions used for displaying date and time values by a specific culture and on the calendar used by that culture. This topic explores the support for calendars in .NET and discusses the use of the calendar classes when working with date values.\n\n## Calendars in .NET\n\nAll calendars in .NET derive from the <xref:System.Globalization.Calendar?displayProperty=nameWithType> class, which provides the base calendar implementation. One of the classes that inherits from the <xref:System.Globalization.Calendar> class is the <xref:System.Globalization.EastAsianLunisolarCalendar> class, which is the base class for all lunisolar calendars. .NET includes the following calendar implementations:\n\n* <xref:System.Globalization.ChineseLunisolarCalendar>, which represents the Chinese lunisolar calendar.\n\n* <xref:System.Globalization.GregorianCalendar>, which represents the Gregorian calendar. This calendar is further divided into subtypes (such as Arabic and Middle East French) that are defined by the <xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType> enumeration. The <xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType> property specifies the subtype of the Gregorian calendar.\n\n* <xref:System.Globalization.HebrewCalendar>, which represents the Hebrew calendar.\n\n* <xref:System.Globalization.HijriCalendar>, which represents the Hijri calendar.\n\n* <xref:System.Globalization.JapaneseCalendar>, which represents the Japanese calendar.\n\n* <xref:System.Globalization.JapaneseLunisolarCalendar>, which represents the Japanese lunisolar calendar.\n\n* <xref:System.Globalization.JulianCalendar>, which represents the Julian calendar.\n\n* <xref:System.Globalization.KoreanCalendar>, which represents the Korean calendar.\n\n* <xref:System.Globalization.KoreanLunisolarCalendar>, which represents the Korean lunisolar calendar.\n\n* <xref:System.Globalization.PersianCalendar>, which represents the Persian calendar.\n\n* <xref:System.Globalization.TaiwanCalendar>, which represents the Taiwan calendar.\n\n* <xref:System.Globalization.TaiwanLunisolarCalendar>, which represents the Taiwan lunisolar calendar.\n\n* <xref:System.Globalization.ThaiBuddhistCalendar>, which represents the Thai Buddhist calendar.\n\n* <xref:System.Globalization.UmAlQuraCalendar>, which represents the Um Al Qura calendar.\n\nA calendar can be used in one of two ways:\n\n* As the calendar used by a specific culture. Each <xref:System.Globalization.CultureInfo> object has a current calendar, which is the calendar that the object is currently using. The string representations of all date and time values automatically reflect the current culture and its current calendar. Typically, the current calendar is the culture's default calendar. <xref:System.Globalization.CultureInfo> objects also have optional calendars, which include additional calendars that the culture can use.\n\n* As a standalone calendar independent of a specific culture. In this case, <xref:System.Globalization.Calendar> methods are used to express dates as values that reflect the calendar.\n\nNote that six calendar classes – <xref:System.Globalization.ChineseLunisolarCalendar>, <xref:System.Globalization.JapaneseLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, <xref:System.Globalization.KoreanLunisolarCalendar>, <xref:System.Globalization.PersianCalendar>, and <xref:System.Globalization.TaiwanLunisolarCalendar> – can be used only as standalone calendars. They are not used by any culture as either the default calendar or as an optional calendar.\n\n## Calendars and cultures\n\nEach culture has a default calendar, which is defined by the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property. The <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property returns an array of <xref:System.Globalization.Calendar> objects that specifies all the calendars supported by a particular culture, including that culture's default calendar.\n\nThe following example illustrates the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> properties. It creates `CultureInfo` objects for the Thai (Thailand) and Japanese (Japan) cultures and displays their default and optional calendars. Note that in both cases, the culture's default calendar is also included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> collection.\n\n[!code-csharp[Conceptual.Calendars#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/calendarinfo1.cs#1)]\n[!code-vb[Conceptual.Calendars#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/calendarinfo1.vb#1)]\n\nThe calendar currently in use by a particular <xref:System.Globalization.CultureInfo> object is defined by the culture's <xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType> property. A culture's <xref:System.Globalization.DateTimeFormatInfo> object is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> property. When a culture is created, its default value is the same as the value of the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property. However, you can change the culture's current calendar to any calendar contained in the array returned by the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property. If you try to set the current calendar to a calendar that is not included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property value, an <xref:System.ArgumentException> is thrown.\n\nThe following example changes the calendar used by the Arabic (Saudi Arabia) culture. It first instantiates a <xref:System.DateTime> value and displays it using the current culture - which, in this case, is English (United States) - and the current culture's calendar (which, in this case, is the Gregorian calendar). Next, it changes the current culture to Arabic (Saudi Arabia) and displays the date using its default Um Al-Qura calendar. It then calls the `CalendarExists` method to determine whether the Hijri calendar is supported by the Arabic (Saudi Arabia) culture. Because the calendar is supported, it changes the current calendar to Hijri and again displays the date. Note that in each case, the date is displayed using the current culture's current calendar.\n\n[!code-csharp[Conceptual.Calendars#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/changecalendar2.cs#2)]\n[!code-vb[Conceptual.Calendars#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/changecalendar2.vb#2)]\n\n## Dates and calendars\n\nWith the exception of the constructors that include a parameter of type <xref:System.Globalization.Calendar> and allow the elements of a date (that is, the month, the day, and the year) to reflect values in a designated calendar, both <xref:System.DateTime> and <xref:System.DateTimeOffset> values are always based on the Gregorian calendar. This means, for example, that the <xref:System.DateTime.Year%2A?displayProperty=nameWithType> property returns the year in the Gregorian calendar, and the <xref:System.DateTime.Day%2A?displayProperty=nameWithType> property returns the day of the month in the Gregorian calendar.\n\n> [!IMPORTANT]\n> It is important to remember that there is a difference between a date value and its string representation. The former is based on the Gregorian calendar; the latter is based on the current calendar of a specific culture.\n\nThe following example illustrates this difference between <xref:System.DateTime> properties and their corresponding <xref:System.Globalization.Calendar> methods. In the example, the current culture is Arabic (Egypt), and the current calendar is Um Al Qura. A <xref:System.DateTime> value is set to the fifteenth day of the seventh month of 2011. It is clear that this is interpreted as a Gregorian date, because these same values are returned by the <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> method when it uses the conventions of the invariant culture. The string representation of the date that is formatted using the conventions of the current culture is 14/08/32, which is the equivalent date in the Um Al Qura calendar. Next, members of `DateTime` and `Calendar` are used to return the day, the month, and the year of the <xref:System.DateTime> value. In each case, the values returned by <xref:System.DateTime> members reflect values in the Gregorian calendar, whereas values returned by <xref:System.Globalization.UmAlQuraCalendar> members reflect values in the Uum al-Qura calendar.\n\n[!code-csharp[Conceptual.Calendars#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/datesandcalendars2.cs#3)]\n[!code-vb[Conceptual.Calendars#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/datesandcalendars2.vb#3)]\n\n### Instantiating dates based on a calendar\n\nBecause <xref:System.DateTime> and <xref:System.DateTimeOffset> values are based on the Gregorian calendar, you must call an overloaded constructor that includes a parameter of type <xref:System.Globalization.Calendar> to instantiate a date value if you want to use the day, month, or year values from a different calendar. You can also call one of the overloads of a specific calendar's <xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType> method to instantiate a <xref:System.DateTime> object based on the values of a particular calendar.\n\nThe following example instantiates one <xref:System.DateTime> value by passing a <xref:System.Globalization.HebrewCalendar> object to a <xref:System.DateTime> constructor, and instantiates a second <xref:System.DateTime> value by calling the <xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType> method. Because the two values are created with identical values from the Hebrew calendar, the call to the <xref:System.DateTime.Equals%2A?displayProperty=nameWithType> method shows that the two <xref:System.DateTime> values are equal.\n\n[!code-csharp[Conceptual.Calendars#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/instantiatehcdate1.cs#4)]\n[!code-vb[Conceptual.Calendars#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/instantiatehcdate1.vb#4)]\n\n### Representing dates in the current calendar\n\nDate and time formatting methods always use the current calendar when converting dates to strings. This means that the string representation of the year, the month, and the day of the month reflect the current calendar, and do not necessarily reflect the Gregorian calendar.\n\nThe following example shows how the current calendar affects the string representation of a date. It changes the current culture to Chinese (Traditional, Taiwan), and instantiates a date value. It then displays the current calendar and the date, changes the current calendar to <xref:System.Globalization.TaiwanCalendar>, and displays the current calendar and date once again. The first time the date is displayed, it is represented as a date in the Gregorian calendar. The second time it is displayed, it is represented as a date in the Taiwan calendar.\n\n[!code-csharp[Conceptual.Calendars#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/currentcalendar1.cs#5)]\n[!code-vb[Conceptual.Calendars#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/currentcalendar1.vb#5)]\n\n### Representing dates in a non-current calendar\n\nTo represent a date using a calendar that is not the current calendar of a particular culture, you must call methods of that <xref:System.Globalization.Calendar> object. For example, the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods convert the year, month, and day to values that reflect a particular calendar.\n\n> [!WARNING]\n> Because some calendars are not optional calendars of any culture, representing dates in these calendars always requires that you call calendar methods. This is true of all calendars that derive from the <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, and <xref:System.Globalization.PersianCalendar> classes.\n\nThe following example uses a <xref:System.Globalization.JulianCalendar> object to instantiate a date, January 9, 1905, in the Julian calendar. When this date is displayed using the default (Gregorian) calendar, it is represented as January 22, 1905. Calls to individual <xref:System.Globalization.JulianCalendar> methods enable the date to be represented in the Julian calendar.\n\n[!code-csharp[Conceptual.Calendars#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/noncurrentcalendar1.cs#6)]\n[!code-vb[Conceptual.Calendars#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/noncurrentcalendar1.vb#6)]\n\n### Calendars and date ranges\n\nThe earliest date supported by a calendar is indicated by that calendar's <xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType> property. For the <xref:System.Globalization.GregorianCalendar> class, that date is January 1, 0001 C.E. Most of the other calendars in .NET support a later date. Trying to work with a date and time value that precedes a calendar's earliest supported date throws an <xref:System.ArgumentOutOfRangeException> exception.\n\nHowever, there is one important exception. The default (uninitialized) value of a <xref:System.DateTime> object and a <xref:System.DateTimeOffset> object is equal to the <xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType> value. If you try to format this date in a calendar that does not support January 1, 0001 C.E. and you do not provide a format specifier, the formatting method uses the \"s\" (sortable date/time pattern) format specifier instead of the \"G\" (general date/time pattern) format specifier. As a result, the formatting operation does not throw an <xref:System.ArgumentOutOfRangeException> exception. Instead, it returns the unsupported date. This is illustrated in the following example, which displays the value of <xref:System.DateTime.MinValue?displayProperty=nameWithType> when the current culture is set to Japanese (Japan) with the Japanese calendar, and to Arabic (Egypt) with the Um Al Qura calendar. It also sets the current culture to English (United States) and calls the <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> method with each of these <xref:System.Globalization.CultureInfo> objects. In each case, the date is displayed by using the sortable date/time pattern.\n\n[!code-csharp[Conceptual.Calendars#11](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/minsupporteddatetime1.cs#11)]\n[!code-vb[Conceptual.Calendars#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/minsupporteddatetime1.vb#11)]\n\n## Working with eras\n\nCalendars typically divide dates into eras. However, the <xref:System.Globalization.Calendar> classes in .NET do not support every era defined by a calendar, and most of the <xref:System.Globalization.Calendar> classes support only a single era. Only the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes support multiple eras.\n\n> [!IMPORTANT]\n>  The Reiwa era, a new era in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar>, begins on May 1, 2019. This change affects all applications that use these calendars. See the following articles for more information:\n> - [Handling a new era in the Japanese calendar in .NET](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/), which documents features added to .NET to support calendars with multiple eras and discusses best practices to use when handling multi-era calendars.\n> - [Prepare your application for the Japanese era change](/windows/uwp/design/globalizing/japanese-era-change), which provides information on testing your applications on Windows to ensure their readiness for the era change.\n> - [Summary of new Japanese Era updates for .NET Framework](https://support.microsoft.com/en-us/help/4477957/new-japanese-era-updates-for-net-framework), which lists .NET Framework updates for individual Windows versions that are related to the new Japanese calendar era, notes new .NET Framework features for multi-era support, and includes things to look for in testing your applications.\n\nAn era in most calendars denotes an extremely long time period. In the Gregorian calendar, for example, the current era spans more than two millennia. For the <xref:System.Globalization.JapaneseCalendar> and the <xref:System.Globalization.JapaneseLunisolarCalendar>, the two calendars that support multiple eras, this is not the case. An era corresponds to the period of an emperor's reign. Support for multiple eras, particularly when the upper limit of the current era is unknown, poses special challenges. \n\n### Eras and era names\n\nIn .NET, integers that represent the eras supported by a particular calendar implementation are stored in reverse order in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array. The current era (which is the era with the latest time range) is at index zero, and for <xref:System.Globalization.Calendar> classes that support multiple eras, each successive index reflects the previous era. The static <xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType> property defines the index of the current era in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array; it is a constant whose value is always zero. Individual <xref:System.Globalization.Calendar> classes also include static fields that return the value of the current era. They are listed in the following table.\n\n| Calendar class                                        | Current era field                                                 |\n| ----------------------------------------------------- | ----------------------------------------------------------------- |\n| <xref:System.Globalization.ChineseLunisolarCalendar>  | <xref:System.Globalization.ChineseLunisolarCalendar.ChineseEra>   |\n| <xref:System.Globalization.GregorianCalendar>         | <xref:System.Globalization.GregorianCalendar.ADEra>               |\n| <xref:System.Globalization.HebrewCalendar>            | <xref:System.Globalization.HebrewCalendar.HebrewEra>              |\n| <xref:System.Globalization.HijriCalendar>             | <xref:System.Globalization.HijriCalendar.HijriEra>                |\n| <xref:System.Globalization.JapaneseLunisolarCalendar> | <xref:System.Globalization.JapaneseLunisolarCalendar.JapaneseEra> |\n| <xref:System.Globalization.JulianCalendar>            | <xref:System.Globalization.JulianCalendar.JulianEra>              |\n| <xref:System.Globalization.KoreanCalendar>            | <xref:System.Globalization.KoreanCalendar.KoreanEra>              |\n| <xref:System.Globalization.KoreanLunisolarCalendar>   | <xref:System.Globalization.KoreanLunisolarCalendar.GregorianEra>  |\n| <xref:System.Globalization.PersianCalendar>           | <xref:System.Globalization.PersianCalendar.PersianEra>            |\n| <xref:System.Globalization.ThaiBuddhistCalendar>      | <xref:System.Globalization.ThaiBuddhistCalendar.ThaiBuddhistEra>  |\n| <xref:System.Globalization.UmAlQuraCalendar>          | <xref:System.Globalization.UmAlQuraCalendar.UmAlQuraEra>          |\n\nThe name that corresponds to a particular era number can be retrieved by passing the era number to the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> or <xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType> method. The following example calls these methods to retrieve information about era support in the <xref:System.Globalization.GregorianCalendar> class. It displays the Gregorian calendar date that corresponds to January 1 of the second year of the current era, as well as the Gregorian calendar date that corresponds to January 1 of the second year of each supported Japanese calendar era.\n\n[!code-csharp[Conceptual.Calendars#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/instantiatewithera1.cs)]\n[!code-vb[Conceptual.Calendars#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/instantiatewithera1.vb)]\n\nIn addition, the \"g\" custom date and time format string includes a calendar's era name in the string representation of a date and time. For more information, see [Custom date and time format strings](../../../docs/standard/base-types/custom-date-and-time-format-strings.md).\n\n### Instantiating a date with an era\n\nFor the two <xref:System.Globalization.Calendar> classes that support multiple eras, a date that consists of a particular year, month, and day of the month value can be ambiguous. For example, all eras supported by the <xref:System.Globalization.JapaneseCalendar> have years whose number is 1. Ordinarily, if an era is not specified, both date and time and calendar methods assume that values belong to the current era. This is true of the <xref:System.DateTime.%23ctor%2A> and <xref:System.DateTimeOffset.%23ctor%2A> constructors that include parameters of type <xref:System.Globalization.Calendar>, as well as the [JapaneseCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) and [JapaneseLunisolarCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) methods. The following example instantiates a date that represents January 1 of the second year of an unspecified era. If you execute the example when the Reiwa era is the current era, the date is interpreted as the second year of the Reiwa era. The era, 令和, precedes the year in the string returned by the <xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType> method and corresponds to January 1, 2020, in the Gregorian calendar. (The Reiwa era begins in the year 2019 of the Gregorian calendar.)\n\n[!code-csharp[A date in the current era](~/samples/snippets/standard/datetime/calendars/current-era/cs/program.cs)]\n[!code-vb[A date in the current era](~/samples/snippets/standard/datetime/calendars/current-era/vb/program.vb)]\n\nHowever, if the era changes, the intent of this code becomes ambiguous. Is the date intended to represent the second year of the current era, or is it intended to represent the second year of the Heisei era? There are two ways to avoid this ambiguity:\n\n- Instantiate the date and time value using the default <xref:System.Globalization.GregorianCalendar> class. You can then use the Japanese calendar or the Japanese Lunisolar calendar for the string representation of dates, as the following example shows.\n\n   [!code-csharp[Insantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/cs/program.cs)]\n   [!code-vb[Instantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/vb/program.vb)]\n\n- Call a date and time method that explicitly specifies an era. This includes the following methods:\n\n   - The <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method of the <xref:System.Globalization.JapaneseCalendar> or <xref:System.Globalization.JapaneseLunisolarCalendar> class.\n\n   - A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method, such as <xref:System.DateTime.Parse%2A>, <xref:System.DateTime.TryParse%2A>, <xref:System.DateTime.ParseExact%2A>, or <xref:System.DateTime.TryParseExact%2A>, that includes the string to be parsed and optionally a <xref:System.Globalization.DateTimeStyles> argument if the current culture is Japanese-Japan (\"ja-JP\") and that culture's calendar is the <xref:System.Globalization.JapaneseCalendar>. The string to be parsed must include the era.\n\n   - A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method that includes a `provider` parameter of type <xref:System.IFormatProvider>. `provider` must be either a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan (\"ja-JP\") culture whose current calendar is <xref:System.Globalization.JapaneseCalendar> or a <xref:System.Globalization.DateTimeFormatInfo> object whose <xref:System.Globalization.DateTimeFormatInfo.Calendar> property is <xref:System.Globalization.JapaneseCalendar>. The string to be parsed must include the era.\n\n   The following example uses three of these methods to instantiate a date and time in the Meiji era, which began on September 8, 1868, and ended on July 29, 1912. \n\n   [!code-csharp[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/cs/program.cs)]\n   [!code-vb[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/vb/program.vb)]\n\n> [!TIP]\n> When working with calendars that support multiple eras, *always* use the Gregorian date to instantiate a date, or specify the era when you instantiate a date and time based on that calendar.\n\nIn specifying an era to the <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method, you provide the index of the era in the calendar's <xref:System.Globalization.Calendar.Eras> property. For calendars whose eras are subject to change, however, these indexes are not constant values; the current era is at index 0, and the oldest era is at index `Eras.Length - 1`. When a new era is added to a calendar, the indexes of the previous eras increase by one. You can supply the appropriate era index as follows:\n\n- For dates in the current era, always use the calendar's <xref:System.Globalization.Calendar.CurrentEra> property.\n\n- For dates in a specified era, use the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> method to retrieve the index that corresponds to a specified era name. This requires that the <xref:System.Globalization.JapaneseCalendar> be the current calendar of the <xref:System.Globalization.CultureInfo> object that represents the ja-JP culture.  (This technique works for the <xref:System.Globalization.JapaneseLunisolarCalendar> as well, since it supports the same eras as the <xref:System.Globalization.JapaneseCalendar>.) The previous example illustrates this approach.\n\n### Calendars, eras, and date ranges: Relaxed range checks\n\nVery much like individual calendars have supported date ranges, eras in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes also have supported ranges. Previously, .NET used strict era range checks to ensure that an era-specific date was within the range of that era. That is, if a date is outside of the range of the specified era, the method throws an <xref:System.ArgumentOutOfRangeException>. Currently, .NET uses relaxed ranged checking by default. Updates to all versions of .NET introduced relaxed era range checks; the attempt to instantiate an era-specific date that is outside the range of the specified era \"overflows\" into the following era, and no exception is thrown.\n\nThe following example attempts to instantiate a date in the 65th year of the Showa era, which began on December 25, 1926 and ended on January 7, 1989. This date corresponds to January 9, 1990, which is outside the range of the Showa era in the <xref:System.Globalization.JapaneseCalendar>. As the output from the example illustrates, the date displayed by the example is January 9, 1990, in the second year of the Heisei era.\n\n   [!code-csharp[Relaxed range checks](~/samples/snippets/standard/datetime/calendars/relaxed-range/cs/program.cs)]\n   [!code-vb[Relaxed range checks](~/samples/snippets/standard/datetime/calendars/relaxed-range/vb/program.vb)]\n\nIf relaxed range checks are undesirable, you can restore strict range checks in a number of ways, depending on the version of .NET on which your application is running:\n\n- **.NET Core:** You can add the following to the *.netcore.runtime.json* config file:\n\n   ```json\n   \"runtimeOptions\": {\n      \"configProperties\": {\n         \"Switch.System.Globalization.EnforceJapaneseEraYearRanges\": true\n      } \n   }\n   ```\n\n- **.NET Framework 4.6 or later:** You can set the following AppContext switch:\n\n   ```xml\n   <?xml version=\"1.0\" encoding=\"utf-8\"?>\n   <configuration>\n     <runtime>\n       <AppContextSwitchOverrides value=\"Switch.System.Globalization.EnforceJapaneseEraYearRanges=true\" />\n     </runtime>\n   </configuration>\n   ```\n\n- **.NET Framework 4.5.2 or earlier:** You can set the following registry value:\n\n   |  |  |\n   |--|--|\n   |Key | HKEY_LOCAL_MACHINE\\Software\\Microsoft.NETFramework\\AppContext |\n   |Name | Switch.System.Globalization.EnforceJapaneseEraYearRanges |\n   |Type | REG_SZ |\n   |Value | 1 |\n\nWith strict range checks enabled, the previous example throws an <xref:System.ArgumentOutOfRangeException> and displays the following output:\n\n```console\nUnhandled Exception: System.ArgumentOutOfRangeException: Valid values are between 1 and 64, inclusive.\nParameter name: year\n   at System.Globalization.GregorianCalendarHelper.GetYearOffset(Int32 year, Int32 era, Boolean throwOnError)\n   at System.Globalization.GregorianCalendarHelper.ToDateTime(Int32 year, Int32 month, Int32 day, Int32 hour, Int32 minute, Int32 second, Int32 millisecond, Int32 era)\n   at Example.Main()\n```\n\n### Representing dates in calendars with multiple eras\n\nIf a <xref:System.Globalization.Calendar> object supports eras and is the current calendar of a <xref:System.Globalization.CultureInfo> object, the era is included in the string representation of a date and time value for the full date and time, long date, and short date patterns. The following example displays these date patterns when the current culture is Japan (Japanese) and the current calendar is the Japanese calendar.\n\n[!code-csharp[Conceptual.Calendars#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings1.cs#8)]\n[!code-vb[Conceptual.Calendars#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings1.vb#8)]\n\n> [!WARNING]\n> The <xref:System.Globalization.JapaneseCalendar> class is the only calendar class in .NET that both supports dates in more than one era and that can be the current calendar of a <xref:System.Globalization.CultureInfo> object - specifically, of a <xref:System.Globalization.CultureInfo> object that represents the Japanese (Japan) culture.\n\nFor all calendars, the \"g\" custom format specifier includes the era in the result string. The following example uses the \"MM-dd-yyyy g\" custom format string to include the era in the result string when the current calendar is the Gregorian calendar.\n\n[!code-csharp[Conceptual.Calendars#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings2.cs#9)]\n[!code-vb[Conceptual.Calendars#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings2.vb#9)]\n\nIn cases where the string representation of a date is expressed in a calendar that is not the current calendar, the <xref:System.Globalization.Calendar> class includes a <xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType> method that can be used along with the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods to unambiguously indicate a date as well as the era to which it belongs. The following example uses the <xref:System.Globalization.JapaneseLunisolarCalendar> class to provide an illustration. However, note that including a meaningful name or abbreviation instead of an integer for the era in the result string requires that you instantiate a <xref:System.Globalization.DateTimeFormatInfo> object and make <xref:System.Globalization.JapaneseCalendar> its current calendar. (The <xref:System.Globalization.JapaneseLunisolarCalendar> calendar cannot be the current calendar of any culture, but in this case the two calendars share the same eras.)\n\n[!code-csharp[Conceptual.Calendars#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings3.cs#10)]\n[!code-vb[Conceptual.Calendars#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings3.vb#10)]\n\nIn the Japanese calendars, the first year of an era is called Gannen (元年). For example, instead of Heisei 1, the first year of the Heisei era can be described as Heisei Gannen. .NET adopts this convention in formatting operations for dates and times formatted with the following standard or custom date and time format strings when they are used with a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan (\"ja-JP\") culture with the <xref:System.Globalization.JapaneseCalendar> class:\n\n- [The long date pattern](../base-types/standard-date-and-time-format-strings.md#LongDate), indicated by the \"D\" standard date and time format string.\n- [The full date long time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime), indicated by the \"F\" standard date and time format string.\n- [The full date short time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime), indicated by the \"f\" standard date and time format string.\n- [The year/month pattern](../base-types/standard-date-and-time-format-strings.md#YearMonth), indicated by the Y\" or \"y\" standard date and time format string.\n- [The \"ggy'年'\" or \"ggy年\" [custom date and time format string](../base-types/custom-date-and-time-format-strings.md).\n\nFor example, the following example displays a date in the first year of the Heisei era in the <xref:System.Globalization.JapaneseCalendar> .\n\n   [!code-csharp[gannen](~/samples/snippets/standard/datetime/calendars/gannen/cs/program.cs)]\n   [!code-vb[gannen](~/samples/snippets/standard/datetime/calendars/gannen/vb/gannen-fmt.vb)]\n\nIf this behavior is undesirable in formatting operations, you can restore the previous behavior, which always represents the first year of an era as “1” rather than “Gannen”, by doing the following, depending on the version of .NET:\n\n- **.NET Core:** You can add the following to the *.netcore.runtime.json* config file:\n\n   ```json\n   \"runtimeOptions\": {\n      \"configProperties\": {\n         \"Switch.System.Globalization.FormatJapaneseFirstYearAsANumber\": true\n      } \n   }\n   ```\n\n- **.NET Framework 4.6 or later:** You can set the following AppContext switch:\n\n   ```xml\n   <?xml version=\"1.0\" encoding=\"utf-8\"?>\n   <configuration>\n     <runtime>\n       <AppContextSwitchOverrides value=\"Switch.System.Globalization.FormatJapaneseFirstYearAsANumber=true\" />\n     </runtime>\n   </configuration>\n   ```\n\n- **.NET Framework 4.5.2 or earlier:** You can set the following registry value:\n\n   |  |  |\n   |--|--|\n   |Key | HKEY_LOCAL_MACHINE\\Software\\Microsoft.NETFramework\\AppContext |\n   |Name | Switch.System.Globalization.FormatJapaneseFirstYearAsANumber |\n   |Type | REG_SZ |\n   |Value | 1 |\n\nWith gannen support in formatting operations disabled, the previous example displays the following output:\n\n```console\nJapanese calendar date: 平成1年8月18日 (Gregorian: Friday, August 18, 1989)\n```\n\n.NET has also been updated so that date and time parsing operations support strings that contain the year represented as either \"1\" or Gannen. Although you should not need to do this, you can restore the previous behavior to recognizes only “1” as the first year of an era. You can do this as follows, depending on the version of .NET:\n\n- **.NET Core:** You can add the following to the *.netcore.runtime.json* config file:\n\n   ```json\n   \"runtimeOptions\": {\n      \"configProperties\": {\n         \"Switch.System.Globalization.EnforceLegacyJapaneseDateParsing\": true\n      } \n   }\n   ```\n\n- **.NET Framework 4.6 or later:** You can set the following AppContext switch:\n\n   ```xml\n   <?xml version=\"1.0\" encoding=\"utf-8\"?>\n   <configuration>\n     <runtime>\n       <AppContextSwitchOverrides value=\"Switch.System.Globalization.EnforceLegacyJapaneseDateParsing=true\" />\n     </runtime>\n   </configuration>\n   ```\n\n- **.NET Framework 4.5.2 or earlier:** You can set the following registry value:\n\n   |  |  |\n   |--|--|  \n   |Key | HKEY_LOCAL_MACHINE\\Software\\Microsoft.NETFramework\\AppContext |\n   |Name | Switch.System.Globalization.EnforceLegacyJapaneseDateParsing |\n   |Type | REG_SZ |\n   |Value | 1 | \n\n## See also\n\n- [How to: Display dates in non-Gregorian calendars](../../../docs/standard/base-types/how-to-display-dates-in-non-gregorian-calendars.md)\n- [Sample: Calendar week range utility](https://code.msdn.microsoft.com/NET-Framework-4-Calendar-3360a84a)\n- [Calendar class](xref:System.Globalization.Calendar)\n","nodes":[{"pos":[4,463],"embed":true,"restype":"x-metadata","content":"title: \"Working with calendars\"\nms.date: \"04/01/2019\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"globalization [.NET], calendars\"\n  - \"calendars, global applications\"\n  - \"global applications, calendars\"\n  - \"world-ready applications, calendars\"\n  - \"international applications [.NET], calendars\"\n  - \"culture, calendars\"\nms.assetid: 0c1534e5-979b-4c8a-a588-1c24301aefb3\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Working with calendars","nodes":[{"pos":[0,22],"content":"Working with calendars","nodes":[{"content":"Working with calendars","pos":[0,22]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[470,492],"content":"Working with calendars","linkify":"Working with calendars","nodes":[{"content":"Working with calendars","pos":[0,22]}]},{"content":"Although a date and time value represents a moment in time, its string representation is culture-sensitive and depends both on the conventions used for displaying date and time values by a specific culture and on the calendar used by that culture.","pos":[494,741]},{"content":"This topic explores the support for calendars in .NET and discusses the use of the calendar classes when working with date values.","pos":[742,872]},{"pos":[877,894],"content":"Calendars in .NET","linkify":"Calendars in .NET","nodes":[{"content":"Calendars in .NET","pos":[0,17]}]},{"content":"All calendars in .NET derive from the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar?displayProperty=nameWithType&gt;</ph> class, which provides the base calendar implementation.","pos":[896,1055],"source":"All calendars in .NET derive from the <xref:System.Globalization.Calendar?displayProperty=nameWithType> class, which provides the base calendar implementation."},{"content":"One of the classes that inherits from the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> class is the <ph id=\"ph2\">&lt;xref:System.Globalization.EastAsianLunisolarCalendar&gt;</ph> class, which is the base class for all lunisolar calendars.","pos":[1056,1262],"source":" One of the classes that inherits from the <xref:System.Globalization.Calendar> class is the <xref:System.Globalization.EastAsianLunisolarCalendar> class, which is the base class for all lunisolar calendars."},{"content":".NET includes the following calendar implementations:","pos":[1263,1316]},{"pos":[1320,1422],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.ChineseLunisolarCalendar&gt;</ph>, which represents the Chinese lunisolar calendar.","source":"<xref:System.Globalization.ChineseLunisolarCalendar>, which represents the Chinese lunisolar calendar."},{"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.GregorianCalendar&gt;</ph>, which represents the Gregorian calendar.","pos":[1426,1513],"source":"<xref:System.Globalization.GregorianCalendar>, which represents the Gregorian calendar."},{"content":"This calendar is further divided into subtypes (such as Arabic and Middle East French) that are defined by the <ph id=\"ph1\">&lt;xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType&gt;</ph> enumeration.","pos":[1514,1717],"source":" This calendar is further divided into subtypes (such as Arabic and Middle East French) that are defined by the <xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType> enumeration."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType&gt;</ph> property specifies the subtype of the Gregorian calendar.","pos":[1718,1870],"source":" The <xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType> property specifies the subtype of the Gregorian calendar."},{"pos":[1874,1955],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.HebrewCalendar&gt;</ph>, which represents the Hebrew calendar.","source":"<xref:System.Globalization.HebrewCalendar>, which represents the Hebrew calendar."},{"pos":[1959,2038],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.HijriCalendar&gt;</ph>, which represents the Hijri calendar.","source":"<xref:System.Globalization.HijriCalendar>, which represents the Hijri calendar."},{"pos":[2042,2127],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph>, which represents the Japanese calendar.","source":"<xref:System.Globalization.JapaneseCalendar>, which represents the Japanese calendar."},{"pos":[2131,2235],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph>, which represents the Japanese lunisolar calendar.","source":"<xref:System.Globalization.JapaneseLunisolarCalendar>, which represents the Japanese lunisolar calendar."},{"pos":[2239,2320],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.JulianCalendar&gt;</ph>, which represents the Julian calendar.","source":"<xref:System.Globalization.JulianCalendar>, which represents the Julian calendar."},{"pos":[2324,2405],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.KoreanCalendar&gt;</ph>, which represents the Korean calendar.","source":"<xref:System.Globalization.KoreanCalendar>, which represents the Korean calendar."},{"pos":[2409,2509],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.KoreanLunisolarCalendar&gt;</ph>, which represents the Korean lunisolar calendar.","source":"<xref:System.Globalization.KoreanLunisolarCalendar>, which represents the Korean lunisolar calendar."},{"pos":[2513,2596],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.PersianCalendar&gt;</ph>, which represents the Persian calendar.","source":"<xref:System.Globalization.PersianCalendar>, which represents the Persian calendar."},{"pos":[2600,2681],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.TaiwanCalendar&gt;</ph>, which represents the Taiwan calendar.","source":"<xref:System.Globalization.TaiwanCalendar>, which represents the Taiwan calendar."},{"pos":[2685,2785],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.TaiwanLunisolarCalendar&gt;</ph>, which represents the Taiwan lunisolar calendar.","source":"<xref:System.Globalization.TaiwanLunisolarCalendar>, which represents the Taiwan lunisolar calendar."},{"pos":[2789,2883],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.ThaiBuddhistCalendar&gt;</ph>, which represents the Thai Buddhist calendar.","source":"<xref:System.Globalization.ThaiBuddhistCalendar>, which represents the Thai Buddhist calendar."},{"pos":[2887,2974],"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.UmAlQuraCalendar&gt;</ph>, which represents the Um Al Qura calendar.","source":"<xref:System.Globalization.UmAlQuraCalendar>, which represents the Um Al Qura calendar."},{"content":"A calendar can be used in one of two ways:","pos":[2976,3018]},{"content":"As the calendar used by a specific culture.","pos":[3022,3065]},{"content":"Each <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object has a current calendar, which is the calendar that the object is currently using.","pos":[3066,3199],"source":" Each <xref:System.Globalization.CultureInfo> object has a current calendar, which is the calendar that the object is currently using."},{"content":"The string representations of all date and time values automatically reflect the current culture and its current calendar.","pos":[3200,3322]},{"content":"Typically, the current calendar is the culture's default calendar.","pos":[3323,3389]},{"content":"<ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> objects also have optional calendars, which include additional calendars that the culture can use.","pos":[3390,3528],"source":"<xref:System.Globalization.CultureInfo> objects also have optional calendars, which include additional calendars that the culture can use."},{"content":"As a standalone calendar independent of a specific culture.","pos":[3532,3591]},{"content":"In this case, <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> methods are used to express dates as values that reflect the calendar.","pos":[3592,3713],"source":" In this case, <xref:System.Globalization.Calendar> methods are used to express dates as values that reflect the calendar."},{"content":"Note that six calendar classes – <ph id=\"ph1\">&lt;xref:System.Globalization.ChineseLunisolarCalendar&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Globalization.JulianCalendar&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.Globalization.KoreanLunisolarCalendar&gt;</ph>, <ph id=\"ph5\">&lt;xref:System.Globalization.PersianCalendar&gt;</ph>, and <ph id=\"ph6\">&lt;xref:System.Globalization.TaiwanLunisolarCalendar&gt;</ph> – can be used only as standalone calendars.","pos":[3715,4098],"source":"Note that six calendar classes – <xref:System.Globalization.ChineseLunisolarCalendar>, <xref:System.Globalization.JapaneseLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, <xref:System.Globalization.KoreanLunisolarCalendar>, <xref:System.Globalization.PersianCalendar>, and <xref:System.Globalization.TaiwanLunisolarCalendar> – can be used only as standalone calendars."},{"content":"They are not used by any culture as either the default calendar or as an optional calendar.","pos":[4099,4190]},{"pos":[4195,4217],"content":"Calendars and cultures","linkify":"Calendars and cultures","nodes":[{"content":"Calendars and cultures","pos":[0,22]}]},{"content":"Each culture has a default calendar, which is defined by the <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[4219,4370],"source":"Each culture has a default calendar, which is defined by the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType&gt;</ph> property returns an array of <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar&gt;</ph> objects that specifies all the calendars supported by a particular culture, including that culture's default calendar.","pos":[4371,4649],"source":" The <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property returns an array of <xref:System.Globalization.Calendar> objects that specifies all the calendars supported by a particular culture, including that culture's default calendar."},{"content":"The following example illustrates the <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType&gt;</ph> properties.","pos":[4651,4875],"source":"The following example illustrates the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> properties."},{"content":"It creates <ph id=\"ph1\">`CultureInfo`</ph> objects for the Thai (Thailand) and Japanese (Japan) cultures and displays their default and optional calendars.","pos":[4876,5013],"source":" It creates `CultureInfo` objects for the Thai (Thailand) and Japanese (Japan) cultures and displays their default and optional calendars."},{"content":"Note that in both cases, the culture's default calendar is also included in the <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType&gt;</ph> collection.","pos":[5014,5195],"source":" Note that in both cases, the culture's default calendar is also included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> collection."},{"content":"The calendar currently in use by a particular <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object is defined by the culture's <ph id=\"ph2\">&lt;xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[5463,5681],"source":"The calendar currently in use by a particular <xref:System.Globalization.CultureInfo> object is defined by the culture's <xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType> property."},{"content":"A culture's <ph id=\"ph1\">&lt;xref:System.Globalization.DateTimeFormatInfo&gt;</ph> object is returned by the <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[5682,5863],"source":" A culture's <xref:System.Globalization.DateTimeFormatInfo> object is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> property."},{"content":"When a culture is created, its default value is the same as the value of the <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[5864,6031],"source":" When a culture is created, its default value is the same as the value of the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property."},{"content":"However, you can change the culture's current calendar to any calendar contained in the array returned by the <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[6032,6241],"source":" However, you can change the culture's current calendar to any calendar contained in the array returned by the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property."},{"content":"If you try to set the current calendar to a calendar that is not included in the <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType&gt;</ph> property value, an <ph id=\"ph2\">&lt;xref:System.ArgumentException&gt;</ph> is thrown.","pos":[6242,6474],"source":" If you try to set the current calendar to a calendar that is not included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property value, an <xref:System.ArgumentException> is thrown."},{"content":"The following example changes the calendar used by the Arabic (Saudi Arabia) culture.","pos":[6476,6561]},{"content":"It first instantiates a <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value and displays it using the current culture - which, in this case, is English (United States) - and the current culture's calendar (which, in this case, is the Gregorian calendar).","pos":[6562,6793],"source":" It first instantiates a <xref:System.DateTime> value and displays it using the current culture - which, in this case, is English (United States) - and the current culture's calendar (which, in this case, is the Gregorian calendar)."},{"content":"Next, it changes the current culture to Arabic (Saudi Arabia) and displays the date using its default Um Al-Qura calendar.","pos":[6794,6916]},{"content":"It then calls the <ph id=\"ph1\">`CalendarExists`</ph> method to determine whether the Hijri calendar is supported by the Arabic (Saudi Arabia) culture.","pos":[6917,7049],"source":" It then calls the `CalendarExists` method to determine whether the Hijri calendar is supported by the Arabic (Saudi Arabia) culture."},{"content":"Because the calendar is supported, it changes the current calendar to Hijri and again displays the date.","pos":[7050,7154]},{"content":"Note that in each case, the date is displayed using the current culture's current calendar.","pos":[7155,7246]},{"pos":[7521,7540],"content":"Dates and calendars","linkify":"Dates and calendars","nodes":[{"content":"Dates and calendars","pos":[0,19]}]},{"content":"With the exception of the constructors that include a parameter of type <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> and allow the elements of a date (that is, the month, the day, and the year) to reflect values in a designated calendar, both <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.DateTimeOffset&gt;</ph> values are always based on the Gregorian calendar.","pos":[7542,7883],"source":"With the exception of the constructors that include a parameter of type <xref:System.Globalization.Calendar> and allow the elements of a date (that is, the month, the day, and the year) to reflect values in a designated calendar, both <xref:System.DateTime> and <xref:System.DateTimeOffset> values are always based on the Gregorian calendar."},{"content":"This means, for example, that the <ph id=\"ph1\">&lt;xref:System.DateTime.Year%2A?displayProperty=nameWithType&gt;</ph> property returns the year in the Gregorian calendar, and the <ph id=\"ph2\">&lt;xref:System.DateTime.Day%2A?displayProperty=nameWithType&gt;</ph> property returns the day of the month in the Gregorian calendar.","pos":[7884,8162],"source":" This means, for example, that the <xref:System.DateTime.Year%2A?displayProperty=nameWithType> property returns the year in the Gregorian calendar, and the <xref:System.DateTime.Day%2A?displayProperty=nameWithType> property returns the day of the month in the Gregorian calendar."},{"pos":[8166,8401],"content":"[!IMPORTANT]\nIt is important to remember that there is a difference between a date value and its string representation. The former is based on the Gregorian calendar; the latter is based on the current calendar of a specific culture.","leadings":["","> "],"nodes":[{"content":"It is important to remember that there is a difference between a date value and its string representation. The former is based on the Gregorian calendar; the latter is based on the current calendar of a specific culture.","pos":[13,233],"nodes":[{"content":"It is important to remember that there is a difference between a date value and its string representation.","pos":[0,106]},{"content":"The former is based on the Gregorian calendar; the latter is based on the current calendar of a specific culture.","pos":[107,220]}]}]},{"content":"The following example illustrates this difference between <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> properties and their corresponding <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar&gt;</ph> methods.","pos":[8403,8564],"source":"The following example illustrates this difference between <xref:System.DateTime> properties and their corresponding <xref:System.Globalization.Calendar> methods."},{"content":"In the example, the current culture is Arabic (Egypt), and the current calendar is Um Al Qura.","pos":[8565,8659]},{"content":"A <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value is set to the fifteenth day of the seventh month of 2011.","pos":[8660,8748],"source":" A <xref:System.DateTime> value is set to the fifteenth day of the seventh month of 2011."},{"content":"It is clear that this is interpreted as a Gregorian date, because these same values are returned by the <ph id=\"ph1\">&lt;xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType&gt;</ph> method when it uses the conventions of the invariant culture.","pos":[8749,9019],"source":" It is clear that this is interpreted as a Gregorian date, because these same values are returned by the <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> method when it uses the conventions of the invariant culture."},{"content":"The string representation of the date that is formatted using the conventions of the current culture is 14/08/32, which is the equivalent date in the Um Al Qura calendar.","pos":[9020,9190]},{"content":"Next, members of <ph id=\"ph1\">`DateTime`</ph> and <ph id=\"ph2\">`Calendar`</ph> are used to return the day, the month, and the year of the <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> value.","pos":[9191,9322],"source":" Next, members of `DateTime` and `Calendar` are used to return the day, the month, and the year of the <xref:System.DateTime> value."},{"content":"In each case, the values returned by <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> members reflect values in the Gregorian calendar, whereas values returned by <ph id=\"ph2\">&lt;xref:System.Globalization.UmAlQuraCalendar&gt;</ph> members reflect values in the Uum al-Qura calendar.","pos":[9323,9556],"source":" In each case, the values returned by <xref:System.DateTime> members reflect values in the Gregorian calendar, whereas values returned by <xref:System.Globalization.UmAlQuraCalendar> members reflect values in the Uum al-Qura calendar."},{"pos":[9838,9877],"content":"Instantiating dates based on a calendar","linkify":"Instantiating dates based on a calendar","nodes":[{"content":"Instantiating dates based on a calendar","pos":[0,39]}]},{"content":"Because <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> values are based on the Gregorian calendar, you must call an overloaded constructor that includes a parameter of type <ph id=\"ph3\">&lt;xref:System.Globalization.Calendar&gt;</ph> to instantiate a date value if you want to use the day, month, or year values from a different calendar.","pos":[9879,10202],"source":"Because <xref:System.DateTime> and <xref:System.DateTimeOffset> values are based on the Gregorian calendar, you must call an overloaded constructor that includes a parameter of type <xref:System.Globalization.Calendar> to instantiate a date value if you want to use the day, month, or year values from a different calendar."},{"content":"You can also call one of the overloads of a specific calendar's <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType&gt;</ph> method to instantiate a <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> object based on the values of a particular calendar.","pos":[10203,10446],"source":" You can also call one of the overloads of a specific calendar's <xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType> method to instantiate a <xref:System.DateTime> object based on the values of a particular calendar."},{"content":"The following example instantiates one <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value by passing a <ph id=\"ph2\">&lt;xref:System.Globalization.HebrewCalendar&gt;</ph> object to a <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> constructor, and instantiates a second <ph id=\"ph4\">&lt;xref:System.DateTime&gt;</ph> value by calling the <ph id=\"ph5\">&lt;xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType&gt;</ph> method.","pos":[10448,10903],"source":"The following example instantiates one <xref:System.DateTime> value by passing a <xref:System.Globalization.HebrewCalendar> object to a <xref:System.DateTime> constructor, and instantiates a second <xref:System.DateTime> value by calling the <xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType> method."},{"content":"Because the two values are created with identical values from the Hebrew calendar, the call to the <ph id=\"ph1\">&lt;xref:System.DateTime.Equals%2A?displayProperty=nameWithType&gt;</ph> method shows that the two <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> values are equal.","pos":[10904,11131],"source":" Because the two values are created with identical values from the Hebrew calendar, the call to the <xref:System.DateTime.Equals%2A?displayProperty=nameWithType> method shows that the two <xref:System.DateTime> values are equal."},{"pos":[11413,11455],"content":"Representing dates in the current calendar","linkify":"Representing dates in the current calendar","nodes":[{"content":"Representing dates in the current calendar","pos":[0,42]}]},{"content":"Date and time formatting methods always use the current calendar when converting dates to strings.","pos":[11457,11555]},{"content":"This means that the string representation of the year, the month, and the day of the month reflect the current calendar, and do not necessarily reflect the Gregorian calendar.","pos":[11556,11731]},{"content":"The following example shows how the current calendar affects the string representation of a date.","pos":[11733,11830]},{"content":"It changes the current culture to Chinese (Traditional, Taiwan), and instantiates a date value.","pos":[11831,11926]},{"content":"It then displays the current calendar and the date, changes the current calendar to <ph id=\"ph1\">&lt;xref:System.Globalization.TaiwanCalendar&gt;</ph>, and displays the current calendar and date once again.","pos":[11927,12109],"source":" It then displays the current calendar and the date, changes the current calendar to <xref:System.Globalization.TaiwanCalendar>, and displays the current calendar and date once again."},{"content":"The first time the date is displayed, it is represented as a date in the Gregorian calendar.","pos":[12110,12202]},{"content":"The second time it is displayed, it is represented as a date in the Taiwan calendar.","pos":[12203,12287]},{"pos":[12565,12609],"content":"Representing dates in a non-current calendar","linkify":"Representing dates in a non-current calendar","nodes":[{"content":"Representing dates in a non-current calendar","pos":[0,44]}]},{"content":"To represent a date using a calendar that is not the current calendar of a particular culture, you must call methods of that <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> object.","pos":[12611,12780],"source":"To represent a date using a calendar that is not the current calendar of a particular culture, you must call methods of that <xref:System.Globalization.Calendar> object."},{"content":"For example, the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType&gt;</ph> methods convert the year, month, and day to values that reflect a particular calendar.","pos":[12781,13128],"source":" For example, the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods convert the year, month, and day to values that reflect a particular calendar."},{"pos":[13132,13504],"content":"[!WARNING]\nBecause some calendars are not optional calendars of any culture, representing dates in these calendars always requires that you call calendar methods. This is true of all calendars that derive from the <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, and <xref:System.Globalization.PersianCalendar> classes.","leadings":["","> "],"nodes":[{"content":"Because some calendars are not optional calendars of any culture, representing dates in these calendars always requires that you call calendar methods. This is true of all calendars that derive from the <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, and <xref:System.Globalization.PersianCalendar> classes.","pos":[11,370],"nodes":[{"content":"Because some calendars are not optional calendars of any culture, representing dates in these calendars always requires that you call calendar methods.","pos":[0,151]},{"content":"This is true of all calendars that derive from the <ph id=\"ph1\">&lt;xref:System.Globalization.EastAsianLunisolarCalendar&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Globalization.JulianCalendar&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Globalization.PersianCalendar&gt;</ph> classes.","pos":[152,359],"source":" This is true of all calendars that derive from the <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, and <xref:System.Globalization.PersianCalendar> classes."}]}]},{"content":"The following example uses a <ph id=\"ph1\">&lt;xref:System.Globalization.JulianCalendar&gt;</ph> object to instantiate a date, January 9, 1905, in the Julian calendar.","pos":[13506,13648],"source":"The following example uses a <xref:System.Globalization.JulianCalendar> object to instantiate a date, January 9, 1905, in the Julian calendar."},{"content":"When this date is displayed using the default (Gregorian) calendar, it is represented as January 22, 1905.","pos":[13649,13755]},{"content":"Calls to individual <ph id=\"ph1\">&lt;xref:System.Globalization.JulianCalendar&gt;</ph> methods enable the date to be represented in the Julian calendar.","pos":[13756,13884],"source":" Calls to individual <xref:System.Globalization.JulianCalendar> methods enable the date to be represented in the Julian calendar."},{"pos":[14168,14193],"content":"Calendars and date ranges","linkify":"Calendars and date ranges","nodes":[{"content":"Calendars and date ranges","pos":[0,25]}]},{"content":"The earliest date supported by a calendar is indicated by that calendar's <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[14195,14368],"source":"The earliest date supported by a calendar is indicated by that calendar's <xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType> property."},{"content":"For the <ph id=\"ph1\">&lt;xref:System.Globalization.GregorianCalendar&gt;</ph> class, that date is January 1, 0001 C.E.","pos":[14369,14463],"source":" For the <xref:System.Globalization.GregorianCalendar> class, that date is January 1, 0001 C.E."},{"content":"Most of the other calendars in .NET support a later date.","pos":[14464,14521]},{"content":"Trying to work with a date and time value that precedes a calendar's earliest supported date throws an <ph id=\"ph1\">&lt;xref:System.ArgumentOutOfRangeException&gt;</ph> exception.","pos":[14522,14677],"source":" Trying to work with a date and time value that precedes a calendar's earliest supported date throws an <xref:System.ArgumentOutOfRangeException> exception."},{"content":"However, there is one important exception.","pos":[14679,14721]},{"content":"The default (uninitialized) value of a <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> object and a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> object is equal to the <ph id=\"ph3\">&lt;xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType&gt;</ph> value.","pos":[14722,14954],"source":" The default (uninitialized) value of a <xref:System.DateTime> object and a <xref:System.DateTimeOffset> object is equal to the <xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType> value."},{"content":"If you try to format this date in a calendar that does not support January 1, 0001 C.E.","pos":[14955,15042]},{"content":"and you do not provide a format specifier, the formatting method uses the \"s\" (sortable date/time pattern) format specifier instead of the \"G\" (general date/time pattern) format specifier.","pos":[15043,15231]},{"content":"As a result, the formatting operation does not throw an <ph id=\"ph1\">&lt;xref:System.ArgumentOutOfRangeException&gt;</ph> exception.","pos":[15232,15340],"source":" As a result, the formatting operation does not throw an <xref:System.ArgumentOutOfRangeException> exception."},{"content":"Instead, it returns the unsupported date.","pos":[15341,15382]},{"content":"This is illustrated in the following example, which displays the value of <ph id=\"ph1\">&lt;xref:System.DateTime.MinValue?displayProperty=nameWithType&gt;</ph> when the current culture is set to Japanese (Japan) with the Japanese calendar, and to Arabic (Egypt) with the Um Al Qura calendar.","pos":[15383,15649],"source":" This is illustrated in the following example, which displays the value of <xref:System.DateTime.MinValue?displayProperty=nameWithType> when the current culture is set to Japanese (Japan) with the Japanese calendar, and to Arabic (Egypt) with the Um Al Qura calendar."},{"content":"It also sets the current culture to English (United States) and calls the <ph id=\"ph1\">&lt;xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType&gt;</ph> method with each of these <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> objects.","pos":[15650,15887],"source":" It also sets the current culture to English (United States) and calls the <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> method with each of these <xref:System.Globalization.CultureInfo> objects."},{"content":"In each case, the date is displayed by using the sortable date/time pattern.","pos":[15888,15964]},{"pos":[16255,16272],"content":"Working with eras","linkify":"Working with eras","nodes":[{"content":"Working with eras","pos":[0,17]}]},{"content":"Calendars typically divide dates into eras.","pos":[16274,16317]},{"content":"However, the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> classes in .NET do not support every era defined by a calendar, and most of the <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar&gt;</ph> classes support only a single era.","pos":[16318,16519],"source":" However, the <xref:System.Globalization.Calendar> classes in .NET do not support every era defined by a calendar, and most of the <xref:System.Globalization.Calendar> classes support only a single era."},{"content":"Only the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph> classes support multiple eras.","pos":[16520,16662],"source":" Only the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes support multiple eras."},{"pos":[16666,16952],"content":"[!IMPORTANT]\n The Reiwa era, a new era in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar>, begins on May 1, 2019. This change affects all applications that use these calendars. See the following articles for more information:","leadings":["","> "],"nodes":[{"content":"The Reiwa era, a new era in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar>, begins on May 1, 2019. This change affects all applications that use these calendars. See the following articles for more information:","pos":[14,284],"nodes":[{"content":"The Reiwa era, a new era in the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph>, begins on May 1, 2019.","pos":[0,158],"source":"The Reiwa era, a new era in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar>, begins on May 1, 2019."},{"content":"This change affects all applications that use these calendars.","pos":[159,221]},{"content":"See the following articles for more information:","pos":[222,270]}]}]},{"pos":[16957,17252],"content":"<bpt id=\"p1\">[</bpt>Handling a new era in the Japanese calendar in .NET<ept id=\"p1\">](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/)</ept>, which documents features added to .NET to support calendars with multiple eras and discusses best practices to use when handling multi-era calendars.","source":"[Handling a new era in the Japanese calendar in .NET](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/), which documents features added to .NET to support calendars with multiple eras and discusses best practices to use when handling multi-era calendars."},{"pos":[17257,17478],"content":"<bpt id=\"p1\">[</bpt>Prepare your application for the Japanese era change<ept id=\"p1\">](/windows/uwp/design/globalizing/japanese-era-change)</ept>, which provides information on testing your applications on Windows to ensure their readiness for the era change.","source":"[Prepare your application for the Japanese era change](/windows/uwp/design/globalizing/japanese-era-change), which provides information on testing your applications on Windows to ensure their readiness for the era change."},{"pos":[17483,17870],"content":"<bpt id=\"p1\">[</bpt>Summary of new Japanese Era updates for .NET Framework<ept id=\"p1\">](https://support.microsoft.com/en-us/help/4477957/new-japanese-era-updates-for-net-framework)</ept>, which lists .NET Framework updates for individual Windows versions that are related to the new Japanese calendar era, notes new .NET Framework features for multi-era support, and includes things to look for in testing your applications.","source":"[Summary of new Japanese Era updates for .NET Framework](https://support.microsoft.com/en-us/help/4477957/new-japanese-era-updates-for-net-framework), which lists .NET Framework updates for individual Windows versions that are related to the new Japanese calendar era, notes new .NET Framework features for multi-era support, and includes things to look for in testing your applications."},{"content":"An era in most calendars denotes an extremely long time period.","pos":[17872,17935]},{"content":"In the Gregorian calendar, for example, the current era spans more than two millennia.","pos":[17936,18022]},{"content":"For the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph>, the two calendars that support multiple eras, this is not the case.","pos":[18023,18206],"source":" For the <xref:System.Globalization.JapaneseCalendar> and the <xref:System.Globalization.JapaneseLunisolarCalendar>, the two calendars that support multiple eras, this is not the case."},{"content":"An era corresponds to the period of an emperor's reign.","pos":[18207,18262]},{"content":"Support for multiple eras, particularly when the upper limit of the current era is unknown, poses special challenges.","pos":[18263,18380]},{"pos":[18387,18405],"content":"Eras and era names","linkify":"Eras and era names","nodes":[{"content":"Eras and era names","pos":[0,18]}]},{"content":"In .NET, integers that represent the eras supported by a particular calendar implementation are stored in reverse order in the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType&gt;</ph> array.","pos":[18407,18614],"source":"In .NET, integers that represent the eras supported by a particular calendar implementation are stored in reverse order in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array."},{"content":"The current era (which is the era with the latest time range) is at index zero, and for <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> classes that support multiple eras, each successive index reflects the previous era.","pos":[18615,18824],"source":" The current era (which is the era with the latest time range) is at index zero, and for <xref:System.Globalization.Calendar> classes that support multiple eras, each successive index reflects the previous era."},{"content":"The static <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType&gt;</ph> property defines the index of the current era in the <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType&gt;</ph> array; it is a constant whose value is always zero.","pos":[18825,19091],"source":" The static <xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType> property defines the index of the current era in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array; it is a constant whose value is always zero."},{"content":"Individual <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> classes also include static fields that return the value of the current era.","pos":[19092,19216],"source":" Individual <xref:System.Globalization.Calendar> classes also include static fields that return the value of the current era."},{"content":"They are listed in the following table.","pos":[19217,19256]},{"content":"Calendar class","pos":[19260,19274]},{"content":"Current era field","pos":[19316,19333]},{"content":"The name that corresponds to a particular era number can be retrieved by passing the era number to the <ph id=\"ph1\">&lt;xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType&gt;</ph> method.","pos":[20897,21201],"source":"The name that corresponds to a particular era number can be retrieved by passing the era number to the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> or <xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType> method."},{"content":"The following example calls these methods to retrieve information about era support in the <ph id=\"ph1\">&lt;xref:System.Globalization.GregorianCalendar&gt;</ph> class.","pos":[21202,21345],"source":" The following example calls these methods to retrieve information about era support in the <xref:System.Globalization.GregorianCalendar> class."},{"content":"It displays the Gregorian calendar date that corresponds to January 1 of the second year of the current era, as well as the Gregorian calendar date that corresponds to January 1 of the second year of each supported Japanese calendar era.","pos":[21346,21583]},{"content":"In addition, the \"g\" custom date and time format string includes a calendar's era name in the string representation of a date and time.","pos":[21859,21994]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Custom date and time format strings<ept id=\"p1\">](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)</ept>.","pos":[21995,22133],"source":" For more information, see [Custom date and time format strings](../../../docs/standard/base-types/custom-date-and-time-format-strings.md)."},{"pos":[22139,22171],"content":"Instantiating a date with an era","linkify":"Instantiating a date with an era","nodes":[{"content":"Instantiating a date with an era","pos":[0,32]}]},{"content":"For the two <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> classes that support multiple eras, a date that consists of a particular year, month, and day of the month value can be ambiguous.","pos":[22173,22352],"source":"For the two <xref:System.Globalization.Calendar> classes that support multiple eras, a date that consists of a particular year, month, and day of the month value can be ambiguous."},{"content":"For example, all eras supported by the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> have years whose number is 1.","pos":[22353,22466],"source":" For example, all eras supported by the <xref:System.Globalization.JapaneseCalendar> have years whose number is 1."},{"content":"Ordinarily, if an era is not specified, both date and time and calendar methods assume that values belong to the current era.","pos":[22467,22592]},{"content":"This is true of the <ph id=\"ph1\">&lt;xref:System.DateTime.%23ctor%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.%23ctor%2A&gt;</ph> constructors that include parameters of type <ph id=\"ph3\">&lt;xref:System.Globalization.Calendar&gt;</ph>, as well as the <bpt id=\"p1\">[</bpt>JapaneseCalendar.ToDateTime<ept id=\"p1\">](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32))</ept> and <bpt id=\"p2\">[</bpt>JapaneseLunisolarCalendar.ToDateTime<ept id=\"p2\">](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32))</ept> methods.","pos":[22593,23148],"source":" This is true of the <xref:System.DateTime.%23ctor%2A> and <xref:System.DateTimeOffset.%23ctor%2A> constructors that include parameters of type <xref:System.Globalization.Calendar>, as well as the [JapaneseCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) and [JapaneseLunisolarCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) methods."},{"content":"The following example instantiates a date that represents January 1 of the second year of an unspecified era.","pos":[23149,23258]},{"content":"If you execute the example when the Reiwa era is the current era, the date is interpreted as the second year of the Reiwa era.","pos":[23259,23385]},{"content":"The era, 令和, precedes the year in the string returned by the <ph id=\"ph1\">&lt;xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType&gt;</ph> method and corresponds to January 1, 2020, in the Gregorian calendar.","pos":[23386,23615],"source":" The era, 令和, precedes the year in the string returned by the <xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType> method and corresponds to January 1, 2020, in the Gregorian calendar."},{"content":"(The Reiwa era begins in the year 2019 of the Gregorian calendar.)","pos":[23616,23682]},{"content":"However, if the era changes, the intent of this code becomes ambiguous.","pos":[23913,23984]},{"content":"Is the date intended to represent the second year of the current era, or is it intended to represent the second year of the Heisei era?","pos":[23985,24120]},{"content":"There are two ways to avoid this ambiguity:","pos":[24121,24164]},{"content":"Instantiate the date and time value using the default <ph id=\"ph1\">&lt;xref:System.Globalization.GregorianCalendar&gt;</ph> class.","pos":[24168,24274],"source":"Instantiate the date and time value using the default <xref:System.Globalization.GregorianCalendar> class."},{"content":"You can then use the Japanese calendar or the Japanese Lunisolar calendar for the string representation of dates, as the following example shows.","pos":[24275,24420]},{"pos":[24425,24660],"content":"[!code-csharp[Insantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/cs/program.cs)]\n [!code-vb[Instantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/vb/program.vb)]","leadings":["","  "],"nodes":[]},{"content":"Call a date and time method that explicitly specifies an era.","pos":[24664,24725]},{"content":"This includes the following methods:","pos":[24726,24762]},{"pos":[24769,25048],"content":"The <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)&gt;</ph> method of the <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph> class.","source":"The <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method of the <xref:System.Globalization.JapaneseCalendar> or <xref:System.Globalization.JapaneseLunisolarCalendar> class."},{"content":"A <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> parsing method, such as <ph id=\"ph3\">&lt;xref:System.DateTime.Parse%2A&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.DateTime.TryParse%2A&gt;</ph>, <ph id=\"ph5\">&lt;xref:System.DateTime.ParseExact%2A&gt;</ph>, or <ph id=\"ph6\">&lt;xref:System.DateTime.TryParseExact%2A&gt;</ph>, that includes the string to be parsed and optionally a <ph id=\"ph7\">&lt;xref:System.Globalization.DateTimeStyles&gt;</ph> argument if the current culture is Japanese-Japan (\"ja-JP\") and that culture's calendar is the <ph id=\"ph8\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph>.","pos":[25055,25525],"source":"A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method, such as <xref:System.DateTime.Parse%2A>, <xref:System.DateTime.TryParse%2A>, <xref:System.DateTime.ParseExact%2A>, or <xref:System.DateTime.TryParseExact%2A>, that includes the string to be parsed and optionally a <xref:System.Globalization.DateTimeStyles> argument if the current culture is Japanese-Japan (\"ja-JP\") and that culture's calendar is the <xref:System.Globalization.JapaneseCalendar>."},{"content":"The string to be parsed must include the era.","pos":[25526,25571]},{"content":"A <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> parsing method that includes a <ph id=\"ph3\">`provider`</ph> parameter of type <ph id=\"ph4\">&lt;xref:System.IFormatProvider&gt;</ph>.","pos":[25578,25725],"source":"A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method that includes a `provider` parameter of type <xref:System.IFormatProvider>."},{"content":"<ph id=\"ph1\">`provider`</ph> must be either a <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object that represents the Japanese-Japan (\"ja-JP\") culture whose current calendar is <ph id=\"ph3\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> or a <ph id=\"ph4\">&lt;xref:System.Globalization.DateTimeFormatInfo&gt;</ph> object whose <ph id=\"ph5\">&lt;xref:System.Globalization.DateTimeFormatInfo.Calendar&gt;</ph> property is <ph id=\"ph6\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph>.","pos":[25726,26103],"source":"`provider` must be either a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan (\"ja-JP\") culture whose current calendar is <xref:System.Globalization.JapaneseCalendar> or a <xref:System.Globalization.DateTimeFormatInfo> object whose <xref:System.Globalization.DateTimeFormatInfo.Calendar> property is <xref:System.Globalization.JapaneseCalendar>."},{"content":"The string to be parsed must include the era.","pos":[26104,26149]},{"content":"The following example uses three of these methods to instantiate a date and time in the Meiji era, which began on September 8, 1868, and ended on July 29, 1912.","pos":[26154,26314]},{"pos":[26320,26550],"content":"[!code-csharp[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/cs/program.cs)]\n [!code-vb[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/vb/program.vb)]","leadings":["","  "],"nodes":[]},{"pos":[26554,26753],"content":"[!TIP]\nWhen working with calendars that support multiple eras, *always* use the Gregorian date to instantiate a date, or specify the era when you instantiate a date and time based on that calendar.","leadings":["","> "],"nodes":[{"content":"When working with calendars that support multiple eras, <bpt id=\"p1\">*</bpt>always<ept id=\"p1\">*</ept> use the Gregorian date to instantiate a date, or specify the era when you instantiate a date and time based on that calendar.","pos":[7,197],"source":"When working with calendars that support multiple eras, *always* use the Gregorian date to instantiate a date, or specify the era when you instantiate a date and time based on that calendar."}]},{"content":"In specifying an era to the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)&gt;</ph> method, you provide the index of the era in the calendar's <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar.Eras&gt;</ph> property.","pos":[26755,27046],"source":"In specifying an era to the <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method, you provide the index of the era in the calendar's <xref:System.Globalization.Calendar.Eras> property."},{"content":"For calendars whose eras are subject to change, however, these indexes are not constant values; the current era is at index 0, and the oldest era is at index <ph id=\"ph1\">`Eras.Length - 1`</ph>.","pos":[27047,27223],"source":" For calendars whose eras are subject to change, however, these indexes are not constant values; the current era is at index 0, and the oldest era is at index `Eras.Length - 1`."},{"content":"When a new era is added to a calendar, the indexes of the previous eras increase by one.","pos":[27224,27312]},{"content":"You can supply the appropriate era index as follows:","pos":[27313,27365]},{"pos":[27369,27482],"content":"For dates in the current era, always use the calendar's <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar.CurrentEra&gt;</ph> property.","source":"For dates in the current era, always use the calendar's <xref:System.Globalization.Calendar.CurrentEra> property."},{"content":"For dates in a specified era, use the <ph id=\"ph1\">&lt;xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType&gt;</ph> method to retrieve the index that corresponds to a specified era name.","pos":[27486,27684],"source":"For dates in a specified era, use the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> method to retrieve the index that corresponds to a specified era name."},{"content":"This requires that the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> be the current calendar of the <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object that represents the ja-JP culture.","pos":[27685,27865],"source":" This requires that the <xref:System.Globalization.JapaneseCalendar> be the current calendar of the <xref:System.Globalization.CultureInfo> object that represents the ja-JP culture."},{"content":"(This technique works for the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph> as well, since it supports the same eras as the <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph>.) The previous example illustrates this approach.","pos":[27867,28093],"source":"  (This technique works for the <xref:System.Globalization.JapaneseLunisolarCalendar> as well, since it supports the same eras as the <xref:System.Globalization.JapaneseCalendar>.) The previous example illustrates this approach."},{"pos":[28099,28153],"content":"Calendars, eras, and date ranges: Relaxed range checks","linkify":"Calendars, eras, and date ranges: Relaxed range checks","nodes":[{"content":"Calendars, eras, and date ranges: Relaxed range checks","pos":[0,54]}]},{"content":"Very much like individual calendars have supported date ranges, eras in the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph> classes also have supported ranges.","pos":[28155,28369],"source":"Very much like individual calendars have supported date ranges, eras in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes also have supported ranges."},{"content":"Previously, .NET used strict era range checks to ensure that an era-specific date was within the range of that era.","pos":[28370,28485]},{"content":"That is, if a date is outside of the range of the specified era, the method throws an <ph id=\"ph1\">&lt;xref:System.ArgumentOutOfRangeException&gt;</ph>.","pos":[28486,28614],"source":" That is, if a date is outside of the range of the specified era, the method throws an <xref:System.ArgumentOutOfRangeException>."},{"content":"Currently, .NET uses relaxed ranged checking by default.","pos":[28615,28671]},{"content":"Updates to all versions of .NET introduced relaxed era range checks; the attempt to instantiate an era-specific date that is outside the range of the specified era \"overflows\" into the following era, and no exception is thrown.","pos":[28672,28899]},{"content":"The following example attempts to instantiate a date in the 65th year of the Showa era, which began on December 25, 1926 and ended on January 7, 1989.","pos":[28901,29051]},{"content":"This date corresponds to January 9, 1990, which is outside the range of the Showa era in the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph>.","pos":[29052,29190],"source":" This date corresponds to January 9, 1990, which is outside the range of the Showa era in the <xref:System.Globalization.JapaneseCalendar>."},{"content":"As the output from the example illustrates, the date displayed by the example is January 9, 1990, in the second year of the Heisei era.","pos":[29191,29326]},{"content":"If relaxed range checks are undesirable, you can restore strict range checks in a number of ways, depending on the version of .NET on which your application is running:","pos":[29557,29725]},{"pos":[29729,29813],"content":"<bpt id=\"p1\">**</bpt>.NET Core:<ept id=\"p1\">**</ept> You can add the following to the <bpt id=\"p2\">*</bpt>.netcore.runtime.json<ept id=\"p2\">*</ept> config file:","source":"**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:"},{"pos":[29975,30052],"content":"<bpt id=\"p1\">**</bpt>.NET Framework 4.6 or later:<ept id=\"p1\">**</ept> You can set the following AppContext switch:","source":"**.NET Framework 4.6 or later:** You can set the following AppContext switch:"},{"pos":[30293,30371],"content":"<bpt id=\"p1\">**</bpt>.NET Framework 4.5.2 or earlier:<ept id=\"p1\">**</ept> You can set the following registry value:","source":"**.NET Framework 4.5.2 or earlier:** You can set the following registry value:"},{"content":"Key","pos":[30399,30402]},{"content":"HKEY_LOCAL_MACHINE\\Software\\Microsoft.NETFramework\\AppContext","pos":[30405,30466]},{"content":"Name","pos":[30473,30477]},{"content":"Switch.System.Globalization.EnforceJapaneseEraYearRanges","pos":[30480,30536]},{"content":"Type","pos":[30543,30547]},{"content":"REG_SZ","pos":[30550,30556]},{"content":"Value","pos":[30563,30568]},{"content":"1","pos":[30571,30572]},{"pos":[30576,30717],"content":"With strict range checks enabled, the previous example throws an <ph id=\"ph1\">&lt;xref:System.ArgumentOutOfRangeException&gt;</ph> and displays the following output:","source":"With strict range checks enabled, the previous example throws an <xref:System.ArgumentOutOfRangeException> and displays the following output:"},{"pos":[31162,31212],"content":"Representing dates in calendars with multiple eras","linkify":"Representing dates in calendars with multiple eras","nodes":[{"content":"Representing dates in calendars with multiple eras","pos":[0,50]}]},{"content":"If a <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> object supports eras and is the current calendar of a <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object, the era is included in the string representation of a date and time value for the full date and time, long date, and short date patterns.","pos":[31214,31495],"source":"If a <xref:System.Globalization.Calendar> object supports eras and is the current calendar of a <xref:System.Globalization.CultureInfo> object, the era is included in the string representation of a date and time value for the full date and time, long date, and short date patterns."},{"content":"The following example displays these date patterns when the current culture is Japan (Japanese) and the current calendar is the Japanese calendar.","pos":[31496,31642]},{"pos":[31914,32265],"content":"[!WARNING]\nThe <xref:System.Globalization.JapaneseCalendar> class is the only calendar class in .NET that both supports dates in more than one era and that can be the current calendar of a <xref:System.Globalization.CultureInfo> object - specifically, of a <xref:System.Globalization.CultureInfo> object that represents the Japanese (Japan) culture.","leadings":["","> "],"nodes":[{"content":"The <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> class is the only calendar class in .NET that both supports dates in more than one era and that can be the current calendar of a <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object - specifically, of a <ph id=\"ph3\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object that represents the Japanese (Japan) culture.","pos":[11,349],"source":"The <xref:System.Globalization.JapaneseCalendar> class is the only calendar class in .NET that both supports dates in more than one era and that can be the current calendar of a <xref:System.Globalization.CultureInfo> object - specifically, of a <xref:System.Globalization.CultureInfo> object that represents the Japanese (Japan) culture."}]},{"content":"For all calendars, the \"g\" custom format specifier includes the era in the result string.","pos":[32267,32356]},{"content":"The following example uses the \"MM-dd-yyyy g\" custom format string to include the era in the result string when the current calendar is the Gregorian calendar.","pos":[32357,32516]},{"content":"In cases where the string representation of a date is expressed in a calendar that is not the current calendar, the <ph id=\"ph1\">&lt;xref:System.Globalization.Calendar&gt;</ph> class includes a <ph id=\"ph2\">&lt;xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType&gt;</ph> method that can be used along with the <ph id=\"ph3\">&lt;xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType&gt;</ph>, and <ph id=\"ph5\">&lt;xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType&gt;</ph> methods to unambiguously indicate a date as well as the era to which it belongs.","pos":[32786,33395],"source":"In cases where the string representation of a date is expressed in a calendar that is not the current calendar, the <xref:System.Globalization.Calendar> class includes a <xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType> method that can be used along with the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods to unambiguously indicate a date as well as the era to which it belongs."},{"content":"The following example uses the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph> class to provide an illustration.","pos":[33396,33514],"source":" The following example uses the <xref:System.Globalization.JapaneseLunisolarCalendar> class to provide an illustration."},{"content":"However, note that including a meaningful name or abbreviation instead of an integer for the era in the result string requires that you instantiate a <ph id=\"ph1\">&lt;xref:System.Globalization.DateTimeFormatInfo&gt;</ph> object and make <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> its current calendar.","pos":[33515,33794],"source":" However, note that including a meaningful name or abbreviation instead of an integer for the era in the result string requires that you instantiate a <xref:System.Globalization.DateTimeFormatInfo> object and make <xref:System.Globalization.JapaneseCalendar> its current calendar."},{"content":"(The <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseLunisolarCalendar&gt;</ph> calendar cannot be the current calendar of any culture, but in this case the two calendars share the same eras.)","pos":[33795,33966],"source":" (The <xref:System.Globalization.JapaneseLunisolarCalendar> calendar cannot be the current calendar of any culture, but in this case the two calendars share the same eras.)"},{"content":"In the Japanese calendars, the first year of an era is called Gannen (元年).","pos":[34240,34314]},{"content":"For example, instead of Heisei 1, the first year of the Heisei era can be described as Heisei Gannen.","pos":[34315,34416]},{"content":".NET adopts this convention in formatting operations for dates and times formatted with the following standard or custom date and time format strings when they are used with a <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> object that represents the Japanese-Japan (\"ja-JP\") culture with the <ph id=\"ph2\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> class:","pos":[34417,34753],"source":" .NET adopts this convention in formatting operations for dates and times formatted with the following standard or custom date and time format strings when they are used with a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan (\"ja-JP\") culture with the <xref:System.Globalization.JapaneseCalendar> class:"},{"pos":[34757,34905],"content":"<bpt id=\"p1\">[</bpt>The long date pattern<ept id=\"p1\">](../base-types/standard-date-and-time-format-strings.md#LongDate)</ept>, indicated by the \"D\" standard date and time format string.","source":"[The long date pattern](../base-types/standard-date-and-time-format-strings.md#LongDate), indicated by the \"D\" standard date and time format string."},{"pos":[34908,35074],"content":"<bpt id=\"p1\">[</bpt>The full date long time pattern<ept id=\"p1\">](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime)</ept>, indicated by the \"F\" standard date and time format string.","source":"[The full date long time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime), indicated by the \"F\" standard date and time format string."},{"pos":[35077,35245],"content":"<bpt id=\"p1\">[</bpt>The full date short time pattern<ept id=\"p1\">](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime)</ept>, indicated by the \"f\" standard date and time format string.","source":"[The full date short time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime), indicated by the \"f\" standard date and time format string."},{"pos":[35248,35404],"content":"<bpt id=\"p1\">[</bpt>The year/month pattern<ept id=\"p1\">](../base-types/standard-date-and-time-format-strings.md#YearMonth)</ept>, indicated by the Y\" or \"y\" standard date and time format string.","source":"[The year/month pattern](../base-types/standard-date-and-time-format-strings.md#YearMonth), indicated by the Y\" or \"y\" standard date and time format string."},{"pos":[35407,35522],"content":"[The \"ggy'年'\" or \"ggy年\" <bpt id=\"p1\">[</bpt>custom date and time format string<ept id=\"p1\">](../base-types/custom-date-and-time-format-strings.md)</ept>.","source":"[The \"ggy'年'\" or \"ggy年\" [custom date and time format string](../base-types/custom-date-and-time-format-strings.md)."},{"pos":[35524,35664],"content":"For example, the following example displays a date in the first year of the Heisei era in the <ph id=\"ph1\">&lt;xref:System.Globalization.JapaneseCalendar&gt;</ph> .","source":"For example, the following example displays a date in the first year of the Heisei era in the <xref:System.Globalization.JapaneseCalendar> ."},{"content":"If this behavior is undesirable in formatting operations, you can restore the previous behavior, which always represents the first year of an era as “1” rather than “Gannen”, by doing the following, depending on the version of .NET:","pos":[35856,36088]},{"pos":[36092,36176],"content":"<bpt id=\"p1\">**</bpt>.NET Core:<ept id=\"p1\">**</ept> You can add the following to the <bpt id=\"p2\">*</bpt>.netcore.runtime.json<ept id=\"p2\">*</ept> config file:","source":"**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:"},{"pos":[36342,36419],"content":"<bpt id=\"p1\">**</bpt>.NET Framework 4.6 or later:<ept id=\"p1\">**</ept> You can set the following AppContext switch:","source":"**.NET Framework 4.6 or later:** You can set the following AppContext switch:"},{"pos":[36664,36742],"content":"<bpt id=\"p1\">**</bpt>.NET Framework 4.5.2 or earlier:<ept id=\"p1\">**</ept> You can set the following registry value:","source":"**.NET Framework 4.5.2 or earlier:** You can set the following registry value:"},{"content":"Key","pos":[36770,36773]},{"content":"HKEY_LOCAL_MACHINE\\Software\\Microsoft.NETFramework\\AppContext","pos":[36776,36837]},{"content":"Name","pos":[36844,36848]},{"content":"Switch.System.Globalization.FormatJapaneseFirstYearAsANumber","pos":[36851,36911]},{"content":"Type","pos":[36918,36922]},{"content":"REG_SZ","pos":[36925,36931]},{"content":"Value","pos":[36938,36943]},{"content":"1","pos":[36946,36947]},{"content":"With gannen support in formatting operations disabled, the previous example displays the following output:","pos":[36951,37057]},{"content":".NET has also been updated so that date and time parsing operations support strings that contain the year represented as either \"1\" or Gannen.","pos":[37146,37288]},{"content":"Although you should not need to do this, you can restore the previous behavior to recognizes only “1” as the first year of an era.","pos":[37289,37419]},{"content":"You can do this as follows, depending on the version of .NET:","pos":[37420,37481]},{"pos":[37485,37569],"content":"<bpt id=\"p1\">**</bpt>.NET Core:<ept id=\"p1\">**</ept> You can add the following to the <bpt id=\"p2\">*</bpt>.netcore.runtime.json<ept id=\"p2\">*</ept> config file:","source":"**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:"},{"pos":[37735,37812],"content":"<bpt id=\"p1\">**</bpt>.NET Framework 4.6 or later:<ept id=\"p1\">**</ept> You can set the following AppContext switch:","source":"**.NET Framework 4.6 or later:** You can set the following AppContext switch:"},{"pos":[38057,38135],"content":"<bpt id=\"p1\">**</bpt>.NET Framework 4.5.2 or earlier:<ept id=\"p1\">**</ept> You can set the following registry value:","source":"**.NET Framework 4.5.2 or earlier:** You can set the following registry value:"},{"content":"Key","pos":[38165,38168]},{"content":"HKEY_LOCAL_MACHINE\\Software\\Microsoft.NETFramework\\AppContext","pos":[38171,38232]},{"content":"Name","pos":[38239,38243]},{"content":"Switch.System.Globalization.EnforceLegacyJapaneseDateParsing","pos":[38246,38306]},{"content":"Type","pos":[38313,38317]},{"content":"REG_SZ","pos":[38320,38326]},{"content":"Value","pos":[38333,38338]},{"content":"1","pos":[38341,38342]},{"pos":[38350,38358],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[38362,38498],"content":"<bpt id=\"p1\">[</bpt>How to: Display dates in non-Gregorian calendars<ept id=\"p1\">](../../../docs/standard/base-types/how-to-display-dates-in-non-gregorian-calendars.md)</ept>","source":"[How to: Display dates in non-Gregorian calendars](../../../docs/standard/base-types/how-to-display-dates-in-non-gregorian-calendars.md)"},{"pos":[38501,38605],"content":"<bpt id=\"p1\">[</bpt>Sample: Calendar week range utility<ept id=\"p1\">](https://code.msdn.microsoft.com/NET-Framework-4-Calendar-3360a84a)</ept>","source":"[Sample: Calendar week range utility](https://code.msdn.microsoft.com/NET-Framework-4-Calendar-3360a84a)"},{"pos":[38608,38660],"content":"<bpt id=\"p1\">[</bpt>Calendar class<ept id=\"p1\">](xref:System.Globalization.Calendar)</ept>","source":"[Calendar class](xref:System.Globalization.Calendar)"}]}