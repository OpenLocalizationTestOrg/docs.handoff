{"content":"---\ntitle: \"ICLRPolicyManager::SetTimeoutAndAction Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICLRPolicyManager.SetTimeoutAndAction\"\napi_location: \n  - \"mscoree.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICLRPolicyManager::SetTimeoutAndAction\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ICLRPolicyManager::SetTimeoutAndAction method [.NET Framework hosting]\"\n  - \"SetTimeoutAndAction method [.NET Framework hosting]\"\nms.assetid: 60454f91-d855-4ddf-bb6d-60a02f5eabab\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 9\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# ICLRPolicyManager::SetTimeoutAndAction Method\nSets a timeout value for the specified operation, and specifies the policy action the common language runtime (CLR) should take when the operation occurs.  \n  \n## Syntax  \n  \n```  \nHRESULT SetTimeoutAndAction (  \n    [in] EClrOperation operation,  \n    [in] DWORD dwMilliseconds,  \n    [in] EPolicyAction action  \n);  \n```  \n  \n#### Parameters  \n `operation`  \n [in] One of the [EClrOperation](../../../../docs/framework/unmanaged-api/hosting/eclroperation-enumeration.md) values, indicating the operation for which to set the timeout and policy `action`. The following values are supported:  \n  \n-   OPR_AppDomainUnload  \n  \n-   OPR_ProcessExit  \n  \n-   OPR_ThreadRudeAbortInCriticalRegion  \n  \n-   OPR_ThreadRudeAbortInNonCriticalRegion  \n  \n `dwMilliseconds`  \n [in] The new timeout value, in milliseconds. A value of INFINITE causes `operation` never to time out.  \n  \n `action`  \n [in] One of the [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values, indicating the policy action that the CLR should take when `operation` occurs.  \n  \n## Return Value  \n  \n|HRESULT|Description|  \n|-------------|-----------------|  \n|S_OK|`SetTimeoutAndAction` returned successfully.|  \n|HOST_E_CLRNOTAVAILABLE|The CLR has not been loaded into a process, or the CLR is in a state in which it cannot run managed code or process the call successfully.|  \n|HOST_E_TIMEOUT|The call timed out.|  \n|HOST_E_NOT_OWNER|The caller does not own the lock.|  \n|HOST_E_ABANDONED|An event was canceled while a blocked thread or fiber was waiting on it.|  \n|E_FAIL|An unknown catastrophic failure occurred. After a method returns E_FAIL, the CLR is no longer usable within the process. Subsequent calls to hosting methods return HOST_E_CLRNOTAVAILABLE.|  \n|E_INVALIDARG|A timeout cannot be set for the specified `operation`, or an invalid value was supplied for `action`.|  \n  \n## Remarks  \n `SetTimeoutAndAction` encapsulates the capabilities of the [ICLRPolicyManager::SetTimeout](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-settimeout-method.md) and [ICLRPolicyManager::SetActionOnTimeout](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setactionontimeout-method.md) methods, and can be called in place of sequential calls to these two methods.  \n  \n> [!IMPORTANT]\n>  Not all policy action values can be specified as the timeout behavior for CLR operations. See the Remarks sections of the topics for these two methods for valid values.  \n  \n## Requirements  \n **Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md).  \n  \n **Header:** MSCorEE.h  \n  \n **Library:** Included as a resource in MSCorEE.dll  \n  \n **.NET Framework Versions:** [!INCLUDE[net_current_v20plus](../../../../includes/net-current-v20plus-md.md)]  \n  \n## See Also  \n [EClrOperation Enumeration](../../../../docs/framework/unmanaged-api/hosting/eclroperation-enumeration.md)   \n [EPolicyAction Enumeration](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)   \n [ICLRPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)   \n [SetActionOnTimeout Method](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setactionontimeout-method.md)   \n [ICLRPolicyManager::SetTimeoutAndAction](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-settimeoutandaction-method.md)","nodes":[{"pos":[4,745],"embed":true,"restype":"x-metadata","content":"title: \"ICLRPolicyManager::SetTimeoutAndAction Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICLRPolicyManager.SetTimeoutAndAction\"\napi_location: \n  - \"mscoree.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICLRPolicyManager::SetTimeoutAndAction\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ICLRPolicyManager::SetTimeoutAndAction method [.NET Framework hosting]\"\n  - \"SetTimeoutAndAction method [.NET Framework hosting]\"\nms.assetid: 60454f91-d855-4ddf-bb6d-60a02f5eabab\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 9\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","nodes":[{"content":"ICLRPolicyManager::SetTimeoutAndAction Method | Microsoft Docs","nodes":[{"pos":[0,62],"content":"ICLRPolicyManager::SetTimeoutAndAction Method | Microsoft Docs","nodes":[{"content":"ICLRPolicyManager::SetTimeoutAndAction Method | Microsoft Docs","pos":[0,62]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[752,797],"content":"ICLRPolicyManager::SetTimeoutAndAction Method","linkify":"ICLRPolicyManager::SetTimeoutAndAction Method","nodes":[{"content":"ICLRPolicyManager::SetTimeoutAndAction Method","pos":[0,45]}]},{"content":"Sets a timeout value for the specified operation, and specifies the policy action the common language runtime (CLR) should take when the operation occurs.","pos":[798,952]},{"pos":[961,967],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1131,1141],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] One of the <bpt id=\"p1\">[</bpt>EClrOperation<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclroperation-enumeration.md)</ept> values, indicating the operation for which to set the timeout and policy <ph id=\"ph1\">`action`</ph>.","pos":[1160,1353],"source":"[in] One of the [EClrOperation](../../../../docs/framework/unmanaged-api/hosting/eclroperation-enumeration.md) values, indicating the operation for which to set the timeout and policy `action`."},{"content":"The following values are supported:","pos":[1354,1389]},{"content":"OPR_AppDomainUnload","pos":[1399,1418]},{"content":"OPR_ProcessExit","pos":[1428,1443]},{"content":"OPR_ThreadRudeAbortInCriticalRegion","pos":[1453,1488]},{"content":"OPR_ThreadRudeAbortInNonCriticalRegion","pos":[1498,1536]},{"pos":[1543,1665],"content":"`dwMilliseconds`  \n[in] The new timeout value, in milliseconds. A value of INFINITE causes `operation` never to time out.","leadings":[""," "],"nodes":[{"content":"[in] The new timeout value, in milliseconds. A value of INFINITE causes `operation` never to time out.","pos":[19,121],"nodes":[{"content":"[in] The new timeout value, in milliseconds.","pos":[0,44]},{"content":"A value of INFINITE causes <ph id=\"ph1\">`operation`</ph> never to time out.","pos":[45,102],"source":" A value of INFINITE causes `operation` never to time out."}]}]},{"pos":[1672,1881],"content":"`action`  \n[in] One of the [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values, indicating the policy action that the CLR should take when `operation` occurs.","leadings":[""," "],"nodes":[{"content":"[in] One of the <bpt id=\"p1\">[</bpt>EPolicyAction<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)</ept> values, indicating the policy action that the CLR should take when <ph id=\"ph1\">`operation`</ph> occurs.","pos":[11,208],"source":"[in] One of the [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values, indicating the policy action that the CLR should take when `operation` occurs."}]},{"pos":[1890,1902],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"HRESULT","pos":[1909,1916]},{"content":"Description","pos":[1917,1928]},{"content":"S_OK","pos":[1969,1973]},{"pos":[1974,2018],"content":"<ph id=\"ph1\">`SetTimeoutAndAction`</ph> returned successfully.","source":"`SetTimeoutAndAction` returned successfully."},{"content":"HOST_E_CLRNOTAVAILABLE","pos":[2023,2045]},{"content":"The CLR has not been loaded into a process, or the CLR is in a state in which it cannot run managed code or process the call successfully.","pos":[2046,2184]},{"content":"HOST_E_TIMEOUT","pos":[2189,2203]},{"content":"The call timed out.","pos":[2204,2223]},{"content":"HOST_E_NOT_OWNER","pos":[2228,2244]},{"content":"The caller does not own the lock.","pos":[2245,2278]},{"content":"HOST_E_ABANDONED","pos":[2283,2299]},{"content":"An event was canceled while a blocked thread or fiber was waiting on it.","pos":[2300,2372]},{"content":"E_FAIL","pos":[2377,2383]},{"content":"An unknown catastrophic failure occurred.","pos":[2384,2425]},{"content":"After a method returns E_FAIL, the CLR is no longer usable within the process.","pos":[2426,2504]},{"content":"Subsequent calls to hosting methods return HOST_E_CLRNOTAVAILABLE.","pos":[2505,2571]},{"content":"E_INVALIDARG","pos":[2576,2588]},{"pos":[2589,2690],"content":"A timeout cannot be set for the specified <ph id=\"ph1\">`operation`</ph>, or an invalid value was supplied for <ph id=\"ph2\">`action`</ph>.","source":"A timeout cannot be set for the specified `operation`, or an invalid value was supplied for `action`."},{"pos":[2700,2707],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[2711,3109],"content":"<ph id=\"ph1\">`SetTimeoutAndAction`</ph> encapsulates the capabilities of the <bpt id=\"p1\">[</bpt>ICLRPolicyManager::SetTimeout<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-settimeout-method.md)</ept> and <bpt id=\"p2\">[</bpt>ICLRPolicyManager::SetActionOnTimeout<ept id=\"p2\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setactionontimeout-method.md)</ept> methods, and can be called in place of sequential calls to these two methods.","source":"`SetTimeoutAndAction` encapsulates the capabilities of the [ICLRPolicyManager::SetTimeout](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-settimeout-method.md) and [ICLRPolicyManager::SetActionOnTimeout](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setactionontimeout-method.md) methods, and can be called in place of sequential calls to these two methods."},{"pos":[3117,3301],"content":"[!IMPORTANT]\n Not all policy action values can be specified as the timeout behavior for CLR operations. See the Remarks sections of the topics for these two methods for valid values.","leadings":["","> "],"nodes":[{"content":"Not all policy action values can be specified as the timeout behavior for CLR operations. See the Remarks sections of the topics for these two methods for valid values.","pos":[14,182],"nodes":[{"content":"Not all policy action values can be specified as the timeout behavior for CLR operations.","pos":[0,89]},{"content":"See the Remarks sections of the topics for these two methods for valid values.","pos":[90,168]}]}]},{"pos":[3310,3322],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3326,3430],"content":"<bpt id=\"p1\">**</bpt>Platforms:<ept id=\"p1\">**</ept> See <bpt id=\"p2\">[</bpt>System Requirements<ept id=\"p2\">](../../../../docs/framework/get-started/system-requirements.md)</ept>.","source":"**Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md)."},{"pos":[3437,3458],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> MSCorEE.h","source":"**Header:** MSCorEE.h"},{"pos":[3465,3515],"content":"<bpt id=\"p1\">**</bpt>Library:<ept id=\"p1\">**</ept> Included as a resource in MSCorEE.dll","source":"**Library:** Included as a resource in MSCorEE.dll"},{"pos":[3522,3550],"content":"<bpt id=\"p1\">**</bpt>.NET Framework Versions:<ept id=\"p1\">**</ept>","source":"**.NET Framework Versions:**"},{"pos":[3639,3647],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>EClrOperation Enumeration<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclroperation-enumeration.md)</ept><ph id=\"ph1\"> </ph>","pos":[3651,3758],"source":"[EClrOperation Enumeration](../../../../docs/framework/unmanaged-api/hosting/eclroperation-enumeration.md) "},{"content":"<bpt id=\"p1\">[</bpt>EPolicyAction Enumeration<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)</ept><ph id=\"ph1\"> </ph>","pos":[3762,3869],"source":"[EPolicyAction Enumeration](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) "},{"content":"<bpt id=\"p1\">[</bpt>ICLRPolicyManager Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)</ept><ph id=\"ph1\"> </ph>","pos":[3873,3984],"source":"[ICLRPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) "},{"content":"<bpt id=\"p1\">[</bpt>SetActionOnTimeout Method<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setactionontimeout-method.md)</ept><ph id=\"ph1\"> </ph>","pos":[3988,4113],"source":"[SetActionOnTimeout Method](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-setactionontimeout-method.md) "},{"content":"<bpt id=\"p1\">[</bpt>ICLRPolicyManager::SetTimeoutAndAction<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-settimeoutandaction-method.md)</ept>","pos":[4117,4255],"source":"[ICLRPolicyManager::SetTimeoutAndAction](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-settimeoutandaction-method.md)"}]}