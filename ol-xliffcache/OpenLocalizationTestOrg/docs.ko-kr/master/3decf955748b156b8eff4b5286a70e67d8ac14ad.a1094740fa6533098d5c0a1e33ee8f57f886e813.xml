{"content":"---\ntitle: \"Configuring HTTP and HTTPS\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"configuring HTTP [WCF]\"\nms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4\n---\n# Configuring HTTP and HTTPS\nWCF services and clients can communicate over HTTP and HTTPS. The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool. When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool). If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.  \n  \n At the minimum you will want to configure a URL registration, and add a Firewall exception for the URL your service will be using.  \n  \n The tool used to configure HTTP settings depends on the operating system the computer is running.  \n  \n When running [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], use the HttpCfg.exe tool. [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] automatically installs this tool. When running [!INCLUDE[wxp](../../../../includes/wxp-md.md)], you can download the tool at [Windows XP Service Pack 2 Support Tools](https://go.microsoft.com/fwlink/?LinkId=88606). For more information, see [Httpcfg Overview](https://go.microsoft.com/fwlink/?LinkId=88605).  \n  \n When running [!INCLUDE[wv](../../../../includes/wv-md.md)] or Windows 7, you configure these settings with the Netsh.exe tool.  \n  \n## Configuring Namespace Reservations  \n Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users. A reservation gives those users the right to create services that listen on that portion of the namespace. Reservations are URL prefixes, meaning that the reservation covers all sub-paths of the reservation path. Namespace reservations permit two ways to use wildcards. The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](https://go.microsoft.com/fwlink/?LinkId=94841).  \n  \n A running application can create a similar request to add namespace registrations. Registrations and reservations compete for portions of the namespace. A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](https://go.microsoft.com/fwlink/?LinkId=94841). In this case, the reservation blocks the running application from receiving requests.  \n  \n### Running Windows XP or Server 2003  \n Use the `httpcfg.exe set urlacl` command to change namespace reservations. The [Windows Support Tools documentation](https://go.microsoft.com/fwlink/?LinkId=94840) explains the syntax for the Httpcfg.exe tool. Modifying the reservation rights for a portion of the namespace requires either administrative privileges or ownership of that portion of the namespace. Initially, the entire HTTP namespace belongs to the local administrator.  \n  \n The following shows the syntax of the Httpcfg command with the `set urlacl` option  \n  \n```console  \nhttpcfg set urlacl /u {http://URL:Port/ | https://URL:Port/} /a ACL  \n```  \n  \n The `/u` parameter is required when using `set urlacl`. It takes a string that contains a fully-qualified URL that serves as the record key for the reservation being made.  \n  \n The `/a` parameter is also required when using `set urlacl`. It takes a string that contains an Access Control List (ACL) in the form of a Security Descriptor Definition Language (SDDL) string.  \n  \n The following shows an example of using this command.  \n  \n```console  \nhttpcfg.exe set urlacl /u http://myhost:8000/ /a \"O:AOG:DAD:(A;;RPWPCCDCLCSWRCWDWOGA;;;S-1-0-0)\"  \n```  \n  \n### Running Windows Vista, Windows Server 2008 R2 or Windows 7  \n If you are running on [!INCLUDE[wv](../../../../includes/wv-md.md)], Windows Server 2008 R2 or Windows 7, use the Netsh.exe tool. The following shows an example of using this command.  \n  \n```console  \nnetsh http add urlacl url=http://+:80/MyUri user=DOMAIN\\user  \n```  \n  \n This command adds an URL reservation for the specified URL namespace for the DOMAIN\\user account.  For more information on using the netsh command type \"netsh http add urlacl\" in a command-prompt and press enter.  \n  \n## Configuring a Firewall Exception  \n When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL. For more information, see [Open a port in Windows Firewall (Windows 7)](https://go.microsoft.com/fwlink/?LinkId=239961)  \n  \n## Configuring SSL Certificates  \n The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys. The server provides its SSL certificate when a connection is made so that the client can verify the server identity. The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.  \n  \n Certificates are stored in a centralized store according to the IP address and port number of the connection. The special IP address 0.0.0.0 matches any IP address for the local machine. Note that the certificate store does not distinguish URLs based on the path. Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.  \n  \n For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).  \n  \n## Configuring the IP Listen List  \n The HTTP Server API only binds to an IP address and port once a user registers a URL. By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine. A conflict arises if an application that does not use the HTTP Server API has previously bound to that combination of IP address and port. The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine. If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies. Modifying the IP Listen List requires administrative privileges.  \n  \n### Running Windows XP or Server 2003  \n Use the httpcfg tool to modify the IP Listen List, as shown in the following example. The [Windows Support Tools documentation](https://go.microsoft.com/fwlink/?LinkId=94840) explains the syntax for the httpcfg.exe tool.  \n  \n```console  \nhttpcfg.exe set iplisten -i 0.0.0.0:8000  \n```  \n  \n### Running Windows Vista or Windows 7  \n Use the netsh tool to modify the IP Listen List, as shown in the following example.  \n  \n```console  \nnetsh http add iplisten ipaddress=0.0.0.0:8000  \n```  \n  \n## Other Configuration Settings  \n When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall. If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.  \n  \n The HTTP Server API has some advanced configuration settings that are not available through HttpCfg. These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs. For information about these settings, see [Http.sys registry settings for IIS](https://go.microsoft.com/fwlink/?LinkId=94843). Most users should not need to change these settings.  \n  \n## Issues Specific to Windows XP  \n IIS does not support port sharing on [!INCLUDE[wxp](../../../../includes/wxp-md.md)]. If IIS is running and a WCF service attempts to use a namespace with the same port, the WCF service fails to start. IIS and WCF both default to using port 80. Either change the port assignment for one of the services or use the IP Listen List to assign the WCF service to a network adapter not used by IIS. IIS 6.0 and later have been redesigned to use the HTTP Server APIs.  \n  \n## See also\n\n- <xref:System.ServiceModel.WSDualHttpBinding>\n- [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)\n","nodes":[{"pos":[4,161],"embed":true,"restype":"x-metadata","content":"title: \"Configuring HTTP and HTTPS\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"configuring HTTP [WCF]\"\nms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4","nodes":[{"content":"Configuring HTTP and HTTPS","nodes":[{"pos":[0,26],"content":"Configuring HTTP and HTTPS","nodes":[{"content":"Configuring HTTP and HTTPS","pos":[0,26]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[168,194],"content":"Configuring HTTP and HTTPS","linkify":"Configuring HTTP and HTTPS","nodes":[{"content":"Configuring HTTP and HTTPS","pos":[0,26]}]},{"content":"WCF services and clients can communicate over HTTP and HTTPS.","pos":[195,256]},{"content":"The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.","pos":[257,383]},{"content":"When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).","pos":[384,504]},{"content":"If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.","pos":[505,605]},{"content":"At the minimum you will want to configure a URL registration, and add a Firewall exception for the URL your service will be using.","pos":[612,742]},{"content":"The tool used to configure HTTP settings depends on the operating system the computer is running.","pos":[749,846]},{"content":"When running <ph id=\"ph1\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> or <ph id=\"ph2\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>, use the HttpCfg.exe tool.","pos":[853,997],"source":"When running [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], use the HttpCfg.exe tool."},{"content":"<ph id=\"ph1\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> automatically installs this tool.","pos":[998,1085],"source":"[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] automatically installs this tool."},{"content":"When running <ph id=\"ph1\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>, you can download the tool at <bpt id=\"p1\">[</bpt>Windows XP Service Pack 2 Support Tools<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=88606)</ept>.","pos":[1086,1266],"source":" When running [!INCLUDE[wxp](../../../../includes/wxp-md.md)], you can download the tool at [Windows XP Service Pack 2 Support Tools](https://go.microsoft.com/fwlink/?LinkId=88606)."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Httpcfg Overview<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=88605)</ept>.","pos":[1267,1359],"source":" For more information, see [Httpcfg Overview](https://go.microsoft.com/fwlink/?LinkId=88605)."},{"pos":[1366,1492],"content":"When running <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> or Windows 7, you configure these settings with the Netsh.exe tool.","source":"When running [!INCLUDE[wv](../../../../includes/wv-md.md)] or Windows 7, you configure these settings with the Netsh.exe tool."},{"pos":[1501,1535],"content":"Configuring Namespace Reservations","linkify":"Configuring Namespace Reservations","nodes":[{"content":"Configuring Namespace Reservations","pos":[0,34]}]},{"content":"Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.","pos":[1539,1651]},{"content":"A reservation gives those users the right to create services that listen on that portion of the namespace.","pos":[1652,1758]},{"content":"Reservations are URL prefixes, meaning that the reservation covers all sub-paths of the reservation path.","pos":[1759,1864]},{"content":"Namespace reservations permit two ways to use wildcards.","pos":[1865,1921]},{"content":"The HTTP Server API documentation describes the <bpt id=\"p1\">[</bpt>order of resolution between namespace claims that involve wildcards<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=94841)</ept>.","pos":[1922,2087],"source":" The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](https://go.microsoft.com/fwlink/?LinkId=94841)."},{"content":"A running application can create a similar request to add namespace registrations.","pos":[2094,2176]},{"content":"Registrations and reservations compete for portions of the namespace.","pos":[2177,2246]},{"content":"A reservation may have precedence over a registration according to the order of resolution given in the <bpt id=\"p1\">[</bpt>order of resolution between namespace claims that involve wildcards<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=94841)</ept>.","pos":[2247,2468],"source":" A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](https://go.microsoft.com/fwlink/?LinkId=94841)."},{"content":"In this case, the reservation blocks the running application from receiving requests.","pos":[2469,2554]},{"pos":[2564,2597],"content":"Running Windows XP or Server 2003","linkify":"Running Windows XP or Server 2003","nodes":[{"content":"Running Windows XP or Server 2003","pos":[0,33]}]},{"content":"Use the <ph id=\"ph1\">`httpcfg.exe set urlacl`</ph> command to change namespace reservations.","pos":[2601,2675],"source":"Use the `httpcfg.exe set urlacl` command to change namespace reservations."},{"content":"The <bpt id=\"p1\">[</bpt>Windows Support Tools documentation<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=94840)</ept> explains the syntax for the Httpcfg.exe tool.","pos":[2676,2810],"source":" The [Windows Support Tools documentation](https://go.microsoft.com/fwlink/?LinkId=94840) explains the syntax for the Httpcfg.exe tool."},{"content":"Modifying the reservation rights for a portion of the namespace requires either administrative privileges or ownership of that portion of the namespace.","pos":[2811,2963]},{"content":"Initially, the entire HTTP namespace belongs to the local administrator.","pos":[2964,3036]},{"pos":[3043,3125],"content":"The following shows the syntax of the Httpcfg command with the <ph id=\"ph1\">`set urlacl`</ph> option","source":"The following shows the syntax of the Httpcfg command with the `set urlacl` option"},{"content":"The <ph id=\"ph1\">`/u`</ph> parameter is required when using <ph id=\"ph2\">`set urlacl`</ph>.","pos":[3224,3279],"source":"The `/u` parameter is required when using `set urlacl`."},{"content":"It takes a string that contains a fully-qualified URL that serves as the record key for the reservation being made.","pos":[3280,3395]},{"content":"The <ph id=\"ph1\">`/a`</ph> parameter is also required when using <ph id=\"ph2\">`set urlacl`</ph>.","pos":[3402,3462],"source":"The `/a` parameter is also required when using `set urlacl`."},{"content":"It takes a string that contains an Access Control List (ACL) in the form of a Security Descriptor Definition Language (SDDL) string.","pos":[3463,3595]},{"content":"The following shows an example of using this command.","pos":[3602,3655]},{"pos":[3786,3844],"content":"Running Windows Vista, Windows Server 2008 R2 or Windows 7","linkify":"Running Windows Vista, Windows Server 2008 R2 or Windows 7","nodes":[{"content":"Running Windows Vista, Windows Server 2008 R2 or Windows 7","pos":[0,58]}]},{"content":"If you are running on <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>, Windows Server 2008 R2 or Windows 7, use the Netsh.exe tool.","pos":[3848,3977],"source":"If you are running on [!INCLUDE[wv](../../../../includes/wv-md.md)], Windows Server 2008 R2 or Windows 7, use the Netsh.exe tool."},{"content":"The following shows an example of using this command.","pos":[3978,4031]},{"content":"This command adds an URL reservation for the specified URL namespace for the DOMAIN\\user account.","pos":[4123,4220]},{"content":"For more information on using the netsh command type \"netsh http add urlacl\" in a command-prompt and press enter.","pos":[4222,4335]},{"pos":[4344,4376],"content":"Configuring a Firewall Exception","linkify":"Configuring a Firewall Exception","nodes":[{"content":"Configuring a Firewall Exception","pos":[0,32]}]},{"content":"When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.","pos":[4380,4550]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Open a port in Windows Firewall (Windows 7)<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=239961)</ept>","pos":[4551,4670],"source":" For more information, see [Open a port in Windows Firewall (Windows 7)](https://go.microsoft.com/fwlink/?LinkId=239961)"},{"pos":[4679,4707],"content":"Configuring SSL Certificates","linkify":"Configuring SSL Certificates","nodes":[{"content":"Configuring SSL Certificates","pos":[0,28]}]},{"content":"The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.","pos":[4711,4819]},{"content":"The server provides its SSL certificate when a connection is made so that the client can verify the server identity.","pos":[4820,4936]},{"content":"The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.","pos":[4937,5060]},{"content":"Certificates are stored in a centralized store according to the IP address and port number of the connection.","pos":[5067,5176]},{"content":"The special IP address 0.0.0.0 matches any IP address for the local machine.","pos":[5177,5253]},{"content":"Note that the certificate store does not distinguish URLs based on the path.","pos":[5254,5330]},{"content":"Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.","pos":[5331,5468]},{"pos":[5475,5660],"content":"For step-by-step instructions, see <bpt id=\"p1\">[</bpt>How to: Configure a Port with an SSL Certificate<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)</ept>.","source":"For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)."},{"pos":[5669,5699],"content":"Configuring the IP Listen List","linkify":"Configuring the IP Listen List","nodes":[{"content":"Configuring the IP Listen List","pos":[0,30]}]},{"content":"The HTTP Server API only binds to an IP address and port once a user registers a URL.","pos":[5703,5788]},{"content":"By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.","pos":[5789,5893]},{"content":"A conflict arises if an application that does not use the HTTP Server API has previously bound to that combination of IP address and port.","pos":[5894,6032]},{"content":"The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.","pos":[6033,6161]},{"content":"If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.","pos":[6162,6283]},{"content":"Modifying the IP Listen List requires administrative privileges.","pos":[6284,6348]},{"pos":[6358,6391],"content":"Running Windows XP or Server 2003","linkify":"Running Windows XP or Server 2003","nodes":[{"content":"Running Windows XP or Server 2003","pos":[0,33]}]},{"content":"Use the httpcfg tool to modify the IP Listen List, as shown in the following example.","pos":[6395,6480]},{"content":"The <bpt id=\"p1\">[</bpt>Windows Support Tools documentation<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=94840)</ept> explains the syntax for the httpcfg.exe tool.","pos":[6481,6615],"source":" The [Windows Support Tools documentation](https://go.microsoft.com/fwlink/?LinkId=94840) explains the syntax for the httpcfg.exe tool."},{"pos":[6690,6724],"content":"Running Windows Vista or Windows 7","linkify":"Running Windows Vista or Windows 7","nodes":[{"content":"Running Windows Vista or Windows 7","pos":[0,34]}]},{"content":"Use the netsh tool to modify the IP Listen List, as shown in the following example.","pos":[6728,6811]},{"pos":[6891,6919],"content":"Other Configuration Settings","linkify":"Other Configuration Settings","nodes":[{"content":"Other Configuration Settings","pos":[0,28]}]},{"content":"When using <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSDualHttpBinding&gt;</ph>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.","pos":[6923,7089],"source":"When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall."},{"content":"If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.","pos":[7090,7251]},{"content":"The HTTP Server API has some advanced configuration settings that are not available through HttpCfg.","pos":[7258,7358]},{"content":"These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.","pos":[7359,7488]},{"content":"For information about these settings, see <bpt id=\"p1\">[</bpt>Http.sys registry settings for IIS<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=94843)</ept>.","pos":[7489,7615],"source":" For information about these settings, see [Http.sys registry settings for IIS](https://go.microsoft.com/fwlink/?LinkId=94843)."},{"content":"Most users should not need to change these settings.","pos":[7616,7668]},{"pos":[7677,7706],"content":"Issues Specific to Windows XP","linkify":"Issues Specific to Windows XP","nodes":[{"content":"Issues Specific to Windows XP","pos":[0,29]}]},{"content":"IIS does not support port sharing on <ph id=\"ph1\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>.","pos":[7710,7795],"source":"IIS does not support port sharing on [!INCLUDE[wxp](../../../../includes/wxp-md.md)]."},{"content":"If IIS is running and a WCF service attempts to use a namespace with the same port, the WCF service fails to start.","pos":[7796,7911]},{"content":"IIS and WCF both default to using port 80.","pos":[7912,7954]},{"content":"Either change the port assignment for one of the services or use the IP Listen List to assign the WCF service to a network adapter not used by IIS.","pos":[7955,8102]},{"content":"IIS 6.0 and later have been redesigned to use the HTTP Server APIs.","pos":[8103,8170]},{"pos":[8179,8187],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[8238,8387],"content":"<bpt id=\"p1\">[</bpt>How to: Configure a Port with an SSL Certificate<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)</ept>","source":"[How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)"}]}