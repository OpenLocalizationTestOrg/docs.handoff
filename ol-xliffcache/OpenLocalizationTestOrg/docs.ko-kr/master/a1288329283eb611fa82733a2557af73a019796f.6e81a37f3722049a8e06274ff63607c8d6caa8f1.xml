{"content":"---\ntitle: \"Service Description\"\nms.date: \"03/30/2017\"\nms.assetid: 7034b5d6-d608-45f3-b57d-ec135f83ff24\n---\n# Service Description\nThe Service Description sample demonstrates how a service can retrieve its service description information at runtime. The sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), with an additional service operation defined to return descriptive information about the service. The information that is returned lists the base addresses and endpoints for the service. The service provides this information using the <xref:System.ServiceModel.OperationContext>, <xref:System.ServiceModel.ServiceHost>, and <xref:System.ServiceModel.Description.ServiceDescription> classes.  \n  \n In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n This sample has a modified version of the calculator contract called `IServiceDescriptionCalculator`. The contract defines an additional service operation named `GetServiceDescriptionInfo` that returns a multi-line string to the client that describes the base address or addresses and service endpoint or endpoints for the service.  \n  \n```csharp\n[ServiceContract(Namespace=\"http://Microsoft.ServiceModel.Samples\")]  \npublic interface IServiceDescriptionCalculator  \n{  \n    [OperationContract]  \n    int Add(int n1, int n2);  \n    [OperationContract]  \n    int Subtract(int n1, int n2);  \n    [OperationContract]  \n    int Multiply(int n1, int n2);  \n    [OperationContract]  \n    int Divide(int n1, int n2);  \n    [OperationContract]  \n    string GetServiceDescriptionInfo();  \n}  \n```  \n  \n The implementation code for `GetServiceDescriptionInfo` uses the <xref:System.ServiceModel.Description.ServiceDescription> to list the service endpoints. Because service endpoints can have relative addresses, it first lists the base addresses for the service. To get all of this information, the code obtains its operation context using <xref:System.ServiceModel.OperationContext.Current%2A>. The <xref:System.ServiceModel.ServiceHost> and its <xref:System.ServiceModel.Description.ServiceDescription> object are retrieved from the operation context. To list the base endpoints for the service, the code iterates through the service host's <xref:System.ServiceModel.ServiceHostBase.BaseAddresses%2A> collection. To list the service endpoints for the service, the code iterates through the service description's endpoints collection.  \n  \n```csharp\npublic string GetServiceDescriptionInfo()  \n{  \n    string info = \"\";  \n    OperationContext operationContext = OperationContext.Current;  \n    ServiceHost host = (ServiceHost)operationContext.Host;  \n    ServiceDescription desc = host.Description;  \n    // Enumerate the base addresses in the service host.  \n    info += \"Base addresses:\\n\";  \n    foreach (Uri uri in host.BaseAddresses)  \n    {  \n        info += \"    \" + uri + \"\\n\";  \n    }  \n    // Enumerate the service endpoints in the service description.  \n    info += \"Service endpoints:\\n\";  \n    foreach (ServiceEndpoint endpoint in desc.Endpoints)  \n    {  \n        info += \"    Address:  \" + endpoint.Address + \"\\n\";  \n        info += \"    Binding:  \" + endpoint.Binding.Name + \"\\n\";  \n        info += \"    Contract: \" + endpoint.Contract.Name + \"\\n\";  \n    }  \n     return info;  \n}  \n```  \n  \n When you run the sample, you see the calculator operations and then the service information returned by the `GetServiceDescriptionInfo` operation. Press ENTER in the client window to shut down the client.  \n  \n```console  \nAdd(15,3) = 18  \nSubtract(145,76) = 69  \nMultiply(9,81) = 729  \nDivide(22,7) = 3  \nGetServiceDescriptionInfo  \nBase addresses:  \n    http://<machine-name>/ServiceModelSamples/service.svc  \n    https://<machine-name>/ServiceModelSamples/service.svc  \nService endpoints:  \n    Address:  http://<machine-name>/ServiceModelSamples/service.svc  \n    Binding:  WSHttpBinding  \n    Contract: IServiceDescriptionCalculator  \n    Address:  http://<machine-name>/ServiceModelSamples/service.svc/mex  \n    Binding:  MetadataExchangeHttpBinding  \n    Contract: IMetadataExchange  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\ServiceDescription`  \n","nodes":[{"pos":[4,103],"embed":true,"restype":"x-metadata","content":"title: \"Service Description\"\nms.date: \"03/30/2017\"\nms.assetid: 7034b5d6-d608-45f3-b57d-ec135f83ff24","nodes":[{"content":"Service Description","nodes":[{"pos":[0,19],"content":"Service Description","nodes":[{"content":"Service Description","pos":[0,19]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[110,129],"content":"Service Description","linkify":"Service Description","nodes":[{"content":"Service Description","pos":[0,19]}]},{"content":"The Service Description sample demonstrates how a service can retrieve its service description information at runtime.","pos":[130,248]},{"content":"The sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>, with an additional service operation defined to return descriptive information about the service.","pos":[249,458],"source":" The sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), with an additional service operation defined to return descriptive information about the service."},{"content":"The information that is returned lists the base addresses and endpoints for the service.","pos":[459,547]},{"content":"The service provides this information using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationContext&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.ServiceDescription&gt;</ph> classes.","pos":[548,751],"source":" The service provides this information using the <xref:System.ServiceModel.OperationContext>, <xref:System.ServiceModel.ServiceHost>, and <xref:System.ServiceModel.Description.ServiceDescription> classes."},{"content":"In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).","pos":[758,882]},{"pos":[890,997],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"This sample has a modified version of the calculator contract called <ph id=\"ph1\">`IServiceDescriptionCalculator`</ph>.","pos":[1004,1105],"source":"This sample has a modified version of the calculator contract called `IServiceDescriptionCalculator`."},{"content":"The contract defines an additional service operation named <ph id=\"ph1\">`GetServiceDescriptionInfo`</ph> that returns a multi-line string to the client that describes the base address or addresses and service endpoint or endpoints for the service.","pos":[1106,1335],"source":" The contract defines an additional service operation named `GetServiceDescriptionInfo` that returns a multi-line string to the client that describes the base address or addresses and service endpoint or endpoints for the service."},{"content":"The implementation code for <ph id=\"ph1\">`GetServiceDescriptionInfo`</ph> uses the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceDescription&gt;</ph> to list the service endpoints.","pos":[1798,1951],"source":"The implementation code for `GetServiceDescriptionInfo` uses the <xref:System.ServiceModel.Description.ServiceDescription> to list the service endpoints."},{"content":"Because service endpoints can have relative addresses, it first lists the base addresses for the service.","pos":[1952,2057]},{"content":"To get all of this information, the code obtains its operation context using <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationContext.Current%2A&gt;</ph>.","pos":[2058,2190],"source":" To get all of this information, the code obtains its operation context using <xref:System.ServiceModel.OperationContext.Current%2A>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> and its <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceDescription&gt;</ph> object are retrieved from the operation context.","pos":[2191,2348],"source":" The <xref:System.ServiceModel.ServiceHost> and its <xref:System.ServiceModel.Description.ServiceDescription> object are retrieved from the operation context."},{"content":"To list the base endpoints for the service, the code iterates through the service host's <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHostBase.BaseAddresses%2A&gt;</ph> collection.","pos":[2349,2509],"source":" To list the base endpoints for the service, the code iterates through the service host's <xref:System.ServiceModel.ServiceHostBase.BaseAddresses%2A> collection."},{"content":"To list the service endpoints for the service, the code iterates through the service description's endpoints collection.","pos":[2510,2630]},{"content":"When you run the sample, you see the calculator operations and then the service information returned by the <ph id=\"ph1\">`GetServiceDescriptionInfo`</ph> operation.","pos":[3505,3651],"source":"When you run the sample, you see the calculator operations and then the service information returned by the `GetServiceDescriptionInfo` operation."},{"content":"Press ENTER in the client window to shut down the client.","pos":[3652,3709]},{"pos":[4350,4386],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[4396,4595],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[4605,4814],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4824,5032],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[5040,5172],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5226,5536],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5537,5587]}]}