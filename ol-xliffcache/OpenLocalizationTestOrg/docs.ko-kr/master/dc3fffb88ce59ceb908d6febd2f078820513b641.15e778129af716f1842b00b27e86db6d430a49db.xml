{"content":"---\ntitle: \"How to: Receive Notification When a Clock's State Changes\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"clocks [WPF], notification of state changes\"\n  - \"notifications [WPF], clocks' state changes\"\nms.assetid: ecb10fc9-d0c2-45c3-b0a1-7b11baa733da\n---\n# How to: Receive Notification When a Clock's State Changes\nA clock's <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event occurs when its <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> becomes invalid, such as when the clock starts or stops. You can register for this event with directly using a <xref:System.Windows.Media.Animation.Clock>, or you can register using a <xref:System.Windows.Media.Animation.Timeline>.  \n  \n In the following example, a <xref:System.Windows.Media.Animation.Storyboard> and two <xref:System.Windows.Media.Animation.DoubleAnimation> objects are used to animate the width of two rectangles. The <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event is used to listen for clock state changes.  \n  \n## Example  \n [!code-xaml[timingbehaviors_snip#_graphicsmm_StateExampleMarkupWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/timingbehaviors_snip/CSharp/StateExample.xaml#_graphicsmm_stateexamplemarkupwholepage)]  \n  \n [!code-csharp[timingbehaviors_snip#_graphicsmm_StateEventHandlers](~/samples/snippets/csharp/VS_Snippets_Wpf/timingbehaviors_snip/CSharp/StateExample.xaml.cs#_graphicsmm_stateeventhandlers)]\n [!code-vb[timingbehaviors_snip#_graphicsmm_StateEventHandlers](~/samples/snippets/visualbasic/VS_Snippets_Wpf/timingbehaviors_snip/visualbasic/stateexample.xaml.vb#_graphicsmm_stateeventhandlers)]  \n  \n The following illustration shows the different states the animations enter as the parent timeline (*Storyboard*) progresses.  \n  \n ![Clock states for a Storyboard with two animations](./media/graphicsmm-3timelines.png \"graphicsmm_3timelines\")  \n  \n The following table shows the times at which *Animation1*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:  \n  \n||||||||  \n|-|-|-|-|-|-|-|  \n|Time (Seconds)|1|10|19|21|30|39|  \n|State|Active|Active|Stopped|Active|Active|Stopped|  \n  \n The following table shows the times at which *Animation2*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:  \n  \n||||||||||  \n|-|-|-|-|-|-|-|-|-|  \n|Time (Seconds)|1|9|11|19|21|29|31|39|  \n|State|Active|Filling|Active|Stopped|Active|Filling|Active|Stopped|  \n  \n Notice that *Animation1*'s  <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires at 10 seconds, even though its state remains <xref:System.Windows.Media.Animation.ClockState.Active>. That's because its state changed at 10 seconds, but it changed from <xref:System.Windows.Media.Animation.ClockState.Active> to <xref:System.Windows.Media.Animation.ClockState.Filling> and then back to <xref:System.Windows.Media.Animation.ClockState.Active> in the same tick.\n","nodes":[{"pos":[4,296],"embed":true,"restype":"x-metadata","content":"title: \"How to: Receive Notification When a Clock's State Changes\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"clocks [WPF], notification of state changes\"\n  - \"notifications [WPF], clocks' state changes\"\nms.assetid: ecb10fc9-d0c2-45c3-b0a1-7b11baa733da","nodes":[{"content":"How to: Receive Notification When a Clock's State Changes","nodes":[{"pos":[0,57],"content":"How to: Receive Notification When a Clock's State Changes","nodes":[{"content":"How to: Receive Notification When a Clock's State Changes","pos":[0,57]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[303,360],"content":"How to: Receive Notification When a Clock's State Changes","linkify":"How to: Receive Notification When a Clock's State Changes","nodes":[{"content":"How to: Receive Notification When a Clock's State Changes","pos":[0,57]}]},{"content":"A clock's <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated&gt;</ph> event occurs when its <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Clock.CurrentState%2A&gt;</ph> becomes invalid, such as when the clock starts or stops.","pos":[361,577],"source":"A clock's <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event occurs when its <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> becomes invalid, such as when the clock starts or stops."},{"content":"You can register for this event with directly using a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Clock&gt;</ph>, or you can register using a <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph>.","pos":[578,752],"source":" You can register for this event with directly using a <xref:System.Windows.Media.Animation.Clock>, or you can register using a <xref:System.Windows.Media.Animation.Timeline>."},{"content":"In the following example, a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> and two <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.DoubleAnimation&gt;</ph> objects are used to animate the width of two rectangles.","pos":[759,954],"source":"In the following example, a <xref:System.Windows.Media.Animation.Storyboard> and two <xref:System.Windows.Media.Animation.DoubleAnimation> objects are used to animate the width of two rectangles."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event is used to listen for clock state changes.","pos":[955,1078],"source":" The <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event is used to listen for clock state changes."},{"pos":[1087,1094],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1703,1827],"content":"The following illustration shows the different states the animations enter as the parent timeline (<bpt id=\"p1\">*</bpt>Storyboard<ept id=\"p1\">*</ept>) progresses.","source":"The following illustration shows the different states the animations enter as the parent timeline (*Storyboard*) progresses."},{"pos":[1834,1945],"content":"<bpt id=\"p1\">![</bpt>Clock states for a Storyboard with two animations<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/graphicsmm-3timelines.png \"</bpt>graphicsmm_3timelines<ept id=\"p2\">\")</ept>","source":"![Clock states for a Storyboard with two animations](./media/graphicsmm-3timelines.png \"graphicsmm_3timelines\")"},{"pos":[1952,2095],"content":"The following table shows the times at which <bpt id=\"p1\">*</bpt>Animation1<ept id=\"p1\">*</ept>'s <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event fires:","source":"The following table shows the times at which *Animation1*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:"},{"content":"Time (Seconds)","pos":[2131,2145]},{"content":"1","pos":[2146,2147]},{"content":"10","pos":[2148,2150]},{"content":"19","pos":[2151,2153]},{"content":"21","pos":[2154,2156]},{"content":"30","pos":[2157,2159]},{"content":"39","pos":[2160,2162]},{"content":"State","pos":[2167,2172]},{"content":"Active","pos":[2173,2179]},{"content":"Active","pos":[2180,2186]},{"content":"Stopped","pos":[2187,2194]},{"content":"Active","pos":[2195,2201]},{"content":"Active","pos":[2202,2208]},{"content":"Stopped","pos":[2209,2216]},{"pos":[2224,2367],"content":"The following table shows the times at which <bpt id=\"p1\">*</bpt>Animation2<ept id=\"p1\">*</ept>'s <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event fires:","source":"The following table shows the times at which *Animation2*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:"},{"content":"Time (Seconds)","pos":[2409,2423]},{"content":"1","pos":[2424,2425]},{"content":"9","pos":[2426,2427]},{"content":"11","pos":[2428,2430]},{"content":"19","pos":[2431,2433]},{"content":"21","pos":[2434,2436]},{"content":"29","pos":[2437,2439]},{"content":"31","pos":[2440,2442]},{"content":"39","pos":[2443,2445]},{"content":"State","pos":[2450,2455]},{"content":"Active","pos":[2456,2462]},{"content":"Filling","pos":[2463,2470]},{"content":"Active","pos":[2471,2477]},{"content":"Stopped","pos":[2478,2485]},{"content":"Active","pos":[2486,2492]},{"content":"Filling","pos":[2493,2500]},{"content":"Active","pos":[2501,2507]},{"content":"Stopped","pos":[2508,2515]},{"content":"Notice that <bpt id=\"p1\">*</bpt>Animation1<ept id=\"p1\">*</ept>'s  <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event fires at 10 seconds, even though its state remains <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.ClockState.Active&gt;</ph>.","pos":[2523,2735],"source":"Notice that *Animation1*'s  <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires at 10 seconds, even though its state remains <xref:System.Windows.Media.Animation.ClockState.Active>."},{"content":"That's because its state changed at 10 seconds, but it changed from <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.ClockState.Active&gt;</ph> to <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.ClockState.Filling&gt;</ph> and then back to <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.ClockState.Active&gt;</ph> in the same tick.","pos":[2736,3010],"source":" That's because its state changed at 10 seconds, but it changed from <xref:System.Windows.Media.Animation.ClockState.Active> to <xref:System.Windows.Media.Animation.ClockState.Filling> and then back to <xref:System.Windows.Media.Animation.ClockState.Active> in the same tick."}]}