{"content":"---\ntitle: \"Windows Communication Foundation Architecture\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Windows Communication Foundation [WCF], architecture\"\n  - \"WCF [WCF], architecture\"\n  - \"architecture [WCF]\"\nms.assetid: a3bcb0a1-56ea-4ba6-9736-d260d90dade5\n---\n# Windows Communication Foundation Architecture\nThe following graphic illustrates the major layers of the Windows Communication Foundation (WCF) architecture.  \n  \n## WCF Architecture  \n ![The WCF Architecture](../../../docs/framework/wcf/media/wcf-architecture.gif \"WCF_Architecture\")  \n  \n### Contracts and Descriptions  \n Contracts define various aspects of the message system. The data contract describes every parameter that makes up every message that a service can create or consume. The message parameters are defined by XML Schema definition language (XSD) documents, enabling any system that understands XML to process the documents. The message contract defines specific message parts using SOAP protocols, and allows finer-grained control over parts of the message, when interoperability demands such precision. The service contract specifies the actual method signatures of the service, and is distributed as an interface in one of the supported programming languages, such as Visual Basic or Visual C#.  \n  \n Policies and bindings stipulate the conditions required to communicate with a service.  For example, the binding must (at a minimum) specify the transport used (for example, HTTP or TCP), and an encoding. Policies include security requirements and other conditions that must be met to communicate with a service.  \n  \n### Service Runtime  \n The service runtime layer contains the behaviors that occur only during the actual operation of the service, that is, the runtime behaviors of the service. Throttling controls how many messages are processed, which can be varied if the demand for the service grows to a preset limit. An error behavior specifies what occurs when an internal error occurs on the service, for example, by controlling what information is communicated to the client. (Too much information can give a malicious user an advantage in mounting an attack.) Metadata behavior governs how and whether metadata is made available to the outside world. Instance behavior specifies how many instances of the service can be run (for example, a singleton specifies only one instance to process all messages). Transaction behavior enables the rollback of transacted operations if a failure occurs. Dispatch behavior is the control of how a message is processed by the WCF infrastructure.  \n  \n Extensibility enables customization of runtime processes. For example, message inspection is the facility to inspect parts of a message, and parameter filtering enables preset actions to occur based on filters acting on message headers.  \n  \n### Messaging  \n The messaging layer is composed of *channels*. A channel is a component that processes a message in some way, for example, by authenticating a message. A set of channels is also known as a *channel stack*. Channels operate on messages and message headers. This is different from the service runtime layer, which is primarily concerned about processing the contents of message bodies.  \n  \n There are two types of channels: transport channels and protocol channels.  \n  \n Transport channels read and write messages from the network (or some other communication point with the outside world). Some transports use an encoder to convert messages (which are represented as XML Infosets) to and from the byte stream representation used by the network. Examples of transports are HTTP, named pipes, TCP, and MSMQ. Examples of encodings are XML and optimized binary.  \n  \n Protocol channels implement message processing protocols, often by reading or writing additional headers to the message. Examples of such protocols include WS-Security and WS-Reliability.  \n  \n The messaging layer illustrates the possible formats and exchange patterns of the data. WS-Security is an implementation of the WS-Security specification enabling security at the message layer. The WS-Reliable Messaging channel enables the guarantee of message delivery. The encoders present a variety of encodings that can be used to suit the needs of the message. The HTTP channel specifies that the HyperText Transport Protocol is used for message delivery. The TCP channel similarly specifies the TCP protocol. The Transaction Flow channel governs transacted message patterns. The Named Pipe channel enables interprocess communication. The MSMQ channel enables interoperation with MSMQ applications.  \n  \n### Hosting and Activation  \n In its final form, a service is a program. Like other programs, a service must be run in an executable. This is known as a *self-hosted* service.  \n  \n Services can also be *hosted*, or run in an executable managed by an external agent, such as IIS or Windows Activation Service (WAS). WAS enables WCF applications to be activated automatically when deployed on a computer running WAS. Services can also be manually run as executables (.exe files). A service can also be run automatically as a Windows service. COM+ components can also be hosted as WCF services.  \n  \n## See also\n\n- [What Is Windows Communication Foundation](../../../docs/framework/wcf/whats-wcf.md)\n- [Fundamental Windows Communication Foundation Concepts](../../../docs/framework/wcf/fundamental-concepts.md)\n","nodes":[{"pos":[4,265],"embed":true,"restype":"x-metadata","content":"title: \"Windows Communication Foundation Architecture\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Windows Communication Foundation [WCF], architecture\"\n  - \"WCF [WCF], architecture\"\n  - \"architecture [WCF]\"\nms.assetid: a3bcb0a1-56ea-4ba6-9736-d260d90dade5","nodes":[{"content":"Windows Communication Foundation Architecture","nodes":[{"pos":[0,45],"content":"Windows Communication Foundation Architecture","nodes":[{"content":"Windows Communication Foundation Architecture","pos":[0,45]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[272,317],"content":"Windows Communication Foundation Architecture","linkify":"Windows Communication Foundation Architecture","nodes":[{"content":"Windows Communication Foundation Architecture","pos":[0,45]}]},{"content":"The following graphic illustrates the major layers of the Windows Communication Foundation (WCF) architecture.","pos":[318,428]},{"pos":[437,453],"content":"WCF Architecture","linkify":"WCF Architecture","nodes":[{"content":"WCF Architecture","pos":[0,16]}]},{"pos":[457,555],"content":"<bpt id=\"p1\">![</bpt>The WCF Architecture<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../docs/framework/wcf/media/wcf-architecture.gif \"</bpt>WCF_Architecture<ept id=\"p2\">\")</ept>","source":"![The WCF Architecture](../../../docs/framework/wcf/media/wcf-architecture.gif \"WCF_Architecture\")"},{"pos":[565,591],"content":"Contracts and Descriptions","linkify":"Contracts and Descriptions","nodes":[{"content":"Contracts and Descriptions","pos":[0,26]}]},{"content":"Contracts define various aspects of the message system.","pos":[595,650]},{"content":"The data contract describes every parameter that makes up every message that a service can create or consume.","pos":[651,760]},{"content":"The message parameters are defined by XML Schema definition language (XSD) documents, enabling any system that understands XML to process the documents.","pos":[761,913]},{"content":"The message contract defines specific message parts using SOAP protocols, and allows finer-grained control over parts of the message, when interoperability demands such precision.","pos":[914,1093]},{"content":"The service contract specifies the actual method signatures of the service, and is distributed as an interface in one of the supported programming languages, such as Visual Basic or Visual C#.","pos":[1094,1286]},{"content":"Policies and bindings stipulate the conditions required to communicate with a service.","pos":[1293,1379]},{"content":"For example, the binding must (at a minimum) specify the transport used (for example, HTTP or TCP), and an encoding.","pos":[1381,1497]},{"content":"Policies include security requirements and other conditions that must be met to communicate with a service.","pos":[1498,1605]},{"pos":[1615,1630],"content":"Service Runtime","linkify":"Service Runtime","nodes":[{"content":"Service Runtime","pos":[0,15]}]},{"content":"The service runtime layer contains the behaviors that occur only during the actual operation of the service, that is, the runtime behaviors of the service.","pos":[1634,1789]},{"content":"Throttling controls how many messages are processed, which can be varied if the demand for the service grows to a preset limit.","pos":[1790,1917]},{"content":"An error behavior specifies what occurs when an internal error occurs on the service, for example, by controlling what information is communicated to the client.","pos":[1918,2079]},{"content":"(Too much information can give a malicious user an advantage in mounting an attack.) Metadata behavior governs how and whether metadata is made available to the outside world.","pos":[2080,2255]},{"content":"Instance behavior specifies how many instances of the service can be run (for example, a singleton specifies only one instance to process all messages).","pos":[2256,2408]},{"content":"Transaction behavior enables the rollback of transacted operations if a failure occurs.","pos":[2409,2496]},{"content":"Dispatch behavior is the control of how a message is processed by the WCF infrastructure.","pos":[2497,2586]},{"content":"Extensibility enables customization of runtime processes.","pos":[2593,2650]},{"content":"For example, message inspection is the facility to inspect parts of a message, and parameter filtering enables preset actions to occur based on filters acting on message headers.","pos":[2651,2829]},{"pos":[2839,2848],"content":"Messaging","linkify":"Messaging","nodes":[{"content":"Messaging","pos":[0,9]}]},{"content":"The messaging layer is composed of <bpt id=\"p1\">*</bpt>channels<ept id=\"p1\">*</ept>.","pos":[2852,2898],"source":"The messaging layer is composed of *channels*."},{"content":"A channel is a component that processes a message in some way, for example, by authenticating a message.","pos":[2899,3003]},{"content":"A set of channels is also known as a <bpt id=\"p1\">*</bpt>channel stack<ept id=\"p1\">*</ept>.","pos":[3004,3057],"source":" A set of channels is also known as a *channel stack*."},{"content":"Channels operate on messages and message headers.","pos":[3058,3107]},{"content":"This is different from the service runtime layer, which is primarily concerned about processing the contents of message bodies.","pos":[3108,3235]},{"content":"There are two types of channels: transport channels and protocol channels.","pos":[3242,3316]},{"content":"Transport channels read and write messages from the network (or some other communication point with the outside world).","pos":[3323,3442]},{"content":"Some transports use an encoder to convert messages (which are represented as XML Infosets) to and from the byte stream representation used by the network.","pos":[3443,3597]},{"content":"Examples of transports are HTTP, named pipes, TCP, and MSMQ.","pos":[3598,3658]},{"content":"Examples of encodings are XML and optimized binary.","pos":[3659,3710]},{"content":"Protocol channels implement message processing protocols, often by reading or writing additional headers to the message.","pos":[3717,3837]},{"content":"Examples of such protocols include WS-Security and WS-Reliability.","pos":[3838,3904]},{"content":"The messaging layer illustrates the possible formats and exchange patterns of the data.","pos":[3911,3998]},{"content":"WS-Security is an implementation of the WS-Security specification enabling security at the message layer.","pos":[3999,4104]},{"content":"The WS-Reliable Messaging channel enables the guarantee of message delivery.","pos":[4105,4181]},{"content":"The encoders present a variety of encodings that can be used to suit the needs of the message.","pos":[4182,4276]},{"content":"The HTTP channel specifies that the HyperText Transport Protocol is used for message delivery.","pos":[4277,4371]},{"content":"The TCP channel similarly specifies the TCP protocol.","pos":[4372,4425]},{"content":"The Transaction Flow channel governs transacted message patterns.","pos":[4426,4491]},{"content":"The Named Pipe channel enables interprocess communication.","pos":[4492,4550]},{"content":"The MSMQ channel enables interoperation with MSMQ applications.","pos":[4551,4614]},{"pos":[4624,4646],"content":"Hosting and Activation","linkify":"Hosting and Activation","nodes":[{"content":"Hosting and Activation","pos":[0,22]}]},{"content":"In its final form, a service is a program.","pos":[4650,4692]},{"content":"Like other programs, a service must be run in an executable.","pos":[4693,4753]},{"content":"This is known as a <bpt id=\"p1\">*</bpt>self-hosted<ept id=\"p1\">*</ept> service.","pos":[4754,4795],"source":" This is known as a *self-hosted* service."},{"content":"Services can also be <bpt id=\"p1\">*</bpt>hosted<ept id=\"p1\">*</ept>, or run in an executable managed by an external agent, such as IIS or Windows Activation Service (WAS).","pos":[4802,4935],"source":"Services can also be *hosted*, or run in an executable managed by an external agent, such as IIS or Windows Activation Service (WAS)."},{"content":"WAS enables WCF applications to be activated automatically when deployed on a computer running WAS.","pos":[4936,5035]},{"content":"Services can also be manually run as executables (.exe files).","pos":[5036,5098]},{"content":"A service can also be run automatically as a Windows service.","pos":[5099,5160]},{"content":"COM+ components can also be hosted as WCF services.","pos":[5161,5212]},{"pos":[5221,5229],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5233,5317],"content":"<bpt id=\"p1\">[</bpt>What Is Windows Communication Foundation<ept id=\"p1\">](../../../docs/framework/wcf/whats-wcf.md)</ept>","source":"[What Is Windows Communication Foundation](../../../docs/framework/wcf/whats-wcf.md)"},{"pos":[5320,5428],"content":"<bpt id=\"p1\">[</bpt>Fundamental Windows Communication Foundation Concepts<ept id=\"p1\">](../../../docs/framework/wcf/fundamental-concepts.md)</ept>","source":"[Fundamental Windows Communication Foundation Concepts](../../../docs/framework/wcf/fundamental-concepts.md)"}]}