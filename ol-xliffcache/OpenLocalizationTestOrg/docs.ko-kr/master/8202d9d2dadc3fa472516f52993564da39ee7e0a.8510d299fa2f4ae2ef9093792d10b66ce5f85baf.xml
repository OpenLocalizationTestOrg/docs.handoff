{"content":"---\ntitle: \"How to: Receive Notification When a Clock&#39;s State Changes | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-wpf\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"clocks, notification of state changes\"\n  - \"notifications, clocks' state changes\"\nms.assetid: ecb10fc9-d0c2-45c3-b0a1-7b11baa733da\ncaps.latest.revision: 7\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# How to: Receive Notification When a Clock&#39;s State Changes\nA clock's <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event occurs when its <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> becomes invalid, such as when the clock starts or stops. You can register for this event with directly using a <xref:System.Windows.Media.Animation.Clock>, or you can register using a <xref:System.Windows.Media.Animation.Timeline>.  \n  \n In the following example, a <xref:System.Windows.Media.Animation.Storyboard> and two <xref:System.Windows.Media.Animation.DoubleAnimation> objects are used to animate the width of two rectangles. The <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event is used to listen for clock state changes.  \n  \n## Example  \n [!code-xml[timingbehaviors_snip#_graphicsmm_StateExampleMarkupWholePage](../../../../samples/snippets/csharp/VS_Snippets_Wpf/timingbehaviors_snip/CSharp/StateExample.xaml#_graphicsmm_stateexamplemarkupwholepage)]  \n  \n [!code-csharp[timingbehaviors_snip#_graphicsmm_StateEventHandlers](../../../../samples/snippets/csharp/VS_Snippets_Wpf/timingbehaviors_snip/CSharp/StateExample.xaml.cs#_graphicsmm_stateeventhandlers)]\n [!code-vb[timingbehaviors_snip#_graphicsmm_StateEventHandlers](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/timingbehaviors_snip/visualbasic/stateexample.xaml.vb#_graphicsmm_stateeventhandlers)]  \n  \n The following illustration shows the different states the animations enter as the parent timeline (*Storyboard*) progresses.  \n  \n ![Clock states for a Storyboard with two animations](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-3timelines.png \"graphicsmm_3timelines\")  \n  \n The following table shows the times at which *Animation1*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:  \n  \n||||||||  \n|-|-|-|-|-|-|-|  \n|Time (Seconds)|1|10|19|21|30|39|  \n|State|Active|Active|Stopped|Active|Active|Stopped|  \n  \n The following table shows the times at which *Animation2*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:  \n  \n||||||||||  \n|-|-|-|-|-|-|-|-|-|  \n|Time (Seconds)|1|9|11|19|21|29|31|39|  \n|State|Active|Filling|Active|Stopped|Active|Filling|Active|Stopped|  \n  \n Notice that *Animation1*'s  <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires at 10 seconds, even though its state remains <xref:System.Windows.Media.Animation.ClockState>. That's because its state changed at 10 seconds, but it changed from <xref:System.Windows.Media.Animation.ClockState> to <xref:System.Windows.Media.Animation.ClockState> and then back to <xref:System.Windows.Media.Animation.ClockState> in the same tick.","nodes":[{"pos":[4,499],"embed":true,"restype":"x-metadata","content":"title: \"How to: Receive Notification When a Clock&#39;s State Changes | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-wpf\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"clocks, notification of state changes\"\n  - \"notifications, clocks' state changes\"\nms.assetid: ecb10fc9-d0c2-45c3-b0a1-7b11baa733da\ncaps.latest.revision: 7\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"","nodes":[{"content":"How to: Receive Notification When a Clock&#39;s State Changes | Microsoft Docs","nodes":[{"pos":[0,78],"content":"How to: Receive Notification When a Clock&#39;s State Changes | Microsoft Docs","nodes":[{"content":"How to: Receive Notification When a Clock&amp;#39;s State Changes | Microsoft Docs","pos":[0,78],"source":"How to: Receive Notification When a Clock&#39;s State Changes | Microsoft Docs"}]}],"path":["title"]}],"yml":true},{"pos":[506,567],"content":"How to: Receive Notification When a Clock&#39;s State Changes","linkify":"How to: Receive Notification When a Clock&#39;s State Changes","nodes":[{"content":"How to: Receive Notification When a Clock&amp;#39;s State Changes","pos":[0,61],"source":"How to: Receive Notification When a Clock&#39;s State Changes"}]},{"content":"A clock's <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated&gt;</ph> event occurs when its <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Clock.CurrentState%2A&gt;</ph> becomes invalid, such as when the clock starts or stops.","pos":[568,784],"source":"A clock's <xref:System.Windows.Media.Animation.Clock.CurrentStateInvalidated> event occurs when its <xref:System.Windows.Media.Animation.Clock.CurrentState%2A> becomes invalid, such as when the clock starts or stops."},{"content":"You can register for this event with directly using a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Clock&gt;</ph>, or you can register using a <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph>.","pos":[785,959],"source":" You can register for this event with directly using a <xref:System.Windows.Media.Animation.Clock>, or you can register using a <xref:System.Windows.Media.Animation.Timeline>."},{"content":"In the following example, a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> and two <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.DoubleAnimation&gt;</ph> objects are used to animate the width of two rectangles.","pos":[966,1161],"source":"In the following example, a <xref:System.Windows.Media.Animation.Storyboard> and two <xref:System.Windows.Media.Animation.DoubleAnimation> objects are used to animate the width of two rectangles."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event is used to listen for clock state changes.","pos":[1162,1285],"source":" The <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event is used to listen for clock state changes."},{"pos":[1294,1301],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1939,2063],"content":"The following illustration shows the different states the animations enter as the parent timeline (<bpt id=\"p1\">*</bpt>Storyboard<ept id=\"p1\">*</ept>) progresses.","source":"The following illustration shows the different states the animations enter as the parent timeline (*Storyboard*) progresses."},{"pos":[2070,2230],"content":"<bpt id=\"p1\">![</bpt>Clock states for a Storyboard with two animations<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-3timelines.png \"</bpt>graphicsmm_3timelines<ept id=\"p2\">\")</ept>","source":"![Clock states for a Storyboard with two animations](../../../../docs/framework/wpf/graphics-multimedia/media/graphicsmm-3timelines.png \"graphicsmm_3timelines\")"},{"pos":[2237,2380],"content":"The following table shows the times at which <bpt id=\"p1\">*</bpt>Animation1<ept id=\"p1\">*</ept>'s <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event fires:","source":"The following table shows the times at which *Animation1*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:"},{"content":"Time (Seconds)","pos":[2416,2430]},{"content":"1","pos":[2431,2432]},{"content":"10","pos":[2433,2435]},{"content":"19","pos":[2436,2438]},{"content":"21","pos":[2439,2441]},{"content":"30","pos":[2442,2444]},{"content":"39","pos":[2445,2447]},{"content":"State","pos":[2452,2457]},{"content":"Active","pos":[2458,2464]},{"content":"Active","pos":[2465,2471]},{"content":"Stopped","pos":[2472,2479]},{"content":"Active","pos":[2480,2486]},{"content":"Active","pos":[2487,2493]},{"content":"Stopped","pos":[2494,2501]},{"pos":[2509,2652],"content":"The following table shows the times at which <bpt id=\"p1\">*</bpt>Animation2<ept id=\"p1\">*</ept>'s <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event fires:","source":"The following table shows the times at which *Animation2*'s <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires:"},{"content":"Time (Seconds)","pos":[2694,2708]},{"content":"1","pos":[2709,2710]},{"content":"9","pos":[2711,2712]},{"content":"11","pos":[2713,2715]},{"content":"19","pos":[2716,2718]},{"content":"21","pos":[2719,2721]},{"content":"29","pos":[2722,2724]},{"content":"31","pos":[2725,2727]},{"content":"39","pos":[2728,2730]},{"content":"State","pos":[2735,2740]},{"content":"Active","pos":[2741,2747]},{"content":"Filling","pos":[2748,2755]},{"content":"Active","pos":[2756,2762]},{"content":"Stopped","pos":[2763,2770]},{"content":"Active","pos":[2771,2777]},{"content":"Filling","pos":[2778,2785]},{"content":"Active","pos":[2786,2792]},{"content":"Stopped","pos":[2793,2800]},{"content":"Notice that <bpt id=\"p1\">*</bpt>Animation1<ept id=\"p1\">*</ept>'s  <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated&gt;</ph> event fires at 10 seconds, even though its state remains <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.ClockState&gt;</ph>.","pos":[2808,3013],"source":"Notice that *Animation1*'s  <xref:System.Windows.Media.Animation.Timeline.CurrentStateInvalidated> event fires at 10 seconds, even though its state remains <xref:System.Windows.Media.Animation.ClockState>."},{"content":"That's because its state changed at 10 seconds, but it changed from <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.ClockState&gt;</ph> to <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.ClockState&gt;</ph> and then back to <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.ClockState&gt;</ph> in the same tick.","pos":[3014,3266],"source":" That's because its state changed at 10 seconds, but it changed from <xref:System.Windows.Media.Animation.ClockState> to <xref:System.Windows.Media.Animation.ClockState> and then back to <xref:System.Windows.Media.Animation.ClockState> in the same tick."}]}