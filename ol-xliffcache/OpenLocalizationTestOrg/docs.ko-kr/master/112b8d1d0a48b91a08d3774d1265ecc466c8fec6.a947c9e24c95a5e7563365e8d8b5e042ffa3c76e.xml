{"content":"---\ntitle: \"Programming Model Item Tree | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 0229efde-19ac-4bdc-a187-c6227a7bd1a5\ncaps.latest.revision: 11\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Programming Model Item Tree\nThis sample demonstrates how to navigate the <xref:System.Activities.Presentation.Model.ModelItem> tree using declarative data binding from the [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] Tree View.  \n  \n## Sample Details  \n The <xref:System.Activities.Presentation.Model.ModelItem> tree is the abstraction that is used by the [!INCLUDE[wfd1](../../../../includes/wfd1-md.md)] infrastructure to expose the data about the underlying instance being edited. The following illustration is a depiction of the various layers of infrastructure within the [!INCLUDE[wfd2](../../../../includes/wfd2-md.md)].  \n  \n ![Workflow Designer Architecture](../../../../docs/framework/windows-workflow-foundation/samples/media/workflowdesignerarch.JPG \"WorkflowDesignerArch\")  \n  \n A <xref:System.Activities.Presentation.Model.ModelItem> consists of a pointer to the underlying value, as well as a collection of <xref:System.Activities.Presentation.Model.ModelProperty> objects. A <xref:System.Activities.Presentation.Model.ModelProperty> object in turn, consists of data such as the name and type of the property and then a pointer to the value, which in turn, is another <xref:System.Activities.Presentation.Model.ModelItem>. A value converter is used to manipulate some of the <xref:System.Activities.Presentation.Model.ModelItem>s returned from a <xref:System.Activities.Presentation.Model.ModelProperty> to make them appear correctly in the tree view. The sample then demonstrates how to imperatively program against the <xref:System.Activities.Presentation.Model.ModelItem> tree using the imperative syntax, as seen in the following example.  \n  \n```csharp  \nModelItem mi = wd.Context.Services.GetService<ModelService>().Root;  \nModelProperty mp = mi.Properties[\"Activities\"];  \nmp.Collection.Add(new Persist());  \nModelItem justAdded = mp.Collection.Last();  \njustAdded.Properties[\"DisplayName\"].SetValue(\"new name\");  \n  \n```  \n  \n#### To use this sample  \n  \n1.  Open the ProgrammingModelItemTree.sln solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n2.  Build the solution by selecting **Build Solution** from the **Build** menu.  \n  \n3.  Press F5 to run the application. The [!INCLUDE[avalon2](../../../../includes/avalon2-md.md)] form is then displayed.  \n  \n4.  Click the **Load WF** button to load the <xref:System.Activities.Presentation.Model.ModelItem> and bind it to the tree view.  \n  \n5.  Clicking the **Change Model Item Tree** button executes the preceding code to add an item into the tree and set a property.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Designer\\ProgrammingModelItemTree`  \n  \n## See Also  \n <xref:System.Windows.Data.IValueConverter>","nodes":[{"pos":[12,56],"content":"Programming Model Item Tree | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Programming Model Item Tree | Microsoft Docs","pos":[0,44]}]},{"pos":[322,349],"content":"Programming Model Item Tree","linkify":"Programming Model Item Tree","nodes":[{"content":"Programming Model Item Tree","pos":[0,27]}]},{"pos":[350,560],"content":"This sample demonstrates how to navigate the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree using declarative data binding from the <ph id=\"ph2\">[!INCLUDE[avalon1](../../../../includes/avalon1-md.md)]</ph> Tree View.","source":"This sample demonstrates how to navigate the <xref:System.Activities.Presentation.Model.ModelItem> tree using declarative data binding from the [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] Tree View."},{"pos":[569,583],"content":"Sample Details","linkify":"Sample Details","nodes":[{"content":"Sample Details","pos":[0,14]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree is the abstraction that is used by the <ph id=\"ph2\">[!INCLUDE[wfd1](../../../../includes/wfd1-md.md)]</ph> infrastructure to expose the data about the underlying instance being edited.","pos":[587,816],"source":"The <xref:System.Activities.Presentation.Model.ModelItem> tree is the abstraction that is used by the [!INCLUDE[wfd1](../../../../includes/wfd1-md.md)] infrastructure to expose the data about the underlying instance being edited."},{"content":"The following illustration is a depiction of the various layers of infrastructure within the <ph id=\"ph1\">[!INCLUDE[wfd2](../../../../includes/wfd2-md.md)]</ph>.","pos":[817,960],"source":" The following illustration is a depiction of the various layers of infrastructure within the [!INCLUDE[wfd2](../../../../includes/wfd2-md.md)]."},{"pos":[967,1118],"content":"<bpt id=\"p1\">![</bpt>Workflow Designer Architecture<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/windows-workflow-foundation/samples/media/workflowdesignerarch.JPG \"</bpt>WorkflowDesignerArch<ept id=\"p2\">\")</ept>","source":"![Workflow Designer Architecture](../../../../docs/framework/windows-workflow-foundation/samples/media/workflowdesignerarch.JPG \"WorkflowDesignerArch\")"},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> consists of a pointer to the underlying value, as well as a collection of <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelProperty&gt;</ph> objects.","pos":[1125,1321],"source":"A <xref:System.Activities.Presentation.Model.ModelItem> consists of a pointer to the underlying value, as well as a collection of <xref:System.Activities.Presentation.Model.ModelProperty> objects."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelProperty&gt;</ph> object in turn, consists of data such as the name and type of the property and then a pointer to the value, which in turn, is another <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph>.","pos":[1322,1570],"source":" A <xref:System.Activities.Presentation.Model.ModelProperty> object in turn, consists of data such as the name and type of the property and then a pointer to the value, which in turn, is another <xref:System.Activities.Presentation.Model.ModelItem>."},{"content":"A value converter is used to manipulate some of the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph>s returned from a <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelProperty&gt;</ph> to make them appear correctly in the tree view.","pos":[1571,1799],"source":" A value converter is used to manipulate some of the <xref:System.Activities.Presentation.Model.ModelItem>s returned from a <xref:System.Activities.Presentation.Model.ModelProperty> to make them appear correctly in the tree view."},{"content":"The sample then demonstrates how to imperatively program against the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree using the imperative syntax, as seen in the following example.","pos":[1800,1990],"source":" The sample then demonstrates how to imperatively program against the <xref:System.Activities.Presentation.Model.ModelItem> tree using the imperative syntax, as seen in the following example."},{"pos":[2287,2305],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[2315,2419],"content":"Open the ProgrammingModelItemTree.sln solution in <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","source":"Open the ProgrammingModelItemTree.sln solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"pos":[2429,2504],"content":"Build the solution by selecting <bpt id=\"p1\">**</bpt>Build Solution<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept> menu.","source":"Build the solution by selecting **Build Solution** from the **Build** menu."},{"content":"Press F5 to run the application.","pos":[2514,2546]},{"content":"The <ph id=\"ph1\">[!INCLUDE[avalon2](../../../../includes/avalon2-md.md)]</ph> form is then displayed.","pos":[2547,2630],"source":" The [!INCLUDE[avalon2](../../../../includes/avalon2-md.md)] form is then displayed."},{"pos":[2640,2764],"content":"Click the <bpt id=\"p1\">**</bpt>Load WF<ept id=\"p1\">**</ept> button to load the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> and bind it to the tree view.","source":"Click the **Load WF** button to load the <xref:System.Activities.Presentation.Model.ModelItem> and bind it to the tree view."},{"pos":[2774,2897],"content":"Clicking the <bpt id=\"p1\">**</bpt>Change Model Item Tree<ept id=\"p1\">**</ept> button executes the preceding code to add an item into the tree and set a property.","source":"Clicking the **Change Model Item Tree** button executes the preceding code to add an item into the tree and set a property."},{"pos":[2905,3038],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing.","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3092,3418],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3419,3469]},{"pos":[3564,3572],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}