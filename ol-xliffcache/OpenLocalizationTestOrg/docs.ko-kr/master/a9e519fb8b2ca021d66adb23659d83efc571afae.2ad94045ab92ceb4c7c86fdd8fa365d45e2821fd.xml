{"content":"---\ntitle: \"Null Comparisons\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: ef88af8c-8dfe-4556-8b56-81df960a900b\n---\n# Null Comparisons\nA `null` value in the data source indicates that the value is unknown. In [!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)] queries, you can check for null values so that certain calculations or comparisons are only performed on rows that have valid, or non-null, data. CLR null semantics, however, may differ from the null semantics of the data source. Most databases use a version of three-valued logic to handle null comparisons. That is, a comparison against a null value does not evaluate to `true` or `false`, it evaluates to `unknown`. Often this is an implementation of ANSI nulls, but this is not always the case.  \n  \n By default in SQL Server, the null-equals-null comparison returns a null value. In the following example, the rows where `ShipDate` is null are excluded from the result set, and the [!INCLUDE[tsql](../../../../../../includes/tsql-md.md)] statement would return 0 rows.  \n  \n```  \n-- Find order details and orders with no ship date.  \nSELECT h.SalesOrderID  \nFROM Sales.SalesOrderHeader h  \nJOIN Sales.SalesOrderDetail o ON o.SalesOrderID = h.SalesOrderID  \nWHERE h.ShipDate IS Null  \n```  \n  \n This is very different from the CLR null semantics, where the null-equals-null comparison returns true.  \n  \n The following LINQ query is expressed in the CLR, but it is executed in the data source. Because there is no guarantee that CLR semantics will be honored at the data source, the expected behavior is indeterminate.  \n  \n [!code-csharp[DP L2E Conceptual Examples#JoinOnNull](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#joinonnull)]\n [!code-vb[DP L2E Conceptual Examples#JoinOnNull](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#joinonnull)]  \n  \n## Key Selectors  \n A *key selector* is a function used in the standard query operators to extract a key from an element. In the key selector function, an expression can be compared with a constant. CLR null semantics are exhibited if an expression is compared to a null constant or if two null constants are compared. Store null semantics are exhibited if two columns with null values in the data source are compared. Key selectors are found in many of the grouping and ordering standard query operators, such as <xref:System.Linq.Queryable.GroupBy%2A>, and are used to select keys by which to order or group the query results.  \n  \n## Null Property on a Null Object  \n In the [!INCLUDE[adonet_ef](../../../../../../includes/adonet-ef-md.md)], the properties of a null object are null. When you attempt to reference a property of a null object in the CLR, you will receive a <xref:System.NullReferenceException>. When a LINQ query involves a property of a null object, this can result in inconsistent behavior.  \n  \n For example, in the following query, the cast to `NewProduct` is done in the command tree layer, which might result in the `Introduced` property being null. If the database defined null comparisons such that the <xref:System.DateTime> comparison evaluates to true, the row will be included.  \n  \n [!code-csharp[DP L2E Conceptual Examples#CastResultsIsNull](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DP L2E Conceptual Examples/CS/Program.cs#castresultsisnull)]\n [!code-vb[DP L2E Conceptual Examples#CastResultsIsNull](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DP L2E Conceptual Examples/VB/Module1.vb#castresultsisnull)]  \n  \n## Passing Null Collections to Aggregate Functions  \n In [!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)], when you pass a collection that supports `IQueryable` to an aggregate function, aggregate operations are performed at the database. There might be differences in the results of a query that was performed in-memory and a query that was performed at the database. With an in-memory query, if there are no matches, the query returns zero. At the database, the same query returns `null`. If a `null` value is passed to a LINQ aggregate function, an exception will be thrown. To accept possible `null` values, cast the types and the properties of the types that receive query results to nullable types.  \n  \n## See also\n\n- [Expressions in LINQ to Entities Queries](../../../../../../docs/framework/data/adonet/ef/language-reference/expressions-in-linq-to-entities-queries.md)\n","nodes":[{"pos":[4,134],"embed":true,"restype":"x-metadata","content":"title: \"Null Comparisons\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: ef88af8c-8dfe-4556-8b56-81df960a900b","nodes":[{"content":"Null Comparisons","nodes":[{"pos":[0,16],"content":"Null Comparisons","nodes":[{"content":"Null Comparisons","pos":[0,16]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[141,157],"content":"Null Comparisons","linkify":"Null Comparisons","nodes":[{"content":"Null Comparisons","pos":[0,16]}]},{"content":"A <ph id=\"ph1\">`null`</ph> value in the data source indicates that the value is unknown.","pos":[158,228],"source":"A `null` value in the data source indicates that the value is unknown."},{"content":"In <ph id=\"ph1\">[!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)]</ph> queries, you can check for null values so that certain calculations or comparisons are only performed on rows that have valid, or non-null, data.","pos":[229,451],"source":" In [!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)] queries, you can check for null values so that certain calculations or comparisons are only performed on rows that have valid, or non-null, data."},{"content":"CLR null semantics, however, may differ from the null semantics of the data source.","pos":[452,535]},{"content":"Most databases use a version of three-valued logic to handle null comparisons.","pos":[536,614]},{"content":"That is, a comparison against a null value does not evaluate to <ph id=\"ph1\">`true`</ph> or <ph id=\"ph2\">`false`</ph>, it evaluates to <ph id=\"ph3\">`unknown`</ph>.","pos":[615,724],"source":" That is, a comparison against a null value does not evaluate to `true` or `false`, it evaluates to `unknown`."},{"content":"Often this is an implementation of ANSI nulls, but this is not always the case.","pos":[725,804]},{"content":"By default in SQL Server, the null-equals-null comparison returns a null value.","pos":[811,890]},{"content":"In the following example, the rows where <ph id=\"ph1\">`ShipDate`</ph> is null are excluded from the result set, and the <ph id=\"ph2\">[!INCLUDE[tsql](../../../../../../includes/tsql-md.md)]</ph> statement would return 0 rows.","pos":[891,1079],"source":" In the following example, the rows where `ShipDate` is null are excluded from the result set, and the [!INCLUDE[tsql](../../../../../../includes/tsql-md.md)] statement would return 0 rows."},{"content":"This is very different from the CLR null semantics, where the null-equals-null comparison returns true.","pos":[1305,1408]},{"content":"The following LINQ query is expressed in the CLR, but it is executed in the data source.","pos":[1415,1503]},{"content":"Because there is no guarantee that CLR semantics will be honored at the data source, the expected behavior is indeterminate.","pos":[1504,1628]},{"pos":[1977,1990],"content":"Key Selectors","linkify":"Key Selectors","nodes":[{"content":"Key Selectors","pos":[0,13]}]},{"content":"A <bpt id=\"p1\">*</bpt>key selector<ept id=\"p1\">*</ept> is a function used in the standard query operators to extract a key from an element.","pos":[1994,2095],"source":"A *key selector* is a function used in the standard query operators to extract a key from an element."},{"content":"In the key selector function, an expression can be compared with a constant.","pos":[2096,2172]},{"content":"CLR null semantics are exhibited if an expression is compared to a null constant or if two null constants are compared.","pos":[2173,2292]},{"content":"Store null semantics are exhibited if two columns with null values in the data source are compared.","pos":[2293,2392]},{"content":"Key selectors are found in many of the grouping and ordering standard query operators, such as <ph id=\"ph1\">&lt;xref:System.Linq.Queryable.GroupBy%2A&gt;</ph>, and are used to select keys by which to order or group the query results.","pos":[2393,2602],"source":" Key selectors are found in many of the grouping and ordering standard query operators, such as <xref:System.Linq.Queryable.GroupBy%2A>, and are used to select keys by which to order or group the query results."},{"pos":[2611,2641],"content":"Null Property on a Null Object","linkify":"Null Property on a Null Object","nodes":[{"content":"Null Property on a Null Object","pos":[0,30]}]},{"content":"In the <ph id=\"ph1\">[!INCLUDE[adonet_ef](../../../../../../includes/adonet-ef-md.md)]</ph>, the properties of a null object are null.","pos":[2645,2760],"source":"In the [!INCLUDE[adonet_ef](../../../../../../includes/adonet-ef-md.md)], the properties of a null object are null."},{"content":"When you attempt to reference a property of a null object in the CLR, you will receive a <ph id=\"ph1\">&lt;xref:System.NullReferenceException&gt;</ph>.","pos":[2761,2887],"source":" When you attempt to reference a property of a null object in the CLR, you will receive a <xref:System.NullReferenceException>."},{"content":"When a LINQ query involves a property of a null object, this can result in inconsistent behavior.","pos":[2888,2985]},{"content":"For example, in the following query, the cast to <ph id=\"ph1\">`NewProduct`</ph> is done in the command tree layer, which might result in the <ph id=\"ph2\">`Introduced`</ph> property being null.","pos":[2992,3148],"source":"For example, in the following query, the cast to `NewProduct` is done in the command tree layer, which might result in the `Introduced` property being null."},{"content":"If the database defined null comparisons such that the <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> comparison evaluates to true, the row will be included.","pos":[3149,3282],"source":" If the database defined null comparisons such that the <xref:System.DateTime> comparison evaluates to true, the row will be included."},{"pos":[3659,3706],"content":"Passing Null Collections to Aggregate Functions","linkify":"Passing Null Collections to Aggregate Functions","nodes":[{"content":"Passing Null Collections to Aggregate Functions","pos":[0,47]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)]</ph>, when you pass a collection that supports <ph id=\"ph2\">`IQueryable`</ph> to an aggregate function, aggregate operations are performed at the database.","pos":[3710,3919],"source":"In [!INCLUDE[linq_entities](../../../../../../includes/linq-entities-md.md)], when you pass a collection that supports `IQueryable` to an aggregate function, aggregate operations are performed at the database."},{"content":"There might be differences in the results of a query that was performed in-memory and a query that was performed at the database.","pos":[3920,4049]},{"content":"With an in-memory query, if there are no matches, the query returns zero.","pos":[4050,4123]},{"content":"At the database, the same query returns <ph id=\"ph1\">`null`</ph>.","pos":[4124,4171],"source":" At the database, the same query returns `null`."},{"content":"If a <ph id=\"ph1\">`null`</ph> value is passed to a LINQ aggregate function, an exception will be thrown.","pos":[4172,4258],"source":" If a `null` value is passed to a LINQ aggregate function, an exception will be thrown."},{"content":"To accept possible <ph id=\"ph1\">`null`</ph> values, cast the types and the properties of the types that receive query results to nullable types.","pos":[4259,4385],"source":" To accept possible `null` values, cast the types and the properties of the types that receive query results to nullable types."},{"pos":[4394,4402],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4406,4558],"content":"<bpt id=\"p1\">[</bpt>Expressions in LINQ to Entities Queries<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/ef/language-reference/expressions-in-linq-to-entities-queries.md)</ept>","source":"[Expressions in LINQ to Entities Queries](../../../../../../docs/framework/data/adonet/ef/language-reference/expressions-in-linq-to-entities-queries.md)"}]}