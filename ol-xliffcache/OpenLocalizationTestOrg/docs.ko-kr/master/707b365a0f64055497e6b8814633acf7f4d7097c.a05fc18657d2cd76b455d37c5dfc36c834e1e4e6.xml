{"content":"---\ntitle: \"Configuring and Extending the Runtime with Behaviors\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"attaching extensions using behaviors [WCF]\"\nms.assetid: 149b99b6-6eb6-4f45-be22-c967279677d9\n---\n# Configuring and Extending the Runtime with Behaviors\nBehaviors enable you to modify default behavior and add custom extensions that inspect and validate service configuration or modify runtime behavior in Windows Communication Foundation (WCF) client and service applications. This topic describes the behavior interfaces, how to implement them, and how to add them to the service description (in a service application) or endpoint (in a client application) programmatically or in a configuration file. For more information about using system-provided behaviors, see [Specifying Service Run-Time Behavior](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md) and [Specifying Client Run-Time Behavior](../../../../docs/framework/wcf/specifying-client-run-time-behavior.md).  \n  \n## Behaviors  \n Behavior types are added to the service or service endpoint description objects (on the service or client, respectively) before those objects are used by Windows Communication Foundation (WCF) to create a runtime that executes a WCF service or a WCF client. When these behaviors are called during the runtime construction process they are then able to access runtime properties and methods that modify the runtime constructed by the contract, bindings, and addresses.  \n  \n### Behavior Methods  \n All behaviors have an `AddBindingParameters` method, an `ApplyDispatchBehavior` method, a `Validate` method, and an `ApplyClientBehavior` method with one exception: Because <xref:System.ServiceModel.Description.IServiceBehavior> cannot execute in a client, it does not implement `ApplyClientBehavior`.  \n  \n-   Use the `AddBindingParameters` method to modify or add custom objects to a collection that custom bindings can access for their use when the runtime is constructed. For example, this how protection requirements are specified that affect the way the channel is built, but are not known by the channel developer.  \n  \n-   Use the `Validate` method to examine the description tree and corresponding runtime object to ensure it conforms to some set of criteria.  \n  \n-   Use the `ApplyDispatchBehavior` and `ApplyClientBehavior` methods to examine the description tree and modify the runtime for a particular scope on either the service or the client. You can also insert extension objects as well.  \n  \n    > [!NOTE]\n    >  Although a description tree is provided in these methods, it is for examination only. If a description tree is modified, the behavior is undefined.  \n  \n The properties you can modify and the customization interfaces you can implement are accessed through the service and client runtime classes. The service types are the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> and  <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes. The client types are the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.ClientOperation> classes. The <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime> classes are the extensibility entry points to access client-wide and service-wide runtime properties and extension collections, respectively. Similarly, the <xref:System.ServiceModel.Dispatcher.ClientOperation> and  <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes expose client operation and service operation runtime properties and extension collections, respectively. You can, however, access the wider scoped runtime object from the operation runtime object and vice versa if need be.  \n  \n> [!NOTE]\n>  For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a client, see [Extending Clients](../../../../docs/framework/wcf/extending/extending-clients.md). For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a service dispatcher, see [Extending Dispatchers](../../../../docs/framework/wcf/extending/extending-dispatchers.md).  \n  \n Most WCF users do not interact with the runtime directly; instead they use core programming model constructs like endpoints, contracts, bindings, addresses, and behavior attributes on classes or behaviors in configuration files. These constructs make up the *description tree*, which is the complete specification for constructing a runtime to support a service or client described by the description tree.  \n  \n There are four kinds of behaviors in WCF:  \n  \n-   Service behaviors (<xref:System.ServiceModel.Description.IServiceBehavior> types) enable the customization of the entire service runtime including <xref:System.ServiceModel.ServiceHostBase>.  \n  \n-   Endpoint behaviors (<xref:System.ServiceModel.Description.IEndpointBehavior> types) enable the customization of service endpoints and their associated <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objects.  \n  \n-   Contract behaviors (<xref:System.ServiceModel.Description.IContractBehavior> types) enable the customization of both the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime> classes in client and service applications, respectively.  \n  \n-   Operation behaviors (<xref:System.ServiceModel.Description.IOperationBehavior> types) enable the customization of the <xref:System.ServiceModel.Dispatcher.ClientOperation> and <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes, again, on the client and service.  \n  \n You can add these behaviors to the various description objects by implementing custom attributes, using application configuration files, or directly by adding them to the behaviors collection on the appropriate description object. The must, however, be added to a service description or service endpoint description object prior to calling <xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory%601>.  \n  \n### Behavior Scopes  \n There are four behavior types, each of which corresponds to a particular scope of runtime access.  \n  \n#### Service Behaviors  \n Service behaviors, which implement <xref:System.ServiceModel.Description.IServiceBehavior>, are the primary mechanism by which you modify the entire service runtime. There are three mechanisms for adding service behaviors to a service.  \n  \n1.  Using an attribute on the service class.  When a <xref:System.ServiceModel.ServiceHost> is constructed, the <xref:System.ServiceModel.ServiceHost> implementation uses reflection to discover the set of attributes on the type of the service. If any of those attributes are implementations of <xref:System.ServiceModel.Description.IServiceBehavior>, they are added to the behaviors collection on <xref:System.ServiceModel.Description.ServiceDescription>. This allows those behaviors to participate in the construction of the service run time.  \n  \n2.  Programmatically adding the behavior to the behaviors collection on <xref:System.ServiceModel.Description.ServiceDescription>. This can be accomplished with the following lines of code:  \n  \n    ```csharp\n    ServiceHost host = new ServiceHost(/* Parameters */);  \n    host.Description.Behaviors.Add(/* Service Behavior */);  \n    ```  \n  \n3.  Implementing a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> that extends configuration. This enables the use of the service behavior from application configuration files.  \n  \n Examples of service behaviors in WCF include the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute, the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior>, and the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> behavior.  \n  \n#### Contract Behaviors  \n Contract behaviors, which implement the <xref:System.ServiceModel.Description.IContractBehavior> interface, are used to extend both the client and service runtime across a contract.  \n  \n There are two mechanisms for adding contract behaviors to a contract.  The first mechanism is to create a custom attribute to be used on the contract interface. When a contract interface is passed to either a <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory%601>, WCF examines the attributes on the interface. If any attributes are implementations of <xref:System.ServiceModel.Description.IContractBehavior>, those are added to the behaviors collection on the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> created for that interface.  \n  \n You can also implement the <xref:System.ServiceModel.Description.IContractBehaviorAttribute?displayProperty=nameWithType> on the custom contract behavior attribute. In this case, the behavior is as follows when applied to:  \n  \n •A contract interface. In this case, the behavior is applied to all contracts of that type in any endpoint and WCF ignores the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A?displayProperty=nameWithType> property.  \n  \n •A service class. In this case, the behavior is applied only to endpoints the contract of which is the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> property.  \n  \n •A callback class. In this case, the behavior is applied to the duplex client's endpoint and WCF ignores the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> property.  \n  \n The second mechanism is to add the behavior to the behaviors collection on a <xref:System.ServiceModel.Description.ContractDescription>.  \n  \n Examples of contract behaviors in WCF include the <xref:System.ServiceModel.DeliveryRequirementsAttribute?displayProperty=nameWithType> attribute. For more information and an example, see the reference topic.  \n  \n#### Endpoint Behaviors  \n Endpoint behaviors, which implement <xref:System.ServiceModel.Description.IEndpointBehavior>, are the primary mechanism by which you modify the entire service or client run time for a specific endpoint.  \n  \n There are two mechanisms for adding endpoint behaviors to a service.  \n  \n1.  Add the behavior to the <xref:System.ServiceModel.Description.ServiceEndpoint.Behaviors%2A> property.  \n  \n2.  Implement a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> that extends configuration.  \n  \n For more information and an example, see the reference topic.  \n  \n#### Operation Behaviors  \n Operation behaviors, which implement the <xref:System.ServiceModel.Description.IOperationBehavior> interface, are used to extend both the client and service runtime for each operation.  \n  \n There are two mechanisms for adding operation behaviors to an operation. The first mechanism is to create a custom attribute to be used on the method that models the operation. When an operation is added to either a <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory>, WCF adds any  <xref:System.ServiceModel.Description.IOperationBehavior> attributes to the behaviors collection on the <xref:System.ServiceModel.Description.OperationDescription> created for that operation.  \n  \n The second mechanism is by directly adding the behavior to the behaviors collection on a constructed <xref:System.ServiceModel.Description.OperationDescription>.  \n  \n Examples of operation behaviors in WCF include the <xref:System.ServiceModel.OperationBehaviorAttribute> and the <xref:System.ServiceModel.TransactionFlowAttribute>.  \n  \n For more information and an example, see the reference topic.  \n  \n### Using Configuration to Create Behaviors  \n Service and endpoint, and contract behaviors can by designed to be specified in code or using attributes; only service and endpoint behaviors can be configured using application or Web configuration files. Exposing behaviors using attributes allows developers to specify a behavior at compilation-time that cannot be added, removed, or modified at runtime. This is often suitable for behaviors that are always required for the correct operation of a service (for example, the transaction-related parameters to the <xref:System.ServiceModel.ServiceBehaviorAttribute?displayProperty=nameWithType> attribute). Exposing behaviors using configuration allows developers to leave the specification and configuration of those behaviors to those who deploy the service. This is suitable for behaviors that are optional components or other deployment-specific configuration, such as whether metadata is exposed for the service or the particular authorization configuration for a service.  \n  \n> [!NOTE]\n>  You can also use behaviors that support configuration to enforce company application policies by inserting them into the machine.config configuration file and locking those items down. For a description and an example, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).  \n  \n To expose a behavior using configuration, a developer must create a derived class of <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> and then register that extension with configuration.  \n  \n The following code example shows how an  <xref:System.ServiceModel.Description.IEndpointBehavior> implements <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>:  \n  \n```csharp\n// BehaviorExtensionElement members  \npublic override Type BehaviorType  \n{  \n  get { return typeof(EndpointBehaviorMessageInspector); }  \n}  \n  \nprotected override object CreateBehavior()  \n{  \n  return new EndpointBehaviorMessageInspector();  \n}  \n```  \n  \n In order for the configuration system to load a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, it must be registered as an extension. The following code example shows the configuration file for the preceding endpoint behavior:  \n  \n```xml  \n<configuration>  \n  <system.serviceModel>  \n    <services>  \n      <service   \n        name=\"Microsoft.WCF.Documentation.SampleService\"  \n        behaviorConfiguration=\"metadataSupport\"  \n      >  \n        <host>  \n          <baseAddresses>  \n            <add baseAddress=\"http://localhost:8080/ServiceMetadata\" />  \n          </baseAddresses>  \n        </host>  \n        <endpoint  \n          address=\"/SampleService\"  \n          binding=\"wsHttpBinding\"  \n          behaviorConfiguration=\"withMessageInspector\"   \n          contract=\"Microsoft.WCF.Documentation.ISampleService\"  \n        />  \n        <endpoint  \n           address=\"mex\"  \n           binding=\"mexHttpBinding\"  \n           contract=\"IMetadataExchange\"  \n        />  \n      </service>  \n    </services>  \n    <behaviors>  \n      <serviceBehaviors>  \n      <behavior name=\"metadataSupport\">  \n        <serviceMetadata httpGetEnabled=\"true\" httpGetUrl=\"\"/>  \n      </behavior>  \n      </serviceBehaviors>  \n      <endpointBehaviors>  \n        <behavior name=\"withMessageInspector\">  \n          <endpointMessageInspector />  \n        </behavior>  \n      </endpointBehaviors>  \n    </behaviors>  \n    <extensions>  \n      <behaviorExtensions>  \n        <add   \n          name=\"endpointMessageInspector\"  \n          type=\"Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector, HostApplication, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null\"  \n        />  \n      </behaviorExtensions>  \n    </extensions>  \n  </system.serviceModel>  \n</configuration>  \n```  \n  \n Where `Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector` is the behavior extension type and `HostApplication` is the name of the assembly into which that class has been compiled.  \n  \n### Evaluation Order  \n The <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType> and the <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> are responsible for building the runtime from the programming model and description. Behaviors, as previously described, contribute to that build process at the service, endpoint, contract, and operation.  \n  \n The <xref:System.ServiceModel.ServiceHost> applies behaviors in the following order:  \n  \n1.  Service  \n  \n2.  Contract  \n  \n3.  Endpoint  \n  \n4.  Operation  \n  \n Within any collection of behaviors, no order is guaranteed.  \n  \n The <xref:System.ServiceModel.ChannelFactory%601> applies behaviors in the following order:  \n  \n1.  Contract  \n  \n2.  Endpoint  \n  \n3.  Operation  \n  \n Within any collection of behaviors, again, no order is guaranteed.  \n  \n### Adding Behaviors Programmatically  \n Properties of the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> in the service application must not be modified subsequent to the <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType> method on <xref:System.ServiceModel.ServiceHostBase?displayProperty=nameWithType>. Some members, like the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A?displayProperty=nameWithType> property and the `AddServiceEndpoint` methods on <xref:System.ServiceModel.ServiceHostBase> and <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType>, throw an exception if modified past that point. Others permit you to modify them, but the result is undefined.  \n  \n Similarly, on the client the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> values must not be modified after the call to <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A> on the <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType>. The <xref:System.ServiceModel.ChannelFactory.Credentials%2A?displayProperty=nameWithType> property throws an exception if modified past that point, but the other client description values can be modified without error. The result, however, is undefined.  \n  \n Whether for the service or client, it is recommended that you modify the description prior to calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType>.  \n  \n### Inheritance Rules for Behavior Attributes  \n All four types of behaviors can be populated using attributes – service behaviors and contract behaviors. Because attributes are defined on managed objects and members, and managed objects and members support inheritance, it is necessary to define how behavior attributes work in the context of inheritance.  \n  \n At a high level, the rule is that for a particular scope (for example, service, contract, or operation), all behavior attributes in the inheritance hierarchy for that scope are applied. If there are two behavior attributes of the same type, only the most-derived type is used.  \n  \n#### Service Behaviors  \n For a given service class, all service behavior attributes on that class, and on parents of that class, are applied. If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.  \n  \n```csharp  \n[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]  \n[AspNetCompatibilityRequirementsAttribute(  \n    AspNetCompatibilityRequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]  \npublic class A { /* … */ }  \n  \n[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]  \npublic class B : A { /* … */}  \n```  \n  \n For example, in the preceding case, the service B ends up with an <xref:System.ServiceModel.InstanceContextMode> of <xref:System.ServiceModel.InstanceContextMode.Single>, an <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode> mode of <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>, and a <xref:System.ServiceModel.ConcurrencyMode> of <xref:System.ServiceModel.ConcurrencyMode.Single>. The <xref:System.ServiceModel.ConcurrencyMode> is <xref:System.ServiceModel.ConcurrencyMode.Single>, because <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute on service B is on \"more derived\" than that on service A.  \n  \n#### Contract Behaviors  \n For a given contract, all contract behavior attributes on that interface and on parents of that interface, are applied. If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.  \n  \n#### Operation Behaviors  \n If a given operation does not override an existing abstract or virtual operation, no inheritance rules apply.  \n  \n If an operation does override an existing operation, then all operation behavior attributes on that operation and on parents of that operation, are applied.  If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.\n","nodes":[{"pos":[4,207],"embed":true,"restype":"x-metadata","content":"title: \"Configuring and Extending the Runtime with Behaviors\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"attaching extensions using behaviors [WCF]\"\nms.assetid: 149b99b6-6eb6-4f45-be22-c967279677d9","nodes":[{"content":"Configuring and Extending the Runtime with Behaviors","nodes":[{"pos":[0,52],"content":"Configuring and Extending the Runtime with Behaviors","nodes":[{"content":"Configuring and Extending the Runtime with Behaviors","pos":[0,52]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[214,266],"content":"Configuring and Extending the Runtime with Behaviors","linkify":"Configuring and Extending the Runtime with Behaviors","nodes":[{"content":"Configuring and Extending the Runtime with Behaviors","pos":[0,52]}]},{"content":"Behaviors enable you to modify default behavior and add custom extensions that inspect and validate service configuration or modify runtime behavior in Windows Communication Foundation (WCF) client and service applications.","pos":[267,490]},{"content":"This topic describes the behavior interfaces, how to implement them, and how to add them to the service description (in a service application) or endpoint (in a client application) programmatically or in a configuration file.","pos":[491,716]},{"content":"For more information about using system-provided behaviors, see <bpt id=\"p1\">[</bpt>Specifying Service Run-Time Behavior<ept id=\"p1\">](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md)</ept> and <bpt id=\"p2\">[</bpt>Specifying Client Run-Time Behavior<ept id=\"p2\">](../../../../docs/framework/wcf/specifying-client-run-time-behavior.md)</ept>.","pos":[717,1005],"source":" For more information about using system-provided behaviors, see [Specifying Service Run-Time Behavior](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md) and [Specifying Client Run-Time Behavior](../../../../docs/framework/wcf/specifying-client-run-time-behavior.md)."},{"pos":[1014,1023],"content":"Behaviors","linkify":"Behaviors","nodes":[{"content":"Behaviors","pos":[0,9]}]},{"content":"Behavior types are added to the service or service endpoint description objects (on the service or client, respectively) before those objects are used by Windows Communication Foundation (WCF) to create a runtime that executes a WCF service or a WCF client.","pos":[1027,1284]},{"content":"When these behaviors are called during the runtime construction process they are then able to access runtime properties and methods that modify the runtime constructed by the contract, bindings, and addresses.","pos":[1285,1494]},{"pos":[1504,1520],"content":"Behavior Methods","linkify":"Behavior Methods","nodes":[{"content":"Behavior Methods","pos":[0,16]}]},{"pos":[1524,1825],"content":"All behaviors have an <ph id=\"ph1\">`AddBindingParameters`</ph> method, an <ph id=\"ph2\">`ApplyDispatchBehavior`</ph> method, a <ph id=\"ph3\">`Validate`</ph> method, and an <ph id=\"ph4\">`ApplyClientBehavior`</ph> method with one exception: Because <ph id=\"ph5\">&lt;xref:System.ServiceModel.Description.IServiceBehavior&gt;</ph> cannot execute in a client, it does not implement <ph id=\"ph6\">`ApplyClientBehavior`</ph>.","source":"All behaviors have an `AddBindingParameters` method, an `ApplyDispatchBehavior` method, a `Validate` method, and an `ApplyClientBehavior` method with one exception: Because <xref:System.ServiceModel.Description.IServiceBehavior> cannot execute in a client, it does not implement `ApplyClientBehavior`."},{"content":"Use the <ph id=\"ph1\">`AddBindingParameters`</ph> method to modify or add custom objects to a collection that custom bindings can access for their use when the runtime is constructed.","pos":[1835,1999],"source":"Use the `AddBindingParameters` method to modify or add custom objects to a collection that custom bindings can access for their use when the runtime is constructed."},{"content":"For example, this how protection requirements are specified that affect the way the channel is built, but are not known by the channel developer.","pos":[2000,2145]},{"pos":[2155,2292],"content":"Use the <ph id=\"ph1\">`Validate`</ph> method to examine the description tree and corresponding runtime object to ensure it conforms to some set of criteria.","source":"Use the `Validate` method to examine the description tree and corresponding runtime object to ensure it conforms to some set of criteria."},{"content":"Use the <ph id=\"ph1\">`ApplyDispatchBehavior`</ph> and <ph id=\"ph2\">`ApplyClientBehavior`</ph> methods to examine the description tree and modify the runtime for a particular scope on either the service or the client.","pos":[2302,2482],"source":"Use the `ApplyDispatchBehavior` and `ApplyClientBehavior` methods to examine the description tree and modify the runtime for a particular scope on either the service or the client."},{"content":"You can also insert extension objects as well.","pos":[2483,2529]},{"pos":[2541,2703],"content":"[!NOTE]\nAlthough a description tree is provided in these methods, it is for examination only. If a description tree is modified, the behavior is undefined.","leadings":["","    >  "],"nodes":[{"content":"Although a description tree is provided in these methods, it is for examination only. If a description tree is modified, the behavior is undefined.","pos":[8,155],"nodes":[{"content":"Although a description tree is provided in these methods, it is for examination only.","pos":[0,85]},{"content":"If a description tree is modified, the behavior is undefined.","pos":[86,147]}]}]},{"content":"The properties you can modify and the customization interfaces you can implement are accessed through the service and client runtime classes.","pos":[2710,2851]},{"content":"The service types are the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.DispatchRuntime&gt;</ph> and  <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.DispatchOperation&gt;</ph> classes.","pos":[2852,3001],"source":" The service types are the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> and  <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes."},{"content":"The client types are the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.ClientRuntime&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.ClientOperation&gt;</ph> classes.","pos":[3002,3145],"source":" The client types are the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.ClientOperation> classes."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.ClientRuntime&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.DispatchRuntime&gt;</ph> classes are the extensibility entry points to access client-wide and service-wide runtime properties and extension collections, respectively.","pos":[3146,3401],"source":" The <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime> classes are the extensibility entry points to access client-wide and service-wide runtime properties and extension collections, respectively."},{"content":"Similarly, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.ClientOperation&gt;</ph> and  <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.DispatchOperation&gt;</ph> classes expose client operation and service operation runtime properties and extension collections, respectively.","pos":[3402,3645],"source":" Similarly, the <xref:System.ServiceModel.Dispatcher.ClientOperation> and  <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes expose client operation and service operation runtime properties and extension collections, respectively."},{"content":"You can, however, access the wider scoped runtime object from the operation runtime object and vice versa if need be.","pos":[3646,3763]},{"pos":[3771,4221],"content":"[!NOTE]\n For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a client, see [Extending Clients](../../../../docs/framework/wcf/extending/extending-clients.md). For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a service dispatcher, see [Extending Dispatchers](../../../../docs/framework/wcf/extending/extending-dispatchers.md).","leadings":["","> "],"nodes":[{"content":"For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a client, see [Extending Clients](../../../../docs/framework/wcf/extending/extending-clients.md). For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a service dispatcher, see [Extending Dispatchers](../../../../docs/framework/wcf/extending/extending-dispatchers.md).","pos":[9,448],"nodes":[{"content":"For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a client, see <bpt id=\"p1\">[</bpt>Extending Clients<ept id=\"p1\">](../../../../docs/framework/wcf/extending/extending-clients.md)</ept>.","pos":[0,209],"source":"For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a client, see [Extending Clients](../../../../docs/framework/wcf/extending/extending-clients.md)."},{"content":"For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a service dispatcher, see <bpt id=\"p1\">[</bpt>Extending Dispatchers<ept id=\"p1\">](../../../../docs/framework/wcf/extending/extending-dispatchers.md)</ept>.","pos":[210,439],"source":" For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a service dispatcher, see [Extending Dispatchers](../../../../docs/framework/wcf/extending/extending-dispatchers.md)."}]}]},{"content":"Most WCF users do not interact with the runtime directly; instead they use core programming model constructs like endpoints, contracts, bindings, addresses, and behavior attributes on classes or behaviors in configuration files.","pos":[4228,4456]},{"content":"These constructs make up the <bpt id=\"p1\">*</bpt>description tree<ept id=\"p1\">*</ept>, which is the complete specification for constructing a runtime to support a service or client described by the description tree.","pos":[4457,4634],"source":" These constructs make up the *description tree*, which is the complete specification for constructing a runtime to support a service or client described by the description tree."},{"content":"There are four kinds of behaviors in WCF:","pos":[4641,4682]},{"pos":[4692,4882],"content":"Service behaviors (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IServiceBehavior&gt;</ph> types) enable the customization of the entire service runtime including <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHostBase&gt;</ph>.","source":"Service behaviors (<xref:System.ServiceModel.Description.IServiceBehavior> types) enable the customization of the entire service runtime including <xref:System.ServiceModel.ServiceHostBase>."},{"pos":[4892,5108],"content":"Endpoint behaviors (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IEndpointBehavior&gt;</ph> types) enable the customization of service endpoints and their associated <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.EndpointDispatcher&gt;</ph> objects.","source":"Endpoint behaviors (<xref:System.ServiceModel.Description.IEndpointBehavior> types) enable the customization of service endpoints and their associated <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objects."},{"pos":[5118,5406],"content":"Contract behaviors (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehavior&gt;</ph> types) enable the customization of both the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.ClientRuntime&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.ServiceModel.Dispatcher.DispatchRuntime&gt;</ph> classes in client and service applications, respectively.","source":"Contract behaviors (<xref:System.ServiceModel.Description.IContractBehavior> types) enable the customization of both the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime> classes in client and service applications, respectively."},{"pos":[5416,5690],"content":"Operation behaviors (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IOperationBehavior&gt;</ph> types) enable the customization of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.ClientOperation&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.ServiceModel.Dispatcher.DispatchOperation&gt;</ph> classes, again, on the client and service.","source":"Operation behaviors (<xref:System.ServiceModel.Description.IOperationBehavior> types) enable the customization of the <xref:System.ServiceModel.Dispatcher.ClientOperation> and <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes, again, on the client and service."},{"content":"You can add these behaviors to the various description objects by implementing custom attributes, using application configuration files, or directly by adding them to the behaviors collection on the appropriate description object.","pos":[5697,5927]},{"content":"The must, however, be added to a service description or service endpoint description object prior to calling <ph id=\"ph1\">&lt;xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType&gt;</ph> on the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> or a <ph id=\"ph3\">&lt;xref:System.ServiceModel.ChannelFactory%601&gt;</ph>.","pos":[5928,6219],"source":" The must, however, be added to a service description or service endpoint description object prior to calling <xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory%601>."},{"pos":[6229,6244],"content":"Behavior Scopes","linkify":"Behavior Scopes","nodes":[{"content":"Behavior Scopes","pos":[0,15]}]},{"content":"There are four behavior types, each of which corresponds to a particular scope of runtime access.","pos":[6248,6345]},{"pos":[6356,6373],"content":"Service Behaviors","linkify":"Service Behaviors","nodes":[{"content":"Service Behaviors","pos":[0,17]}]},{"content":"Service behaviors, which implement <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IServiceBehavior&gt;</ph>, are the primary mechanism by which you modify the entire service runtime.","pos":[6377,6542],"source":"Service behaviors, which implement <xref:System.ServiceModel.Description.IServiceBehavior>, are the primary mechanism by which you modify the entire service runtime."},{"content":"There are three mechanisms for adding service behaviors to a service.","pos":[6543,6612]},{"content":"Using an attribute on the service class.","pos":[6622,6662]},{"content":"When a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> is constructed, the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> implementation uses reflection to discover the set of attributes on the type of the service.","pos":[6664,6861],"source":"  When a <xref:System.ServiceModel.ServiceHost> is constructed, the <xref:System.ServiceModel.ServiceHost> implementation uses reflection to discover the set of attributes on the type of the service."},{"content":"If any of those attributes are implementations of <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IServiceBehavior&gt;</ph>, they are added to the behaviors collection on <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceDescription&gt;</ph>.","pos":[6862,7073],"source":" If any of those attributes are implementations of <xref:System.ServiceModel.Description.IServiceBehavior>, they are added to the behaviors collection on <xref:System.ServiceModel.Description.ServiceDescription>."},{"content":"This allows those behaviors to participate in the construction of the service run time.","pos":[7074,7161]},{"content":"Programmatically adding the behavior to the behaviors collection on <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceDescription&gt;</ph>.","pos":[7171,7297],"source":"Programmatically adding the behavior to the behaviors collection on <xref:System.ServiceModel.Description.ServiceDescription>."},{"content":"This can be accomplished with the following lines of code:","pos":[7298,7356]},{"content":"Implementing a custom <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.BehaviorExtensionElement&gt;</ph> that extends configuration.","pos":[7515,7630],"source":"Implementing a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> that extends configuration."},{"content":"This enables the use of the service behavior from application configuration files.","pos":[7631,7713]},{"pos":[7720,7982],"content":"Examples of service behaviors in WCF include the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute, the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceThrottlingBehavior&gt;</ph>, and the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> behavior.","source":"Examples of service behaviors in WCF include the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute, the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior>, and the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> behavior."},{"pos":[7993,8011],"content":"Contract Behaviors","linkify":"Contract Behaviors","nodes":[{"content":"Contract Behaviors","pos":[0,18]}]},{"pos":[8015,8196],"content":"Contract behaviors, which implement the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehavior&gt;</ph> interface, are used to extend both the client and service runtime across a contract.","source":"Contract behaviors, which implement the <xref:System.ServiceModel.Description.IContractBehavior> interface, are used to extend both the client and service runtime across a contract."},{"content":"There are two mechanisms for adding contract behaviors to a contract.","pos":[8203,8272]},{"content":"The first mechanism is to create a custom attribute to be used on the contract interface.","pos":[8274,8363]},{"content":"When a contract interface is passed to either a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> or a <ph id=\"ph2\">&lt;xref:System.ServiceModel.ChannelFactory%601&gt;</ph>, WCF examines the attributes on the interface.","pos":[8364,8548],"source":" When a contract interface is passed to either a <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory%601>, WCF examines the attributes on the interface."},{"content":"If any attributes are implementations of <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehavior&gt;</ph>, those are added to the behaviors collection on the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType&gt;</ph> created for that interface.","pos":[8549,8814],"source":" If any attributes are implementations of <xref:System.ServiceModel.Description.IContractBehavior>, those are added to the behaviors collection on the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> created for that interface."},{"content":"You can also implement the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehaviorAttribute?displayProperty=nameWithType&gt;</ph> on the custom contract behavior attribute.","pos":[8821,8985],"source":"You can also implement the <xref:System.ServiceModel.Description.IContractBehaviorAttribute?displayProperty=nameWithType> on the custom contract behavior attribute."},{"content":"In this case, the behavior is as follows when applied to:","pos":[8986,9043]},{"content":"•A contract interface.","pos":[9050,9072]},{"content":"In this case, the behavior is applied to all contracts of that type in any endpoint and WCF ignores the value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[9073,9312],"source":" In this case, the behavior is applied to all contracts of that type in any endpoint and WCF ignores the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A?displayProperty=nameWithType> property."},{"content":"•A service class.","pos":[9319,9336]},{"content":"In this case, the behavior is applied only to endpoints the contract of which is the value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A&gt;</ph> property.","pos":[9337,9528],"source":" In this case, the behavior is applied only to endpoints the contract of which is the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> property."},{"content":"•A callback class.","pos":[9535,9553]},{"content":"In this case, the behavior is applied to the duplex client's endpoint and WCF ignores the value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A&gt;</ph> property.","pos":[9554,9750],"source":" In this case, the behavior is applied to the duplex client's endpoint and WCF ignores the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> property."},{"pos":[9757,9893],"content":"The second mechanism is to add the behavior to the behaviors collection on a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ContractDescription&gt;</ph>.","source":"The second mechanism is to add the behavior to the behaviors collection on a <xref:System.ServiceModel.Description.ContractDescription>."},{"content":"Examples of contract behaviors in WCF include the <ph id=\"ph1\">&lt;xref:System.ServiceModel.DeliveryRequirementsAttribute?displayProperty=nameWithType&gt;</ph> attribute.","pos":[9900,10046],"source":"Examples of contract behaviors in WCF include the <xref:System.ServiceModel.DeliveryRequirementsAttribute?displayProperty=nameWithType> attribute."},{"content":"For more information and an example, see the reference topic.","pos":[10047,10108]},{"pos":[10119,10137],"content":"Endpoint Behaviors","linkify":"Endpoint Behaviors","nodes":[{"content":"Endpoint Behaviors","pos":[0,18]}]},{"pos":[10141,10343],"content":"Endpoint behaviors, which implement <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IEndpointBehavior&gt;</ph>, are the primary mechanism by which you modify the entire service or client run time for a specific endpoint.","source":"Endpoint behaviors, which implement <xref:System.ServiceModel.Description.IEndpointBehavior>, are the primary mechanism by which you modify the entire service or client run time for a specific endpoint."},{"content":"There are two mechanisms for adding endpoint behaviors to a service.","pos":[10350,10418]},{"pos":[10428,10529],"content":"Add the behavior to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceEndpoint.Behaviors%2A&gt;</ph> property.","source":"Add the behavior to the <xref:System.ServiceModel.Description.ServiceEndpoint.Behaviors%2A> property."},{"pos":[10539,10651],"content":"Implement a custom <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.BehaviorExtensionElement&gt;</ph> that extends configuration.","source":"Implement a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> that extends configuration."},{"content":"For more information and an example, see the reference topic.","pos":[10658,10719]},{"pos":[10730,10749],"content":"Operation Behaviors","linkify":"Operation Behaviors","nodes":[{"content":"Operation Behaviors","pos":[0,19]}]},{"pos":[10753,10937],"content":"Operation behaviors, which implement the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IOperationBehavior&gt;</ph> interface, are used to extend both the client and service runtime for each operation.","source":"Operation behaviors, which implement the <xref:System.ServiceModel.Description.IOperationBehavior> interface, are used to extend both the client and service runtime for each operation."},{"content":"There are two mechanisms for adding operation behaviors to an operation.","pos":[10944,11016]},{"content":"The first mechanism is to create a custom attribute to be used on the method that models the operation.","pos":[11017,11120]},{"content":"When an operation is added to either a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> or a <ph id=\"ph2\">&lt;xref:System.ServiceModel.ChannelFactory&gt;</ph>, WCF adds any  <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.IOperationBehavior&gt;</ph> attributes to the behaviors collection on the <ph id=\"ph4\">&lt;xref:System.ServiceModel.Description.OperationDescription&gt;</ph> created for that operation.","pos":[11121,11452],"source":" When an operation is added to either a <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory>, WCF adds any  <xref:System.ServiceModel.Description.IOperationBehavior> attributes to the behaviors collection on the <xref:System.ServiceModel.Description.OperationDescription> created for that operation."},{"pos":[11459,11620],"content":"The second mechanism is by directly adding the behavior to the behaviors collection on a constructed <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.OperationDescription&gt;</ph>.","source":"The second mechanism is by directly adding the behavior to the behaviors collection on a constructed <xref:System.ServiceModel.Description.OperationDescription>."},{"pos":[11627,11792],"content":"Examples of operation behaviors in WCF include the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.ServiceModel.TransactionFlowAttribute&gt;</ph>.","source":"Examples of operation behaviors in WCF include the <xref:System.ServiceModel.OperationBehaviorAttribute> and the <xref:System.ServiceModel.TransactionFlowAttribute>."},{"content":"For more information and an example, see the reference topic.","pos":[11799,11860]},{"pos":[11870,11909],"content":"Using Configuration to Create Behaviors","linkify":"Using Configuration to Create Behaviors","nodes":[{"content":"Using Configuration to Create Behaviors","pos":[0,39]}]},{"content":"Service and endpoint, and contract behaviors can by designed to be specified in code or using attributes; only service and endpoint behaviors can be configured using application or Web configuration files.","pos":[11913,12118]},{"content":"Exposing behaviors using attributes allows developers to specify a behavior at compilation-time that cannot be added, removed, or modified at runtime.","pos":[12119,12269]},{"content":"This is often suitable for behaviors that are always required for the correct operation of a service (for example, the transaction-related parameters to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute?displayProperty=nameWithType&gt;</ph> attribute).","pos":[12270,12519],"source":" This is often suitable for behaviors that are always required for the correct operation of a service (for example, the transaction-related parameters to the <xref:System.ServiceModel.ServiceBehaviorAttribute?displayProperty=nameWithType> attribute)."},{"content":"Exposing behaviors using configuration allows developers to leave the specification and configuration of those behaviors to those who deploy the service.","pos":[12520,12673]},{"content":"This is suitable for behaviors that are optional components or other deployment-specific configuration, such as whether metadata is exposed for the service or the particular authorization configuration for a service.","pos":[12674,12890]},{"pos":[12898,13270],"content":"[!NOTE]\n You can also use behaviors that support configuration to enforce company application policies by inserting them into the machine.config configuration file and locking those items down. For a description and an example, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).","leadings":["","> "],"nodes":[{"content":"You can also use behaviors that support configuration to enforce company application policies by inserting them into the machine.config configuration file and locking those items down. For a description and an example, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).","pos":[9,370],"nodes":[{"content":"You can also use behaviors that support configuration to enforce company application policies by inserting them into the machine.config configuration file and locking those items down.","pos":[0,184]},{"content":"For a description and an example, see <bpt id=\"p1\">[</bpt>How to: Lock Down Endpoints in the Enterprise<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md)</ept>.","pos":[185,361],"source":" For a description and an example, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md)."}]}]},{"pos":[13277,13480],"content":"To expose a behavior using configuration, a developer must create a derived class of <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.BehaviorExtensionElement&gt;</ph> and then register that extension with configuration.","source":"To expose a behavior using configuration, a developer must create a derived class of <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> and then register that extension with configuration."},{"pos":[13487,13662],"content":"The following code example shows how an  <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IEndpointBehavior&gt;</ph> implements <ph id=\"ph2\">&lt;xref:System.ServiceModel.Configuration.BehaviorExtensionElement&gt;</ph>:","source":"The following code example shows how an  <xref:System.ServiceModel.Description.IEndpointBehavior> implements <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>:"},{"content":"In order for the configuration system to load a custom <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.BehaviorExtensionElement&gt;</ph>, it must be registered as an extension.","pos":[13938,14098],"source":"In order for the configuration system to load a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, it must be registered as an extension."},{"content":"The following code example shows the configuration file for the preceding endpoint behavior:","pos":[14099,14191]},{"pos":[15744,15934],"content":"Where <ph id=\"ph1\">`Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector`</ph> is the behavior extension type and <ph id=\"ph2\">`HostApplication`</ph> is the name of the assembly into which that class has been compiled.","source":"Where `Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector` is the behavior extension type and `HostApplication` is the name of the assembly into which that class has been compiled."},{"pos":[15944,15960],"content":"Evaluation Order","linkify":"Evaluation Order","nodes":[{"content":"Evaluation Order","pos":[0,16]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType&gt;</ph> are responsible for building the runtime from the programming model and description.","pos":[15964,16203],"source":"The <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType> and the <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> are responsible for building the runtime from the programming model and description."},{"content":"Behaviors, as previously described, contribute to that build process at the service, endpoint, contract, and operation.","pos":[16204,16323]},{"pos":[16330,16414],"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> applies behaviors in the following order:","source":"The <xref:System.ServiceModel.ServiceHost> applies behaviors in the following order:"},{"content":"Service","pos":[16424,16431]},{"content":"Contract","pos":[16441,16449]},{"content":"Endpoint","pos":[16459,16467]},{"content":"Operation","pos":[16477,16486]},{"content":"Within any collection of behaviors, no order is guaranteed.","pos":[16493,16552]},{"pos":[16559,16650],"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ChannelFactory%601&gt;</ph> applies behaviors in the following order:","source":"The <xref:System.ServiceModel.ChannelFactory%601> applies behaviors in the following order:"},{"content":"Contract","pos":[16660,16668]},{"content":"Endpoint","pos":[16678,16686]},{"content":"Operation","pos":[16696,16705]},{"content":"Within any collection of behaviors, again, no order is guaranteed.","pos":[16712,16778]},{"pos":[16788,16821],"content":"Adding Behaviors Programmatically","linkify":"Adding Behaviors Programmatically","nodes":[{"content":"Adding Behaviors Programmatically","pos":[0,33]}]},{"content":"Properties of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType&gt;</ph> in the service application must not be modified subsequent to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType&gt;</ph> method on <ph id=\"ph3\">&lt;xref:System.ServiceModel.ServiceHostBase?displayProperty=nameWithType&gt;</ph>.","pos":[16825,17176],"source":"Properties of the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> in the service application must not be modified subsequent to the <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType> method on <xref:System.ServiceModel.ServiceHostBase?displayProperty=nameWithType>."},{"content":"Some members, like the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHostBase.Credentials%2A?displayProperty=nameWithType&gt;</ph> property and the <ph id=\"ph2\">`AddServiceEndpoint`</ph> methods on <ph id=\"ph3\">&lt;xref:System.ServiceModel.ServiceHostBase&gt;</ph> and <ph id=\"ph4\">&lt;xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType&gt;</ph>, throw an exception if modified past that point.","pos":[17177,17499],"source":" Some members, like the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A?displayProperty=nameWithType> property and the `AddServiceEndpoint` methods on <xref:System.ServiceModel.ServiceHostBase> and <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType>, throw an exception if modified past that point."},{"content":"Others permit you to modify them, but the result is undefined.","pos":[17500,17562]},{"content":"Similarly, on the client the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType&gt;</ph> values must not be modified after the call to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A&gt;</ph> on the <ph id=\"ph3\">&lt;xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType&gt;</ph>.","pos":[17569,17875],"source":"Similarly, on the client the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> values must not be modified after the call to <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A> on the <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ChannelFactory.Credentials%2A?displayProperty=nameWithType&gt;</ph> property throws an exception if modified past that point, but the other client description values can be modified without error.","pos":[17876,18094],"source":" The <xref:System.ServiceModel.ChannelFactory.Credentials%2A?displayProperty=nameWithType> property throws an exception if modified past that point, but the other client description values can be modified without error."},{"content":"The result, however, is undefined.","pos":[18095,18129]},{"pos":[18136,18331],"content":"Whether for the service or client, it is recommended that you modify the description prior to calling <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType&gt;</ph>.","source":"Whether for the service or client, it is recommended that you modify the description prior to calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType>."},{"pos":[18341,18382],"content":"Inheritance Rules for Behavior Attributes","linkify":"Inheritance Rules for Behavior Attributes","nodes":[{"content":"Inheritance Rules for Behavior Attributes","pos":[0,41]}]},{"content":"All four types of behaviors can be populated using attributes – service behaviors and contract behaviors.","pos":[18386,18491]},{"content":"Because attributes are defined on managed objects and members, and managed objects and members support inheritance, it is necessary to define how behavior attributes work in the context of inheritance.","pos":[18492,18693]},{"content":"At a high level, the rule is that for a particular scope (for example, service, contract, or operation), all behavior attributes in the inheritance hierarchy for that scope are applied.","pos":[18700,18885]},{"content":"If there are two behavior attributes of the same type, only the most-derived type is used.","pos":[18886,18976]},{"pos":[18987,19004],"content":"Service Behaviors","linkify":"Service Behaviors","nodes":[{"content":"Service Behaviors","pos":[0,17]}]},{"content":"For a given service class, all service behavior attributes on that class, and on parents of that class, are applied.","pos":[19008,19124]},{"content":"If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.","pos":[19125,19245]},{"content":"For example, in the preceding case, the service B ends up with an <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.ServiceModel.InstanceContextMode.Single&gt;</ph>, an <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode&gt;</ph> mode of <ph id=\"ph4\">&lt;xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed&gt;</ph>, and a <ph id=\"ph5\">&lt;xref:System.ServiceModel.ConcurrencyMode&gt;</ph> of <ph id=\"ph6\">&lt;xref:System.ServiceModel.ConcurrencyMode.Single&gt;</ph>.","pos":[19606,20047],"source":"For example, in the preceding case, the service B ends up with an <xref:System.ServiceModel.InstanceContextMode> of <xref:System.ServiceModel.InstanceContextMode.Single>, an <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode> mode of <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>, and a <xref:System.ServiceModel.ConcurrencyMode> of <xref:System.ServiceModel.ConcurrencyMode.Single>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ConcurrencyMode&gt;</ph> is <ph id=\"ph2\">&lt;xref:System.ServiceModel.ConcurrencyMode.Single&gt;</ph>, because <ph id=\"ph3\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute on service B is on \"more derived\" than that on service A.","pos":[20048,20276],"source":" The <xref:System.ServiceModel.ConcurrencyMode> is <xref:System.ServiceModel.ConcurrencyMode.Single>, because <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute on service B is on \"more derived\" than that on service A."},{"pos":[20287,20305],"content":"Contract Behaviors","linkify":"Contract Behaviors","nodes":[{"content":"Contract Behaviors","pos":[0,18]}]},{"content":"For a given contract, all contract behavior attributes on that interface and on parents of that interface, are applied.","pos":[20309,20428]},{"content":"If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.","pos":[20429,20549]},{"pos":[20560,20579],"content":"Operation Behaviors","linkify":"Operation Behaviors","nodes":[{"content":"Operation Behaviors","pos":[0,19]}]},{"content":"If a given operation does not override an existing abstract or virtual operation, no inheritance rules apply.","pos":[20583,20692]},{"content":"If an operation does override an existing operation, then all operation behavior attributes on that operation and on parents of that operation, are applied.","pos":[20699,20855]},{"content":"If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.","pos":[20857,20977]}]}