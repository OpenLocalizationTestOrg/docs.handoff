{"content":"---\ntitle: \"<authentication> of <clientCertificate> Element\"\nms.date: \"03/30/2017\"\nms.assetid: 4a55eea2-1826-4026-b911-b7cc9e9c8bfe\n---\n# \\<authentication> of \\<clientCertificate> Element\nSpecifies authentication behaviors for client certificates used by a service.  \n  \n \\<system.ServiceModel>  \n\\<behaviors>  \n\\<serviceBehaviors>  \n\\<behavior>  \n\\<serviceCredentials>  \n\\<clientCertificate>  \n\\<authentication>  \n  \n## Syntax  \n  \n```xml  \n<authentication customCertificateValidatorType=\"namespace.typeName, [,AssemblyName] [,Version=version number] [,Culture=culture] [,PublicKeyToken=token]\"\n                certificateValidationMode=\"ChainTrust/None/PeerTrust/PeerOrChainTrust/Custom\"\n                includeWindowsGroups=\"Boolean\"\n                mapClientCertificateToWindowsAccount=\"Boolean\"\n                revocationMode=\"NoCheck/Online/Offline\"\n                trustedStoreLocation=\"CurrentUser/LocalMachine\" />\n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|customCertificateValidatorType|Optional string. A type and assembly used to validate a custom type. This attribute must be set when `certificateValidationMode` is set to `Custom`.|  \n|certificateValidationMode|Optional enumeration. Specifies one of the modes used to validate credentials. This attribute is of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> type. If set to <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom?displayProperty=nameWithType>, then a `customCertificateValidator` must also be supplied. The default is <xref:System.ServiceModel.Security.X509CertificateValidationMode.ChainTrust?displayProperty=nameWithType>.|  \n|includeWindowsGroups|Optional Boolean. Specifies if Windows groups are included in the security context. Setting this attribute to `true` has a performance impact, as it results in a full group expansion. Set this attribute to `false` if you do not need to establish the list of groups a user belongs to.|  \n|mapClientCertificateToWindowsAcccount|Boolean. Specifies whether the client can be mapped to a Windows identity using the certificate. Active Directory must be enabled to do this.|  \n|revocationMode|Optional enumeration. One of the modes used to check for a revoked certificate lists (RCL). The default is `Online`. This value is ignored when using HTTP transport security.|  \n|trustedStoreLocation|Optional enumeration. One of the two system store locations: `LocalMachine` or `CurrentUser`. This value is used when a service certificate is negotiated to the client. Validation is performed against the **Trusted People** store in the specified store location. The default is `CurrentUser`.|  \n  \n## customCertificateValidatorType Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|String|Specifies the type name and assembly and other data used to find the type.|  \n  \n## certificateValidationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: None, PeerTrust, ChainTrust, PeerOrChainTrust, Custom.<br /><br /> For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## revocationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: NoCheck, Online, Offline. For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## trustedStoreLocation Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: `LocalMachine` or `CurrentUser`. The default is `CurrentUser`. If the client application is running under a system account then the certificate is typically under `LocalMachine`. If the client application is running under a user account then the certificate is typically in `CurrentUser`.|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<clientCertificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials.md)|Defines an X.509 certificate used to authenticate a client to a service.|  \n  \n## Remarks  \n The `<authentication>` element corresponds to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class. It enables you to customize how clients are authenticated. You can set the `certificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`. By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain. This is the most secure mode. You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain. This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority. When deploying a client, use the `ChainTrust` value instead.  \n  \n You can also set the value to `Custom`. When set to the `Custom` value, you must also set the `customCertificateValidatorType` attribute to an assembly and type used to validate the certificate. To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class. For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).  \n  \n## Example  \n The following code specifies an X.509 certificate and a custom validation type in the `<authentication>` element.  \n  \n```xml  \n<serviceBehaviors>\n  <behavior name=\"myServiceBehavior\">\n    <clientCertificate>\n      <certificate findValue=\"www.cohowinery.com\"\n                   storeLocation=\"CurrentUser\"\n                   storeName=\"TrustedPeople\"\n                   x509FindType=\"FindByIssuerName\" />\n      <authentication customCertificateValidatorType=\"MyTypes.Coho\"\n                      certificateValidationMode=\"Custom\"\n                      revocationMode=\"Offline\"\n                      includeWindowsGroups=\"false\"\n                      mapClientCertificateToWindowsAccount=\"true\" />\n    </clientCertificate>\n  </behavior>\n</serviceBehaviors>\n```  \n  \n## See also\n\n- <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>\n- <xref:System.ServiceModel.Security.X509CertificateValidationMode>\n- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.Authentication%2A>\n- <xref:System.ServiceModel.Configuration.X509InitiatorCertificateServiceElement.Authentication%2A>\n- <xref:System.ServiceModel.Configuration.X509ClientCertificateAuthenticationElement>\n- [Security Behaviors](../../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md)\n- [How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)\n- [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)\n","nodes":[{"pos":[4,131],"embed":true,"restype":"x-metadata","content":"title: \"<authentication> of <clientCertificate> Element\"\nms.date: \"03/30/2017\"\nms.assetid: 4a55eea2-1826-4026-b911-b7cc9e9c8bfe","nodes":[{"content":"<authentication> of <clientCertificate> Element","nodes":[{"pos":[0,47],"content":"<ph id=\"ph1\">&lt;authentication&gt;</ph> of <ph id=\"ph2\">&lt;clientCertificate&gt;</ph> Element","source":"<authentication> of <clientCertificate> Element"}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[138,187],"content":"\\<authentication> of \\<clientCertificate> Element","linkify":"\\<authentication> of \\<clientCertificate> Element","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>authentication&gt; of <ph id=\"ph2\">\\&lt;</ph>clientCertificate&gt; Element","pos":[0,49],"source":"\\<authentication> of \\<clientCertificate> Element"}]},{"content":"Specifies authentication behaviors for client certificates used by a service.","pos":[188,265]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[272,294],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behaviors&gt;","pos":[297,309],"source":"\\<behaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceBehaviors&gt;","pos":[312,331],"source":"\\<serviceBehaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behavior&gt;","pos":[334,345],"source":"\\<behavior>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceCredentials&gt;","pos":[348,369],"source":"\\<serviceCredentials>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>clientCertificate&gt;","pos":[372,392],"source":"\\<clientCertificate>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>authentication&gt;","pos":[395,412],"source":"\\<authentication>"},{"pos":[421,427],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[935,958],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements","pos":[962,1041]},{"pos":[1051,1061],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1068,1077]},{"content":"Description","pos":[1078,1089]},{"content":"customCertificateValidatorType","pos":[1132,1162]},{"content":"Optional string.","pos":[1163,1179]},{"content":"A type and assembly used to validate a custom type.","pos":[1180,1231]},{"content":"This attribute must be set when <ph id=\"ph1\">`certificateValidationMode`</ph> is set to <ph id=\"ph2\">`Custom`</ph>.","pos":[1232,1311],"source":" This attribute must be set when `certificateValidationMode` is set to `Custom`."},{"content":"certificateValidationMode","pos":[1316,1341]},{"content":"Optional enumeration.","pos":[1342,1363]},{"content":"Specifies one of the modes used to validate credentials.","pos":[1364,1420]},{"content":"This attribute is of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode&gt;</ph> type.","pos":[1421,1517],"source":" This attribute is of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> type."},{"content":"If set to <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom?displayProperty=nameWithType&gt;</ph>, then a <ph id=\"ph2\">`customCertificateValidator`</ph> must also be supplied.","pos":[1518,1689],"source":" If set to <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom?displayProperty=nameWithType>, then a `customCertificateValidator` must also be supplied."},{"content":"The default is <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode.ChainTrust?displayProperty=nameWithType&gt;</ph>.","pos":[1690,1811],"source":" The default is <xref:System.ServiceModel.Security.X509CertificateValidationMode.ChainTrust?displayProperty=nameWithType>."},{"content":"includeWindowsGroups","pos":[1816,1836]},{"content":"Optional Boolean.","pos":[1837,1854]},{"content":"Specifies if Windows groups are included in the security context.","pos":[1855,1920]},{"content":"Setting this attribute to <ph id=\"ph1\">`true`</ph> has a performance impact, as it results in a full group expansion.","pos":[1921,2020],"source":" Setting this attribute to `true` has a performance impact, as it results in a full group expansion."},{"content":"Set this attribute to <ph id=\"ph1\">`false`</ph> if you do not need to establish the list of groups a user belongs to.","pos":[2021,2120],"source":" Set this attribute to `false` if you do not need to establish the list of groups a user belongs to."},{"content":"mapClientCertificateToWindowsAcccount","pos":[2125,2162]},{"content":"Boolean.","pos":[2163,2171]},{"content":"Specifies whether the client can be mapped to a Windows identity using the certificate.","pos":[2172,2259]},{"content":"Active Directory must be enabled to do this.","pos":[2260,2304]},{"content":"revocationMode","pos":[2309,2323]},{"content":"Optional enumeration.","pos":[2324,2345]},{"content":"One of the modes used to check for a revoked certificate lists (RCL).","pos":[2346,2415]},{"content":"The default is <ph id=\"ph1\">`Online`</ph>.","pos":[2416,2440],"source":" The default is `Online`."},{"content":"This value is ignored when using HTTP transport security.","pos":[2441,2498]},{"content":"trustedStoreLocation","pos":[2503,2523]},{"content":"Optional enumeration.","pos":[2524,2545]},{"content":"One of the two system store locations: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[2546,2617],"source":" One of the two system store locations: `LocalMachine` or `CurrentUser`."},{"content":"This value is used when a service certificate is negotiated to the client.","pos":[2618,2692]},{"content":"Validation is performed against the <bpt id=\"p1\">**</bpt>Trusted People<ept id=\"p1\">**</ept> store in the specified store location.","pos":[2693,2786],"source":" Validation is performed against the **Trusted People** store in the specified store location."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[2787,2816],"source":" The default is `CurrentUser`."},{"pos":[2826,2866],"content":"customCertificateValidatorType Attribute","linkify":"customCertificateValidatorType Attribute","nodes":[{"content":"customCertificateValidatorType Attribute","pos":[0,40]}]},{"content":"Value","pos":[2873,2878]},{"content":"Description","pos":[2879,2890]},{"content":"String","pos":[2929,2935]},{"content":"Specifies the type name and assembly and other data used to find the type.","pos":[2936,3010]},{"pos":[3020,3055],"content":"certificateValidationMode Attribute","linkify":"certificateValidationMode Attribute","nodes":[{"content":"certificateValidationMode Attribute","pos":[0,35]}]},{"content":"Value","pos":[3062,3067]},{"content":"Description","pos":[3068,3079]},{"content":"Enumeration","pos":[3118,3129]},{"content":"One of the following values: None, PeerTrust, ChainTrust, PeerOrChainTrust, Custom.","pos":[3130,3213]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[3226,3360],"source":"For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[3370,3394],"content":"revocationMode Attribute","linkify":"revocationMode Attribute","nodes":[{"content":"revocationMode Attribute","pos":[0,24]}]},{"content":"Value","pos":[3401,3406]},{"content":"Description","pos":[3407,3418]},{"content":"Enumeration","pos":[3457,3468]},{"content":"One of the following values: NoCheck, Online, Offline.","pos":[3469,3523]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[3524,3658],"source":" For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[3668,3698],"content":"trustedStoreLocation Attribute","linkify":"trustedStoreLocation Attribute","nodes":[{"content":"trustedStoreLocation Attribute","pos":[0,30]}]},{"content":"Value","pos":[3705,3710]},{"content":"Description","pos":[3711,3722]},{"content":"Enumeration","pos":[3761,3772]},{"content":"One of the following values: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[3773,3834],"source":"One of the following values: `LocalMachine` or `CurrentUser`."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3835,3864],"source":" The default is `CurrentUser`."},{"content":"If the client application is running under a system account then the certificate is typically under <ph id=\"ph1\">`LocalMachine`</ph>.","pos":[3865,3980],"source":" If the client application is running under a system account then the certificate is typically under `LocalMachine`."},{"content":"If the client application is running under a user account then the certificate is typically in <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3981,4090],"source":" If the client application is running under a user account then the certificate is typically in `CurrentUser`."},{"pos":[4101,4115],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[4119,4124]},{"pos":[4134,4149],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[4156,4163]},{"content":"Description","pos":[4164,4175]},{"pos":[4216,4343],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>clientCertificate&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials.md)</ept>","source":"[\\<clientCertificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials.md)"},{"content":"Defines an X.509 certificate used to authenticate a client to a service.","pos":[4344,4416]},{"pos":[4426,4433],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`&lt;authentication&gt;`</ph> element corresponds to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication&gt;</ph> class.","pos":[4437,4565],"source":"The `<authentication>` element corresponds to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class."},{"content":"It enables you to customize how clients are authenticated.","pos":[4566,4624]},{"content":"You can set the <ph id=\"ph1\">`certificateValidationMode`</ph> attribute to <ph id=\"ph2\">`None`</ph>, <ph id=\"ph3\">`ChainTrust`</ph>, <ph id=\"ph4\">`PeerOrChainTrust`</ph>, <ph id=\"ph5\">`PeerTrust`</ph>, or <ph id=\"ph6\">`Custom`</ph>.","pos":[4625,4749],"source":" You can set the `certificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`."},{"content":"By default, the level is set to <ph id=\"ph1\">`ChainTrust`</ph>, which specifies that each certificate must be found in a hierarchy of certificates ending in a <bpt id=\"p1\">*</bpt>root authority<ept id=\"p1\">*</ept> at the top of the chain.","pos":[4750,4932],"source":" By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain."},{"content":"This is the most secure mode.","pos":[4933,4962]},{"content":"You can also set the value to <ph id=\"ph1\">`PeerOrChainTrust`</ph>, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain.","pos":[4963,5137],"source":" You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain."},{"content":"This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.","pos":[5138,5288]},{"content":"When deploying a client, use the <ph id=\"ph1\">`ChainTrust`</ph> value instead.","pos":[5289,5349],"source":" When deploying a client, use the `ChainTrust` value instead."},{"content":"You can also set the value to <ph id=\"ph1\">`Custom`</ph>.","pos":[5356,5395],"source":"You can also set the value to `Custom`."},{"content":"When set to the <ph id=\"ph1\">`Custom`</ph> value, you must also set the <ph id=\"ph2\">`customCertificateValidatorType`</ph> attribute to an assembly and type used to validate the certificate.","pos":[5396,5550],"source":" When set to the `Custom` value, you must also set the `customCertificateValidatorType` attribute to an assembly and type used to validate the certificate."},{"content":"To create your own custom validator, you must inherit from the abstract <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.X509CertificateValidator&gt;</ph> class.","pos":[5551,5692],"source":" To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Create a Service that Employs a Custom Certificate Validator<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)</ept>.","pos":[5693,5906],"source":" For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)."},{"pos":[5915,5922],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5926,6039],"content":"The following code specifies an X.509 certificate and a custom validation type in the <ph id=\"ph1\">`&lt;authentication&gt;`</ph> element.","source":"The following code specifies an X.509 certificate and a custom validation type in the `<authentication>` element."},{"pos":[6694,6702],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[7132,7232],"content":"<bpt id=\"p1\">[</bpt>Security Behaviors<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md)</ept>","source":"[Security Behaviors](../../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md)"},{"pos":[7235,7421],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Service that Employs a Custom Certificate Validator<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)</ept>","source":"[How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)"},{"pos":[7424,7531],"content":"<bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>","source":"[Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)"}]}