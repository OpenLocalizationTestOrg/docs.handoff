{"content":"---\ntitle: \"Loosely-Typed Extensions Sample\"\nms.date: \"03/30/2017\"\nms.assetid: 56ce265b-8163-4b85-98e7-7692a12c4357\n---\n# Loosely-Typed Extensions Sample\nThe Syndication object model provides rich support for working with extension data—information that is present in a syndication feed's XML representation but not explicitly exposed by classes such as <xref:System.ServiceModel.Syndication.SyndicationFeed> and <xref:System.ServiceModel.Syndication.SyndicationItem>. This sample illustrates the basic techniques for working with extension data.  \n  \n The sample uses the <xref:System.ServiceModel.Syndication.SyndicationFeed> class for the purposes of the example. However, the patterns demonstrated in this sample can be used with all of the Syndication classes that support extension data:  \n  \n <xref:System.ServiceModel.Syndication.SyndicationFeed>  \n  \n <xref:System.ServiceModel.Syndication.SyndicationItem>  \n  \n <xref:System.ServiceModel.Syndication.SyndicationCategory>  \n  \n <xref:System.ServiceModel.Syndication.SyndicationPerson>  \n  \n <xref:System.ServiceModel.Syndication.SyndicationLink>  \n  \n## Sample XML  \n For reference, the following XML document is used in this sample.  \n  \n```xml  \n<?xml version=\"1.0\" encoding=\"IBM437\"?>  \n<feed myAttribute=\"someValue\" xmlns=\"http://www.w3.org/2005/Atom\">  \n  <title type=\"text\"></title>  \n  <id>uuid:8f60c7b3-a3c0-4de7-a642-2165d77ce3c1;id=1</id>  \n  <updated>2007-09-07T22:15:34Z</updated>  \n  <simpleString xmlns=\"\">hello, world!</simpleString>  \n  <simpleString xmlns=\"\">another simple string</simpleString>  \n  <DataContractExtension xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://schemas.d  \natacontract.org/2004/07/Microsoft.Syndication.Samples\">  \n    <Key>X</Key>  \n    <Value>4</Value>  \n  </DataContractExtension>  \n  <XmlSerializerExtension xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://ww  \nw.w3.org/2001/XMLSchema\" xmlns=\"\">  \n    <Key>Y</Key>  \n    <Value>8</Value>  \n  </XmlSerializerExtension>  \n  <xElementExtension xmlns=\"\">  \n    <Key attr1=\"someValue\">Z</Key>  \n    <Value attr1=\"someValue\">15</Value>  \n  </xElementExtension>  \n</feed>  \n```  \n  \n This document contains the following pieces of extension data:  \n  \n-   The `myAttribute` attribute of the `<feed>` element.  \n  \n-   `<simpleString>` element.  \n  \n-   `<DataContractExtension>` element.  \n  \n-   `<XmlSerializerExtension>` element.  \n  \n-   `<xElementExtension>` element.  \n  \n## Writing Extension Data  \n Attribute extensions are created by adding entries to the <xref:System.ServiceModel.Syndication.SyndicationFeed.AttributeExtensions%2A> collection as shown in the following sample code.  \n  \n```  \n//Attribute extensions are stored in a dictionary indexed by   \n// XmlQualifiedName  \nfeed.AttributeExtensions.Add(new XmlQualifiedName(\"myAttribute\", \"\"), \"someValue\");  \n```  \n  \n Element extensions are created by adding entries to the <xref:System.ServiceModel.Syndication.SyndicationFeed.ElementExtensions%2A> collection. These extensions can by basic values such as strings, XML serializations of .NET Framework objects, or XML nodes coded by hand.  \n  \n The following sample code creates an extension element named `simpleString`.  \n  \n```  \nfeed.ElementExtensions.Add(\"simpleString\", \"\", \"hello, world!\");  \n```  \n  \n The XML namespace for this element is the empty namespace (\"\") and its value is a text node that contains the string \"hello, world!\".  \n  \n One way to create complex element extensions that consist of many nested elements is to use the .NET Framework APIs for serialization (both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported) as shown in the following examples.  \n  \n```  \nfeed.ElementExtensions.Add( new DataContractExtension() { Key = \"X\", Value = 4 } );  \nfeed.ElementExtensions.Add( new XmlSerializerExtension { Key = \"Y\", Value = 8 }, new XmlSerializer( typeof( XmlSerializerExtension ) ) );  \n```  \n  \n In this example, the `DataContractExtension` and `XmlSerializerExtension` are custom types written for use with a serializer.  \n  \n The <xref:System.ServiceModel.Syndication.SyndicationElementExtensionCollection> class can also be used to create element extensions from an <xref:System.Xml.XmlReader> instance. This allows for easy integration with XML processing APIs such as <xref:System.Xml.Linq.XElement> as shown in the following sample code.  \n  \n```  \nfeed.ElementExtensions.Add(new XElement(\"xElementExtension\",  \n        new XElement(\"Key\", new XAttribute(\"attr1\", \"someValue\"), \"Z\"),  \n        new XElement(\"Value\", new XAttribute(\"attr1\", \"someValue\"),   \n        \"15\")).CreateReader());  \n```  \n  \n## Reading Extension Data  \n The values for attribute extensions can be obtained by looking up the attribute in the <xref:System.ServiceModel.Syndication.SyndicationFeed.AttributeExtensions%2A> collection by its <xref:System.Xml.XmlQualifiedName> as shown in the following sample code.  \n  \n```  \nConsole.WriteLine( feed.AttributeExtensions[ new XmlQualifiedName( \"myAttribute\", \"\" )]);  \n```  \n  \n Element extensions are accessed using the `ReadElementExtensions<T>` method.  \n  \n```  \nforeach( string s in feed2.ElementExtensions.ReadElementExtensions<string>(\"simpleString\", \"\"))  \n{  \n    Console.WriteLine(s);  \n}  \n  \nforeach (DataContractExtension dce in feed2.ElementExtensions.ReadElementExtensions<DataContractExtension>(\"DataContractExtension\",  \n\"http://schemas.datacontract.org/2004/07/SyndicationExtensions\"))  \n{  \n    Console.WriteLine(dce.ToString());  \n}  \n  \nforeach (XmlSerializerExtension xse in feed2.ElementExtensions.ReadElementExtensions<XmlSerializerExtension>(\"XmlSerializerExtension\", \"\", new XmlSerializer(typeof(XmlSerializerExtension))))  \n{  \n    Console.WriteLine(xse.ToString());  \n}  \n```  \n  \n It is also possible to obtain an `XmlReader` at individual element extensions by using the <xref:System.ServiceModel.Syndication.SyndicationElementExtension.GetReader> method.  \n  \n```  \nforeach (SyndicationElementExtension extension in feed2.ElementExtensions.Where<SyndicationElementExtension>(x => x.OuterName == \"xElementExtension\"))  \n{  \n    XNode xelement = XElement.ReadFrom(extension.GetReader());  \n    Console.WriteLine(xelement.ToString());  \n}  \n```  \n  \n#### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Syndication\\LooselyTypedExtensions`  \n  \n## See also\n\n- [Strongly-Typed Extensions](../../../../docs/framework/wcf/samples/strongly-typed-extensions-sample.md)\n- [WCF Syndication](../../../../docs/framework/wcf/feature-details/wcf-syndication.md)\n","nodes":[{"pos":[4,115],"embed":true,"restype":"x-metadata","content":"title: \"Loosely-Typed Extensions Sample\"\nms.date: \"03/30/2017\"\nms.assetid: 56ce265b-8163-4b85-98e7-7692a12c4357","nodes":[{"content":"Loosely-Typed Extensions Sample","nodes":[{"pos":[0,31],"content":"Loosely-Typed Extensions Sample","nodes":[{"content":"Loosely-Typed Extensions Sample","pos":[0,31]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[122,153],"content":"Loosely-Typed Extensions Sample","linkify":"Loosely-Typed Extensions Sample","nodes":[{"content":"Loosely-Typed Extensions Sample","pos":[0,31]}]},{"content":"The Syndication object model provides rich support for working with extension data—information that is present in a syndication feed's XML representation but not explicitly exposed by classes such as <ph id=\"ph1\">&lt;xref:System.ServiceModel.Syndication.SyndicationFeed&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Syndication.SyndicationItem&gt;</ph>.","pos":[154,468],"source":"The Syndication object model provides rich support for working with extension data—information that is present in a syndication feed's XML representation but not explicitly exposed by classes such as <xref:System.ServiceModel.Syndication.SyndicationFeed> and <xref:System.ServiceModel.Syndication.SyndicationItem>."},{"content":"This sample illustrates the basic techniques for working with extension data.","pos":[469,546]},{"content":"The sample uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Syndication.SyndicationFeed&gt;</ph> class for the purposes of the example.","pos":[553,666],"source":"The sample uses the <xref:System.ServiceModel.Syndication.SyndicationFeed> class for the purposes of the example."},{"content":"However, the patterns demonstrated in this sample can be used with all of the Syndication classes that support extension data:","pos":[667,793]},{"pos":[1113,1123],"content":"Sample XML","linkify":"Sample XML","nodes":[{"content":"Sample XML","pos":[0,10]}]},{"content":"For reference, the following XML document is used in this sample.","pos":[1127,1192]},{"content":"This document contains the following pieces of extension data:","pos":[2175,2237]},{"pos":[2247,2299],"content":"The <ph id=\"ph1\">`myAttribute`</ph> attribute of the <ph id=\"ph2\">`&lt;feed&gt;`</ph> element.","source":"The `myAttribute` attribute of the `<feed>` element."},{"pos":[2309,2334],"content":"<ph id=\"ph1\">`&lt;simpleString&gt;`</ph> element.","source":"`<simpleString>` element."},{"pos":[2344,2378],"content":"<ph id=\"ph1\">`&lt;DataContractExtension&gt;`</ph> element.","source":"`<DataContractExtension>` element."},{"pos":[2388,2423],"content":"<ph id=\"ph1\">`&lt;XmlSerializerExtension&gt;`</ph> element.","source":"`<XmlSerializerExtension>` element."},{"pos":[2433,2463],"content":"<ph id=\"ph1\">`&lt;xElementExtension&gt;`</ph> element.","source":"`<xElementExtension>` element."},{"pos":[2472,2494],"content":"Writing Extension Data","linkify":"Writing Extension Data","nodes":[{"content":"Writing Extension Data","pos":[0,22]}]},{"pos":[2498,2683],"content":"Attribute extensions are created by adding entries to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Syndication.SyndicationFeed.AttributeExtensions%2A&gt;</ph> collection as shown in the following sample code.","source":"Attribute extensions are created by adding entries to the <xref:System.ServiceModel.Syndication.SyndicationFeed.AttributeExtensions%2A> collection as shown in the following sample code."},{"content":"Element extensions are created by adding entries to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Syndication.SyndicationFeed.ElementExtensions%2A&gt;</ph> collection.","pos":[2877,3020],"source":"Element extensions are created by adding entries to the <xref:System.ServiceModel.Syndication.SyndicationFeed.ElementExtensions%2A> collection."},{"content":"These extensions can by basic values such as strings, XML serializations of .NET Framework objects, or XML nodes coded by hand.","pos":[3021,3148]},{"pos":[3155,3231],"content":"The following sample code creates an extension element named <ph id=\"ph1\">`simpleString`</ph>.","source":"The following sample code creates an extension element named `simpleString`."},{"content":"The XML namespace for this element is the empty namespace (\"\") and its value is a text node that contains the string \"hello, world!\".","pos":[3320,3453]},{"pos":[3460,3767],"content":"One way to create complex element extensions that consist of many nested elements is to use the .NET Framework APIs for serialization (both the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> are supported) as shown in the following examples.","source":"One way to create complex element extensions that consist of many nested elements is to use the .NET Framework APIs for serialization (both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported) as shown in the following examples."},{"pos":[4015,4140],"content":"In this example, the <ph id=\"ph1\">`DataContractExtension`</ph> and <ph id=\"ph2\">`XmlSerializerExtension`</ph> are custom types written for use with a serializer.","source":"In this example, the `DataContractExtension` and `XmlSerializerExtension` are custom types written for use with a serializer."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Syndication.SyndicationElementExtensionCollection&gt;</ph> class can also be used to create element extensions from an <ph id=\"ph2\">&lt;xref:System.Xml.XmlReader&gt;</ph> instance.","pos":[4147,4325],"source":"The <xref:System.ServiceModel.Syndication.SyndicationElementExtensionCollection> class can also be used to create element extensions from an <xref:System.Xml.XmlReader> instance."},{"content":"This allows for easy integration with XML processing APIs such as <ph id=\"ph1\">&lt;xref:System.Xml.Linq.XElement&gt;</ph> as shown in the following sample code.","pos":[4326,4462],"source":" This allows for easy integration with XML processing APIs such as <xref:System.Xml.Linq.XElement> as shown in the following sample code."},{"pos":[4728,4750],"content":"Reading Extension Data","linkify":"Reading Extension Data","nodes":[{"content":"Reading Extension Data","pos":[0,22]}]},{"pos":[4754,5010],"content":"The values for attribute extensions can be obtained by looking up the attribute in the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Syndication.SyndicationFeed.AttributeExtensions%2A&gt;</ph> collection by its <ph id=\"ph2\">&lt;xref:System.Xml.XmlQualifiedName&gt;</ph> as shown in the following sample code.","source":"The values for attribute extensions can be obtained by looking up the attribute in the <xref:System.ServiceModel.Syndication.SyndicationFeed.AttributeExtensions%2A> collection by its <xref:System.Xml.XmlQualifiedName> as shown in the following sample code."},{"pos":[5124,5200],"content":"Element extensions are accessed using the <ph id=\"ph1\">`ReadElementExtensions&lt;T&gt;`</ph> method.","source":"Element extensions are accessed using the `ReadElementExtensions<T>` method."},{"pos":[5855,6030],"content":"It is also possible to obtain an <ph id=\"ph1\">`XmlReader`</ph> at individual element extensions by using the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Syndication.SyndicationElementExtension.GetReader&gt;</ph> method.","source":"It is also possible to obtain an `XmlReader` at individual element extensions by using the <xref:System.ServiceModel.Syndication.SyndicationElementExtension.GetReader> method."},{"pos":[6328,6364],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[6374,6573],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[6583,6792],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[6802,7010],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[7018,7150],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[7204,7514],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[7515,7565]},{"pos":[7662,7670],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[7674,7777],"content":"<bpt id=\"p1\">[</bpt>Strongly-Typed Extensions<ept id=\"p1\">](../../../../docs/framework/wcf/samples/strongly-typed-extensions-sample.md)</ept>","source":"[Strongly-Typed Extensions](../../../../docs/framework/wcf/samples/strongly-typed-extensions-sample.md)"},{"pos":[7780,7864],"content":"<bpt id=\"p1\">[</bpt>WCF Syndication<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-syndication.md)</ept>","source":"[WCF Syndication](../../../../docs/framework/wcf/feature-details/wcf-syndication.md)"}]}