{"content":"---\ntitle: \"Mitigation: Horizontal Scrolling and Virtualization | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-bcl\"\n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: d5bafd9b-a3b3-4f92-8241-2aad254fb1a9\ncaps.latest.revision: 6\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Mitigation: Horizontal Scrolling and Virtualization\nThis change applies to an <xref:System.Windows.Controls.ItemsControl> that does its own virtualization in the direction orthogonal to the main scrolling direction. (The chief  example is a <xref:System.Windows.Controls.DataGrid> control with <xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A> set to `true`.)  The outcome of certain  horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.  The specific operations include **Scroll Here** and **Right Edge**, to use the names from the menu obtained by right-clicking a horizontal scrollbar.  Both of these compute a  candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.  After scrolling to the new offset, the definition of \"here\" or \"right edge\" may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName>.  \n  \n## Description of the change  \n Prior to the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], the scroll operation simply uses the candidate offset, even though it may not be \"here\" or at the \"right edge\" any more.  This results in effects like \"bouncing\" the scroll thumb, best illustrated by example.  Suppose a <xref:System.Windows.Controls.DataGrid> control has <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> set to 1000 and <xref:System.Windows.FrameworkElement.Width%2A> set to 200.  A scroll to \"Right Edge\" uses candidate offset  1000 - 200 = 800.  While scrolling to that offset, new columns are de-virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> changes to 2000.  The scroll ends with <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A>=800, and the thumb \"bounces\" back to near the middle of the scrollbar -- precisely at 800/2000 = 40%.  \n  \n Starting with the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], a new candidate offset is recomputed when this situation occurs. (This is how vertical scrolling works already.)  \n  \n## Impact  \n The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.  \n  \n## Mitigation  \n An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> should be changed to retrieve the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> due to de-virtualization.  \n  \n## See Also  \n [Runtime Changes](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-6-2.md)","nodes":[{"pos":[12,80],"content":"Mitigation: Horizontal Scrolling and Virtualization | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Mitigation: Horizontal Scrolling and Virtualization | Microsoft Docs","pos":[0,68]}]},{"pos":[400,451],"content":"Mitigation: Horizontal Scrolling and Virtualization","linkify":"Mitigation: Horizontal Scrolling and Virtualization","nodes":[{"content":"Mitigation: Horizontal Scrolling and Virtualization","pos":[0,51]}]},{"content":"This change applies to an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> that does its own virtualization in the direction orthogonal to the main scrolling direction.","pos":[452,615],"source":"This change applies to an <xref:System.Windows.Controls.ItemsControl> that does its own virtualization in the direction orthogonal to the main scrolling direction."},{"content":"(The chief  example is a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.DataGrid&gt;</ph> control with <ph id=\"ph2\">&lt;xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A&gt;</ph> set to <ph id=\"ph3\">`true`</ph>.)  The outcome of certain  horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.","pos":[616,965],"source":" (The chief  example is a <xref:System.Windows.Controls.DataGrid> control with <xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A> set to `true`.)  The outcome of certain  horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations."},{"content":"The specific operations include <bpt id=\"p1\">**</bpt>Scroll Here<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Right Edge<ept id=\"p2\">**</ept>, to use the names from the menu obtained by right-clicking a horizontal scrollbar.","pos":[967,1116],"source":"  The specific operations include **Scroll Here** and **Right Edge**, to use the names from the menu obtained by right-clicking a horizontal scrollbar."},{"content":"Both of these compute a  candidate offset and call <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName&gt;</ph>.","pos":[1118,1271],"source":"  Both of these compute a  candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>."},{"content":"After scrolling to the new offset, the definition of \"here\" or \"right edge\" may have changed because newly de-virtualized content has changed the value of <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName&gt;</ph>.","pos":[1273,1522],"source":"  After scrolling to the new offset, the definition of \"here\" or \"right edge\" may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName>."},{"pos":[1531,1556],"content":"Description of the change","linkify":"Description of the change","nodes":[{"content":"Description of the change","pos":[0,25]}]},{"content":"Prior to the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, the scroll operation simply uses the candidate offset, even though it may not be \"here\" or at the \"right edge\" any more.","pos":[1560,1749],"source":"Prior to the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], the scroll operation simply uses the candidate offset, even though it may not be \"here\" or at the \"right edge\" any more."},{"content":"This results in effects like \"bouncing\" the scroll thumb, best illustrated by example.","pos":[1751,1837]},{"content":"Suppose a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.DataGrid&gt;</ph> control has <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A&gt;</ph> set to 1000 and <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkElement.Width%2A&gt;</ph> set to 200.","pos":[1839,2045],"source":"  Suppose a <xref:System.Windows.Controls.DataGrid> control has <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> set to 1000 and <xref:System.Windows.FrameworkElement.Width%2A> set to 200."},{"content":"A scroll to \"Right Edge\" uses candidate offset  1000 - 200 = 800.","pos":[2047,2112]},{"content":"While scrolling to that offset, new columns are de-virtualized; let's suppose they are very wide, so that the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A&gt;</ph> changes to 2000.","pos":[2114,2309],"source":"  While scrolling to that offset, new columns are de-virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> changes to 2000."},{"content":"The scroll ends with <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A&gt;</ph>=800, and the thumb \"bounces\" back to near the middle of the scrollbar -- precisely at 800/2000 = 40%.","pos":[2311,2507],"source":"  The scroll ends with <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A>=800, and the thumb \"bounces\" back to near the middle of the scrollbar -- precisely at 800/2000 = 40%."},{"content":"Starting with the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, a new candidate offset is recomputed when this situation occurs.","pos":[2514,2652],"source":"Starting with the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], a new candidate offset is recomputed when this situation occurs."},{"content":"(This is how vertical scrolling works already.)","pos":[2653,2700]},{"pos":[2709,2715],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"content":"The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName&gt;</ph> after a horizontal scroll, whether invoked by the end user or by an explicit call to <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName&gt;</ph>.","pos":[2719,3155],"source":"The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>."},{"pos":[3164,3174],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"content":"An app that uses a predicted value for <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName&gt;</ph> should be changed to retrieve the actual value (and the value of <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A&gt;</ph>) after any horizontal scroll that could change <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A&gt;</ph> due to de-virtualization.","pos":[3178,3591],"source":"An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> should be changed to retrieve the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> due to de-virtualization."},{"pos":[3600,3608],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[3612,3716],"content":"<bpt id=\"p1\">[</bpt>Runtime Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-6-2.md)</ept>","source":"[Runtime Changes](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-6-2.md)"}]}