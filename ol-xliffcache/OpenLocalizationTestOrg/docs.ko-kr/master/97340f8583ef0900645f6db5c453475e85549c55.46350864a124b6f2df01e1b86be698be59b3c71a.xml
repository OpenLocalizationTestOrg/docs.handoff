{"content":"---\ntitle: \"Accessing Services Using a WCF Client\"\nms.date: \"03/30/2017\"\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords:\n  - \"clients [WCF], consuming services\"\nms.assetid: d780af9f-73c5-42db-9e52-077a5e4de7fe\n---\n# Accessing Services Using a WCF Client\n\nAfter you create a service, the next step is to create a WCF client proxy. A client application uses the WCF client proxy to communicate with the service. Client applications usually import a service's metadata to generate WCF client code that can be used to invoke the service.\n\n The basic steps for creating a WCF client include the following:\n\n1.  Compile the service code.\n\n2.  Generate the WCF client proxy.\n\n3.  Instantiate the WCF client proxy.\n\nThe WCF client proxy can be generated manually by using the Service Model Metadata Utility Tool (SvcUtil.exe) for more information see, [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md). The WCF client proxy can also be generated within Visual Studio using the **Add Service Reference**  feature. To generate the WCF client proxy using either method the service must be running. If the service is self-hosted you must run the host. If the service is hosted in IIS/WAS you do not need to do anything else.\n\n## ServiceModel Metadata Utility Tool\n The [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) is a command-line tool for generating code from metadata. The following use is an example of a basic Svcutil.exe command.\n\n```\nSvcutil.exe <service's Metadata Exchange (MEX) address or HTTP GET address>\n```\n\n Alternatively, you can use Svcutil.exe with Web Services Description Language (WSDL) and XML Schema definition language (XSD) files on the file system.\n\n```\nSvcutil.exe <list of WSDL and XSD files on file system>\n```\n\n The result is a code file that contains WCF client code that the client application can use to invoke the service.\n\n You can also use the tool to generate configuration files.\n\n```\nSvcutil.exe <file1 [,file2]>\n```\n\n If only one file name is given, that is the name of the output file. If two file names are given, then the first file is an input configuration file whose contents are merged with the generated configuration and written out into the second file. For more information about configuration, see [Configuring Bindings for Services](../../../docs/framework/wcf/configuring-bindings-for-wcf-services.md).\n\n> [!IMPORTANT]\n> Unsecured metadata requests pose certain risks in the same way that any unsecured network request does: If you are not certain that the endpoint you are communicating with is who it says it is, the information you retrieve might be metadata from a malicious service.\n\n## Add Service Reference in Visual Studio\n\n With the service running, right click the project that will contain the WCF client proxy and select **Add** > **Service Reference**. In the **Add Service Reference Dialog**, type in the URL to the service you want to call and click the **Go** button. The dialog will display a list of services available at the address you specify. Double click the service to see the contracts and operations available, specify a namespace for the generated code, and click the **OK** button.\n\n## Example\n The following code example shows a service contract created for a service.\n\n```csharp\n// Define a service contract.\n[ServiceContract(Namespace=\"http://Microsoft.ServiceModel.Samples\")]\npublic interface ICalculator\n{\n    [OperationContract]\n    double Add(double n1, double n2);\n    // Other methods are not shown here.\n}\n```\n\n```vb\n' Define a service contract.\n<ServiceContract(Namespace:=\"http://Microsoft.ServiceModel.Samples\")> _\nPublic Interface ICalculator\n    <OperationContract()>  _\n    Function Add(ByVal n1 As Double, ByVal n2 As Double) As Double\n    ' Other methods are not shown here.\nEnd Interface\n```\n\n The ServiceModel Metadata utility tool and **Add Service Reference** in Visual Studio generates the following WCF client class. The class inherits from the generic <xref:System.ServiceModel.ClientBase%601> class and implements the `ICalculator` interface. The tool also generates the `ICalculator` interface (not shown here).\n\n```csharp\npublic partial class CalculatorClient : System.ServiceModel.ClientBase<ICalculator>, ICalculator\n{\n    public CalculatorClient()\n    {}\n\n    public CalculatorClient(string endpointConfigurationName) :\n            base(endpointConfigurationName)\n    {}\n\n    public CalculatorClient(string endpointConfigurationName, string remoteAddress) :\n            base(endpointConfigurationName, remoteAddress)\n    {}\n\n    public CalculatorClient(string endpointConfigurationName,\n        System.ServiceModel.EndpointAddress remoteAddress) :\n            base(endpointConfigurationName, remoteAddress)\n    {}\n\n    public CalculatorClient(System.ServiceModel.Channels.Binding binding,\n        System.ServiceModel.EndpointAddress remoteAddress) :\n            base(binding, remoteAddress)\n    {}\n\n    public double Add(double n1, double n2)\n    {\n        return base.Channel.Add(n1, n2);\n    }\n}\n```\n\n```vb\nPartial Public Class CalculatorClient\n    Inherits System.ServiceModel.ClientBase(Of ICalculator)\n    Implements ICalculator\n\n    Public Sub New()\n        MyBase.New\n    End Sub\n\n    Public Sub New(ByVal endpointConfigurationName As String)\n        MyBase.New(endpointConfigurationName)\n    End Sub\n\n    Public Sub New(ByVal endpointConfigurationName As String, ByVal remoteAddress As String)\n        MyBase.New(endpointConfigurationName, remoteAddress)\n    End Sub\n\n    Public Sub New(ByVal endpointConfigurationName As String,\n        ByVal remoteAddress As System.ServiceModel.EndpointAddress)\n        MyBase.New(endpointConfigurationName, remoteAddress)\n    End Sub\n\n    Public Sub New(ByVal binding As System.ServiceModel.Channels.Binding,\n        ByVal remoteAddress As System.ServiceModel.EndpointAddress)\n        MyBase.New(binding, remoteAddress)\n    End Sub\n\n    Public Function Add(ByVal n1 As Double, ByVal n2 As Double) As Double\n        Implements ICalculator.Add\n        Return MyBase.Channel.Add(n1, n2)\n    End Function\nEnd Class\n```\n\n## Using the WCF Client\n To use the WCF client, create an instance of the WCF client, and then call its methods, as shown in the following code.\n\n```csharp\n// Create a client object with the given client endpoint configuration.\nCalculatorClient calcClient = new CalculatorClient(\"CalculatorEndpoint\"));\n// Call the Add service operation.\ndouble value1 = 100.00D;\ndouble value2 = 15.99D;\ndouble result = calcClient.Add(value1, value2);\nConsole.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result);\n```\n\n```vb\n' Create a client object with the given client endpoint configuration.\nDim calcClient As CalculatorClient = _\nNew CalculatorClient(\"CalculatorEndpoint\")\n\n' Call the Add service operation.\nDim value1 As Double = 100.00D\nDim value2 As Double = 15.99D\nDim result As Double = calcClient.Add(value1, value2)\nConsole.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result)\n```\n\n## Debugging Exceptions Thrown by a Client\n\nMany exceptions thrown by a WCF client are caused by an exception on the service. Some examples of this are:\n\n-   <xref:System.Net.Sockets.SocketException>: An existing connection was forcibly closed by the remote host.\n\n-   <xref:System.ServiceModel.CommunicationException>: The underlying connection was closed unexpectedly.\n\n-   <xref:System.ServiceModel.CommunicationObjectAbortedException>: The socket connection was aborted. This could be caused by an error processing your message, a receive time-out being exceeded by the remote host, or an underlying network resource issue.\n\nWhen these types of exceptions occur, the best way to solve the problem is to turn on tracing on the service side and determine what exception occurred there. For more information about tracing, see [Tracing](../../../docs/framework/wcf/diagnostics/tracing/index.md) and [Using Tracing to Troubleshoot Your Application](../../../docs/framework/wcf/diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md).\n\n## See also\n\n- [How to: Create a Client](../../../docs/framework/wcf/how-to-create-a-wcf-client.md)\n- [How to: Access Services with a Duplex Contract](../../../docs/framework/wcf/feature-details/how-to-access-services-with-a-duplex-contract.md)\n- [How to: Call Service Operations Asynchronously](../../../docs/framework/wcf/feature-details/how-to-call-wcf-service-operations-asynchronously.md)\n- [How to: Access Services with One-Way and Request-Reply Contracts](../../../docs/framework/wcf/feature-details/how-to-access-wcf-services-with-one-way-and-request-reply-contracts.md)\n- [How to: Access a WSE 3.0 Service](../../../docs/framework/wcf/feature-details/how-to-access-a-wse-3-0-service-with-a-wcf-client.md)\n- [Understanding Generated Client Code](../../../docs/framework/wcf/feature-details/understanding-generated-client-code.md)\n- [How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer](../../../docs/framework/wcf/feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md)\n- [Specifying Client Run-Time Behavior](../../../docs/framework/wcf/specifying-client-run-time-behavior.md)\n- [Configuring Client Behaviors](../../../docs/framework/wcf/configuring-client-behaviors.md)\n","nodes":[{"pos":[4,215],"embed":true,"restype":"x-metadata","content":"title: \"Accessing Services Using a WCF Client\"\nms.date: \"03/30/2017\"\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords:\n  - \"clients [WCF], consuming services\"\nms.assetid: d780af9f-73c5-42db-9e52-077a5e4de7fe","nodes":[{"content":"Accessing Services Using a WCF Client","nodes":[{"pos":[0,37],"content":"Accessing Services Using a WCF Client","nodes":[{"content":"Accessing Services Using a WCF Client","pos":[0,37]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[222,259],"content":"Accessing Services Using a WCF Client","linkify":"Accessing Services Using a WCF Client","nodes":[{"content":"Accessing Services Using a WCF Client","pos":[0,37]}]},{"content":"After you create a service, the next step is to create a WCF client proxy.","pos":[261,335]},{"content":"A client application uses the WCF client proxy to communicate with the service.","pos":[336,415]},{"content":"Client applications usually import a service's metadata to generate WCF client code that can be used to invoke the service.","pos":[416,539]},{"content":"The basic steps for creating a WCF client include the following:","pos":[542,606]},{"content":"Compile the service code.","pos":[612,637]},{"content":"Generate the WCF client proxy.","pos":[643,673]},{"content":"Instantiate the WCF client proxy.","pos":[679,712]},{"content":"The WCF client proxy can be generated manually by using the Service Model Metadata Utility Tool (SvcUtil.exe) for more information see, <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept>.","pos":[714,980],"source":"The WCF client proxy can be generated manually by using the Service Model Metadata Utility Tool (SvcUtil.exe) for more information see, [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)."},{"content":"The WCF client proxy can also be generated within Visual Studio using the <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept>  feature.","pos":[981,1090],"source":" The WCF client proxy can also be generated within Visual Studio using the **Add Service Reference**  feature."},{"content":"To generate the WCF client proxy using either method the service must be running.","pos":[1091,1172]},{"content":"If the service is self-hosted you must run the host.","pos":[1173,1225]},{"content":"If the service is hosted in IIS/WAS you do not need to do anything else.","pos":[1226,1298]},{"pos":[1303,1337],"content":"ServiceModel Metadata Utility Tool","linkify":"ServiceModel Metadata Utility Tool","nodes":[{"content":"ServiceModel Metadata Utility Tool","pos":[0,34]}]},{"content":"The <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> is a command-line tool for generating code from metadata.","pos":[1339,1530],"source":"The [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) is a command-line tool for generating code from metadata."},{"content":"The following use is an example of a basic Svcutil.exe command.","pos":[1531,1594]},{"content":"Alternatively, you can use Svcutil.exe with Web Services Description Language (WSDL) and XML Schema definition language (XSD) files on the file system.","pos":[1682,1833]},{"content":"The result is a code file that contains WCF client code that the client application can use to invoke the service.","pos":[1901,2015]},{"content":"You can also use the tool to generate configuration files.","pos":[2018,2076]},{"content":"If only one file name is given, that is the name of the output file.","pos":[2117,2185]},{"content":"If two file names are given, then the first file is an input configuration file whose contents are merged with the generated configuration and written out into the second file.","pos":[2186,2362]},{"content":"For more information about configuration, see <bpt id=\"p1\">[</bpt>Configuring Bindings for Services<ept id=\"p1\">](../../../docs/framework/wcf/configuring-bindings-for-wcf-services.md)</ept>.","pos":[2363,2515],"source":" For more information about configuration, see [Configuring Bindings for Services](../../../docs/framework/wcf/configuring-bindings-for-wcf-services.md)."},{"pos":[2519,2800],"content":"[!IMPORTANT]\nUnsecured metadata requests pose certain risks in the same way that any unsecured network request does: If you are not certain that the endpoint you are communicating with is who it says it is, the information you retrieve might be metadata from a malicious service.","leadings":["","> "],"nodes":[{"content":"Unsecured metadata requests pose certain risks in the same way that any unsecured network request does: If you are not certain that the endpoint you are communicating with is who it says it is, the information you retrieve might be metadata from a malicious service.","pos":[13,279]}]},{"pos":[2805,2843],"content":"Add Service Reference in Visual Studio","linkify":"Add Service Reference in Visual Studio","nodes":[{"content":"Add Service Reference in Visual Studio","pos":[0,38]}]},{"content":"With the service running, right click the project that will contain the WCF client proxy and select <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p2\">**</bpt>Service Reference<ept id=\"p2\">**</ept>.","pos":[2846,2978],"source":"With the service running, right click the project that will contain the WCF client proxy and select **Add** > **Service Reference**."},{"content":"In the <bpt id=\"p1\">**</bpt>Add Service Reference Dialog<ept id=\"p1\">**</ept>, type in the URL to the service you want to call and click the <bpt id=\"p2\">**</bpt>Go<ept id=\"p2\">**</ept> button.","pos":[2979,3096],"source":" In the **Add Service Reference Dialog**, type in the URL to the service you want to call and click the **Go** button."},{"content":"The dialog will display a list of services available at the address you specify.","pos":[3097,3177]},{"content":"Double click the service to see the contracts and operations available, specify a namespace for the generated code, and click the <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> button.","pos":[3178,3322],"source":" Double click the service to see the contracts and operations available, specify a namespace for the generated code, and click the **OK** button."},{"pos":[3327,3334],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example shows a service contract created for a service.","pos":[3336,3410]},{"content":"The ServiceModel Metadata utility tool and <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept> in Visual Studio generates the following WCF client class.","pos":[3954,4081],"source":"The ServiceModel Metadata utility tool and **Add Service Reference** in Visual Studio generates the following WCF client class."},{"content":"The class inherits from the generic <ph id=\"ph1\">&lt;xref:System.ServiceModel.ClientBase%601&gt;</ph> class and implements the <ph id=\"ph2\">`ICalculator`</ph> interface.","pos":[4082,4209],"source":" The class inherits from the generic <xref:System.ServiceModel.ClientBase%601> class and implements the `ICalculator` interface."},{"content":"The tool also generates the <ph id=\"ph1\">`ICalculator`</ph> interface (not shown here).","pos":[4210,4279],"source":" The tool also generates the `ICalculator` interface (not shown here)."},{"pos":[6236,6256],"content":"Using the WCF Client","linkify":"Using the WCF Client","nodes":[{"content":"Using the WCF Client","pos":[0,20]}]},{"content":"To use the WCF client, create an instance of the WCF client, and then call its methods, as shown in the following code.","pos":[6258,6377]},{"pos":[7119,7158],"content":"Debugging Exceptions Thrown by a Client","linkify":"Debugging Exceptions Thrown by a Client","nodes":[{"content":"Debugging Exceptions Thrown by a Client","pos":[0,39]}]},{"content":"Many exceptions thrown by a WCF client are caused by an exception on the service.","pos":[7160,7241]},{"content":"Some examples of this are:","pos":[7242,7268]},{"pos":[7274,7379],"content":"<ph id=\"ph1\">&lt;xref:System.Net.Sockets.SocketException&gt;</ph>: An existing connection was forcibly closed by the remote host.","source":"<xref:System.Net.Sockets.SocketException>: An existing connection was forcibly closed by the remote host."},{"pos":[7385,7486],"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.CommunicationException&gt;</ph>: The underlying connection was closed unexpectedly.","source":"<xref:System.ServiceModel.CommunicationException>: The underlying connection was closed unexpectedly."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.CommunicationObjectAbortedException&gt;</ph>: The socket connection was aborted.","pos":[7492,7590],"source":"<xref:System.ServiceModel.CommunicationObjectAbortedException>: The socket connection was aborted."},{"content":"This could be caused by an error processing your message, a receive time-out being exceeded by the remote host, or an underlying network resource issue.","pos":[7591,7743]},{"content":"When these types of exceptions occur, the best way to solve the problem is to turn on tracing on the service side and determine what exception occurred there.","pos":[7745,7903]},{"content":"For more information about tracing, see <bpt id=\"p1\">[</bpt>Tracing<ept id=\"p1\">](../../../docs/framework/wcf/diagnostics/tracing/index.md)</ept> and <bpt id=\"p2\">[</bpt>Using Tracing to Troubleshoot Your Application<ept id=\"p2\">](../../../docs/framework/wcf/diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md)</ept>.","pos":[7904,8164],"source":" For more information about tracing, see [Tracing](../../../docs/framework/wcf/diagnostics/tracing/index.md) and [Using Tracing to Troubleshoot Your Application](../../../docs/framework/wcf/diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md)."},{"pos":[8169,8177],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[8181,8265],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Client<ept id=\"p1\">](../../../docs/framework/wcf/how-to-create-a-wcf-client.md)</ept>","source":"[How to: Create a Client](../../../docs/framework/wcf/how-to-create-a-wcf-client.md)"},{"pos":[8268,8410],"content":"<bpt id=\"p1\">[</bpt>How to: Access Services with a Duplex Contract<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/how-to-access-services-with-a-duplex-contract.md)</ept>","source":"[How to: Access Services with a Duplex Contract](../../../docs/framework/wcf/feature-details/how-to-access-services-with-a-duplex-contract.md)"},{"pos":[8413,8559],"content":"<bpt id=\"p1\">[</bpt>How to: Call Service Operations Asynchronously<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/how-to-call-wcf-service-operations-asynchronously.md)</ept>","source":"[How to: Call Service Operations Asynchronously](../../../docs/framework/wcf/feature-details/how-to-call-wcf-service-operations-asynchronously.md)"},{"pos":[8562,8744],"content":"<bpt id=\"p1\">[</bpt>How to: Access Services with One-Way and Request-Reply Contracts<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/how-to-access-wcf-services-with-one-way-and-request-reply-contracts.md)</ept>","source":"[How to: Access Services with One-Way and Request-Reply Contracts](../../../docs/framework/wcf/feature-details/how-to-access-wcf-services-with-one-way-and-request-reply-contracts.md)"},{"pos":[8747,8879],"content":"<bpt id=\"p1\">[</bpt>How to: Access a WSE 3.0 Service<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/how-to-access-a-wse-3-0-service-with-a-wcf-client.md)</ept>","source":"[How to: Access a WSE 3.0 Service](../../../docs/framework/wcf/feature-details/how-to-access-a-wse-3-0-service-with-a-wcf-client.md)"},{"pos":[8882,9003],"content":"<bpt id=\"p1\">[</bpt>Understanding Generated Client Code<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/understanding-generated-client-code.md)</ept>","source":"[Understanding Generated Client Code](../../../docs/framework/wcf/feature-details/understanding-generated-client-code.md)"},{"pos":[9006,9203],"content":"<bpt id=\"p1\">[</bpt>How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md)</ept>","source":"[How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer](../../../docs/framework/wcf/feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md)"},{"pos":[9206,9311],"content":"<bpt id=\"p1\">[</bpt>Specifying Client Run-Time Behavior<ept id=\"p1\">](../../../docs/framework/wcf/specifying-client-run-time-behavior.md)</ept>","source":"[Specifying Client Run-Time Behavior](../../../docs/framework/wcf/specifying-client-run-time-behavior.md)"},{"pos":[9314,9405],"content":"<bpt id=\"p1\">[</bpt>Configuring Client Behaviors<ept id=\"p1\">](../../../docs/framework/wcf/configuring-client-behaviors.md)</ept>","source":"[Configuring Client Behaviors](../../../docs/framework/wcf/configuring-client-behaviors.md)"}]}