{"content":"---\ntitle: \"Custom Composite Designers - Workflow Items Presenter | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 70055c4b-1173-47a3-be80-b5bce6f59e9a\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Custom Composite Designers - Workflow Items Presenter\nThe [System.Activities.Presentation.WorkflowItemsPresenter](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx) is a key type in the WF designer programming model that allows for the editing of a collection of contained elements. This sample shows how to build an activity designer that surfaces such an editable collection.  \n  \n This sample demonstrates:  \n  \n-   Creating a custom activity designer with a [System.Activities.Presentation.WorkflowItemsPresenter](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx).  \n  \n-   Creating an activity designer with a \"collapsed\" and \"expanded\" view.  \n  \n-   Overriding a default designer in a rehosted application.  \n  \n### To set up, build, and run the sample  \n  \n1.  Open the **UsingWorkflowItemsPresenter.sln** sample solution for C# or for VB in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n2.  Build and run the solution. A rehosted workflow designer application should open, and you can drag activities onto the canvas.  \n  \n## Sample Highlights  \n The code for this sample shows the following:  \n  \n-   The activity a designer is built for:  `Parallel`  \n  \n-   The creation of a custom activity designer with a [System.Activities.Presentation.WorkflowItemsPresenter](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx). A few things to point out:  \n  \n    -   Note the use of WPF data binding to bind to `ModelItem.Branches`. `ModelItem` is the property on `WorkflowElementDesigner` that refers to the underlying object the designer is being used for, in this case, our `Parallel`.  \n  \n    -   The [System.Activities.Design.WorkflowItemsPresenter.SpacerTemplate](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter.spacertemplate\\(v=vs.110\\).aspx) can be used to put a visual to display between the individual items in the collection.  \n  \n    -   [System.Activities.Design.WorkflowItemsPresenter.ItemsPanel](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter.itemspanel\\(v=vs.110\\).aspx) is a template that can be provided to determine the layout of the items in the collection. In this case, a horizontal stack panel is used.  \n  \n This following example code shows this.  \n  \n```xaml  \n<sad:WorkflowItemsPresenter HintText=\"Drop Activities Here\"  \n                              Items=\"{Binding Path=ModelItem.Branches}\">  \n    <sad:WorkflowItemsPresenter.SpacerTemplate>  \n      <DataTemplate>  \n        <Ellipse Width=\"10\" Height=\"10\" Fill=\"Black\"/>  \n      </DataTemplate>  \n    </sad:WorkflowItemsPresenter.SpacerTemplate>  \n    <sad:WorkflowItemsPresenter.ItemsPanel>  \n      <ItemsPanelTemplate>  \n        <StackPanel Orientation=\"Horizontal\"/>  \n      </ItemsPanelTemplate>  \n    </sad:WorkflowItemsPresenter.ItemsPanel>  \n  </sad:WorkflowItemsPresenter>  \n  \n```  \n  \n-   Perform an association of the `DesignerAttribute` to the `Parallel` type and then output the attributes reported.  \n  \n    -   First, register all of the default designers.  \n  \n The following is the code example.  \n  \n```csharp  \n// register metadata  \n(new DesignerMetadata()).Register();  \nRegisterCustomMetadata();  \n  \n```  \n  \n```vb  \n' register metadata  \nDim metadata = New DesignerMetadata()  \nmetadata.Register()  \n' register custom metadata  \nRegisterCustomMetadata()  \n  \n```  \n  \n-   -   Then, override the parallel in `RegisterCustomMetadata` method.  \n  \n The following code shows this in C# and Visual Basic.  \n  \n C#  \n  \n```csharp  \nvoid RegisterCustomMetadata()  \n{  \n      AttributeTableBuilder builder = new AttributeTableBuilder();  \n      builder.AddCustomAttributes(typeof(Parallel), new DesignerAttribute(typeof(CustomParallelDesigner)));  \n      MetadataStore.AddAttributeTable(builder.CreateTable());  \n}  \n  \n```  \n  \n```vb  \nSub RegisterCustomMetadata()  \n   Dim builder As New AttributeTableBuilder()  \n   builder.AddCustomAttributes(GetType(Parallel), New DesignerAttribute(GetType(CustomParallelDesigner)))  \n   MetadataStore.AddAttributeTable(builder.CreateTable())  \nEnd Sub  \n  \n```  \n  \n-   Finally, note the use of differing data templates and triggers to select the appropriate template based on the `IsRootDesigner` property.  \n  \n The following is the code example.  \n  \n```xaml  \n<sad:ActivityDesigner x:Class=\"Microsoft.Samples.CustomParallelDesigner\"  \n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"  \n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"  \n    xmlns:sad=\"clr-namespace:System.Activities.Design;assembly=System.Activities.Design\"  \n    xmlns:sadv=\"clr-namespace:System.Activities.Design.View;assembly=System.Activities.Design\">  \n  <sad:ActivityDesigner.Resources>  \n    <DataTemplate x:Key=\"Expanded\">  \n      <StackPanel>  \n        <TextBlock>This is the Expanded View</TextBlock>  \n        <sad:WorkflowItemsPresenter HintText=\"Drop Activities Here\"  \n                                    Items=\"{Binding Path=ModelItem.Branches}\">  \n          <sad:WorkflowItemsPresenter.SpacerTemplate>  \n            <DataTemplate>  \n              <Ellipse Width=\"10\" Height=\"10\" Fill=\"Black\"/>  \n            </DataTemplate>  \n          </sad:WorkflowItemsPresenter.SpacerTemplate>  \n          <sad:WorkflowItemsPresenter.ItemsPanel>  \n            <ItemsPanelTemplate>  \n              <StackPanel Orientation=\"Horizontal\"/>  \n            </ItemsPanelTemplate>  \n          </sad:WorkflowItemsPresenter.ItemsPanel>  \n        </sad:WorkflowItemsPresenter>  \n      </StackPanel>  \n    </DataTemplate>  \n    <DataTemplate x:Key=\"Collapsed\">  \n      <TextBlock>This is the Collapsed View</TextBlock>  \n    </DataTemplate>  \n    <Style x:Key=\"ExpandOrCollapsedStyle\" TargetType=\"{x:Type ContentPresenter}\">  \n      <Setter Property=\"ContentTemplate\" Value=\"{DynamicResource Collapsed}\"/>  \n      <Style.Triggers>  \n        <DataTrigger Binding=\"{Binding Path=IsRootDesigner}\" Value=\"true\">  \n          <Setter Property=\"ContentTemplate\" Value=\"{DynamicResource Expanded}\"/>  \n        </DataTrigger>  \n      </Style.Triggers>  \n    </Style>  \n  </sad: ActivityDesigner.Resources>  \n  <Grid>  \n    <ContentPresenter Style=\"{DynamicResource ExpandOrCollapsedStyle}\" Content=\"{Binding}\"/>  \n  </Grid>  \n</sad: ActivityDesigner>  \n  \n```  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\CustomActivities\\CustomActivityDesigners\\WorkflowItemsPresenter`  \n  \n## See Also  \n <xref:System.Activities.Presentation.WorkflowItemsPresenter>   \n [Developing Applications with the Workflow Designer](/visualstudio/workflow-designer/developing-applications-with-the-workflow-designer)","nodes":[{"pos":[12,82],"content":"Custom Composite Designers - Workflow Items Presenter | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Custom Composite Designers - Workflow Items Presenter | Microsoft Docs","pos":[0,70]}]},{"pos":[348,401],"content":"Custom Composite Designers - Workflow Items Presenter","linkify":"Custom Composite Designers - Workflow Items Presenter","nodes":[{"content":"Custom Composite Designers - Workflow Items Presenter","pos":[0,53]}]},{"content":"The <bpt id=\"p1\">[</bpt>System.Activities.Presentation.WorkflowItemsPresenter<ept id=\"p1\">](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx)</ept> is a key type in the WF designer programming model that allows for the editing of a collection of contained elements.","pos":[402,686],"source":"The [System.Activities.Presentation.WorkflowItemsPresenter](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx) is a key type in the WF designer programming model that allows for the editing of a collection of contained elements."},{"content":"This sample shows how to build an activity designer that surfaces such an editable collection.","pos":[687,781]},{"content":"This sample demonstrates:","pos":[788,813]},{"pos":[823,1029],"content":"Creating a custom activity designer with a <bpt id=\"p1\">[</bpt>System.Activities.Presentation.WorkflowItemsPresenter<ept id=\"p1\">](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx)</ept>.","source":"Creating a custom activity designer with a [System.Activities.Presentation.WorkflowItemsPresenter](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx)."},{"content":"Creating an activity designer with a \"collapsed\" and \"expanded\" view.","pos":[1039,1108]},{"content":"Overriding a default designer in a rehosted application.","pos":[1118,1174]},{"pos":[1184,1220],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[1230,1365],"content":"Open the <bpt id=\"p1\">**</bpt>UsingWorkflowItemsPresenter.sln<ept id=\"p1\">**</ept> sample solution for C# or for VB in <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","source":"Open the **UsingWorkflowItemsPresenter.sln** sample solution for C# or for VB in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"content":"Build and run the solution.","pos":[1375,1402]},{"content":"A rehosted workflow designer application should open, and you can drag activities onto the canvas.","pos":[1403,1501]},{"pos":[1510,1527],"content":"Sample Highlights","linkify":"Sample Highlights","nodes":[{"content":"Sample Highlights","pos":[0,17]}]},{"content":"The code for this sample shows the following:","pos":[1531,1576]},{"pos":[1586,1635],"content":"The activity a designer is built for:  <ph id=\"ph1\">`Parallel`</ph>","source":"The activity a designer is built for:  `Parallel`"},{"content":"The creation of a custom activity designer with a <bpt id=\"p1\">[</bpt>System.Activities.Presentation.WorkflowItemsPresenter<ept id=\"p1\">](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx)</ept>.","pos":[1645,1858],"source":"The creation of a custom activity designer with a [System.Activities.Presentation.WorkflowItemsPresenter](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter\\(v=vs.110\\).aspx)."},{"content":"A few things to point out:","pos":[1859,1885]},{"content":"Note the use of WPF data binding to bind to <ph id=\"ph1\">`ModelItem.Branches`</ph>.","pos":[1899,1964],"source":"Note the use of WPF data binding to bind to `ModelItem.Branches`."},{"content":"<ph id=\"ph1\">`ModelItem`</ph> is the property on <ph id=\"ph2\">`WorkflowElementDesigner`</ph> that refers to the underlying object the designer is being used for, in this case, our <ph id=\"ph3\">`Parallel`</ph>.","pos":[1965,2120],"source":"`ModelItem` is the property on `WorkflowElementDesigner` that refers to the underlying object the designer is being used for, in this case, our `Parallel`."},{"pos":[2134,2411],"content":"The <bpt id=\"p1\">[</bpt>System.Activities.Design.WorkflowItemsPresenter.SpacerTemplate<ept id=\"p1\">](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter.spacertemplate\\(v=vs.110\\).aspx)</ept> can be used to put a visual to display between the individual items in the collection.","source":"The [System.Activities.Design.WorkflowItemsPresenter.SpacerTemplate](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter.spacertemplate\\(v=vs.110\\).aspx) can be used to put a visual to display between the individual items in the collection."},{"content":"<bpt id=\"p1\">[</bpt>System.Activities.Design.WorkflowItemsPresenter.ItemsPanel<ept id=\"p1\">](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter.itemspanel\\(v=vs.110\\).aspx)</ept> is a template that can be provided to determine the layout of the items in the collection.","pos":[2425,2694],"source":"[System.Activities.Design.WorkflowItemsPresenter.ItemsPanel](https://msdn.microsoft.com/library/system.activities.presentation.workflowitemspresenter.itemspanel\\(v=vs.110\\).aspx) is a template that can be provided to determine the layout of the items in the collection."},{"content":"In this case, a horizontal stack panel is used.","pos":[2695,2742]},{"content":"This following example code shows this.","pos":[2749,2788]},{"pos":[3397,3510],"content":"Perform an association of the <ph id=\"ph1\">`DesignerAttribute`</ph> to the <ph id=\"ph2\">`Parallel`</ph> type and then output the attributes reported.","source":"Perform an association of the `DesignerAttribute` to the `Parallel` type and then output the attributes reported."},{"content":"First, register all of the default designers.","pos":[3524,3569]},{"content":"The following is the code example.","pos":[3576,3610]},{"pos":[3898,3961],"content":"Then, override the parallel in <ph id=\"ph1\">`RegisterCustomMetadata`</ph> method.","source":"Then, override the parallel in `RegisterCustomMetadata` method."},{"content":"The following code shows this in C# and Visual Basic.","pos":[3968,4021]},{"content":"C#","pos":[4028,4030]},{"pos":[4624,4761],"content":"Finally, note the use of differing data templates and triggers to select the appropriate template based on the <ph id=\"ph1\">`IsRootDesigner`</ph> property.","source":"Finally, note the use of differing data templates and triggers to select the appropriate template based on the `IsRootDesigner` property."},{"content":"The following is the code example.","pos":[4768,4802]},{"pos":[6805,6937],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[6991,7317],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[7318,7368]},{"pos":[7493,7501],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.Presentation.WorkflowItemsPresenter&gt;</ph>","pos":[7505,7565],"source":"<xref:System.Activities.Presentation.WorkflowItemsPresenter> "},{"content":"<bpt id=\"p1\"> [</bpt>Developing Applications with the Workflow Designer<ept id=\"p1\">](/visualstudio/workflow-designer/developing-applications-with-the-workflow-designer)</ept>","pos":[7569,7706],"source":" [Developing Applications with the Workflow Designer](/visualstudio/workflow-designer/developing-applications-with-the-workflow-designer)"}]}