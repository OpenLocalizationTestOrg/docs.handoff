{"content":"---\ntitle: \"How To: Allow Metadata Requests While Authorizing | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"allowing metadata requests while authorizing [WCF]\"\nms.assetid: 90cec34f-b619-452b-a056-8b1c0de49d05\ncaps.latest.revision: 9\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How To: Allow Metadata Requests While Authorizing\nDuring custom authorization, it may be necessary to allow a request for metadata to be processed. The following topic walks through the steps to validate such a request.  \n  \n [!INCLUDE[crabout](../../../../includes/crabout-md.md)] [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] authorization, see [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md).  \n  \n### To allow metadata requests during authorization  \n  \n1.  Create an extension of the <xref:System.ServiceModel.ServiceAuthorizationManager> class.  \n  \n2.  Override the <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> method. The method returns `true` or `false` depending on whether authorization is allowed. Information about the current procedure is found in the <xref:System.ServiceModel.OperationContext> passed as a parameter to the method.  \n  \n3.  In the override, check the contract name, namespace, and the action as shown in the following example. If the conditions are valid, then return `true.`  \n  \n4.  Use the extensibility point to employ the class. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][How to: Create a Custom Authorization Manager for a Service](../../../../docs/framework/wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md).  \n  \n## Example  \n The following example shows an override of the <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> method.  \n  \n [!code-csharp[C_HowtoCheckForMexRequestsInAuthorization#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howtocheckformexrequestsinauthorization/cs/source.cs#1)]\n [!code-vb[C_HowtoCheckForMexRequestsInAuthorization#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howtocheckformexrequestsinauthorization/vb/source.vb#1)]  \n  \n## See Also  \n <xref:System.ServiceModel.ServiceAuthorizationManager>   \n [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)   \n [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)","nodes":[{"pos":[4,448],"nodes":[{"content":"How To: Allow Metadata Requests While Authorizing | Microsoft Docs","nodes":[{"pos":[0,66],"content":"How To: Allow Metadata Requests While Authorizing | Microsoft Docs","nodes":[{"content":"How To: Allow Metadata Requests While Authorizing | Microsoft Docs","pos":[0,66]}]}],"pos":[6,75],"yaml":true}],"content":"title: \"How To: Allow Metadata Requests While Authorizing | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"allowing metadata requests while authorizing [WCF]\"\nms.assetid: 90cec34f-b619-452b-a056-8b1c0de49d05\ncaps.latest.revision: 9\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[455,504],"content":"How To: Allow Metadata Requests While Authorizing","linkify":"How To: Allow Metadata Requests While Authorizing","nodes":[{"content":"How To: Allow Metadata Requests While Authorizing","pos":[0,49]}]},{"content":"During custom authorization, it may be necessary to allow a request for metadata to be processed.","pos":[505,602]},{"content":"The following topic walks through the steps to validate such a request.","pos":[603,674]},{"pos":[681,900],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> <ph id=\"ph2\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> authorization, see <bpt id=\"p1\">[</bpt>Authorization<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)</ept>.","source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] authorization, see [Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)."},{"pos":[910,957],"content":"To allow metadata requests during authorization","linkify":"To allow metadata requests during authorization","nodes":[{"content":"To allow metadata requests during authorization","pos":[0,47]}]},{"content":"Create an extension of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceAuthorizationManager&gt;</ph> class.","pos":[967,1055],"source":"Create an extension of the <xref:System.ServiceModel.ServiceAuthorizationManager> class."},{"content":"Override the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A&gt;</ph> method.","pos":[1065,1159],"source":"Override the <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> method."},{"content":"The method returns <ph id=\"ph1\">`true`</ph> or <ph id=\"ph2\">`false`</ph> depending on whether authorization is allowed.","pos":[1160,1243],"source":" The method returns `true` or `false` depending on whether authorization is allowed."},{"content":"Information about the current procedure is found in the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationContext&gt;</ph> passed as a parameter to the method.","pos":[1244,1380],"source":" Information about the current procedure is found in the <xref:System.ServiceModel.OperationContext> passed as a parameter to the method."},{"content":"In the override, check the contract name, namespace, and the action as shown in the following example.","pos":[1390,1492]},{"content":"If the conditions are valid, then return <ph id=\"ph1\">`true.`</ph>","pos":[1493,1541],"source":" If the conditions are valid, then return `true.`"},{"content":"Use the extensibility point to employ the class.","pos":[1551,1599]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>How to: Create a Custom Authorization Manager for a Service<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md)</ept>.","pos":[1600,1825],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][How to: Create a Custom Authorization Manager for a Service](../../../../docs/framework/wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md)."},{"pos":[1834,1841],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows an override of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A&gt;</ph> method.","pos":[1845,1973],"source":"The following example shows an override of the <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> method."},{"pos":[1980,2321],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_HowtoCheckForMexRequestsInAuthorization#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howtocheckformexrequestsinauthorization/cs/source.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_HowtoCheckForMexRequestsInAuthorization#1<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howtocheckformexrequestsinauthorization/vb/source.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_HowtoCheckForMexRequestsInAuthorization#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howtocheckformexrequestsinauthorization/cs/source.cs#1)]\n [!code-vb[C_HowtoCheckForMexRequestsInAuthorization#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howtocheckformexrequestsinauthorization/vb/source.vb#1)]"},{"pos":[2330,2338],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceAuthorizationManager&gt;</ph>","pos":[2342,2396],"source":"<xref:System.ServiceModel.ServiceAuthorizationManager> "},{"content":"<bpt id=\"p1\">[</bpt>Authorization<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)</ept><ph id=\"ph1\"> </ph>","pos":[2401,2489],"source":"[Authorization](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md) "},{"content":"<bpt id=\"p1\">[</bpt>Managing Claims and Authorization with the Identity Model<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)</ept>","pos":[2493,2661],"source":"[Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)"}]}