{"content":"---\ntitle: \"How to: Configure Tracking with WorkflowServiceHost\"\nms.date: \"03/30/2017\"\nms.assetid: ed1485fe-7529-4351-bca3-8bb915260b17\n---\n# How to: Configure Tracking with WorkflowServiceHost\nThis topic explains how to configure tracking for a [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] workflow hosted in <xref:System.ServiceModel.Activities.WorkflowServiceHost>. It is configured through a Web.config file by specifying a service behavior.  \n  \n### Configure Tracking in Configuration  \n  \n1.  Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <`behavior`> element in a configuration file, as shown in the following example.  \n  \n    ```xml  \n    <behaviors>  \n       <serviceBehaviors>  \n         <behavior>  \n           <etwTracking profileName=\"Sample Tracking Profile\" />  \n         </behavior>              \n       </serviceBehaviors>  \n    <behaviors>  \n    ```  \n  \n    > [!NOTE]\n    >  The preceding configuration sample is using simplified configuration. For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).  \n  \n     The preceding configuration sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name. Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element. The tracking profile contains tracking queries that permit a tracking participant to subscribe to workflow events that are emitted when the state of a workflow instance changes at runtime. The following example shows how to create a tracking profile.  \n  \n    ```xml  \n    <system.serviceModel>  \n        <tracking>   \n         <trackingProfile name=\"Sample Tracking Profile\">  \n            <workflow activityDefinitionId=\"*\">  \n               <workflowInstanceQueries>  \n                 <workflowInstanceQuery>  \n                    <states>  \n                       <state name=\"Started\"/>  \n                       <state name=\"Completed\"/>  \n                    </states>  \n                </workflowInstanceQuery>  \n             </workflowInstanceQueries>  \n           </workflow>  \n         </trackingProfile>   \n       </tracking>  \n    </system.serviceModel>  \n    ```  \n  \n     For more information about tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md).  \n  \n     For more information about tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md).  \n  \n### Configure Tracking in Code  \n  \n1.  Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <xref:System.ServiceModel.Activities.Description.EtwTrackingBehavior> behavior in code, as shown in the following example.  \n  \n    ```csharp  \n    host.Description.Behaviors.Add(new EtwTrackingBehavior { ProfileName = \"Sample Tracking Profile\" });  \n    ```  \n  \n     The preceding code sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name. Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element as shown in the previous section.  \n  \n     For more information about tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md).  \n  \n     For more information about tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md). For an example of configuring tracking programmatically see [Configuring Tracking for a Workflow](../../../../docs/framework/windows-workflow-foundation/configuring-tracking-for-a-workflow.md).  \n  \n## See also\n\n- [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)\n- [Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)\n- [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)\n","nodes":[{"pos":[4,135],"embed":true,"restype":"x-metadata","content":"title: \"How to: Configure Tracking with WorkflowServiceHost\"\nms.date: \"03/30/2017\"\nms.assetid: ed1485fe-7529-4351-bca3-8bb915260b17","nodes":[{"content":"How to: Configure Tracking with WorkflowServiceHost","nodes":[{"pos":[0,51],"content":"How to: Configure Tracking with WorkflowServiceHost","nodes":[{"content":"How to: Configure Tracking with WorkflowServiceHost","pos":[0,51]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[142,193],"content":"How to: Configure Tracking with WorkflowServiceHost","linkify":"How to: Configure Tracking with WorkflowServiceHost","nodes":[{"content":"How to: Configure Tracking with WorkflowServiceHost","pos":[0,51]}]},{"content":"This topic explains how to configure tracking for a <ph id=\"ph1\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph> workflow hosted in <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.","pos":[194,401],"source":"This topic explains how to configure tracking for a [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] workflow hosted in <xref:System.ServiceModel.Activities.WorkflowServiceHost>."},{"content":"It is configured through a Web.config file by specifying a service behavior.","pos":[402,478]},{"pos":[488,523],"content":"Configure Tracking in Configuration","linkify":"Configure Tracking in Configuration","nodes":[{"content":"Configure Tracking in Configuration","pos":[0,35]}]},{"pos":[533,688],"content":"Add the <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> using the &lt;<ph id=\"ph2\">`behavior`</ph>&gt; element in a configuration file, as shown in the following example.","source":"Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <`behavior`> element in a configuration file, as shown in the following example."},{"pos":[943,1141],"content":"[!NOTE]\nThe preceding configuration sample is using simplified configuration. For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","leadings":["","    >  "],"nodes":[{"content":"The preceding configuration sample is using simplified configuration. For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","pos":[8,191],"nodes":[{"content":"The preceding configuration sample is using simplified configuration.","pos":[0,69]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept>.","pos":[70,183],"source":" For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md)."}]}]},{"content":"The preceding configuration sample adds a <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> and specifies a tracking profile name.","pos":[1152,1289],"source":"The preceding configuration sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name."},{"content":"Tracking profiles are created in a &lt;<ph id=\"ph1\">`trackingProfile`</ph>&gt; element within a &lt;<ph id=\"ph2\">`tracking`</ph>&gt; element.","pos":[1290,1383],"source":" Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element."},{"content":"The tracking profile contains tracking queries that permit a tracking participant to subscribe to workflow events that are emitted when the state of a workflow instance changes at runtime.","pos":[1384,1572]},{"content":"The following example shows how to create a tracking profile.","pos":[1573,1634]},{"pos":[2271,2418],"content":"For more information about tracking profiles, see <bpt id=\"p1\">[</bpt>Tracking Profiles<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)</ept>.","source":"For more information about tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)."},{"pos":[2429,2602],"content":"For more information about tracking in general, see <bpt id=\"p1\">[</bpt>Workflow Tracking and Tracing<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)</ept>.","source":"For more information about tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)."},{"pos":[2612,2638],"content":"Configure Tracking in Code","linkify":"Configure Tracking in Code","nodes":[{"content":"Configure Tracking in Code","pos":[0,26]}]},{"pos":[2648,2845],"content":"Add the <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> using the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Description.EtwTrackingBehavior&gt;</ph> behavior in code, as shown in the following example.","source":"Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <xref:System.ServiceModel.Activities.Description.EtwTrackingBehavior> behavior in code, as shown in the following example."},{"content":"The preceding code sample adds a <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> and specifies a tracking profile name.","pos":[2992,3120],"source":"The preceding code sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name."},{"content":"Tracking profiles are created in a &lt;<ph id=\"ph1\">`trackingProfile`</ph>&gt; element within a &lt;<ph id=\"ph2\">`tracking`</ph>&gt; element as shown in the previous section.","pos":[3121,3247],"source":" Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element as shown in the previous section."},{"pos":[3258,3405],"content":"For more information about tracking profiles, see <bpt id=\"p1\">[</bpt>Tracking Profiles<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)</ept>.","source":"For more information about tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)."},{"content":"For more information about tracking in general, see <bpt id=\"p1\">[</bpt>Workflow Tracking and Tracing<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)</ept>.","pos":[3416,3589],"source":"For more information about tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)."},{"content":"For an example of configuring tracking programmatically see <bpt id=\"p1\">[</bpt>Configuring Tracking for a Workflow<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/configuring-tracking-for-a-workflow.md)</ept>.","pos":[3590,3783],"source":" For an example of configuring tracking programmatically see [Configuring Tracking for a Workflow](../../../../docs/framework/windows-workflow-foundation/configuring-tracking-for-a-workflow.md)."},{"pos":[3792,3800],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3804,3932],"content":"<bpt id=\"p1\">[</bpt>Simplified Configuration for WCF Services<ept id=\"p1\">](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)</ept>","source":"[Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)"},{"pos":[3935,4023],"content":"<bpt id=\"p1\">[</bpt>Workflow Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-services.md)</ept>","source":"[Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)"},{"pos":[4026,4122],"content":"<bpt id=\"p1\">[</bpt>Tracking Profiles<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)</ept>","source":"[Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)"}]}