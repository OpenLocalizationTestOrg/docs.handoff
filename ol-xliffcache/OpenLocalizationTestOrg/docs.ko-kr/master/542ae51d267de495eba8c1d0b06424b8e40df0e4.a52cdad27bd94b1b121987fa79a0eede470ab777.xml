{"content":"---\ntitle: \"How to: Host and Run a Basic Windows Communication Foundation Service | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nhelpviewer_keywords: \n  - \"WCF services [WCF]\"\n  - \"WCF services [WCF], running\"\nms.assetid: 31774d36-923b-4e2d-812e-aa190127266f\ncaps.latest.revision: 58\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Host and Run a Basic Windows Communication Foundation Service\nThis is the third of six tasks required to create a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] application. For an overview of all six of the tasks, see the [Getting Started Tutorial](../../../docs/framework/wcf/getting-started-tutorial.md) topic.  \n  \n This topic describes how to host a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] service in a console application. This procedure consists of the following steps:  \n  \n-   Create a console application project to host the service.  \n  \n-   Create a service host for the service.  \n  \n-   Enable metadata exchange.  \n  \n-   Open the service host.  \n  \n A complete listing of the code written in this task is provided in the example following the procedure.  \n  \n### To create a new console application to host the service  \n  \n1.  Create a new Console Application project by right-clicking on the Getting Started solution, selecting, **Add**, **New Project**. In the **Add New Project** dialog on the left hand side of the dialog select **Windows** under **C#** or **VB**. In the center section of the dialog select **Console Application**. Name the project GettingStartedHost.  \n  \n2.  Set the target framework of the GettingStartedHost project to .NET Framework 4.5 by right clicking on **GettingStartedHost** in the Solution Explorer and selecting **Properties**. In the dropdown box labeled **Target Framework** select **.NET Framework 4.5**. Setting the target framework for a VB project is a little different, in the GettingStartedHost project properties dialog, click the **Compile** tab on the left-hand side of the screen, and then click the **Advanced Compile Options** button at the lower left-hand corner of the dialog. Then select **.NET Framework 4.5** in the dropdown box labeled **Target Framework**.  \n  \n     Setting the target framework will cause [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] to reload the solution, press **OK** when prompted.  \n  \n3.  Add a reference to the GettingStartedLib project to the GettingStartedHost project by right clicking on the **References** folder under the GettingStartedHost project in the solution explorer and select **Add Reference**. In the **Add Reference** dialog, select **Solution** on the left-hand side of the dialog and select GettingStartedLib in the center section of the dialog and click **Add**. This makes the types defined in GettingStartedLib available to the GettingStartedHost project.  \n  \n4.  Add a reference to System.ServiceModel to the GettingStartedHost project by right-clicking the **Reference** folder under the GettingStartedHost project in Solution Explorer and select **Add** Reference. In the **Add Reference** dialog select **Framework** on the left-hand side of the dialog. In the Search Assemblies textbox, type in `System.ServiceModel`. In the center section of the dialog select **System.ServiceModel**, click the **Add** button, and click the **Close** button. Save the solution by clicking the Save All button below the main menu.  \n  \n### To host the service  \n  \n-   Open the Program.cs or Module.vb file and enter the following code:  \n  \n    ```  \n    // program.cs  \n    using System;  \n    using System.Collections.Generic;  \n    using System.Linq;  \n    using System.Text;  \n    using System.ServiceModel;  \n    using GettingStartedLib;  \n    using System.ServiceModel.Description;   \n  \n    namespace GettingStartedHost  \n    {  \n        class Program  \n        {  \n            static void Main(string[] args)  \n            {  \n                // Step 1 Create a URI to serve as the base address.  \n                Uri baseAddress = new Uri(\"http://localhost:8000/GettingStarted/\");  \n  \n                // Step 2 Create a ServiceHost instance  \n                ServiceHost selfHost = new ServiceHost(typeof(CalculatorService), baseAddress);  \n  \n                try  \n                {  \n                    // Step 3 Add a service endpoint.  \n                    selfHost.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(), \"CalculatorService\");  \n  \n                    // Step 4 Enable metadata exchange.  \n                    ServiceMetadataBehavior smb = new ServiceMetadataBehavior();  \n                    smb.HttpGetEnabled = true;  \n                    selfHost.Description.Behaviors.Add(smb);  \n  \n                    // Step 5 Start the service.  \n                    selfHost.Open();  \n                    Console.WriteLine(\"The service is ready.\");  \n                    Console.WriteLine(\"Press <ENTER> to terminate service.\");  \n                    Console.WriteLine();  \n                    Console.ReadLine();  \n  \n                    // Close the ServiceHostBase to shutdown the service.  \n                    selfHost.Close();  \n                }  \n                catch (CommunicationException ce)  \n                {  \n                    Console.WriteLine(\"An exception occurred: {0}\", ce.Message);  \n                    selfHost.Abort();  \n                }  \n            }  \n        }  \n    }  \n  \n    ```  \n  \n    ```  \n    ‘Module1.vb  \n    Imports System  \n    Imports System.ServiceModel  \n    Imports System.ServiceModel.Description  \n    Imports GettingStartedLibVB.GettingStartedLib  \n  \n    Module Service  \n  \n        Class Program  \n            Shared Sub Main()  \n                ' Step 1 Create a URI to serve as the base address  \n                Dim baseAddress As New Uri(\"http://localhost:8000/ServiceModelSamples/Service\")  \n  \n                ' Step 2 Create a ServiceHost instance  \n                Dim selfHost As New ServiceHost(GetType(CalculatorService), baseAddress)  \n                Try  \n  \n                    ' Step 3 Add a service endpoint  \n                    ' Add a service endpoint  \n                    selfHost.AddServiceEndpoint( _  \n                        GetType(ICalculator), _  \n                        New WSHttpBinding(), _  \n                        \"CalculatorService\")  \n  \n                    ' Step 4 Enable metadata exchange.  \n                    Dim smb As New ServiceMetadataBehavior()  \n                    smb.HttpGetEnabled = True  \n                    selfHost.Description.Behaviors.Add(smb)  \n  \n                    ' Step 5 Start the service  \n                    selfHost.Open()  \n                    Console.WriteLine(\"The service is ready.\")  \n                    Console.WriteLine(\"Press <ENTER> to terminate service.\")  \n                    Console.WriteLine()  \n                    Console.ReadLine()  \n  \n                    ' Close the ServiceHostBase to shutdown the service.  \n                    selfHost.Close()  \n                Catch ce As CommunicationException  \n                    Console.WriteLine(\"An exception occurred: {0}\", ce.Message)  \n                    selfHost.Abort()  \n                End Try  \n            End Sub  \n        End Class  \n  \n    End Module  \n    ```  \n  \n    1.  Step 1 - Creates an instance of the Uri class to hold the base address of the service. Services are identified by a URL which contains a base address and an optional URI. The base address is formatted as follows:[transport]://[machine-name or domain][:optional port #]/[optional URI segment]The base address for the calculator service uses the HTTP transport, localhost, port 8000, and the URI segment \"GettingStarted\"  \n  \n    2.  Step 2 – Creates an instance of the <xref:System.ServiceModel.ServiceHost> class to host the service. The constructor takes two parameters, the type of the class that implements the service contract, and the base address of the service.  \n  \n    3.  Step 3 – Creates a <!--zz <xref:System.ServiceModel.ServiceEndpoint>--> ` System.ServiceModel.ServiceEndpoint` instance. A service endpoint is composed of an address, a binding, and a service contract. The <!--zz <xref:System.ServiceModel.ServiceEndpoint>--> ` System.ServiceModel.ServiceEndpoint`  constructor therefore takes the service contract interface type, a binding, and an address. The service contract is `ICalculator`, which you defined and implement in the service type. The binding used in this sample is <xref:System.ServiceModel.WSHttpBinding> which is a built-in binding that is used for connecting to endpoints that conform to the WS-* specifications. For more information about WCF bindings, see [WCF Bindings Overview](../../../docs/framework/wcf/bindings-overview.md). The address is appended to the base address to identify the endpoint. The address specified in this code is \"Calculator\" so the fully qualified address for the endpoint is `\"http://localhost:8000/GettingStartedService/Calculator\"` Adding a service endpoint is optional when using .NET Framework 4.0 or later. In these versions, if no endpoints are added in code or configuration, WCF adds one default endpoint for each combination of base address and contract implemented by the service. For more information about default endpoints see [Specifying an Endpoint Address](../../../docs/framework/wcf/specifying-an-endpoint-address.md). [!INCLUDE[crabout](../../../includes/crabout-md.md)] default endpoints, bindings, and behaviors, see [Simplified Configuration](../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).  \n  \n        > [!IMPORTANT]\n        >  Adding a service endpoint is optional when using .NET Framework 4 or later. In these versions, if no endpoints are added in code or configuration, WCF adds one default endpoint for each combination of base address and contract implemented by the service. For more information about default endpoints see [Specifying an Endpoint Address](../../../docs/framework/wcf/specifying-an-endpoint-address.md). [!INCLUDE[crabout](../../../includes/crabout-md.md)] default endpoints, bindings, and behaviors, see [Simplified Configuration](../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).  \n  \n    4.  Step 4 – Enable metadata exchange. Clients will use metadata exchange to generate proxies that will be used to call the service operations. To enable metadata exchange create a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> instance, set it’s <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A> property to `true`, and add the behavior to the <!--zz <xref:System.ServiceModel.ServiceHost.Behaviors%2A>  -->`System.ServiceModel.ServiceHost.Behaviors%2A` collection of the <xref:System.ServiceModel.ServiceHost> instance.  \n  \n    5.  Step 5 – Open the <xref:System.ServiceModel.ServiceHost> to listen for incoming messages. Notice the code waits for the user to hit enter. If you do not do this, the app will close immediately and the service will shut down.Also notice a  try/catch block used. After the <xref:System.ServiceModel.ServiceHost> has been instantiated, all other code is placed in a try/catch block. For more information about safely catching exceptions thrown by <xref:System.ServiceModel.ServiceHost>, see [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md)  \n  \n### To verify the service is working  \n  \n1.  Run the GettingStartedHost console application from inside [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]. When running on [!INCLUDE[wv](../../../includes/wv-md.md)] and later operating systems, the service must be run with administrator privileges. Because [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)] was run with Administrator privileges, GettingStartedHost is also run with Administrator privileges. You can also start a new command prompt running it with Administrator privileges and run service.exe within it.  \n  \n2.  Open Internet Explorer and browse to the service's debug page at `http://localhost:8000/GettingStarted/CalculatorService`.  \n  \n## Example  \n The following example includes the service contract and implementation from previous steps in the tutorial and hosts the service in a console application.  \n  \n To compile this with a command-line compiler, compile IService1.cs and Service2.cs into a class library referencing `System.ServiceModel.dll`. And compile Program.cs to a console application.  \n  \n```  \n// IService1.cs  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Linq;  \nusing System.Runtime.Serialization;  \nusing System.ServiceModel;  \nusing System.Text;  \n  \nnamespace GettingStartedLib  \n{  \n        [ServiceContract(Namespace = \"http://Microsoft.ServiceModel.Samples\")]  \n        public interface ICalculator  \n        {  \n            [OperationContract]  \n            double Add(double n1, double n2);  \n            [OperationContract]  \n            double Subtract(double n1, double n2);  \n            [OperationContract]  \n            double Multiply(double n1, double n2);  \n            [OperationContract]  \n            double Divide(double n1, double n2);  \n        }  \n}  \n  \n```  \n  \n```  \n// Service1.cs  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Linq;  \nusing System.Runtime.Serialization;  \nusing System.ServiceModel;  \nusing System.Text;  \n  \nnamespace GettingStartedLib  \n{  \n    public class CalculatorService : ICalculator  \n    {  \n        public double Add(double n1, double n2)  \n        {  \n            double result = n1 + n2;  \n            Console.WriteLine(\"Received Add({0},{1})\", n1, n2);  \n            // Code added to write output to the console window.  \n            Console.WriteLine(\"Return: {0}\", result);  \n            return result;  \n        }  \n  \n        public double Subtract(double n1, double n2)  \n        {  \n            double result = n1 - n2;  \n            Console.WriteLine(\"Received Subtract({0},{1})\", n1, n2);  \n            Console.WriteLine(\"Return: {0}\", result);  \n            return result;  \n        }  \n  \n        public double Multiply(double n1, double n2)  \n        {  \n            double result = n1 * n2;  \n            Console.WriteLine(\"Received Multiply({0},{1})\", n1, n2);  \n            Console.WriteLine(\"Return: {0}\", result);  \n            return result;  \n        }  \n  \n        public double Divide(double n1, double n2)  \n        {  \n            double result = n1 / n2;  \n            Console.WriteLine(\"Received Divide({0},{1})\", n1, n2);  \n            Console.WriteLine(\"Return: {0}\", result);  \n            return result;  \n        }  \n    }  \n}  \n  \n```  \n  \n```  \n//Program.cs  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Linq;  \nusing System.Text;  \nusing System.ServiceModel;  \nusing GettingStartedLib;  \nusing System.ServiceModel.Description;   \n  \nnamespace GettingStartedHost  \n{  \n    class Program  \n    {  \n        static void Main(string[] args)  \n        {  \n            // Step 1 of the address configuration procedure: Create a URI to serve as the base address.  \n            Uri baseAddress = new Uri(\"http://localhost:8000/ServiceModelSamples/Service\");  \n  \n            // Step 2 of the hosting procedure: Create ServiceHost  \n            ServiceHost selfHost = new ServiceHost(typeof(CalculatorService), baseAddress);  \n  \n            try  \n            {  \n                // Step 3 of the hosting procedure: Add a service endpoint.  \n                selfHost.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(), \"CalculatorService\");  \n  \n                // Step 4 of the hosting procedure: Enable metadata exchange.  \n                ServiceMetadataBehavior smb = new ServiceMetadataBehavior();  \n                smb.HttpGetEnabled = true;  \n                selfHost.Description.Behaviors.Add(smb);  \n  \n                // Step 5 of the hosting procedure: Start (and then stop) the service.  \n                selfHost.Open();  \n                Console.WriteLine(\"The service is ready.\");  \n                Console.WriteLine(\"Press <ENTER> to terminate service.\");  \n                Console.WriteLine();  \n                Console.ReadLine();  \n  \n                // Close the ServiceHostBase to shutdown the service.  \n                selfHost.Close();  \n            }  \n            catch (CommunicationException ce)  \n            {  \n                Console.WriteLine(\"An exception occurred: {0}\", ce.Message);  \n                selfHost.Abort();  \n            }  \n        }  \n    }  \n}  \n  \n```  \n  \n```  \n‘IService1.vb  \nImports System  \nImports System.ServiceModel  \n  \nNamespace GettingStartedLib  \n  \n    <ServiceContract(Namespace:=\"http://Microsoft.ServiceModel.Samples\")> _  \n    Public Interface ICalculator  \n  \n        <OperationContract()> _  \n        Function Add(ByVal n1 As Double, ByVal n2 As Double) As Double  \n        <OperationContract()> _  \n        Function Subtract(ByVal n1 As Double, ByVal n2 As Double) As Double  \n        <OperationContract()> _  \n        Function Multiply(ByVal n1 As Double, ByVal n2 As Double) As Double  \n        <OperationContract()> _  \n        Function Divide(ByVal n1 As Double, ByVal n2 As Double) As Double  \n    End Interface  \nEnd Namespace  \n```  \n  \n```  \n‘Service1.vb  \nImports System  \nImports System.ServiceModel  \n  \nNamespace GettingStartedLib  \n  \n    Public Class CalculatorService  \n        Implements ICalculator  \n  \n        Public Function Add(ByVal n1 As Double, ByVal n2 As Double) As Double Implements ICalculator.Add  \n            Dim result As Double = n1 + n2  \n            ' Code added to write output to the console window.  \n            Console.WriteLine(\"Received Add({0},{1})\", n1, n2)  \n            Console.WriteLine(\"Return: {0}\", result)  \n            Return result  \n        End Function  \n  \n        Public Function Subtract(ByVal n1 As Double, ByVal n2 As Double) As Double Implements ICalculator.Subtract  \n            Dim result As Double = n1 - n2  \n            Console.WriteLine(\"Received Subtract({0},{1})\", n1, n2)  \n            Console.WriteLine(\"Return: {0}\", result)  \n            Return result  \n  \n        End Function  \n  \n        Public Function Multiply(ByVal n1 As Double, ByVal n2 As Double) As Double Implements ICalculator.Multiply  \n            Dim result As Double = n1 * n2  \n            Console.WriteLine(\"Received Multiply({0},{1})\", n1, n2)  \n            Console.WriteLine(\"Return: {0}\", result)  \n            Return result  \n  \n        End Function  \n  \n        Public Function Divide(ByVal n1 As Double, ByVal n2 As Double) As Double Implements ICalculator.Divide  \n            Dim result As Double = n1 / n2  \n            Console.WriteLine(\"Received Divide({0},{1})\", n1, n2)  \n            Console.WriteLine(\"Return: {0}\", result)  \n            Return result  \n  \n        End Function  \n    End Class  \nEnd Namespace  \n```  \n  \n```  \n‘Module1.vb  \nImports System  \nImports System.ServiceModel  \nImports System.ServiceModel.Description  \nImports GettingStartedLibVB.GettingStartedLib  \n  \nModule Service  \n  \n    Class Program  \n        Shared Sub Main()  \n            ' Step 1 of the address configuration procedure: Create a URI to serve as the base address.  \n            Dim baseAddress As New Uri(\"http://localhost:8000/ServiceModelSamples/Service\")  \n  \n            ' Step 2 of the hosting procedure: Create ServiceHost  \n            Dim selfHost As New ServiceHost(GetType(CalculatorService), baseAddress)  \n            Try  \n  \n                ' Step 3 of the hosting procedure: Add a service endpoint.  \n                ' Add a service endpoint  \n                selfHost.AddServiceEndpoint( _  \n                    GetType(ICalculator), _  \n                    New WSHttpBinding(), _  \n                    \"CalculatorService\")  \n  \n                ' Step 4 of the hosting procedure: Enable metadata exchange.  \n                ' Enable metadata exchange  \n                Dim smb As New ServiceMetadataBehavior()  \n                smb.HttpGetEnabled = True  \n                selfHost.Description.Behaviors.Add(smb)  \n  \n                ' Step 5 of the hosting procedure: Start (and then stop) the service.  \n                selfHost.Open()  \n                Console.WriteLine(\"The service is ready.\")  \n                Console.WriteLine(\"Press <ENTER> to terminate service.\")  \n                Console.WriteLine()  \n                Console.ReadLine()  \n  \n                ' Close the ServiceHostBase to shutdown the service.  \n                selfHost.Close()  \n            Catch ce As CommunicationException  \n                Console.WriteLine(\"An exception occurred: {0}\", ce.Message)  \n                selfHost.Abort()  \n            End Try  \n        End Sub  \n    End Class  \n  \nEnd Module  \n```  \n  \n> [!NOTE]\n>  Services such as this one require permission to register HTTP addresses on the machine for listening. Administrator accounts have this permission, but non-administrator accounts must be granted permission for HTTP namespaces. [!INCLUDE[crabout](../../../includes/crabout-md.md)] how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../docs/framework/wcf/feature-details/configuring-http-and-https.md). When running under [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)], the service.exe must be run with administrator privileges.  \n  \n Now the service is running. Proceed to [How to: Create a Client](../../../docs/framework/wcf/how-to-create-a-wcf-client.md). For troubleshooting information, see [Troubleshooting the Getting Started Tutorial](../../../docs/framework/wcf/troubleshooting-the-getting-started-tutorial.md).  \n  \n## See Also  \n [Getting Started](../../../docs/framework/wcf/samples/getting-started-sample.md)   \n [Self-Host](../../../docs/framework/wcf/samples/self-host.md)","nodes":[{"pos":[4,505],"embed":true,"restype":"x-metadata","content":"title: \"How to: Host and Run a Basic Windows Communication Foundation Service | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nhelpviewer_keywords: \n  - \"WCF services [WCF]\"\n  - \"WCF services [WCF], running\"\nms.assetid: 31774d36-923b-4e2d-812e-aa190127266f\ncaps.latest.revision: 58\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"How to: Host and Run a Basic Windows Communication Foundation Service | Microsoft Docs","nodes":[{"pos":[0,86],"content":"How to: Host and Run a Basic Windows Communication Foundation Service | Microsoft Docs","nodes":[{"content":"How to: Host and Run a Basic Windows Communication Foundation Service | Microsoft Docs","pos":[0,86]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[512,581],"content":"How to: Host and Run a Basic Windows Communication Foundation Service","linkify":"How to: Host and Run a Basic Windows Communication Foundation Service","nodes":[{"content":"How to: Host and Run a Basic Windows Communication Foundation Service","pos":[0,69]}]},{"content":"This is the third of six tasks required to create a <ph id=\"ph1\">[!INCLUDE[indigo1](../../../includes/indigo1-md.md)]</ph> application.","pos":[582,699],"source":"This is the third of six tasks required to create a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] application."},{"content":"For an overview of all six of the tasks, see the <bpt id=\"p1\">[</bpt>Getting Started Tutorial<ept id=\"p1\">](../../../docs/framework/wcf/getting-started-tutorial.md)</ept> topic.","pos":[700,839],"source":" For an overview of all six of the tasks, see the [Getting Started Tutorial](../../../docs/framework/wcf/getting-started-tutorial.md) topic."},{"content":"This topic describes how to host a <ph id=\"ph1\">[!INCLUDE[indigo1](../../../includes/indigo1-md.md)]</ph> service in a console application.","pos":[846,967],"source":"This topic describes how to host a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] service in a console application."},{"content":"This procedure consists of the following steps:","pos":[968,1015]},{"content":"Create a console application project to host the service.","pos":[1025,1082]},{"content":"Create a service host for the service.","pos":[1092,1130]},{"content":"Enable metadata exchange.","pos":[1140,1165]},{"content":"Open the service host.","pos":[1175,1197]},{"content":"A complete listing of the code written in this task is provided in the example following the procedure.","pos":[1204,1307]},{"pos":[1317,1372],"content":"To create a new console application to host the service","linkify":"To create a new console application to host the service","nodes":[{"content":"To create a new console application to host the service","pos":[0,55]}]},{"content":"Create a new Console Application project by right-clicking on the Getting Started solution, selecting, <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>New Project<ept id=\"p2\">**</ept>.","pos":[1382,1510],"source":"Create a new Console Application project by right-clicking on the Getting Started solution, selecting, **Add**, **New Project**."},{"content":"In the <bpt id=\"p1\">**</bpt>Add New Project<ept id=\"p1\">**</ept> dialog on the left hand side of the dialog select <bpt id=\"p2\">**</bpt>Windows<ept id=\"p2\">**</ept> under <bpt id=\"p3\">**</bpt>C#<ept id=\"p3\">**</ept> or <bpt id=\"p4\">**</bpt>VB<ept id=\"p4\">**</ept>.","pos":[1511,1623],"source":" In the **Add New Project** dialog on the left hand side of the dialog select **Windows** under **C#** or **VB**."},{"content":"In the center section of the dialog select <bpt id=\"p1\">**</bpt>Console Application<ept id=\"p1\">**</ept>.","pos":[1624,1691],"source":" In the center section of the dialog select **Console Application**."},{"content":"Name the project GettingStartedHost.","pos":[1692,1728]},{"content":"Set the target framework of the GettingStartedHost project to .NET Framework 4.5 by right clicking on <bpt id=\"p1\">**</bpt>GettingStartedHost<ept id=\"p1\">**</ept> in the Solution Explorer and selecting <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","pos":[1738,1917],"source":"Set the target framework of the GettingStartedHost project to .NET Framework 4.5 by right clicking on **GettingStartedHost** in the Solution Explorer and selecting **Properties**."},{"content":"In the dropdown box labeled <bpt id=\"p1\">**</bpt>Target Framework<ept id=\"p1\">**</ept> select <bpt id=\"p2\">**</bpt>.NET Framework 4.5<ept id=\"p2\">**</ept>.","pos":[1918,1997],"source":" In the dropdown box labeled **Target Framework** select **.NET Framework 4.5**."},{"content":"Setting the target framework for a VB project is a little different, in the GettingStartedHost project properties dialog, click the <bpt id=\"p1\">**</bpt>Compile<ept id=\"p1\">**</ept> tab on the left-hand side of the screen, and then click the <bpt id=\"p2\">**</bpt>Advanced Compile Options<ept id=\"p2\">**</ept> button at the lower left-hand corner of the dialog.","pos":[1998,2282],"source":" Setting the target framework for a VB project is a little different, in the GettingStartedHost project properties dialog, click the **Compile** tab on the left-hand side of the screen, and then click the **Advanced Compile Options** button at the lower left-hand corner of the dialog."},{"content":"Then select <bpt id=\"p1\">**</bpt>.NET Framework 4.5<ept id=\"p1\">**</ept> in the dropdown box labeled <bpt id=\"p2\">**</bpt>Target Framework<ept id=\"p2\">**</ept>.","pos":[2283,2367],"source":" Then select **.NET Framework 4.5** in the dropdown box labeled **Target Framework**."},{"pos":[2378,2538],"content":"Setting the target framework will cause <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph> to reload the solution, press <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> when prompted.","source":"Setting the target framework will cause [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] to reload the solution, press **OK** when prompted."},{"content":"Add a reference to the GettingStartedLib project to the GettingStartedHost project by right clicking on the <bpt id=\"p1\">**</bpt>References<ept id=\"p1\">**</ept> folder under the GettingStartedHost project in the solution explorer and select <bpt id=\"p2\">**</bpt>Add Reference<ept id=\"p2\">**</ept>.","pos":[2548,2769],"source":"Add a reference to the GettingStartedLib project to the GettingStartedHost project by right clicking on the **References** folder under the GettingStartedHost project in the solution explorer and select **Add Reference**."},{"content":"In the <bpt id=\"p1\">**</bpt>Add Reference<ept id=\"p1\">**</ept> dialog, select <bpt id=\"p2\">**</bpt>Solution<ept id=\"p2\">**</ept> on the left-hand side of the dialog and select GettingStartedLib in the center section of the dialog and click <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>.","pos":[2770,2942],"source":" In the **Add Reference** dialog, select **Solution** on the left-hand side of the dialog and select GettingStartedLib in the center section of the dialog and click **Add**."},{"content":"This makes the types defined in GettingStartedLib available to the GettingStartedHost project.","pos":[2943,3037]},{"content":"Add a reference to System.ServiceModel to the GettingStartedHost project by right-clicking the <bpt id=\"p1\">**</bpt>Reference<ept id=\"p1\">**</ept> folder under the GettingStartedHost project in Solution Explorer and select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept> Reference.","pos":[3047,3250],"source":"Add a reference to System.ServiceModel to the GettingStartedHost project by right-clicking the **Reference** folder under the GettingStartedHost project in Solution Explorer and select **Add** Reference."},{"content":"In the <bpt id=\"p1\">**</bpt>Add Reference<ept id=\"p1\">**</ept> dialog select <bpt id=\"p2\">**</bpt>Framework<ept id=\"p2\">**</ept> on the left-hand side of the dialog.","pos":[3251,3340],"source":" In the **Add Reference** dialog select **Framework** on the left-hand side of the dialog."},{"content":"In the Search Assemblies textbox, type in <ph id=\"ph1\">`System.ServiceModel`</ph>.","pos":[3341,3405],"source":" In the Search Assemblies textbox, type in `System.ServiceModel`."},{"content":"In the center section of the dialog select <bpt id=\"p1\">**</bpt>System.ServiceModel<ept id=\"p1\">**</ept>, click the <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept> button, and click the <bpt id=\"p3\">**</bpt>Close<ept id=\"p3\">**</ept> button.","pos":[3406,3531],"source":" In the center section of the dialog select **System.ServiceModel**, click the **Add** button, and click the **Close** button."},{"content":"Save the solution by clicking the Save All button below the main menu.","pos":[3532,3602]},{"pos":[3612,3631],"content":"To host the service","linkify":"To host the service","nodes":[{"content":"To host the service","pos":[0,19]}]},{"content":"Open the Program.cs or Module.vb file and enter the following code:","pos":[3641,3708]},{"content":"Step 1 - Creates an instance of the Uri class to hold the base address of the service.","pos":[7482,7568]},{"content":"Services are identified by a URL which contains a base address and an optional URI.","pos":[7569,7652]},{"content":"The base address is formatted as follows:[transport]://[machine-name or domain][:optional port #]/[optional URI segment]The base address for the calculator service uses the HTTP transport, localhost, port 8000, and the URI segment \"GettingStarted\"","pos":[7653,7900]},{"content":"Step 2 – Creates an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> class to host the service.","pos":[7914,8015],"source":"Step 2 – Creates an instance of the <xref:System.ServiceModel.ServiceHost> class to host the service."},{"content":"The constructor takes two parameters, the type of the class that implements the service contract, and the base address of the service.","pos":[8016,8150]},{"content":"Step 3 – Creates a","pos":[8164,8182]},{"content":"<ph id=\"ph1\">` System.ServiceModel.ServiceEndpoint`</ph> instance.","pos":[8236,8284],"source":"` System.ServiceModel.ServiceEndpoint` instance."},{"content":"A service endpoint is composed of an address, a binding, and a service contract.","pos":[8285,8365]},{"content":"The","pos":[8366,8369]},{"content":"<ph id=\"ph1\">` System.ServiceModel.ServiceEndpoint`</ph>  constructor therefore takes the service contract interface type, a binding, and an address.","pos":[8423,8554],"source":"` System.ServiceModel.ServiceEndpoint`  constructor therefore takes the service contract interface type, a binding, and an address."},{"content":"The service contract is <ph id=\"ph1\">`ICalculator`</ph>, which you defined and implement in the service type.","pos":[8555,8646],"source":" The service contract is `ICalculator`, which you defined and implement in the service type."},{"content":"The binding used in this sample is <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> which is a built-in binding that is used for connecting to endpoints that conform to the WS-* specifications.","pos":[8647,8832],"source":" The binding used in this sample is <xref:System.ServiceModel.WSHttpBinding> which is a built-in binding that is used for connecting to endpoints that conform to the WS-* specifications."},{"content":"For more information about WCF bindings, see <bpt id=\"p1\">[</bpt>WCF Bindings Overview<ept id=\"p1\">](../../../docs/framework/wcf/bindings-overview.md)</ept>.","pos":[8833,8952],"source":" For more information about WCF bindings, see [WCF Bindings Overview](../../../docs/framework/wcf/bindings-overview.md)."},{"content":"The address is appended to the base address to identify the endpoint.","pos":[8953,9022]},{"content":"The address specified in this code is \"Calculator\" so the fully qualified address for the endpoint is <ph id=\"ph1\">`\"http://localhost:8000/GettingStartedService/Calculator\"`</ph> Adding a service endpoint is optional when using .NET Framework 4.0 or later.","pos":[9023,9261],"source":" The address specified in this code is \"Calculator\" so the fully qualified address for the endpoint is `\"http://localhost:8000/GettingStartedService/Calculator\"` Adding a service endpoint is optional when using .NET Framework 4.0 or later."},{"content":"In these versions, if no endpoints are added in code or configuration, WCF adds one default endpoint for each combination of base address and contract implemented by the service.","pos":[9262,9440]},{"content":"For more information about default endpoints see <bpt id=\"p1\">[</bpt>Specifying an Endpoint Address<ept id=\"p1\">](../../../docs/framework/wcf/specifying-an-endpoint-address.md)</ept>.","pos":[9441,9586],"source":" For more information about default endpoints see [Specifying an Endpoint Address](../../../docs/framework/wcf/specifying-an-endpoint-address.md)."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../includes/crabout-md.md)]</ph> default endpoints, bindings, and behaviors, see <bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../docs/framework/wcf/simplified-configuration.md)</ept> and <bpt id=\"p2\">[</bpt>Simplified Configuration for WCF Services<ept id=\"p2\">](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)</ept>.","pos":[9587,9902],"source":"[!INCLUDE[crabout](../../../includes/crabout-md.md)] default endpoints, bindings, and behaviors, see [Simplified Configuration](../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)."},{"pos":[9918,10658],"content":"[!IMPORTANT]\nAdding a service endpoint is optional when using .NET Framework 4 or later. In these versions, if no endpoints are added in code or configuration, WCF adds one default endpoint for each combination of base address and contract implemented by the service. For more information about default endpoints see [Specifying an Endpoint Address](../../../docs/framework/wcf/specifying-an-endpoint-address.md). [!INCLUDE[crabout](../../../includes/crabout-md.md)] default endpoints, bindings, and behaviors, see [Simplified Configuration](../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).","leadings":["","        >  "],"nodes":[{"content":"Adding a service endpoint is optional when using .NET Framework 4 or later. In these versions, if no endpoints are added in code or configuration, WCF adds one default endpoint for each combination of base address and contract implemented by the service. For more information about default endpoints see [Specifying an Endpoint Address](../../../docs/framework/wcf/specifying-an-endpoint-address.md). [!INCLUDE[crabout](../../../includes/crabout-md.md)] default endpoints, bindings, and behaviors, see [Simplified Configuration](../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).","pos":[13,729],"nodes":[{"content":"Adding a service endpoint is optional when using .NET Framework 4 or later.","pos":[0,75]},{"content":"In these versions, if no endpoints are added in code or configuration, WCF adds one default endpoint for each combination of base address and contract implemented by the service.","pos":[76,254]},{"content":"For more information about default endpoints see <bpt id=\"p1\">[</bpt>Specifying an Endpoint Address<ept id=\"p1\">](../../../docs/framework/wcf/specifying-an-endpoint-address.md)</ept>.","pos":[255,400],"source":" For more information about default endpoints see [Specifying an Endpoint Address](../../../docs/framework/wcf/specifying-an-endpoint-address.md)."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../includes/crabout-md.md)]</ph> default endpoints, bindings, and behaviors, see <bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../docs/framework/wcf/simplified-configuration.md)</ept> and <bpt id=\"p2\">[</bpt>Simplified Configuration for WCF Services<ept id=\"p2\">](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)</ept>.","pos":[401,716],"source":"[!INCLUDE[crabout](../../../includes/crabout-md.md)] default endpoints, bindings, and behaviors, see [Simplified Configuration](../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)."}]}]},{"content":"Step 4 – Enable metadata exchange.","pos":[10672,10706]},{"content":"Clients will use metadata exchange to generate proxies that will be used to call the service operations.","pos":[10707,10811]},{"content":"To enable metadata exchange create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> instance, set it’s <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A&gt;</ph> property to <ph id=\"ph3\">`true`</ph>, and add the behavior to the","pos":[10812,11059],"source":" To enable metadata exchange create a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> instance, set it’s <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A> property to `true`, and add the behavior to the "},{"content":"<ph id=\"ph1\">`System.ServiceModel.ServiceHost.Behaviors%2A`</ph> collection of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> instance.","pos":[11123,11236],"source":"`System.ServiceModel.ServiceHost.Behaviors%2A` collection of the <xref:System.ServiceModel.ServiceHost> instance."},{"content":"Step 5 – Open the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> to listen for incoming messages.","pos":[11250,11339],"source":"Step 5 – Open the <xref:System.ServiceModel.ServiceHost> to listen for incoming messages."},{"content":"Notice the code waits for the user to hit enter.","pos":[11340,11388]},{"content":"If you do not do this, the app will close immediately and the service will shut down.Also notice a  try/catch block used.","pos":[11389,11510]},{"content":"After the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> has been instantiated, all other code is placed in a try/catch block.","pos":[11511,11629],"source":" After the <xref:System.ServiceModel.ServiceHost> has been instantiated, all other code is placed in a try/catch block."},{"content":"For more information about safely catching exceptions thrown by <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph>, see <bpt id=\"p1\">[</bpt>Avoiding Problems with the Using Statement<ept id=\"p1\">](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md)</ept>","pos":[11630,11865],"source":" For more information about safely catching exceptions thrown by <xref:System.ServiceModel.ServiceHost>, see [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md)"},{"pos":[11875,11907],"content":"To verify the service is working","linkify":"To verify the service is working","nodes":[{"content":"To verify the service is working","pos":[0,32]}]},{"content":"Run the GettingStartedHost console application from inside <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>.","pos":[11917,12045],"source":"Run the GettingStartedHost console application from inside [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]."},{"content":"When running on <ph id=\"ph1\">[!INCLUDE[wv](../../../includes/wv-md.md)]</ph> and later operating systems, the service must be run with administrator privileges.","pos":[12046,12188],"source":" When running on [!INCLUDE[wv](../../../includes/wv-md.md)] and later operating systems, the service must be run with administrator privileges."},{"content":"Because <ph id=\"ph1\">[!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)]</ph> was run with Administrator privileges, GettingStartedHost is also run with Administrator privileges.","pos":[12189,12368],"source":" Because [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)] was run with Administrator privileges, GettingStartedHost is also run with Administrator privileges."},{"content":"You can also start a new command prompt running it with Administrator privileges and run service.exe within it.","pos":[12369,12480]},{"pos":[12490,12612],"content":"Open Internet Explorer and browse to the service's debug page at <ph id=\"ph1\">`http://localhost:8000/GettingStarted/CalculatorService`</ph>.","source":"Open Internet Explorer and browse to the service's debug page at `http://localhost:8000/GettingStarted/CalculatorService`."},{"pos":[12621,12628],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example includes the service contract and implementation from previous steps in the tutorial and hosts the service in a console application.","pos":[12632,12786]},{"content":"To compile this with a command-line compiler, compile IService1.cs and Service2.cs into a class library referencing <ph id=\"ph1\">`System.ServiceModel.dll`</ph>.","pos":[12793,12935],"source":"To compile this with a command-line compiler, compile IService1.cs and Service2.cs into a class library referencing `System.ServiceModel.dll`."},{"content":"And compile Program.cs to a console application.","pos":[12936,12984]},{"pos":[21294,21883],"content":"[!NOTE]\n Services such as this one require permission to register HTTP addresses on the machine for listening. Administrator accounts have this permission, but non-administrator accounts must be granted permission for HTTP namespaces. [!INCLUDE[crabout](../../../includes/crabout-md.md)] how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../docs/framework/wcf/feature-details/configuring-http-and-https.md). When running under [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)], the service.exe must be run with administrator privileges.","leadings":["","> "],"nodes":[{"content":"Services such as this one require permission to register HTTP addresses on the machine for listening. Administrator accounts have this permission, but non-administrator accounts must be granted permission for HTTP namespaces. [!INCLUDE[crabout](../../../includes/crabout-md.md)] how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../docs/framework/wcf/feature-details/configuring-http-and-https.md). When running under [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)], the service.exe must be run with administrator privileges.","pos":[9,587],"nodes":[{"content":"Services such as this one require permission to register HTTP addresses on the machine for listening.","pos":[0,101]},{"content":"Administrator accounts have this permission, but non-administrator accounts must be granted permission for HTTP namespaces.","pos":[102,225]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../includes/crabout-md.md)]</ph> how to configure namespace reservations, see <bpt id=\"p1\">[</bpt>Configuring HTTP and HTTPS<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/configuring-http-and-https.md)</ept>.","pos":[226,428],"source":"[!INCLUDE[crabout](../../../includes/crabout-md.md)] how to configure namespace reservations, see [Configuring HTTP and HTTPS](../../../docs/framework/wcf/feature-details/configuring-http-and-https.md)."},{"content":"When running under <ph id=\"ph1\">[!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)]</ph>, the service.exe must be run with administrator privileges.","pos":[429,578],"source":" When running under [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)], the service.exe must be run with administrator privileges."}]}]},{"content":"Now the service is running.","pos":[21890,21917]},{"content":"Proceed to <bpt id=\"p1\">[</bpt>How to: Create a Client<ept id=\"p1\">](../../../docs/framework/wcf/how-to-create-a-wcf-client.md)</ept>.","pos":[21918,22014],"source":" Proceed to [How to: Create a Client](../../../docs/framework/wcf/how-to-create-a-wcf-client.md)."},{"content":"For troubleshooting information, see <bpt id=\"p1\">[</bpt>Troubleshooting the Getting Started Tutorial<ept id=\"p1\">](../../../docs/framework/wcf/troubleshooting-the-getting-started-tutorial.md)</ept>.","pos":[22015,22176],"source":" For troubleshooting information, see [Troubleshooting the Getting Started Tutorial](../../../docs/framework/wcf/troubleshooting-the-getting-started-tutorial.md)."},{"pos":[22185,22193],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../docs/framework/wcf/samples/getting-started-sample.md)</ept><ph id=\"ph1\"> </ph>","pos":[22197,22278],"source":"[Getting Started](../../../docs/framework/wcf/samples/getting-started-sample.md) "},{"content":"<bpt id=\"p1\">[</bpt>Self-Host<ept id=\"p1\">](../../../docs/framework/wcf/samples/self-host.md)</ept>","pos":[22282,22343],"source":"[Self-Host](../../../docs/framework/wcf/samples/self-host.md)"}]}