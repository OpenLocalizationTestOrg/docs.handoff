{"content":"---\ntitle: \"How to: Control Service Instancing | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nms.assetid: e0b12b34-8004-443a-a46d-83a5c00f2601\ncaps.latest.revision: 19\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Control Service Instancing\nSetting the instance mode of a service enables you to specify when a <xref:System.ServiceModel.InstanceContext?displayProperty=fullName> (and its associated user-defined service object) is created. See the <xref:System.ServiceModel.InstanceContextMode> enumeration for the possible modes. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md). For working examples, see [Behaviors](../../../../docs/framework/wcf/samples/behaviors.md).  \n  \n### To control the service instance lifetime using code  \n  \n1.  Apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> to the service class.  \n  \n2.  Set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property to one of the following values: <xref:System.ServiceModel.InstanceContextMode>, <xref:System.ServiceModel.InstanceContextMode>, or <xref:System.ServiceModel.InstanceContextMode>.  \n  \n     [!code-csharp[C_ControlServiceInstancing#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#1)]\n     [!code-vb[C_ControlServiceInstancing#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#1)]  \n  \n## Example  \n The following code example sets the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property of the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to <xref:System.ServiceModel.InstanceContextMode>.  \n  \n [!code-csharp[c_ControlServiceInstancing#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#2)]\n [!code-vb[c_ControlServiceInstancing#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#2)]  \n  \n## See Also  \n <xref:System.ServiceModel.ServiceBehaviorAttribute>   \n <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A>   \n <xref:System.ServiceModel.InstanceContextMode>   \n [Service: Behaviors Samples](http://msdn.microsoft.com/en-us/4e3c6513-a7ff-4b35-8dcf-b5506c6f39a7)","nodes":[{"pos":[12,63],"content":"How to: Control Service Instancing | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Control Service Instancing | Microsoft Docs","pos":[0,51]}]},{"pos":[396,430],"content":"How to: Control Service Instancing","linkify":"How to: Control Service Instancing","nodes":[{"content":"How to: Control Service Instancing","pos":[0,34]}]},{"content":"Setting the instance mode of a service enables you to specify when a <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContext?displayProperty=fullName&gt;</ph> (and its associated user-defined service object) is created.","pos":[431,628],"source":"Setting the instance mode of a service enables you to specify when a <xref:System.ServiceModel.InstanceContext?displayProperty=fullName> (and its associated user-defined service object) is created."},{"content":"See the <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph> enumeration for the possible modes.","pos":[629,719],"source":" See the <xref:System.ServiceModel.InstanceContextMode> enumeration for the possible modes."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> behaviors, see <bpt id=\"p1\">[</bpt>Configuring and Extending the Runtime with Behaviors<ept id=\"p1\">](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)</ept>.","pos":[720,944],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)."},{"content":"For working examples, see <bpt id=\"p1\">[</bpt>Behaviors<ept id=\"p1\">](../../../../docs/framework/wcf/samples/behaviors.md)</ept>.","pos":[945,1036],"source":" For working examples, see [Behaviors](../../../../docs/framework/wcf/samples/behaviors.md)."},{"pos":[1046,1097],"content":"To control the service instance lifetime using code","linkify":"To control the service instance lifetime using code","nodes":[{"content":"To control the service instance lifetime using code","pos":[0,51]}]},{"content":"Apply the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> to the service class.","pos":[1107,1190],"source":"Apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> to the service class."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A&gt;</ph> property to one of the following values: <ph id=\"ph2\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph>, or <ph id=\"ph4\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph>.","pos":[1200,1470],"source":"Set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property to one of the following values: <xref:System.ServiceModel.InstanceContextMode>, <xref:System.ServiceModel.InstanceContextMode>, or <xref:System.ServiceModel.InstanceContextMode>."},{"pos":[1481,1766],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_ControlServiceInstancing#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#1)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_ControlServiceInstancing#1<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#1)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[C_ControlServiceInstancing#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#1)]\n [!code-vb[C_ControlServiceInstancing#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#1)]"},{"pos":[1775,1782],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example sets the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute to <ph id=\"ph3\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph>.","pos":[1786,2025],"source":"The following code example sets the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property of the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to <xref:System.ServiceModel.InstanceContextMode>."},{"pos":[2032,2313],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_ControlServiceInstancing#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#2)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_ControlServiceInstancing#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#2)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_ControlServiceInstancing#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#2)]\n [!code-vb[c_ControlServiceInstancing#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#2)]"},{"pos":[2322,2330],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph>","pos":[2334,2385],"source":"<xref:System.ServiceModel.ServiceBehaviorAttribute> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A&gt;</ph>","pos":[2390,2464],"source":" <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph>","pos":[2469,2515],"source":" <xref:System.ServiceModel.InstanceContextMode> "},{"content":"<bpt id=\"p1\"> [</bpt>Service: Behaviors Samples<ept id=\"p1\">](http://msdn.microsoft.com/en-us/4e3c6513-a7ff-4b35-8dcf-b5506c6f39a7)</ept>","pos":[2519,2618],"source":" [Service: Behaviors Samples](http://msdn.microsoft.com/en-us/4e3c6513-a7ff-4b35-8dcf-b5506c6f39a7)"}]}