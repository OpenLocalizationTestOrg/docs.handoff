{"content":"---\ntitle: \"How to: Use MetadataExchangeClient to Retrieve Metadata\"\nms.date: \"03/30/2017\"\nms.assetid: 0754e9dc-13c5-45c2-81b5-f3da466e5a87\n---\n# How to: Use MetadataExchangeClient to Retrieve Metadata\nUse the <xref:System.ServiceModel.Description.MetadataExchangeClient> class to download metadata using the WS-MetadataExchange (MEX) protocol. The retrieved metadata files are returned as a <xref:System.ServiceModel.Description.MetadataSet> object. The returned <xref:System.ServiceModel.Description.MetadataSet> object contains a collection of <xref:System.ServiceModel.Description.MetadataSection> objects, each of which contains a specific metadata dialect and an identifier. You can write the returned metadata to files or, if the returned metadata contains Web Services Description Language (WSDL) documents, you can import the metadata using the <xref:System.ServiceModel.Description.WsdlImporter>.  \n  \n The <xref:System.ServiceModel.Description.MetadataExchangeClient> constructors that take an address use the binding on the <xref:System.ServiceModel.Description.MetadataExchangeBindings> static class that matches the Uniform Resource Identifier (URI) scheme of the address. You can alternatively use the <xref:System.ServiceModel.Description.MetadataExchangeClient> constructor that allows you to explicitly specify the binding to use. The specified binding is used to resolve all metadata references.  \n  \n Just like any other Windows Communication Foundation (WCF) client, the <xref:System.ServiceModel.Description.MetadataExchangeClient> type provides a constructor for loading client endpoint configurations using the endpoint configuration name. The specified endpoint configuration must specify the <xref:System.ServiceModel.Description.IMetadataExchange> contract. The address in the endpoint configuration is not loaded, so you must use one of the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A> overloads that take an address. When you specify the metadata address using an <xref:System.ServiceModel.EndpointAddress> instance, the <xref:System.ServiceModel.Description.MetadataExchangeClient> assumes that the address points to a MEX endpoint. If you specify the metadata address as a URL, then you need to also specify which <xref:System.ServiceModel.Description.MetadataExchangeClientMode> to use, MEX or HTTP GET.  \n  \n> [!IMPORTANT]\n>  By default, the <xref:System.ServiceModel.Description.MetadataExchangeClient> resolves all references for you, including WSDL and XML Schema imports and includes. You can disable this functionality by setting the <xref:System.ServiceModel.Description.MetadataExchangeClient.ResolveMetadataReferences%2A> property to `false`. You can control the maximum number of references to resolve using the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> property. You can use this property in conjunction with the `MaxReceivedMessageSize` property on the binding to control how much metadata is retrieved.  \n  \n### To use MetadataExchangeClient to obtain metadata  \n  \n1.  Create a new <xref:System.ServiceModel.Description.MetadataExchangeClient> object by explicitly specifying a binding, an endpoint configuration name, or the address of the metadata.  \n  \n2.  Configure the <xref:System.ServiceModel.Description.MetadataExchangeClient> to suit your needs. For example, you can specify credentials to use when requesting metadata, control how metadata references are resolved, and set the <xref:System.ServiceModel.Description.MetadataExchangeClient.OperationTimeout%2A> property to control how long the metadata request has to return before it times out.  \n  \n3.  Obtain the <xref:System.ServiceModel.Description.MetadataSet> object that contains the retrieved metadata by calling one of the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A> methods. Note that you can only use the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A> overload that takes no arguments if you explicitly specified an address when constructing the <xref:System.ServiceModel.Description.MetadataExchangeClient>.  \n  \n## Example  \n The following code example shows how to use <xref:System.ServiceModel.Description.MetadataExchangeClient> to download and enumerate metadata files.  \n\n [!code-csharp[MetadataResolver#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/metadataresolver/cs/client.cs#3)]  \n\n## Compiling the Code  \n To compile this code example, you must reference the System.ServiceModel.dll assembly and import the <xref:System.ServiceModel.Description> namespace.  \n  \n## See also\n\n- <xref:System.ServiceModel.Description.MetadataResolver>\n- <xref:System.ServiceModel.Description.MetadataExchangeClient>\n- <xref:System.ServiceModel.Description.WsdlImporter>\n","nodes":[{"pos":[4,139],"embed":true,"restype":"x-metadata","content":"title: \"How to: Use MetadataExchangeClient to Retrieve Metadata\"\nms.date: \"03/30/2017\"\nms.assetid: 0754e9dc-13c5-45c2-81b5-f3da466e5a87","nodes":[{"content":"How to: Use MetadataExchangeClient to Retrieve Metadata","nodes":[{"pos":[0,55],"content":"How to: Use MetadataExchangeClient to Retrieve Metadata","nodes":[{"content":"How to: Use MetadataExchangeClient to Retrieve Metadata","pos":[0,55]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[146,201],"content":"How to: Use MetadataExchangeClient to Retrieve Metadata","linkify":"How to: Use MetadataExchangeClient to Retrieve Metadata","nodes":[{"content":"How to: Use MetadataExchangeClient to Retrieve Metadata","pos":[0,55]}]},{"content":"Use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> class to download metadata using the WS-MetadataExchange (MEX) protocol.","pos":[202,344],"source":"Use the <xref:System.ServiceModel.Description.MetadataExchangeClient> class to download metadata using the WS-MetadataExchange (MEX) protocol."},{"content":"The retrieved metadata files are returned as a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataSet&gt;</ph> object.","pos":[345,450],"source":" The retrieved metadata files are returned as a <xref:System.ServiceModel.Description.MetadataSet> object."},{"content":"The returned <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataSet&gt;</ph> object contains a collection of <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataSection&gt;</ph> objects, each of which contains a specific metadata dialect and an identifier.","pos":[451,680],"source":" The returned <xref:System.ServiceModel.Description.MetadataSet> object contains a collection of <xref:System.ServiceModel.Description.MetadataSection> objects, each of which contains a specific metadata dialect and an identifier."},{"content":"You can write the returned metadata to files or, if the returned metadata contains Web Services Description Language (WSDL) documents, you can import the metadata using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.WsdlImporter&gt;</ph>.","pos":[681,906],"source":" You can write the returned metadata to files or, if the returned metadata contains Web Services Description Language (WSDL) documents, you can import the metadata using the <xref:System.ServiceModel.Description.WsdlImporter>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> constructors that take an address use the binding on the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataExchangeBindings&gt;</ph> static class that matches the Uniform Resource Identifier (URI) scheme of the address.","pos":[913,1186],"source":"The <xref:System.ServiceModel.Description.MetadataExchangeClient> constructors that take an address use the binding on the <xref:System.ServiceModel.Description.MetadataExchangeBindings> static class that matches the Uniform Resource Identifier (URI) scheme of the address."},{"content":"You can alternatively use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> constructor that allows you to explicitly specify the binding to use.","pos":[1187,1348],"source":" You can alternatively use the <xref:System.ServiceModel.Description.MetadataExchangeClient> constructor that allows you to explicitly specify the binding to use."},{"content":"The specified binding is used to resolve all metadata references.","pos":[1349,1414]},{"content":"Just like any other Windows Communication Foundation (WCF) client, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> type provides a constructor for loading client endpoint configurations using the endpoint configuration name.","pos":[1421,1663],"source":"Just like any other Windows Communication Foundation (WCF) client, the <xref:System.ServiceModel.Description.MetadataExchangeClient> type provides a constructor for loading client endpoint configurations using the endpoint configuration name."},{"content":"The specified endpoint configuration must specify the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IMetadataExchange&gt;</ph> contract.","pos":[1664,1784],"source":" The specified endpoint configuration must specify the <xref:System.ServiceModel.Description.IMetadataExchange> contract."},{"content":"The address in the endpoint configuration is not loaded, so you must use one of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A&gt;</ph> overloads that take an address.","pos":[1785,1977],"source":" The address in the endpoint configuration is not loaded, so you must use one of the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A> overloads that take an address."},{"content":"When you specify the metadata address using an <ph id=\"ph1\">&lt;xref:System.ServiceModel.EndpointAddress&gt;</ph> instance, the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> assumes that the address points to a MEX endpoint.","pos":[1978,2194],"source":" When you specify the metadata address using an <xref:System.ServiceModel.EndpointAddress> instance, the <xref:System.ServiceModel.Description.MetadataExchangeClient> assumes that the address points to a MEX endpoint."},{"content":"If you specify the metadata address as a URL, then you need to also specify which <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClientMode&gt;</ph> to use, MEX or HTTP GET.","pos":[2195,2367],"source":" If you specify the metadata address as a URL, then you need to also specify which <xref:System.ServiceModel.Description.MetadataExchangeClientMode> to use, MEX or HTTP GET."},{"pos":[2375,3028],"content":"[!IMPORTANT]\n By default, the <xref:System.ServiceModel.Description.MetadataExchangeClient> resolves all references for you, including WSDL and XML Schema imports and includes. You can disable this functionality by setting the <xref:System.ServiceModel.Description.MetadataExchangeClient.ResolveMetadataReferences%2A> property to `false`. You can control the maximum number of references to resolve using the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> property. You can use this property in conjunction with the `MaxReceivedMessageSize` property on the binding to control how much metadata is retrieved.","leadings":["","> "],"nodes":[{"content":"By default, the <xref:System.ServiceModel.Description.MetadataExchangeClient> resolves all references for you, including WSDL and XML Schema imports and includes. You can disable this functionality by setting the <xref:System.ServiceModel.Description.MetadataExchangeClient.ResolveMetadataReferences%2A> property to `false`. You can control the maximum number of references to resolve using the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> property. You can use this property in conjunction with the `MaxReceivedMessageSize` property on the binding to control how much metadata is retrieved.","pos":[14,651],"nodes":[{"content":"By default, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> resolves all references for you, including WSDL and XML Schema imports and includes.","pos":[0,162],"source":"By default, the <xref:System.ServiceModel.Description.MetadataExchangeClient> resolves all references for you, including WSDL and XML Schema imports and includes."},{"content":"You can disable this functionality by setting the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient.ResolveMetadataReferences%2A&gt;</ph> property to <ph id=\"ph2\">`false`</ph>.","pos":[163,324],"source":" You can disable this functionality by setting the <xref:System.ServiceModel.Description.MetadataExchangeClient.ResolveMetadataReferences%2A> property to `false`."},{"content":"You can control the maximum number of references to resolve using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A&gt;</ph> property.","pos":[325,495],"source":" You can control the maximum number of references to resolve using the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> property."},{"content":"You can use this property in conjunction with the <ph id=\"ph1\">`MaxReceivedMessageSize`</ph> property on the binding to control how much metadata is retrieved.","pos":[496,637],"source":" You can use this property in conjunction with the `MaxReceivedMessageSize` property on the binding to control how much metadata is retrieved."}]}]},{"pos":[3038,3086],"content":"To use MetadataExchangeClient to obtain metadata","linkify":"To use MetadataExchangeClient to obtain metadata","nodes":[{"content":"To use MetadataExchangeClient to obtain metadata","pos":[0,48]}]},{"pos":[3096,3277],"content":"Create a new <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> object by explicitly specifying a binding, an endpoint configuration name, or the address of the metadata.","source":"Create a new <xref:System.ServiceModel.Description.MetadataExchangeClient> object by explicitly specifying a binding, an endpoint configuration name, or the address of the metadata."},{"content":"Configure the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> to suit your needs.","pos":[3287,3382],"source":"Configure the <xref:System.ServiceModel.Description.MetadataExchangeClient> to suit your needs."},{"content":"For example, you can specify credentials to use when requesting metadata, control how metadata references are resolved, and set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient.OperationTimeout%2A&gt;</ph> property to control how long the metadata request has to return before it times out.","pos":[3383,3681],"source":" For example, you can specify credentials to use when requesting metadata, control how metadata references are resolved, and set the <xref:System.ServiceModel.Description.MetadataExchangeClient.OperationTimeout%2A> property to control how long the metadata request has to return before it times out."},{"content":"Obtain the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataSet&gt;</ph> object that contains the retrieved metadata by calling one of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A&gt;</ph> methods.","pos":[3691,3904],"source":"Obtain the <xref:System.ServiceModel.Description.MetadataSet> object that contains the retrieved metadata by calling one of the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A> methods."},{"content":"Note that you can only use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A&gt;</ph> overload that takes no arguments if you explicitly specified an address when constructing the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph>.","pos":[3905,4169],"source":" Note that you can only use the <xref:System.ServiceModel.Description.MetadataExchangeClient.GetMetadata%2A> overload that takes no arguments if you explicitly specified an address when constructing the <xref:System.ServiceModel.Description.MetadataExchangeClient>."},{"pos":[4178,4185],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4189,4336],"content":"The following code example shows how to use <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExchangeClient&gt;</ph> to download and enumerate metadata files.","source":"The following code example shows how to use <xref:System.ServiceModel.Description.MetadataExchangeClient> to download and enumerate metadata files."},{"pos":[4467,4485],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"pos":[4489,4639],"content":"To compile this code example, you must reference the System.ServiceModel.dll assembly and import the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description&gt;</ph> namespace.","source":"To compile this code example, you must reference the System.ServiceModel.dll assembly and import the <xref:System.ServiceModel.Description> namespace."},{"pos":[4648,4656],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]}]}