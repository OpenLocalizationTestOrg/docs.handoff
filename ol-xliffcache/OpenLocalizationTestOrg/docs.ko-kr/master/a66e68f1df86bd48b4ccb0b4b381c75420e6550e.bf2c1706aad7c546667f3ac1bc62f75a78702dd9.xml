{"content":"---\ntitle: \"Replacing a Principal Object | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"principal objects, replacing\"\n  - \"security [.NET Framework], replacing principal objects\"\n  - \"security [.NET Framework], principals\"\nms.assetid: c323687e-b196-487b-beba-f38f9b3f961b\ncaps.latest.revision: 13\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# Replacing a Principal Object\nApplications that provide authentication services must be able to replace the **Principal** object (<xref:System.Security.Principal.IPrincipal>) for a given thread. Furthermore, the security system must help protect the ability to replace **Principal** objects because a maliciously attached, incorrect **Principal** compromises the security of your application by claiming an untrue identity or role. Therefore, applications that require the ability to replace **Principal** objects must be granted the <xref:System.Security.Permissions.SecurityPermission?displayProperty=fullName> object for principal control. (Note that this permission is not required for performing role-based security checks or for creating **Principal** objects.)  \n  \n The current **Principal** object can be replaced by performing the following tasks:  \n  \n1.  Create the replacement **Principal** object and associated **Identity** object.  \n  \n2.  Attach the new **Principal** object to the call context.  \n  \n## Example  \n The following example shows how to create a generic principal object and use it to set the principal of a thread.  \n  \n [!code-csharp[SetCurrentPrincipal#1](../../../samples/snippets/csharp/VS_Snippets_CLR/SetCurrentPrincipal/CS/program.cs#1)]\n [!code-vb[SetCurrentPrincipal#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/SetCurrentPrincipal/VB/program.vb#1)]  \n  \n## See Also  \n <xref:System.Security.Permissions.SecurityPermission?displayProperty=fullName>   \n [Principal and Identity Objects](../../../docs/standard/security/principal-and-identity-objects.md)","nodes":[{"pos":[4,558],"embed":true,"restype":"x-metadata","content":"title: \"Replacing a Principal Object | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"principal objects, replacing\"\n  - \"security [.NET Framework], replacing principal objects\"\n  - \"security [.NET Framework], principals\"\nms.assetid: c323687e-b196-487b-beba-f38f9b3f961b\ncaps.latest.revision: 13\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"","nodes":[{"content":"Replacing a Principal Object | Microsoft Docs","nodes":[{"pos":[0,45],"content":"Replacing a Principal Object | Microsoft Docs","nodes":[{"content":"Replacing a Principal Object | Microsoft Docs","pos":[0,45]}]}],"path":["title"]}],"yml":true},{"pos":[565,593],"content":"Replacing a Principal Object","linkify":"Replacing a Principal Object","nodes":[{"content":"Replacing a Principal Object","pos":[0,28]}]},{"content":"Applications that provide authentication services must be able to replace the <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object (<ph id=\"ph1\">&lt;xref:System.Security.Principal.IPrincipal&gt;</ph>) for a given thread.","pos":[594,758],"source":"Applications that provide authentication services must be able to replace the **Principal** object (<xref:System.Security.Principal.IPrincipal>) for a given thread."},{"content":"Furthermore, the security system must help protect the ability to replace <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> objects because a maliciously attached, incorrect <bpt id=\"p2\">**</bpt>Principal<ept id=\"p2\">**</ept> compromises the security of your application by claiming an untrue identity or role.","pos":[759,995],"source":" Furthermore, the security system must help protect the ability to replace **Principal** objects because a maliciously attached, incorrect **Principal** compromises the security of your application by claiming an untrue identity or role."},{"content":"Therefore, applications that require the ability to replace <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> objects must be granted the <ph id=\"ph1\">&lt;xref:System.Security.Permissions.SecurityPermission?displayProperty=fullName&gt;</ph> object for principal control.","pos":[996,1206],"source":" Therefore, applications that require the ability to replace **Principal** objects must be granted the <xref:System.Security.Permissions.SecurityPermission?displayProperty=fullName> object for principal control."},{"content":"(Note that this permission is not required for performing role-based security checks or for creating <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> objects.)","pos":[1207,1331],"source":" (Note that this permission is not required for performing role-based security checks or for creating **Principal** objects.)"},{"pos":[1338,1421],"content":"The current <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object can be replaced by performing the following tasks:","source":"The current **Principal** object can be replaced by performing the following tasks:"},{"pos":[1431,1510],"content":"Create the replacement <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object and associated <bpt id=\"p2\">**</bpt>Identity<ept id=\"p2\">**</ept> object.","source":"Create the replacement **Principal** object and associated **Identity** object."},{"pos":[1520,1576],"content":"Attach the new <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object to the call context.","source":"Attach the new **Principal** object to the call context."},{"pos":[1585,1592],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows how to create a generic principal object and use it to set the principal of a thread.","pos":[1596,1709]},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>SetCurrentPrincipal#1<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/SetCurrentPrincipal/CS/program.cs#1)</ept><ept id=\"p1\">]</ept>","pos":[1716,1839],"source":"[!code-csharp[SetCurrentPrincipal#1](../../../samples/snippets/csharp/VS_Snippets_CLR/SetCurrentPrincipal/CS/program.cs#1)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>SetCurrentPrincipal#1<ept id=\"p2\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/SetCurrentPrincipal/VB/program.vb#1)</ept><ept id=\"p1\">]</ept>","pos":[1841,1965],"source":"[!code-vb[SetCurrentPrincipal#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/SetCurrentPrincipal/VB/program.vb#1)]"},{"pos":[1974,1982],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Security.Permissions.SecurityPermission?displayProperty=fullName&gt;</ph>","pos":[1986,2064],"source":"<xref:System.Security.Permissions.SecurityPermission?displayProperty=fullName> "},{"content":"<bpt id=\"p1\">[</bpt>Principal and Identity Objects<ept id=\"p1\">](../../../docs/standard/security/principal-and-identity-objects.md)</ept>","pos":[2069,2168],"source":"[Principal and Identity Objects](../../../docs/standard/security/principal-and-identity-objects.md)"}]}