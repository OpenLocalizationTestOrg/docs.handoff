{"content":"---\ntitle: \"<localServiceSettings> element\"\nms.date: \"03/30/2017\"\nms.assetid: 0658549c-3f65-46dd-8c5c-9895441ed734\n---\n# \\<localServiceSettings> element\nSpecifies the security settings of a local service for this binding.  \n  \n \\<system.serviceModel>  \n\\<bindings>  \n\\<customBinding>  \n\\<binding>  \n\\<security>  \n  \n## Syntax  \n  \n```xml  \n<security>\n  <localServiceSettings detectReplays=\"Boolean\"\n                        inactivityTimeout=\"TimeSpan\"\n                        issuedCookieLifeTime=\"TimeSpan\"\n                        maxCachedCookies=\"Integer\"\n                        maxClockSkew=\"TimeSpan\"\n                        maxPendingSessions=\"Integer\"\n                        maxStatefulNegotiations=\"Integer\"\n                        negotiationTimeout=\"TimeSpan\"\n                        reconnectTransportOnFailure=\"Boolean\"\n                        replayCacheSize=\"Integer\"\n                        replayWindow=\"TimeSpan\"\n                        sessionKeyRenewalInterval=\"TimeSpan\"\n                        sessionKeyRolloverInterval=\"TimeSpan\"\n                        timestampValidityDuration=\"TimeSpan\" />\n</security>\n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|`detectReplays`|A Boolean value that specifies whether replay attacks against the channel are detected and dealt with automatically. The default is `false`.|  \n|`inactivityTimeout`|A positive <xref:System.TimeSpan> that specifies the duration of inactivity the channel waits before it times out. The default is \"01:00:00\".|  \n|`issuedCookieLifeTime`|A <xref:System.TimeSpan> that specifies the lifetime issued to all new security cookies. Cookies that exceed their lifetime are recycled and need to be negotiated again. The default value is \"10:00:00\".|  \n|`maxCachedCookies`|A positive integer that specifies the maximum number of cookies that can be cached. The default is 1000.|  \n|`maxClockSkew`|A <xref:System.TimeSpan> that specifies the maximum time difference between the system clocks of the two communicating parties. The default value is \"00:05:00\".<br /><br /> When this value is set to the default, the receiver accepts messages with send-time time stamps up to 5 minutes later or earlier than the time the message was received. Messages that do not pass the send-time test are rejected. This setting is used in conjunction with the `replayWindow` attribute.|  \n|`maxPendingSessions`|A positive integer that specifies the maximum number of pending security sessions that the service supports. When this limit is reached, all new clients receive SOAP faults. The default value is 1000.|  \n|`maxStatefulNegotiations`|A positive integer that specifies the number of security negotiations that can be active concurrently. Negotiation sessions in excess of the limit are queued and can only be completed when a space below the limit becomes available. The default value is 1024.|  \n|`negotiationTimeout`|A <xref:System.TimeSpan> that specifies the lifetime of the security policy used by channel. When the time expires, the channel renegotiates with the client for a new security policy. The default value is \"00:02:00\".|  \n|`reconnectTransportOnFailure`|A Boolean value that specifies whether connections using WS-Reliable messaging will attempt to reconnect after transport failures. The default is `true`, which means that infinite attempts to reconnect are attempted. The cycle is broken by the inactivity time-out, which causes the channel to throw an exception when it cannot be reconnected.|  \n|`replayCacheSize`|A positive integer that specifies the number of cached nonces used for replay detection. If this limit is exceeded, the oldest nonce is removed and a new nonce is created for the new message. The default value is 500000.|  \n|`replayWindow`|A <xref:System.TimeSpan> that specifies the duration in which individual message nonces are valid.<br /><br /> After this duration, a message sent with the same nonce as the one sent before will not be accepted. This attribute is used in conjunction with the `maxClockSkew` attribute to prevent replay attacks. An attacker could replay a message after its replay window has expired. This message, however, would fail the `maxClockSkew` test which rejects messages with send-time timestamps up to a specified time later or earlier than the time the message was received.|  \n|`sessionKeyRenewalInterval`|A <xref:System.TimeSpan> that specifies the duration after which the initiator will renew the key for the security session. The default is \"10:00:00\".|  \n|`sessionKeyRolloverInterval`|A <xref:System.TimeSpan> that specifies the time interval a previous session key is valid on incoming messages during a key renewal. The default is \"00:05:00\".<br /><br /> During key renewal, the client and server must always send messages using the most current available key. Both parties will accept incoming messages secured with the previous session key until the rollover time expires.|  \n|`timestampValidityDuration`|A positive <xref:System.TimeSpan> that specifies the duration in which a time stamp is valid. The default is \"00:15:00\".|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<security>](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md)|Specifies the security options for a custom binding.|  \n|[\\<secureConversationBootstrap>](../../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)|Specifies the default values used for initiating a secure conversation service.|  \n  \n## Remarks  \n The settings are local because they are not published as part of the security policy of the service and do not affect the client's binding.  \n  \n The following attributes of the `localServiceSecuritySettings` element can help mitigate a denial-of-service (DOS) security attack:  \n  \n-   `maxCachedCookies`: controls the maximum number of time-bounded SecurityContextTokens that are cached by the server after doing SPNEGO or SSL negotiation.  \n  \n-   `issuedCookieLifetime`: controls the lifetime of the SecurityContextTokens that are issued by the server following SPNEGO or SSL negotiation. The server caches the SecurityContextTokens for this period of time.  \n  \n-   `maxPendingSessions`: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed. This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state for each client, but never using them.  \n  \n-   `inactivityTimeout`: controls the maximum time that the service keeps a secure conversation alive without ever receiving an application message on it. This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state for each client, but never using them.  \n  \n In a secure conversation session, note that both `inactivityTimeout` and the `receiveTimeout` attributes on the binding affect session timeout. The shorter of the two determines when timeouts occur.  \n  \n## See also\n\n- <xref:System.ServiceModel.Configuration.LocalServiceSecuritySettingsElement>\n- <xref:System.ServiceModel.Configuration.SecurityElementBase.LocalServiceSettings%2A>\n- <xref:System.ServiceModel.Channels.SecurityBindingElement.LocalServiceSettings%2A>\n- <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings>\n- <xref:System.ServiceModel.Channels.CustomBinding>\n- [Bindings](../../../../../docs/framework/wcf/bindings.md)\n- [Extending Bindings](../../../../../docs/framework/wcf/extending/extending-bindings.md)\n- [Custom Bindings](../../../../../docs/framework/wcf/extending/custom-bindings.md)\n- [\\<customBinding>](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)\n- [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)\n- [Custom Binding Security](../../../../../docs/framework/wcf/samples/custom-binding-security.md)\n","nodes":[{"pos":[4,114],"embed":true,"restype":"x-metadata","content":"title: \"<localServiceSettings> element\"\nms.date: \"03/30/2017\"\nms.assetid: 0658549c-3f65-46dd-8c5c-9895441ed734","nodes":[{"content":"<localServiceSettings> element","nodes":[{"pos":[0,30],"content":"<ph id=\"ph1\">&lt;localServiceSettings&gt;</ph> element","source":"<localServiceSettings> element"}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[121,152],"content":"\\<localServiceSettings> element","linkify":"\\<localServiceSettings> element","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>localServiceSettings&gt; element","pos":[0,31],"source":"\\<localServiceSettings> element"}]},{"content":"Specifies the security settings of a local service for this binding.","pos":[153,221]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.serviceModel&gt;","pos":[228,250],"source":"\\<system.serviceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>bindings&gt;","pos":[253,264],"source":"\\<bindings>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>customBinding&gt;","pos":[267,283],"source":"\\<customBinding>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>binding&gt;","pos":[286,296],"source":"\\<binding>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>security&gt;","pos":[299,310],"source":"\\<security>"},{"pos":[319,325],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1143,1166],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[1170,1250]},{"pos":[1260,1270],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1277,1286]},{"content":"Description","pos":[1287,1298]},{"content":"A Boolean value that specifies whether replay attacks against the channel are detected and dealt with automatically.","pos":[1357,1473]},{"content":"The default is <ph id=\"ph1\">`false`</ph>.","pos":[1474,1497],"source":" The default is `false`."},{"pos":[1522,1663],"content":"A positive <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the duration of inactivity the channel waits before it times out. The default is \"01:00:00\".","source":"A positive <xref:System.TimeSpan> that specifies the duration of inactivity the channel waits before it times out. The default is \"01:00:00\"."},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the lifetime issued to all new security cookies.","pos":[1691,1779],"source":"A <xref:System.TimeSpan> that specifies the lifetime issued to all new security cookies."},{"content":"Cookies that exceed their lifetime are recycled and need to be negotiated again.","pos":[1780,1860]},{"content":"The default value is \"10:00:00\".","pos":[1861,1893]},{"content":"A positive integer that specifies the maximum number of cookies that can be cached.","pos":[1917,2000]},{"content":"The default is 1000.","pos":[2001,2021]},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the maximum time difference between the system clocks of the two communicating parties.","pos":[2041,2168],"source":"A <xref:System.TimeSpan> that specifies the maximum time difference between the system clocks of the two communicating parties."},{"content":"The default value is \"00:05:00\".","pos":[2169,2201]},{"content":"When this value is set to the default, the receiver accepts messages with send-time time stamps up to 5 minutes later or earlier than the time the message was received.","pos":[2214,2382]},{"content":"Messages that do not pass the send-time test are rejected.","pos":[2383,2441]},{"content":"This setting is used in conjunction with the <ph id=\"ph1\">`replayWindow`</ph> attribute.","pos":[2442,2512],"source":" This setting is used in conjunction with the `replayWindow` attribute."},{"content":"A positive integer that specifies the maximum number of pending security sessions that the service supports.","pos":[2538,2646]},{"content":"When this limit is reached, all new clients receive SOAP faults.","pos":[2647,2711]},{"content":"The default value is 1000.","pos":[2712,2738]},{"content":"A positive integer that specifies the number of security negotiations that can be active concurrently.","pos":[2769,2871]},{"content":"Negotiation sessions in excess of the limit are queued and can only be completed when a space below the limit becomes available.","pos":[2872,3000]},{"content":"The default value is 1024.","pos":[3001,3027]},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the lifetime of the security policy used by channel.","pos":[3053,3145],"source":"A <xref:System.TimeSpan> that specifies the lifetime of the security policy used by channel."},{"content":"When the time expires, the channel renegotiates with the client for a new security policy.","pos":[3146,3236]},{"content":"The default value is \"00:02:00\".","pos":[3237,3269]},{"content":"A Boolean value that specifies whether connections using WS-Reliable messaging will attempt to reconnect after transport failures.","pos":[3304,3434]},{"content":"The default is <ph id=\"ph1\">`true`</ph>, which means that infinite attempts to reconnect are attempted.","pos":[3435,3520],"source":" The default is `true`, which means that infinite attempts to reconnect are attempted."},{"content":"The cycle is broken by the inactivity time-out, which causes the channel to throw an exception when it cannot be reconnected.","pos":[3521,3646]},{"content":"A positive integer that specifies the number of cached nonces used for replay detection.","pos":[3669,3757]},{"content":"If this limit is exceeded, the oldest nonce is removed and a new nonce is created for the new message.","pos":[3758,3860]},{"content":"The default value is 500000.","pos":[3861,3889]},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the duration in which individual message nonces are valid.","pos":[3909,4007],"source":"A <xref:System.TimeSpan> that specifies the duration in which individual message nonces are valid."},{"content":"After this duration, a message sent with the same nonce as the one sent before will not be accepted.","pos":[4020,4120]},{"content":"This attribute is used in conjunction with the <ph id=\"ph1\">`maxClockSkew`</ph> attribute to prevent replay attacks.","pos":[4121,4219],"source":" This attribute is used in conjunction with the `maxClockSkew` attribute to prevent replay attacks."},{"content":"An attacker could replay a message after its replay window has expired.","pos":[4220,4291]},{"content":"This message, however, would fail the <ph id=\"ph1\">`maxClockSkew`</ph> test which rejects messages with send-time timestamps up to a specified time later or earlier than the time the message was received.","pos":[4292,4478],"source":" This message, however, would fail the `maxClockSkew` test which rejects messages with send-time timestamps up to a specified time later or earlier than the time the message was received."},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the duration after which the initiator will renew the key for the security session.","pos":[4511,4634],"source":"A <xref:System.TimeSpan> that specifies the duration after which the initiator will renew the key for the security session."},{"content":"The default is \"10:00:00\".","pos":[4635,4661]},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the time interval a previous session key is valid on incoming messages during a key renewal.","pos":[4695,4827],"source":"A <xref:System.TimeSpan> that specifies the time interval a previous session key is valid on incoming messages during a key renewal."},{"content":"The default is \"00:05:00\".","pos":[4828,4854]},{"content":"During key renewal, the client and server must always send messages using the most current available key.","pos":[4867,4972]},{"content":"Both parties will accept incoming messages secured with the previous session key until the rollover time expires.","pos":[4973,5086]},{"content":"A positive <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the duration in which a time stamp is valid.","pos":[5119,5212],"source":"A positive <xref:System.TimeSpan> that specifies the duration in which a time stamp is valid."},{"content":"The default is \"00:15:00\".","pos":[5213,5239]},{"pos":[5250,5264],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[5268,5273]},{"pos":[5283,5298],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[5305,5312]},{"content":"Description","pos":[5313,5324]},{"pos":[5365,5469],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>security&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md)</ept>","source":"[\\<security>](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md)"},{"content":"Specifies the security options for a custom binding.","pos":[5470,5522]},{"pos":[5527,5652],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>secureConversationBootstrap&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)</ept>","source":"[\\<secureConversationBootstrap>](../../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)"},{"content":"Specifies the default values used for initiating a secure conversation service.","pos":[5653,5732]},{"pos":[5742,5749],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The settings are local because they are not published as part of the security policy of the service and do not affect the client's binding.","pos":[5753,5892]},{"pos":[5899,6030],"content":"The following attributes of the <ph id=\"ph1\">`localServiceSecuritySettings`</ph> element can help mitigate a denial-of-service (DOS) security attack:","source":"The following attributes of the `localServiceSecuritySettings` element can help mitigate a denial-of-service (DOS) security attack:"},{"pos":[6040,6194],"content":"<ph id=\"ph1\">`maxCachedCookies`</ph>: controls the maximum number of time-bounded SecurityContextTokens that are cached by the server after doing SPNEGO or SSL negotiation.","source":"`maxCachedCookies`: controls the maximum number of time-bounded SecurityContextTokens that are cached by the server after doing SPNEGO or SSL negotiation."},{"content":"<ph id=\"ph1\">`issuedCookieLifetime`</ph>: controls the lifetime of the SecurityContextTokens that are issued by the server following SPNEGO or SSL negotiation.","pos":[6204,6345],"source":"`issuedCookieLifetime`: controls the lifetime of the SecurityContextTokens that are issued by the server following SPNEGO or SSL negotiation."},{"content":"The server caches the SecurityContextTokens for this period of time.","pos":[6346,6414]},{"content":"<ph id=\"ph1\">`maxPendingSessions`</ph>: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed.","pos":[6424,6591],"source":"`maxPendingSessions`: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed."},{"content":"This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state for each client, but never using them.","pos":[6592,6759]},{"content":"<ph id=\"ph1\">`inactivityTimeout`</ph>: controls the maximum time that the service keeps a secure conversation alive without ever receiving an application message on it.","pos":[6769,6919],"source":"`inactivityTimeout`: controls the maximum time that the service keeps a secure conversation alive without ever receiving an application message on it."},{"content":"This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state for each client, but never using them.","pos":[6920,7087]},{"content":"In a secure conversation session, note that both <ph id=\"ph1\">`inactivityTimeout`</ph> and the <ph id=\"ph2\">`receiveTimeout`</ph> attributes on the binding affect session timeout.","pos":[7094,7237],"source":"In a secure conversation session, note that both `inactivityTimeout` and the `receiveTimeout` attributes on the binding affect session timeout."},{"content":"The shorter of the two determines when timeouts occur.","pos":[7238,7292]},{"pos":[7301,7309],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[7683,7740],"content":"<bpt id=\"p1\">[</bpt>Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/bindings.md)</ept>","source":"[Bindings](../../../../../docs/framework/wcf/bindings.md)"},{"pos":[7743,7830],"content":"<bpt id=\"p1\">[</bpt>Extending Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/extending-bindings.md)</ept>","source":"[Extending Bindings](../../../../../docs/framework/wcf/extending/extending-bindings.md)"},{"pos":[7833,7914],"content":"<bpt id=\"p1\">[</bpt>Custom Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/custom-bindings.md)</ept>","source":"[Custom Bindings](../../../../../docs/framework/wcf/extending/custom-bindings.md)"},{"pos":[7917,8014],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>customBinding&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)</ept>","source":"[\\<customBinding>](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)"},{"pos":[8017,8201],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>","source":"[How to: Create a Custom Binding Using the SecurityBindingElement](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)"},{"pos":[8204,8299],"content":"<bpt id=\"p1\">[</bpt>Custom Binding Security<ept id=\"p1\">](../../../../../docs/framework/wcf/samples/custom-binding-security.md)</ept>","source":"[Custom Binding Security](../../../../../docs/framework/wcf/samples/custom-binding-security.md)"}]}