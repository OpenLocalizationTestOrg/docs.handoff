{"content":"---\ntitle: \"Workflow Discovery Sample\"\nms.date: \"03/30/2017\"\nms.assetid: 82cc43f1-3c8f-4771-ac19-a75ac936e2c3\n---\n# Workflow Discovery Sample\nThis sample demonstrates how to make a workflow service discoverable and how to author a custom code activity that searches for a particular service.  \n  \n## Demonstrates  \n Discovery Find Activity and Workflow Usage  \n  \n## Discussion  \n In the first part of the sample, a workflow service is made discoverable using configuration. Configuration can also be used to apply the service appropriately with custom metadata (such as scopes). On the client, the sample uses a custom code activity, which uses Discovery to search for a service matching a particular contract. The code activity outputs a URI, which is later used by a send activity.  \n  \n#### To set up, build, and run the sample  \n  \n1.  This sample uses HTTP endpoints, which must have proper URL ACLs to run (see [Configuring HTTP and HTTPS](https://go.microsoft.com/fwlink/?LinkId=70353) for details). Executing the following command at an elevated command prompt should add the appropriate ACLs. Substitute your Domain and Username for the following arguments if your shell does not understand the variable format.  \n  \n     **netsh http add urlacl url=http://+:8000/ user=%DOMAIN%\\\\%UserName%**  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Discovery\\WorkflowDiscovery`\n","nodes":[{"pos":[4,109],"embed":true,"restype":"x-metadata","content":"title: \"Workflow Discovery Sample\"\nms.date: \"03/30/2017\"\nms.assetid: 82cc43f1-3c8f-4771-ac19-a75ac936e2c3","nodes":[{"content":"Workflow Discovery Sample","nodes":[{"pos":[0,25],"content":"Workflow Discovery Sample","nodes":[{"content":"Workflow Discovery Sample","pos":[0,25]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[116,141],"content":"Workflow Discovery Sample","linkify":"Workflow Discovery Sample","nodes":[{"content":"Workflow Discovery Sample","pos":[0,25]}]},{"content":"This sample demonstrates how to make a workflow service discoverable and how to author a custom code activity that searches for a particular service.","pos":[142,291]},{"pos":[300,312],"content":"Demonstrates","linkify":"Demonstrates","nodes":[{"content":"Demonstrates","pos":[0,12]}]},{"content":"Discovery Find Activity and Workflow Usage","pos":[316,358]},{"pos":[367,377],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"In the first part of the sample, a workflow service is made discoverable using configuration.","pos":[381,474]},{"content":"Configuration can also be used to apply the service appropriately with custom metadata (such as scopes).","pos":[475,579]},{"content":"On the client, the sample uses a custom code activity, which uses Discovery to search for a service matching a particular contract.","pos":[580,711]},{"content":"The code activity outputs a URI, which is later used by a send activity.","pos":[712,784]},{"pos":[795,831],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"content":"This sample uses HTTP endpoints, which must have proper URL ACLs to run (see <bpt id=\"p1\">[</bpt>Configuring HTTP and HTTPS<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=70353)</ept> for details).","pos":[841,1007],"source":"This sample uses HTTP endpoints, which must have proper URL ACLs to run (see [Configuring HTTP and HTTPS](https://go.microsoft.com/fwlink/?LinkId=70353) for details)."},{"content":"Executing the following command at an elevated command prompt should add the appropriate ACLs.","pos":[1008,1102]},{"content":"Substitute your Domain and Username for the following arguments if your shell does not understand the variable format.","pos":[1103,1221]},{"pos":[1232,1302],"content":"<bpt id=\"p1\">**</bpt>netsh http add urlacl url=<ph id=\"ph1\">http://+:8000/</ph> user=%DOMAIN%<ph id=\"ph2\">\\\\</ph>%UserName%<ept id=\"p1\">**</ept>","source":"**netsh http add urlacl url=http://+:8000/ user=%DOMAIN%\\\\%UserName%**"},{"pos":[1310,1442],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1496,1806],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[1807,1857]}]}