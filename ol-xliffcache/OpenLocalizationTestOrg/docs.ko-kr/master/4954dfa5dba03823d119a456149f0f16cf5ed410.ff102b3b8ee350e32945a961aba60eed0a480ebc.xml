{"content":"---\ntitle: \"Workflow Activity Authoring Using the CodeActivity Class\"\nms.date: \"03/30/2017\"\nms.assetid: cfe315c1-f86d-43ec-b9ce-2f8c469b1106\n---\n# Workflow Activity Authoring Using the CodeActivity Class\nActivities created by inheriting from <xref:System.Activities.CodeActivity> can implement basic imperative behavior by overriding the <xref:System.Activities.CodeActivity.Execute%2A> method.\n\n## Using CodeActivityContext\n Features of the workflow runtime can be accessed from within the <xref:System.Activities.CodeActivity.Execute%2A> method by using members of the `context` parameter, of type <xref:System.Activities.CodeActivityContext>. The features available through <xref:System.Activities.CodeActivityContext> include the following:\n\n-   Getting and setting the values of variables and arguments.\n\n-   Custom tracking features using <xref:System.Activities.CodeActivityContext.Track%2A>.\n\n-   Access to the activity’s execution properties using <xref:System.Activities.CodeActivityContext.GetProperty%2A>.\n\n#### To create a custom activity that inherits from CodeActivity\n\n1.  Open Visual Studio 2010.\n\n2.  Select **File**, **New**, and then **Project**. Select **Workflow 4.0** under **Visual C#** in the **Project Types** window, and select the **v2010** node. Select **Activity Library** in the **Templates** window. Name the new project HelloActivity.\n\n3.  Right-click Activity1.xaml in the HelloActivity project and select **Delete**.\n\n4.  Right-click the HelloActivity project and select **Add** , and then **Class**. Name the new class HelloActivity.cs.\n\n5.  In the HelloActivity.cs file, add the following `using` directives.\n\n    ```csharp\n    using System.Activities;\n    using System.Activities.Statements;\n    ```\n\n6.  Make the new class inherit from <xref:System.Activities.CodeActivity> by adding a base class to the class declaration.\n\n    ```csharp\n    class HelloActivity : CodeActivity\n    ```\n\n7.  Add functionality to the class by adding an <xref:System.Activities.CodeActivity.Execute%2A> method.\n\n    ```csharp\n    protected override void Execute(CodeActivityContext context)\n    {\n        Console.WriteLine(\"Hello World!\");\n    }\n    ```\n\n8.  Use the <xref:System.Activities.CodeActivityContext> to create a tracking record.\n\n    ```csharp\n    protected override void Execute(CodeActivityContext context)\n    {\n        Console.WriteLine(\"Hello World!\");\n        CustomTrackingRecord record = new CustomTrackingRecord(\"MyRecord\");\n        record.Data.Add(new KeyValuePair<String, Object>(\"ExecutionTime\", DateTime.Now));\n        context.Track(record);\n    }\n    ```\n","nodes":[{"pos":[4,140],"embed":true,"restype":"x-metadata","content":"title: \"Workflow Activity Authoring Using the CodeActivity Class\"\nms.date: \"03/30/2017\"\nms.assetid: cfe315c1-f86d-43ec-b9ce-2f8c469b1106","nodes":[{"content":"Workflow Activity Authoring Using the CodeActivity Class","nodes":[{"pos":[0,56],"content":"Workflow Activity Authoring Using the CodeActivity Class","nodes":[{"content":"Workflow Activity Authoring Using the CodeActivity Class","pos":[0,56]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[147,203],"content":"Workflow Activity Authoring Using the CodeActivity Class","linkify":"Workflow Activity Authoring Using the CodeActivity Class","nodes":[{"content":"Workflow Activity Authoring Using the CodeActivity Class","pos":[0,56]}]},{"pos":[204,394],"content":"Activities created by inheriting from <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivity&gt;</ph> can implement basic imperative behavior by overriding the <ph id=\"ph2\">&lt;xref:System.Activities.CodeActivity.Execute%2A&gt;</ph> method.","source":"Activities created by inheriting from <xref:System.Activities.CodeActivity> can implement basic imperative behavior by overriding the <xref:System.Activities.CodeActivity.Execute%2A> method."},{"pos":[399,424],"content":"Using CodeActivityContext","linkify":"Using CodeActivityContext","nodes":[{"content":"Using CodeActivityContext","pos":[0,25]}]},{"content":"Features of the workflow runtime can be accessed from within the <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivity.Execute%2A&gt;</ph> method by using members of the <ph id=\"ph2\">`context`</ph> parameter, of type <ph id=\"ph3\">&lt;xref:System.Activities.CodeActivityContext&gt;</ph>.","pos":[426,645],"source":"Features of the workflow runtime can be accessed from within the <xref:System.Activities.CodeActivity.Execute%2A> method by using members of the `context` parameter, of type <xref:System.Activities.CodeActivityContext>."},{"content":"The features available through <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivityContext&gt;</ph> include the following:","pos":[646,744],"source":" The features available through <xref:System.Activities.CodeActivityContext> include the following:"},{"content":"Getting and setting the values of variables and arguments.","pos":[750,808]},{"pos":[814,899],"content":"Custom tracking features using <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivityContext.Track%2A&gt;</ph>.","source":"Custom tracking features using <xref:System.Activities.CodeActivityContext.Track%2A>."},{"pos":[905,1017],"content":"Access to the activity’s execution properties using <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivityContext.GetProperty%2A&gt;</ph>.","source":"Access to the activity’s execution properties using <xref:System.Activities.CodeActivityContext.GetProperty%2A>."},{"pos":[1024,1083],"content":"To create a custom activity that inherits from CodeActivity","linkify":"To create a custom activity that inherits from CodeActivity","nodes":[{"content":"To create a custom activity that inherits from CodeActivity","pos":[0,59]}]},{"content":"Open Visual Studio 2010.","pos":[1089,1113]},{"content":"Select <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, and then <bpt id=\"p3\">**</bpt>Project<ept id=\"p3\">**</ept>.","pos":[1119,1166],"source":"Select **File**, **New**, and then **Project**."},{"content":"Select <bpt id=\"p1\">**</bpt>Workflow 4.0<ept id=\"p1\">**</ept> under <bpt id=\"p2\">**</bpt>Visual C#<ept id=\"p2\">**</ept> in the <bpt id=\"p3\">**</bpt>Project Types<ept id=\"p3\">**</ept> window, and select the <bpt id=\"p4\">**</bpt>v2010<ept id=\"p4\">**</ept> node.","pos":[1167,1274],"source":" Select **Workflow 4.0** under **Visual C#** in the **Project Types** window, and select the **v2010** node."},{"content":"Select <bpt id=\"p1\">**</bpt>Activity Library<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>Templates<ept id=\"p2\">**</ept> window.","pos":[1275,1331],"source":" Select **Activity Library** in the **Templates** window."},{"content":"Name the new project HelloActivity.","pos":[1332,1367]},{"pos":[1373,1451],"content":"Right-click Activity1.xaml in the HelloActivity project and select <bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept>.","source":"Right-click Activity1.xaml in the HelloActivity project and select **Delete**."},{"content":"Right-click the HelloActivity project and select <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> , and then <bpt id=\"p2\">**</bpt>Class<ept id=\"p2\">**</ept>.","pos":[1457,1535],"source":"Right-click the HelloActivity project and select **Add** , and then **Class**."},{"content":"Name the new class HelloActivity.cs.","pos":[1536,1572]},{"pos":[1578,1645],"content":"In the HelloActivity.cs file, add the following <ph id=\"ph1\">`using`</ph> directives.","source":"In the HelloActivity.cs file, add the following `using` directives."},{"pos":[1743,1861],"content":"Make the new class inherit from <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivity&gt;</ph> by adding a base class to the class declaration.","source":"Make the new class inherit from <xref:System.Activities.CodeActivity> by adding a base class to the class declaration."},{"pos":[1929,2029],"content":"Add functionality to the class by adding an <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivity.Execute%2A&gt;</ph> method.","source":"Add functionality to the class by adding an <xref:System.Activities.CodeActivity.Execute%2A> method."},{"pos":[2178,2259],"content":"Use the <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivityContext&gt;</ph> to create a tracking record.","source":"Use the <xref:System.Activities.CodeActivityContext> to create a tracking record."}]}