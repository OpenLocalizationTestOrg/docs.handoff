{"content":"---\ntitle: \"How to: Encrypt XML Elements with Asymmetric Keys | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"cryptography [.NET Framework], asymmetric keys\"\n  - \"AES algorithm\"\n  - \"System.Security.Cryptography.RSACryptoServiceProvider class\"\n  - \"asymmetric keys [.NET Framework]\"\n  - \"System.Security.Cryptography.EncryptedXml class\"\n  - \"XML encryption\"\n  - \"key containers\"\n  - \"Advanced Encryption Standard algorithm\"\n  - \"Rijndael\"\n  - \"encryption [.NET Framework], asymmetric keys\"\nms.assetid: a164ba4f-e596-4bbe-a9ca-f214fe89ed48\ncaps.latest.revision: 11\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# How to: Encrypt XML Elements with Asymmetric Keys\nYou can use the classes in the <xref:System.Security.Cryptography.Xml> namespace to encrypt an element within an XML document.  XML Encryption is a standard way to exchange or store encrypted XML data, without worrying about the data being easily read.  For more information about the XML Encryption standard, see the World Wide Web Consortium (W3C) specification for XML Encryption located at http://www.w3.org/TR/xmldsig-core/.  \n  \n You can use XML Encryption to replace any XML element or document with an <`EncryptedData`> element that contains the encrypted XML data.  The <`EncryptedData`> element can also contain sub elements that include information about the keys and processes used during encryption.  XML Encryption allows a document to contain multiple encrypted elements and allows an element to be encrypted multiple times.  The code example in this procedure shows how to create an <`EncryptedData`> element along with several other sub elements that you can use later during decryption.  \n  \n This example encrypts an XML element using two keys.  It generates an RSA public/private key pair and saves the key pair to a secure key container.  The example then creates a separate session key using the Advanced Encryption Standard (AES) algorithm, also called the Rijndael algorithm.  The example uses the AES session key to encrypt the XML document and then uses the RSA public key to encrypt the AES session key.  Finally, the example saves the encrypted AES session key and the encrypted XML data to the XML document within a new <`EncryptedData`> element.  \n  \n To decrypt the XML element, you retrieve the RSA private key from the key container, use it to decrypt the session key, and then use the session key to decrypt the document.  For more information about how to decrypt an XML element that was encrypted using this procedure, see [How to: Decrypt XML Elements with Asymmetric Keys](../../../docs/standard/security/how-to-decrypt-xml-elements-with-asymmetric-keys.md).  \n  \n This example is appropriate for situations where multiple applications need to share encrypted data or where an application needs to save encrypted data between the times that it runs.  \n  \n### To encrypt an XML element with an asymmetric key  \n  \n1.  Create a <xref:System.Security.Cryptography.CspParameters> object and specify the name of the key container.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#2](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#2)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#2)]  \n  \n2.  Generate a symmetric key using the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class.  The key is automatically saved to the key container when you pass the <xref:System.Security.Cryptography.CspParameters> object to the constructor of the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class.  This key will be used to encrypt the AES session key and can be retrieved later to decrypt it.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#3](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#3)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#3)]  \n  \n3.  Create an <xref:System.Xml.XmlDocument> object by loading an XML file from disk.  The <xref:System.Xml.XmlDocument> object contains the XML element to encrypt.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#4](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#4)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#4)]  \n  \n4.  Find the specified element in the <xref:System.Xml.XmlDocument> object and create a new <xref:System.Xml.XmlElement> object to represent the element you want to encrypt. In this example, the `\"creditcard\"` element is encrypted.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#5](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#5)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#5)]  \n  \n5.  Create a new session key using the <xref:System.Security.Cryptography.RijndaelManaged> class.  This key will encrypt the XML element, and then be encrypted itself and placed in the XML document.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#6](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#6)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#6)]  \n  \n6.  Create a new instance of the <xref:System.Security.Cryptography.Xml.EncryptedXml> class and use it to encrypt the specified element using the session key.  The <xref:System.Security.Cryptography.Xml.EncryptedXml.EncryptData%2A> method returns the encrypted element as an array of encrypted bytes.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#7](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#7)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#7)]  \n  \n7.  Construct an <xref:System.Security.Cryptography.Xml.EncryptedData> object and populate it with the URL identifier of the encrypted XML element.  This URL identifier lets a decrypting party know that the XML contains an encrypted element.  You can use the <xref:System.Security.Cryptography.Xml.EncryptedXml.XmlEncElementUrl> field to specify the URL identifier.  The plaintext XML element will be replaced by an <`EncryptedData`> element encapsulated by this <xref:System.Security.Cryptography.Xml.EncryptedData> object.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#8](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#8)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#8)]  \n  \n8.  Create an <xref:System.Security.Cryptography.Xml.EncryptionMethod> object that is initialized to the URL identifier of the cryptographic algorithm used to generate the session key.  Pass the <xref:System.Security.Cryptography.Xml.EncryptionMethod> object to the <xref:System.Security.Cryptography.Xml.EncryptedType.EncryptionMethod%2A> property.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#9](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#9)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#9)]  \n  \n9. Create an <xref:System.Security.Cryptography.Xml.EncryptedKey> object to contain the encrypted session key.  Encrypt the session key, add it to the <xref:System.Security.Cryptography.Xml.EncryptedKey> object, and enter a session key name and key identifier URL.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#10](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#10)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#10)]  \n  \n10. Create a new <xref:System.Security.Cryptography.Xml.DataReference> object that maps the encrypted data to a particular session key.  This optional step allows you to easily specify that multiple parts of an XML document were encrypted by a single key.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#11](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#11)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#11)]  \n  \n11. Add the encrypted key to the <xref:System.Security.Cryptography.Xml.EncryptedData> object.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#12](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#12)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#12)]  \n  \n12. Create a new <xref:System.Security.Cryptography.Xml.KeyInfo> object to specify the name of the RSA key.  Add it to the <xref:System.Security.Cryptography.Xml.EncryptedData> object. This helps the decrypting party identify the correct asymmetric key to use when decrypting the session key.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#13](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#13)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#13)]  \n  \n13. Add the encrypted element data to the <xref:System.Security.Cryptography.Xml.EncryptedData> object.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#14](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#14)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#14)]  \n  \n14. Replace the element from the original <xref:System.Xml.XmlDocument> object with the <xref:System.Security.Cryptography.Xml.EncryptedData> element.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#15](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#15)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#15)]  \n  \n15. Save the <xref:System.Xml.XmlDocument> object.  \n  \n     [!code-csharp[HowToEncryptXMLElementAsymmetric#16](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#16)]\n     [!code-vb[HowToEncryptXMLElementAsymmetric#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#16)]  \n  \n## Example  \n This example assumes that a file named `\"test.xml\"` exists in the same directory as the compiled program.  It also assumes that `\"test.xml\"` contains a `\"creditcard\"` element.  You can place the following XML into a file called `test.xml` and use it with this example.  \n  \n```  \n<root>  \n    <creditcard>  \n        <number>19834209</number>  \n        <expiry>02/02/2002</expiry>  \n    </creditcard>  \n</root>  \n```  \n  \n [!code-csharp[HowToEncryptXMLElementAsymmetric#1](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#1)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#1)]  \n  \n## Compiling the Code  \n  \n-   To compile this example, you need to include a reference to `System.Security.dll`.  \n  \n-   Include the following namespaces: <xref:System.Xml>, <xref:System.Security.Cryptography>, and <xref:System.Security.Cryptography.Xml>.  \n  \n## .NET Framework Security  \n Never store a symmetric cryptographic key in plaintext or transfer a symmetric key between machines in plaintext.  Additionally, never store or transfer the private key of an asymmetric key pair in plaintext.  For more information about symmetric and asymmetric cryptographic keys, see [Generating Keys for Encryption and Decryption](../../../docs/standard/security/generating-keys-for-encryption-and-decryption.md).  \n  \n Never embed a key directly into your source code.  Embedded keys can be easily read from an assembly using the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) or by opening the assembly in a text editor such as Notepad.  \n  \n When you are done using a cryptographic key, clear it from memory by setting each byte to zero or by calling the <xref:System.Security.Cryptography.SymmetricAlgorithm.Clear%2A> method of the managed cryptography class.  Cryptographic keys can sometimes be read from memory by a debugger or read from a hard drive if the memory location is paged to disk.  \n  \n## See Also  \n <xref:System.Security.Cryptography.Xml>   \n [How to: Decrypt XML Elements with Asymmetric Keys](../../../docs/standard/security/how-to-decrypt-xml-elements-with-asymmetric-keys.md)","nodes":[{"pos":[4,824],"nodes":[{"content":"How to: Encrypt XML Elements with Asymmetric Keys | Microsoft Docs","nodes":[{"pos":[0,66],"content":"How to: Encrypt XML Elements with Asymmetric Keys | Microsoft Docs","nodes":[{"content":"How to: Encrypt XML Elements with Asymmetric Keys | Microsoft Docs","pos":[0,66]}]}],"pos":[6,75],"yaml":true}],"content":"title: \"How to: Encrypt XML Elements with Asymmetric Keys | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"cryptography [.NET Framework], asymmetric keys\"\n  - \"AES algorithm\"\n  - \"System.Security.Cryptography.RSACryptoServiceProvider class\"\n  - \"asymmetric keys [.NET Framework]\"\n  - \"System.Security.Cryptography.EncryptedXml class\"\n  - \"XML encryption\"\n  - \"key containers\"\n  - \"Advanced Encryption Standard algorithm\"\n  - \"Rijndael\"\n  - \"encryption [.NET Framework], asymmetric keys\"\nms.assetid: a164ba4f-e596-4bbe-a9ca-f214fe89ed48\ncaps.latest.revision: 11\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"","yamlblock":true},{"pos":[831,880],"content":"How to: Encrypt XML Elements with Asymmetric Keys","linkify":"How to: Encrypt XML Elements with Asymmetric Keys","nodes":[{"content":"How to: Encrypt XML Elements with Asymmetric Keys","pos":[0,49]}]},{"content":"You can use the classes in the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml&gt;</ph> namespace to encrypt an element within an XML document.","pos":[881,1007],"source":"You can use the classes in the <xref:System.Security.Cryptography.Xml> namespace to encrypt an element within an XML document."},{"content":"XML Encryption is a standard way to exchange or store encrypted XML data, without worrying about the data being easily read.","pos":[1009,1133]},{"content":"For more information about the XML Encryption standard, see the World Wide Web Consortium (W3C) specification for XML Encryption located at http://www.w3.org/TR/xmldsig-core/.","pos":[1135,1310]},{"content":"You can use XML Encryption to replace any XML element or document with an &lt;<ph id=\"ph1\">`EncryptedData`</ph>&gt; element that contains the encrypted XML data.","pos":[1317,1454],"source":"You can use XML Encryption to replace any XML element or document with an <`EncryptedData`> element that contains the encrypted XML data."},{"content":"The &lt;<ph id=\"ph1\">`EncryptedData`</ph>&gt; element can also contain sub elements that include information about the keys and processes used during encryption.","pos":[1456,1593],"source":"  The <`EncryptedData`> element can also contain sub elements that include information about the keys and processes used during encryption."},{"content":"XML Encryption allows a document to contain multiple encrypted elements and allows an element to be encrypted multiple times.","pos":[1595,1720]},{"content":"The code example in this procedure shows how to create an &lt;<ph id=\"ph1\">`EncryptedData`</ph>&gt; element along with several other sub elements that you can use later during decryption.","pos":[1722,1885],"source":"  The code example in this procedure shows how to create an <`EncryptedData`> element along with several other sub elements that you can use later during decryption."},{"content":"This example encrypts an XML element using two keys.","pos":[1892,1944]},{"content":"It generates an RSA public/private key pair and saves the key pair to a secure key container.","pos":[1946,2039]},{"content":"The example then creates a separate session key using the Advanced Encryption Standard (AES) algorithm, also called the Rijndael algorithm.","pos":[2041,2180]},{"content":"The example uses the AES session key to encrypt the XML document and then uses the RSA public key to encrypt the AES session key.","pos":[2182,2311]},{"content":"Finally, the example saves the encrypted AES session key and the encrypted XML data to the XML document within a new &lt;<ph id=\"ph1\">`EncryptedData`</ph>&gt; element.","pos":[2313,2456],"source":"  Finally, the example saves the encrypted AES session key and the encrypted XML data to the XML document within a new <`EncryptedData`> element."},{"content":"To decrypt the XML element, you retrieve the RSA private key from the key container, use it to decrypt the session key, and then use the session key to decrypt the document.","pos":[2463,2636]},{"content":"For more information about how to decrypt an XML element that was encrypted using this procedure, see <bpt id=\"p1\">[</bpt>How to: Decrypt XML Elements with Asymmetric Keys<ept id=\"p1\">](../../../docs/standard/security/how-to-decrypt-xml-elements-with-asymmetric-keys.md)</ept>.","pos":[2638,2877],"source":"  For more information about how to decrypt an XML element that was encrypted using this procedure, see [How to: Decrypt XML Elements with Asymmetric Keys](../../../docs/standard/security/how-to-decrypt-xml-elements-with-asymmetric-keys.md)."},{"content":"This example is appropriate for situations where multiple applications need to share encrypted data or where an application needs to save encrypted data between the times that it runs.","pos":[2884,3068]},{"pos":[3078,3126],"content":"To encrypt an XML element with an asymmetric key","linkify":"To encrypt an XML element with an asymmetric key","nodes":[{"content":"To encrypt an XML element with an asymmetric key","pos":[0,48]}]},{"content":"Create a <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object and specify the name of the key container.","pos":[3136,3244],"source":"Create a <xref:System.Security.Cryptography.CspParameters> object and specify the name of the key container."},{"pos":[3255,3558],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#2<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#2)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#2<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#2)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#2](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#2)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#2)]"},{"content":"Generate a symmetric key using the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.RSACryptoServiceProvider&gt;</ph> class.","pos":[3568,3670],"source":"Generate a symmetric key using the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class."},{"content":"The key is automatically saved to the key container when you pass the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object to the constructor of the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RSACryptoServiceProvider&gt;</ph> class.","pos":[3672,3892],"source":"  The key is automatically saved to the key container when you pass the <xref:System.Security.Cryptography.CspParameters> object to the constructor of the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class."},{"content":"This key will be used to encrypt the AES session key and can be retrieved later to decrypt it.","pos":[3894,3988]},{"pos":[3999,4302],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#3<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#3)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#3<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#3)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#3](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#3)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#3)]"},{"content":"Create an <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object by loading an XML file from disk.","pos":[4312,4392],"source":"Create an <xref:System.Xml.XmlDocument> object by loading an XML file from disk."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object contains the XML element to encrypt.","pos":[4394,4471],"source":"  The <xref:System.Xml.XmlDocument> object contains the XML element to encrypt."},{"pos":[4482,4785],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#4<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#4)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#4<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#4)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#4](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#4)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#4)]"},{"content":"Find the specified element in the <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object and create a new <ph id=\"ph2\">&lt;xref:System.Xml.XmlElement&gt;</ph> object to represent the element you want to encrypt.","pos":[4795,4964],"source":"Find the specified element in the <xref:System.Xml.XmlDocument> object and create a new <xref:System.Xml.XmlElement> object to represent the element you want to encrypt."},{"content":"In this example, the <ph id=\"ph1\">`\"creditcard\"`</ph> element is encrypted.","pos":[4965,5022],"source":" In this example, the `\"creditcard\"` element is encrypted."},{"pos":[5033,5336],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#5<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#5)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#5<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#5)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#5](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#5)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#5)]"},{"content":"Create a new session key using the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.RijndaelManaged&gt;</ph> class.","pos":[5346,5439],"source":"Create a new session key using the <xref:System.Security.Cryptography.RijndaelManaged> class."},{"content":"This key will encrypt the XML element, and then be encrypted itself and placed in the XML document.","pos":[5441,5540]},{"pos":[5551,5854],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#6<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#6)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#6<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#6)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#6](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#6)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#6)]"},{"content":"Create a new instance of the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedXml&gt;</ph> class and use it to encrypt the specified element using the session key.","pos":[5864,6018],"source":"Create a new instance of the <xref:System.Security.Cryptography.Xml.EncryptedXml> class and use it to encrypt the specified element using the session key."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedXml.EncryptData%2A&gt;</ph> method returns the encrypted element as an array of encrypted bytes.","pos":[6020,6160],"source":"  The <xref:System.Security.Cryptography.Xml.EncryptedXml.EncryptData%2A> method returns the encrypted element as an array of encrypted bytes."},{"pos":[6171,6474],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#7<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#7)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#7<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#7)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#7](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#7)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#7)]"},{"content":"Construct an <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedData&gt;</ph> object and populate it with the URL identifier of the encrypted XML element.","pos":[6484,6627],"source":"Construct an <xref:System.Security.Cryptography.Xml.EncryptedData> object and populate it with the URL identifier of the encrypted XML element."},{"content":"This URL identifier lets a decrypting party know that the XML contains an encrypted element.","pos":[6629,6721]},{"content":"You can use the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedXml.XmlEncElementUrl&gt;</ph> field to specify the URL identifier.","pos":[6723,6845],"source":"  You can use the <xref:System.Security.Cryptography.Xml.EncryptedXml.XmlEncElementUrl> field to specify the URL identifier."},{"content":"The plaintext XML element will be replaced by an &lt;<ph id=\"ph1\">`EncryptedData`</ph>&gt; element encapsulated by this <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.Xml.EncryptedData&gt;</ph> object.","pos":[6847,7004],"source":"  The plaintext XML element will be replaced by an <`EncryptedData`> element encapsulated by this <xref:System.Security.Cryptography.Xml.EncryptedData> object."},{"pos":[7015,7318],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#8<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#8)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#8<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#8)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#8](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#8)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#8)]"},{"content":"Create an <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptionMethod&gt;</ph> object that is initialized to the URL identifier of the cryptographic algorithm used to generate the session key.","pos":[7328,7508],"source":"Create an <xref:System.Security.Cryptography.Xml.EncryptionMethod> object that is initialized to the URL identifier of the cryptographic algorithm used to generate the session key."},{"content":"Pass the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptionMethod&gt;</ph> object to the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.Xml.EncryptedType.EncryptionMethod%2A&gt;</ph> property.","pos":[7510,7673],"source":"  Pass the <xref:System.Security.Cryptography.Xml.EncryptionMethod> object to the <xref:System.Security.Cryptography.Xml.EncryptedType.EncryptionMethod%2A> property."},{"pos":[7684,7987],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#9<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#9)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#9<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#9)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#9](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#9)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#9)]"},{"content":"Create an <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedKey&gt;</ph> object to contain the encrypted session key.","pos":[7996,8103],"source":"Create an <xref:System.Security.Cryptography.Xml.EncryptedKey> object to contain the encrypted session key."},{"content":"Encrypt the session key, add it to the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedKey&gt;</ph> object, and enter a session key name and key identifier URL.","pos":[8105,8257],"source":"  Encrypt the session key, add it to the <xref:System.Security.Cryptography.Xml.EncryptedKey> object, and enter a session key name and key identifier URL."},{"pos":[8268,8575],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#10<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#10)</ept><ept id=\"p1\">]</ept>   <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#10<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#10)</ept><ept id=\"p3\">]</ept>","leadings":["","   "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#10](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#10)]\n  [!code-vb[HowToEncryptXMLElementAsymmetric#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#10)]"},{"content":"Create a new <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.DataReference&gt;</ph> object that maps the encrypted data to a particular session key.","pos":[8585,8716],"source":"Create a new <xref:System.Security.Cryptography.Xml.DataReference> object that maps the encrypted data to a particular session key."},{"content":"This optional step allows you to easily specify that multiple parts of an XML document were encrypted by a single key.","pos":[8718,8836]},{"pos":[8847,9154],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#11<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#11)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#11<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#11)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#11](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#11)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#11)]"},{"content":"Add the encrypted key to the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedData&gt;</ph> object.","pos":[9164,9254],"source":"Add the encrypted key to the <xref:System.Security.Cryptography.Xml.EncryptedData> object."},{"pos":[9265,9572],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#12<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#12)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#12<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#12)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#12](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#12)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#12)]"},{"content":"Create a new <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.KeyInfo&gt;</ph> object to specify the name of the RSA key.","pos":[9582,9685],"source":"Create a new <xref:System.Security.Cryptography.Xml.KeyInfo> object to specify the name of the RSA key."},{"content":"Add it to the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedData&gt;</ph> object.","pos":[9687,9762],"source":"  Add it to the <xref:System.Security.Cryptography.Xml.EncryptedData> object."},{"content":"This helps the decrypting party identify the correct asymmetric key to use when decrypting the session key.","pos":[9763,9870]},{"pos":[9881,10188],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#13<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#13)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#13<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#13)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#13](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#13)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#13)]"},{"content":"Add the encrypted element data to the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.EncryptedData&gt;</ph> object.","pos":[10198,10297],"source":"Add the encrypted element data to the <xref:System.Security.Cryptography.Xml.EncryptedData> object."},{"pos":[10308,10615],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#14<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#14)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#14<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#14)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#14](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#14)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#14)]"},{"content":"Replace the element from the original <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object with the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.Xml.EncryptedData&gt;</ph> element.","pos":[10625,10771],"source":"Replace the element from the original <xref:System.Xml.XmlDocument> object with the <xref:System.Security.Cryptography.Xml.EncryptedData> element."},{"pos":[10782,11089],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#15<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#15)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#15<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#15)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#15](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#15)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#15)]"},{"content":"Save the <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object.","pos":[11099,11145],"source":"Save the <xref:System.Xml.XmlDocument> object."},{"pos":[11156,11463],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#16<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#16)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#16<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#16)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#16](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#16)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#16)]"},{"pos":[11472,11479],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"This example assumes that a file named <ph id=\"ph1\">`\"test.xml\"`</ph> exists in the same directory as the compiled program.","pos":[11483,11588],"source":"This example assumes that a file named `\"test.xml\"` exists in the same directory as the compiled program."},{"content":"It also assumes that <ph id=\"ph1\">`\"test.xml\"`</ph> contains a <ph id=\"ph2\">`\"creditcard\"`</ph> element.","pos":[11590,11658],"source":"  It also assumes that `\"test.xml\"` contains a `\"creditcard\"` element."},{"content":"You can place the following XML into a file called <ph id=\"ph1\">`test.xml`</ph> and use it with this example.","pos":[11660,11751],"source":"  You can place the following XML into a file called `test.xml` and use it with this example."},{"pos":[11905,12204],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>HowToEncryptXMLElementAsymmetric#1<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>HowToEncryptXMLElementAsymmetric#1<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[HowToEncryptXMLElementAsymmetric#1](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/cs/sample.cs#1)]\n [!code-vb[HowToEncryptXMLElementAsymmetric#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToEncryptXMLElementAsymmetric/vb/sample.vb#1)]"},{"pos":[12213,12231],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"pos":[12241,12323],"content":"To compile this example, you need to include a reference to <ph id=\"ph1\">`System.Security.dll`</ph>.","source":"To compile this example, you need to include a reference to `System.Security.dll`."},{"content":"Include the following namespaces: <ph id=\"ph1\">&lt;xref:System.Xml&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Security.Cryptography&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.Xml&gt;</ph>.","pos":[12333,12467],"source":"Include the following namespaces: <xref:System.Xml>, <xref:System.Security.Cryptography>, and <xref:System.Security.Cryptography.Xml>."},{"pos":[12476,12499],"content":".NET Framework Security","linkify":".NET Framework Security","nodes":[{"content":".NET Framework Security","pos":[0,23]}]},{"content":"Never store a symmetric cryptographic key in plaintext or transfer a symmetric key between machines in plaintext.","pos":[12503,12616]},{"content":"Additionally, never store or transfer the private key of an asymmetric key pair in plaintext.","pos":[12618,12711]},{"content":"For more information about symmetric and asymmetric cryptographic keys, see <bpt id=\"p1\">[</bpt>Generating Keys for Encryption and Decryption<ept id=\"p1\">](../../../docs/standard/security/generating-keys-for-encryption-and-decryption.md)</ept>.","pos":[12713,12919],"source":"  For more information about symmetric and asymmetric cryptographic keys, see [Generating Keys for Encryption and Decryption](../../../docs/standard/security/generating-keys-for-encryption-and-decryption.md)."},{"content":"Never embed a key directly into your source code.","pos":[12926,12975]},{"content":"Embedded keys can be easily read from an assembly using the <bpt id=\"p1\">[</bpt>Ildasm.exe (IL Disassembler)<ept id=\"p1\">](../../../docs/framework/tools/ildasm-exe-il-disassembler.md)</ept> or by opening the assembly in a text editor such as Notepad.","pos":[12977,13189],"source":"  Embedded keys can be easily read from an assembly using the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) or by opening the assembly in a text editor such as Notepad."},{"content":"When you are done using a cryptographic key, clear it from memory by setting each byte to zero or by calling the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.SymmetricAlgorithm.Clear%2A&gt;</ph> method of the managed cryptography class.","pos":[13196,13414],"source":"When you are done using a cryptographic key, clear it from memory by setting each byte to zero or by calling the <xref:System.Security.Cryptography.SymmetricAlgorithm.Clear%2A> method of the managed cryptography class."},{"content":"Cryptographic keys can sometimes be read from memory by a debugger or read from a hard drive if the memory location is paged to disk.","pos":[13416,13549]},{"pos":[13558,13566],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml&gt;</ph>","pos":[13570,13609],"source":"<xref:System.Security.Cryptography.Xml> "},{"content":"<bpt id=\"p1\">[</bpt>How to: Decrypt XML Elements with Asymmetric Keys<ept id=\"p1\">](../../../docs/standard/security/how-to-decrypt-xml-elements-with-asymmetric-keys.md)</ept>","pos":[13614,13750],"source":"[How to: Decrypt XML Elements with Asymmetric Keys](../../../docs/standard/security/how-to-decrypt-xml-elements-with-asymmetric-keys.md)"}]}