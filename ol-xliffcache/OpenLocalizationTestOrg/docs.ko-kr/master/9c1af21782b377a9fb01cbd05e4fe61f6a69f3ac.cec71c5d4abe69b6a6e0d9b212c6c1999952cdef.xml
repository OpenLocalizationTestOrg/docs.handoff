{"content":"---\ntitle: \"WAS Activation Architecture\"\nms.date: \"03/30/2017\"\nms.assetid: 58aeffb0-8f3f-4b40-80c8-15f3f1652fd3\n---\n# WAS Activation Architecture\nThis topic itemizes and discusses the components of the Windows Process Activation Service (also known as WAS).  \n  \n## Activation Components  \n WAS consists of several architectural components:  \n  \n-   Listener adapters. Windows services that receive messages on specific network protocols and communicate with WAS to route incoming messages to the correct worker process.  \n  \n-   WAS. The Windows service that manages the creation and lifetime of worker processes.  \n  \n-   The generic worker process executable (w3wp.exe).  \n  \n-   Application manager. Manages the creation and lifetime of application domains that host applications within the worker process.  \n  \n-   Protocol handlers. Protocol-specific components that run in the worker process and manage communication between the worker process and the individual listener adapters. Two types of protocol handlers exist: process protocol handlers and AppDomain protocol handlers.  \n  \n When WAS activates a worker process instance, it loads the process protocol handlers required into the worker process and uses the application manager to create an application domain to host the application. The application domain loads the application’s code as well as the AppDomain protocol handlers that the network protocols used by the application require.  \n  \n ![Screenshot that shows the WAS architecture.](./media/was-activation-architecture/windows-process-application-service-architecture.gif)  \n  \n### Listener Adapters  \n Listener adapters are individual Windows services that implement the network communication logic used to receive messages using the network protocol on which they listen. The following table lists the listener adapters for Windows Communication Foundation (WCF) protocols.  \n  \n|Listener adapter service name|Protocol|Notes|  \n|-----------------------------------|--------------|-----------|  \n|W3SVC|http|Common component that provides HTTP activation for both IIS 7.0 and WCF.|  \n|NetTcpActivator|net.tcp|Depends on the NetTcpPortSharing service.|  \n|NetPipeActivator|net.pipe||  \n|NetMsmqActivator|net.msmq|For use with WCF-based Message Queuing applications.|  \n|NetMsmqActivator|msmq.formatname|Provides backwards compatibility with existing Message Queuing applications.|  \n  \n Listener adapters for specific protocols are registered during installation in the applicationHost.config file, as shown in the following XML example.  \n  \n```xml  \n<system.applicationHost>  \n    <listenerAdapters>  \n        <add name=\"http\" />  \n        <add name=\"net.tcp\"   \n          identity=\"S-1-5-80-3579033775-2824656752-1522793541-1960352512-462907086\" />  \n         <add name=\"net.pipe\"   \n           identity=\"S-1-5-80-2943419899-937267781-4189664001-1229628381-3982115073\" />  \n          <add name=\"net.msmq\"   \n            identity=\"S-1-5-80-89244771-1762554971-1007993102-348796144-2203111529\" />  \n           <add name=\"msmq.formatname\"   \n             identity=\"S-1-5-80-89244771-1762554971-1007993102-348796144-2203111529\" />  \n    </listenerAdapters>  \n</system.applicationHost>  \n```  \n  \n### Protocol Handlers  \n Process and AppDomain protocol handlers for specific protocols are registered in the machine-level Web.config file.  \n  \n```xml  \n<system.web>  \n   <protocols>  \n      <add name=\"net.tcp\"   \n        processHandlerType=  \n         \"System.ServiceModel.WasHosting.TcpProcessProtocolHandler\"  \n        appDomainHandlerType=  \n         \"System.ServiceModel.WasHosting.TcpAppDomainProtocolHandler\"  \n        validate=\"false\" />  \n      <add name=\"net.pipe\"   \n        processHandlerType=  \n         \"System.ServiceModel.WasHosting.NamedPipeProcessProtocolHandler\"  \n          appDomainHandlerType=  \n           \"System.ServiceModel.WasHosting.NamedPipeAppDomainProtocolHandler\"/>  \n      <add name=\"net.msmq\"  \n        processHandlerType=  \n         \"System.ServiceModel.WasHosting.MsmqProcessProtocolHandler\"  \n        appDomainHandlerType=  \n         \"System.ServiceModel.WasHosting.MsmqAppDomainProtocolHandler\"  \n        validate=\"false\" />  \n   </protocols>  \n</system.web>  \n```  \n  \n## See also\n\n- [Configuring WAS for Use with WCF](../../../../docs/framework/wcf/feature-details/configuring-the-wpa--service-for-use-with-wcf.md)\n- [Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkId=201276)\n","nodes":[{"pos":[4,111],"embed":true,"restype":"x-metadata","content":"title: \"WAS Activation Architecture\"\nms.date: \"03/30/2017\"\nms.assetid: 58aeffb0-8f3f-4b40-80c8-15f3f1652fd3","nodes":[{"content":"WAS Activation Architecture","nodes":[{"pos":[0,27],"content":"WAS Activation Architecture","nodes":[{"content":"WAS Activation Architecture","pos":[0,27]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[118,145],"content":"WAS Activation Architecture","linkify":"WAS Activation Architecture","nodes":[{"content":"WAS Activation Architecture","pos":[0,27]}]},{"content":"This topic itemizes and discusses the components of the Windows Process Activation Service (also known as WAS).","pos":[146,257]},{"pos":[266,287],"content":"Activation Components","linkify":"Activation Components","nodes":[{"content":"Activation Components","pos":[0,21]}]},{"content":"WAS consists of several architectural components:","pos":[291,340]},{"content":"Listener adapters.","pos":[350,368]},{"content":"Windows services that receive messages on specific network protocols and communicate with WAS to route incoming messages to the correct worker process.","pos":[369,520]},{"content":"WAS.","pos":[530,534]},{"content":"The Windows service that manages the creation and lifetime of worker processes.","pos":[535,614]},{"content":"The generic worker process executable (w3wp.exe).","pos":[624,673]},{"content":"Application manager.","pos":[683,703]},{"content":"Manages the creation and lifetime of application domains that host applications within the worker process.","pos":[704,810]},{"content":"Protocol handlers.","pos":[820,838]},{"content":"Protocol-specific components that run in the worker process and manage communication between the worker process and the individual listener adapters.","pos":[839,988]},{"content":"Two types of protocol handlers exist: process protocol handlers and AppDomain protocol handlers.","pos":[989,1085]},{"content":"When WAS activates a worker process instance, it loads the process protocol handlers required into the worker process and uses the application manager to create an application domain to host the application.","pos":[1092,1299]},{"content":"The application domain loads the application’s code as well as the AppDomain protocol handlers that the network protocols used by the application require.","pos":[1300,1454]},{"content":"Screenshot that shows the WAS architecture.","pos":[1463,1506]},{"pos":[1607,1624],"content":"Listener Adapters","linkify":"Listener Adapters","nodes":[{"content":"Listener Adapters","pos":[0,17]}]},{"content":"Listener adapters are individual Windows services that implement the network communication logic used to receive messages using the network protocol on which they listen.","pos":[1628,1798]},{"content":"The following table lists the listener adapters for Windows Communication Foundation (WCF) protocols.","pos":[1799,1900]},{"content":"Listener adapter service name","pos":[1907,1936]},{"content":"Protocol","pos":[1937,1945]},{"content":"Notes","pos":[1946,1951]},{"content":"W3SVC","pos":[2023,2028]},{"content":"http","pos":[2029,2033]},{"content":"Common component that provides HTTP activation for both IIS 7.0 and WCF.","pos":[2034,2106]},{"content":"NetTcpActivator","pos":[2111,2126]},{"content":"net.tcp","pos":[2127,2134]},{"content":"Depends on the NetTcpPortSharing service.","pos":[2135,2176]},{"content":"NetPipeActivator","pos":[2181,2197]},{"content":"net.pipe","pos":[2198,2206]},{"content":"NetMsmqActivator","pos":[2212,2228]},{"content":"net.msmq","pos":[2229,2237]},{"content":"For use with WCF-based Message Queuing applications.","pos":[2238,2290]},{"content":"NetMsmqActivator","pos":[2295,2311]},{"content":"msmq.formatname","pos":[2312,2327]},{"content":"Provides backwards compatibility with existing Message Queuing applications.","pos":[2328,2404]},{"content":"Listener adapters for specific protocols are registered during installation in the applicationHost.config file, as shown in the following XML example.","pos":[2412,2562]},{"pos":[3224,3241],"content":"Protocol Handlers","linkify":"Protocol Handlers","nodes":[{"content":"Protocol Handlers","pos":[0,17]}]},{"content":"Process and AppDomain protocol handlers for specific protocols are registered in the machine-level Web.config file.","pos":[3245,3360]},{"pos":[4233,4241],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4245,4376],"content":"<bpt id=\"p1\">[</bpt>Configuring WAS for Use with WCF<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/configuring-the-wpa--service-for-use-with-wcf.md)</ept>","source":"[Configuring WAS for Use with WCF](../../../../docs/framework/wcf/feature-details/configuring-the-wpa--service-for-use-with-wcf.md)"},{"pos":[4379,4471],"content":"<bpt id=\"p1\">[</bpt>Windows Server App Fabric Hosting Features<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=201276)</ept>","source":"[Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkId=201276)"}]}