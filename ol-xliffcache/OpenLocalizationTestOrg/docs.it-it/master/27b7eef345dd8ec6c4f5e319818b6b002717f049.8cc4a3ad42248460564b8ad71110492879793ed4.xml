{"content":"---\ntitle: \"Troubleshooting\"\nms.date: \"03/30/2017\"\nms.assetid: 8cd4401c-b12c-4116-a421-f3dcffa65670\n---\n# Troubleshooting\nThe following information exposes some issues you might encounter in your [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] applications, and provides suggestions to avoid or otherwise reduce the effect of these issues.  \n  \n Additional issues are addressed in [Frequently Asked Questions](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md).  \n  \n## Unsupported Standard Query Operators  \n [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] does not support all standard query operator methods (for example, <xref:System.Linq.Enumerable.ElementAt%2A>). As a result, projects that compile can still produce run-time errors. For more information, see [Standard Query Operator Translation](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md).  \n  \n## Memory Issues  \n If a query involves an in-memory collection and [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <xref:System.Data.Linq.Table%601>, the query might be executed in memory, depending on the order in which the two collections are specified. If the query must be executed in memory, then the data from the database table will need to be retrieved.  \n  \n This approach is inefficient and could result in significant memory and processor usage. Try to avoid such multi-domain queries.  \n  \n## File Names and SQLMetal  \n To specify an input file name, add the name to the command line as the input file. Including the file name in the connection string (using the **/conn** option) is not supported. For more information, see [SqlMetal.exe (Code Generation Tool)](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md).  \n  \n## Class Library Projects  \n The [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] creates a connection string in the `app.config` file of the project. In class library projects, the `app.config` file is not used. [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] uses the Connection String provided in the design-time files. Changing the value in `app.config` does not change the database to which your application connects.  \n  \n## Cascade Delete  \n [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] does not support or recognize cascade-delete operations. If you want to delete a row in a table that has constraints against it, you must do either of the following:  \n  \n-   Set the `ON DELETE CASCADE` rule in the foreign-key constraint in the database.  \n  \n-   Use your own code to first delete the child objects that prevent the parent object from being deleted.  \n  \n Otherwise, a <xref:System.Data.SqlClient.SqlException> exception is thrown.  \n  \n For more information, see [How to: Delete Rows From the Database](../../../../../../docs/framework/data/adonet/sql/linq/how-to-delete-rows-from-the-database.md).  \n  \n## Expression Not Queryable  \n If you get the \"Expression [expression] is not queryable; are you missing an assembly reference?\" error, make sure of the following:  \n  \n-   Your application is targeting [!INCLUDE[compact_v35_short](../../../../../../includes/compact-v35-short-md.md)].  \n  \n-   You have a reference to `System.Core.dll` and `System.Data.Linq.dll`.  \n  \n-   You have an `Imports` (Visual Basic) or `using` (C#) directive for <xref:System.Linq> and <xref:System.Data.Linq>.  \n  \n## DuplicateKeyException  \n In the course of debugging a [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] project, you might traverse an entity's relations. Doing so brings these items into the cache, and [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] becomes aware of their presence. If you then try to execute <xref:System.Data.Linq.Table%601.Attach%2A> or <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A> or a similar method that produces multiple rows that have the same key, a <xref:System.Data.Linq.DuplicateKeyException> is thrown.  \n  \n## String Concatenation Exceptions  \n Concatenation on operands mapped to `[n]text` and other `[n][var]char` is not supported. An exception is thrown for concatenation of strings mapped to the two different sets of types. For more information, see [System.String Methods](../../../../../../docs/framework/data/adonet/sql/linq/system-string-methods.md).  \n  \n## Skip and Take Exceptions in SQL Server 2000  \n You must use identity members (<xref:System.Data.Linq.Mapping.ColumnAttribute.IsPrimaryKey%2A>) when you use <xref:System.Linq.Queryable.Take%2A> or <xref:System.Linq.Queryable.Skip%2A> against a SQL Server 2000 database. The query must be against a single table (that is, not a join), or be a <xref:System.Linq.Queryable.Distinct%2A>, <xref:System.Linq.Queryable.Except%2A>, <xref:System.Linq.Queryable.Intersect%2A>, or <xref:System.Linq.Queryable.Union%2A> operation, and must not include a <xref:System.Linq.Queryable.Concat%2A> operation. For more information, see the \"SQL Server 2000 Support\" section in [Standard Query Operator Translation](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md).  \n  \n This requirement does not apply to [!INCLUDE[sqprsqlong](../../../../../../includes/sqprsqlong-md.md)].  \n  \n## GroupBy InvalidOperationException  \n This exception is thrown when a column value is null in a <xref:System.Linq.Enumerable.GroupBy%2A> query that groups by a `boolean` expression, such as `group x by (Phone==@phone)`. Because the expression is a `boolean`, the key is inferred to be `boolean`, not `nullable` `boolean`. When the translated comparison produces a null, an attempt is made to assign a `nullable` `boolean` to a `boolean`, and the exception is thrown.  \n  \n To avoid this situation (assuming you want to treat nulls as false), use an approach such as the following:  \n  \n `GroupBy=\"(Phone != null) && (Phone=@Phone)\"`  \n  \n## OnCreated() Partial Method  \n The generated method `OnCreated()` is called each time the object constructor is called, including the scenario in which [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] calls the constructor to make a copy for original values. Take this behavior into account if you implement the `OnCreated()` method in your own partial class.  \n  \n## See also\n\n- [Debugging Support](../../../../../../docs/framework/data/adonet/sql/linq/debugging-support.md)\n- [Frequently Asked Questions](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md)\n","nodes":[{"pos":[4,99],"embed":true,"restype":"x-metadata","content":"title: \"Troubleshooting\"\nms.date: \"03/30/2017\"\nms.assetid: 8cd4401c-b12c-4116-a421-f3dcffa65670","nodes":[{"content":"Troubleshooting","nodes":[{"pos":[0,15],"content":"Troubleshooting","nodes":[{"content":"Troubleshooting","pos":[0,15]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[106,121],"content":"Troubleshooting","linkify":"Troubleshooting","nodes":[{"content":"Troubleshooting","pos":[0,15]}]},{"pos":[122,359],"content":"The following information exposes some issues you might encounter in your <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> applications, and provides suggestions to avoid or otherwise reduce the effect of these issues.","source":"The following information exposes some issues you might encounter in your [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] applications, and provides suggestions to avoid or otherwise reduce the effect of these issues."},{"pos":[366,515],"content":"Additional issues are addressed in <bpt id=\"p1\">[</bpt>Frequently Asked Questions<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md)</ept>.","source":"Additional issues are addressed in [Frequently Asked Questions](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md)."},{"pos":[524,560],"content":"Unsupported Standard Query Operators","linkify":"Unsupported Standard Query Operators","nodes":[{"content":"Unsupported Standard Query Operators","pos":[0,36]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> does not support all standard query operator methods (for example, <ph id=\"ph2\">&lt;xref:System.Linq.Enumerable.ElementAt%2A&gt;</ph>).","pos":[564,743],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] does not support all standard query operator methods (for example, <xref:System.Linq.Enumerable.ElementAt%2A>)."},{"content":"As a result, projects that compile can still produce run-time errors.","pos":[744,813]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Standard Query Operator Translation<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md)</ept>.","pos":[814,972],"source":" For more information, see [Standard Query Operator Translation](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md)."},{"pos":[981,994],"content":"Memory Issues","linkify":"Memory Issues","nodes":[{"content":"Memory Issues","pos":[0,13]}]},{"content":"If a query involves an in-memory collection and <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Data.Linq.Table%601&gt;</ph>, the query might be executed in memory, depending on the order in which the two collections are specified.","pos":[998,1254],"source":"If a query involves an in-memory collection and [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] <xref:System.Data.Linq.Table%601>, the query might be executed in memory, depending on the order in which the two collections are specified."},{"content":"If the query must be executed in memory, then the data from the database table will need to be retrieved.","pos":[1255,1360]},{"content":"This approach is inefficient and could result in significant memory and processor usage.","pos":[1367,1455]},{"content":"Try to avoid such multi-domain queries.","pos":[1456,1495]},{"pos":[1504,1527],"content":"File Names and SQLMetal","linkify":"File Names and SQLMetal","nodes":[{"content":"File Names and SQLMetal","pos":[0,23]}]},{"content":"To specify an input file name, add the name to the command line as the input file.","pos":[1531,1613]},{"content":"Including the file name in the connection string (using the <bpt id=\"p1\">**</bpt>/conn<ept id=\"p1\">**</ept> option) is not supported.","pos":[1614,1709],"source":" Including the file name in the connection string (using the **/conn** option) is not supported."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>SqlMetal.exe (Code Generation Tool)<ept id=\"p1\">](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md)</ept>.","pos":[1710,1851],"source":" For more information, see [SqlMetal.exe (Code Generation Tool)](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md)."},{"pos":[1860,1882],"content":"Class Library Projects","linkify":"Class Library Projects","nodes":[{"content":"Class Library Projects","pos":[0,22]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)]</ph> creates a connection string in the <ph id=\"ph2\">`app.config`</ph> file of the project.","pos":[1886,2042],"source":"The [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] creates a connection string in the `app.config` file of the project."},{"content":"In class library projects, the <ph id=\"ph1\">`app.config`</ph> file is not used.","pos":[2043,2104],"source":" In class library projects, the `app.config` file is not used."},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> uses the Connection String provided in the design-time files.","pos":[2105,2234],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] uses the Connection String provided in the design-time files."},{"content":"Changing the value in <ph id=\"ph1\">`app.config`</ph> does not change the database to which your application connects.","pos":[2235,2334],"source":" Changing the value in `app.config` does not change the database to which your application connects."},{"pos":[2343,2357],"content":"Cascade Delete","linkify":"Cascade Delete","nodes":[{"content":"Cascade Delete","pos":[0,14]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> does not support or recognize cascade-delete operations.","pos":[2361,2485],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] does not support or recognize cascade-delete operations."},{"content":"If you want to delete a row in a table that has constraints against it, you must do either of the following:","pos":[2486,2594]},{"pos":[2604,2683],"content":"Set the <ph id=\"ph1\">`ON DELETE CASCADE`</ph> rule in the foreign-key constraint in the database.","source":"Set the `ON DELETE CASCADE` rule in the foreign-key constraint in the database."},{"content":"Use your own code to first delete the child objects that prevent the parent object from being deleted.","pos":[2693,2795]},{"pos":[2802,2877],"content":"Otherwise, a <ph id=\"ph1\">&lt;xref:System.Data.SqlClient.SqlException&gt;</ph> exception is thrown.","source":"Otherwise, a <xref:System.Data.SqlClient.SqlException> exception is thrown."},{"pos":[2884,3045],"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Delete Rows From the Database<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/how-to-delete-rows-from-the-database.md)</ept>.","source":"For more information, see [How to: Delete Rows From the Database](../../../../../../docs/framework/data/adonet/sql/linq/how-to-delete-rows-from-the-database.md)."},{"pos":[3054,3078],"content":"Expression Not Queryable","linkify":"Expression Not Queryable","nodes":[{"content":"Expression Not Queryable","pos":[0,24]}]},{"content":"If you get the \"Expression [expression] is not queryable; are you missing an assembly reference?\"","pos":[3082,3179]},{"content":"error, make sure of the following:","pos":[3180,3214]},{"pos":[3224,3336],"content":"Your application is targeting <ph id=\"ph1\">[!INCLUDE[compact_v35_short](../../../../../../includes/compact-v35-short-md.md)]</ph>.","source":"Your application is targeting [!INCLUDE[compact_v35_short](../../../../../../includes/compact-v35-short-md.md)]."},{"pos":[3346,3415],"content":"You have a reference to <ph id=\"ph1\">`System.Core.dll`</ph> and <ph id=\"ph2\">`System.Data.Linq.dll`</ph>.","source":"You have a reference to `System.Core.dll` and `System.Data.Linq.dll`."},{"pos":[3425,3539],"content":"You have an <ph id=\"ph1\">`Imports`</ph> (Visual Basic) or <ph id=\"ph2\">`using`</ph> (C#) directive for <ph id=\"ph3\">&lt;xref:System.Linq&gt;</ph> and <ph id=\"ph4\">&lt;xref:System.Data.Linq&gt;</ph>.","source":"You have an `Imports` (Visual Basic) or `using` (C#) directive for <xref:System.Linq> and <xref:System.Data.Linq>."},{"pos":[3548,3569],"content":"DuplicateKeyException","linkify":"DuplicateKeyException","nodes":[{"content":"DuplicateKeyException","pos":[0,21]}]},{"content":"In the course of debugging a <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> project, you might traverse an entity's relations.","pos":[3573,3720],"source":"In the course of debugging a [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] project, you might traverse an entity's relations."},{"content":"Doing so brings these items into the cache, and <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> becomes aware of their presence.","pos":[3721,3869],"source":" Doing so brings these items into the cache, and [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] becomes aware of their presence."},{"content":"If you then try to execute <ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601.Attach%2A&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Data.Linq.Table%601.InsertOnSubmit%2A&gt;</ph> or a similar method that produces multiple rows that have the same key, a <ph id=\"ph3\">&lt;xref:System.Data.Linq.DuplicateKeyException&gt;</ph> is thrown.","pos":[3870,4126],"source":" If you then try to execute <xref:System.Data.Linq.Table%601.Attach%2A> or <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A> or a similar method that produces multiple rows that have the same key, a <xref:System.Data.Linq.DuplicateKeyException> is thrown."},{"pos":[4135,4166],"content":"String Concatenation Exceptions","linkify":"String Concatenation Exceptions","nodes":[{"content":"String Concatenation Exceptions","pos":[0,31]}]},{"content":"Concatenation on operands mapped to <ph id=\"ph1\">`[n]text`</ph> and other <ph id=\"ph2\">`[n][var]char`</ph> is not supported.","pos":[4170,4258],"source":"Concatenation on operands mapped to `[n]text` and other `[n][var]char` is not supported."},{"content":"An exception is thrown for concatenation of strings mapped to the two different sets of types.","pos":[4259,4353]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>System.String Methods<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/system-string-methods.md)</ept>.","pos":[4354,4484],"source":" For more information, see [System.String Methods](../../../../../../docs/framework/data/adonet/sql/linq/system-string-methods.md)."},{"pos":[4493,4536],"content":"Skip and Take Exceptions in SQL Server 2000","linkify":"Skip and Take Exceptions in SQL Server 2000","nodes":[{"content":"Skip and Take Exceptions in SQL Server 2000","pos":[0,43]}]},{"content":"You must use identity members (<ph id=\"ph1\">&lt;xref:System.Data.Linq.Mapping.ColumnAttribute.IsPrimaryKey%2A&gt;</ph>) when you use <ph id=\"ph2\">&lt;xref:System.Linq.Queryable.Take%2A&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Linq.Queryable.Skip%2A&gt;</ph> against a SQL Server 2000 database.","pos":[4540,4761],"source":"You must use identity members (<xref:System.Data.Linq.Mapping.ColumnAttribute.IsPrimaryKey%2A>) when you use <xref:System.Linq.Queryable.Take%2A> or <xref:System.Linq.Queryable.Skip%2A> against a SQL Server 2000 database."},{"content":"The query must be against a single table (that is, not a join), or be a <ph id=\"ph1\">&lt;xref:System.Linq.Queryable.Distinct%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Linq.Queryable.Except%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Linq.Queryable.Intersect%2A&gt;</ph>, or <ph id=\"ph4\">&lt;xref:System.Linq.Queryable.Union%2A&gt;</ph> operation, and must not include a <ph id=\"ph5\">&lt;xref:System.Linq.Queryable.Concat%2A&gt;</ph> operation.","pos":[4762,5083],"source":" The query must be against a single table (that is, not a join), or be a <xref:System.Linq.Queryable.Distinct%2A>, <xref:System.Linq.Queryable.Except%2A>, <xref:System.Linq.Queryable.Intersect%2A>, or <xref:System.Linq.Queryable.Union%2A> operation, and must not include a <xref:System.Linq.Queryable.Concat%2A> operation."},{"content":"For more information, see the \"SQL Server 2000 Support\" section in <bpt id=\"p1\">[</bpt>Standard Query Operator Translation<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md)</ept>.","pos":[5084,5283],"source":" For more information, see the \"SQL Server 2000 Support\" section in [Standard Query Operator Translation](../../../../../../docs/framework/data/adonet/sql/linq/standard-query-operator-translation.md)."},{"pos":[5290,5393],"content":"This requirement does not apply to <ph id=\"ph1\">[!INCLUDE[sqprsqlong](../../../../../../includes/sqprsqlong-md.md)]</ph>.","source":"This requirement does not apply to [!INCLUDE[sqprsqlong](../../../../../../includes/sqprsqlong-md.md)]."},{"pos":[5402,5435],"content":"GroupBy InvalidOperationException","linkify":"GroupBy InvalidOperationException","nodes":[{"content":"GroupBy InvalidOperationException","pos":[0,33]}]},{"content":"This exception is thrown when a column value is null in a <ph id=\"ph1\">&lt;xref:System.Linq.Enumerable.GroupBy%2A&gt;</ph> query that groups by a <ph id=\"ph2\">`boolean`</ph> expression, such as <ph id=\"ph3\">`group x by (Phone==@phone)`</ph>.","pos":[5439,5620],"source":"This exception is thrown when a column value is null in a <xref:System.Linq.Enumerable.GroupBy%2A> query that groups by a `boolean` expression, such as `group x by (Phone==@phone)`."},{"content":"Because the expression is a <ph id=\"ph1\">`boolean`</ph>, the key is inferred to be <ph id=\"ph2\">`boolean`</ph>, not <ph id=\"ph3\">`nullable`</ph> <ph id=\"ph4\">`boolean`</ph>.","pos":[5621,5722],"source":" Because the expression is a `boolean`, the key is inferred to be `boolean`, not `nullable` `boolean`."},{"content":"When the translated comparison produces a null, an attempt is made to assign a <ph id=\"ph1\">`nullable`</ph> <ph id=\"ph2\">`boolean`</ph> to a <ph id=\"ph3\">`boolean`</ph>, and the exception is thrown.","pos":[5723,5867],"source":" When the translated comparison produces a null, an attempt is made to assign a `nullable` `boolean` to a `boolean`, and the exception is thrown."},{"content":"To avoid this situation (assuming you want to treat nulls as false), use an approach such as the following:","pos":[5874,5981]},{"pos":[6042,6068],"content":"OnCreated() Partial Method","linkify":"OnCreated() Partial Method","nodes":[{"content":"OnCreated() Partial Method","pos":[0,26]}]},{"content":"The generated method <ph id=\"ph1\">`OnCreated()`</ph> is called each time the object constructor is called, including the scenario in which <ph id=\"ph2\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> calls the constructor to make a copy for original values.","pos":[6072,6318],"source":"The generated method `OnCreated()` is called each time the object constructor is called, including the scenario in which [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] calls the constructor to make a copy for original values."},{"content":"Take this behavior into account if you implement the <ph id=\"ph1\">`OnCreated()`</ph> method in your own partial class.","pos":[6319,6419],"source":" Take this behavior into account if you implement the `OnCreated()` method in your own partial class."},{"pos":[6428,6436],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6440,6535],"content":"<bpt id=\"p1\">[</bpt>Debugging Support<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/debugging-support.md)</ept>","source":"[Debugging Support](../../../../../../docs/framework/data/adonet/sql/linq/debugging-support.md)"},{"pos":[6538,6651],"content":"<bpt id=\"p1\">[</bpt>Frequently Asked Questions<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md)</ept>","source":"[Frequently Asked Questions](../../../../../../docs/framework/data/adonet/sql/linq/frequently-asked-questions.md)"}]}