{"content":"---\ntitle: \"&lt;messageSenderAuthentication&gt; element | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 8d979dfc-a6f9-42ec-96d5-7fbc13a48118\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# &lt;messageSenderAuthentication&gt; element\nSpecifies authentication options for peer-to-peer message senders.  \n  \n For more information about peer-to-peer programming, see [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md).  \n  \n \\<system.ServiceModel>  \n\\<behaviors>  \n\\<endpointBehaviors>  \n\\<behavior>  \n\\<clientCredentials>  \n\\<peer>  \n\\<messageSenderAuthentication>  \n  \n## Syntax  \n  \n```  \n  \n<messageSenderAuthentication  \ncustomCertificateValidatorType= \"namespace.typeName, [,AssemblyName] [,Version=version number] [,Culture=culture] [,PublicKeyToken=token]\"  \ncertificateValidationMode = \"ChainTrust/None/PeerTrust/PeerOrChainTrust/Custom\"  \nrevocationMode=\"NoCheck/Online/Offline\"  \ntrustedStoreLocation=\"CurrentUser/LocalMachine\"   \n/>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|customCertificateValidatorType|A type and assembly used to validate a custom type. This attribute must be set when `certificateValidationMode` is set to `Custom`.|  \n|certifcateValidationMode|Specifies one of three modes used to validate credentials. If set to `Custom`, then a `customCertificateValidator` must also be supplied.|  \n|revocationMode|One of the modes used to check for a revoked certificate lists (CRL).|  \n|trustedStoreLocation|One of the two system store locations: `LocalMachine` or `CurrentUser`. This value is used when a service certificate is negotiated to the client. Validation is performed against the **Trusted People** store in the specified store location.|  \n  \n## customCertificateValidatorType Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|String|Optional. Specifies the type name and assembly and other data used to find the type. At minimum, a namespace and type name are required. Optional information includes: assembly name, version number, culture, and public key token.|  \n  \n## certificateValidationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|Optional. One of the following values: `None`, `PeerTrust`, `ChainTrust`, `PeerOrChainTrust`, `Custom`. The default is `ChainTrust`. The default is `ChainTrust`.<br /><br /> For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## revocationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: `NoCheck`, `Online`, `Offline`. The default is `Online`.<br /><br /> For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## trustedStoreLocation Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: `LocalMachine` or `CurrentUser`. The default is `CurrentUser`. If the client application is running under a system account then the certificate is typically under `LocalMachine`. If the client application is running under a user account then the certificate is typically in `CurrentUser`. The default is `CurrentUser`.|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<peer>](../../../../../docs/framework/configure-apps/file-schema/wcf/peer-of-clientcredentials-element.md)|Specifies a credential used for authenticating the client to a peer service.|  \n  \n## Remarks  \n This element must be configured if message authentication is chosen. For output channels, each message is signed using the certificate provided by [\\<certificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/certificate-element.md). All messages, before delivered to the application, are checked against the message credential using the validator specified by the `customCertificateValidatorType` attribute of this element. The validator can either accept or reject the credential.  \n  \n## Example  \n The following code sets the message sender validation mode to `PeerOrChainTrust`.  \n  \n```  \n<behaviors>  \n <endpointBehaviors>  \n  <behavior name=\"MyEndpointBehavior\">  \n   <clientCredentials>  \n    <peer>  \n      <certificate findValue=\"www.contoso.com\"   \n                   storeLocation=\"LocalMachine\"  \n                   x509FindType=\"FindByIssuerName\" />  \n        <messageSenderAuthentication   \n          certificateValidationMode=\"PeerOrChainTrust\" />  \n       <messageSenderAuthentication certificateValidationMode=\"None\" />  \n    </peer>  \n   </clientCredentials>  \n  </behavior>  \n </endpointBehaviors>  \n```  \n  \n## See Also  \n <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>   \n <xref:System.ServiceModel.Security.PeerCredential.MessageSenderAuthentication%2A>   \n <xref:System.ServiceModel.Configuration.PeerCredentialElement.MessageSenderAuthentication%2A>   \n <xref:System.ServiceModel.Configuration.X509PeerCertificateAuthenticationElement>   \n [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)   \n [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)   \n [Peer Channel Message Authentication](http://msdn.microsoft.com/en-us/80e73386-514e-4c30-9e4a-b9ca8c173a95)   \n [Peer Channel Custom Authentication](http://msdn.microsoft.com/en-us/4aa8a82e-41a8-48e2-8621-7e1cbabdca7c)   \n [Securing Peer Channel Applications](../../../../../docs/framework/wcf/feature-details/securing-peer-channel-applications.md)","nodes":[{"pos":[12,72],"content":"&lt;messageSenderAuthentication&gt; element | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>messageSenderAuthentication<ph id=\"ph2\">&amp;gt;</ph> element | Microsoft Docs","pos":[0,60],"source":"&lt;messageSenderAuthentication&gt; element | Microsoft Docs"}]},{"pos":[370,413],"content":"&lt;messageSenderAuthentication&gt; element","linkify":"&lt;messageSenderAuthentication&gt; element","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>messageSenderAuthentication<ph id=\"ph2\">&amp;gt;</ph> element","pos":[0,43],"source":"&lt;messageSenderAuthentication&gt; element"}]},{"content":"Specifies authentication options for peer-to-peer message senders.","pos":[414,480]},{"pos":[487,648],"content":"For more information about peer-to-peer programming, see <bpt id=\"p1\">[</bpt>Peer-to-Peer Networking<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)</ept>.","source":"For more information about peer-to-peer programming, see [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)."},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[655,677],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behaviors&gt;","pos":[680,692],"source":"\\<behaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>endpointBehaviors&gt;","pos":[695,715],"source":"\\<endpointBehaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behavior&gt;","pos":[718,729],"source":"\\<behavior>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>clientCredentials&gt;","pos":[732,752],"source":"\\<clientCredentials>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>peer&gt;","pos":[755,762],"source":"\\<peer>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>messageSenderAuthentication&gt;","pos":[765,795],"source":"\\<messageSenderAuthentication>"},{"pos":[804,810],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1189,1212],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements","pos":[1216,1295]},{"pos":[1305,1315],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1322,1331]},{"content":"Description","pos":[1332,1343]},{"content":"customCertificateValidatorType","pos":[1386,1416]},{"content":"A type and assembly used to validate a custom type.","pos":[1417,1468]},{"content":"This attribute must be set when <ph id=\"ph1\">`certificateValidationMode`</ph> is set to <ph id=\"ph2\">`Custom`</ph>.","pos":[1469,1548],"source":" This attribute must be set when `certificateValidationMode` is set to `Custom`."},{"content":"certifcateValidationMode","pos":[1553,1577]},{"content":"Specifies one of three modes used to validate credentials.","pos":[1578,1636]},{"content":"If set to <ph id=\"ph1\">`Custom`</ph>, then a <ph id=\"ph2\">`customCertificateValidator`</ph> must also be supplied.","pos":[1637,1715],"source":" If set to `Custom`, then a `customCertificateValidator` must also be supplied."},{"content":"revocationMode","pos":[1720,1734]},{"content":"One of the modes used to check for a revoked certificate lists (CRL).","pos":[1735,1804]},{"content":"trustedStoreLocation","pos":[1809,1829]},{"content":"One of the two system store locations: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[1830,1901],"source":"One of the two system store locations: `LocalMachine` or `CurrentUser`."},{"content":"This value is used when a service certificate is negotiated to the client.","pos":[1902,1976]},{"content":"Validation is performed against the <bpt id=\"p1\">**</bpt>Trusted People<ept id=\"p1\">**</ept> store in the specified store location.","pos":[1977,2070],"source":" Validation is performed against the **Trusted People** store in the specified store location."},{"pos":[2080,2120],"content":"customCertificateValidatorType Attribute","linkify":"customCertificateValidatorType Attribute","nodes":[{"content":"customCertificateValidatorType Attribute","pos":[0,40]}]},{"content":"Value","pos":[2127,2132]},{"content":"Description","pos":[2133,2144]},{"content":"String","pos":[2183,2189]},{"content":"Optional.","pos":[2190,2199]},{"content":"Specifies the type name and assembly and other data used to find the type.","pos":[2200,2274]},{"content":"At minimum, a namespace and type name are required.","pos":[2275,2326]},{"content":"Optional information includes: assembly name, version number, culture, and public key token.","pos":[2327,2419]},{"pos":[2429,2464],"content":"certificateValidationMode Attribute","linkify":"certificateValidationMode Attribute","nodes":[{"content":"certificateValidationMode Attribute","pos":[0,35]}]},{"content":"Value","pos":[2471,2476]},{"content":"Description","pos":[2477,2488]},{"content":"Enumeration","pos":[2527,2538]},{"content":"Optional.","pos":[2539,2548]},{"content":"One of the following values: <ph id=\"ph1\">`None`</ph>, <ph id=\"ph2\">`PeerTrust`</ph>, <ph id=\"ph3\">`ChainTrust`</ph>, <ph id=\"ph4\">`PeerOrChainTrust`</ph>, <ph id=\"ph5\">`Custom`</ph>.","pos":[2549,2642],"source":" One of the following values: `None`, `PeerTrust`, `ChainTrust`, `PeerOrChainTrust`, `Custom`."},{"content":"The default is <ph id=\"ph1\">`ChainTrust`</ph>.","pos":[2643,2671],"source":" The default is `ChainTrust`."},{"content":"The default is <ph id=\"ph1\">`ChainTrust`</ph>.","pos":[2672,2700],"source":" The default is `ChainTrust`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[2713,2847],"source":" For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[2857,2881],"content":"revocationMode Attribute","linkify":"revocationMode Attribute","nodes":[{"content":"revocationMode Attribute","pos":[0,24]}]},{"content":"Value","pos":[2888,2893]},{"content":"Description","pos":[2894,2905]},{"content":"Enumeration","pos":[2944,2955]},{"content":"One of the following values: <ph id=\"ph1\">`NoCheck`</ph>, <ph id=\"ph2\">`Online`</ph>, <ph id=\"ph3\">`Offline`</ph>.","pos":[2956,3016],"source":"One of the following values: `NoCheck`, `Online`, `Offline`."},{"content":"The default is <ph id=\"ph1\">`Online`</ph>.","pos":[3017,3041],"source":" The default is `Online`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[3054,3188],"source":" For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[3198,3228],"content":"trustedStoreLocation Attribute","linkify":"trustedStoreLocation Attribute","nodes":[{"content":"trustedStoreLocation Attribute","pos":[0,30]}]},{"content":"Value","pos":[3235,3240]},{"content":"Description","pos":[3241,3252]},{"content":"Enumeration","pos":[3291,3302]},{"content":"One of the following values: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[3303,3364],"source":"One of the following values: `LocalMachine` or `CurrentUser`."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3365,3394],"source":" The default is `CurrentUser`."},{"content":"If the client application is running under a system account then the certificate is typically under <ph id=\"ph1\">`LocalMachine`</ph>.","pos":[3395,3510],"source":" If the client application is running under a system account then the certificate is typically under `LocalMachine`."},{"content":"If the client application is running under a user account then the certificate is typically in <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3511,3620],"source":" If the client application is running under a user account then the certificate is typically in `CurrentUser`."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3621,3650],"source":" The default is `CurrentUser`."},{"pos":[3661,3675],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[3679,3684]},{"pos":[3694,3709],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[3716,3723]},{"content":"Description","pos":[3724,3735]},{"pos":[3776,3884],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>peer&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/peer-of-clientcredentials-element.md)</ept>","source":"[\\<peer>](../../../../../docs/framework/configure-apps/file-schema/wcf/peer-of-clientcredentials-element.md)"},{"content":"Specifies a credential used for authenticating the client to a peer service.","pos":[3885,3961]},{"pos":[3971,3978],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This element must be configured if message authentication is chosen.","pos":[3982,4050]},{"content":"For output channels, each message is signed using the certificate provided by <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>certificate&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/certificate-element.md)</ept>.","pos":[4051,4231],"source":" For output channels, each message is signed using the certificate provided by [\\<certificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/certificate-element.md)."},{"content":"All messages, before delivered to the application, are checked against the message credential using the validator specified by the <ph id=\"ph1\">`customCertificateValidatorType`</ph> attribute of this element.","pos":[4232,4422],"source":" All messages, before delivered to the application, are checked against the message credential using the validator specified by the `customCertificateValidatorType` attribute of this element."},{"content":"The validator can either accept or reject the credential.","pos":[4423,4480]},{"pos":[4489,4496],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4500,4581],"content":"The following code sets the message sender validation mode to <ph id=\"ph1\">`PeerOrChainTrust`</ph>.","source":"The following code sets the message sender validation mode to `PeerOrChainTrust`."},{"pos":[5131,5139],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\"> [</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept><ph id=\"ph1\"> </ph>","pos":[5486,5595],"source":" [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Peer-to-Peer Networking<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)</ept><ph id=\"ph1\"> </ph>","pos":[5598,5703],"source":" [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Peer Channel Message Authentication<ept id=\"p1\">](http://msdn.microsoft.com/en-us/80e73386-514e-4c30-9e4a-b9ca8c173a95)</ept><ph id=\"ph1\"> </ph>","pos":[5706,5815],"source":" [Peer Channel Message Authentication](http://msdn.microsoft.com/en-us/80e73386-514e-4c30-9e4a-b9ca8c173a95) "},{"content":"<bpt id=\"p1\"> [</bpt>Peer Channel Custom Authentication<ept id=\"p1\">](http://msdn.microsoft.com/en-us/4aa8a82e-41a8-48e2-8621-7e1cbabdca7c)</ept><ph id=\"ph1\"> </ph>","pos":[5818,5926],"source":" [Peer Channel Custom Authentication](http://msdn.microsoft.com/en-us/4aa8a82e-41a8-48e2-8621-7e1cbabdca7c) "},{"content":"<bpt id=\"p1\"> [</bpt>Securing Peer Channel Applications<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/securing-peer-channel-applications.md)</ept>","pos":[5929,6055],"source":" [Securing Peer Channel Applications](../../../../../docs/framework/wcf/feature-details/securing-peer-channel-applications.md)"}]}