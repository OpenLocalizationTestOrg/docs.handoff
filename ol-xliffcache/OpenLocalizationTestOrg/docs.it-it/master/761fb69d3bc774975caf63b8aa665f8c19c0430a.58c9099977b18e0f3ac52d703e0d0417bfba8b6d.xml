{"content":"---\ntitle: Discards - C# Guide\ndescription: Describes C#'s support for discards, which are unassigned, discardable variables, and the ways in which discards can be used.\nauthor: rpetrusha\nms.author: ronpet\nms.date: 07/21/2017\n---\n# Discards - C# Guide\n\nStarting with C# 7.0, C# supports discards, which are temporary, dummy variables that are intentionally unused in application code. Discards are equivalent to unassigned variables; they do not have a value. Because there is only a single discard variable, and that variable may not even be allocated storage, discards can reduce memory allocations. Because they make the intent of your code clear, they enhance its readability and maintainability.\n\nYou indicate that a variable is a discard by assigning it the underscore (`_`) as its name. For example, the following method call returns a 3-tuple in which the first and second values are discards and *area* is a previously declared variable to be set to the corresponding third component returned by *GetCityInformation*:\n\n```csharp\n(_, _, area) = city.GetCityInformation(cityName);\n```\n\nIn C# 7.0, discards are supported in assignments in the following contexts:\n\n- Tuple and object [deconstruction](deconstruct.md).\n- Pattern matching with [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md).\n- Calls to methods with `out` parameters.\n- A standalone `_` when no `_` is in scope.\n\nWhen `_` is a valid discard, attempting to retrieve its value or use it in an assignment operation generates compiler error CS0301, \"The name '\\_' does not exist in the current context\". This is because `_` is not assigned a value, and may not even be assigned a storage location. If it were an actual variable, you could not discard more than one value, as the previous example did.\n\n## Tuple and object deconstruction\n\nDiscards are particularly useful in working with tuples when your application code uses some tuple elements but ignores others. For example, the following `QueryCityDataForYears` method returns a 6-tuple with the name of a city, its area, a year, the city's population for that year, a second year, and the city's population for that second year. The example shows the change in population between those two years. Of the data available from the tuple, we're unconcerned with the city area, and we know the city name and the two dates at design-time. As a result, we're only interested in the two population values stored in the tuple, and can handle its remaining values as discards.  \n\n[!code-csharp[Tuple-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/discard-tuple1.cs)]\n\nFor more information on deconstructing tuples with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-tuple-elements-with-discards).\n\nThe `Deconstruct` method of a class, structure, or interface also allows you to retrieve and deconstruct a specific set of data from an object. You can use discards when you are interested in working with only a subset of the deconstructed values. The following example deconstructs a `Person` object into four strings (the first and last names, the city, and the state), but discards the last name and the state.\n\n[!code-csharp[Class-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/class-discard1.cs)]\n\nFor more information on deconstructing user-defined types with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-a-user-defined-type-with-discards).\n\n## Pattern matching with `switch` and `is`\n\nThe *discard pattern* can be used in pattern matching with the [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md) keywords. Every expression always matches the discard pattern.\n\nThe following example defines a `ProvidesFormatInfo` method that uses [is](language-reference/keywords/is.md) statements to determine whether an object provides an <xref:System.IFormatProvider> implementation and tests whether the object is `null`. It also uses the discard pattern to handle non-null objects of any other type.\n\n[!code-csharp[discard-pattern](../../samples/snippets/csharp/programming-guide/discards/discard-pattern2.cs)]\n\n## Calls to methods with out parameters\n\nWhen calling the `Deconstruct` method to deconstruct a user-defined type (an instance of a class, structure, or interface), you can discard the values of individual `out` arguments. But you can also discard the value of `out` arguments when calling any method with an out parameter.\n\nThe following example calls the [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) method to determine whether the string representation of a date is valid in the current culture. Because the example is concerned only with validating the date string and not with parsing it to extract the date, the `out` argument to the method is a discard.\n\n[!code-csharp[discard-with-out](../../samples/snippets/csharp/programming-guide/discards/discard-out1.cs)]\n\n## A standalone discard\n\nYou can use a standalone discard to indicate any variable that you choose to ignore. The following example uses a standalone discard to ignore the <xref:System.Threading.Tasks.Task> object returned by an asynchronous operation. This has the effect of suppressing the exception that the operation throws as it is about to complete.\n\n[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard1.cs)]\n\nNote that `_` is also a valid identifier. When used outside of a supported context, `_` is treated not as a discard but as a valid variable. If an identifier named `_` is already in scope, the use of `_` as a standalone discard can result in:\n\n- Accidental modification of the value of the in-scope `_` variable by assigning it the value of the intended discard. For example:\n\n   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#1)]\n\n- A compiler error for violating type safety. For example:\n\n   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#2)]\n\n- Compiler error CS0136, \"A local or parameter named '\\_' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter.\" For example:\n\n   [!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#3)]\n\n## See also\n\n- [Deconstructing tuples and other types](deconstruct.md)\n- [`is` keyword](language-reference/keywords/is.md)\n- [`switch` keyword](language-reference/keywords/switch.md)\n","nodes":[{"pos":[4,225],"embed":true,"restype":"x-metadata","content":"title: Discards - C# Guide\ndescription: Describes C#'s support for discards, which are unassigned, discardable variables, and the ways in which discards can be used.\nauthor: rpetrusha\nms.author: ronpet\nms.date: 07/21/2017","nodes":[{"content":"Discards - C# Guide","nodes":[{"pos":[0,19],"content":"Discards - C# Guide","nodes":[{"content":"Discards - C# Guide","pos":[0,19]}]}],"path":["title"],"nosxs":false},{"content":"Describes C#'s support for discards, which are unassigned, discardable variables, and the ways in which discards can be used.","nodes":[{"pos":[0,125],"content":"Describes C#'s support for discards, which are unassigned, discardable variables, and the ways in which discards can be used.","nodes":[{"content":"Describes C#'s support for discards, which are unassigned, discardable variables, and the ways in which discards can be used.","pos":[0,125]}]}],"path":["description"],"nosxs":false}],"yml":true},{"pos":[232,251],"content":"Discards - C# Guide","linkify":"Discards - C# Guide","nodes":[{"content":"Discards - C# Guide","pos":[0,19]}]},{"content":"Starting with C# 7.0, C# supports discards, which are temporary, dummy variables that are intentionally unused in application code.","pos":[253,384]},{"content":"Discards are equivalent to unassigned variables; they do not have a value.","pos":[385,459]},{"content":"Because there is only a single discard variable, and that variable may not even be allocated storage, discards can reduce memory allocations.","pos":[460,601]},{"content":"Because they make the intent of your code clear, they enhance its readability and maintainability.","pos":[602,700]},{"content":"You indicate that a variable is a discard by assigning it the underscore (<ph id=\"ph1\">`_`</ph>) as its name.","pos":[702,793],"source":"You indicate that a variable is a discard by assigning it the underscore (`_`) as its name."},{"content":"For example, the following method call returns a 3-tuple in which the first and second values are discards and <bpt id=\"p1\">*</bpt>area<ept id=\"p1\">*</ept> is a previously declared variable to be set to the corresponding third component returned by <bpt id=\"p2\">*</bpt>GetCityInformation<ept id=\"p2\">*</ept>:","pos":[794,1026],"source":" For example, the following method call returns a 3-tuple in which the first and second values are discards and *area* is a previously declared variable to be set to the corresponding third component returned by *GetCityInformation*:"},{"content":"In C# 7.0, discards are supported in assignments in the following contexts:","pos":[1093,1168]},{"pos":[1172,1222],"content":"Tuple and object <bpt id=\"p1\">[</bpt>deconstruction<ept id=\"p1\">](deconstruct.md)</ept>.","source":"Tuple and object [deconstruction](deconstruct.md)."},{"pos":[1225,1339],"content":"Pattern matching with <bpt id=\"p1\">[</bpt>is<ept id=\"p1\">](language-reference/keywords/is.md)</ept> and <bpt id=\"p2\">[</bpt>switch<ept id=\"p2\">](language-reference/keywords/switch.md)</ept>.","source":"Pattern matching with [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md)."},{"pos":[1342,1381],"content":"Calls to methods with <ph id=\"ph1\">`out`</ph> parameters.","source":"Calls to methods with `out` parameters."},{"pos":[1384,1425],"content":"A standalone <ph id=\"ph1\">`_`</ph> when no <ph id=\"ph2\">`_`</ph> is in scope.","source":"A standalone `_` when no `_` is in scope."},{"content":"When <ph id=\"ph1\">`_`</ph> is a valid discard, attempting to retrieve its value or use it in an assignment operation generates compiler error CS0301, \"The name '<ph id=\"ph2\">\\_</ph>' does not exist in the current context\".","pos":[1427,1613],"source":"When `_` is a valid discard, attempting to retrieve its value or use it in an assignment operation generates compiler error CS0301, \"The name '\\_' does not exist in the current context\"."},{"content":"This is because <ph id=\"ph1\">`_`</ph> is not assigned a value, and may not even be assigned a storage location.","pos":[1614,1707],"source":" This is because `_` is not assigned a value, and may not even be assigned a storage location."},{"content":"If it were an actual variable, you could not discard more than one value, as the previous example did.","pos":[1708,1810]},{"pos":[1815,1846],"content":"Tuple and object deconstruction","linkify":"Tuple and object deconstruction","nodes":[{"content":"Tuple and object deconstruction","pos":[0,31]}]},{"content":"Discards are particularly useful in working with tuples when your application code uses some tuple elements but ignores others.","pos":[1848,1975]},{"content":"For example, the following <ph id=\"ph1\">`QueryCityDataForYears`</ph> method returns a 6-tuple with the name of a city, its area, a year, the city's population for that year, a second year, and the city's population for that second year.","pos":[1976,2194],"source":" For example, the following `QueryCityDataForYears` method returns a 6-tuple with the name of a city, its area, a year, the city's population for that year, a second year, and the city's population for that second year."},{"content":"The example shows the change in population between those two years.","pos":[2195,2262]},{"content":"Of the data available from the tuple, we're unconcerned with the city area, and we know the city name and the two dates at design-time.","pos":[2263,2398]},{"content":"As a result, we're only interested in the two population values stored in the tuple, and can handle its remaining values as discards.","pos":[2399,2532]},{"pos":[2656,2821],"content":"For more information on deconstructing tuples with discards, see <bpt id=\"p1\">[</bpt>Deconstructing tuples and other types<ept id=\"p1\">](deconstruct.md#deconstructing-tuple-elements-with-discards)</ept>.","source":"For more information on deconstructing tuples with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-tuple-elements-with-discards)."},{"content":"The <ph id=\"ph1\">`Deconstruct`</ph> method of a class, structure, or interface also allows you to retrieve and deconstruct a specific set of data from an object.","pos":[2823,2966],"source":"The `Deconstruct` method of a class, structure, or interface also allows you to retrieve and deconstruct a specific set of data from an object."},{"content":"You can use discards when you are interested in working with only a subset of the deconstructed values.","pos":[2967,3070]},{"content":"The following example deconstructs a <ph id=\"ph1\">`Person`</ph> object into four strings (the first and last names, the city, and the state), but discards the last name and the state.","pos":[3071,3236],"source":" The following example deconstructs a `Person` object into four strings (the first and last names, the city, and the state), but discards the last name and the state."},{"pos":[3358,3540],"content":"For more information on deconstructing user-defined types with discards, see <bpt id=\"p1\">[</bpt>Deconstructing tuples and other types<ept id=\"p1\">](deconstruct.md#deconstructing-a-user-defined-type-with-discards)</ept>.","source":"For more information on deconstructing user-defined types with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-a-user-defined-type-with-discards)."},{"pos":[3545,3584],"content":"Pattern matching with <ph id=\"ph1\">`switch`</ph> and <ph id=\"ph2\">`is`</ph>","linkify":"Pattern matching with `switch` and `is`","source":"Pattern matching with `switch` and `is`"},{"content":"The <bpt id=\"p1\">*</bpt>discard pattern<ept id=\"p1\">*</ept> can be used in pattern matching with the <bpt id=\"p2\">[</bpt>is<ept id=\"p2\">](language-reference/keywords/is.md)</ept> and <bpt id=\"p3\">[</bpt>switch<ept id=\"p3\">](language-reference/keywords/switch.md)</ept> keywords.","pos":[3586,3750],"source":"The *discard pattern* can be used in pattern matching with the [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md) keywords."},{"content":"Every expression always matches the discard pattern.","pos":[3751,3803]},{"content":"The following example defines a <ph id=\"ph1\">`ProvidesFormatInfo`</ph> method that uses <bpt id=\"p1\">[</bpt>is<ept id=\"p1\">](language-reference/keywords/is.md)</ept> statements to determine whether an object provides an <ph id=\"ph2\">&lt;xref:System.IFormatProvider&gt;</ph> implementation and tests whether the object is <ph id=\"ph3\">`null`</ph>.","pos":[3805,4053],"source":"The following example defines a `ProvidesFormatInfo` method that uses [is](language-reference/keywords/is.md) statements to determine whether an object provides an <xref:System.IFormatProvider> implementation and tests whether the object is `null`."},{"content":"It also uses the discard pattern to handle non-null objects of any other type.","pos":[4054,4132]},{"pos":[4248,4284],"content":"Calls to methods with out parameters","linkify":"Calls to methods with out parameters","nodes":[{"content":"Calls to methods with out parameters","pos":[0,36]}]},{"content":"When calling the <ph id=\"ph1\">`Deconstruct`</ph> method to deconstruct a user-defined type (an instance of a class, structure, or interface), you can discard the values of individual <ph id=\"ph2\">`out`</ph> arguments.","pos":[4286,4467],"source":"When calling the `Deconstruct` method to deconstruct a user-defined type (an instance of a class, structure, or interface), you can discard the values of individual `out` arguments."},{"content":"But you can also discard the value of <ph id=\"ph1\">`out`</ph> arguments when calling any method with an out parameter.","pos":[4468,4568],"source":" But you can also discard the value of `out` arguments when calling any method with an out parameter."},{"content":"The following example calls the <bpt id=\"p1\">[</bpt>DateTime.TryParse(String, out DateTime)<ept id=\"p1\">](&lt;xref:System.DateTime.TryParse(System.String,System.DateTime@)&gt;)</ept> method to determine whether the string representation of a date is valid in the current culture.","pos":[4570,4805],"source":"The following example calls the [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) method to determine whether the string representation of a date is valid in the current culture."},{"content":"Because the example is concerned only with validating the date string and not with parsing it to extract the date, the <ph id=\"ph1\">`out`</ph> argument to the method is a discard.","pos":[4806,4967],"source":" Because the example is concerned only with validating the date string and not with parsing it to extract the date, the `out` argument to the method is a discard."},{"pos":[5080,5100],"content":"A standalone discard","linkify":"A standalone discard","nodes":[{"content":"A standalone discard","pos":[0,20]}]},{"content":"You can use a standalone discard to indicate any variable that you choose to ignore.","pos":[5102,5186]},{"content":"The following example uses a standalone discard to ignore the <ph id=\"ph1\">&lt;xref:System.Threading.Tasks.Task&gt;</ph> object returned by an asynchronous operation.","pos":[5187,5329],"source":" The following example uses a standalone discard to ignore the <xref:System.Threading.Tasks.Task> object returned by an asynchronous operation."},{"content":"This has the effect of suppressing the exception that the operation throws as it is about to complete.","pos":[5330,5432]},{"content":"Note that <ph id=\"ph1\">`_`</ph> is also a valid identifier.","pos":[5551,5592],"source":"Note that `_` is also a valid identifier."},{"content":"When used outside of a supported context, <ph id=\"ph1\">`_`</ph> is treated not as a discard but as a valid variable.","pos":[5593,5691],"source":" When used outside of a supported context, `_` is treated not as a discard but as a valid variable."},{"content":"If an identifier named <ph id=\"ph1\">`_`</ph> is already in scope, the use of <ph id=\"ph2\">`_`</ph> as a standalone discard can result in:","pos":[5692,5793],"source":" If an identifier named `_` is already in scope, the use of `_` as a standalone discard can result in:"},{"content":"Accidental modification of the value of the in-scope <ph id=\"ph1\">`_`</ph> variable by assigning it the value of the intended discard.","pos":[5797,5913],"source":"Accidental modification of the value of the in-scope `_` variable by assigning it the value of the intended discard."},{"content":"For example:","pos":[5914,5926]},{"content":"A compiler error for violating type safety.","pos":[6052,6095]},{"content":"For example:","pos":[6096,6108]},{"content":"Compiler error CS0136, \"A local or parameter named '<ph id=\"ph1\">\\_</ph>' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter.\"","pos":[6234,6409],"source":"Compiler error CS0136, \"A local or parameter named '\\_' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter.\""},{"content":"For example:","pos":[6410,6422]},{"pos":[6549,6557],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6561,6616],"content":"<bpt id=\"p1\">[</bpt>Deconstructing tuples and other types<ept id=\"p1\">](deconstruct.md)</ept>","source":"[Deconstructing tuples and other types](deconstruct.md)"},{"pos":[6619,6668],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">`is`</ph> keyword<ept id=\"p1\">](language-reference/keywords/is.md)</ept>","source":"[`is` keyword](language-reference/keywords/is.md)"},{"pos":[6671,6728],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">`switch`</ph> keyword<ept id=\"p1\">](language-reference/keywords/switch.md)</ept>","source":"[`switch` keyword](language-reference/keywords/switch.md)"}]}