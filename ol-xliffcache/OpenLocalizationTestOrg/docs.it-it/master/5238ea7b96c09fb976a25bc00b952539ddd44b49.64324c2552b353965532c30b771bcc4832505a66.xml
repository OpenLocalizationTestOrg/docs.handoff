{"content":"---\ntitle: \"<cookieHandler>\"\nms.date: \"03/30/2017\"\nms.assetid: bfdc127f-8d94-4566-8bef-f583c6ae7398\nauthor: \"BrucePerlerMS\"\n---\n# \\<cookieHandler>\nConfigures the <xref:System.IdentityModel.Services.CookieHandler> that the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM) uses to read and write cookies.  \n  \n \\<system.identityModel.services>  \n\\<federationConfiguration>  \n\\<cookieHandler>  \n  \n## Syntax  \n  \n```xml  \n<system.identityModel.services>  \n  <federationConfiguration>  \n    <cookieHandler name=xs:string  \n        path=Path  \n        mode=\"Chunked||Custom||Default\"  \n        persistentSessionLifetime=xs:string  \n        hideFromScript=xs:boolean  \n        requireSSL=xs:boolean  \n        domain=xs:string  \n      <chunkedCookieHandler size=xs:int />  \n      <customCookieHandler type=\"MyNamespace.MyCustomCookieHandler, MyAssembly\" />  \n    </cookieHandler>  \n  </federationConfiguration>  \n</system.identityModel.services>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|name|Specifies the base name for any cookies written. The default is \"FedAuth\".|  \n|path|Specifies the path value for any cookies written. The default is \"HttpRuntime.AppDomainAppVirtualPath\".|  \n|mode|One of the <xref:System.IdentityModel.Services.CookieHandlerMode> values that specifies the kind of cookie handler used by the SAM. The following values may be used:<br /><br /> -   \"Default\" — The same as \"Chunked\".<br />-   \"Chunked\" — Uses an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class. This cookie handler ensures that individual cookies do not exceed a set maximum size. It accomplishes this by potentially \"chunking\" one logical cookie into a number of cookies on-the-wire.<br />-   \"Custom\" — Uses an instance of a custom class derived from <xref:System.IdentityModel.Services.CookieHandler>. The derived class is referenced by the `<customCookieHandler>` child element.<br /><br /> The default is \"Default\".|  \n|persistentSessionLifetime|Specifies the lifetime of persistent sessions. If zero, transient sessions are always used. The default value is \"0:0:0\", which specifies a transient session. The maximum value is \"365:0:0\", which specifies a session of 365 days. The value should be specified according to the following restriction: `<xs:pattern value=\"([0-9.]+:){0,1}([0-9]+:){0,1}[0-9.]+\" />`, where the leftmost value specifies days, the middle value (if present) specifies hours, and the rightmost value (if present) specifies minutes.|  \n|requireSsl|Specifies whether the \"Secure\" flag is emitted for any cookies written. If this value is set, the sign-in session cookies will only be available over HTTPS. The default is \"true\".|  \n|hideFromScript|Controls whether the \"HttpOnly\" flag is emitted for any cookies written. Certain web browsers honor this flag by keeping client-side script from accessing the cookie value. The default is \"true\".|  \n|domain|The domain value for any cookies written. The default is \"\".|  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<chunkedCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/chunkedcookiehandler.md)|Configures the <xref:System.IdentityModel.Services.ChunkedCookieHandler>. This element may only be present if the `mode` attribute of the `<cookieHandler>` element is \"Default\" or \"Chunked\".|  \n|[\\<customCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/customcookiehandler.md)|Sets the custom cookie handler type. This element must be present if the `mode` attribute of the `<cookieHandler>` element is \"Custom\". It cannot be present for any other values of the `mode` attribute. The custom type must be derived from the <xref:System.IdentityModel.Services.CookieHandler> class.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<federationConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md)|Contains the settings that configure the <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> (WSFAM) and the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM).|  \n  \n## Remarks  \n The <xref:System.IdentityModel.Services.CookieHandler> is responsible for reading and writing raw cookies at the HTTP protocol level. You can configure either a <xref:System.IdentityModel.Services.ChunkedCookieHandler> or a custom cookie handler derived from the <xref:System.IdentityModel.Services.CookieHandler> class.  \n  \n To configure a chunked cookie handler, set the mode attribute to \"Chunked\" or \"Default\". The default chunk size is 2000 bytes, but you may optionally specify a different chunk size by including a `<chunkedCookieHandler>` child element.  \n  \n To configure a custom cookie handler, set the mode attribute to \"Custom\". You must also specify a `<customCookieHandler>` child element that references the type of your custom handler.  \n  \n The `<cookieHandler>` element is represented by the <xref:System.IdentityModel.Services.CookieHandlerElement> class. The cookie handler that was specified in configuration is available from the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration.CookieHandler%2A> property of the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration> object set on the <xref:System.IdentityModel.Services.FederatedAuthentication.FederationConfiguration%2A?displayProperty=nameWithType> property.  \n  \n## Example  \n The following XML shows a `<cookieHandler>` element. In this example, because the `mode` attribute is not specified, the default cookie handler will be used by the SAM. This is an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class. Because the `<chunkedCookieHandler>` child element is not specified, the default chunk size will be used. HTTPS will not be required because the `requireSsl` attribute is set `false`.  \n  \n> [!WARNING]\n>  In this example, HTTPS is not required to write session cookies. This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`. This setting is not recommended for most production environments as it may present a security risk.  \n  \n```xml  \n<cookieHandler requireSsl=\"false\" />  \n```  \n  \n## See also\n\n- <xref:System.IdentityModel.Services.CookieHandler>\n- <xref:System.IdentityModel.Services.ChunkedCookieHandler>\n- <xref:System.IdentityModel.Services.SessionAuthenticationModule>\n","nodes":[{"pos":[4,123],"embed":true,"restype":"x-metadata","content":"title: \"<cookieHandler>\"\nms.date: \"03/30/2017\"\nms.assetid: bfdc127f-8d94-4566-8bef-f583c6ae7398\nauthor: \"BrucePerlerMS\"","nodes":[{"content":"<cookieHandler>","nodes":[],"path":["title"],"nosxs":false}],"yml":true},{"pos":[130,146],"content":"\\<cookieHandler>","linkify":"\\<cookieHandler>","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>cookieHandler&gt;","pos":[0,16],"source":"\\<cookieHandler>"}]},{"pos":[147,324],"content":"Configures the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> that the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.SessionAuthenticationModule&gt;</ph> (SAM) uses to read and write cookies.","source":"Configures the <xref:System.IdentityModel.Services.CookieHandler> that the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM) uses to read and write cookies."},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.identityModel.services&gt;","pos":[331,363],"source":"\\<system.identityModel.services>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>federationConfiguration&gt;","pos":[366,392],"source":"\\<federationConfiguration>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>cookieHandler&gt;","pos":[395,411],"source":"\\<cookieHandler>"},{"pos":[420,426],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[975,998],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[1002,1082]},{"pos":[1092,1102],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1109,1118]},{"content":"Description","pos":[1119,1130]},{"content":"name","pos":[1173,1177]},{"content":"Specifies the base name for any cookies written.","pos":[1178,1226]},{"content":"The default is \"FedAuth\".","pos":[1227,1252]},{"content":"path","pos":[1257,1261]},{"content":"Specifies the path value for any cookies written.","pos":[1262,1311]},{"content":"The default is \"HttpRuntime.AppDomainAppVirtualPath\".","pos":[1312,1365]},{"content":"mode","pos":[1370,1374]},{"content":"One of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandlerMode&gt;</ph> values that specifies the kind of cookie handler used by the SAM.","pos":[1375,1506],"source":"One of the <xref:System.IdentityModel.Services.CookieHandlerMode> values that specifies the kind of cookie handler used by the SAM."},{"content":"The following values may be used:","pos":[1507,1540]},{"content":"-   \"Default\" — The same as \"Chunked\".","pos":[1553,1591]},{"content":"-   \"Chunked\" — Uses an instance of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph> class.","pos":[1597,1701],"source":"-   \"Chunked\" — Uses an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class."},{"content":"This cookie handler ensures that individual cookies do not exceed a set maximum size.","pos":[1702,1787]},{"content":"It accomplishes this by potentially \"chunking\" one logical cookie into a number of cookies on-the-wire.","pos":[1788,1891]},{"content":"-   \"Custom\" — Uses an instance of a custom class derived from <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph>.","pos":[1897,2011],"source":"-   \"Custom\" — Uses an instance of a custom class derived from <xref:System.IdentityModel.Services.CookieHandler>."},{"content":"The derived class is referenced by the <ph id=\"ph1\">`&lt;customCookieHandler&gt;`</ph> child element.","pos":[2012,2089],"source":" The derived class is referenced by the `<customCookieHandler>` child element."},{"content":"The default is \"Default\".","pos":[2102,2127]},{"content":"persistentSessionLifetime","pos":[2132,2157]},{"content":"Specifies the lifetime of persistent sessions.","pos":[2158,2204]},{"content":"If zero, transient sessions are always used.","pos":[2205,2249]},{"content":"The default value is \"0:0:0\", which specifies a transient session.","pos":[2250,2316]},{"content":"The maximum value is \"365:0:0\", which specifies a session of 365 days.","pos":[2317,2387]},{"content":"The value should be specified according to the following restriction: <ph id=\"ph1\">`&lt;xs:pattern value=\"([0-9.]+:){0,1}([0-9]+:){0,1}[0-9.]+\" /&gt;`</ph>, where the leftmost value specifies days, the middle value (if present) specifies hours, and the rightmost value (if present) specifies minutes.","pos":[2388,2664],"source":" The value should be specified according to the following restriction: `<xs:pattern value=\"([0-9.]+:){0,1}([0-9]+:){0,1}[0-9.]+\" />`, where the leftmost value specifies days, the middle value (if present) specifies hours, and the rightmost value (if present) specifies minutes."},{"content":"requireSsl","pos":[2669,2679]},{"content":"Specifies whether the \"Secure\" flag is emitted for any cookies written.","pos":[2680,2751]},{"content":"If this value is set, the sign-in session cookies will only be available over HTTPS.","pos":[2752,2836]},{"content":"The default is \"true\".","pos":[2837,2859]},{"content":"hideFromScript","pos":[2864,2878]},{"content":"Controls whether the \"HttpOnly\" flag is emitted for any cookies written.","pos":[2879,2951]},{"content":"Certain web browsers honor this flag by keeping client-side script from accessing the cookie value.","pos":[2952,3051]},{"content":"The default is \"true\".","pos":[3052,3074]},{"content":"domain","pos":[3079,3085]},{"content":"The domain value for any cookies written.","pos":[3086,3127]},{"content":"The default is \"\".","pos":[3128,3146]},{"pos":[3157,3171],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[3178,3185]},{"content":"Description","pos":[3186,3197]},{"pos":[3238,3373],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>chunkedCookieHandler&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/chunkedcookiehandler.md)</ept>","source":"[\\<chunkedCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/chunkedcookiehandler.md)"},{"content":"Configures the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph>.","pos":[3374,3447],"source":"Configures the <xref:System.IdentityModel.Services.ChunkedCookieHandler>."},{"content":"This element may only be present if the <ph id=\"ph1\">`mode`</ph> attribute of the <ph id=\"ph2\">`&lt;cookieHandler&gt;`</ph> element is \"Default\" or \"Chunked\".","pos":[3448,3564],"source":" This element may only be present if the `mode` attribute of the `<cookieHandler>` element is \"Default\" or \"Chunked\"."},{"pos":[3569,3702],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>customCookieHandler&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/customcookiehandler.md)</ept>","source":"[\\<customCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/customcookiehandler.md)"},{"content":"Sets the custom cookie handler type.","pos":[3703,3739]},{"content":"This element must be present if the <ph id=\"ph1\">`mode`</ph> attribute of the <ph id=\"ph2\">`&lt;cookieHandler&gt;`</ph> element is \"Custom\".","pos":[3740,3838],"source":" This element must be present if the `mode` attribute of the `<cookieHandler>` element is \"Custom\"."},{"content":"It cannot be present for any other values of the <ph id=\"ph1\">`mode`</ph> attribute.","pos":[3839,3905],"source":" It cannot be present for any other values of the `mode` attribute."},{"content":"The custom type must be derived from the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> class.","pos":[3906,4004],"source":" The custom type must be derived from the <xref:System.IdentityModel.Services.CookieHandler> class."},{"pos":[4015,4030],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[4037,4044]},{"content":"Description","pos":[4045,4056]},{"pos":[4097,4238],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>federationConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md)</ept>","source":"[\\<federationConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md)"},{"pos":[4239,4437],"content":"Contains the settings that configure the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.WSFederationAuthenticationModule&gt;</ph> (WSFAM) and the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.SessionAuthenticationModule&gt;</ph> (SAM).","source":"Contains the settings that configure the <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> (WSFAM) and the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM)."},{"pos":[4447,4454],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> is responsible for reading and writing raw cookies at the HTTP protocol level.","pos":[4458,4591],"source":"The <xref:System.IdentityModel.Services.CookieHandler> is responsible for reading and writing raw cookies at the HTTP protocol level."},{"content":"You can configure either a <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph> or a custom cookie handler derived from the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> class.","pos":[4592,4778],"source":" You can configure either a <xref:System.IdentityModel.Services.ChunkedCookieHandler> or a custom cookie handler derived from the <xref:System.IdentityModel.Services.CookieHandler> class."},{"content":"To configure a chunked cookie handler, set the mode attribute to \"Chunked\" or \"Default\".","pos":[4785,4873]},{"content":"The default chunk size is 2000 bytes, but you may optionally specify a different chunk size by including a <ph id=\"ph1\">`&lt;chunkedCookieHandler&gt;`</ph> child element.","pos":[4874,5020],"source":" The default chunk size is 2000 bytes, but you may optionally specify a different chunk size by including a `<chunkedCookieHandler>` child element."},{"content":"To configure a custom cookie handler, set the mode attribute to \"Custom\".","pos":[5027,5100]},{"content":"You must also specify a <ph id=\"ph1\">`&lt;customCookieHandler&gt;`</ph> child element that references the type of your custom handler.","pos":[5101,5211],"source":" You must also specify a `<customCookieHandler>` child element that references the type of your custom handler."},{"content":"The <ph id=\"ph1\">`&lt;cookieHandler&gt;`</ph> element is represented by the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.CookieHandlerElement&gt;</ph> class.","pos":[5218,5334],"source":"The `<cookieHandler>` element is represented by the <xref:System.IdentityModel.Services.CookieHandlerElement> class."},{"content":"The cookie handler that was specified in configuration is available from the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.Configuration.FederationConfiguration.CookieHandler%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.Configuration.FederationConfiguration&gt;</ph> object set on the <ph id=\"ph3\">&lt;xref:System.IdentityModel.Services.FederatedAuthentication.FederationConfiguration%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[5335,5739],"source":" The cookie handler that was specified in configuration is available from the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration.CookieHandler%2A> property of the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration> object set on the <xref:System.IdentityModel.Services.FederatedAuthentication.FederationConfiguration%2A?displayProperty=nameWithType> property."},{"pos":[5748,5755],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following XML shows a <ph id=\"ph1\">`&lt;cookieHandler&gt;`</ph> element.","pos":[5759,5811],"source":"The following XML shows a `<cookieHandler>` element."},{"content":"In this example, because the <ph id=\"ph1\">`mode`</ph> attribute is not specified, the default cookie handler will be used by the SAM.","pos":[5812,5927],"source":" In this example, because the `mode` attribute is not specified, the default cookie handler will be used by the SAM."},{"content":"This is an instance of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph> class.","pos":[5928,6019],"source":" This is an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class."},{"content":"Because the <ph id=\"ph1\">`&lt;chunkedCookieHandler&gt;`</ph> child element is not specified, the default chunk size will be used.","pos":[6020,6125],"source":" Because the `<chunkedCookieHandler>` child element is not specified, the default chunk size will be used."},{"content":"HTTPS will not be required because the <ph id=\"ph1\">`requireSsl`</ph> attribute is set <ph id=\"ph2\">`false`</ph>.","pos":[6126,6203],"source":" HTTPS will not be required because the `requireSsl` attribute is set `false`."},{"pos":[6211,6484],"content":"[!WARNING]\n In this example, HTTPS is not required to write session cookies. This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`. This setting is not recommended for most production environments as it may present a security risk.","leadings":["","> "],"nodes":[{"content":"In this example, HTTPS is not required to write session cookies. This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`. This setting is not recommended for most production environments as it may present a security risk.","pos":[12,271],"nodes":[{"content":"In this example, HTTPS is not required to write session cookies.","pos":[0,64]},{"content":"This is because the <ph id=\"ph1\">`requireSsl`</ph> attribute on the <ph id=\"ph2\">`&lt;cookieHandler&gt;`</ph> element is set to <ph id=\"ph3\">`false`</ph>.","pos":[65,159],"source":" This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`."},{"content":"This setting is not recommended for most production environments as it may present a security risk.","pos":[160,259]}]}]},{"pos":[6550,6558],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]}]}