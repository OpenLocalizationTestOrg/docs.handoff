{"content":"---\ntitle: \"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"certificates [WCF], specifying the certificate authority certificate chain\"\n  - \"certificates [WCF], verifying signatures\"\nms.assetid: 7c719355-aa41-4567-80d0-5115a8cf73fd\n---\n# How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)\nWhen Windows Communication Foundation (WCF) receives a SOAP message signed using an X.509 certificate, by default it verifies that the X.509 certificate was issued by a trusted certification authority. This is done by looking in a certificate store and determining if the certificate for that certification authority has been designated as trusted. In order for WCF to make this determination, the certification authority certificate chain must be installed in the correct certificate store.  \n  \n### To install a certification authority certificate chain  \n  \n-   For each certification authority that a SOAP message recipient intends to trust X.509 certificates issued from, install the certification authority certificate chain into the certificate store that WCF is configured to retrieve X.509 certificates from.  \n  \n     For instance, if a SOAP message recipient intends to trust X.509 certificates issued by Microsoft, the certification authority certificate chain for Microsoft must be installed in the certificate store that WCF is set up to look for X.509 certificates from. The certificate store in which WCF looks for X.509 certificates can be specified in code or configuration. For example, this can be specified in code using the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method or in configuration a few ways, including the [\\<serviceCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md) .  \n  \n     Because Windows ships with a set of default certificate chains for trusted certificate authorities, it may not be necessary to install the certificate chain for all certificate authorities.  \n  \n    1.  Export the certification authority certificate chain.  \n  \n         Exactly how this is done depends on the certification authority. If the certification authority is running Microsoft Certificate Services, select **Download a CA certificate, certificate chain, or CRL**, and then choose **Download CA certificate**.  \n  \n    2.  Import the certification authority certificate chain.  \n  \n         In the Microsoft Management Console (MMC), open the Certificates snap-in. For the certificate store that WCF is configured to retrieve X.509 certificates from, select the **Trusted Root** **Certification Authorities** folder. Under the **Trusted Root Certification Authorities** folder, right-click the **Certificates** folder, point to **All Tasks**, and then click **Import**. Provide the file exported in step a.  \n  \n         For more information about using the Certificates snap-in with MMC, see [How to: View Certificates with the MMC Snap-in](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).  \n  \n## See also\n\n- [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)\n","nodes":[{"pos":[4,325],"embed":true,"restype":"x-metadata","content":"title: \"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"certificates [WCF], specifying the certificate authority certificate chain\"\n  - \"certificates [WCF], verifying signatures\"\nms.assetid: 7c719355-aa41-4567-80d0-5115a8cf73fd","nodes":[{"content":"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)","nodes":[{"pos":[0,91],"content":"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)","nodes":[{"content":"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)","pos":[0,91]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[332,423],"content":"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)","linkify":"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)","nodes":[{"content":"How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures (WCF)","pos":[0,91]}]},{"content":"When Windows Communication Foundation (WCF) receives a SOAP message signed using an X.509 certificate, by default it verifies that the X.509 certificate was issued by a trusted certification authority.","pos":[424,625]},{"content":"This is done by looking in a certificate store and determining if the certificate for that certification authority has been designated as trusted.","pos":[626,772]},{"content":"In order for WCF to make this determination, the certification authority certificate chain must be installed in the correct certificate store.","pos":[773,915]},{"pos":[925,979],"content":"To install a certification authority certificate chain","linkify":"To install a certification authority certificate chain","nodes":[{"content":"To install a certification authority certificate chain","pos":[0,54]}]},{"content":"For each certification authority that a SOAP message recipient intends to trust X.509 certificates issued from, install the certification authority certificate chain into the certificate store that WCF is configured to retrieve X.509 certificates from.","pos":[989,1241]},{"content":"For instance, if a SOAP message recipient intends to trust X.509 certificates issued by Microsoft, the certification authority certificate chain for Microsoft must be installed in the certificate store that WCF is set up to look for X.509 certificates from.","pos":[1252,1509]},{"content":"The certificate store in which WCF looks for X.509 certificates can be specified in code or configuration.","pos":[1510,1616]},{"content":"For example, this can be specified in code using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A&gt;</ph> method or in configuration a few ways, including the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>serviceCertificate&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md)</ept> .","pos":[1617,1953],"source":" For example, this can be specified in code using the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method or in configuration a few ways, including the [\\<serviceCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md) ."},{"content":"Because Windows ships with a set of default certificate chains for trusted certificate authorities, it may not be necessary to install the certificate chain for all certificate authorities.","pos":[1964,2153]},{"content":"Export the certification authority certificate chain.","pos":[2167,2220]},{"content":"Exactly how this is done depends on the certification authority.","pos":[2235,2299]},{"content":"If the certification authority is running Microsoft Certificate Services, select <bpt id=\"p1\">**</bpt>Download a CA certificate, certificate chain, or CRL<ept id=\"p1\">**</ept>, and then choose <bpt id=\"p2\">**</bpt>Download CA certificate<ept id=\"p2\">**</ept>.","pos":[2300,2483],"source":" If the certification authority is running Microsoft Certificate Services, select **Download a CA certificate, certificate chain, or CRL**, and then choose **Download CA certificate**."},{"content":"Import the certification authority certificate chain.","pos":[2497,2550]},{"content":"In the Microsoft Management Console (MMC), open the Certificates snap-in.","pos":[2565,2638]},{"content":"For the certificate store that WCF is configured to retrieve X.509 certificates from, select the <bpt id=\"p1\">**</bpt>Trusted Root<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>Certification Authorities<ept id=\"p2\">**</ept> folder.","pos":[2639,2790],"source":" For the certificate store that WCF is configured to retrieve X.509 certificates from, select the **Trusted Root** **Certification Authorities** folder."},{"content":"Under the <bpt id=\"p1\">**</bpt>Trusted Root Certification Authorities<ept id=\"p1\">**</ept> folder, right-click the <bpt id=\"p2\">**</bpt>Certificates<ept id=\"p2\">**</ept> folder, point to <bpt id=\"p3\">**</bpt>All Tasks<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Import<ept id=\"p4\">**</ept>.","pos":[2791,2943],"source":" Under the **Trusted Root Certification Authorities** folder, right-click the **Certificates** folder, point to **All Tasks**, and then click **Import**."},{"content":"Provide the file exported in step a.","pos":[2944,2980]},{"pos":[2995,3213],"content":"For more information about using the Certificates snap-in with MMC, see <bpt id=\"p1\">[</bpt>How to: View Certificates with the MMC Snap-in<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md)</ept>.","source":"For more information about using the Certificates snap-in with MMC, see [How to: View Certificates with the MMC Snap-in](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md)."},{"pos":[3222,3230],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3234,3338],"content":"<bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>","source":"[Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)"}]}