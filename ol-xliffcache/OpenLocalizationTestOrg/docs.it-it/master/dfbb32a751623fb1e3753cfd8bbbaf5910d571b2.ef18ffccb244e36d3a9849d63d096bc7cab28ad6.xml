{"content":"---\ntitle: \"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF\"\nms.date: \"03/30/2017\"\nms.assetid: 1428df4d-b18f-4e6d-bd4d-79ab3dd5147c\n---\n# How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF\nThis topic outlines procedures to migrate a basic ASP.NET AJAX service to an equivalent AJAX-enabled Windows Communication Foundation (WCF) service. It shows how to create a functionally equivalent WCF version of an ASP.NET AJAX service. The two services can then be used side by side, or the WCF service can be used to replace the ASP.NET AJAX service.\n\n Migrating an existing ASP.NET AJAX service to a WCF AJAX service gives you the following benefits:\n\n-   You can expose your AJAX service as a SOAP service with minimal extra configuration.\n\n-   You can benefit from WCF features such as tracing, and so on.\n\n The following procedures assume that you are using Visual Studio 2012.\n\n The code that results from the procedures outlined in this topic is provided in the example following the procedures.\n\n For more information about exposing a WCF service through an AJAX-enabled endpoint, see the [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md) topic.\n\n### To create and test the ASP.NET Web service application\n\n1.  Open Visual Studio 2012.\n\n2.  From the **File** menu, select **New**, then **Project**, then **Web**, and then select **ASP.NET Web Service Application**.\n\n3.  Name the project `ASPHello` and click **OK**.\n\n4.  Uncomment the line in the Service1.asmx.cs file that contains `System.Web.Script.Services.ScriptService]` to enable AJAX for this service.\n\n5.  From the **Build** menu, select **Build Solution**.\n\n6.  From the **Debug** menu, select **Start Without Debugging**.\n\n7.  On the Web page generated, select the `HelloWorld` operation.\n\n8.  Click the **Invoke** button on the `HelloWorld` test page. You should receive the following XML response.\n\n    ```xml\n    <?xml version=\"1.0\" encoding=\"utf-8\" ?>\n    <string xmlns=\"http://tempuri.org/\">Hello World</string>\n    ```\n\n9. This response confirms that you now have a functioning ASP.NET AJAX service and, in particular, that the service has now exposed an endpoint at Service1.asmx/HelloWorld that responds to HTTP POST requests and returns XML.\n\n     Now you are ready to convert this service to use a WCF AJAX service.\n\n### To create an equivalent WCF AJAX service application\n\n1.  Right-click the **ASPHello** project and select **Add**, then **New Item**, and then **AJAX-enabled WCF Service**.\n\n2.  Name the service `WCFHello` and click **Add**.\n\n3.  Open the WCFHello.svc.cs file.\n\n4.  From Service1.asmx.cs, copy the following implementation of the `HelloWorld` operation.\n\n    ```\n    public string HelloWorld()\n    {\n         return \"Hello World\";\n    }\n    ```\n\n5.  Paste to copied implementation of the `HelloWorld` operation into the WCFHello.svc.cs file in place of the following code.\n\n    ```\n    public void DoWork()\n    {\n          // Add your operation implementation here\n          return;\n    }\n    ```\n\n6.  Specify the `Namespace` attribute for <xref:System.ServiceModel.ServiceContractAttribute> as `WCFHello`.\n\n    ```\n    [ServiceContract(Namespace=\"WCFHello\")]\n    [AspNetCompatibilityRequirements(RequirementsMode=AspNetCompatibilityRequirementsMode.Required)]\n    public class WCFHello\n    { â€¦ }\n    ```\n\n7.  Add the <xref:System.ServiceModel.Web.WebInvokeAttribute> to the `HelloWorld` operation and set the <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> property to return <xref:System.ServiceModel.Web.WebMessageFormat.Xml>. Note that, if not set, the default return type is <xref:System.ServiceModel.Web.WebMessageFormat.Json>.\n\n    ```\n    [OperationContract]\n    [WebInvoke(ResponseFormat=WebMessageFormat.Xml)]\n    public string HelloWorld()\n    {\n        return \"Hello World\";\n    }\n    ```\n\n8.  From the **Build** menu, select **Build Solution**.\n\n9. Open the WCFHello.svc file and from the **Debug** menu, select **Start Without Debugging**.\n\n10. The service now exposes an endpoint at `WCFHello.svc/HelloWorld`, which responds to HTTP POST requests. HTTP POST requests cannot be tested from the browser, but the endpoint returns XML following XML.\n\n    ```xml\n    <string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">Hello World</string>\n    ```\n\n11. The `WCFHello.svc/HelloWorld` and the `Service1.aspx/HelloWorld` endpoints are now functionally equivalent.\n\n## Example\n The code that results from the procedures outlined in this topic is provided in the following example.\n\n```csharp\n//This is the ASP.NET code in the Service1.asmx.cs file.\n\nusing System;\nusing System.Collections;\nusing System.ComponentModel;\nusing System.Data;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Services;\nusing System.Web.Services.Protocols;\nusing System.Xml.Linq;\nusing System.Web.Script.Services;\n\nnamespace ASPHello\n{\n    /// <summary>\n    /// Summary description for Service1.\n    /// </summary>\n    [WebService(Namespace = \"http://tempuri.org/\")]\n    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]\n    [ToolboxItem(false)]\n    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.\n    [System.Web.Script.Services.ScriptService]\n    public class Service1 : System.Web.Services.WebService\n    {\n\n        [WebMethod]\n        public string HelloWorld()\n        {\n            return \"Hello World\";\n        }\n    }\n}\n\n//This is the WCF code in the WCFHello.svc.cs file.\nusing System;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.ServiceModel.Activation;\nusing System.ServiceModel.Web;\n\nnamespace ASPHello\n{\n    [ServiceContract(Namespace = \"WCFHello\")]\n    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\n    public class WCFHello\n    {\n        // Add [WebInvoke] attribute to use HTTP GET.\n        [OperationContract]\n        [WebInvoke(ResponseFormat=WebMessageFormat.Xml)]\n        public string HelloWorld()\n        {\n            return \"Hello World\";\n        }\n\n        // Add more operations here and mark them with [OperationContract].\n    }\n}\n```\n\n The <xref:System.Xml.XmlDocument> type is not supported by the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> because it is not serializable by the <xref:System.Xml.Serialization.XmlSerializer>. You can use either an <xref:System.Xml.Linq.XDocument> type, or serialize the <xref:System.Xml.XmlDocument.DocumentElement%2A> instead.\n\n If ASMX Web services are being upgraded and migrated side-by-side to WCF services, avoid mapping two types to the same name on the client. This causes an exception in serializers if the same type is used in a <xref:System.Web.Services.WebMethodAttribute> and a <xref:System.ServiceModel.ServiceContractAttribute>:\n\n-   If WCF service is added first, invoking the method on ASMX Web Service causes exception in <xref:System.Web.UI.ObjectConverter.ConvertValue%28System.Object%2CSystem.Type%2CSystem.String%29> because the WCF style definition of the order in the proxy takes precedence.\n\n-   If ASMX Web Service is added first, invoking method on WCF service causes exception in <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> because the Web Service style definition of the order in the proxy takes precedence.\n\n There are significant differences in behavior between the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> and the ASP.NET AJAX <xref:System.Web.Script.Serialization.JavaScriptSerializer>. For example, the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> represents a dictionary as an array of key/value pairs, whereas the ASP.NET AJAX <xref:System.Web.Script.Serialization.JavaScriptSerializer> represents a dictionary as actual JSON objects. So the following is the dictionary represented in ASP.NET AJAX.\n\n```\nDictionary<string, int> d = new Dictionary<string, int>();\nd.Add(\"one\", 1);\nd.Add(\"two\", 2);\n```\n\n This dictionary is represented in JSON objects as shown in the following list:\n\n-   [{\"Key\":\"one\",\"Value\":1},{\"Key\":\"two\",\"Value\":2}] by the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>\n\n-   {\"one\":1,\"two\":2} by the ASP.NET AJAX <xref:System.Web.Script.Serialization.JavaScriptSerializer>\n\n The <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> is more powerful in the sense that it can handle dictionaries where the key type is not string, while the <xref:System.Web.Script.Serialization.JavaScriptSerializer> cannot. But the latter is more JSON-friendly.\n\n The significant differences between these serializers are summarized in the following table.\n\n|Category of Differences|DataContractJsonSerializer|ASP.NET AJAX JavaScriptSerializer|\n|-----------------------------|--------------------------------|---------------------------------------|\n|Deserializing the empty buffer (new byte[0]) into <xref:System.Object> (or <xref:System.Uri>, or some other classes).|SerializationException|null|\n|Serialization of <xref:System.DBNull.Value>|{} (or {\"__type\":\"#System\"})|Null|\n|Serialization of the private members of [Serializable] types.|serialized|not serialized|\n|Serialization of the public properties of <xref:System.Runtime.Serialization.ISerializable> types.|not serialized|serialized|\n|\"Extensions\" of JSON|Adheres to the JSON specification, which requires quotes on object member names ({\"a\":\"hello\"}).|Supports the names of object members without quotes ({a:\"hello\"}).|\n|<xref:System.DateTime> Coordinated Universal Time (UTC)|Does not support format \"\\\\/Date(123456789U)\\\\/\" or \"\\\\/Date\\\\(\\d+(U&#124;(\\\\+\\\\-[\\d{4}]))?\\\\)\\\\\\\\/)\".|Supports format \"\\\\/Date(123456789U)\\\\/\" and \"\\\\/Date\\\\(\\d+(U&#124;(\\\\+\\\\-[\\d{4}]))?\\\\)\\\\\\\\/)\" as DateTime values.|\n|Representation of dictionaries|An array of KeyValuePair\\<K,V>, handles key types that are not strings.|As actual JSON objects - but only handles key types that are strings.|\n|Escaped characters|Always with an escape forward slash (/); never allows un-escaped invalid JSON characters, such as \"\\n\".|With an escape forward slash (/) for DateTime values.|\n\n## See also\n\n- [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)\n","nodes":[{"pos":[4,140],"embed":true,"restype":"x-metadata","content":"title: \"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF\"\nms.date: \"03/30/2017\"\nms.assetid: 1428df4d-b18f-4e6d-bd4d-79ab3dd5147c","nodes":[{"content":"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF","nodes":[{"pos":[0,56],"content":"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF","nodes":[{"content":"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF","pos":[0,56]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[147,203],"content":"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF","linkify":"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF","nodes":[{"content":"How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF","pos":[0,56]}]},{"content":"This topic outlines procedures to migrate a basic ASP.NET AJAX service to an equivalent AJAX-enabled Windows Communication Foundation (WCF) service.","pos":[204,352]},{"content":"It shows how to create a functionally equivalent WCF version of an ASP.NET AJAX service.","pos":[353,441]},{"content":"The two services can then be used side by side, or the WCF service can be used to replace the ASP.NET AJAX service.","pos":[442,557]},{"content":"Migrating an existing ASP.NET AJAX service to a WCF AJAX service gives you the following benefits:","pos":[560,658]},{"content":"You can expose your AJAX service as a SOAP service with minimal extra configuration.","pos":[664,748]},{"content":"You can benefit from WCF features such as tracing, and so on.","pos":[754,815]},{"content":"The following procedures assume that you are using Visual Studio 2012.","pos":[818,888]},{"content":"The code that results from the procedures outlined in this topic is provided in the example following the procedures.","pos":[891,1008]},{"pos":[1011,1276],"content":"For more information about exposing a WCF service through an AJAX-enabled endpoint, see the <bpt id=\"p1\">[</bpt>How to: Use Configuration to Add an ASP.NET AJAX Endpoint<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)</ept> topic.","source":"For more information about exposing a WCF service through an AJAX-enabled endpoint, see the [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md) topic."},{"pos":[1282,1336],"content":"To create and test the ASP.NET Web service application","linkify":"To create and test the ASP.NET Web service application","nodes":[{"content":"To create and test the ASP.NET Web service application","pos":[0,54]}]},{"content":"Open Visual Studio 2012.","pos":[1342,1366]},{"pos":[1372,1496],"content":"From the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, then <bpt id=\"p3\">**</bpt>Project<ept id=\"p3\">**</ept>, then <bpt id=\"p4\">**</bpt>Web<ept id=\"p4\">**</ept>, and then select <bpt id=\"p5\">**</bpt>ASP.NET Web Service Application<ept id=\"p5\">**</ept>.","source":"From the **File** menu, select **New**, then **Project**, then **Web**, and then select **ASP.NET Web Service Application**."},{"pos":[1502,1547],"content":"Name the project <ph id=\"ph1\">`ASPHello`</ph> and click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Name the project `ASPHello` and click **OK**."},{"pos":[1553,1691],"content":"Uncomment the line in the Service1.asmx.cs file that contains <ph id=\"ph1\">`System.Web.Script.Services.ScriptService]`</ph> to enable AJAX for this service.","source":"Uncomment the line in the Service1.asmx.cs file that contains `System.Web.Script.Services.ScriptService]` to enable AJAX for this service."},{"pos":[1697,1748],"content":"From the <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Build Solution<ept id=\"p2\">**</ept>.","source":"From the **Build** menu, select **Build Solution**."},{"pos":[1754,1814],"content":"From the <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Start Without Debugging<ept id=\"p2\">**</ept>.","source":"From the **Debug** menu, select **Start Without Debugging**."},{"pos":[1820,1881],"content":"On the Web page generated, select the <ph id=\"ph1\">`HelloWorld`</ph> operation.","source":"On the Web page generated, select the `HelloWorld` operation."},{"content":"Click the <bpt id=\"p1\">**</bpt>Invoke<ept id=\"p1\">**</ept> button on the <ph id=\"ph1\">`HelloWorld`</ph> test page.","pos":[1887,1945],"source":"Click the **Invoke** button on the `HelloWorld` test page."},{"content":"You should receive the following XML response.","pos":[1946,1992]},{"content":"This response confirms that you now have a functioning ASP.NET AJAX service and, in particular, that the service has now exposed an endpoint at Service1.asmx/HelloWorld that responds to HTTP POST requests and returns XML.","pos":[2122,2343]},{"content":"Now you are ready to convert this service to use a WCF AJAX service.","pos":[2350,2418]},{"pos":[2424,2476],"content":"To create an equivalent WCF AJAX service application","linkify":"To create an equivalent WCF AJAX service application","nodes":[{"content":"To create an equivalent WCF AJAX service application","pos":[0,52]}]},{"pos":[2482,2596],"content":"Right-click the <bpt id=\"p1\">**</bpt>ASPHello<ept id=\"p1\">**</ept> project and select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>, then <bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>, and then <bpt id=\"p4\">**</bpt>AJAX-enabled WCF Service<ept id=\"p4\">**</ept>.","source":"Right-click the **ASPHello** project and select **Add**, then **New Item**, and then **AJAX-enabled WCF Service**."},{"pos":[2602,2648],"content":"Name the service <ph id=\"ph1\">`WCFHello`</ph> and click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.","source":"Name the service `WCFHello` and click **Add**."},{"content":"Open the WCFHello.svc.cs file.","pos":[2654,2684]},{"pos":[2690,2777],"content":"From Service1.asmx.cs, copy the following implementation of the <ph id=\"ph1\">`HelloWorld`</ph> operation.","source":"From Service1.asmx.cs, copy the following implementation of the `HelloWorld` operation."},{"pos":[2874,2996],"content":"Paste to copied implementation of the <ph id=\"ph1\">`HelloWorld`</ph> operation into the WCFHello.svc.cs file in place of the following code.","source":"Paste to copied implementation of the `HelloWorld` operation into the WCFHello.svc.cs file in place of the following code."},{"pos":[3126,3230],"content":"Specify the <ph id=\"ph1\">`Namespace`</ph> attribute for <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph> as <ph id=\"ph3\">`WCFHello`</ph>.","source":"Specify the `Namespace` attribute for <xref:System.ServiceModel.ServiceContractAttribute> as `WCFHello`."},{"content":"Add the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebInvokeAttribute&gt;</ph> to the <ph id=\"ph2\">`HelloWorld`</ph> operation and set the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A&gt;</ph> property to return <ph id=\"ph4\">&lt;xref:System.ServiceModel.Web.WebMessageFormat.Xml&gt;</ph>.","pos":[3434,3673],"source":"Add the <xref:System.ServiceModel.Web.WebInvokeAttribute> to the `HelloWorld` operation and set the <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> property to return <xref:System.ServiceModel.Web.WebMessageFormat.Xml>."},{"content":"Note that, if not set, the default return type is <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebMessageFormat.Json&gt;</ph>.","pos":[3674,3777],"source":" Note that, if not set, the default return type is <xref:System.ServiceModel.Web.WebMessageFormat.Json>."},{"pos":[3950,4001],"content":"From the <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Build Solution<ept id=\"p2\">**</ept>.","source":"From the **Build** menu, select **Build Solution**."},{"pos":[4006,4097],"content":"Open the WCFHello.svc file and from the <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Start Without Debugging<ept id=\"p2\">**</ept>.","source":"Open the WCFHello.svc file and from the **Debug** menu, select **Start Without Debugging**."},{"content":"The service now exposes an endpoint at <ph id=\"ph1\">`WCFHello.svc/HelloWorld`</ph>, which responds to HTTP POST requests.","pos":[4103,4206],"source":"The service now exposes an endpoint at `WCFHello.svc/HelloWorld`, which responds to HTTP POST requests."},{"content":"HTTP POST requests cannot be tested from the browser, but the endpoint returns XML following XML.","pos":[4207,4304]},{"pos":[4423,4530],"content":"The <ph id=\"ph1\">`WCFHello.svc/HelloWorld`</ph> and the <ph id=\"ph2\">`Service1.aspx/HelloWorld`</ph> endpoints are now functionally equivalent.","source":"The `WCFHello.svc/HelloWorld` and the `Service1.aspx/HelloWorld` endpoints are now functionally equivalent."},{"pos":[4535,4542],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The code that results from the procedures outlined in this topic is provided in the following example.","pos":[4544,4646]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> type is not supported by the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph> because it is not serializable by the <ph id=\"ph3\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph>.","pos":[6284,6499],"source":"The <xref:System.Xml.XmlDocument> type is not supported by the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> because it is not serializable by the <xref:System.Xml.Serialization.XmlSerializer>."},{"content":"You can use either an <ph id=\"ph1\">&lt;xref:System.Xml.Linq.XDocument&gt;</ph> type, or serialize the <ph id=\"ph2\">&lt;xref:System.Xml.XmlDocument.DocumentElement%2A&gt;</ph> instead.","pos":[6500,6635],"source":" You can use either an <xref:System.Xml.Linq.XDocument> type, or serialize the <xref:System.Xml.XmlDocument.DocumentElement%2A> instead."},{"content":"If ASMX Web services are being upgraded and migrated side-by-side to WCF services, avoid mapping two types to the same name on the client.","pos":[6638,6776]},{"content":"This causes an exception in serializers if the same type is used in a <ph id=\"ph1\">&lt;xref:System.Web.Services.WebMethodAttribute&gt;</ph> and a <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph>:","pos":[6777,6951],"source":" This causes an exception in serializers if the same type is used in a <xref:System.Web.Services.WebMethodAttribute> and a <xref:System.ServiceModel.ServiceContractAttribute>:"},{"pos":[6957,7223],"content":"If WCF service is added first, invoking the method on ASMX Web Service causes exception in <ph id=\"ph1\">&lt;xref:System.Web.UI.ObjectConverter.ConvertValue%28System.Object%2CSystem.Type%2CSystem.String%29&gt;</ph> because the WCF style definition of the order in the proxy takes precedence.","source":"If WCF service is added first, invoking the method on ASMX Web Service causes exception in <xref:System.Web.UI.ObjectConverter.ConvertValue%28System.Object%2CSystem.Type%2CSystem.String%29> because the WCF style definition of the order in the proxy takes precedence."},{"pos":[7229,7468],"content":"If ASMX Web Service is added first, invoking method on WCF service causes exception in <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph> because the Web Service style definition of the order in the proxy takes precedence.","source":"If ASMX Web Service is added first, invoking method on WCF service causes exception in <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> because the Web Service style definition of the order in the proxy takes precedence."},{"content":"There are significant differences in behavior between the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph> and the ASP.NET AJAX <ph id=\"ph2\">&lt;xref:System.Web.Script.Serialization.JavaScriptSerializer&gt;</ph>.","pos":[7471,7678],"source":"There are significant differences in behavior between the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> and the ASP.NET AJAX <xref:System.Web.Script.Serialization.JavaScriptSerializer>."},{"content":"For example, the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph> represents a dictionary as an array of key/value pairs, whereas the ASP.NET AJAX <ph id=\"ph2\">&lt;xref:System.Web.Script.Serialization.JavaScriptSerializer&gt;</ph> represents a dictionary as actual JSON objects.","pos":[7679,7952],"source":" For example, the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> represents a dictionary as an array of key/value pairs, whereas the ASP.NET AJAX <xref:System.Web.Script.Serialization.JavaScriptSerializer> represents a dictionary as actual JSON objects."},{"content":"So the following is the dictionary represented in ASP.NET AJAX.","pos":[7953,8016]},{"content":"This dictionary is represented in JSON objects as shown in the following list:","pos":[8121,8199]},{"pos":[8205,8329],"content":"[{\"Key\":\"one\",\"Value\":1},{\"Key\":\"two\",\"Value\":2}] by the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph>","source":"[{\"Key\":\"one\",\"Value\":1},{\"Key\":\"two\",\"Value\":2}] by the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>"},{"pos":[8335,8432],"content":"{\"one\":1,\"two\":2} by the ASP.NET AJAX <ph id=\"ph1\">&lt;xref:System.Web.Script.Serialization.JavaScriptSerializer&gt;</ph>","source":"{\"one\":1,\"two\":2} by the ASP.NET AJAX <xref:System.Web.Script.Serialization.JavaScriptSerializer>"},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph> is more powerful in the sense that it can handle dictionaries where the key type is not string, while the <ph id=\"ph2\">&lt;xref:System.Web.Script.Serialization.JavaScriptSerializer&gt;</ph> cannot.","pos":[8435,8680],"source":"The <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> is more powerful in the sense that it can handle dictionaries where the key type is not string, while the <xref:System.Web.Script.Serialization.JavaScriptSerializer> cannot."},{"content":"But the latter is more JSON-friendly.","pos":[8681,8718]},{"content":"The significant differences between these serializers are summarized in the following table.","pos":[8721,8813]},{"content":"Category of Differences","pos":[8816,8839]},{"content":"DataContractJsonSerializer","pos":[8840,8866]},{"content":"ASP.NET AJAX JavaScriptSerializer","pos":[8867,8900]},{"pos":[9008,9125],"content":"Deserializing the empty buffer (new byte[0]) into <ph id=\"ph1\">&lt;xref:System.Object&gt;</ph> (or <ph id=\"ph2\">&lt;xref:System.Uri&gt;</ph>, or some other classes).","source":"Deserializing the empty buffer (new byte[0]) into <xref:System.Object> (or <xref:System.Uri>, or some other classes)."},{"content":"SerializationException","pos":[9126,9148]},{"content":"null","pos":[9149,9153]},{"pos":[9156,9199],"content":"Serialization of <ph id=\"ph1\">&lt;xref:System.DBNull.Value&gt;</ph>","source":"Serialization of <xref:System.DBNull.Value>"},{"content":"<ph id=\"ph1\">{}</ph> (or {\"__type\":\"#System\"})","pos":[9200,9228],"source":"{} (or {\"__type\":\"#System\"})"},{"content":"Null","pos":[9229,9233]},{"content":"Serialization of the private members of [Serializable] types.","pos":[9236,9297]},{"content":"serialized","pos":[9298,9308]},{"content":"not serialized","pos":[9309,9323]},{"pos":[9326,9424],"content":"Serialization of the public properties of <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ISerializable&gt;</ph> types.","source":"Serialization of the public properties of <xref:System.Runtime.Serialization.ISerializable> types."},{"content":"not serialized","pos":[9425,9439]},{"content":"serialized","pos":[9440,9450]},{"content":"\"Extensions\" of JSON","pos":[9453,9473]},{"content":"Adheres to the JSON specification, which requires quotes on object member names ({\"a\":\"hello\"}).","pos":[9474,9570]},{"content":"Supports the names of object members without quotes ({a:\"hello\"}).","pos":[9571,9637]},{"pos":[9640,9695],"content":"<ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> Coordinated Universal Time (UTC)","source":"<xref:System.DateTime> Coordinated Universal Time (UTC)"},{"content":"Does not support format \"<ph id=\"ph1\">\\\\</ph>/Date(123456789U)<ph id=\"ph2\">\\\\</ph>/\" or \"<ph id=\"ph3\">\\\\</ph>/Date<ph id=\"ph4\">\\\\</ph>(\\d+(U&amp;#124;(<ph id=\"ph5\">\\\\</ph><ph id=\"ph6\">+</ph><ph id=\"ph7\">\\\\</ph>-[\\d<ph id=\"ph8\">{4}</ph>]))?<ph id=\"ph9\">\\\\</ph>)<ph id=\"ph10\">\\\\</ph><ph id=\"ph11\">\\\\</ph>/)\".","pos":[9696,9798],"source":"Does not support format \"\\\\/Date(123456789U)\\\\/\" or \"\\\\/Date\\\\(\\d+(U&#124;(\\\\+\\\\-[\\d{4}]))?\\\\)\\\\\\\\/)\"."},{"content":"Supports format \"<ph id=\"ph1\">\\\\</ph>/Date(123456789U)<ph id=\"ph2\">\\\\</ph>/\" and \"<ph id=\"ph3\">\\\\</ph>/Date<ph id=\"ph4\">\\\\</ph>(\\d+(U&amp;#124;(<ph id=\"ph5\">\\\\</ph><ph id=\"ph6\">+</ph><ph id=\"ph7\">\\\\</ph>-[\\d<ph id=\"ph8\">{4}</ph>]))?<ph id=\"ph9\">\\\\</ph>)<ph id=\"ph10\">\\\\</ph><ph id=\"ph11\">\\\\</ph>/)\" as DateTime values.","pos":[9799,9913],"source":"Supports format \"\\\\/Date(123456789U)\\\\/\" and \"\\\\/Date\\\\(\\d+(U&#124;(\\\\+\\\\-[\\d{4}]))?\\\\)\\\\\\\\/)\" as DateTime values."},{"content":"Representation of dictionaries","pos":[9916,9946]},{"content":"An array of KeyValuePair<ph id=\"ph1\">\\&lt;</ph>K,V&gt;, handles key types that are not strings.","pos":[9947,10018],"source":"An array of KeyValuePair\\<K,V>, handles key types that are not strings."},{"content":"As actual JSON objects - but only handles key types that are strings.","pos":[10019,10088]},{"content":"Escaped characters","pos":[10091,10109]},{"content":"Always with an escape forward slash (/); never allows un-escaped invalid JSON characters, such as \"\\n\".","pos":[10110,10213]},{"content":"With an escape forward slash (/) for DateTime values.","pos":[10214,10267]},{"pos":[10273,10281],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10285,10451],"content":"<bpt id=\"p1\">[</bpt>How to: Use Configuration to Add an ASP.NET AJAX Endpoint<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)</ept>","source":"[How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)"}]}