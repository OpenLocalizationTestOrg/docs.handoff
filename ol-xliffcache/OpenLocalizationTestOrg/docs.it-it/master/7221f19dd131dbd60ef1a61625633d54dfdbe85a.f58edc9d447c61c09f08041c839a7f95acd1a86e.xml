{"content":"---\ntitle: \"<webMessageEncoding>\"\nms.date: \"03/30/2017\"\nms.assetid: 892ca485-e21a-4a44-8e40-633161ef6796\n---\n# \\<webMessageEncoding>\nEnables plain-text XML, JavaScript Object Notation (JSON) message encodings and \"raw\" binary content to be read and written when used in a Windows Communication Foundation (WCF) binding.  \n  \n \\<system.serviceModel>  \n\\<bindings>  \n\\<customBinding>  \n\\<binding>  \n\\<webMessageEncoding>  \n  \n## Syntax  \n  \n```xml  \n<webMessageEncoding maxReadPoolSize=\"Integer\"\n                    maxWritePoolSize=\"Integer\"\n                    writeEncoding=\"UnicodeFffeTextEncoding/Utf16TextEncoding/Utf8TextEncoding\" />\n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|`maxReadPoolSize`|The amount of messages that can be read simultaneously without allocating new readers. Larger pool sizes make the system more tolerant to activity spikes at the cost of a larger working set. The default is 64 readers for each of the inner encoders (text, JSON, and \"raw\").<br /><br /> Increasing this number increases memory consumption, but prepares the encoder to deal with sudden bursts of incoming messages because it is able to use readers from the pool that are already created instead of creating new ones.|  \n|`maxWritePoolSize`|The amount of messages that can be sent simultaneously without allocating new writers. Larger pool sizes make the system more tolerant to activity spikes at the cost of a larger working set. The default is 16 writers for each of the inner encoders (text, JSON, and \"raw\").<br /><br /> Increasing this number increases memory consumption, but prepares the encoder to deal with sudden bursts of outgoing messages because it is able to use writers from the pool that are already created instead of creating new ones.|  \n|`writeEncoding`|Specifies the character set encoding to be used for emitting messages on the binding. Valid values are:<br /><br /> -   UnicodeFffeTextEncoding: Unicode Big Endian encoding.<br />-   Utf16TextEncoding: Unicode encoding.<br />-   Utf8TextEncoding: 8-bit encoding.<br /><br /> The default is Utf8TextEncoding. This attribute is of type <xref:System.Text.Encoding>.|  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<readerQuotas>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms731325(v=vs.100))|Defines the constraints on the complexity of SOAP messages that can be processed by endpoints configured with this binding. This element is of type <xref:System.ServiceModel.Configuration.XmlDictionaryReaderQuotasElement>.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<binding>](../../../../../docs/framework/misc/binding.md)|Defines all binding capabilities of the custom binding.|  \n  \n## Remarks  \n Encoding is the process of transforming a message into a sequence of bytes. Decoding is the reverse process. These processes require the specification of a character encoding.  \n  \n The `webMessageEncoding` element works by delegating to a series of inner encoders to handle the plain-text XML and JSON encodings, and \"raw\" binary data. This delegation is done by a composite message encoder.  \n  \n This binding element and its composite encoder are used to control the encoding in scenarios that do not use SOAP messaging used by the `webHttpBinding` element. These scenarios include \"Plain Old XML\" (POX), Representational State Transfer (REST), Really Simple Syndication (RSS) and Atom syndication, and Asynchronous JavaScript and XML (AJAX). The composite message encoder does not support SOAP or WS-Addressing.  \n  \n The binding element can be configured with a write character encoding by using the `writeEncoding` attribute. The supplied <xref:System.Text.Encoding> value specifies the behavior on write for the JSON and Textual XML cases. On read, any valid message encoding and text encoding is understood.  \n  \n `maxReadPoolSize` and `maxWritePoolSize` can also be used to set the maximum number of readers and writers to be allocated respectively. By default 64 readers and 16 writers are allocated.  \n  \n Default complexity constraints are also set using the [\\<readerQuotas>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms731325(v=vs.100)) element to protect against a class of denial of service (DOS) attacks that attempt to use message complexity to tie up endpoint processing resources.  \n  \n## Example  \n  \n```xml  \n<webMessageEncoding maxReadPoolSize=\"256\"\n                    maxWritePoolSize=\"128\"\n                    messageVersion=\"None\"\n                    textEncoding=\"utf-8\" />\n```  \n  \n## See also\n\n- <xref:System.ServiceModel.Configuration.WebMessageEncodingElement>\n- <xref:System.ServiceModel.Channels.CustomBinding>\n- <xref:System.ServiceModel.Channels.MessageEncodingBindingElement>\n- <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>\n- [Message Encoding](../../../../../docs/framework/configure-apps/file-schema/wcf/message-encoding.md)\n- [Choosing a Message Encoder](../../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md)\n- [Bindings](../../../../../docs/framework/wcf/bindings.md)\n- [Extending Bindings](../../../../../docs/framework/wcf/extending/extending-bindings.md)\n- [Custom Bindings](../../../../../docs/framework/wcf/extending/custom-bindings.md)\n- [\\<customBinding>](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)\n","nodes":[{"pos":[4,104],"embed":true,"restype":"x-metadata","content":"title: \"<webMessageEncoding>\"\nms.date: \"03/30/2017\"\nms.assetid: 892ca485-e21a-4a44-8e40-633161ef6796","nodes":[{"content":"<webMessageEncoding>","nodes":[],"path":["title"],"nosxs":false}],"yml":true},{"pos":[111,132],"content":"\\<webMessageEncoding>","linkify":"\\<webMessageEncoding>","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>webMessageEncoding&gt;","pos":[0,21],"source":"\\<webMessageEncoding>"}]},{"content":"Enables plain-text XML, JavaScript Object Notation (JSON) message encodings and \"raw\" binary content to be read and written when used in a Windows Communication Foundation (WCF) binding.","pos":[133,319]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.serviceModel&gt;","pos":[326,348],"source":"\\<system.serviceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>bindings&gt;","pos":[351,362],"source":"\\<bindings>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>customBinding&gt;","pos":[365,381],"source":"\\<customBinding>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>binding&gt;","pos":[384,394],"source":"\\<binding>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>webMessageEncoding&gt;","pos":[397,418],"source":"\\<webMessageEncoding>"},{"pos":[427,433],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[651,674],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[678,758]},{"pos":[768,778],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[785,794]},{"content":"Description","pos":[795,806]},{"content":"The amount of messages that can be read simultaneously without allocating new readers.","pos":[867,953]},{"content":"Larger pool sizes make the system more tolerant to activity spikes at the cost of a larger working set.","pos":[954,1057]},{"content":"The default is 64 readers for each of the inner encoders (text, JSON, and \"raw\").","pos":[1058,1139]},{"content":"Increasing this number increases memory consumption, but prepares the encoder to deal with sudden bursts of incoming messages because it is able to use readers from the pool that are already created instead of creating new ones.","pos":[1152,1380]},{"content":"The amount of messages that can be sent simultaneously without allocating new writers.","pos":[1404,1490]},{"content":"Larger pool sizes make the system more tolerant to activity spikes at the cost of a larger working set.","pos":[1491,1594]},{"content":"The default is 16 writers for each of the inner encoders (text, JSON, and \"raw\").","pos":[1595,1676]},{"content":"Increasing this number increases memory consumption, but prepares the encoder to deal with sudden bursts of outgoing messages because it is able to use writers from the pool that are already created instead of creating new ones.","pos":[1689,1917]},{"content":"Specifies the character set encoding to be used for emitting messages on the binding.","pos":[1938,2023]},{"content":"Valid values are:","pos":[2024,2041]},{"content":"-   UnicodeFffeTextEncoding: Unicode Big Endian encoding.","pos":[2054,2111]},{"content":"-   Utf16TextEncoding: Unicode encoding.","pos":[2117,2157]},{"content":"-   Utf8TextEncoding: 8-bit encoding.","pos":[2163,2200]},{"content":"The default is Utf8TextEncoding.","pos":[2213,2245]},{"content":"This attribute is of type <ph id=\"ph1\">&lt;xref:System.Text.Encoding&gt;</ph>.","pos":[2246,2300],"source":" This attribute is of type <xref:System.Text.Encoding>."},{"pos":[2311,2325],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[2332,2339]},{"content":"Description","pos":[2340,2351]},{"pos":[2392,2498],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>readerQuotas&gt;<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms731325(v=vs.100))</ept>","source":"[\\<readerQuotas>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms731325(v=vs.100))"},{"content":"Defines the constraints on the complexity of SOAP messages that can be processed by endpoints configured with this binding.","pos":[2499,2622]},{"content":"This element is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.XmlDictionaryReaderQuotasElement&gt;</ph>.","pos":[2623,2721],"source":" This element is of type <xref:System.ServiceModel.Configuration.XmlDictionaryReaderQuotasElement>."},{"pos":[2732,2747],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[2754,2761]},{"content":"Description","pos":[2762,2773]},{"pos":[2814,2873],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../../docs/framework/misc/binding.md)</ept>","source":"[\\<binding>](../../../../../docs/framework/misc/binding.md)"},{"content":"Defines all binding capabilities of the custom binding.","pos":[2874,2929]},{"pos":[2939,2946],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Encoding is the process of transforming a message into a sequence of bytes.","pos":[2950,3025]},{"content":"Decoding is the reverse process.","pos":[3026,3058]},{"content":"These processes require the specification of a character encoding.","pos":[3059,3125]},{"content":"The <ph id=\"ph1\">`webMessageEncoding`</ph> element works by delegating to a series of inner encoders to handle the plain-text XML and JSON encodings, and \"raw\" binary data.","pos":[3132,3286],"source":"The `webMessageEncoding` element works by delegating to a series of inner encoders to handle the plain-text XML and JSON encodings, and \"raw\" binary data."},{"content":"This delegation is done by a composite message encoder.","pos":[3287,3342]},{"content":"This binding element and its composite encoder are used to control the encoding in scenarios that do not use SOAP messaging used by the <ph id=\"ph1\">`webHttpBinding`</ph> element.","pos":[3349,3510],"source":"This binding element and its composite encoder are used to control the encoding in scenarios that do not use SOAP messaging used by the `webHttpBinding` element."},{"content":"These scenarios include \"Plain Old XML\" (POX), Representational State Transfer (REST), Really Simple Syndication (RSS) and Atom syndication, and Asynchronous JavaScript and XML (AJAX).","pos":[3511,3695]},{"content":"The composite message encoder does not support SOAP or WS-Addressing.","pos":[3696,3765]},{"content":"The binding element can be configured with a write character encoding by using the <ph id=\"ph1\">`writeEncoding`</ph> attribute.","pos":[3772,3881],"source":"The binding element can be configured with a write character encoding by using the `writeEncoding` attribute."},{"content":"The supplied <ph id=\"ph1\">&lt;xref:System.Text.Encoding&gt;</ph> value specifies the behavior on write for the JSON and Textual XML cases.","pos":[3882,3996],"source":" The supplied <xref:System.Text.Encoding> value specifies the behavior on write for the JSON and Textual XML cases."},{"content":"On read, any valid message encoding and text encoding is understood.","pos":[3997,4065]},{"content":"<ph id=\"ph1\">`maxReadPoolSize`</ph> and <ph id=\"ph2\">`maxWritePoolSize`</ph> can also be used to set the maximum number of readers and writers to be allocated respectively.","pos":[4072,4208],"source":"`maxReadPoolSize` and `maxWritePoolSize` can also be used to set the maximum number of readers and writers to be allocated respectively."},{"content":"By default 64 readers and 16 writers are allocated.","pos":[4209,4260]},{"pos":[4267,4577],"content":"Default complexity constraints are also set using the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>readerQuotas&gt;<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms731325(v=vs.100))</ept> element to protect against a class of denial of service (DOS) attacks that attempt to use message complexity to tie up endpoint processing resources.","source":"Default complexity constraints are also set using the [\\<readerQuotas>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ms731325(v=vs.100)) element to protect against a class of denial of service (DOS) attacks that attempt to use message complexity to tie up endpoint processing resources."},{"pos":[4586,4593],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4791,4799],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5063,5163],"content":"<bpt id=\"p1\">[</bpt>Message Encoding<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/message-encoding.md)</ept>","source":"[Message Encoding](../../../../../docs/framework/configure-apps/file-schema/wcf/message-encoding.md)"},{"pos":[5166,5275],"content":"<bpt id=\"p1\">[</bpt>Choosing a Message Encoder<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md)</ept>","source":"[Choosing a Message Encoder](../../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md)"},{"pos":[5278,5335],"content":"<bpt id=\"p1\">[</bpt>Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/bindings.md)</ept>","source":"[Bindings](../../../../../docs/framework/wcf/bindings.md)"},{"pos":[5338,5425],"content":"<bpt id=\"p1\">[</bpt>Extending Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/extending-bindings.md)</ept>","source":"[Extending Bindings](../../../../../docs/framework/wcf/extending/extending-bindings.md)"},{"pos":[5428,5509],"content":"<bpt id=\"p1\">[</bpt>Custom Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/custom-bindings.md)</ept>","source":"[Custom Bindings](../../../../../docs/framework/wcf/extending/custom-bindings.md)"},{"pos":[5512,5609],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>customBinding&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)</ept>","source":"[\\<customBinding>](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)"}]}