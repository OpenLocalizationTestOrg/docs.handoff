{"content":"---\ntitle: \"Default Service Behavior | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"service behaviors, defaults\"\n  - \"Default Service Behavior Sample [Windows Communication Foundation]\"\nms.assetid: 442d4f71-c64e-4c62-816a-a66c38e7d3ec\ncaps.latest.revision: 28\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Default Service Behavior\nThis sample demonstrates how service behavior settings can be configured. The sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which implements the `ICalculator` service contract. This sample explicitly defines service behaviors and operation behaviors using the <xref:System.ServiceModel.ServiceBehaviorAttribute> and <xref:System.ServiceModel.OperationBehaviorAttribute> attributes. You can configure behaviors in configuration files or imperatively in code (as this sample demonstrates).  \n  \n In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The service class specifies behaviors with the <xref:System.ServiceModel.ServiceBehaviorAttribute> and the <xref:System.ServiceModel.OperationBehaviorAttribute> as shown in the following code sample. All values specified are the defaults.  \n  \n```  \n[ServiceBehavior(  \n    AutomaticSessionShutdown=true,  \n    ConcurrencyMode=ConcurrencyMode.Single,  \n    InstanceContextMode=InstanceContextMode.PerSession,  \n    IncludeExceptionDetailInFaults=false,  \n    UseSynchronizationContext=true,  \n    ValidateMustUnderstand=true)]  \npublic class CalculatorService : ICalculator  \n{  \n    [OperationBehavior(  \n        TransactionAutoComplete=true,  \n        TransactionScopeRequired=false,  \n        Impersonation=ImpersonationOption.NotAllowed)]  \n    public double Add(double n1, double n2)  \n    {  \n        System.Threading.Thread.Sleep(1600);  \n        return n1 + n2;  \n    }  \n    ...  \n}  \n  \n```  \n  \n Service behaviors are specified with the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute. The following table describes some of these behaviors.  \n  \n|Service behavior|Description|  \n|----------------------|-----------------|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.AutomaticSessionShutdown%2A>|Automatically shuts down a session at the client's request.|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>|Specifies the concurrency mode for each service instance.|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A>|Specifies the instance context mode.|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.UseSynchronizationContext%2A>|Determines whether to use the provided synchronization context, if one is set. Use this when you want to control whether to use a `WindowsFormsSynchronizationContext` in Windows Forms applications.|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A>|Determines whether general unhandled execution exceptions are to be converted into a `Fault<string>` and sent as a fault message.|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A>|Specifies the isolation level for transactions.|  \n|<xref:System.ServiceModel.ServiceBehaviorAttribute.ValidateMustUnderstand%2A>|Determines whether unexpected message headers cause an error condition.|  \n  \n Operation behaviors are specified by using the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute. The following table describes some of these behaviors.  \n  \n|Operation Behavior|Description|  \n|------------------------|-----------------|  \n|<xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A>|Determines whether service operation completion commits the current transaction.|  \n|<xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A>|Determines whether the service operation enlists in a client-flowed transaction.|  \n|<xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A>|Determines whether the service operation impersonates the caller's identity.|  \n|<xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A>|Determines whether service instances are recycled at the start or end of the service operation call.|  \n  \n When you run the sample, the operation requests and responses are displayed in the client console window. The delay between the calls is the result of the calls to `System.Threading.Thread.Sleep()` made in the service operations. The rest of the behavior samples explain these behaviors in more detail. Press ENTER in the client window to shut down the client.  \n  \n```  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\Behaviors\\Default`  \n  \n## See Also","nodes":[{"pos":[12,53],"content":"Default Service Behavior | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Default Service Behavior | Microsoft Docs","pos":[0,41]}]},{"pos":[481,505],"content":"Default Service Behavior","linkify":"Default Service Behavior","nodes":[{"content":"Default Service Behavior","pos":[0,24]}]},{"content":"This sample demonstrates how service behavior settings can be configured.","pos":[506,579]},{"content":"The sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>, which implements the <ph id=\"ph1\">`ICalculator`</ph> service contract.","pos":[580,744],"source":" The sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which implements the `ICalculator` service contract."},{"content":"This sample explicitly defines service behaviors and operation behaviors using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph> attributes.","pos":[745,949],"source":" This sample explicitly defines service behaviors and operation behaviors using the <xref:System.ServiceModel.ServiceBehaviorAttribute> and <xref:System.ServiceModel.OperationBehaviorAttribute> attributes."},{"content":"You can configure behaviors in configuration files or imperatively in code (as this sample demonstrates).","pos":[950,1055]},{"content":"In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).","pos":[1062,1186]},{"pos":[1194,1301],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The service class specifies behaviors with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph> as shown in the following code sample.","pos":[1308,1507],"source":"The service class specifies behaviors with the <xref:System.ServiceModel.ServiceBehaviorAttribute> and the <xref:System.ServiceModel.OperationBehaviorAttribute> as shown in the following code sample."},{"content":"All values specified are the defaults.","pos":[1508,1546]},{"content":"Service behaviors are specified with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute.","pos":[2215,2318],"source":"Service behaviors are specified with the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute."},{"content":"The following table describes some of these behaviors.","pos":[2319,2373]},{"content":"Service behavior","pos":[2380,2396]},{"content":"Description","pos":[2397,2408]},{"content":"Automatically shuts down a session at the client's request.","pos":[2538,2597]},{"content":"Specifies the concurrency mode for each service instance.","pos":[2673,2730]},{"content":"Specifies the instance context mode.","pos":[2810,2846]},{"content":"Determines whether to use the provided synchronization context, if one is set.","pos":[2932,3010]},{"content":"Use this when you want to control whether to use a <ph id=\"ph1\">`WindowsFormsSynchronizationContext`</ph> in Windows Forms applications.","pos":[3011,3129],"source":" Use this when you want to control whether to use a `WindowsFormsSynchronizationContext` in Windows Forms applications."},{"pos":[3220,3349],"content":"Determines whether general unhandled execution exceptions are to be converted into a <ph id=\"ph1\">`Fault&lt;string&gt;`</ph> and sent as a fault message.","source":"Determines whether general unhandled execution exceptions are to be converted into a `Fault<string>` and sent as a fault message."},{"content":"Specifies the isolation level for transactions.","pos":[3435,3482]},{"content":"Determines whether unexpected message headers cause an error condition.","pos":[3565,3636]},{"content":"Operation behaviors are specified by using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph> attribute.","pos":[3644,3755],"source":"Operation behaviors are specified by using the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute."},{"content":"The following table describes some of these behaviors.","pos":[3756,3810]},{"content":"Operation Behavior","pos":[3817,3835]},{"content":"Description","pos":[3836,3847]},{"content":"Determines whether service operation completion commits the current transaction.","pos":[3980,4060]},{"content":"Determines whether the service operation enlists in a client-flowed transaction.","pos":[4147,4227]},{"content":"Determines whether the service operation impersonates the caller's identity.","pos":[4303,4379]},{"content":"Determines whether service instances are recycled at the start or end of the service operation call.","pos":[4461,4561]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[4569,4674]},{"content":"The delay between the calls is the result of the calls to <ph id=\"ph1\">`System.Threading.Thread.Sleep()`</ph> made in the service operations.","pos":[4675,4798],"source":" The delay between the calls is the result of the calls to `System.Threading.Thread.Sleep()` made in the service operations."},{"content":"The rest of the behavior samples explain these behaviors in more detail.","pos":[4799,4871]},{"content":"Press ENTER in the client window to shut down the client.","pos":[4872,4929]},{"pos":[5113,5149],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[5159,5358],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[5368,5577],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[5587,5795],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[5803,5935],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5989,6315],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[6316,6366]},{"pos":[6455,6463],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}