{"content":"---\ntitle: \"&lt;add&gt; of &lt;knownCertificates&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 128aaabe-3f1a-4c3b-b59f-898d0f02910f\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# &lt;add&gt; of &lt;knownCertificates&gt;\nAdds an X.509 certificate to the collection of known certificates.  \n  \n \\<system.ServiceModel>  \n\\<behaviors>  \n\\<serviceBehaviors>  \n\\<behavior>  \n\\<serviceCredentials>  \n\\<issuedTokenAuthentication>  \n\\<knownCertificates>  \n\\<add>  \n  \n## Syntax  \n  \n```  \n  \n<knownCertificates>   \n   <add findValue=\"String\"  \n      storeLocation=\"CurrentUser/LocalMachine\"  \n      storeName=\"AddressBook/AuthRoot/CertificateAuthority/Disallowed/My/Root/TrustedPeople/TrustedPublisher\"  \n      x509FindType=\"FindByThumbprint/FindBySubjectName/FindBySubjectDistinguishedName/FindByIssuerName/FindByIssuerDistinguishedName/FindBySerialNumber/FindByTimeValid/FindByTimeNotYetValid/FindBySerialNumber/FindByTimeExpired/FindByTemplateName/FindByApplicationPolicy/FindByCertificatePolicy/FindByExtension/FindByKeyUsage/FindBySubjectKeyIdentifier\"/>  \n</knownCertificates>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|findValue|String. The value to search for.|  \n|storeLocation|Enumeration. One of the two store locations to search.|  \n|storeName|Enumeration. One of the system stores to search.|  \n|x509FindType|Enumeration. One of the certificate fields to search.|  \n  \n## findValue Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|String|The value depends on the field (specified by the X509FindType attribute) being searched. For example, if searching for a thumbprint, the value must be a string of hexadecimal numbers.|  \n  \n## x509FindType Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|Values include: FindByThumbprint, FindBySubjectName, FindBySubjectDistinguishedName, FindByIssuerName, FindByIssuerDistinguishedName, FindBySerialNumber, FindByTimeValid, FindByTimeNotYetValid, FindBySerialNumber, FindByTimeExpired, FindByTemplateName, FindByApplicationPolicy, FindByCertificatePolicy, FindByExtension, FindByKeyUsage, FindBySubjectKeyIdentifier.|  \n  \n## storeLocation Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|CurrentUser or LocalMachine.|  \n  \n## storeName Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|Values include: AddressBook, AuthRoot, CertificateAuthority, Disallowed, My, Root, TrustedPeople, and TrustedPublisher.|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<knownCertificates>](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)|Represents a collection of X.509 certificates that are provided by a Security Token Service (STS) for validation of security tokens.|  \n  \n## Remarks  \n The issued token scenario has three stages. In the first stage, a client trying to access a service is referred to a *secure token service*. The secure token service then authenticates the client and subsequently issues the client a token, typically a Security Assertions Markup Language (SAML) token. The client then returns to the service with the token. The service examines the token for data that allows the service to authenticate the token and therefore the client. To authenticate the token, the certificate the secure token service uses must be known to the service.  \n  \n The [\\<issuedTokenAuthentication>](../../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) element is the repository for any such secure token service certificates. To add certificates, use the [\\<knownCertificates>](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md). Insert an [\\<add> element \\<knownCertificates> Element](../../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) for each certificate, as shown in the following example.  \n  \n```  \n<issuedTokenAuthentication>  \n   <knownCertificates>  \n      <add findValue=\"www.contoso.com\"   \n           storeLocation=\"LocalMachine\" storeName=\"My\"   \n           X509FindType=\"FindBySubjectName\" />  \n    </knownCertificates>  \n</issuedTokenAuthentication>  \n```  \n  \n By default, the certificates must be obtained from a secure token service. These \"known\" certificates ensure that only legitimate clients can access a service.  \n  \n To review conditions required for a client to be authenticated by a federated service, as well as more information on using this configuration element, see [How to: Configure Credentials on a Federation Service](../../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md). For more information about federated scenarios, see [Federation and Issued Tokens](../../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).  \n  \n## Example  \n The following example adds certificate to the repository for any STS certificates.  \n  \n```  \n<serviceBehaviors>  \n <behavior name=\"myServiceBehavior\">  \n  <serviceCredentials>  \n   <issuedTokenAuthentication>  \n    <knownCertificates>  \n     <add findValue=\"www.contoso.com\" storeLocation=\"LocalMachine\"   \n           storeName=\"CertificateAuthority\"  \n           x509FindType=\"FindByIssuerName\" />  \n     </knownCertificates>  \n    </issuedTokenAuthentication>  \n   </serviceCredentials>  \n  </behavior>  \n </serviceBehaviors>  \n```  \n  \n## See Also  \n <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>   \n <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.AllowedAudienceUris%2A>   \n <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.AudienceUriMode%2A>   \n <xref:System.ServiceModel.Configuration.IssuedTokenServiceElement.KnownCertificates%2A>   \n <xref:System.ServiceModel.Configuration.X509CertificateTrustedIssuerElementCollection>   \n <xref:System.ServiceModel.Configuration.X509CertificateTrustedIssuerElement>   \n <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A>   \n [\\<knownCertificates>](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)   \n [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)   \n [Federation and Issued Tokens](../../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)   \n [How to: Configure Credentials on a Federation Service](../../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)   \n [Securing Services and Clients](../../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)","nodes":[{"pos":[4,361],"nodes":[{"content":"&lt;add&gt; of &lt;knownCertificates&gt; | Microsoft Docs","nodes":[{"pos":[0,57],"content":"&lt;add&gt; of &lt;knownCertificates&gt; | Microsoft Docs","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>add<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>knownCertificates<ph id=\"ph4\">&amp;gt;</ph> | Microsoft Docs","pos":[0,57],"source":"&lt;add&gt; of &lt;knownCertificates&gt; | Microsoft Docs"}]}],"pos":[6,66],"yaml":true}],"content":"title: \"&lt;add&gt; of &lt;knownCertificates&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 128aaabe-3f1a-4c3b-b59f-898d0f02910f\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[368,408],"content":"&lt;add&gt; of &lt;knownCertificates&gt;","linkify":"&lt;add&gt; of &lt;knownCertificates&gt;","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>add<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>knownCertificates<ph id=\"ph4\">&amp;gt;</ph>","pos":[0,40],"source":"&lt;add&gt; of &lt;knownCertificates&gt;"}]},{"content":"Adds an X.509 certificate to the collection of known certificates.","pos":[409,475]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[482,504],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behaviors&gt;","pos":[507,519],"source":"\\<behaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceBehaviors&gt;","pos":[522,541],"source":"\\<serviceBehaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behavior&gt;","pos":[544,555],"source":"\\<behavior>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceCredentials&gt;","pos":[558,579],"source":"\\<serviceCredentials>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>issuedTokenAuthentication&gt;","pos":[582,610],"source":"\\<issuedTokenAuthentication>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>knownCertificates&gt;","pos":[613,633],"source":"\\<knownCertificates>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>add&gt;","pos":[636,642],"source":"\\<add>"},{"pos":[651,657],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1277,1300],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[1304,1384]},{"pos":[1394,1404],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1411,1420]},{"content":"Description","pos":[1421,1432]},{"content":"findValue","pos":[1475,1484]},{"content":"String.","pos":[1485,1492]},{"content":"The value to search for.","pos":[1493,1517]},{"content":"storeLocation","pos":[1522,1535]},{"content":"Enumeration.","pos":[1536,1548]},{"content":"One of the two store locations to search.","pos":[1549,1590]},{"content":"storeName","pos":[1595,1604]},{"content":"Enumeration.","pos":[1605,1617]},{"content":"One of the system stores to search.","pos":[1618,1653]},{"content":"x509FindType","pos":[1658,1670]},{"content":"Enumeration.","pos":[1671,1683]},{"content":"One of the certificate fields to search.","pos":[1684,1724]},{"pos":[1734,1753],"content":"findValue Attribute","linkify":"findValue Attribute","nodes":[{"content":"findValue Attribute","pos":[0,19]}]},{"content":"Value","pos":[1760,1765]},{"content":"Description","pos":[1766,1777]},{"content":"String","pos":[1816,1822]},{"content":"The value depends on the field (specified by the X509FindType attribute) being searched.","pos":[1823,1911]},{"content":"For example, if searching for a thumbprint, the value must be a string of hexadecimal numbers.","pos":[1912,2006]},{"pos":[2016,2038],"content":"x509FindType Attribute","linkify":"x509FindType Attribute","nodes":[{"content":"x509FindType Attribute","pos":[0,22]}]},{"content":"Value","pos":[2045,2050]},{"content":"Description","pos":[2051,2062]},{"content":"Enumeration","pos":[2101,2112]},{"content":"Values include: FindByThumbprint, FindBySubjectName, FindBySubjectDistinguishedName, FindByIssuerName, FindByIssuerDistinguishedName, FindBySerialNumber, FindByTimeValid, FindByTimeNotYetValid, FindBySerialNumber, FindByTimeExpired, FindByTemplateName, FindByApplicationPolicy, FindByCertificatePolicy, FindByExtension, FindByKeyUsage, FindBySubjectKeyIdentifier.","pos":[2113,2476]},{"pos":[2486,2509],"content":"storeLocation Attribute","linkify":"storeLocation Attribute","nodes":[{"content":"storeLocation Attribute","pos":[0,23]}]},{"content":"Value","pos":[2516,2521]},{"content":"Description","pos":[2522,2533]},{"content":"Enumeration","pos":[2572,2583]},{"content":"CurrentUser or LocalMachine.","pos":[2584,2612]},{"pos":[2622,2641],"content":"storeName Attribute","linkify":"storeName Attribute","nodes":[{"content":"storeName Attribute","pos":[0,19]}]},{"content":"Value","pos":[2648,2653]},{"content":"Description","pos":[2654,2665]},{"content":"Enumeration","pos":[2704,2715]},{"content":"Values include: AddressBook, AuthRoot, CertificateAuthority, Disallowed, My, Root, TrustedPeople, and TrustedPublisher.","pos":[2716,2835]},{"pos":[2846,2860],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[2864,2869]},{"pos":[2879,2894],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[2901,2908]},{"content":"Description","pos":[2909,2920]},{"pos":[2961,3066],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>knownCertificates&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)</ept>","source":"[\\<knownCertificates>](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)"},{"content":"Represents a collection of X.509 certificates that are provided by a Security Token Service (STS) for validation of security tokens.","pos":[3067,3199]},{"pos":[3209,3216],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The issued token scenario has three stages.","pos":[3220,3263]},{"content":"In the first stage, a client trying to access a service is referred to a <bpt id=\"p1\">*</bpt>secure token service<ept id=\"p1\">*</ept>.","pos":[3264,3360],"source":" In the first stage, a client trying to access a service is referred to a *secure token service*."},{"content":"The secure token service then authenticates the client and subsequently issues the client a token, typically a Security Assertions Markup Language (SAML) token.","pos":[3361,3521]},{"content":"The client then returns to the service with the token.","pos":[3522,3576]},{"content":"The service examines the token for data that allows the service to authenticate the token and therefore the client.","pos":[3577,3692]},{"content":"To authenticate the token, the certificate the secure token service uses must be known to the service.","pos":[3693,3795]},{"content":"The <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>issuedTokenAuthentication&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md)</ept> element is the repository for any such secure token service certificates.","pos":[3802,4023],"source":"The [\\<issuedTokenAuthentication>](../../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) element is the repository for any such secure token service certificates."},{"content":"To add certificates, use the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>knownCertificates&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)</ept>.","pos":[4024,4159],"source":" To add certificates, use the [\\<knownCertificates>](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)."},{"content":"Insert an <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>add&gt; element <ph id=\"ph2\">\\&lt;</ph>knownCertificates&gt; Element<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md)</ept> for each certificate, as shown in the following example.","pos":[4160,4362],"source":" Insert an [\\<add> element \\<knownCertificates> Element](../../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) for each certificate, as shown in the following example."},{"content":"By default, the certificates must be obtained from a secure token service.","pos":[4646,4720]},{"content":"These \"known\" certificates ensure that only legitimate clients can access a service.","pos":[4721,4805]},{"content":"To review conditions required for a client to be authenticated by a federated service, as well as more information on using this configuration element, see <bpt id=\"p1\">[</bpt>How to: Configure Credentials on a Federation Service<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)</ept>.","pos":[4812,5131],"source":"To review conditions required for a client to be authenticated by a federated service, as well as more information on using this configuration element, see [How to: Configure Credentials on a Federation Service](../../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)."},{"content":"For more information about federated scenarios, see <bpt id=\"p1\">[</bpt>Federation and Issued Tokens<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)</ept>.","pos":[5132,5298],"source":" For more information about federated scenarios, see [Federation and Issued Tokens](../../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)."},{"pos":[5307,5314],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example adds certificate to the repository for any STS certificates.","pos":[5318,5400]},{"pos":[5861,5869],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator&gt;</ph>","pos":[5873,5941],"source":"<xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator> "},{"content":"<ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.AllowedAudienceUris%2A&gt;</ph>","pos":[5946,6037],"source":"<xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.AllowedAudienceUris%2A> "},{"content":"<ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.AudienceUriMode%2A&gt;</ph>","pos":[6042,6129],"source":"<xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.AudienceUriMode%2A> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.IssuedTokenServiceElement.KnownCertificates%2A&gt;</ph>","pos":[6134,6221],"source":"<xref:System.ServiceModel.Configuration.IssuedTokenServiceElement.KnownCertificates%2A> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.X509CertificateTrustedIssuerElementCollection&gt;</ph>","pos":[6226,6312],"source":"<xref:System.ServiceModel.Configuration.X509CertificateTrustedIssuerElementCollection> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.X509CertificateTrustedIssuerElement&gt;</ph>","pos":[6317,6393],"source":"<xref:System.ServiceModel.Configuration.X509CertificateTrustedIssuerElement> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A&gt;</ph>","pos":[6398,6483],"source":"<xref:System.ServiceModel.Security.IssuedTokenServiceCredential.KnownCertificates%2A> "},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>knownCertificates&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)</ept><ph id=\"ph2\"> </ph>","pos":[6488,6594],"source":"[\\<knownCertificates>](../../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md) "},{"content":"<bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept><ph id=\"ph1\"> </ph>","pos":[6598,6706],"source":"[Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md) "},{"content":"<bpt id=\"p1\">[</bpt>Federation and Issued Tokens<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)</ept><ph id=\"ph1\"> </ph>","pos":[6710,6824],"source":"[Federation and Issued Tokens](../../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Configure Credentials on a Federation Service<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)</ept><ph id=\"ph1\"> </ph>","pos":[6828,6991],"source":"[How to: Configure Credentials on a Federation Service](../../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md) "},{"content":"<bpt id=\"p1\">[</bpt>Securing Services and Clients<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)</ept>","pos":[6995,7110],"source":"[Securing Services and Clients](../../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)"}]}