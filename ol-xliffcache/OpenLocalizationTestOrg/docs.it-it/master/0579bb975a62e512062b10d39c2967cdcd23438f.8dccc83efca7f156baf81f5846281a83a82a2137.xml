{"content":"---\ntitle: \"Mitigation: Path Normalization | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-bcl\"\n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 158d47b1-ba6d-4fa6-8963-a012666bdc31\ncaps.latest.revision: 6\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Mitigation: Path Normalization\nStarting with apps the target  the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization in the .NET Framework has changed.  \n  \n## What is path normalization?  \n Normalizing a path involves modifying the string that identifies a path or file so that it conforms to a valid path on the target operating system. Normalization typically involves:  \n  \n-   Canonicalizing component and directory separators.  \n  \n-   Applying the current directory to a relative path.  \n  \n-   Evaluating the relative directory (`.`) or the parent directory (`..`) in a path.  \n  \n-   Trimming specified characters.  \n  \n## The changes  \n Starting with apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization has changed in the following ways:  \n  \n-   The runtime defers to the operating system's [GetFullPathName](https://msdn.microsoft.com/library/windows/desktop/aa364963\\(v=vs.85\\).aspx) function to normalize paths.  \n  \n-   Normalization no longer involves trimming the end of directory segments (such as a space at the end of a directory name).  \n  \n-   Support for device path syntax in full trust, including  `\\\\.\\` and, for file I/O APIs   in mscorlib.dll, `\\\\?\\`.  \n  \n-   The runtime does not validate device syntax paths.  \n  \n-   The use of device syntax to access alternate data streams is supported.  \n  \n## Impact  \n For apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later, these changes are on  by default. They should improve performance while allowing methods to access previously inaccessible paths.  \n  \n Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and earlier versions but are running under the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later are unaffected by this change.  \n  \n## Mitigation  \n Apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can opt out of this change and use legacy normalization by adding the following to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file:  \n  \n```xml  \n  \n<runtime>  \n    <AppContextSwitchOverrides value=\"Switch.System.IO.UseLegacyPathHandling=true\" />    \n</runtime>  \n  \n```  \n  \n Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] or earlier but are running on the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can enable the changes to path normalization by adding the following line to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application .configuration file:  \n  \n```xml  \n  \n<runtime>  \n    <AppContextSwitchOverrides value=\"Switch.System.IO.UseLegacyPathHandling=false\" />    \n</runtime>  \n  \n```  \n  \n## See Also  \n [Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)","nodes":[{"pos":[12,59],"content":"Mitigation: Path Normalization | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Mitigation: Path Normalization | Microsoft Docs","pos":[0,47]}]},{"pos":[379,409],"content":"Mitigation: Path Normalization","linkify":"Mitigation: Path Normalization","nodes":[{"content":"Mitigation: Path Normalization","pos":[0,30]}]},{"pos":[410,554],"content":"Starting with apps the target  the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, path normalization in the .NET Framework has changed.","source":"Starting with apps the target  the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization in the .NET Framework has changed."},{"pos":[563,590],"content":"What is path normalization?","linkify":"What is path normalization?","nodes":[{"content":"What is path normalization?","pos":[0,27]}]},{"content":"Normalizing a path involves modifying the string that identifies a path or file so that it conforms to a valid path on the target operating system.","pos":[594,741]},{"content":"Normalization typically involves:","pos":[742,775]},{"content":"Canonicalizing component and directory separators.","pos":[785,835]},{"content":"Applying the current directory to a relative path.","pos":[845,895]},{"pos":[905,986],"content":"Evaluating the relative directory (<ph id=\"ph1\">`.`</ph>) or the parent directory (<ph id=\"ph2\">`..`</ph>) in a path.","source":"Evaluating the relative directory (`.`) or the parent directory (`..`) in a path."},{"content":"Trimming specified characters.","pos":[996,1026]},{"pos":[1035,1046],"content":"The changes","linkify":"The changes","nodes":[{"content":"The changes","pos":[0,11]}]},{"pos":[1050,1194],"content":"Starting with apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, path normalization has changed in the following ways:","source":"Starting with apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization has changed in the following ways:"},{"pos":[1204,1372],"content":"The runtime defers to the operating system's <bpt id=\"p1\">[</bpt>GetFullPathName<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/desktop/aa364963\\(v=vs.85\\).aspx)</ept> function to normalize paths.","source":"The runtime defers to the operating system's [GetFullPathName](https://msdn.microsoft.com/library/windows/desktop/aa364963\\(v=vs.85\\).aspx) function to normalize paths."},{"content":"Normalization no longer involves trimming the end of directory segments (such as a space at the end of a directory name).","pos":[1382,1503]},{"pos":[1513,1626],"content":"Support for device path syntax in full trust, including  <ph id=\"ph1\">`\\\\.\\`</ph> and, for file I/O APIs   in mscorlib.dll, <ph id=\"ph2\">`\\\\?\\`</ph>.","source":"Support for device path syntax in full trust, including  `\\\\.\\` and, for file I/O APIs   in mscorlib.dll, `\\\\?\\`."},{"content":"The runtime does not validate device syntax paths.","pos":[1636,1686]},{"content":"The use of device syntax to access alternate data streams is supported.","pos":[1696,1767]},{"pos":[1776,1782],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"content":"For apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later, these changes are on  by default.","pos":[1786,1909],"source":"For apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later, these changes are on  by default."},{"content":"They should improve performance while allowing methods to access previously inaccessible paths.","pos":[1910,2005]},{"pos":[2012,2229],"content":"Apps that target the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> and earlier versions but are running under the <ph id=\"ph2\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later are unaffected by this change.","source":"Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and earlier versions but are running under the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later are unaffected by this change."},{"pos":[2238,2248],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"pos":[2252,2562],"content":"Apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later can opt out of this change and use legacy normalization by adding the following to the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of the application configuration file:","source":"Apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can opt out of this change and use legacy normalization by adding the following to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file:"},{"pos":[2708,3102],"content":"Apps that target the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> or earlier but are running on the <ph id=\"ph2\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later can enable the changes to path normalization by adding the following line to the <bpt id=\"p1\">[</bpt><ph id=\"ph3\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of the application .configuration file:","source":"Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] or earlier but are running on the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can enable the changes to path normalization by adding the following line to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application .configuration file:"},{"pos":[3251,3259],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[3263,3375],"content":"<bpt id=\"p1\">[</bpt>Retargeting Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)</ept>","source":"[Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)"}]}