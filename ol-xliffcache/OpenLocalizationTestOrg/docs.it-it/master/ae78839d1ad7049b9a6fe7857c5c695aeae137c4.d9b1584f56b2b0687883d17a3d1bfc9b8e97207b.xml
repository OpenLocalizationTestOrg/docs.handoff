{"content":"---\ntitle: \"How to: Verify the Digital Signatures of XML Documents | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"System.Security.Cryptography.SignedXml class\"\n  - \"signatures, cryptographic\"\n  - \"System.Security.Cryptography.RSACryptoServiceProvider class\"\n  - \"verifying signatures\"\n  - \"checking signatures\"\n  - \"XML digital signatures\"\n  - \"digital signatures, verifying\"\nms.assetid: a4d5ceb1-b9f5-47e8-9e4a-a2b39110002f\ncaps.latest.revision: 8\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# How to: Verify the Digital Signatures of XML Documents\nYou can use the classes in the <xref:System.Security.Cryptography.Xml> namespace to verify XML data signed with a digital signature.  XML digital signatures (XMLDSIG) allow you to verify that data was not altered after it was signed.  For more information about the XMLDSIG standard, see the World Wide Web Consortium (W3C) specification at http://www.w3.org/TR/xmldsig-core/.  \n  \n The code example in this procedure demonstrates how to verify an XML digital signature contained in a <`Signature`> element.  The example retrieves an RSA public key from a key container and then uses the key to verify the signature.  \n  \n For information about how create a digital signature that can be verified using this technique, see [How to: Sign XML Documents with Digital Signatures](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md).  \n  \n### To verify the digital signature of an XML document  \n  \n1.  To verify the document, you must use the same asymmetric key that was used for signing.  Create a <xref:System.Security.Cryptography.CspParameters> object and specify the name of the key container that was used for signing.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#2](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#2)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#2)]  \n  \n2.  Retrieve the public key using the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class.  The key is automatically loaded from the key container by name when you pass the <xref:System.Security.Cryptography.CspParameters> object to the constructor of the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#3](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#3)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#3)]  \n  \n3.  Create an <xref:System.Xml.XmlDocument> object by loading an XML file from disk.  The <xref:System.Xml.XmlDocument> object contains the signed XML document to verify.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#4](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#4)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#4)]  \n  \n4.  Create a new <xref:System.Security.Cryptography.Xml.SignedXml> object and pass the <xref:System.Xml.XmlDocument> object to it.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#5](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#5)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#5)]  \n  \n5.  Find the <`signature`> element and create a new <xref:System.Xml.XmlNodeList> object.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#6](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#6)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#6)]  \n  \n6.  Load the XML of the first <`signature`> element into the <xref:System.Security.Cryptography.Xml.SignedXml> object.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#7](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#7)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#7)]  \n  \n7.  Check the signature using the <xref:System.Security.Cryptography.Xml.SignedXml.CheckSignature%2A> method and the RSA public key.  This method returns a Boolean value that indicates success or failure.  \n  \n     [!code-csharp[HowToVerifyXMLDocumentRSA#8](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#8)]\n     [!code-vb[HowToVerifyXMLDocumentRSA#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#8)]  \n  \n## Example  \n This example assumes that a file named `\"test.xml\"` exists in the same directory as the compiled program.  The `\"test.xml\"` file must be signed using the techniques described in [How to: Sign XML Documents with Digital Signatures](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md).  \n  \n [!code-csharp[HowToVerifyXMLDocumentRSA#1](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#1)]\n [!code-vb[HowToVerifyXMLDocumentRSA#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#1)]  \n  \n## Compiling the Code  \n  \n-   To compile this example, you need to include a reference to `System.Security.dll`.  \n  \n-   Include the following namespaces: <xref:System.Xml>, <xref:System.Security.Cryptography>, and <xref:System.Security.Cryptography.Xml>.  \n  \n## .NET Framework Security  \n Never store or transfer the private key of an asymmetric key pair in plaintext.  For more information about symmetric and asymmetric cryptographic keys, see [Generating Keys for Encryption and Decryption](../../../docs/standard/security/generating-keys-for-encryption-and-decryption.md).  \n  \n Never embed a private key directly into your source code.  Embedded keys can be easily read from an assembly using the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) or by opening the assembly in a text editor such as Notepad.  \n  \n## See Also  \n <xref:System.Security.Cryptography.Xml>   \n [How to: Sign XML Documents with Digital Signatures](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)","nodes":[{"pos":[4,710],"embed":true,"restype":"x-metadata","content":"title: \"How to: Verify the Digital Signatures of XML Documents | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"System.Security.Cryptography.SignedXml class\"\n  - \"signatures, cryptographic\"\n  - \"System.Security.Cryptography.RSACryptoServiceProvider class\"\n  - \"verifying signatures\"\n  - \"checking signatures\"\n  - \"XML digital signatures\"\n  - \"digital signatures, verifying\"\nms.assetid: a4d5ceb1-b9f5-47e8-9e4a-a2b39110002f\ncaps.latest.revision: 8\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"","nodes":[{"content":"How to: Verify the Digital Signatures of XML Documents | Microsoft Docs","nodes":[{"pos":[0,71],"content":"How to: Verify the Digital Signatures of XML Documents | Microsoft Docs","nodes":[{"content":"How to: Verify the Digital Signatures of XML Documents | Microsoft Docs","pos":[0,71]}]}],"path":["title"]}],"yml":true},{"pos":[717,771],"content":"How to: Verify the Digital Signatures of XML Documents","linkify":"How to: Verify the Digital Signatures of XML Documents","nodes":[{"content":"How to: Verify the Digital Signatures of XML Documents","pos":[0,54]}]},{"content":"You can use the classes in the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml&gt;</ph> namespace to verify XML data signed with a digital signature.","pos":[772,904],"source":"You can use the classes in the <xref:System.Security.Cryptography.Xml> namespace to verify XML data signed with a digital signature."},{"content":"XML digital signatures (XMLDSIG) allow you to verify that data was not altered after it was signed.","pos":[906,1005]},{"content":"For more information about the XMLDSIG standard, see the World Wide Web Consortium (W3C) specification at http://www.w3.org/TR/xmldsig-core/.","pos":[1007,1148]},{"content":"The code example in this procedure demonstrates how to verify an XML digital signature contained in a &lt;<ph id=\"ph1\">`Signature`</ph>&gt; element.","pos":[1155,1279],"source":"The code example in this procedure demonstrates how to verify an XML digital signature contained in a <`Signature`> element."},{"content":"The example retrieves an RSA public key from a key container and then uses the key to verify the signature.","pos":[1281,1388]},{"pos":[1395,1634],"content":"For information about how create a digital signature that can be verified using this technique, see <bpt id=\"p1\">[</bpt>How to: Sign XML Documents with Digital Signatures<ept id=\"p1\">](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)</ept>.","source":"For information about how create a digital signature that can be verified using this technique, see [How to: Sign XML Documents with Digital Signatures](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)."},{"pos":[1644,1694],"content":"To verify the digital signature of an XML document","linkify":"To verify the digital signature of an XML document","nodes":[{"content":"To verify the digital signature of an XML document","pos":[0,50]}]},{"content":"To verify the document, you must use the same asymmetric key that was used for signing.","pos":[1704,1791]},{"content":"Create a <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object and specify the name of the key container that was used for signing.","pos":[1793,1927],"source":"  Create a <xref:System.Security.Cryptography.CspParameters> object and specify the name of the key container that was used for signing."},{"pos":[1938,2213],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#2](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#2)]\n [!code-vb[HowToVerifyXMLDocumentRSA#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#2)]","leadings":["","    "],"nodes":[]},{"content":"Retrieve the public key using the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.RSACryptoServiceProvider&gt;</ph> class.","pos":[2223,2324],"source":"Retrieve the public key using the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class."},{"content":"The key is automatically loaded from the key container by name when you pass the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object to the constructor of the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RSACryptoServiceProvider&gt;</ph> class.","pos":[2326,2557],"source":"  The key is automatically loaded from the key container by name when you pass the <xref:System.Security.Cryptography.CspParameters> object to the constructor of the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class."},{"pos":[2568,2843],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#3](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#3)]\n [!code-vb[HowToVerifyXMLDocumentRSA#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#3)]","leadings":["","    "],"nodes":[]},{"content":"Create an <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object by loading an XML file from disk.","pos":[2853,2933],"source":"Create an <xref:System.Xml.XmlDocument> object by loading an XML file from disk."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object contains the signed XML document to verify.","pos":[2935,3019],"source":"  The <xref:System.Xml.XmlDocument> object contains the signed XML document to verify."},{"pos":[3030,3305],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#4](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#4)]\n [!code-vb[HowToVerifyXMLDocumentRSA#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#4)]","leadings":["","    "],"nodes":[]},{"content":"Create a new <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.SignedXml&gt;</ph> object and pass the <ph id=\"ph2\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object to it.","pos":[3315,3441],"source":"Create a new <xref:System.Security.Cryptography.Xml.SignedXml> object and pass the <xref:System.Xml.XmlDocument> object to it."},{"pos":[3452,3727],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#5](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#5)]\n [!code-vb[HowToVerifyXMLDocumentRSA#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#5)]","leadings":["","    "],"nodes":[]},{"pos":[3737,3822],"content":"Find the &lt;<ph id=\"ph1\">`signature`</ph>&gt; element and create a new <ph id=\"ph2\">&lt;xref:System.Xml.XmlNodeList&gt;</ph> object.","source":"Find the <`signature`> element and create a new <xref:System.Xml.XmlNodeList> object."},{"pos":[3833,4108],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#6](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#6)]\n [!code-vb[HowToVerifyXMLDocumentRSA#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#6)]","leadings":["","    "],"nodes":[]},{"pos":[4118,4232],"content":"Load the XML of the first &lt;<ph id=\"ph1\">`signature`</ph>&gt; element into the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.Xml.SignedXml&gt;</ph> object.","source":"Load the XML of the first <`signature`> element into the <xref:System.Security.Cryptography.Xml.SignedXml> object."},{"pos":[4243,4518],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#7](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#7)]\n [!code-vb[HowToVerifyXMLDocumentRSA#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#7)]","leadings":["","    "],"nodes":[]},{"content":"Check the signature using the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml.SignedXml.CheckSignature%2A&gt;</ph> method and the RSA public key.","pos":[4528,4656],"source":"Check the signature using the <xref:System.Security.Cryptography.Xml.SignedXml.CheckSignature%2A> method and the RSA public key."},{"content":"This method returns a Boolean value that indicates success or failure.","pos":[4658,4728]},{"pos":[4739,5014],"content":"[!code-csharp[HowToVerifyXMLDocumentRSA#8](../../../samples/snippets/csharp/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/cs/sample.cs#8)]\n [!code-vb[HowToVerifyXMLDocumentRSA#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/HowToVerifyXMLDocumentRSA/vb/sample.vb#8)]","leadings":["","    "],"nodes":[]},{"pos":[5023,5030],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"This example assumes that a file named <ph id=\"ph1\">`\"test.xml\"`</ph> exists in the same directory as the compiled program.","pos":[5034,5139],"source":"This example assumes that a file named `\"test.xml\"` exists in the same directory as the compiled program."},{"content":"The <ph id=\"ph1\">`\"test.xml\"`</ph> file must be signed using the techniques described in <bpt id=\"p1\">[</bpt>How to: Sign XML Documents with Digital Signatures<ept id=\"p1\">](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)</ept>.","pos":[5141,5351],"source":"  The `\"test.xml\"` file must be signed using the techniques described in [How to: Sign XML Documents with Digital Signatures](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)."},{"pos":[5638,5656],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"pos":[5666,5748],"content":"To compile this example, you need to include a reference to <ph id=\"ph1\">`System.Security.dll`</ph>.","source":"To compile this example, you need to include a reference to `System.Security.dll`."},{"content":"Include the following namespaces: <ph id=\"ph1\">&lt;xref:System.Xml&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Security.Cryptography&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.Xml&gt;</ph>.","pos":[5758,5892],"source":"Include the following namespaces: <xref:System.Xml>, <xref:System.Security.Cryptography>, and <xref:System.Security.Cryptography.Xml>."},{"pos":[5901,5924],"content":".NET Framework Security","linkify":".NET Framework Security","nodes":[{"content":".NET Framework Security","pos":[0,23]}]},{"content":"Never store or transfer the private key of an asymmetric key pair in plaintext.","pos":[5928,6007]},{"content":"For more information about symmetric and asymmetric cryptographic keys, see <bpt id=\"p1\">[</bpt>Generating Keys for Encryption and Decryption<ept id=\"p1\">](../../../docs/standard/security/generating-keys-for-encryption-and-decryption.md)</ept>.","pos":[6009,6215],"source":"  For more information about symmetric and asymmetric cryptographic keys, see [Generating Keys for Encryption and Decryption](../../../docs/standard/security/generating-keys-for-encryption-and-decryption.md)."},{"content":"Never embed a private key directly into your source code.","pos":[6222,6279]},{"content":"Embedded keys can be easily read from an assembly using the <bpt id=\"p1\">[</bpt>Ildasm.exe (IL Disassembler)<ept id=\"p1\">](../../../docs/framework/tools/ildasm-exe-il-disassembler.md)</ept> or by opening the assembly in a text editor such as Notepad.","pos":[6281,6493],"source":"  Embedded keys can be easily read from an assembly using the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) or by opening the assembly in a text editor such as Notepad."},{"pos":[6502,6510],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Xml&gt;</ph>","pos":[6514,6553],"source":"<xref:System.Security.Cryptography.Xml> "},{"content":"<bpt id=\"p1\">[</bpt>How to: Sign XML Documents with Digital Signatures<ept id=\"p1\">](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)</ept>","pos":[6558,6696],"source":"[How to: Sign XML Documents with Digital Signatures](../../../docs/standard/security/how-to-sign-xml-documents-with-digital-signatures.md)"}]}