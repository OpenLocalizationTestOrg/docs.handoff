{"content":"---\ntitle: \"<caches>\"\nms.date: \"03/30/2017\"\nms.assetid: 4651091b-3a20-40d8-b293-4408c0710143\nauthor: \"BrucePerlerMS\"\n---\n# \\<caches>\nRegisters the caches used for session tokens and token replay detection.  \n  \n \\<system.identityModel>  \n\\<identityConfiguration>  \n\\<caches>  \n  \n## Syntax  \n  \n```xml  \n<system.identityModel>  \n  <identityConfiguration>  \n    <caches>  \n    </caches>  \n  </identityConfiguration>  \n</system.identityModel>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n None  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<sessionSecurityTokenCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/sessionsecuritytokencache.md)|Registers a cache for session tokens with a service or a security token handler collection.|  \n|[\\<tokenReplayCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaycache.md)|Registers a token replay cache with a service or a security token handler collection.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)|Specifies service-level identity settings.|  \n|[\\<securityTokenHandlerConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)|Provides configuration for a collection of security token handlers.|  \n  \n## Remarks  \n A `<caches>` element can be specified at the service level under the `<identityConfiguration>` element or on the security token handler collection level under the `<securityTokenHandlerConfiguration>` element. Settings on a token handler collection override those specified on the service.  \n  \n The `<caches>` element is represented by the <xref:System.IdentityModel.Configuration.IdentityModelCachesElement> class. The configured caches are represented by the <xref:System.IdentityModel.Configuration.IdentityModelCaches> class.  \n  \n## Example  \n The following XML shows the configuration of a custom cache for holding session security tokens (<xref:System.IdentityModel.Tokens.SessionSecurityToken>). The configuration is taken from the `ClaimsAwareWebFarm` sample.  \n  \n```xml  \n<caches>  \n  <sessionSecurityTokenCache type=\"CacheLibrary.SharedSessionSecurityTokenCache, CacheLibrary\">  \n    <!--cacheServiceAddress points to the centralized session security token cache service running in the web farm.-->  \n    <cacheServiceAddress url=\"http://localhost:4161/SessionSecurityTokenCacheService.svc\" />  \n  </sessionSecurityTokenCache>  \n</caches>  \n```\n","nodes":[{"pos":[4,116],"embed":true,"restype":"x-metadata","content":"title: \"<caches>\"\nms.date: \"03/30/2017\"\nms.assetid: 4651091b-3a20-40d8-b293-4408c0710143\nauthor: \"BrucePerlerMS\"","nodes":[{"content":"<caches>","nodes":[],"path":["title"],"nosxs":false}],"yml":true},{"pos":[123,132],"content":"\\<caches>","linkify":"\\<caches>","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>caches&gt;","pos":[0,9],"source":"\\<caches>"}]},{"content":"Registers the caches used for session tokens and token replay detection.","pos":[133,205]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.identityModel&gt;","pos":[212,235],"source":"\\<system.identityModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;","pos":[238,262],"source":"\\<identityConfiguration>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>caches&gt;","pos":[265,274],"source":"\\<caches>"},{"pos":[283,289],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[455,478],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[482,562]},{"pos":[572,582],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"None","pos":[586,590]},{"pos":[600,614],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[621,628]},{"content":"Description","pos":[629,640]},{"pos":[681,826],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>sessionSecurityTokenCache&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/sessionsecuritytokencache.md)</ept>","source":"[\\<sessionSecurityTokenCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/sessionsecuritytokencache.md)"},{"content":"Registers a cache for session tokens with a service or a security token handler collection.","pos":[827,918]},{"pos":[923,1050],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>tokenReplayCache&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaycache.md)</ept>","source":"[\\<tokenReplayCache>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaycache.md)"},{"content":"Registers a token replay cache with a service or a security token handler collection.","pos":[1051,1136]},{"pos":[1147,1162],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[1169,1176]},{"content":"Description","pos":[1177,1188]},{"pos":[1229,1366],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)</ept>","source":"[\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)"},{"content":"Specifies service-level identity settings.","pos":[1367,1409]},{"pos":[1414,1575],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>securityTokenHandlerConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)</ept>","source":"[\\<securityTokenHandlerConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)"},{"content":"Provides configuration for a collection of security token handlers.","pos":[1576,1643]},{"pos":[1653,1660],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"A <ph id=\"ph1\">`&lt;caches&gt;`</ph> element can be specified at the service level under the <ph id=\"ph2\">`&lt;identityConfiguration&gt;`</ph> element or on the security token handler collection level under the <ph id=\"ph3\">`&lt;securityTokenHandlerConfiguration&gt;`</ph> element.","pos":[1664,1873],"source":"A `<caches>` element can be specified at the service level under the `<identityConfiguration>` element or on the security token handler collection level under the `<securityTokenHandlerConfiguration>` element."},{"content":"Settings on a token handler collection override those specified on the service.","pos":[1874,1953]},{"content":"The <ph id=\"ph1\">`&lt;caches&gt;`</ph> element is represented by the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Configuration.IdentityModelCachesElement&gt;</ph> class.","pos":[1960,2080],"source":"The `<caches>` element is represented by the <xref:System.IdentityModel.Configuration.IdentityModelCachesElement> class."},{"content":"The configured caches are represented by the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Configuration.IdentityModelCaches&gt;</ph> class.","pos":[2081,2194],"source":" The configured caches are represented by the <xref:System.IdentityModel.Configuration.IdentityModelCaches> class."},{"pos":[2203,2210],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following XML shows the configuration of a custom cache for holding session security tokens (<ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.SessionSecurityToken&gt;</ph>).","pos":[2214,2368],"source":"The following XML shows the configuration of a custom cache for holding session security tokens (<xref:System.IdentityModel.Tokens.SessionSecurityToken>)."},{"content":"The configuration is taken from the <ph id=\"ph1\">`ClaimsAwareWebFarm`</ph> sample.","pos":[2369,2433],"source":" The configuration is taken from the `ClaimsAwareWebFarm` sample."}]}