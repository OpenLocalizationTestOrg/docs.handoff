{"content":"---\ntitle: \"XMLSerializer Sample | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 7d134453-9a35-4202-ba77-9ca3a65babc3\ncaps.latest.revision: 23\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# XMLSerializer Sample\nThis sample demonstrates how to serialize and deserialize types that are compatible with the <xref:System.Xml.Serialization.XmlSerializer>. The default [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] formatter is the <xref:System.Runtime.Serialization.DataContractSerializer> class. The <xref:System.Xml.Serialization.XmlSerializer> class can be used to serialize and deserialize types when the <xref:System.Runtime.Serialization.DataContractSerializer> class cannot be used. This is often the case when precise control over the XML is required - for example, if a piece of data must be an XML attribute and not an XML element. Also, the <xref:System.Xml.Serialization.XmlSerializer> often gets automatically selected when creating clients for non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services.  \n  \n In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.XmlSerializerFormatAttribute> must be applied to the interface as shown in the following sample code.  \n  \n```  \n[ServiceContract(Namespace=\"http://Microsoft.ServiceModel.Samples\"), XmlSerializerFormat]  \npublic interface IXmlSerializerCalculator  \n{  \n    [OperationContract]  \n    ComplexNumber Add(ComplexNumber n1, ComplexNumber n2);  \n    [OperationContract]  \n    ComplexNumber Subtract(ComplexNumber n1, ComplexNumber n2);  \n    [OperationContract]  \n    ComplexNumber Multiply(ComplexNumber n1, ComplexNumber n2);  \n    [OperationContract]  \n    ComplexNumber Divide(ComplexNumber n1, ComplexNumber n2);  \n}  \n  \n```  \n  \n The public members of `ComplexNumber` class are serialized by <xref:System.Xml.Serialization.XmlSerializer> as XML attributes. The <xref:System.Runtime.Serialization.DataContractSerializer> cannot be used to create this kind of XML instance.  \n  \n```  \npublic class ComplexNumber  \n{  \n    private double real;  \n    private double imaginary;  \n  \n    [XmlAttribute]  \n    public double Real  \n    {  \n        get { return real; }  \n        set { real = value; }  \n    }  \n  \n    [XmlAttribute]  \n    public double Imaginary  \n    {  \n        get { return imaginary; }  \n        set { imaginary = value; }  \n    }  \n  \n    public ComplexNumber(double real, double imaginary)  \n    {  \n        this.Real = real;  \n        this.Imaginary = imaginary;  \n    }  \n    public ComplexNumber()  \n    {  \n        this.Real = 0;  \n        this.Imaginary = 0;  \n    }  \n  \n}  \n```  \n  \n The service implementation calculates and returns the appropriate result—accepting and returning values of the `ComplexNumber` type.  \n  \n```  \npublic class XmlSerializerCalculatorService : IXmlSerializerCalculator  \n{  \n    public ComplexNumber Add(ComplexNumber n1, ComplexNumber n2)  \n    {  \n        return new ComplexNumber(n1.Real + n2.Real, n1.Imaginary +  \n                                                      n2.Imaginary);  \n    }  \n    …  \n}  \n  \n```  \n  \n The client implementation also uses complex numbers. Both the service contract and the data types are defined in the generatedClient.cs source file, which was generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) from service metadata. Svcutil.exe can detect when a contract is not serializable by the <xref:System.Runtime.Serialization.DataContractSerializer> and reverts to emitting `XmlSerializable` types in this case. If you want to force the use of the <xref:System.Xml.Serialization.XmlSerializer>, you can pass the /serializer:XmlSerializer (use XmlSerializer) command option to the Svcutil.exe tool.  \n  \n```  \n// Create a client.  \nXmlSerializerCalculatorClient client = new  \n                         XmlSerializerCalculatorClient();  \n  \n// Call the Add service operation.  \nComplexNumber value1 = new ComplexNumber();  \nvalue1.Real = 1;  \nvalue1.Imaginary = 2;  \nComplexNumber value2 = new ComplexNumber();  \nvalue2.Real = 3;  \nvalue2.Imaginary = 4;  \nComplexNumber result = client.Add(value1, value2);  \nConsole.WriteLine(\"Add({0} + {1}i, {2} + {3}i) = {4} + {5}i\",  \n    value1.Real, value1.Imaginary, value2.Real, value2.Imaginary,   \n    result.Real, result.Imaginary);  \n    …  \n}  \n  \n```  \n  \n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```  \nAdd(1 + 2i, 3 + 4i) = 4 + 6i  \nSubtract(1 + 2i, 3 + 4i) = -2 + -2i  \nMultiply(2 + 3i, 4 + 7i) = -13 + 26i  \nDivide(3 + 7i, 5 + -2i) = 0.0344827586206897 + 1.41379310344828i  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Client\\Interop\\XmlSerializer`  \n  \n## See Also","nodes":[{"pos":[12,49],"content":"XMLSerializer Sample | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"XMLSerializer Sample | Microsoft Docs","pos":[0,37]}]},{"pos":[348,368],"content":"XMLSerializer Sample","linkify":"XMLSerializer Sample","nodes":[{"content":"XMLSerializer Sample","pos":[0,20]}]},{"content":"This sample demonstrates how to serialize and deserialize types that are compatible with the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph>.","pos":[369,508],"source":"This sample demonstrates how to serialize and deserialize types that are compatible with the <xref:System.Xml.Serialization.XmlSerializer>."},{"content":"The default <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> formatter is the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> class.","pos":[509,659],"source":" The default [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] formatter is the <xref:System.Runtime.Serialization.DataContractSerializer> class."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> class can be used to serialize and deserialize types when the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> class cannot be used.","pos":[660,852],"source":" The <xref:System.Xml.Serialization.XmlSerializer> class can be used to serialize and deserialize types when the <xref:System.Runtime.Serialization.DataContractSerializer> class cannot be used."},{"content":"This is often the case when precise control over the XML is required - for example, if a piece of data must be an XML attribute and not an XML element.","pos":[853,1004]},{"content":"Also, the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> often gets automatically selected when creating clients for non-<ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services.","pos":[1005,1190],"source":" Also, the <xref:System.Xml.Serialization.XmlSerializer> often gets automatically selected when creating clients for non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services."},{"content":"In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).","pos":[1197,1321]},{"pos":[1329,1436],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.XmlSerializerFormatAttribute&gt;</ph> must be applied to the interface as shown in the following sample code.","pos":[1443,1630],"source":"The <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.XmlSerializerFormatAttribute> must be applied to the interface as shown in the following sample code."},{"content":"The public members of <ph id=\"ph1\">`ComplexNumber`</ph> class are serialized by <ph id=\"ph2\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> as XML attributes.","pos":[2160,2286],"source":"The public members of `ComplexNumber` class are serialized by <xref:System.Xml.Serialization.XmlSerializer> as XML attributes."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> cannot be used to create this kind of XML instance.","pos":[2287,2401],"source":" The <xref:System.Runtime.Serialization.DataContractSerializer> cannot be used to create this kind of XML instance."},{"pos":[3036,3168],"content":"The service implementation calculates and returns the appropriate result—accepting and returning values of the <ph id=\"ph1\">`ComplexNumber`</ph> type.","source":"The service implementation calculates and returns the appropriate result—accepting and returning values of the `ComplexNumber` type."},{"content":"The client implementation also uses complex numbers.","pos":[3505,3557]},{"content":"Both the service contract and the data types are defined in the generatedClient.cs source file, which was generated by the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> from service metadata.","pos":[3558,3836],"source":" Both the service contract and the data types are defined in the generatedClient.cs source file, which was generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) from service metadata."},{"content":"Svcutil.exe can detect when a contract is not serializable by the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> and reverts to emitting <ph id=\"ph2\">`XmlSerializable`</ph> types in this case.","pos":[3837,4023],"source":" Svcutil.exe can detect when a contract is not serializable by the <xref:System.Runtime.Serialization.DataContractSerializer> and reverts to emitting `XmlSerializable` types in this case."},{"content":"If you want to force the use of the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph>, you can pass the /serializer:XmlSerializer (use XmlSerializer) command option to the Svcutil.exe tool.","pos":[4024,4209],"source":" If you want to force the use of the <xref:System.Xml.Serialization.XmlSerializer>, you can pass the /serializer:XmlSerializer (use XmlSerializer) command option to the Svcutil.exe tool."},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[4815,4920]},{"content":"Press ENTER in the client window to shut down the client.","pos":[4921,4978]},{"pos":[5218,5254],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[5264,5463],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[5473,5682],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[5692,5900],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[5908,6040],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[6094,6420],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[6421,6471]},{"pos":[6562,6570],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}