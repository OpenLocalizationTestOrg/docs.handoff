{"content":"---\ntitle: \"XPath Queries and Namespaces | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nms.assetid: ef6402be-2f8e-4be2-8d3e-a80891cdef8b\ncaps.latest.revision: 2\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# XPath Queries and Namespaces\nXPath queries are aware of namespaces in an XML document and can use namespace prefixes to qualify element and attribute names. Qualifying element and attribute names with a namespace prefix limits the nodes returned by an XPath query to only those nodes that belong to a specific namespace.  \n  \n For example if the prefix `books` maps to the namespace `http://www.contoso.com/books`, then the following XPath query `/books:books/books:book` selects only those `book` elements in the namespace `http://www.contoso.com/books`.  \n  \n## The XmlNamespaceManager  \n To use namespaces in an XPath query, an object derived from the <xref:System.Xml.IXmlNamespaceResolver> interface like the <xref:System.Xml.XmlNamespaceManager> class is constructed with the namespace URI and prefix to include in the XPath query.  \n  \n The <xref:System.Xml.XmlNamespaceManager> object may be used in the query in each of the following ways.  \n  \n-   The <xref:System.Xml.XmlNamespaceManager> object is associated with an existing <xref:System.Xml.XPath.XPathExpression> object by using the <xref:System.Xml.XPath.XPathExpression.SetContext%2A> method of the <xref:System.Xml.XPath.XPathExpression> object. You may also compile a new <xref:System.Xml.XPath.XPathExpression> object using the static <xref:System.Xml.XPath.XPathExpression.Compile%2A> method which takes a string representing the XPath expression and an <xref:System.Xml.XmlNamespaceManager> object as parameters and returns a new <xref:System.Xml.XPath.XPathExpression> object.  \n  \n-   The <xref:System.Xml.XmlNamespaceManager> object itself is passed as a parameter to an accepting <xref:System.Xml.XPath.XPathNavigator> class method along with a string representing the XPath expression.  \n  \n The following are the methods of the <xref:System.Xml.XPath.XPathNavigator> class that accept an object derived from the <xref:System.Xml.IXmlNamespaceResolver> interface as a parameter.  \n  \n-   <xref:System.Xml.XPath.XPathNavigator.Evaluate%2A>  \n  \n-   <xref:System.Xml.XPath.XPathNavigator.Select%2A>  \n  \n-   <xref:System.Xml.XPath.XPathNavigator.SelectSingleNode%2A>  \n  \n### The Default Namespace  \n In the XML document that follows, the default namespace with an empty prefix is used to declare the `http://www.contoso.com/books` namespace.  \n  \n```  \n<books xmlns=\"http://www.example.com/books\">  \n    <book>  \n        <title>Title</title>  \n        <author>Author Name</author>  \n        <price>5.50</price>  \n    </book>  \n</books>  \n```  \n  \n XPath treats the empty prefix as the `null` namespace. In other words, only prefixes mapped to namespaces can be used in XPath queries. This means that if you want to query against a namespace in an XML document, even if it is the default namespace, you need to define a prefix for it.  \n  \n For example, without defining a prefix for the XML document above, the XPath query `/books/book` would not return any results.  \n  \n A prefix must be bound to prevent ambiguity when querying documents with some nodes not in a namespace, and some in a default namespace.  \n  \n The following code defines a prefix for the default namespace and selects all the `book` elements from the `http://www.contoso.com/books` namespace.  \n  \n```vb  \nDim document As XPathDocument = New XPathDocument(\"books.xml\")  \nDim navigator As XPathNavigator = document.CreateNavigator()  \nDim query As XPathExpression = navigator.Compile(\"/books:books/books:book\")  \nDim manager As XmlNamespaceManager = New XmlNamespaceManager(navigator.NameTable)  \nmanager.AddNamespace(\"books\", \"http://www.contoso.com/books\")  \nquery.SetContext(manager)  \nDim nodes As XPathNodeIterator = navigator.Select(query)  \n```  \n  \n```csharp  \nXPathDocument document = new XPathDocument(\"books.xml\");  \nXPathNavigator navigator = document.CreateNavigator();  \nXPathExpression query = navigator.Compile(\"/books:books/books:book\");  \nXmlNamespaceManager manager = new XmlNamespaceManager(navigator.NameTable);  \nmanager.AddNamespace(\"books\", \"http://www.contoso.com/books\");  \nquery.SetContext(manager);  \nXPathNodeIterator nodes = navigator.Select(query);  \n```  \n  \n## See Also  \n <xref:System.Xml.XmlDocument>   \n <xref:System.Xml.XPath.XPathDocument>   \n <xref:System.Xml.XPath.XPathNavigator>   \n [Process XML Data Using the XPath Data Model](../../../../docs/standard/data/xml/process-xml-data-using-the-xpath-data-model.md)   \n [Select XML Data Using XPathNavigator](../../../../docs/standard/data/xml/select-xml-data-using-xpathnavigator.md)   \n [Evaluate XPath Expressions using XPathNavigator](../../../../docs/standard/data/xml/evaluate-xpath-expressions-using-xpathnavigator.md)   \n [Matching Nodes using XPathNavigator](../../../../docs/standard/data/xml/matching-nodes-using-xpathnavigator.md)   \n [Node Types Recognized with XPath Queries](../../../../docs/standard/data/xml/node-types-recognized-with-xpath-queries.md)   \n [Compiled XPath Expressions](../../../../docs/standard/data/xml/compiled-xpath-expressions.md)","nodes":[{"pos":[4,395],"nodes":[{"content":"XPath Queries and Namespaces | Microsoft Docs","nodes":[{"pos":[0,45],"content":"XPath Queries and Namespaces | Microsoft Docs","nodes":[{"content":"XPath Queries and Namespaces | Microsoft Docs","pos":[0,45]}]}],"pos":[6,54],"yaml":true}],"content":"title: \"XPath Queries and Namespaces | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nms.assetid: ef6402be-2f8e-4be2-8d3e-a80891cdef8b\ncaps.latest.revision: 2\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"","yamlblock":true},{"pos":[402,430],"content":"XPath Queries and Namespaces","linkify":"XPath Queries and Namespaces","nodes":[{"content":"XPath Queries and Namespaces","pos":[0,28]}]},{"content":"XPath queries are aware of namespaces in an XML document and can use namespace prefixes to qualify element and attribute names.","pos":[431,558]},{"content":"Qualifying element and attribute names with a namespace prefix limits the nodes returned by an XPath query to only those nodes that belong to a specific namespace.","pos":[559,722]},{"pos":[729,957],"content":"For example if the prefix <ph id=\"ph1\">`books`</ph> maps to the namespace <ph id=\"ph2\">`http://www.contoso.com/books`</ph>, then the following XPath query <ph id=\"ph3\">`/books:books/books:book`</ph> selects only those <ph id=\"ph4\">`book`</ph> elements in the namespace <ph id=\"ph5\">`http://www.contoso.com/books`</ph>.","source":"For example if the prefix `books` maps to the namespace `http://www.contoso.com/books`, then the following XPath query `/books:books/books:book` selects only those `book` elements in the namespace `http://www.contoso.com/books`."},{"pos":[966,989],"content":"The XmlNamespaceManager","linkify":"The XmlNamespaceManager","nodes":[{"content":"The XmlNamespaceManager","pos":[0,23]}]},{"content":"To use namespaces in an XPath query, an object derived from the <ph id=\"ph1\">&lt;xref:System.Xml.IXmlNamespaceResolver&gt;</ph> interface like the <ph id=\"ph2\">&lt;xref:System.Xml.XmlNamespaceManager&gt;</ph> class is constructed with the namespace URI and prefix to include in the XPath query.","pos":[993,1239],"source":"To use namespaces in an XPath query, an object derived from the <xref:System.Xml.IXmlNamespaceResolver> interface like the <xref:System.Xml.XmlNamespaceManager> class is constructed with the namespace URI and prefix to include in the XPath query."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XmlNamespaceManager&gt;</ph> object may be used in the query in each of the following ways.","pos":[1246,1350],"source":"The <xref:System.Xml.XmlNamespaceManager> object may be used in the query in each of the following ways."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XmlNamespaceManager&gt;</ph> object is associated with an existing <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathExpression&gt;</ph> object by using the <ph id=\"ph3\">&lt;xref:System.Xml.XPath.XPathExpression.SetContext%2A&gt;</ph> method of the <ph id=\"ph4\">&lt;xref:System.Xml.XPath.XPathExpression&gt;</ph> object.","pos":[1360,1615],"source":"The <xref:System.Xml.XmlNamespaceManager> object is associated with an existing <xref:System.Xml.XPath.XPathExpression> object by using the <xref:System.Xml.XPath.XPathExpression.SetContext%2A> method of the <xref:System.Xml.XPath.XPathExpression> object."},{"content":"You may also compile a new <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathExpression&gt;</ph> object using the static <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathExpression.Compile%2A&gt;</ph> method which takes a string representing the XPath expression and an <ph id=\"ph3\">&lt;xref:System.Xml.XmlNamespaceManager&gt;</ph> object as parameters and returns a new <ph id=\"ph4\">&lt;xref:System.Xml.XPath.XPathExpression&gt;</ph> object.","pos":[1616,1951],"source":" You may also compile a new <xref:System.Xml.XPath.XPathExpression> object using the static <xref:System.Xml.XPath.XPathExpression.Compile%2A> method which takes a string representing the XPath expression and an <xref:System.Xml.XmlNamespaceManager> object as parameters and returns a new <xref:System.Xml.XPath.XPathExpression> object."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XmlNamespaceManager&gt;</ph> object itself is passed as a parameter to an accepting <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class method along with a string representing the XPath expression.","pos":[1961,2164],"source":"The <xref:System.Xml.XmlNamespaceManager> object itself is passed as a parameter to an accepting <xref:System.Xml.XPath.XPathNavigator> class method along with a string representing the XPath expression."},{"content":"The following are the methods of the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class that accept an object derived from the <ph id=\"ph2\">&lt;xref:System.Xml.IXmlNamespaceResolver&gt;</ph> interface as a parameter.","pos":[2171,2357],"source":"The following are the methods of the <xref:System.Xml.XPath.XPathNavigator> class that accept an object derived from the <xref:System.Xml.IXmlNamespaceResolver> interface as a parameter."},{"pos":[2553,2574],"content":"The Default Namespace","linkify":"The Default Namespace","nodes":[{"content":"The Default Namespace","pos":[0,21]}]},{"pos":[2578,2719],"content":"In the XML document that follows, the default namespace with an empty prefix is used to declare the <ph id=\"ph1\">`http://www.contoso.com/books`</ph> namespace.","source":"In the XML document that follows, the default namespace with an empty prefix is used to declare the `http://www.contoso.com/books` namespace."},{"content":"XPath treats the empty prefix as the <ph id=\"ph1\">`null`</ph> namespace.","pos":[2926,2980],"source":"XPath treats the empty prefix as the `null` namespace."},{"content":"In other words, only prefixes mapped to namespaces can be used in XPath queries.","pos":[2981,3061]},{"content":"This means that if you want to query against a namespace in an XML document, even if it is the default namespace, you need to define a prefix for it.","pos":[3062,3211]},{"pos":[3218,3344],"content":"For example, without defining a prefix for the XML document above, the XPath query <ph id=\"ph1\">`/books/book`</ph> would not return any results.","source":"For example, without defining a prefix for the XML document above, the XPath query `/books/book` would not return any results."},{"content":"A prefix must be bound to prevent ambiguity when querying documents with some nodes not in a namespace, and some in a default namespace.","pos":[3351,3487]},{"pos":[3494,3642],"content":"The following code defines a prefix for the default namespace and selects all the <ph id=\"ph1\">`book`</ph> elements from the <ph id=\"ph2\">`http://www.contoso.com/books`</ph> namespace.","source":"The following code defines a prefix for the default namespace and selects all the `book` elements from the `http://www.contoso.com/books` namespace."},{"pos":[4543,4551],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph>","pos":[4555,4584],"source":"<xref:System.Xml.XmlDocument> "},{"content":"<ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathDocument&gt;</ph>","pos":[4589,4626],"source":"<xref:System.Xml.XPath.XPathDocument> "},{"content":"<ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph>","pos":[4631,4669],"source":"<xref:System.Xml.XPath.XPathNavigator> "},{"content":"<bpt id=\"p1\">[</bpt>Process XML Data Using the XPath Data Model<ept id=\"p1\">](../../../../docs/standard/data/xml/process-xml-data-using-the-xpath-data-model.md)</ept><ph id=\"ph1\"> </ph>","pos":[4674,4803],"source":"[Process XML Data Using the XPath Data Model](../../../../docs/standard/data/xml/process-xml-data-using-the-xpath-data-model.md) "},{"content":"<bpt id=\"p1\">[</bpt>Select XML Data Using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/select-xml-data-using-xpathnavigator.md)</ept><ph id=\"ph1\"> </ph>","pos":[4807,4922],"source":"[Select XML Data Using XPathNavigator](../../../../docs/standard/data/xml/select-xml-data-using-xpathnavigator.md) "},{"content":"<bpt id=\"p1\">[</bpt>Evaluate XPath Expressions using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/evaluate-xpath-expressions-using-xpathnavigator.md)</ept><ph id=\"ph1\"> </ph>","pos":[4926,5063],"source":"[Evaluate XPath Expressions using XPathNavigator](../../../../docs/standard/data/xml/evaluate-xpath-expressions-using-xpathnavigator.md) "},{"content":"<bpt id=\"p1\">[</bpt>Matching Nodes using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/matching-nodes-using-xpathnavigator.md)</ept><ph id=\"ph1\"> </ph>","pos":[5067,5180],"source":"[Matching Nodes using XPathNavigator](../../../../docs/standard/data/xml/matching-nodes-using-xpathnavigator.md) "},{"content":"<bpt id=\"p1\">[</bpt>Node Types Recognized with XPath Queries<ept id=\"p1\">](../../../../docs/standard/data/xml/node-types-recognized-with-xpath-queries.md)</ept><ph id=\"ph1\"> </ph>","pos":[5184,5307],"source":"[Node Types Recognized with XPath Queries](../../../../docs/standard/data/xml/node-types-recognized-with-xpath-queries.md) "},{"content":"<bpt id=\"p1\">[</bpt>Compiled XPath Expressions<ept id=\"p1\">](../../../../docs/standard/data/xml/compiled-xpath-expressions.md)</ept>","pos":[5311,5405],"source":"[Compiled XPath Expressions](../../../../docs/standard/data/xml/compiled-xpath-expressions.md)"}]}