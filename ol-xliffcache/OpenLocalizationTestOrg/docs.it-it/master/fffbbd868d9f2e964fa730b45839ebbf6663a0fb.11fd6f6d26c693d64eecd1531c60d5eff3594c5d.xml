{"content":"---\ntitle: \"Working with Binary Data (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF Data Services, binary data\"\n  - \"WCF Data Services, streams\"\nms.assetid: aeccc45c-d5c5-4671-ad63-a492ac8043ac\ncaps.latest.revision: 7\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Working with Binary Data (WCF Data Services)\nThe [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to retrieve and update binary data from an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in one of the following ways:  \n  \n-   As a primitive type property of an entity. This is the recommended method for working with small binary data objects that can be easily loaded into memory. In this case, the binary property is an entity property exposed by the data model, and the data service serializes the binary data as base-64 binary encoded XML in the response message.  \n  \n-   As a separate binary resource stream. This is the recommended method for accessing and changing binary large object (BLOB) data that may represent a photo, video, or any other type of binary encoded data.  \n  \n [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] implements the streaming of binary data by using HTTP as defined in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]. In this mechanism, binary data is treated as a media resource that is separate from but related to an entity, which is called a media link entry. For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).  \n  \n> [!TIP]\n>  For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637). To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.  \n  \n## Entity Metadata  \n An entity that has a related media resource stream is indicated in the data service metadata by the `HasStream` attribute applied to an entity type that is the media link entry. In the following example, the `PhotoInfo` entity is a media link entry that has a related media resource, indicated by the `HasStream` attribute.  \n  \n [!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria photo streaming service/xml/photodata.edmx#hasstream)]  \n  \n The remaining examples in this topic show how to access and change the media resource stream. For a complete example of how to consume a media resource stream in a .NET Framework client application by using the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library, see the post [Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkID=201637).  \n  \n## Accessing the Binary Resource Stream  \n The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library provides methods for accessing binary resource streams from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based data service. When downloading a media resource, you can either use the URI of the media resource or you can get a binary stream that contains the media resource data itself. You can also upload media resource data as a binary stream.  \n  \n> [!TIP]\n>  For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637). To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.  \n  \n### Getting the URI of the Binary Stream  \n When retrieving certain types of media resources, such as images and other media files, it is often easier to use the URI of the media resource in your application than handling the binary data stream itself. To get the URI of a resource stream associated with a give media link entry, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity. The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method to get the URI of a media resource stream that is used to create a new image on the client:  \n  \n [!code-csharp[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photowindow.xaml.cs#getreadstreamuri)]\n [!code-vb[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photowindow.xaml.vb#getreadstreamuri)]  \n  \n### Downloading the Binary Resource Stream  \n When retrieving a binary resource stream, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the media link entry. This method sends a request to the data service that returns a <xref:System.Data.Services.Client.DataServiceStreamResponse> object, which has a reference to the stream that contains the resource. Use this method when your application requires the binary resource as a <xref:System.IO.Stream>. The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method to retrieve a stream that is used to create a new image on the client:  \n  \n [!code-csharp[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria streaming client/cs/customerphotowindow.xaml.cs#getreadstreamclient)]\n [!code-vb[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria streaming client/vb/customerphotowindow.xaml.vb#getreadstreamclient)]  \n  \n> [!NOTE]\n>  The Content-Length header in the response message that contains the binary steam is not set by the data service. This value may not reflect the actual length of the binary data stream.  \n  \n### Uploading a Media Resource as a Stream  \n To insert or update a media resource, call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity. This method sends a request to the data service that contains the media resource read from the supplied stream. The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to send an image to the data service:  \n  \n [!code-csharp[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photodetailswindow.xaml.cs#setsavestream)]\n [!code-vb[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photodetailswindow.xaml.vb#setsavestream)]  \n  \n In this example, the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method is called by supplying a value of `true` for the `closeStream` parameter. This guarantees that the <xref:System.Data.Services.Client.DataServiceContext> closes the stream after the binary data is uploaded to the data service.  \n  \n> [!NOTE]\n>  When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called.  \n  \n## See Also  \n [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)   \n [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)","nodes":[{"pos":[4,460],"nodes":[{"content":"Working with Binary Data (WCF Data Services) | Microsoft Docs","nodes":[{"pos":[0,61],"content":"Working with Binary Data (WCF Data Services) | Microsoft Docs","nodes":[{"content":"Working with Binary Data (WCF Data Services) | Microsoft Docs","pos":[0,61]}]}],"pos":[6,70],"yaml":true}],"content":"title: \"Working with Binary Data (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF Data Services, binary data\"\n  - \"WCF Data Services, streams\"\nms.assetid: aeccc45c-d5c5-4671-ad63-a492ac8043ac\ncaps.latest.revision: 7\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[467,511],"content":"Working with Binary Data (WCF Data Services)","linkify":"Working with Binary Data (WCF Data Services)","nodes":[{"content":"Working with Binary Data (WCF Data Services)","pos":[0,44]}]},{"pos":[512,744],"content":"The <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> client library enables you to retrieve and update binary data from an <ph id=\"ph2\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> feed in one of the following ways:","source":"The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to retrieve and update binary data from an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in one of the following ways:"},{"content":"As a primitive type property of an entity.","pos":[754,796]},{"content":"This is the recommended method for working with small binary data objects that can be easily loaded into memory.","pos":[797,909]},{"content":"In this case, the binary property is an entity property exposed by the data model, and the data service serializes the binary data as base-64 binary encoded XML in the response message.","pos":[910,1095]},{"content":"As a separate binary resource stream.","pos":[1105,1142]},{"content":"This is the recommended method for accessing and changing binary large object (BLOB) data that may represent a photo, video, or any other type of binary encoded data.","pos":[1143,1309]},{"content":"<ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> implements the streaming of binary data by using HTTP as defined in the <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph>.","pos":[1316,1514],"source":"[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] implements the streaming of binary data by using HTTP as defined in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]."},{"content":"In this mechanism, binary data is treated as a media resource that is separate from but related to an entity, which is called a media link entry.","pos":[1515,1660]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Streaming Provider<ept id=\"p1\">](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md)</ept>.","pos":[1661,1785],"source":" For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md)."},{"pos":[1793,2424],"content":"[!TIP]\n For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637). To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.","leadings":["","> "],"nodes":[{"content":"For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637). To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.","pos":[8,629],"nodes":[{"content":"For a step-by-step example of how to create a <ph id=\"ph1\">[!INCLUDE[avalon1](../../../../includes/avalon1-md.md)]</ph> client application that downloads binary image files from an <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> service that stores photos, see the post <bpt id=\"p1\">[</bpt>Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=201637)</ept>.","pos":[0,417],"source":"For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637)."},{"content":"To download the sample code for the stream photo data service featured in the blog post, see the <bpt id=\"p1\">[</bpt>Streaming Photo Data Service Sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=198988)</ept> in MSDN Code Gallery.","pos":[418,621],"source":" To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery."}]}]},{"pos":[2433,2448],"content":"Entity Metadata","linkify":"Entity Metadata","nodes":[{"content":"Entity Metadata","pos":[0,15]}]},{"content":"An entity that has a related media resource stream is indicated in the data service metadata by the <ph id=\"ph1\">`HasStream`</ph> attribute applied to an entity type that is the media link entry.","pos":[2452,2629],"source":"An entity that has a related media resource stream is indicated in the data service metadata by the `HasStream` attribute applied to an entity type that is the media link entry."},{"content":"In the following example, the <ph id=\"ph1\">`PhotoInfo`</ph> entity is a media link entry that has a related media resource, indicated by the <ph id=\"ph2\">`HasStream`</ph> attribute.","pos":[2630,2775],"source":" In the following example, the `PhotoInfo` entity is a media link entry that has a related media resource, indicated by the `HasStream` attribute."},{"pos":[2782,2948],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>Astoria Photo Streaming Service#HasStream<ept id=\"p2\">](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria photo streaming service/xml/photodata.edmx#hasstream)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria photo streaming service/xml/photodata.edmx#hasstream)]"},{"content":"The remaining examples in this topic show how to access and change the media resource stream.","pos":[2955,3048]},{"content":"For a complete example of how to consume a media resource stream in a .NET Framework client application by using the <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> client library, see the post <bpt id=\"p1\">[</bpt>Accessing a Media Resource Stream from the Client<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkID=201637)</ept>.","pos":[3049,3354],"source":" For a complete example of how to consume a media resource stream in a .NET Framework client application by using the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library, see the post [Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkID=201637)."},{"pos":[3363,3399],"content":"Accessing the Binary Resource Stream","linkify":"Accessing the Binary Resource Stream","nodes":[{"content":"Accessing the Binary Resource Stream","pos":[0,36]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> client library provides methods for accessing binary resource streams from an <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph>-based data service.","pos":[3403,3630],"source":"The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library provides methods for accessing binary resource streams from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based data service."},{"content":"When downloading a media resource, you can either use the URI of the media resource or you can get a binary stream that contains the media resource data itself.","pos":[3631,3791]},{"content":"You can also upload media resource data as a binary stream.","pos":[3792,3851]},{"pos":[3859,4490],"content":"[!TIP]\n For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637). To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.","leadings":["","> "],"nodes":[{"content":"For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637). To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.","pos":[8,629],"nodes":[{"content":"For a step-by-step example of how to create a <ph id=\"ph1\">[!INCLUDE[avalon1](../../../../includes/avalon1-md.md)]</ph> client application that downloads binary image files from an <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> service that stores photos, see the post <bpt id=\"p1\">[</bpt>Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=201637)</ept>.","pos":[0,417],"source":"For a step-by-step example of how to create a [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)] client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637)."},{"content":"To download the sample code for the stream photo data service featured in the blog post, see the <bpt id=\"p1\">[</bpt>Streaming Photo Data Service Sample<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=198988)</ept> in MSDN Code Gallery.","pos":[418,621],"source":" To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery."}]}]},{"pos":[4500,4536],"content":"Getting the URI of the Binary Stream","linkify":"Getting the URI of the Binary Stream","nodes":[{"content":"Getting the URI of the Binary Stream","pos":[0,36]}]},{"content":"When retrieving certain types of media resources, such as images and other media files, it is often easier to use the URI of the media resource in your application than handling the binary data stream itself.","pos":[4540,4748]},{"content":"To get the URI of a resource stream associated with a give media link entry, you must call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A&gt;</ph> method on the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> instance that is tracking the entity.","pos":[4749,5023],"source":" To get the URI of a resource stream associated with a give media link entry, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity."},{"content":"The following example shows how to call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A&gt;</ph> method to get the URI of a media resource stream that is used to create a new image on the client:","pos":[5024,5240],"source":" The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method to get the URI of a media resource stream that is used to create a new image on the client:"},{"pos":[5247,5626],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Photo Streaming Client#GetReadStreamUri<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photowindow.xaml.cs#getreadstreamuri)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Photo Streaming Client#GetReadStreamUri<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photowindow.xaml.vb#getreadstreamuri)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photowindow.xaml.cs#getreadstreamuri)]\n [!code-vb[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photowindow.xaml.vb#getreadstreamuri)]"},{"pos":[5636,5674],"content":"Downloading the Binary Resource Stream","linkify":"Downloading the Binary Resource Stream","nodes":[{"content":"Downloading the Binary Resource Stream","pos":[0,38]}]},{"content":"When retrieving a binary resource stream, you must call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A&gt;</ph> method on the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> instance that is tracking the media link entry.","pos":[5678,5924],"source":"When retrieving a binary resource stream, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the media link entry."},{"content":"This method sends a request to the data service that returns a <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceStreamResponse&gt;</ph> object, which has a reference to the stream that contains the resource.","pos":[5925,6120],"source":" This method sends a request to the data service that returns a <xref:System.Data.Services.Client.DataServiceStreamResponse> object, which has a reference to the stream that contains the resource."},{"content":"Use this method when your application requires the binary resource as a <ph id=\"ph1\">&lt;xref:System.IO.Stream&gt;</ph>.","pos":[6121,6217],"source":" Use this method when your application requires the binary resource as a <xref:System.IO.Stream>."},{"content":"The following example shows how to call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A&gt;</ph> method to retrieve a stream that is used to create a new image on the client:","pos":[6218,6410],"source":" The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method to retrieve a stream that is used to create a new image on the client:"},{"pos":[6417,6800],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Streaming Client#GetReadStreamClient<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria streaming client/cs/customerphotowindow.xaml.cs#getreadstreamclient)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Streaming Client#GetReadStreamClient<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria streaming client/vb/customerphotowindow.xaml.vb#getreadstreamclient)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria streaming client/cs/customerphotowindow.xaml.cs#getreadstreamclient)]\n [!code-vb[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria streaming client/vb/customerphotowindow.xaml.vb#getreadstreamclient)]"},{"pos":[6808,7003],"content":"[!NOTE]\n The Content-Length header in the response message that contains the binary steam is not set by the data service. This value may not reflect the actual length of the binary data stream.","leadings":["","> "],"nodes":[{"content":"The Content-Length header in the response message that contains the binary steam is not set by the data service. This value may not reflect the actual length of the binary data stream.","pos":[9,193],"nodes":[{"content":"The Content-Length header in the response message that contains the binary steam is not set by the data service.","pos":[0,112]},{"content":"This value may not reflect the actual length of the binary data stream.","pos":[113,184]}]}]},{"pos":[7013,7051],"content":"Uploading a Media Resource as a Stream","linkify":"Uploading a Media Resource as a Stream","nodes":[{"content":"Uploading a Media Resource as a Stream","pos":[0,38]}]},{"content":"To insert or update a media resource, call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A&gt;</ph> method on the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> instance that is tracking the entity.","pos":[7055,7278],"source":"To insert or update a media resource, call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity."},{"content":"This method sends a request to the data service that contains the media resource read from the supplied stream.","pos":[7279,7390]},{"content":"The following example shows how to call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A&gt;</ph> method to send an image to the data service:","pos":[7391,7550],"source":" The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to send an image to the data service:"},{"pos":[7557,7938],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Photo Streaming Client#SetSaveStream<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photodetailswindow.xaml.cs#setsavestream)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Photo Streaming Client#SetSaveStream<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photodetailswindow.xaml.vb#setsavestream)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photodetailswindow.xaml.cs#setsavestream)]\n [!code-vb[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photodetailswindow.xaml.vb#setsavestream)]"},{"content":"In this example, the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A&gt;</ph> method is called by supplying a value of <ph id=\"ph2\">`true`</ph> for the <ph id=\"ph3\">`closeStream`</ph> parameter.","pos":[7945,8117],"source":"In this example, the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method is called by supplying a value of `true` for the `closeStream` parameter."},{"content":"This guarantees that the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> closes the stream after the binary data is uploaded to the data service.","pos":[8118,8269],"source":" This guarantees that the <xref:System.Data.Services.Client.DataServiceContext> closes the stream after the binary data is uploaded to the data service."},{"pos":[8277,8502],"content":"[!NOTE]\n When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called.","leadings":["","> "],"nodes":[{"content":"When you call <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A&gt;</ph>, the stream is not sent to the data service until <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A&gt;</ph> is called.","pos":[9,223],"source":"When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called."}]},{"pos":[8511,8519],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>WCF Data Services Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</ept><ph id=\"ph1\"> </ph>","pos":[8523,8631],"source":"[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md) "},{"content":"<bpt id=\"p1\">[</bpt>Binding Data to Controls<ept id=\"p1\">](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)</ept>","pos":[8635,8744],"source":"[Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)"}]}