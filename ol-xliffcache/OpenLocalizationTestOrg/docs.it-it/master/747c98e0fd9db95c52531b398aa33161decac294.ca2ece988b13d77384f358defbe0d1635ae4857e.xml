{"content":"---\ntitle: \"Mitigation: ZipArchiveEntry.FullName Path Separator | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-bcl\"\n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"application compatibility\"\n  - \",NET Framework application compatibility\"\n  - \".NET Framework 4.6.1\"\n  - \".NET Framework 4.6.1 retargeting changes\"\n  - \"retargeting changes\"\nms.assetid: 8d575722-4fb6-49a2-8a06-f72d62dc3766\ncaps.latest.revision: 9\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Mitigation: ZipArchiveEntry.FullName Path Separator\nStarting with apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], the path separator used in the <xref:System.IO.Compression.ZipArchiveEntry.FullName%2A?displayProperty=fullName> property has changed from the backslash (\"\\\\\") used in previous versions of the .NET Framework to a forward slash (\"/\").   <xref:System.IO.Compression.ZipArchiveEntry?displayProperty=fullName> objects are created by calling one of the overloads of the <xref:System.IO.Compression.ZipFile.CreateFromDirectory%2A?displayProperty=fullName> method.  \n  \n## Impact  \n The change brings the .NET implementation into conformity with section 4.4.17.1 of the [.ZIP File Format Specification](https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT) and allows .ZIP archives to be decompressed on non-Windows systems.  \n  \n Decompressing a zip file created  by an app that targets a previous version of the .NET Framework on non-Windows operating systems such as the Macintosh fails to preserve the directory structure. For example, on the Macintosh, it creates a set of files whose filename concatenates the directory path, along with any backslash (\"\\\\\") characters, and the filename. As a result, the directory structure of decompressed files is not preserved.  \n  \n The impact of this change on .ZIP files that are decompressed on the Windows operating system by APIs in the .NET Framework <xref:System.IO> namespace should be minimal, since these APIs can seamlessly handle either a slash (\"/\") or a backslash (\"\\\\\") as the path separator character.  \n  \n## Mitigation  \n If this behavior is undesirable, you can opt out of by adding a configuration setting to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of your application configuration file. The following shows both the `<runtime>` section and the opt-out switch.  \n  \n```  \n  \n<runtime>  \n   <AppContextSwitchOverrides value=\"Switch.System.IO.Compression.ZipFile.UseBackslash=true\" />  \n</runtime>  \n  \n```  \n  \n In addition, apps that target previous versions of the .NET Framework but are running on the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and later versions can opt in to this behavior by adding a configuration setting to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file. The following shows both the `<runtime>` section and the opt-in switch.  \n  \n```  \n  \n<runtime>  \n   <AppContextSwitchOverrides value=\"Switch.System.IO.Compression.ZipFile.UseBackslash=false\" />  \n</runtime>  \n  \n```  \n  \n## See Also  \n [Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-1.md)   \n [Application Compatibility in 4.6.1](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)","nodes":[{"pos":[4,594],"nodes":[{"content":"Mitigation: ZipArchiveEntry.FullName Path Separator | Microsoft Docs","nodes":[{"pos":[0,68],"content":"Mitigation: ZipArchiveEntry.FullName Path Separator | Microsoft Docs","nodes":[{"content":"Mitigation: ZipArchiveEntry.FullName Path Separator | Microsoft Docs","pos":[0,68]}]}],"pos":[6,77],"yaml":true}],"content":"title: \"Mitigation: ZipArchiveEntry.FullName Path Separator | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-bcl\"\n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"application compatibility\"\n  - \",NET Framework application compatibility\"\n  - \".NET Framework 4.6.1\"\n  - \".NET Framework 4.6.1 retargeting changes\"\n  - \"retargeting changes\"\nms.assetid: 8d575722-4fb6-49a2-8a06-f72d62dc3766\ncaps.latest.revision: 9\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","yamlblock":true},{"pos":[601,652],"content":"Mitigation: ZipArchiveEntry.FullName Path Separator","linkify":"Mitigation: ZipArchiveEntry.FullName Path Separator","nodes":[{"content":"Mitigation: ZipArchiveEntry.FullName Path Separator","pos":[0,51]}]},{"content":"Starting with apps that target the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph>, the path separator used in the <ph id=\"ph2\">&lt;xref:System.IO.Compression.ZipArchiveEntry.FullName%2A?displayProperty=fullName&gt;</ph> property has changed from the backslash (\"<ph id=\"ph3\">\\\\</ph>\") used in previous versions of the .NET Framework to a forward slash (\"/\").","pos":[653,977],"source":"Starting with apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)], the path separator used in the <xref:System.IO.Compression.ZipArchiveEntry.FullName%2A?displayProperty=fullName> property has changed from the backslash (\"\\\\\") used in previous versions of the .NET Framework to a forward slash (\"/\")."},{"content":"<ph id=\"ph1\">&lt;xref:System.IO.Compression.ZipArchiveEntry?displayProperty=fullName&gt;</ph> objects are created by calling one of the overloads of the <ph id=\"ph2\">&lt;xref:System.IO.Compression.ZipFile.CreateFromDirectory%2A?displayProperty=fullName&gt;</ph> method.","pos":[980,1201],"source":"   <xref:System.IO.Compression.ZipArchiveEntry?displayProperty=fullName> objects are created by calling one of the overloads of the <xref:System.IO.Compression.ZipFile.CreateFromDirectory%2A?displayProperty=fullName> method."},{"pos":[1210,1216],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"pos":[1220,1468],"content":"The change brings the .NET implementation into conformity with section 4.4.17.1 of the <bpt id=\"p1\">[</bpt>.ZIP File Format Specification<ept id=\"p1\">](https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT)</ept> and allows .ZIP archives to be decompressed on non-Windows systems.","source":"The change brings the .NET implementation into conformity with section 4.4.17.1 of the [.ZIP File Format Specification](https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT) and allows .ZIP archives to be decompressed on non-Windows systems."},{"content":"Decompressing a zip file created  by an app that targets a previous version of the .NET Framework on non-Windows operating systems such as the Macintosh fails to preserve the directory structure.","pos":[1475,1670]},{"content":"For example, on the Macintosh, it creates a set of files whose filename concatenates the directory path, along with any backslash (\"<ph id=\"ph1\">\\\\</ph>\") characters, and the filename.","pos":[1671,1837],"source":" For example, on the Macintosh, it creates a set of files whose filename concatenates the directory path, along with any backslash (\"\\\\\") characters, and the filename."},{"content":"As a result, the directory structure of decompressed files is not preserved.","pos":[1838,1914]},{"content":"The impact of this change on .ZIP files that are decompressed on the Windows operating system by APIs in the .NET Framework <ph id=\"ph1\">&lt;xref:System.IO&gt;</ph> namespace should be minimal, since these APIs can seamlessly handle either a slash (\"/\") or a backslash (\"<ph id=\"ph2\">\\\\</ph>\") as the path separator character.","pos":[1921,2205],"source":"The impact of this change on .ZIP files that are decompressed on the Windows operating system by APIs in the .NET Framework <xref:System.IO> namespace should be minimal, since these APIs can seamlessly handle either a slash (\"/\") or a backslash (\"\\\\\") as the path separator character."},{"pos":[2214,2224],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"content":"If this behavior is undesirable, you can opt out of by adding a configuration setting to the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of your application configuration file.","pos":[2228,2460],"source":"If this behavior is undesirable, you can opt out of by adding a configuration setting to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of your application configuration file."},{"content":"The following shows both the <ph id=\"ph1\">`&lt;runtime&gt;`</ph> section and the opt-out switch.","pos":[2461,2533],"source":" The following shows both the `<runtime>` section and the opt-out switch."},{"content":"In addition, apps that target previous versions of the .NET Framework but are running on the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> and later versions can opt in to this behavior by adding a configuration setting to the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of the application configuration file.","pos":[2684,3058],"source":"In addition, apps that target previous versions of the .NET Framework but are running on the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and later versions can opt in to this behavior by adding a configuration setting to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file."},{"content":"The following shows both the <ph id=\"ph1\">`&lt;runtime&gt;`</ph> section and the opt-in switch.","pos":[3059,3130],"source":" The following shows both the `<runtime>` section and the opt-in switch."},{"pos":[3284,3292],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Retargeting Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-1.md)</ept><ph id=\"ph1\"> </ph>","pos":[3296,3409],"source":"[Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-1.md) "},{"content":"<bpt id=\"p1\">[</bpt>Application Compatibility in 4.6.1<ept id=\"p1\">](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)</ept>","pos":[3413,3546],"source":"[Application Compatibility in 4.6.1](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-6-1.md)"}]}