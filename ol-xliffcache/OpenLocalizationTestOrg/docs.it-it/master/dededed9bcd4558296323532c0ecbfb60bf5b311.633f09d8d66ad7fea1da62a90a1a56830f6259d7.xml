{"content":"---\ntitle: \"Mutexes\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"wait handles\"\n  - \"threading [.NET Framework], Mutex class\"\n  - \"Mutex class, about Mutex class\"\n  - \"threading [.NET Framework], cross-process synchronization\"\nms.assetid: 9dd06e25-12c0-4a9e-855a-452dc83803e2\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Mutexes\nYou can use a <xref:System.Threading.Mutex> object to provide exclusive access to a resource. The <xref:System.Threading.Mutex> class uses more system resources than the <xref:System.Threading.Monitor> class, but it can be marshaled across application domain boundaries, it can be used with multiple waits, and it can be used to synchronize threads in different processes. For a comparison of managed synchronization mechanisms, see [Overview of Synchronization Primitives](../../../docs/standard/threading/overview-of-synchronization-primitives.md).  \n  \n For code examples, see the reference documentation for the <xref:System.Threading.Mutex.%23ctor%2A> constructors.  \n  \n## Using Mutexes  \n A thread calls the <xref:System.Threading.WaitHandle.WaitOne%2A> method of a mutex to request ownership. The call blocks until the mutex is available, or until the optional timeout interval elapses. The state of a mutex is signaled if no thread owns it.  \n  \n A thread releases a mutex by calling its <xref:System.Threading.Mutex.ReleaseMutex%2A> method. Mutexes have thread affinity; that is, the mutex can be released only by the thread that owns it. If a thread releases a mutex it does not own, an <xref:System.ApplicationException> is thrown in the thread.  \n  \n Because the <xref:System.Threading.Mutex> class derives from <xref:System.Threading.WaitHandle>, you can also call the static <xref:System.Threading.WaitHandle.WaitAll%2A> or <xref:System.Threading.WaitHandle.WaitAny%2A> methods of <xref:System.Threading.WaitHandle> to request ownership of a <xref:System.Threading.Mutex> in combination with other wait handles.  \n  \n If a thread owns a <xref:System.Threading.Mutex>, that thread can specify the same <xref:System.Threading.Mutex> in repeated wait-request calls without blocking its execution; however, it must release the <xref:System.Threading.Mutex> as many times to release ownership.  \n  \n## Abandoned Mutexes  \n If a thread terminates without releasing a <xref:System.Threading.Mutex>, the mutex is said to be abandoned. This often indicates a serious programming error because the resource the mutex is protecting might be left in an inconsistent state. In the .NET Framework version 2.0, an <xref:System.Threading.AbandonedMutexException> is thrown in the next thread that acquires the mutex.  \n  \n> [!NOTE]\n>  In the .NET Framework versions 1.0 and 1.1, an abandoned <xref:System.Threading.Mutex> is set to the signaled state and the next waiting thread gets ownership. If no thread is waiting, the <xref:System.Threading.Mutex> remains in a signaled state. No exception is thrown.  \n  \n In the case of a system-wide mutex, an abandoned mutex might indicate that an application has been terminated abruptly (for example, by using Windows Task Manager).  \n  \n## Local and System Mutexes  \n Mutexes are of two types: local mutexes and named system mutexes. If you create a <xref:System.Threading.Mutex> object using a constructor that accepts a name, it is associated with an operating-system object of that name. Named system mutexes are visible throughout the operating system and can be used to synchronize the activities of processes. You can create multiple <xref:System.Threading.Mutex> objects that represent the same named system mutex, and you can use the <xref:System.Threading.Mutex.OpenExisting%2A> method to open an existing named system mutex.  \n  \n A local mutex exists only within your process. It can be used by any thread in your process that has a reference to the local <xref:System.Threading.Mutex> object. Each <xref:System.Threading.Mutex> object is a separate local mutex.  \n  \n### Access Control Security for System Mutexes  \n The .NET Framework version 2.0 provides the ability to query and set Windows access control security for named system objects. Protecting system mutexes from the moment of creation is recommended because system objects are global and therefore can be locked by code other than your own.  \n  \n For information on access control security for mutexes, see the <xref:System.Security.AccessControl.MutexSecurity> and <xref:System.Security.AccessControl.MutexAccessRule> classes, the <xref:System.Security.AccessControl.MutexRights> enumeration, the <xref:System.Threading.Mutex.GetAccessControl%2A>, <xref:System.Threading.Mutex.SetAccessControl%2A>, and <xref:System.Threading.Mutex.OpenExisting%2A> methods of the <xref:System.Threading.Mutex> class, and the <xref:System.Threading.Mutex.%23ctor%28System.Boolean%2CSystem.String%2CSystem.Boolean%40%2CSystem.Security.AccessControl.MutexSecurity%29> constructor.  \n  \n## See also\n\n- <xref:System.Threading.Mutex?displayProperty=nameWithType>\n- <xref:System.Threading.Mutex.%23ctor%2A?displayProperty=nameWithType>\n- <xref:System.Security.AccessControl.MutexSecurity?displayProperty=nameWithType>\n- <xref:System.Security.AccessControl.MutexAccessRule?displayProperty=nameWithType>\n- <xref:System.Threading.Monitor?displayProperty=nameWithType>\n- [Threading objects and features](threading-objects-and-features.md)\n- [Threads and threading](threads-and-threading.md)\n- [Threading](index.md)\n","nodes":[{"pos":[4,350],"embed":true,"restype":"x-metadata","content":"title: \"Mutexes\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"wait handles\"\n  - \"threading [.NET Framework], Mutex class\"\n  - \"Mutex class, about Mutex class\"\n  - \"threading [.NET Framework], cross-process synchronization\"\nms.assetid: 9dd06e25-12c0-4a9e-855a-452dc83803e2\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Mutexes","nodes":[{"pos":[0,7],"content":"Mutexes","nodes":[{"content":"Mutexes","pos":[0,7]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[357,364],"content":"Mutexes","linkify":"Mutexes","nodes":[{"content":"Mutexes","pos":[0,7]}]},{"content":"You can use a <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> object to provide exclusive access to a resource.","pos":[365,458],"source":"You can use a <xref:System.Threading.Mutex> object to provide exclusive access to a resource."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> class uses more system resources than the <ph id=\"ph2\">&lt;xref:System.Threading.Monitor&gt;</ph> class, but it can be marshaled across application domain boundaries, it can be used with multiple waits, and it can be used to synchronize threads in different processes.","pos":[459,737],"source":" The <xref:System.Threading.Mutex> class uses more system resources than the <xref:System.Threading.Monitor> class, but it can be marshaled across application domain boundaries, it can be used with multiple waits, and it can be used to synchronize threads in different processes."},{"content":"For a comparison of managed synchronization mechanisms, see <bpt id=\"p1\">[</bpt>Overview of Synchronization Primitives<ept id=\"p1\">](../../../docs/standard/threading/overview-of-synchronization-primitives.md)</ept>.","pos":[738,915],"source":" For a comparison of managed synchronization mechanisms, see [Overview of Synchronization Primitives](../../../docs/standard/threading/overview-of-synchronization-primitives.md)."},{"pos":[922,1035],"content":"For code examples, see the reference documentation for the <ph id=\"ph1\">&lt;xref:System.Threading.Mutex.%23ctor%2A&gt;</ph> constructors.","source":"For code examples, see the reference documentation for the <xref:System.Threading.Mutex.%23ctor%2A> constructors."},{"pos":[1044,1057],"content":"Using Mutexes","linkify":"Using Mutexes","nodes":[{"content":"Using Mutexes","pos":[0,13]}]},{"content":"A thread calls the <ph id=\"ph1\">&lt;xref:System.Threading.WaitHandle.WaitOne%2A&gt;</ph> method of a mutex to request ownership.","pos":[1061,1165],"source":"A thread calls the <xref:System.Threading.WaitHandle.WaitOne%2A> method of a mutex to request ownership."},{"content":"The call blocks until the mutex is available, or until the optional timeout interval elapses.","pos":[1166,1259]},{"content":"The state of a mutex is signaled if no thread owns it.","pos":[1260,1314]},{"content":"A thread releases a mutex by calling its <ph id=\"ph1\">&lt;xref:System.Threading.Mutex.ReleaseMutex%2A&gt;</ph> method.","pos":[1321,1415],"source":"A thread releases a mutex by calling its <xref:System.Threading.Mutex.ReleaseMutex%2A> method."},{"content":"Mutexes have thread affinity; that is, the mutex can be released only by the thread that owns it.","pos":[1416,1513]},{"content":"If a thread releases a mutex it does not own, an <ph id=\"ph1\">&lt;xref:System.ApplicationException&gt;</ph> is thrown in the thread.","pos":[1514,1622],"source":" If a thread releases a mutex it does not own, an <xref:System.ApplicationException> is thrown in the thread."},{"pos":[1629,1991],"content":"Because the <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> class derives from <ph id=\"ph2\">&lt;xref:System.Threading.WaitHandle&gt;</ph>, you can also call the static <ph id=\"ph3\">&lt;xref:System.Threading.WaitHandle.WaitAll%2A&gt;</ph> or <ph id=\"ph4\">&lt;xref:System.Threading.WaitHandle.WaitAny%2A&gt;</ph> methods of <ph id=\"ph5\">&lt;xref:System.Threading.WaitHandle&gt;</ph> to request ownership of a <ph id=\"ph6\">&lt;xref:System.Threading.Mutex&gt;</ph> in combination with other wait handles.","source":"Because the <xref:System.Threading.Mutex> class derives from <xref:System.Threading.WaitHandle>, you can also call the static <xref:System.Threading.WaitHandle.WaitAll%2A> or <xref:System.Threading.WaitHandle.WaitAny%2A> methods of <xref:System.Threading.WaitHandle> to request ownership of a <xref:System.Threading.Mutex> in combination with other wait handles."},{"pos":[1998,2268],"content":"If a thread owns a <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph>, that thread can specify the same <ph id=\"ph2\">&lt;xref:System.Threading.Mutex&gt;</ph> in repeated wait-request calls without blocking its execution; however, it must release the <ph id=\"ph3\">&lt;xref:System.Threading.Mutex&gt;</ph> as many times to release ownership.","source":"If a thread owns a <xref:System.Threading.Mutex>, that thread can specify the same <xref:System.Threading.Mutex> in repeated wait-request calls without blocking its execution; however, it must release the <xref:System.Threading.Mutex> as many times to release ownership."},{"pos":[2277,2294],"content":"Abandoned Mutexes","linkify":"Abandoned Mutexes","nodes":[{"content":"Abandoned Mutexes","pos":[0,17]}]},{"content":"If a thread terminates without releasing a <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph>, the mutex is said to be abandoned.","pos":[2298,2406],"source":"If a thread terminates without releasing a <xref:System.Threading.Mutex>, the mutex is said to be abandoned."},{"content":"This often indicates a serious programming error because the resource the mutex is protecting might be left in an inconsistent state.","pos":[2407,2540]},{"content":"In the .NET Framework version 2.0, an <ph id=\"ph1\">&lt;xref:System.Threading.AbandonedMutexException&gt;</ph> is thrown in the next thread that acquires the mutex.","pos":[2541,2680],"source":" In the .NET Framework version 2.0, an <xref:System.Threading.AbandonedMutexException> is thrown in the next thread that acquires the mutex."},{"pos":[2688,2970],"content":"[!NOTE]\n In the .NET Framework versions 1.0 and 1.1, an abandoned <xref:System.Threading.Mutex> is set to the signaled state and the next waiting thread gets ownership. If no thread is waiting, the <xref:System.Threading.Mutex> remains in a signaled state. No exception is thrown.","leadings":["","> "],"nodes":[{"content":"In the .NET Framework versions 1.0 and 1.1, an abandoned <xref:System.Threading.Mutex> is set to the signaled state and the next waiting thread gets ownership. If no thread is waiting, the <xref:System.Threading.Mutex> remains in a signaled state. No exception is thrown.","pos":[9,280],"nodes":[{"content":"In the .NET Framework versions 1.0 and 1.1, an abandoned <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> is set to the signaled state and the next waiting thread gets ownership.","pos":[0,159],"source":"In the .NET Framework versions 1.0 and 1.1, an abandoned <xref:System.Threading.Mutex> is set to the signaled state and the next waiting thread gets ownership."},{"content":"If no thread is waiting, the <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> remains in a signaled state.","pos":[160,247],"source":" If no thread is waiting, the <xref:System.Threading.Mutex> remains in a signaled state."},{"content":"No exception is thrown.","pos":[248,271]}]}]},{"content":"In the case of a system-wide mutex, an abandoned mutex might indicate that an application has been terminated abruptly (for example, by using Windows Task Manager).","pos":[2977,3141]},{"pos":[3150,3174],"content":"Local and System Mutexes","linkify":"Local and System Mutexes","nodes":[{"content":"Local and System Mutexes","pos":[0,24]}]},{"content":"Mutexes are of two types: local mutexes and named system mutexes.","pos":[3178,3243]},{"content":"If you create a <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> object using a constructor that accepts a name, it is associated with an operating-system object of that name.","pos":[3244,3400],"source":" If you create a <xref:System.Threading.Mutex> object using a constructor that accepts a name, it is associated with an operating-system object of that name."},{"content":"Named system mutexes are visible throughout the operating system and can be used to synchronize the activities of processes.","pos":[3401,3525]},{"content":"You can create multiple <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> objects that represent the same named system mutex, and you can use the <ph id=\"ph2\">&lt;xref:System.Threading.Mutex.OpenExisting%2A&gt;</ph> method to open an existing named system mutex.","pos":[3526,3744],"source":" You can create multiple <xref:System.Threading.Mutex> objects that represent the same named system mutex, and you can use the <xref:System.Threading.Mutex.OpenExisting%2A> method to open an existing named system mutex."},{"content":"A local mutex exists only within your process.","pos":[3751,3797]},{"content":"It can be used by any thread in your process that has a reference to the local <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> object.","pos":[3798,3914],"source":" It can be used by any thread in your process that has a reference to the local <xref:System.Threading.Mutex> object."},{"content":"Each <ph id=\"ph1\">&lt;xref:System.Threading.Mutex&gt;</ph> object is a separate local mutex.","pos":[3915,3983],"source":" Each <xref:System.Threading.Mutex> object is a separate local mutex."},{"pos":[3993,4035],"content":"Access Control Security for System Mutexes","linkify":"Access Control Security for System Mutexes","nodes":[{"content":"Access Control Security for System Mutexes","pos":[0,42]}]},{"content":"The .NET Framework version 2.0 provides the ability to query and set Windows access control security for named system objects.","pos":[4039,4165]},{"content":"Protecting system mutexes from the moment of creation is recommended because system objects are global and therefore can be locked by code other than your own.","pos":[4166,4325]},{"pos":[4332,4947],"content":"For information on access control security for mutexes, see the <ph id=\"ph1\">&lt;xref:System.Security.AccessControl.MutexSecurity&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Security.AccessControl.MutexAccessRule&gt;</ph> classes, the <ph id=\"ph3\">&lt;xref:System.Security.AccessControl.MutexRights&gt;</ph> enumeration, the <ph id=\"ph4\">&lt;xref:System.Threading.Mutex.GetAccessControl%2A&gt;</ph>, <ph id=\"ph5\">&lt;xref:System.Threading.Mutex.SetAccessControl%2A&gt;</ph>, and <ph id=\"ph6\">&lt;xref:System.Threading.Mutex.OpenExisting%2A&gt;</ph> methods of the <ph id=\"ph7\">&lt;xref:System.Threading.Mutex&gt;</ph> class, and the <ph id=\"ph8\">&lt;xref:System.Threading.Mutex.%23ctor%28System.Boolean%2CSystem.String%2CSystem.Boolean%40%2CSystem.Security.AccessControl.MutexSecurity%29&gt;</ph> constructor.","source":"For information on access control security for mutexes, see the <xref:System.Security.AccessControl.MutexSecurity> and <xref:System.Security.AccessControl.MutexAccessRule> classes, the <xref:System.Security.AccessControl.MutexRights> enumeration, the <xref:System.Threading.Mutex.GetAccessControl%2A>, <xref:System.Threading.Mutex.SetAccessControl%2A>, and <xref:System.Threading.Mutex.OpenExisting%2A> methods of the <xref:System.Threading.Mutex> class, and the <xref:System.Threading.Mutex.%23ctor%28System.Boolean%2CSystem.String%2CSystem.Boolean%40%2CSystem.Security.AccessControl.MutexSecurity%29> constructor."},{"pos":[4956,4964],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5330,5397],"content":"<bpt id=\"p1\">[</bpt>Threading objects and features<ept id=\"p1\">](threading-objects-and-features.md)</ept>","source":"[Threading objects and features](threading-objects-and-features.md)"},{"pos":[5400,5449],"content":"<bpt id=\"p1\">[</bpt>Threads and threading<ept id=\"p1\">](threads-and-threading.md)</ept>","source":"[Threads and threading](threads-and-threading.md)"},{"pos":[5452,5473],"content":"<bpt id=\"p1\">[</bpt>Threading<ept id=\"p1\">](index.md)</ept>","source":"[Threading](index.md)"}]}