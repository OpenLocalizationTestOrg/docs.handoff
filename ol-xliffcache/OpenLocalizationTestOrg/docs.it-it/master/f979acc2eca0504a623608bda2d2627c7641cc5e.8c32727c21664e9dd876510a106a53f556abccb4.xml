{"content":"---\ntitle: \"How to: Define Entity Relationships (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF Data Services, changing data\"\nms.assetid: cc255524-1534-4fae-b83c-250933d5a72b\ncaps.latest.revision: 2\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Define Entity Relationships (WCF Data Services)\nWhen you add a new entity in [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], any relationships between the new entity and related entities are not automatically defined. You can create and change relationships between entity instances and have the client library reflect those changes in the data service. For more information, see [Updating the Data Service](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).  \n  \n The example in this topic uses the Northwind sample data service and autogenerated client data service classes. This service and the client data classes are created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md).  \n  \n## Example  \n The following example creates a new object instance and then calls the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to create the item in the context along with the link to the related order. An HTTP POST message is sent to the data service when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.  \n  \n [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderAuto](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorderauto)]\n [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderAuto](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorderauto)]  \n  \n## Example  \n The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method to add an `Order_Details` object to a related `Orders` object with a reference to a specific `Products` object. The <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> and <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> methods define the relationships. In this example, the navigation properties on the `Order_Details` object are also explicitly set.  \n  \n [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrder](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorder)]\n [!code-vb[Astoria Northwind Client#AddOrderDetailToOrder](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorder)]  \n  \n## See Also  \n [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)   \n [How to: Add, Modify, and Delete Entities](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md)","nodes":[{"pos":[4,440],"embed":true,"restype":"x-metadata","content":"title: \"How to: Define Entity Relationships (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF Data Services, changing data\"\nms.assetid: cc255524-1534-4fae-b83c-250933d5a72b\ncaps.latest.revision: 2\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"How to: Define Entity Relationships (WCF Data Services) | Microsoft Docs","nodes":[{"pos":[0,72],"content":"How to: Define Entity Relationships (WCF Data Services) | Microsoft Docs","nodes":[{"content":"How to: Define Entity Relationships (WCF Data Services) | Microsoft Docs","pos":[0,72]}]}],"path":["title"]}],"yml":true},{"pos":[447,502],"content":"How to: Define Entity Relationships (WCF Data Services)","linkify":"How to: Define Entity Relationships (WCF Data Services)","nodes":[{"content":"How to: Define Entity Relationships (WCF Data Services)","pos":[0,55]}]},{"content":"When you add a new entity in <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph>, any relationships between the new entity and related entities are not automatically defined.","pos":[503,685],"source":"When you add a new entity in [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], any relationships between the new entity and related entities are not automatically defined."},{"content":"You can create and change relationships between entity instances and have the client library reflect those changes in the data service.","pos":[686,821]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Updating the Data Service<ept id=\"p1\">](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)</ept>.","pos":[822,960],"source":" For more information, see [Updating the Data Service](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)."},{"content":"The example in this topic uses the Northwind sample data service and autogenerated client data service classes.","pos":[967,1078]},{"content":"This service and the client data classes are created when you complete the <bpt id=\"p1\">[</bpt>WCF Data Services quickstart<ept id=\"p1\">](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)</ept>.","pos":[1079,1254],"source":" This service and the client data classes are created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)."},{"pos":[1263,1270],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example creates a new object instance and then calls the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A&gt;</ph> method on the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> to create the item in the context along with the link to the related order.","pos":[1274,1562],"source":"The following example creates a new object instance and then calls the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to create the item in the context along with the link to the related order."},{"content":"An HTTP POST message is sent to the data service when the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A&gt;</ph> method is called.","pos":[1563,1707],"source":" An HTTP POST message is sent to the data service when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called."},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Client#AddOrderDetailToOrderAuto<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorderauto)</ept><ept id=\"p1\">]</ept>","pos":[1714,1898],"source":"[!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderAuto](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorderauto)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Client#AddOrderDetailToOrderAuto<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorderauto)</ept><ept id=\"p1\">]</ept>","pos":[1900,2085],"source":"[!code-vb[Astoria Northwind Client#AddOrderDetailToOrderAuto](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorderauto)]"},{"pos":[2094,2101],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows how to use the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.AddObject%2A&gt;</ph> method to add an <ph id=\"ph2\">`Order_Details`</ph> object to a related <ph id=\"ph3\">`Orders`</ph> object with a reference to a specific <ph id=\"ph4\">`Products`</ph> object.","pos":[2105,2333],"source":"The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method to add an `Order_Details` object to a related `Orders` object with a reference to a specific `Products` object."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.AddLink%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext.SetLink%2A&gt;</ph> methods define the relationships.","pos":[2334,2505],"source":" The <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> and <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> methods define the relationships."},{"content":"In this example, the navigation properties on the <ph id=\"ph1\">`Order_Details`</ph> object are also explicitly set.","pos":[2506,2603],"source":" In this example, the navigation properties on the `Order_Details` object are also explicitly set."},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Client#AddOrderDetailToOrder<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorder)</ept><ept id=\"p1\">]</ept>","pos":[2610,2786],"source":"[!code-csharp[Astoria Northwind Client#AddOrderDetailToOrder](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#addorderdetailtoorder)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Client#AddOrderDetailToOrder<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorder)</ept><ept id=\"p1\">]</ept>","pos":[2788,2965],"source":"[!code-vb[Astoria Northwind Client#AddOrderDetailToOrder](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#addorderdetailtoorder)]"},{"pos":[2974,2982],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>WCF Data Services Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</ept><ph id=\"ph1\"> </ph>","pos":[2986,3094],"source":"[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Add, Modify, and Delete Entities<ept id=\"p1\">](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md)</ept>","pos":[3098,3236],"source":"[How to: Add, Modify, and Delete Entities](../../../../docs/framework/data/wcf/how-to-add-modify-and-delete-entities-wcf-data-services.md)"}]}