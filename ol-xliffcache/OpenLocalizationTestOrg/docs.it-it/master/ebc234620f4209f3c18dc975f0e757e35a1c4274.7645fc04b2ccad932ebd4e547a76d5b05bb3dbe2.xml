{"content":"---\ntitle: \"&lt;add&gt; of &lt;filters&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: e3bf437c-dd99-49f3-9792-9a8721e6eaad\ncaps.latest.revision: 4\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# &lt;add&gt; of &lt;filters&gt;\nA XPath filter that specifies the kind of message to be logged.  \n  \n \\<system.ServiceModel>  \n\\<diagnostic>  \n\\<messageLogging>  \n\\<filters>  \n\\<add>  \n  \n## Syntax  \n  \n```  \n  \n<filters>  \n   <add filter=\"String\"/>  \n</filters>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|filter|A string that specifies a query on an XML document defined by an XPath 1.0 expression. For more information, see <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>.|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<filters>](../../../../../docs/framework/configure-apps/file-schema/wcf/filters.md)|Contains a collection of XPath filters used to control what kind of message is logged.|  \n  \n## Remarks  \n Filters are applied only at the transport layer, specified by `logMessagesAtTransportLevel` is `true`. Service level and malformed message logging are not affected by filters.  \n  \n To add a filter to the collection, use the `add` keyword. When one or more filters are defined, only messages that match at least one of the filters are logged. If no filter is defined, all messages pass through.  \n  \n Filters support the full XPath syntax, and are applied in the order they appear in the configuration file. A syntactically incorrect filter results in a configuration exception.  \n  \n The following is an example of how to configure a filter that records only messages that have a SOAP Header section.  \n  \n## Example  \n The following is an example of how to configure a filter that records only messages that have a SOAP Header section.  \n  \n```  \n<messageLogging logEntireMessage=\"true\"  \n     logMalformedMessages=\"true\" logMessagesAtServiceLevel=\"true\"  \n     logMessagesAtTransportLevel=\"true\" maxMessagesToLog=\"420\">  \n     <filters>  \n        <add xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">  \n                        /soap:Envelope/soap:Headers  \n        </add>  \n     </filters>  \n</messageLogging>  \n```  \n  \n## See Also  \n <xref:System.ServiceModel.Configuration.DiagnosticSection>   \n <xref:System.ServiceModel.Diagnostics>   \n <xref:System.ServiceModel.Configuration.DiagnosticSection.MessageLogging%2A>   \n <xref:System.ServiceModel.Configuration.MessageLoggingElement>   \n <xref:System.ServiceModel.Configuration.MessageLoggingElement.Filters%2A>   \n <xref:System.ServiceModel.Configuration.XPathMessageFilterElement>   \n <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>   \n [Configuring Message Logging](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)   \n [Configuring Message Logging](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)   \n [\\<messageLogging>](../../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)","nodes":[{"pos":[4,350],"nodes":[{"content":"&lt;add&gt; of &lt;filters&gt; | Microsoft Docs","nodes":[{"pos":[0,47],"content":"&lt;add&gt; of &lt;filters&gt; | Microsoft Docs","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>add<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>filters<ph id=\"ph4\">&amp;gt;</ph> | Microsoft Docs","pos":[0,47],"source":"&lt;add&gt; of &lt;filters&gt; | Microsoft Docs"}]}],"pos":[6,56],"yaml":true}],"content":"title: \"&lt;add&gt; of &lt;filters&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: e3bf437c-dd99-49f3-9792-9a8721e6eaad\ncaps.latest.revision: 4\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[357,387],"content":"&lt;add&gt; of &lt;filters&gt;","linkify":"&lt;add&gt; of &lt;filters&gt;","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>add<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>filters<ph id=\"ph4\">&amp;gt;</ph>","pos":[0,30],"source":"&lt;add&gt; of &lt;filters&gt;"}]},{"content":"A XPath filter that specifies the kind of message to be logged.","pos":[388,451]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[458,480],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>diagnostic&gt;","pos":[483,496],"source":"\\<diagnostic>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>messageLogging&gt;","pos":[499,516],"source":"\\<messageLogging>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>filters&gt;","pos":[519,529],"source":"\\<filters>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>add&gt;","pos":[532,538],"source":"\\<add>"},{"pos":[547,553],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[633,656],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[660,740]},{"pos":[750,760],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[767,776]},{"content":"Description","pos":[777,788]},{"content":"filter","pos":[831,837]},{"content":"A string that specifies a query on an XML document defined by an XPath 1.0 expression.","pos":[838,924]},{"content":"For more information, see <ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.XPathMessageFilter&gt;</ph>.","pos":[925,1008],"source":" For more information, see <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>."},{"pos":[1019,1033],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[1037,1042]},{"pos":[1052,1067],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[1074,1081]},{"content":"Description","pos":[1082,1093]},{"pos":[1134,1219],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>filters&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/filters.md)</ept>","source":"[\\<filters>](../../../../../docs/framework/configure-apps/file-schema/wcf/filters.md)"},{"content":"Contains a collection of XPath filters used to control what kind of message is logged.","pos":[1220,1306]},{"pos":[1316,1323],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Filters are applied only at the transport layer, specified by <ph id=\"ph1\">`logMessagesAtTransportLevel`</ph> is <ph id=\"ph2\">`true`</ph>.","pos":[1327,1429],"source":"Filters are applied only at the transport layer, specified by `logMessagesAtTransportLevel` is `true`."},{"content":"Service level and malformed message logging are not affected by filters.","pos":[1430,1502]},{"content":"To add a filter to the collection, use the <ph id=\"ph1\">`add`</ph> keyword.","pos":[1509,1566],"source":"To add a filter to the collection, use the `add` keyword."},{"content":"When one or more filters are defined, only messages that match at least one of the filters are logged.","pos":[1567,1669]},{"content":"If no filter is defined, all messages pass through.","pos":[1670,1721]},{"content":"Filters support the full XPath syntax, and are applied in the order they appear in the configuration file.","pos":[1728,1834]},{"content":"A syntactically incorrect filter results in a configuration exception.","pos":[1835,1905]},{"content":"The following is an example of how to configure a filter that records only messages that have a SOAP Header section.","pos":[1912,2028]},{"pos":[2037,2044],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following is an example of how to configure a filter that records only messages that have a SOAP Header section.","pos":[2048,2164]},{"pos":[2559,2567],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.DiagnosticSection&gt;</ph>","pos":[2571,2629],"source":"<xref:System.ServiceModel.Configuration.DiagnosticSection> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Diagnostics&gt;</ph>","pos":[2634,2672],"source":"<xref:System.ServiceModel.Diagnostics> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.DiagnosticSection.MessageLogging%2A&gt;</ph>","pos":[2677,2753],"source":"<xref:System.ServiceModel.Configuration.DiagnosticSection.MessageLogging%2A> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.MessageLoggingElement&gt;</ph>","pos":[2758,2820],"source":"<xref:System.ServiceModel.Configuration.MessageLoggingElement> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.MessageLoggingElement.Filters%2A&gt;</ph>","pos":[2825,2898],"source":"<xref:System.ServiceModel.Configuration.MessageLoggingElement.Filters%2A> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.XPathMessageFilterElement&gt;</ph>","pos":[2903,2969],"source":"<xref:System.ServiceModel.Configuration.XPathMessageFilterElement> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.XPathMessageFilter&gt;</ph>","pos":[2974,3030],"source":"<xref:System.ServiceModel.Dispatcher.XPathMessageFilter> "},{"content":"<bpt id=\"p1\">[</bpt>Configuring Message Logging<ept id=\"p1\">](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)</ept><ph id=\"ph1\"> </ph>","pos":[3035,3143],"source":"[Configuring Message Logging](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md) "},{"content":"<bpt id=\"p1\">[</bpt>Configuring Message Logging<ept id=\"p1\">](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md)</ept><ph id=\"ph1\"> </ph>","pos":[3147,3255],"source":"[Configuring Message Logging](../../../../../docs/framework/wcf/diagnostics/configuring-message-logging.md) "},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>messageLogging&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)</ept>","pos":[3259,3358],"source":"[\\<messageLogging>](../../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)"}]}