{"content":"---\ntitle: \"Hosting the Data Service (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"HTML\"\n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\nhelpviewer_keywords: \n  - \"WCF Data Services, configuring\"\n  - \"WCF Data Services, Windows Communication Foundation\"\nms.assetid: b48f42ce-22ce-4f8d-8f0d-f7ddac9125ee\ncaps.latest.revision: 3\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Hosting the Data Service (WCF Data Services)\nBy using [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you can create a service that exposes data as an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed. This data service is defined as a class that inherits from <xref:System.Data.Services.DataService%601>. This class provides the functionality required to process request messages, perform updates against the data source, and generate responses messages, as required by [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]. However, a data service cannot bind to and listen on a network socket for incoming HTTP requests. For this required functionality, the data service relies on a hosting component.  \n  \n The data service host performs the following tasks on behalf of the data service:  \n  \n-   Listens for requests and routes these requests to the data service.  \n  \n-   Creates an instance of the data service for each request.  \n  \n-   Requests that the data service process the incoming request.  \n  \n-   Sends the response on behalf of the data service.  \n  \n To simplify hosting a data service, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] is designed to integrate with Windows Communication Foundation (WCF). The data service provides a default WCF implementation that serves as the data service host in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application. Therefore, you can host a data service in one of the following ways:  \n  \n-   In an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.  \n  \n-   In a managed application that supports self-hosted WCF services.  \n  \n-   In some other custom data service host.  \n  \n## Hosting a Data Service in an ASP.NET Application  \n When you use the **Add New Item** dialog in Visual Studio to define a data service in an ASP.NET application, the tool generates two new files in the project. The first file has a `.svc` extension and instructs the WCF runtime how to instantiate the data service. The following is an example of this file for the Northwind sample data service created when you complete the [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md):  \n  \n```  \n<%@ ServiceHost Language=\"C#\"   \n    Factory=\"System.Data.Services.DataServiceHostFactory,   \n            System.Data.Services, Version=4.0.0.0,   \n            Culture=neutral, PublicKeyToken=b77a5c561934e089\"   \n    Service=\"NorthwindService.Northwind\" %>   \n```  \n  \n This directive tells the application to create the service host for the named data service class by using the <xref:System.Data.Services.DataServiceHostFactory> class.  \n  \n The code-behind page for the `.svc` file contains the class that is the implementation of the data service itself, which is defined as follows for the Northwind sample data service:  \n  \n [!code-csharp[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#servicedefinition)]\n [!code-vb[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#servicedefinition)]  \n  \n Because a data service behaves like a WCF service, the data service integrates with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] and follows the WCF Web programming model. For more information, see [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md) and [WCF Web HTTP Programming Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md).  \n  \n## Self-Hosted WCF Services  \n Because it incorporates a WCF implementation, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] support self-hosting a data service as a WCF service. A service can be self-hosted in any [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] application, such as a console application. The <xref:System.Data.Services.DataServiceHost> class, which inherits from <xref:System.ServiceModel.Web.WebServiceHost>, is used to instantiate the data service at a specific address.  \n  \n Self-hosting can be used for development and testing because it can make it easier to deploy and troubleshoot the service. However, this kind of hosting does not provide the advanced hosting and management features provided by [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] or by Internet Information Services (IIS). For more information, see [Hosting in a Managed Application](../../../../docs/framework/wcf/feature-details/hosting-in-a-managed-application.md).  \n  \n## Defining a Custom Data Service Host  \n For cases where the WCF host implementation is too restrictive, you can also define a custom host for a data service. Any class that implements <xref:System.Data.Services.IDataServiceHost> interface can be used as the network host for a data service. A custom host must implement the <xref:System.Data.Services.IDataServiceHost> interface and be able to handle the following basic responsibilities of the data service host:  \n  \n-   Provide the data service with the service root path.  \n  \n-   Process request and response headers information to the appropriate <xref:System.Data.Services.IDataServiceHost> member implementation.  \n  \n-   Handle exceptions raised by the data service.  \n  \n-   Validate parameters in the query string.  \n  \n## See Also  \n [Defining WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)   \n [Exposing Your Data as a Service](../../../../docs/framework/data/wcf/exposing-your-data-as-a-service-wcf-data-services.md)   \n [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md)","nodes":[{"pos":[12,73],"content":"Hosting the Data Service (WCF Data Services) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Hosting the Data Service (WCF Data Services) | Microsoft Docs","pos":[0,61]}]},{"pos":[547,591],"content":"Hosting the Data Service (WCF Data Services)","linkify":"Hosting the Data Service (WCF Data Services)","nodes":[{"content":"Hosting the Data Service (WCF Data Services)","pos":[0,44]}]},{"content":"By using <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph>, you can create a service that exposes data as an <ph id=\"ph2\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> feed.","pos":[592,780],"source":"By using [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you can create a service that exposes data as an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed."},{"content":"This data service is defined as a class that inherits from <ph id=\"ph1\">&lt;xref:System.Data.Services.DataService%601&gt;</ph>.","pos":[781,884],"source":" This data service is defined as a class that inherits from <xref:System.Data.Services.DataService%601>."},{"content":"This class provides the functionality required to process request messages, perform updates against the data source, and generate responses messages, as required by <ph id=\"ph1\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph>.","pos":[885,1116],"source":" This class provides the functionality required to process request messages, perform updates against the data source, and generate responses messages, as required by [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]."},{"content":"However, a data service cannot bind to and listen on a network socket for incoming HTTP requests.","pos":[1117,1214]},{"content":"For this required functionality, the data service relies on a hosting component.","pos":[1215,1295]},{"content":"The data service host performs the following tasks on behalf of the data service:","pos":[1302,1383]},{"content":"Listens for requests and routes these requests to the data service.","pos":[1393,1460]},{"content":"Creates an instance of the data service for each request.","pos":[1470,1527]},{"content":"Requests that the data service process the incoming request.","pos":[1537,1597]},{"content":"Sends the response on behalf of the data service.","pos":[1607,1656]},{"content":"To simplify hosting a data service, <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> is designed to integrate with Windows Communication Foundation (WCF).","pos":[1663,1828],"source":"To simplify hosting a data service, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] is designed to integrate with Windows Communication Foundation (WCF)."},{"content":"The data service provides a default WCF implementation that serves as the data service host in an <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> application.","pos":[1829,1997],"source":" The data service provides a default WCF implementation that serves as the data service host in an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application."},{"content":"Therefore, you can host a data service in one of the following ways:","pos":[1998,2066]},{"pos":[2076,2152],"content":"In an <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> application.","source":"In an [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application."},{"content":"In a managed application that supports self-hosted WCF services.","pos":[2162,2226]},{"content":"In some other custom data service host.","pos":[2236,2275]},{"pos":[2284,2332],"content":"Hosting a Data Service in an ASP.NET Application","linkify":"Hosting a Data Service in an ASP.NET Application","nodes":[{"content":"Hosting a Data Service in an ASP.NET Application","pos":[0,48]}]},{"content":"When you use the <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog in Visual Studio to define a data service in an ASP.NET application, the tool generates two new files in the project.","pos":[2336,2494],"source":"When you use the **Add New Item** dialog in Visual Studio to define a data service in an ASP.NET application, the tool generates two new files in the project."},{"content":"The first file has a <ph id=\"ph1\">`.svc`</ph> extension and instructs the WCF runtime how to instantiate the data service.","pos":[2495,2599],"source":" The first file has a `.svc` extension and instructs the WCF runtime how to instantiate the data service."},{"content":"The following is an example of this file for the Northwind sample data service created when you complete the <bpt id=\"p1\">[</bpt>quickstart<ept id=\"p1\">](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)</ept>:","pos":[2600,2791],"source":" The following is an example of this file for the Northwind sample data service created when you complete the [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md):"},{"content":"This directive tells the application to create the service host for the named data service class by using the <ph id=\"ph1\">&lt;xref:System.Data.Services.DataServiceHostFactory&gt;</ph> class.","pos":[3073,3240],"source":"This directive tells the application to create the service host for the named data service class by using the <xref:System.Data.Services.DataServiceHostFactory> class."},{"pos":[3247,3428],"content":"The code-behind page for the <ph id=\"ph1\">`.svc`</ph> file contains the class that is the implementation of the data service itself, which is defined as follows for the Northwind sample data service:","source":"The code-behind page for the `.svc` file contains the class that is the implementation of the data service itself, which is defined as follows for the Northwind sample data service:"},{"pos":[3435,3796],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Quickstart Service#ServiceDefinition<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#servicedefinition)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Quickstart Service#ServiceDefinition<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#servicedefinition)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#servicedefinition)]\n [!code-vb[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#servicedefinition)]"},{"content":"Because a data service behaves like a WCF service, the data service integrates with <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> and follows the WCF Web programming model.","pos":[3803,3987],"source":"Because a data service behaves like a WCF service, the data service integrates with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] and follows the WCF Web programming model."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>WCF Services and ASP.NET<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)</ept> and <bpt id=\"p2\">[</bpt>WCF Web HTTP Programming Model<ept id=\"p2\">](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)</ept>.","pos":[3988,4235],"source":" For more information, see [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md) and [WCF Web HTTP Programming Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)."},{"pos":[4244,4268],"content":"Self-Hosted WCF Services","linkify":"Self-Hosted WCF Services","nodes":[{"content":"Self-Hosted WCF Services","pos":[0,24]}]},{"content":"Because it incorporates a WCF implementation, <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> support self-hosting a data service as a WCF service.","pos":[4272,4431],"source":"Because it incorporates a WCF implementation, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] support self-hosting a data service as a WCF service."},{"content":"A service can be self-hosted in any <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> application, such as a console application.","pos":[4432,4575],"source":" A service can be self-hosted in any [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] application, such as a console application."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Services.DataServiceHost&gt;</ph> class, which inherits from <ph id=\"ph2\">&lt;xref:System.ServiceModel.Web.WebServiceHost&gt;</ph>, is used to instantiate the data service at a specific address.","pos":[4576,4760],"source":" The <xref:System.Data.Services.DataServiceHost> class, which inherits from <xref:System.ServiceModel.Web.WebServiceHost>, is used to instantiate the data service at a specific address."},{"content":"Self-hosting can be used for development and testing because it can make it easier to deploy and troubleshoot the service.","pos":[4767,4889]},{"content":"However, this kind of hosting does not provide the advanced hosting and management features provided by <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> or by Internet Information Services (IIS).","pos":[4890,5094],"source":" However, this kind of hosting does not provide the advanced hosting and management features provided by [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] or by Internet Information Services (IIS)."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Hosting in a Managed Application<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/hosting-in-a-managed-application.md)</ept>.","pos":[5095,5240],"source":" For more information, see [Hosting in a Managed Application](../../../../docs/framework/wcf/feature-details/hosting-in-a-managed-application.md)."},{"pos":[5249,5284],"content":"Defining a Custom Data Service Host","linkify":"Defining a Custom Data Service Host","nodes":[{"content":"Defining a Custom Data Service Host","pos":[0,35]}]},{"content":"For cases where the WCF host implementation is too restrictive, you can also define a custom host for a data service.","pos":[5288,5405]},{"content":"Any class that implements <ph id=\"ph1\">&lt;xref:System.Data.Services.IDataServiceHost&gt;</ph> interface can be used as the network host for a data service.","pos":[5406,5538],"source":" Any class that implements <xref:System.Data.Services.IDataServiceHost> interface can be used as the network host for a data service."},{"content":"A custom host must implement the <ph id=\"ph1\">&lt;xref:System.Data.Services.IDataServiceHost&gt;</ph> interface and be able to handle the following basic responsibilities of the data service host:","pos":[5539,5711],"source":" A custom host must implement the <xref:System.Data.Services.IDataServiceHost> interface and be able to handle the following basic responsibilities of the data service host:"},{"content":"Provide the data service with the service root path.","pos":[5721,5773]},{"content":"Process request and response headers information to the appropriate <ph id=\"ph1\">&lt;xref:System.Data.Services.IDataServiceHost&gt;</ph> member implementation.","pos":[5783,5918],"source":"Process request and response headers information to the appropriate <xref:System.Data.Services.IDataServiceHost> member implementation."},{"content":"Handle exceptions raised by the data service.","pos":[5928,5973]},{"content":"Validate parameters in the query string.","pos":[5983,6023]},{"pos":[6032,6040],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Defining WCF Data Services<ept id=\"p1\">](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[6044,6140],"source":"[Defining WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Exposing Your Data as a Service<ept id=\"p1\">](../../../../docs/framework/data/wcf/exposing-your-data-as-a-service-wcf-data-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[6143,6268],"source":" [Exposing Your Data as a Service](../../../../docs/framework/data/wcf/exposing-your-data-as-a-service-wcf-data-services.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Configuring the Data Service<ept id=\"p1\">](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md)</ept>","pos":[6271,6389],"source":" [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md)"}]}