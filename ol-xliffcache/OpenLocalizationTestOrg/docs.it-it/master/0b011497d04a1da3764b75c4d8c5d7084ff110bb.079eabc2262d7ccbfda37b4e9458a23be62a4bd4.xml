{"content":"---\ntitle: \"How to: Specify the Security Context for Services\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Windows Service applications, security\"\n  - \"security [Visual Studio], contexts\"\n  - \"contexts, Visual Studio security\"\n  - \"security [Visual Studio], service applications\"\n  - \"ServiceProcessInstaller class, security context\"\n  - \"services, security\"\n  - \"ServiceInstaller class, security context\"\nms.assetid: 02187c7b-dbf2-45f2-96c2-e11010225a22\nauthor: \"ghogen\"\n---\n# How to: Specify the Security Context for Services\nBy default, services run in a different security context than that of the logged-in user. Services run in the context of the default system account, called `LocalSystem`, which gives them different access privileges to system resources than the user. You can change this behavior to specify a different user account under which your service should run.  \n  \n You set the security context by manipulating the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> property for the process within which the service runs. This property allows you to set the service to one of four account types:  \n  \n-   `User`, which causes the system to prompt for a valid user name and password when the service is installed and runs in the context of an account specified by a single user on the network;  \n  \n-   `LocalService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents anonymous credentials to any remote server;  \n  \n-   `LocalSystem`, which runs in the context of an account that provides extensive local privileges, and presents the computer's credentials to any remote server;  \n  \n-   `NetworkService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents the computer's credentials to any remote server.  \n  \n For more information, see the <xref:System.ServiceProcess.ServiceAccount> enumeration.  \n  \n### To specify the security context for a service  \n  \n1.  After creating your service, add the necessary installers for it. For more information, see [How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md).  \n  \n2.  In the designer, access the `ProjectInstaller` class and click the service process installer for the service you are working with.  \n  \n    > [!NOTE]\n    >  For every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains. In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>.  \n  \n3.  In the **Properties** window, set the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> to the appropriate value.  \n  \n## See also\n\n- [Introduction to Windows Service Applications](../../../docs/framework/windows-services/introduction-to-windows-service-applications.md)\n- [How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)\n- [How to: Create Windows Services](../../../docs/framework/windows-services/how-to-create-windows-services.md)\n","nodes":[{"pos":[4,476],"embed":true,"restype":"x-metadata","content":"title: \"How to: Specify the Security Context for Services\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Windows Service applications, security\"\n  - \"security [Visual Studio], contexts\"\n  - \"contexts, Visual Studio security\"\n  - \"security [Visual Studio], service applications\"\n  - \"ServiceProcessInstaller class, security context\"\n  - \"services, security\"\n  - \"ServiceInstaller class, security context\"\nms.assetid: 02187c7b-dbf2-45f2-96c2-e11010225a22\nauthor: \"ghogen\"","nodes":[{"content":"How to: Specify the Security Context for Services","nodes":[{"pos":[0,49],"content":"How to: Specify the Security Context for Services","nodes":[{"content":"How to: Specify the Security Context for Services","pos":[0,49]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[483,532],"content":"How to: Specify the Security Context for Services","linkify":"How to: Specify the Security Context for Services","nodes":[{"content":"How to: Specify the Security Context for Services","pos":[0,49]}]},{"content":"By default, services run in a different security context than that of the logged-in user.","pos":[533,622]},{"content":"Services run in the context of the default system account, called <ph id=\"ph1\">`LocalSystem`</ph>, which gives them different access privileges to system resources than the user.","pos":[623,783],"source":" Services run in the context of the default system account, called `LocalSystem`, which gives them different access privileges to system resources than the user."},{"content":"You can change this behavior to specify a different user account under which your service should run.","pos":[784,885]},{"content":"You set the security context by manipulating the <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A&gt;</ph> property for the process within which the service runs.","pos":[892,1060],"source":"You set the security context by manipulating the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> property for the process within which the service runs."},{"content":"This property allows you to set the service to one of four account types:","pos":[1061,1134]},{"pos":[1144,1331],"content":"<ph id=\"ph1\">`User`</ph>, which causes the system to prompt for a valid user name and password when the service is installed and runs in the context of an account specified by a single user on the network;","source":"`User`, which causes the system to prompt for a valid user name and password when the service is installed and runs in the context of an account specified by a single user on the network;"},{"pos":[1341,1511],"content":"<ph id=\"ph1\">`LocalService`</ph>, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents anonymous credentials to any remote server;","source":"`LocalService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents anonymous credentials to any remote server;"},{"pos":[1521,1679],"content":"<ph id=\"ph1\">`LocalSystem`</ph>, which runs in the context of an account that provides extensive local privileges, and presents the computer's credentials to any remote server;","source":"`LocalSystem`, which runs in the context of an account that provides extensive local privileges, and presents the computer's credentials to any remote server;"},{"pos":[1689,1866],"content":"<ph id=\"ph1\">`NetworkService`</ph>, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents the computer's credentials to any remote server.","source":"`NetworkService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents the computer's credentials to any remote server."},{"pos":[1873,1959],"content":"For more information, see the <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceAccount&gt;</ph> enumeration.","source":"For more information, see the <xref:System.ServiceProcess.ServiceAccount> enumeration."},{"pos":[1969,2014],"content":"To specify the security context for a service","linkify":"To specify the security context for a service","nodes":[{"content":"To specify the security context for a service","pos":[0,45]}]},{"content":"After creating your service, add the necessary installers for it.","pos":[2024,2089]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Add Installers to Your Service Application<ept id=\"p1\">](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)</ept>.","pos":[2090,2264],"source":" For more information, see [How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)."},{"pos":[2274,2404],"content":"In the designer, access the <ph id=\"ph1\">`ProjectInstaller`</ph> class and click the service process installer for the service you are working with.","source":"In the designer, access the `ProjectInstaller` class and click the service process installer for the service you are working with."},{"pos":[2416,2759],"content":"[!NOTE]\nFor every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains. In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>.","leadings":["","    >  "],"nodes":[{"content":"For every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains. In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>.","pos":[8,336],"nodes":[{"content":"For every service application, there are at least two installation components in the <ph id=\"ph1\">`ProjectInstaller`</ph> class — one that installs the processes for all services in the project, and one installer for each service the application contains.","pos":[0,237],"source":"For every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains."},{"content":"In this instance, you want to select <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceProcessInstaller&gt;</ph>.","pos":[238,328],"source":" In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>."}]}]},{"pos":[2769,2896],"content":"In the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> window, set the <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A&gt;</ph> to the appropriate value.","source":"In the **Properties** window, set the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> to the appropriate value."},{"pos":[2905,2913],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2917,3053],"content":"<bpt id=\"p1\">[</bpt>Introduction to Windows Service Applications<ept id=\"p1\">](../../../docs/framework/windows-services/introduction-to-windows-service-applications.md)</ept>","source":"[Introduction to Windows Service Applications](../../../docs/framework/windows-services/introduction-to-windows-service-applications.md)"},{"pos":[3056,3203],"content":"<bpt id=\"p1\">[</bpt>How to: Add Installers to Your Service Application<ept id=\"p1\">](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)</ept>","source":"[How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)"},{"pos":[3206,3315],"content":"<bpt id=\"p1\">[</bpt>How to: Create Windows Services<ept id=\"p1\">](../../../docs/framework/windows-services/how-to-create-windows-services.md)</ept>","source":"[How to: Create Windows Services](../../../docs/framework/windows-services/how-to-create-windows-services.md)"}]}