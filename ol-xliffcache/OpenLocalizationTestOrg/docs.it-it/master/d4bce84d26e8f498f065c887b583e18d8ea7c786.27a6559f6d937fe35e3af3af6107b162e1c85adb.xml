{"content":"---\ntitle: \"Converting between DateTime and DateTimeOffset\"\nms.date: \"04/10/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"DateTime structure, converting\"\n  - \"time zones [.NET Framework], conversions\"\n  - \"UTC times, converting\"\n  - \"DateTimeOffset structure, converting\"\n  - \"converting DateTimeOffset and DateTime values\"\n  - \"dates [.NET Framework], converting\"\n  - \"converting times\"\n  - \"Date data type, converting\"\n  - \"local time conversions\"\nms.assetid: b605ff97-0c45-4c24-833f-4c6a3e8be64c\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Converting between DateTime and DateTimeOffset\n\nAlthough the <xref:System.DateTimeOffset> structure provides a greater degree of time zone awareness than the <xref:System.DateTime> structure, <xref:System.DateTime> parameters are used more commonly in method calls. Because of this, the ability to convert <xref:System.DateTimeOffset> values to <xref:System.DateTime> values and vice versa is particularly important. This topic shows how to perform these conversions in a way that preserves as much time zone information as possible.\n\n> [!NOTE]\n> Both the <xref:System.DateTime> and the <xref:System.DateTimeOffset> types have some limitations when representing times in time zones. With its <xref:System.DateTime.Kind%2A> property, <xref:System.DateTime> is able to reflect only Coordinated Universal Time (UTC) and the system's local time zone. <xref:System.DateTimeOffset> reflects a time's offset from UTC, but it does not reflect the actual time zone to which that offset belongs. For details about time values and support for time zones, see [Choosing Between DateTime, DateTimeOffset, TimeSpan, and TimeZoneInfo](../../../docs/standard/datetime/choosing-between-datetime.md).\n\n## Conversions from DateTime to DateTimeOffset\n\nThe <xref:System.DateTimeOffset> structure provides two equivalent ways to perform <xref:System.DateTime> to <xref:System.DateTimeOffset> conversion that are suitable for most conversions:\n\n* The <xref:System.DateTimeOffset.%23ctor%2A> constructor, which creates a new <xref:System.DateTimeOffset> object based on a <xref:System.DateTime> value.\n\n* The implicit conversion operator, which allows you to assign a <xref:System.DateTime> value to a <xref:System.DateTimeOffset> object.\n\nFor UTC and local <xref:System.DateTime> values, the <xref:System.DateTimeOffset.Offset%2A> property of the resulting <xref:System.DateTimeOffset> value accurately reflects the UTC or local time zone offset. For example, the following code converts a UTC time to its equivalent <xref:System.DateTimeOffset> value.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#1)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#1)]\n\nIn this case, the offset of the `utcTime2` variable is 00:00. Similarly, the following code converts a local time to its equivalent <xref:System.DateTimeOffset> value.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#2)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#2)]\n\nHowever, for <xref:System.DateTime> values whose <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Unspecified?displayProperty=nameWithType>, these two conversion methods produce a <xref:System.DateTimeOffset> value whose offset is that of the local time zone. This is shown in the following example, which is run in the U.S. Pacific Standard Time zone.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#3](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#3)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#3)]\n\nIf the <xref:System.DateTime> value reflects the date and time in something other than the local time zone or UTC, you can convert it to a <xref:System.DateTimeOffset> value and preserve its time zone information by calling the overloaded <xref:System.DateTimeOffset.%23ctor%2A> constructor. For example, the following example instantiates a <xref:System.DateTimeOffset> object that reflects Central Standard Time.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#4](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#4)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#4)]\n\nThe second parameter to this constructor overload, a <xref:System.TimeSpan> object that represents the time's offset from UTC, should be retrieved by calling the <xref:System.TimeZoneInfo.GetUtcOffset%28System.DateTime%29?displayProperty=nameWithType> method of the time's corresponding time zone. The method's single parameter is the <xref:System.DateTime> value that represents the date and time to be converted. If the time zone supports daylight saving time, this parameter allows the method to determine the appropriate offset for that particular date and time.\n\n## Conversions from DateTimeOffset to DateTime\n\nThe <xref:System.DateTimeOffset.DateTime%2A> property is most commonly used to perform <xref:System.DateTimeOffset> to <xref:System.DateTime> conversion. However, it returns a <xref:System.DateTime> value whose <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Unspecified>, as the following example illustrates.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#5)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#5)]\n\nThis means that any information about the <xref:System.DateTimeOffset> value's relationship to UTC is lost by the conversion when the <xref:System.DateTimeOffset.DateTime%2A> property is used. This affects <xref:System.DateTimeOffset> values that correspond to UTC time or to the system's local time because the <xref:System.DateTimeOffset.DateTime%2A> structure reflects only those two time zones in its <xref:System.DateTime.Kind%2A> property.\n\nTo preserve as much time zone information as possible when converting a <xref:System.DateTimeOffset> to a <xref:System.DateTime> value, you can use the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> and <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> properties.\n\n### Converting a UTC time\n\nTo indicate that a converted <xref:System.DateTimeOffset.DateTime%2A> value is the UTC time, you can retrieve the value of the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> property. It differs from the <xref:System.DateTimeOffset.DateTime%2A> property in two ways:\n\n* It returns a <xref:System.DateTime> value whose <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Utc>.\n\n* If the <xref:System.DateTimeOffset.Offset%2A> property value does not equal <xref:System.TimeSpan.Zero?displayProperty=nameWithType>, it converts the time to UTC.\n\n> [!NOTE]\n> If your application requires that converted <xref:System.DateTime> values unambiguously identify a single point in time, you should consider using the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> property to handle all <xref:System.DateTimeOffset> to <xref:System.DateTime> conversions.\n\nThe following code uses the <xref:System.DateTimeOffset.UtcDateTime%2A> property to convert a <xref:System.DateTimeOffset> value whose offset equals <xref:System.TimeSpan.Zero?displayProperty=nameWithType> to a <xref:System.DateTime> value.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#6)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#6)]\n\nThe following code uses the <xref:System.DateTimeOffset.UtcDateTime%2A> property to perform both a time zone conversion and a type conversion on a <xref:System.DateTimeOffset> value.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#12](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#12)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#12)]\n\n### Converting a local time\n\nTo indicate that a <xref:System.DateTimeOffset> value represents the local time, you can pass the <xref:System.DateTime> value returned by the <xref:System.DateTimeOffset.DateTime%2A?displayProperty=nameWithType> property to the `static` (`Shared` in Visual Basic) <xref:System.DateTime.SpecifyKind%2A> method. The method returns the date and time passed to it as its first parameter, but sets the <xref:System.DateTime.Kind%2A> property to the value specified by its second parameter. The following code uses the <xref:System.DateTime.SpecifyKind%2A> method when converting a <xref:System.DateTimeOffset> value whose offset corresponds to that of the local time zone.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#7)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#7)]\n\nYou can also use the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property to convert a <xref:System.DateTimeOffset> value to a local <xref:System.DateTime> value. The <xref:System.DateTime.Kind%2A> property of the returned <xref:System.DateTime> value is <xref:System.DateTimeKind.Local>. The following code uses the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property when converting a <xref:System.DateTimeOffset> value whose offset corresponds to that of the local time zone. \n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#10](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#10)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#10)]\n\nWhen you retrieve a <xref:System.DateTime> value using the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property, the property's `get` accessor first converts the <xref:System.DateTimeOffset> value to UTC, then converts it to local time by calling the <xref:System.DateTimeOffset.ToLocalTime%2A> method. This means that you can retrieve a value from the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property to perform a time zone conversion at the same time that you perform a type conversion. It also means that the local time zone's adjustment rules are applied in performing the conversion. The following code illustrates the use of the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property to perform both a type and a time zone conversion.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#11](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#11)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#11)]\n\n### A general-purpose conversion method\n\nThe following example defines a method named `ConvertFromDateTimeOffset` that converts <xref:System.DateTimeOffset> values to <xref:System.DateTime> values. Based on its offset, it determines whether the <xref:System.DateTimeOffset> value is a UTC time, a local time, or some other time, and defines the returned date and time value's <xref:System.DateTime.Kind%2A> property accordingly.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#8](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#8)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#8)]\n\nThe follow example calls the `ConvertFromDateTimeOffset` method to convert <xref:System.DateTimeOffset> values that represent a UTC time, a local time, and a time in the U.S. Central Standard Time zone.\n\n[!code-csharp[System.DateTimeOffset.Conceptual.Conversions#9](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/cs/Conversions.cs#9)]\n[!code-vb[System.DateTimeOffset.Conceptual.Conversions#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.Conversions/vb/Conversions.vb#9)]\n\nNote that this code makes two assumptions that, depending on the application and the source of its date and time values, may not always be valid:\n\n* It assumes that a date and time value whose offset is <xref:System.TimeSpan.Zero?displayProperty=nameWithType> represents UTC. In fact, UTC is not a time in a particular time zone, but the time in relation to which the times in the world's time zones are standardized. Time zones can also have an offset of <xref:System.TimeSpan.Zero>.\n\n* It assumes that a date and time whose offset equals that of the local time zone represents the local time zone. Because date and time values are disassociated from their original time zone, this may not be the case; the date and time can have originated in another time zone with the same offset.\n\n## See also\n\n- [Dates, times, and time zones](../../../docs/standard/datetime/index.md)\n","nodes":[{"pos":[4,590],"embed":true,"restype":"x-metadata","content":"title: \"Converting between DateTime and DateTimeOffset\"\nms.date: \"04/10/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"DateTime structure, converting\"\n  - \"time zones [.NET Framework], conversions\"\n  - \"UTC times, converting\"\n  - \"DateTimeOffset structure, converting\"\n  - \"converting DateTimeOffset and DateTime values\"\n  - \"dates [.NET Framework], converting\"\n  - \"converting times\"\n  - \"Date data type, converting\"\n  - \"local time conversions\"\nms.assetid: b605ff97-0c45-4c24-833f-4c6a3e8be64c\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Converting between DateTime and DateTimeOffset","nodes":[{"pos":[0,46],"content":"Converting between DateTime and DateTimeOffset","nodes":[{"content":"Converting between DateTime and DateTimeOffset","pos":[0,46]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[597,643],"content":"Converting between DateTime and DateTimeOffset","linkify":"Converting between DateTime and DateTimeOffset","nodes":[{"content":"Converting between DateTime and DateTimeOffset","pos":[0,46]}]},{"content":"Although the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> structure provides a greater degree of time zone awareness than the <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> structure, <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> parameters are used more commonly in method calls.","pos":[645,862],"source":"Although the <xref:System.DateTimeOffset> structure provides a greater degree of time zone awareness than the <xref:System.DateTime> structure, <xref:System.DateTime> parameters are used more commonly in method calls."},{"content":"Because of this, the ability to convert <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> values to <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> values and vice versa is particularly important.","pos":[863,1013],"source":" Because of this, the ability to convert <xref:System.DateTimeOffset> values to <xref:System.DateTime> values and vice versa is particularly important."},{"content":"This topic shows how to perform these conversions in a way that preserves as much time zone information as possible.","pos":[1014,1130]},{"pos":[1134,1779],"content":"[!NOTE]\nBoth the <xref:System.DateTime> and the <xref:System.DateTimeOffset> types have some limitations when representing times in time zones. With its <xref:System.DateTime.Kind%2A> property, <xref:System.DateTime> is able to reflect only Coordinated Universal Time (UTC) and the system's local time zone. <xref:System.DateTimeOffset> reflects a time's offset from UTC, but it does not reflect the actual time zone to which that offset belongs. For details about time values and support for time zones, see [Choosing Between DateTime, DateTimeOffset, TimeSpan, and TimeZoneInfo](../../../docs/standard/datetime/choosing-between-datetime.md).","leadings":["","> "],"nodes":[{"content":"Both the <xref:System.DateTime> and the <xref:System.DateTimeOffset> types have some limitations when representing times in time zones. With its <xref:System.DateTime.Kind%2A> property, <xref:System.DateTime> is able to reflect only Coordinated Universal Time (UTC) and the system's local time zone. <xref:System.DateTimeOffset> reflects a time's offset from UTC, but it does not reflect the actual time zone to which that offset belongs. For details about time values and support for time zones, see [Choosing Between DateTime, DateTimeOffset, TimeSpan, and TimeZoneInfo](../../../docs/standard/datetime/choosing-between-datetime.md).","pos":[8,643],"nodes":[{"content":"Both the <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> types have some limitations when representing times in time zones.","pos":[0,135],"source":"Both the <xref:System.DateTime> and the <xref:System.DateTimeOffset> types have some limitations when representing times in time zones."},{"content":"With its <ph id=\"ph1\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property, <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> is able to reflect only Coordinated Universal Time (UTC) and the system's local time zone.","pos":[136,299],"source":" With its <xref:System.DateTime.Kind%2A> property, <xref:System.DateTime> is able to reflect only Coordinated Universal Time (UTC) and the system's local time zone."},{"content":"<ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> reflects a time's offset from UTC, but it does not reflect the actual time zone to which that offset belongs.","pos":[300,438],"source":"<xref:System.DateTimeOffset> reflects a time's offset from UTC, but it does not reflect the actual time zone to which that offset belongs."},{"content":"For details about time values and support for time zones, see <bpt id=\"p1\">[</bpt>Choosing Between DateTime, DateTimeOffset, TimeSpan, and TimeZoneInfo<ept id=\"p1\">](../../../docs/standard/datetime/choosing-between-datetime.md)</ept>.","pos":[439,635],"source":" For details about time values and support for time zones, see [Choosing Between DateTime, DateTimeOffset, TimeSpan, and TimeZoneInfo](../../../docs/standard/datetime/choosing-between-datetime.md)."}]}]},{"pos":[1784,1827],"content":"Conversions from DateTime to DateTimeOffset","linkify":"Conversions from DateTime to DateTimeOffset","nodes":[{"content":"Conversions from DateTime to DateTimeOffset","pos":[0,43]}]},{"pos":[1829,2017],"content":"The <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> structure provides two equivalent ways to perform <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> to <ph id=\"ph3\">&lt;xref:System.DateTimeOffset&gt;</ph> conversion that are suitable for most conversions:","source":"The <xref:System.DateTimeOffset> structure provides two equivalent ways to perform <xref:System.DateTime> to <xref:System.DateTimeOffset> conversion that are suitable for most conversions:"},{"pos":[2021,2174],"content":"The <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.%23ctor%2A&gt;</ph> constructor, which creates a new <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> object based on a <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> value.","source":"The <xref:System.DateTimeOffset.%23ctor%2A> constructor, which creates a new <xref:System.DateTimeOffset> object based on a <xref:System.DateTime> value."},{"pos":[2178,2311],"content":"The implicit conversion operator, which allows you to assign a <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value to a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> object.","source":"The implicit conversion operator, which allows you to assign a <xref:System.DateTime> value to a <xref:System.DateTimeOffset> object."},{"content":"For UTC and local <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> values, the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.Offset%2A&gt;</ph> property of the resulting <ph id=\"ph3\">&lt;xref:System.DateTimeOffset&gt;</ph> value accurately reflects the UTC or local time zone offset.","pos":[2313,2520],"source":"For UTC and local <xref:System.DateTime> values, the <xref:System.DateTimeOffset.Offset%2A> property of the resulting <xref:System.DateTimeOffset> value accurately reflects the UTC or local time zone offset."},{"content":"For example, the following code converts a UTC time to its equivalent <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> value.","pos":[2521,2626],"source":" For example, the following code converts a UTC time to its equivalent <xref:System.DateTimeOffset> value."},{"content":"In this case, the offset of the <ph id=\"ph1\">`utcTime2`</ph> variable is 00:00.","pos":[3000,3061],"source":"In this case, the offset of the `utcTime2` variable is 00:00."},{"content":"Similarly, the following code converts a local time to its equivalent <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> value.","pos":[3062,3167],"source":" Similarly, the following code converts a local time to its equivalent <xref:System.DateTimeOffset> value."},{"content":"However, for <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> values whose <ph id=\"ph2\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property is <ph id=\"ph3\">&lt;xref:System.DateTimeKind.Unspecified?displayProperty=nameWithType&gt;</ph>, these two conversion methods produce a <ph id=\"ph4\">&lt;xref:System.DateTimeOffset&gt;</ph> value whose offset is that of the local time zone.","pos":[3541,3820],"source":"However, for <xref:System.DateTime> values whose <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Unspecified?displayProperty=nameWithType>, these two conversion methods produce a <xref:System.DateTimeOffset> value whose offset is that of the local time zone."},{"content":"This is shown in the following example, which is run in the U.S. Pacific Standard Time zone.","pos":[3821,3913]},{"content":"If the <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value reflects the date and time in something other than the local time zone or UTC, you can convert it to a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> value and preserve its time zone information by calling the overloaded <ph id=\"ph3\">&lt;xref:System.DateTimeOffset.%23ctor%2A&gt;</ph> constructor.","pos":[4287,4578],"source":"If the <xref:System.DateTime> value reflects the date and time in something other than the local time zone or UTC, you can convert it to a <xref:System.DateTimeOffset> value and preserve its time zone information by calling the overloaded <xref:System.DateTimeOffset.%23ctor%2A> constructor."},{"content":"For example, the following example instantiates a <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> object that reflects Central Standard Time.","pos":[4579,4701],"source":" For example, the following example instantiates a <xref:System.DateTimeOffset> object that reflects Central Standard Time."},{"content":"The second parameter to this constructor overload, a <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> object that represents the time's offset from UTC, should be retrieved by calling the <ph id=\"ph2\">&lt;xref:System.TimeZoneInfo.GetUtcOffset%28System.DateTime%29?displayProperty=nameWithType&gt;</ph> method of the time's corresponding time zone.","pos":[5075,5372],"source":"The second parameter to this constructor overload, a <xref:System.TimeSpan> object that represents the time's offset from UTC, should be retrieved by calling the <xref:System.TimeZoneInfo.GetUtcOffset%28System.DateTime%29?displayProperty=nameWithType> method of the time's corresponding time zone."},{"content":"The method's single parameter is the <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value that represents the date and time to be converted.","pos":[5373,5489],"source":" The method's single parameter is the <xref:System.DateTime> value that represents the date and time to be converted."},{"content":"If the time zone supports daylight saving time, this parameter allows the method to determine the appropriate offset for that particular date and time.","pos":[5490,5641]},{"pos":[5646,5689],"content":"Conversions from DateTimeOffset to DateTime","linkify":"Conversions from DateTimeOffset to DateTime","nodes":[{"content":"Conversions from DateTimeOffset to DateTime","pos":[0,43]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.DateTime%2A&gt;</ph> property is most commonly used to perform <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> to <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> conversion.","pos":[5691,5844],"source":"The <xref:System.DateTimeOffset.DateTime%2A> property is most commonly used to perform <xref:System.DateTimeOffset> to <xref:System.DateTime> conversion."},{"content":"However, it returns a <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value whose <ph id=\"ph2\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property is <ph id=\"ph3\">&lt;xref:System.DateTimeKind.Unspecified&gt;</ph>, as the following example illustrates.","pos":[5845,6022],"source":" However, it returns a <xref:System.DateTime> value whose <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Unspecified>, as the following example illustrates."},{"content":"This means that any information about the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> value's relationship to UTC is lost by the conversion when the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.DateTime%2A&gt;</ph> property is used.","pos":[6396,6588],"source":"This means that any information about the <xref:System.DateTimeOffset> value's relationship to UTC is lost by the conversion when the <xref:System.DateTimeOffset.DateTime%2A> property is used."},{"content":"This affects <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> values that correspond to UTC time or to the system's local time because the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.DateTime%2A&gt;</ph> structure reflects only those two time zones in its <ph id=\"ph3\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property.","pos":[6589,6841],"source":" This affects <xref:System.DateTimeOffset> values that correspond to UTC time or to the system's local time because the <xref:System.DateTimeOffset.DateTime%2A> structure reflects only those two time zones in its <xref:System.DateTime.Kind%2A> property."},{"pos":[6843,7158],"content":"To preserve as much time zone information as possible when converting a <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> to a <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> value, you can use the <ph id=\"ph3\">&lt;xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType&gt;</ph> and <ph id=\"ph4\">&lt;xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType&gt;</ph> properties.","source":"To preserve as much time zone information as possible when converting a <xref:System.DateTimeOffset> to a <xref:System.DateTime> value, you can use the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> and <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> properties."},{"pos":[7164,7185],"content":"Converting a UTC time","linkify":"Converting a UTC time","nodes":[{"content":"Converting a UTC time","pos":[0,21]}]},{"content":"To indicate that a converted <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.DateTime%2A&gt;</ph> value is the UTC time, you can retrieve the value of the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[7187,7396],"source":"To indicate that a converted <xref:System.DateTimeOffset.DateTime%2A> value is the UTC time, you can retrieve the value of the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> property."},{"content":"It differs from the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.DateTime%2A&gt;</ph> property in two ways:","pos":[7397,7479],"source":" It differs from the <xref:System.DateTimeOffset.DateTime%2A> property in two ways:"},{"pos":[7483,7605],"content":"It returns a <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value whose <ph id=\"ph2\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property is <ph id=\"ph3\">&lt;xref:System.DateTimeKind.Utc&gt;</ph>.","source":"It returns a <xref:System.DateTime> value whose <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind.Utc>."},{"pos":[7609,7771],"content":"If the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.Offset%2A&gt;</ph> property value does not equal <ph id=\"ph2\">&lt;xref:System.TimeSpan.Zero?displayProperty=nameWithType&gt;</ph>, it converts the time to UTC.","source":"If the <xref:System.DateTimeOffset.Offset%2A> property value does not equal <xref:System.TimeSpan.Zero?displayProperty=nameWithType>, it converts the time to UTC."},{"pos":[7775,8099],"content":"[!NOTE]\nIf your application requires that converted <xref:System.DateTime> values unambiguously identify a single point in time, you should consider using the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> property to handle all <xref:System.DateTimeOffset> to <xref:System.DateTime> conversions.","leadings":["","> "],"nodes":[{"content":"If your application requires that converted <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> values unambiguously identify a single point in time, you should consider using the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType&gt;</ph> property to handle all <ph id=\"ph3\">&lt;xref:System.DateTimeOffset&gt;</ph> to <ph id=\"ph4\">&lt;xref:System.DateTime&gt;</ph> conversions.","pos":[8,322],"source":"If your application requires that converted <xref:System.DateTime> values unambiguously identify a single point in time, you should consider using the <xref:System.DateTimeOffset.UtcDateTime%2A?displayProperty=nameWithType> property to handle all <xref:System.DateTimeOffset> to <xref:System.DateTime> conversions."}]},{"pos":[8101,8341],"content":"The following code uses the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.UtcDateTime%2A&gt;</ph> property to convert a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> value whose offset equals <ph id=\"ph3\">&lt;xref:System.TimeSpan.Zero?displayProperty=nameWithType&gt;</ph> to a <ph id=\"ph4\">&lt;xref:System.DateTime&gt;</ph> value.","source":"The following code uses the <xref:System.DateTimeOffset.UtcDateTime%2A> property to convert a <xref:System.DateTimeOffset> value whose offset equals <xref:System.TimeSpan.Zero?displayProperty=nameWithType> to a <xref:System.DateTime> value."},{"pos":[8715,8897],"content":"The following code uses the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.UtcDateTime%2A&gt;</ph> property to perform both a time zone conversion and a type conversion on a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> value.","source":"The following code uses the <xref:System.DateTimeOffset.UtcDateTime%2A> property to perform both a time zone conversion and a type conversion on a <xref:System.DateTimeOffset> value."},{"pos":[9279,9302],"content":"Converting a local time","linkify":"Converting a local time","nodes":[{"content":"Converting a local time","pos":[0,23]}]},{"content":"To indicate that a <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> value represents the local time, you can pass the <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> value returned by the <ph id=\"ph3\">&lt;xref:System.DateTimeOffset.DateTime%2A?displayProperty=nameWithType&gt;</ph> property to the <ph id=\"ph4\">`static`</ph> (<ph id=\"ph5\">`Shared`</ph> in Visual Basic) <ph id=\"ph6\">&lt;xref:System.DateTime.SpecifyKind%2A&gt;</ph> method.","pos":[9304,9614],"source":"To indicate that a <xref:System.DateTimeOffset> value represents the local time, you can pass the <xref:System.DateTime> value returned by the <xref:System.DateTimeOffset.DateTime%2A?displayProperty=nameWithType> property to the `static` (`Shared` in Visual Basic) <xref:System.DateTime.SpecifyKind%2A> method."},{"content":"The method returns the date and time passed to it as its first parameter, but sets the <ph id=\"ph1\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property to the value specified by its second parameter.","pos":[9615,9789],"source":" The method returns the date and time passed to it as its first parameter, but sets the <xref:System.DateTime.Kind%2A> property to the value specified by its second parameter."},{"content":"The following code uses the <ph id=\"ph1\">&lt;xref:System.DateTime.SpecifyKind%2A&gt;</ph> method when converting a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> value whose offset corresponds to that of the local time zone.","pos":[9790,9972],"source":" The following code uses the <xref:System.DateTime.SpecifyKind%2A> method when converting a <xref:System.DateTimeOffset> value whose offset corresponds to that of the local time zone."},{"content":"You can also use the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType&gt;</ph> property to convert a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> value to a local <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> value.","pos":[10346,10539],"source":"You can also use the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property to convert a <xref:System.DateTimeOffset> value to a local <xref:System.DateTime> value."},{"content":"The <ph id=\"ph1\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property of the returned <ph id=\"ph2\">&lt;xref:System.DateTime&gt;</ph> value is <ph id=\"ph3\">&lt;xref:System.DateTimeKind.Local&gt;</ph>.","pos":[10540,10665],"source":" The <xref:System.DateTime.Kind%2A> property of the returned <xref:System.DateTime> value is <xref:System.DateTimeKind.Local>."},{"content":"The following code uses the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType&gt;</ph> property when converting a <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> value whose offset corresponds to that of the local time zone.","pos":[10666,10887],"source":" The following code uses the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property when converting a <xref:System.DateTimeOffset> value whose offset corresponds to that of the local time zone."},{"content":"When you retrieve a <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> value using the <ph id=\"ph2\">&lt;xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType&gt;</ph> property, the property's <ph id=\"ph3\">`get`</ph> accessor first converts the <ph id=\"ph4\">&lt;xref:System.DateTimeOffset&gt;</ph> value to UTC, then converts it to local time by calling the <ph id=\"ph5\">&lt;xref:System.DateTimeOffset.ToLocalTime%2A&gt;</ph> method.","pos":[11266,11599],"source":"When you retrieve a <xref:System.DateTime> value using the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property, the property's `get` accessor first converts the <xref:System.DateTimeOffset> value to UTC, then converts it to local time by calling the <xref:System.DateTimeOffset.ToLocalTime%2A> method."},{"content":"This means that you can retrieve a value from the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType&gt;</ph> property to perform a time zone conversion at the same time that you perform a type conversion.","pos":[11600,11820],"source":" This means that you can retrieve a value from the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property to perform a time zone conversion at the same time that you perform a type conversion."},{"content":"It also means that the local time zone's adjustment rules are applied in performing the conversion.","pos":[11821,11920]},{"content":"The following code illustrates the use of the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType&gt;</ph> property to perform both a type and a time zone conversion.","pos":[11921,12101],"source":" The following code illustrates the use of the <xref:System.DateTimeOffset.LocalDateTime%2A?displayProperty=nameWithType> property to perform both a type and a time zone conversion."},{"pos":[12483,12518],"content":"A general-purpose conversion method","linkify":"A general-purpose conversion method","nodes":[{"content":"A general-purpose conversion method","pos":[0,35]}]},{"content":"The following example defines a method named <ph id=\"ph1\">`ConvertFromDateTimeOffset`</ph> that converts <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> values to <ph id=\"ph3\">&lt;xref:System.DateTime&gt;</ph> values.","pos":[12520,12676],"source":"The following example defines a method named `ConvertFromDateTimeOffset` that converts <xref:System.DateTimeOffset> values to <xref:System.DateTime> values."},{"content":"Based on its offset, it determines whether the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> value is a UTC time, a local time, or some other time, and defines the returned date and time value's <ph id=\"ph2\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property accordingly.","pos":[12677,12907],"source":" Based on its offset, it determines whether the <xref:System.DateTimeOffset> value is a UTC time, a local time, or some other time, and defines the returned date and time value's <xref:System.DateTime.Kind%2A> property accordingly."},{"pos":[13281,13483],"content":"The follow example calls the <ph id=\"ph1\">`ConvertFromDateTimeOffset`</ph> method to convert <ph id=\"ph2\">&lt;xref:System.DateTimeOffset&gt;</ph> values that represent a UTC time, a local time, and a time in the U.S. Central Standard Time zone.","source":"The follow example calls the `ConvertFromDateTimeOffset` method to convert <xref:System.DateTimeOffset> values that represent a UTC time, a local time, and a time in the U.S. Central Standard Time zone."},{"content":"Note that this code makes two assumptions that, depending on the application and the source of its date and time values, may not always be valid:","pos":[13857,14002]},{"content":"It assumes that a date and time value whose offset is <ph id=\"ph1\">&lt;xref:System.TimeSpan.Zero?displayProperty=nameWithType&gt;</ph> represents UTC.","pos":[14006,14132],"source":"It assumes that a date and time value whose offset is <xref:System.TimeSpan.Zero?displayProperty=nameWithType> represents UTC."},{"content":"In fact, UTC is not a time in a particular time zone, but the time in relation to which the times in the world's time zones are standardized.","pos":[14133,14274]},{"content":"Time zones can also have an offset of <ph id=\"ph1\">&lt;xref:System.TimeSpan.Zero&gt;</ph>.","pos":[14275,14341],"source":" Time zones can also have an offset of <xref:System.TimeSpan.Zero>."},{"content":"It assumes that a date and time whose offset equals that of the local time zone represents the local time zone.","pos":[14345,14456]},{"content":"Because date and time values are disassociated from their original time zone, this may not be the case; the date and time can have originated in another time zone with the same offset.","pos":[14457,14641]},{"pos":[14646,14654],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[14658,14730],"content":"<bpt id=\"p1\">[</bpt>Dates, times, and time zones<ept id=\"p1\">](../../../docs/standard/datetime/index.md)</ept>","source":"[Dates, times, and time zones](../../../docs/standard/datetime/index.md)"}]}