{"content":"---\ntitle: \"Durable Duplex | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 4e76d1a1-f3d8-4a0f-8746-4a322cdff6eb\ncaps.latest.revision: 10\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Durable Duplex\nThis sample demonstrates how to set up and configure durable duplex message exchange using the messaging activities in [!INCLUDE[wf](../../../../includes/wf-md.md)]. A durable duplex message exchange is a two-way message exchange that takes place over a long period of time. The lifetime of the message exchange may be longer than the lifetime of the communication channel and the in-memory lifetime of the service instances.  \n  \n## Sample Details  \n In this sample, two [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services implemented using [!INCLUDE[wf2](../../../../includes/wf2-md.md)] are configured to have a durable duplex message exchange. The durable duplex message exchange is composed from two one-way messages sent over MSMQ and correlated using [.NET Context Exchange](http://go.microsoft.com/fwlink/?LinkID=166059). The messages are sent using the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> messaging activities. .NET Context Exchange is use to specify the callback address on the sent messages. Both services are hosted using Windows Process Activation Services (WAS) and are configured to enable persistence of the services instances.  \n  \n The first service (Service1.xamlx) sends a request to the send service (Service2.xamlx) to do some work. Once the work is completed, Service2.xamlx sends a notification back to Service1.xamlx to indicate that the work has been completed. A workflow console application sets up the queues that the services are listening on and sends the initial Start message to activate Service1.xamlx. Once Service1.xamlx receives the notification from Service2.xamlx that the requested work has been completed, Service1.xamlx saves the result to an XML file. While waiting for the callback message, Service1.xamlx persists its instance state using the default <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior>. Service2.xamlx persists its instance state as part of completing the work requested by Service1.xamlx.  \n  \n To configure the services to use .NET Context Exchange over MSMQ, both services are configured to use a custom binding that consists of the <xref:System.ServiceModel.Channels.ContextBindingElement> and the <xref:System.ServiceModel.Channels.MsmqTransportBindingElement>. A callback address is specified with the <xref:System.ServiceModel.Channels.ContextBindingElement> and is included in a callback context header with all messages sent using a custom binding. The following code example defines the custom binding.  \n  \n```xml  \n<configuration>  \n     <system.serviceModel>  \n          …  \n          <bindings>  \n               <customBinding>  \n                    <binding name=\"netMsmqContextBinding\">  \n                         <context clientCallbackAddress=\"net.msmq://localhost/private/DurableDuplex/Service1.xamlx\"/>  \n                         <msmqTransport exactlyOnce=\"False\">  \n                              <msmqTransportSecurity msmqAuthenticationMode=\"None\" msmqProtectionLevel=\"None\"/>  \n                         </msmqTransport>  \n                    </binding>  \n               </customBinding>  \n          </bindings>  \n          …  \n     </system.serviceModel>  \n</configuration>  \n  \n```  \n  \n> [!NOTE]\n>  The binding used by this sample is not secure. When deploying your application you should configure your binding based on the security requirements of your application.  \n  \n> [!NOTE]\n>  The queues used in this sample are not transactional. For a sample that shows how to set up [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message exchanges using transaction queues, see the [MSMQ Activation](../../../../docs/framework/wcf/samples/msmq-activation.md) sample.  \n  \n The message sent by Service1.xamlx to Service2.xamlx is sent using a client endpoint configured with the address of Service2.xamlx and the custom binding defined previously. The callback from Service2.xamlx to Service1.xamlx is sent using a client endpoint with no explicitly configured address because the address is taken from the callback context sent by Service1.xamlx. The following code example defines the client endpoints.  \n  \n```xml  \n<?xml version=\"1.0\"?>  \n<configuration>  \n     <system.serviceModel>  \n          …  \n          <client>  \n               <endpoint address=\"net.msmq://localhost/private/DurableDuplex/Service2.xamlx\" binding=\"customBinding\" bindingConfiguration=\"netMsmqContextBinding\" contract=\"IDoWork\"/>  \n               <endpoint binding=\"customBinding\" bindingConfiguration=\"netMsmqContextBinding\" contract=\"INotify\"/>  \n          </client>  \n          …  \n     </system.serviceModel>  \n</configuration>  \n  \n```  \n  \n The following code example exposes endpoints using this custom binding by changing the default protocol mapping for net.msmq base addresses to use this custom binding.  \n  \n```  \n<configuration>  \n     <system.serviceModel>  \n          <protocolMapping>  \n               <add scheme=\"net.msmq\" binding=\"customBinding\" bindingConfiguration=\"netMsmqContextBinding\"/>  \n          </protocolMapping>  \n          …  \n     </system.serviceModel>  \n</configuration>  \n  \n```  \n  \n The following code example enables persistence for both services by adding the <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior> behavior to both services and specifying the connection string for the persistence database.  \n  \n```xml  \n<?xml version=\"1.0\"?>  \n<configuration>  \n    <system.serviceModel>  \n          …  \n          <behaviors>  \n               <serviceBehaviors>  \n                    <behavior>  \n                         <serviceDebug includeExceptionDetailInFaults=\"True\"/>  \n                         <serviceMetadata httpGetEnabled=\"True\"/>  \n                         <sqlWorkflowInstanceStore connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=DefaultSampleStore;Integrated Security=True\"/>  \n                    </behavior>  \n               </serviceBehaviors>  \n          </behaviors>  \n     </system.serviceModel>  \n</configuration>  \n  \n```  \n  \n## System Requirements  \n This sample requires the following components.  \n  \n1.  Internet Information Services.  \n  \n2.  Internet Information Services -> IIS 6.0 Management Compatibility -> IIS Metabase and IIS 6.0 configuration compatibility.  \n  \n3.  World Wide Web Services -> Application Development Features -> ASP.NET.  \n  \n4.  Microsoft Message Queues (MSMQ) Server.  \n  \n#### To use this sample  \n  \n1.  Set up the persistence database and the results directory.  \n  \n    1.  Open a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt.  \n  \n    2.  Navigate to the folder for this sample and run Setup.cmd.  \n  \n2.  Set up the virtual application.  \n  \n    1.  From a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt, register ASP.NET by running the following command.  \n  \n        ```  \n        aspnet_regiis -i  \n        ```  \n  \n    2.  Run [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] with administrator permissions by right-clicking [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] and selecting **Run as administrator**.  \n  \n    3.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the DurableDuplex.sln file.  \n  \n3.  Set up the service queues.  \n  \n    1.  To run the DurableDuplex client, press F5.  \n  \n    2.  Open the **Computer Management** console by running `Compmgmt.msc` from a command prompt.  \n  \n    3.  Expand **Service and Applications**, **Message Queuing**. **Private Queues**.  \n  \n    4.  Right-click the durableduplex/service1.xamlx and durableduplex/service2.xamlx queues and select **Properties**.  \n  \n    5.  Select the **Security** tab and allow **Everyone Receive Message**, **Peek Message** and **Send Message** permissions for both queues.  \n  \n    6.  Open Internet Information Services (IIS) Manager.  \n  \n    7.  Browse to **Server**, **Sites**, **Default Web site**, **private**, **Durable Duplex** and select **Advanced Options**.  \n  \n    8.  Change the **Enabled Protocols** to **http,net.msmq**.  \n  \n4.  Run the sample.  \n  \n    1.  Browse to http://localhost/private/durableduplex/service1.xamlx and http://localhost/private/durableduplex/service2.xamlx to ensure that both services are running.  \n  \n    2.  Press F5 to run DurableDuplexClient.  \n  \n         When the durable duplex message exchange completes a result.xml file is saved to the C:\\Inbox folder and contains the result of the message exchange.  \n  \n#### To cleanup (Optional)  \n  \n1.  Run Cleanup.cmd.  \n  \n    1.  Open a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt.  \n  \n    2.  Navigate to the folder for this sample and run Cleanup.cmd.  \n  \n2.  Remove the virtual application for the services.  \n  \n    1.  Open the Internet Information Services (IIS) Manager by running `Inetmgr.exe` from a command prompt.  \n  \n    2.  Browse to the default Web site and remove the **private** virtual directory.  \n  \n3.  Remove the queues set up for this sample.  \n  \n    1.  Open the Computer Management console by running `Compmgmt.msc` from a command prompt.  \n  \n    2.  Expand **Service and Applications**, **Message Queuing**, **Private Queues**.  \n  \n    3.  Delete the durableduplex/service1.xamlx and durableduplex/service2.xamlx queues.  \n  \n4.  Remove the C:\\Inbox directory.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Services\\DurableDuplex`  \n  \n## See Also","nodes":[{"pos":[12,43],"content":"Durable Duplex | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Durable Duplex | Microsoft Docs","pos":[0,31]}]},{"pos":[309,323],"content":"Durable Duplex","linkify":"Durable Duplex","nodes":[{"content":"Durable Duplex","pos":[0,14]}]},{"content":"This sample demonstrates how to set up and configure durable duplex message exchange using the messaging activities in <ph id=\"ph1\">[!INCLUDE[wf](../../../../includes/wf-md.md)]</ph>.","pos":[324,489],"source":"This sample demonstrates how to set up and configure durable duplex message exchange using the messaging activities in [!INCLUDE[wf](../../../../includes/wf-md.md)]."},{"content":"A durable duplex message exchange is a two-way message exchange that takes place over a long period of time.","pos":[490,598]},{"content":"The lifetime of the message exchange may be longer than the lifetime of the communication channel and the in-memory lifetime of the service instances.","pos":[599,749]},{"pos":[758,772],"content":"Sample Details","linkify":"Sample Details","nodes":[{"content":"Sample Details","pos":[0,14]}]},{"content":"In this sample, two <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> services implemented using <ph id=\"ph2\">[!INCLUDE[wf2](../../../../includes/wf2-md.md)]</ph> are configured to have a durable duplex message exchange.","pos":[776,984],"source":"In this sample, two [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services implemented using [!INCLUDE[wf2](../../../../includes/wf2-md.md)] are configured to have a durable duplex message exchange."},{"content":"The durable duplex message exchange is composed from two one-way messages sent over MSMQ and correlated using <bpt id=\"p1\">[</bpt>.NET Context Exchange<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkID=166059)</ept>.","pos":[985,1166],"source":" The durable duplex message exchange is composed from two one-way messages sent over MSMQ and correlated using [.NET Context Exchange](http://go.microsoft.com/fwlink/?LinkID=166059)."},{"content":"The messages are sent using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> messaging activities.","pos":[1167,1313],"source":" The messages are sent using the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> messaging activities."},{"content":".NET Context Exchange is use to specify the callback address on the sent messages.","pos":[1314,1396]},{"content":"Both services are hosted using Windows Process Activation Services (WAS) and are configured to enable persistence of the services instances.","pos":[1397,1537]},{"content":"The first service (Service1.xamlx) sends a request to the send service (Service2.xamlx) to do some work.","pos":[1544,1648]},{"content":"Once the work is completed, Service2.xamlx sends a notification back to Service1.xamlx to indicate that the work has been completed.","pos":[1649,1781]},{"content":"A workflow console application sets up the queues that the services are listening on and sends the initial Start message to activate Service1.xamlx.","pos":[1782,1930]},{"content":"Once Service1.xamlx receives the notification from Service2.xamlx that the requested work has been completed, Service1.xamlx saves the result to an XML file.","pos":[1931,2088]},{"content":"While waiting for the callback message, Service1.xamlx persists its instance state using the default <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior&gt;</ph>.","pos":[2089,2261],"source":" While waiting for the callback message, Service1.xamlx persists its instance state using the default <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior>."},{"content":"Service2.xamlx persists its instance state as part of completing the work requested by Service1.xamlx.","pos":[2262,2364]},{"content":"To configure the services to use .NET Context Exchange over MSMQ, both services are configured to use a custom binding that consists of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.ContextBindingElement&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.MsmqTransportBindingElement&gt;</ph>.","pos":[2371,2641],"source":"To configure the services to use .NET Context Exchange over MSMQ, both services are configured to use a custom binding that consists of the <xref:System.ServiceModel.Channels.ContextBindingElement> and the <xref:System.ServiceModel.Channels.MsmqTransportBindingElement>."},{"content":"A callback address is specified with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.ContextBindingElement&gt;</ph> and is included in a callback context header with all messages sent using a custom binding.","pos":[2642,2832],"source":" A callback address is specified with the <xref:System.ServiceModel.Channels.ContextBindingElement> and is included in a callback context header with all messages sent using a custom binding."},{"content":"The following code example defines the custom binding.","pos":[2833,2887]},{"pos":[3589,3768],"content":"[!NOTE]\n The binding used by this sample is not secure. When deploying your application you should configure your binding based on the security requirements of your application.","leadings":["","> "],"nodes":[{"content":" The binding used by this sample is not secure. When deploying your application you should configure your binding based on the security requirements of your application.","pos":[8,177],"nodes":[{"content":"The binding used by this sample is not secure.","pos":[1,47]},{"content":"When deploying your application you should configure your binding based on the security requirements of your application.","pos":[48,169]}]}]},{"pos":[3776,4071],"content":"[!NOTE]\n The queues used in this sample are not transactional. For a sample that shows how to set up [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message exchanges using transaction queues, see the [MSMQ Activation](../../../../docs/framework/wcf/samples/msmq-activation.md) sample.","leadings":["","> "],"nodes":[{"content":" The queues used in this sample are not transactional. For a sample that shows how to set up [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message exchanges using transaction queues, see the [MSMQ Activation](../../../../docs/framework/wcf/samples/msmq-activation.md) sample.","pos":[8,293],"nodes":[{"content":"The queues used in this sample are not transactional.","pos":[1,54]},{"content":"For a sample that shows how to set up <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> message exchanges using transaction queues, see the <bpt id=\"p1\">[</bpt>MSMQ Activation<ept id=\"p1\">](../../../../docs/framework/wcf/samples/msmq-activation.md)</ept> sample.","pos":[55,285],"source":" For a sample that shows how to set up [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message exchanges using transaction queues, see the [MSMQ Activation](../../../../docs/framework/wcf/samples/msmq-activation.md) sample."}]}]},{"content":"The message sent by Service1.xamlx to Service2.xamlx is sent using a client endpoint configured with the address of Service2.xamlx and the custom binding defined previously.","pos":[4078,4251]},{"content":"The callback from Service2.xamlx to Service1.xamlx is sent using a client endpoint with no explicitly configured address because the address is taken from the callback context sent by Service1.xamlx.","pos":[4252,4451]},{"content":"The following code example defines the client endpoints.","pos":[4452,4508]},{"content":"The following code example exposes endpoints using this custom binding by changing the default protocol mapping for net.msmq base addresses to use this custom binding.","pos":[5029,5196]},{"content":"The following code example enables persistence for both services by adding the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior&gt;</ph> behavior to both services and specifying the connection string for the persistence database.","pos":[5503,5757],"source":"The following code example enables persistence for both services by adding the <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior> behavior to both services and specifying the connection string for the persistence database."},{"pos":[6417,6436],"content":"System Requirements","linkify":"System Requirements","nodes":[{"content":"System Requirements","pos":[0,19]}]},{"content":"This sample requires the following components.","pos":[6440,6486]},{"content":"Internet Information Services.","pos":[6496,6526]},{"content":"Internet Information Services -&gt; IIS 6.0 Management Compatibility -&gt; IIS Metabase and IIS 6.0 configuration compatibility.","pos":[6536,6658],"source":"Internet Information Services -> IIS 6.0 Management Compatibility -> IIS Metabase and IIS 6.0 configuration compatibility."},{"content":"World Wide Web Services -&gt; Application Development Features -&gt; ASP.NET.","pos":[6668,6739],"source":"World Wide Web Services -> Application Development Features -> ASP.NET."},{"content":"Microsoft Message Queues (MSMQ) Server.","pos":[6749,6788]},{"pos":[6799,6817],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"content":"Set up the persistence database and the results directory.","pos":[6827,6885]},{"pos":[6899,6975],"content":"Open a <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> command prompt.","source":"Open a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt."},{"content":"Navigate to the folder for this sample and run Setup.cmd.","pos":[6989,7046]},{"content":"Set up the virtual application.","pos":[7056,7087]},{"pos":[7101,7228],"content":"From a <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> command prompt, register ASP.NET by running the following command.","source":"From a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt, register ASP.NET by running the following command."},{"pos":[7300,7500],"content":"Run <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> with administrator permissions by right-clicking <ph id=\"ph2\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> and selecting <bpt id=\"p1\">**</bpt>Run as administrator<ept id=\"p1\">**</ept>.","source":"Run [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] with administrator permissions by right-clicking [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] and selecting **Run as administrator**."},{"pos":[7514,7607],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the DurableDuplex.sln file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the DurableDuplex.sln file."},{"content":"Set up the service queues.","pos":[7617,7643]},{"content":"To run the DurableDuplex client, press F5.","pos":[7657,7699]},{"pos":[7713,7802],"content":"Open the <bpt id=\"p1\">**</bpt>Computer Management<ept id=\"p1\">**</ept> console by running <ph id=\"ph1\">`Compmgmt.msc`</ph> from a command prompt.","source":"Open the **Computer Management** console by running `Compmgmt.msc` from a command prompt."},{"content":"Expand <bpt id=\"p1\">**</bpt>Service and Applications<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Message Queuing<ept id=\"p2\">**</ept>.","pos":[7816,7873],"source":"Expand **Service and Applications**, **Message Queuing**."},{"content":"<bpt id=\"p1\">**</bpt>Private Queues<ept id=\"p1\">**</ept>.","pos":[7874,7893],"source":"**Private Queues**."},{"pos":[7907,8018],"content":"Right-click the durableduplex/service1.xamlx and durableduplex/service2.xamlx queues and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","source":"Right-click the durableduplex/service1.xamlx and durableduplex/service2.xamlx queues and select **Properties**."},{"pos":[8032,8166],"content":"Select the <bpt id=\"p1\">**</bpt>Security<ept id=\"p1\">**</ept> tab and allow <bpt id=\"p2\">**</bpt>Everyone Receive Message<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Peek Message<ept id=\"p3\">**</ept> and <bpt id=\"p4\">**</bpt>Send Message<ept id=\"p4\">**</ept> permissions for both queues.","source":"Select the **Security** tab and allow **Everyone Receive Message**, **Peek Message** and **Send Message** permissions for both queues."},{"content":"Open Internet Information Services (IIS) Manager.","pos":[8180,8229]},{"pos":[8243,8362],"content":"Browse to <bpt id=\"p1\">**</bpt>Server<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Sites<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Default Web site<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>private<ept id=\"p4\">**</ept>, <bpt id=\"p5\">**</bpt>Durable Duplex<ept id=\"p5\">**</ept> and select <bpt id=\"p6\">**</bpt>Advanced Options<ept id=\"p6\">**</ept>.","source":"Browse to **Server**, **Sites**, **Default Web site**, **private**, **Durable Duplex** and select **Advanced Options**."},{"pos":[8376,8430],"content":"Change the <bpt id=\"p1\">**</bpt>Enabled Protocols<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>http,net.msmq<ept id=\"p2\">**</ept>.","source":"Change the **Enabled Protocols** to **http,net.msmq**."},{"content":"Run the sample.","pos":[8440,8455]},{"content":"Browse to http://localhost/private/durableduplex/service1.xamlx and http://localhost/private/durableduplex/service2.xamlx to ensure that both services are running.","pos":[8469,8632]},{"content":"Press F5 to run DurableDuplexClient.","pos":[8646,8682]},{"content":"When the durable duplex message exchange completes a result.xml file is saved to the C:\\Inbox folder and contains the result of the message exchange.","pos":[8697,8846]},{"pos":[8857,8878],"content":"To cleanup (Optional)","linkify":"To cleanup (Optional)","nodes":[{"content":"To cleanup (Optional)","pos":[0,21]}]},{"content":"Run Cleanup.cmd.","pos":[8888,8904]},{"pos":[8918,8994],"content":"Open a <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> command prompt.","source":"Open a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt."},{"content":"Navigate to the folder for this sample and run Cleanup.cmd.","pos":[9008,9067]},{"content":"Remove the virtual application for the services.","pos":[9077,9125]},{"pos":[9139,9239],"content":"Open the Internet Information Services (IIS) Manager by running <ph id=\"ph1\">`Inetmgr.exe`</ph> from a command prompt.","source":"Open the Internet Information Services (IIS) Manager by running `Inetmgr.exe` from a command prompt."},{"pos":[9253,9329],"content":"Browse to the default Web site and remove the <bpt id=\"p1\">**</bpt>private<ept id=\"p1\">**</ept> virtual directory.","source":"Browse to the default Web site and remove the **private** virtual directory."},{"content":"Remove the queues set up for this sample.","pos":[9339,9380]},{"pos":[9394,9479],"content":"Open the Computer Management console by running <ph id=\"ph1\">`Compmgmt.msc`</ph> from a command prompt.","source":"Open the Computer Management console by running `Compmgmt.msc` from a command prompt."},{"pos":[9493,9570],"content":"Expand <bpt id=\"p1\">**</bpt>Service and Applications<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Message Queuing<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Private Queues<ept id=\"p3\">**</ept>.","source":"Expand **Service and Applications**, **Message Queuing**, **Private Queues**."},{"content":"Delete the durableduplex/service1.xamlx and durableduplex/service2.xamlx queues.","pos":[9584,9664]},{"content":"Remove the C:\\Inbox directory.","pos":[9674,9704]},{"pos":[9712,9844],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[9898,10224],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[10225,10275]},{"pos":[10359,10367],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}