{"content":"---\ntitle: \"How to: Define a Service Operation (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"Service Operations [WCF Data Services]\"\n  - \"WCF Data Services, service operations\"\nms.assetid: dfcd3cb1-2f07-4d0b-b16a-6b056c4f45fa\n---\n# How to: Define a Service Operation (WCF Data Services)\n[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] expose methods that are defined on the server as service operations. Service operations allow a data service to provide access through a URI to a method that is defined on the server. To define a service operation, apply the [`WebGet]` or `[WebInvoke]` attribute to the method. To support query operators, the service operation must return an <xref:System.Linq.IQueryable%601> instance. Service operations may access the underlying data source through the <xref:System.Data.Services.DataService%601.CurrentDataSource%2A> property on the <xref:System.Data.Services.DataService%601>. For more information, see [Service Operations](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md).  \n  \n The example in this topic defines a service operation named `GetOrdersByCity` that returns a filtered <xref:System.Linq.IQueryable%601> instance of `Orders` and related `Order_Details` objects. The example accesses the <xref:System.Data.Objects.ObjectContext> instance that is the data source for the Northwind sample data service. This service is created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md).  \n  \n### To define a service operation in the Northwind data service  \n  \n1.  In the Northwind data service project, open the Northwind.svc file.  \n  \n2.  In the `Northwind` class, define a service operation method named `GetOrdersByCity` as follows:  \n  \n     [!code-csharp[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationdef)]\n     [!code-vb[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationdef)]  \n  \n3.  In the `InitializeService` method of the `Northwind` class, add the following code to enable access to the service operation:  \n  \n     [!code-csharp[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationconfig)]\n     [!code-vb[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationconfig)]  \n  \n### To query the GetOrdersByCity service operation  \n  \n-   In a Web browser, enter one of the following URIs to invoke the service operation that is defined in the following example:  \n  \n    -   `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'`  \n  \n    -   `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'&$top=2`  \n  \n    -   `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'&$expand=Order_Details&$orderby=RequiredDate desc`  \n  \n## Example  \n The following example implements a service operation named `GetOrderByCity` on the Northwind data service. This operation uses the ADO.NET Entity Framework to return a set of `Orders` and related `Order_Details` objects as an <xref:System.Linq.IQueryable%601> instance based on the provided city name.  \n  \n> [!NOTE]\n>  Query operators are supported on this service operation endpoint because the method returns an <xref:System.Linq.IQueryable%601> instance.  \n  \n [!code-csharp[Astoria Northwind Service#ServiceOperation](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperation)]\n [!code-vb[Astoria Northwind Service#ServiceOperation](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperation)]  \n  \n## See also\n\n- [Defining WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)\n","nodes":[{"pos":[4,283],"embed":true,"restype":"x-metadata","content":"title: \"How to: Define a Service Operation (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"Service Operations [WCF Data Services]\"\n  - \"WCF Data Services, service operations\"\nms.assetid: dfcd3cb1-2f07-4d0b-b16a-6b056c4f45fa","nodes":[{"content":"How to: Define a Service Operation (WCF Data Services)","nodes":[{"pos":[0,54],"content":"How to: Define a Service Operation (WCF Data Services)","nodes":[{"content":"How to: Define a Service Operation (WCF Data Services)","pos":[0,54]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[290,344],"content":"How to: Define a Service Operation (WCF Data Services)","linkify":"How to: Define a Service Operation (WCF Data Services)","nodes":[{"content":"How to: Define a Service Operation (WCF Data Services)","pos":[0,54]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> expose methods that are defined on the server as service operations.","pos":[345,473],"source":"[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] expose methods that are defined on the server as service operations."},{"content":"Service operations allow a data service to provide access through a URI to a method that is defined on the server.","pos":[474,588]},{"content":"To define a service operation, apply the [<ph id=\"ph1\">`WebGet]`</ph> or <ph id=\"ph2\">`[WebInvoke]`</ph> attribute to the method.","pos":[589,682],"source":" To define a service operation, apply the [`WebGet]` or `[WebInvoke]` attribute to the method."},{"content":"To support query operators, the service operation must return an <ph id=\"ph1\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance.","pos":[683,791],"source":" To support query operators, the service operation must return an <xref:System.Linq.IQueryable%601> instance."},{"content":"Service operations may access the underlying data source through the <ph id=\"ph1\">&lt;xref:System.Data.Services.DataService%601.CurrentDataSource%2A&gt;</ph> property on the <ph id=\"ph2\">&lt;xref:System.Data.Services.DataService%601&gt;</ph>.","pos":[792,986],"source":" Service operations may access the underlying data source through the <xref:System.Data.Services.DataService%601.CurrentDataSource%2A> property on the <xref:System.Data.Services.DataService%601>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Service Operations<ept id=\"p1\">](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md)</ept>.","pos":[987,1111],"source":" For more information, see [Service Operations](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md)."},{"content":"The example in this topic defines a service operation named <ph id=\"ph1\">`GetOrdersByCity`</ph> that returns a filtered <ph id=\"ph2\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance of <ph id=\"ph3\">`Orders`</ph> and related <ph id=\"ph4\">`Order_Details`</ph> objects.","pos":[1118,1311],"source":"The example in this topic defines a service operation named `GetOrdersByCity` that returns a filtered <xref:System.Linq.IQueryable%601> instance of `Orders` and related `Order_Details` objects."},{"content":"The example accesses the <ph id=\"ph1\">&lt;xref:System.Data.Objects.ObjectContext&gt;</ph> instance that is the data source for the Northwind sample data service.","pos":[1312,1449],"source":" The example accesses the <xref:System.Data.Objects.ObjectContext> instance that is the data source for the Northwind sample data service."},{"content":"This service is created when you complete the <bpt id=\"p1\">[</bpt>WCF Data Services quickstart<ept id=\"p1\">](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)</ept>.","pos":[1450,1596],"source":" This service is created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)."},{"pos":[1606,1665],"content":"To define a service operation in the Northwind data service","linkify":"To define a service operation in the Northwind data service","nodes":[{"content":"To define a service operation in the Northwind data service","pos":[0,59]}]},{"content":"In the Northwind data service project, open the Northwind.svc file.","pos":[1675,1742]},{"pos":[1752,1847],"content":"In the <ph id=\"ph1\">`Northwind`</ph> class, define a service operation method named <ph id=\"ph2\">`GetOrdersByCity`</ph> as follows:","source":"In the `Northwind` class, define a service operation method named `GetOrdersByCity` as follows:"},{"pos":[1858,2229],"content":"[!code-csharp[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationdef)]\n [!code-vb[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationdef)]","leadings":["","    "],"nodes":[]},{"pos":[2239,2364],"content":"In the <ph id=\"ph1\">`InitializeService`</ph> method of the <ph id=\"ph2\">`Northwind`</ph> class, add the following code to enable access to the service operation:","source":"In the `InitializeService` method of the `Northwind` class, add the following code to enable access to the service operation:"},{"pos":[2375,2758],"content":"[!code-csharp[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationconfig)]\n [!code-vb[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationconfig)]","leadings":["","    "],"nodes":[]},{"pos":[2768,2814],"content":"To query the GetOrdersByCity service operation","linkify":"To query the GetOrdersByCity service operation","nodes":[{"content":"To query the GetOrdersByCity service operation","pos":[0,46]}]},{"content":"In a Web browser, enter one of the following URIs to invoke the service operation that is defined in the following example:","pos":[2824,2947]},{"pos":[3258,3265],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example implements a service operation named <ph id=\"ph1\">`GetOrderByCity`</ph> on the Northwind data service.","pos":[3269,3375],"source":"The following example implements a service operation named `GetOrderByCity` on the Northwind data service."},{"content":"This operation uses the ADO.NET Entity Framework to return a set of <ph id=\"ph1\">`Orders`</ph> and related <ph id=\"ph2\">`Order_Details`</ph> objects as an <ph id=\"ph3\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance based on the provided city name.","pos":[3376,3570],"source":" This operation uses the ADO.NET Entity Framework to return a set of `Orders` and related `Order_Details` objects as an <xref:System.Linq.IQueryable%601> instance based on the provided city name."},{"pos":[3578,3727],"content":"[!NOTE]\n Query operators are supported on this service operation endpoint because the method returns an <xref:System.Linq.IQueryable%601> instance.","leadings":["","> "],"nodes":[{"content":"Query operators are supported on this service operation endpoint because the method returns an <ph id=\"ph1\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance.","pos":[9,147],"source":"Query operators are supported on this service operation endpoint because the method returns an <xref:System.Linq.IQueryable%601> instance."}]},{"pos":[4098,4106],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4110,4205],"content":"<bpt id=\"p1\">[</bpt>Defining WCF Data Services<ept id=\"p1\">](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)</ept>","source":"[Defining WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)"}]}