{"content":"---\ntitle: \"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"queues [WCF], differences in operating systems\"\nms.assetid: aa809d93-d0a3-4ae6-a726-d015cca37c04\n---\n# Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP\nThis topic summarizes the differences in the Windows Communication Foundation (WCF) queues feature between [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].  \n  \n## Application-Specific Dead-Letter Queue  \n Queued messages can remain in the queue indefinitely if the receiving application does not read them in a timely fashion. This behavior is not advisable if the messages are time-sensitive. Time-sensitive messages have a `TimeToLive` property set in the queued binding. This property indicates how long the messages can be in the queue before they expire. Expired messages are sent to a special queue called the dead-letter queue. A message can also end up in a dead-letter queue for other reasons, such as exceeding a queue quota or experiencing an authentication failure.  \n  \n Typically, a single system-wide dead-letter queue exists for all queued applications that share a queue manager. A dead-letter queue for each application enables better isolation between queued applications that share a queue manager by allowing these applications to specify their own application-specific dead-letter queue. An application that shares a dead-letter queue with other applications has to browse the queue to find messages that are applicable to it. With an application-specific dead-letter queue, the application can be assured that all messages in its dead-letter queue are applicable to it.  \n  \n [!INCLUDE[wv](../../../../includes/wv-md.md)] provides for application-specific dead-letter queues. Application-specific dead-letter queues are not available in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)], and applications must use the system-wide dead-letter queue.  \n  \n## Poison-Message Handling  \n A poison message is a message that has exceeded the maximum number of delivery attempts to the receiving application. This situation can arise when an application that reads a message from a transactional queue cannot process the message immediately because of errors. If the application aborts the transaction in which the queued message was received, it returns the message to the queue. The application then tries to retrieve the message again in a new transaction. If the problem that causes the error is not corrected, the receiving application can get stuck in a loop receiving and aborting the same message until it exceeds the maximum number of delivery attempts, and a poison message results.  \n  \n The key differences between Message Queuing (MSMQ) on [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] that are relevant to poison handling include the following:  \n  \n-   MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports subqueues, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not support subqueues. Subqueues are used in poison-message handling. The retry queues and the poison queue are subqueues to the application queue that is created based on the poison-message handling settings. The `MaxRetryCycles` dictates how many retry subqueues to create. Therefore, when running on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], `MaxRetryCycles` are ignored and `ReceiveErrorHandling.Move` is not allowed.  \n  \n-   MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports negative acknowledgment, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not. A negative acknowledgment from the receiving queue manager causes the sending queue manager to place the rejected message in the dead-letter queue. As such, `ReceiveErrorHandling.Reject` is not allowed with [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].  \n  \n-   MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports a message property that keeps count of the number of times message delivery is attempted. This abort count property is not available on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)]. WCF maintains the abort count in memory, so it is possible that this property may not contain an accurate value when the same message is read by more than one WCF service in a Web farm.  \n  \n## Remote Transactional Read  \n MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)] supports remote transactional reads. This allows an application that is reading from a queue to be hosted on a computer that is different from the computer on which the queue is hosted. This ensures the ability to have a farm of services reading from a central queue, which increases the overall throughput of the system. It also ensures that if a failure occurs when reading and processing the message, the transaction rolls back and the message remains in the queue for later processing.  \n  \n## See also\n\n- [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)\n- [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)\n","nodes":[{"pos":[4,244],"embed":true,"restype":"x-metadata","content":"title: \"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"queues [WCF], differences in operating systems\"\nms.assetid: aa809d93-d0a3-4ae6-a726-d015cca37c04","nodes":[{"content":"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP","nodes":[{"pos":[0,85],"content":"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP","nodes":[{"content":"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP","pos":[0,85]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[251,336],"content":"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP","linkify":"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP","nodes":[{"content":"Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP","pos":[0,85]}]},{"pos":[337,598],"content":"This topic summarizes the differences in the Windows Communication Foundation (WCF) queues feature between <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>, <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph>, and <ph id=\"ph3\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>.","source":"This topic summarizes the differences in the Windows Communication Foundation (WCF) queues feature between [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)]."},{"pos":[607,645],"content":"Application-Specific Dead-Letter Queue","linkify":"Application-Specific Dead-Letter Queue","nodes":[{"content":"Application-Specific Dead-Letter Queue","pos":[0,38]}]},{"content":"Queued messages can remain in the queue indefinitely if the receiving application does not read them in a timely fashion.","pos":[649,770]},{"content":"This behavior is not advisable if the messages are time-sensitive.","pos":[771,837]},{"content":"Time-sensitive messages have a <ph id=\"ph1\">`TimeToLive`</ph> property set in the queued binding.","pos":[838,917],"source":" Time-sensitive messages have a `TimeToLive` property set in the queued binding."},{"content":"This property indicates how long the messages can be in the queue before they expire.","pos":[918,1003]},{"content":"Expired messages are sent to a special queue called the dead-letter queue.","pos":[1004,1078]},{"content":"A message can also end up in a dead-letter queue for other reasons, such as exceeding a queue quota or experiencing an authentication failure.","pos":[1079,1221]},{"content":"Typically, a single system-wide dead-letter queue exists for all queued applications that share a queue manager.","pos":[1228,1340]},{"content":"A dead-letter queue for each application enables better isolation between queued applications that share a queue manager by allowing these applications to specify their own application-specific dead-letter queue.","pos":[1341,1553]},{"content":"An application that shares a dead-letter queue with other applications has to browse the queue to find messages that are applicable to it.","pos":[1554,1692]},{"content":"With an application-specific dead-letter queue, the application can be assured that all messages in its dead-letter queue are applicable to it.","pos":[1693,1836]},{"content":"<ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> provides for application-specific dead-letter queues.","pos":[1843,1942],"source":"[!INCLUDE[wv](../../../../includes/wv-md.md)] provides for application-specific dead-letter queues."},{"content":"Application-specific dead-letter queues are not available in <ph id=\"ph1\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>, and applications must use the system-wide dead-letter queue.","pos":[1943,2171],"source":" Application-specific dead-letter queues are not available in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)], and applications must use the system-wide dead-letter queue."},{"pos":[2180,2203],"content":"Poison-Message Handling","linkify":"Poison-Message Handling","nodes":[{"content":"Poison-Message Handling","pos":[0,23]}]},{"content":"A poison message is a message that has exceeded the maximum number of delivery attempts to the receiving application.","pos":[2207,2324]},{"content":"This situation can arise when an application that reads a message from a transactional queue cannot process the message immediately because of errors.","pos":[2325,2475]},{"content":"If the application aborts the transaction in which the queued message was received, it returns the message to the queue.","pos":[2476,2596]},{"content":"The application then tries to retrieve the message again in a new transaction.","pos":[2597,2675]},{"content":"If the problem that causes the error is not corrected, the receiving application can get stuck in a loop receiving and aborting the same message until it exceeds the maximum number of delivery attempts, and a poison message results.","pos":[2676,2908]},{"pos":[2915,3182],"content":"The key differences between Message Queuing (MSMQ) on <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>, <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph>, and <ph id=\"ph3\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph> that are relevant to poison handling include the following:","source":"The key differences between Message Queuing (MSMQ) on [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] that are relevant to poison handling include the following:"},{"content":"MSMQ in <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> supports subqueues, while <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> and <ph id=\"ph3\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph> do not support subqueues.","pos":[3192,3403],"source":"MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports subqueues, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not support subqueues."},{"content":"Subqueues are used in poison-message handling.","pos":[3404,3450]},{"content":"The retry queues and the poison queue are subqueues to the application queue that is created based on the poison-message handling settings.","pos":[3451,3590]},{"content":"The <ph id=\"ph1\">`MaxRetryCycles`</ph> dictates how many retry subqueues to create.","pos":[3591,3656],"source":" The `MaxRetryCycles` dictates how many retry subqueues to create."},{"content":"Therefore, when running on <ph id=\"ph1\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> or <ph id=\"ph2\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>, <ph id=\"ph3\">`MaxRetryCycles`</ph> are ignored and <ph id=\"ph4\">`ReceiveErrorHandling.Move`</ph> is not allowed.","pos":[3657,3866],"source":" Therefore, when running on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], `MaxRetryCycles` are ignored and `ReceiveErrorHandling.Move` is not allowed."},{"content":"MSMQ in <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> supports negative acknowledgment, while <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> and <ph id=\"ph3\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph> do not.","pos":[3876,4083],"source":"MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports negative acknowledgment, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not."},{"content":"A negative acknowledgment from the receiving queue manager causes the sending queue manager to place the rejected message in the dead-letter queue.","pos":[4084,4231]},{"content":"As such, <ph id=\"ph1\">`ReceiveErrorHandling.Reject`</ph> is not allowed with <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> and <ph id=\"ph3\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>.","pos":[4232,4397],"source":" As such, `ReceiveErrorHandling.Reject` is not allowed with [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)]."},{"content":"MSMQ in <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> supports a message property that keeps count of the number of times message delivery is attempted.","pos":[4407,4559],"source":"MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports a message property that keeps count of the number of times message delivery is attempted."},{"content":"This abort count property is not available on <ph id=\"ph1\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph>.","pos":[4560,4712],"source":" This abort count property is not available on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)]."},{"content":"WCF maintains the abort count in memory, so it is possible that this property may not contain an accurate value when the same message is read by more than one WCF service in a Web farm.","pos":[4713,4898]},{"pos":[4907,4932],"content":"Remote Transactional Read","linkify":"Remote Transactional Read","nodes":[{"content":"Remote Transactional Read","pos":[0,25]}]},{"content":"MSMQ on <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> supports remote transactional reads.","pos":[4936,5026],"source":"MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)] supports remote transactional reads."},{"content":"This allows an application that is reading from a queue to be hosted on a computer that is different from the computer on which the queue is hosted.","pos":[5027,5175]},{"content":"This ensures the ability to have a farm of services reading from a central queue, which increases the overall throughput of the system.","pos":[5176,5311]},{"content":"It also ensures that if a failure occurs when reading and processing the message, the transaction rolls back and the message remains in the queue for later processing.","pos":[5312,5479]},{"pos":[5488,5496],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5500,5674],"content":"<bpt id=\"p1\">[</bpt>Using Dead-Letter Queues to Handle Message Transfer Failures<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</ept>","source":"[Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)"},{"pos":[5677,5777],"content":"<bpt id=\"p1\">[</bpt>Poison Message Handling<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)</ept>","source":"[Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)"}]}