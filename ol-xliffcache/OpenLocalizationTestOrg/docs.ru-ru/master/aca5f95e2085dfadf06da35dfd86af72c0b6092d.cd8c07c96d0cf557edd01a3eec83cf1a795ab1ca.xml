{"content":"---\ntitle: \"Diagnosing Transactional Applications\"\nms.date: \"03/30/2017\"\nms.assetid: 4a993492-1088-4d10-871b-0c09916af05f\n---\n# Diagnosing Transactional Applications\nThis topic describes how to use the Windows Communication Foundation (WCF) management and diagnostics feature to troubleshoot a transactional application.  \n  \n## Performance Counters  \n WCF provides a standard set of performance counters for you to measure your transactional application's performance. For more information, see [Performance Counters](../../../../docs/framework/wcf/diagnostics/performance-counters/index.md).  \n  \n Performance counters are scoped to three different levels: service, endpoint, and operation, as described in the following tables.  \n  \n### Service Performance Counters  \n  \n|Performance counter|Description|  \n|-------------------------|-----------------|  \n|Transactions Flowed|The number of transactions that flowed to operations in this service. This counter is incremented any time a transaction is present in the message that is sent to the service.|  \n|Transactions Flowed Per Second|The number of transactions that flowed to operations in this service within each second. This counter is incremented any time a transaction is present in the message that is sent to the service.|  \n|Transacted Operations Committed|The number of transacted operations performed, whose transaction has completed with the outcome committed in this service. Work done under such operations is fully committed. Resources are updated in accordance with the work done in the operation.|  \n|Transacted Operations Committed Per Second|The number of transacted operations performed, whose transaction has completed with the outcome committed in this service within each second. Work done under such operations is fully committed. Resources are updated in accordance with the work done in the operation.|  \n|Transacted Operations Aborted|The number of transacted operations performed, whose transaction has completed with the outcome aborted in this service. Work done under such operations is rolled back. Resources are reverted to their previous state.|  \n|Transacted Operations Aborted Per Second|The number of transacted operations performed, whose transaction has completed with the outcome aborted in this service within each second. Work done under such operations is rolled back. Resources are reverted to their previous state.|  \n|Transacted Operations In Doubt|The number of transacted operations performed, whose transaction has completed with an outcome in doubt in this service. Work done with an outcome in doubt is in an indeterminate state. Resources are held pending outcome.|  \n|Transacted Operations In Doubt Per Second|The number of transacted operations performed, whose transaction has completed with an outcome in doubt in this service within each second. Work done with an outcome in doubt is in an indeterminate state. Resources are held pending outcome.|  \n  \n### Endpoint Performance Counters  \n  \n|Performance counter|Description|  \n|-------------------------|-----------------|  \n|Transactions Flowed|The number of transactions that flowed to operations at this endpoint. This counter is incremented any time a transaction is present in the message that is sent to the endpoint.|  \n|Transactions Flowed Per Second|The number of transactions that flowed to operations at this endpoint within each second. This counter is incremented any time a transaction is present in the message that is sent to the endpoint.|  \n  \n### Operation Performance Counters  \n  \n|Performance counter|Description|  \n|-------------------------|-----------------|  \n|Transactions Flowed|The number of transactions that flowed to operations at this endpoint. This counter is incremented any time a transaction is present in the message that is sent to the endpoint.|  \n|Transactions Flowed Per Second|The number of transactions that flowed to operations at this endpoint within each second. This counter is incremented any time a transaction is present in the message that is sent to the endpoint.|  \n  \n## Windows Management Instrumentation  \n WCF exposes inspection data of a service at run time through a WCF Windows Management Instrumentation (WMI) provider. For more information about accessing WMI data, see [Using Windows Management Instrumentation for Diagnostics](../../../../docs/framework/wcf/diagnostics/wmi/index.md).  \n  \n A number of read-only WMI properties indicate the applied transaction settings for a service. The following tables list all of these settings.  \n  \n On a service, the `ServiceBehaviorAttribute` has the following properties.  \n  \n|Name|Type|Description|  \n|----------|----------|-----------------|  \n|ReleaseServiceInstanceOnTransactionComplete|Boolean|Specifies whether the service object is recycled when the current transaction completes.|  \n|TransactionAutoCompleteOnSessionClose|Boolean|Specifies whether pending transactions are completed when the current session closes.|  \n|TransactionIsolationLevel|A string that contains a valid value of the <xref:System.Transactions.IsolationLevel> enumeration.|Specifies the transaction isolation level that this service supports.|  \n|TransactionTimeout|<xref:System.DateTime>|Specifies the period within which a transaction must complete.|  \n  \n The `ServiceTimeoutsBehavior` has the following property.  \n  \n|Name|Type|Description|  \n|----------|----------|-----------------|  \n|TransactionTimeout|<xref:System.DateTime>|Specifies the period within which a transaction must complete.|  \n  \n On a binding, the `TransactionFlowBindingElement` has the following properties.  \n  \n|Name|Type|Description|  \n|----------|----------|-----------------|  \n|TransactionProtocol|A string that contains a valid value of the <xref:System.ServiceModel.TransactionProtocol> type.|Specifies the transaction protocol to use in flowing a transaction.|  \n|TransactionFlow|Boolean|Specifies whether incoming transaction flow is enabled.|  \n  \n On an operation, the `OperationBehaviorAttribute` has the following properties:  \n  \n|Name|Type|Description|  \n|----------|----------|-----------------|  \n|TransactionAutoComplete|Boolean|Specifies whether to automatically commit the current transaction if no unhandled exceptions occur.|  \n|TransactionScopeRequired|Boolean|Specifies whether the operation requires a transaction.|  \n  \n On an operation, the `TransactionFlowAttribute` has the following properties.  \n  \n|Name|Type|Description|  \n|----------|----------|-----------------|  \n|TransactionFlowOption|A string that contains a valid value of the <xref:System.ServiceModel.TransactionFlowOption> enumeration.|Specifies the extent to which transaction flow is required.|  \n  \n## Tracing  \n Traces enable you to monitor and analyze faults in your transactional applications. You can enable tracing using the following ways:  \n  \n-   Standard WCF tracing  \n  \n     This type of tracing is the same as tracing any WCF application. For more information, see [Configuring Tracing](../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md).  \n  \n-   WS-AtomicTransaction tracing  \n  \n     WS-AtomicTransaction tracing can be enabled by using the [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md). Such tracing provides insight into the state of transactions and participants within a system. To also enable internal Service Model tracing, you can set the `HKLM\\SOFTWARE\\Microsoft\\WSAT\\3.0\\ServiceModelDiagnosticTracing` registry key to a valid value of the <xref:System.Diagnostics.SourceLevels> enumeration. You can enable message logging in the same way as other WCF applications.  \n  \n-   `System.Transactions` tracing  \n  \n     When using the OleTransactions protocol, protocol messages cannot be traced. The tracing support the <xref:System.Transactions> infrastructure provides (which uses OleTransactions) allows users to view events that occurred to the transactions. To enable tracing for a <xref:System.Transactions> application, include the following code in the `App.config` configuration file.  \n  \n    ```xml  \n    <configuration>  \n      <system.diagnostics>  \n         <sources>  \n            <source name=\"System.Transactions\" switchValue=\"Verbose, ActivityTracing\">  \n               <listeners>  \n                  <add name=\"Text\"  \n                     type=\"System.Diagnostics.XmlWriterTraceListener\"  \n                     initializeData=\"SysTx.log\"  \n                     traceOutputOptions=\"Callstack\" />  \n               </listeners>  \n            </source>  \n         </sources>  \n         <trace autoflush=\"true\" indentsize=\"4\">  \n         </trace>  \n      </system.diagnostics>  \n    </configuration>  \n    ```  \n  \n     This also enables WCF tracing, as WCF also utilizes the <xref:System.Transactions> infrastructure.  \n  \n## See also\n\n- [Administration and Diagnostics](../../../../docs/framework/wcf/diagnostics/index.md)\n- [Configuring Tracing](../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)\n- [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)\n","nodes":[{"pos":[4,121],"embed":true,"restype":"x-metadata","content":"title: \"Diagnosing Transactional Applications\"\nms.date: \"03/30/2017\"\nms.assetid: 4a993492-1088-4d10-871b-0c09916af05f","nodes":[{"content":"Diagnosing Transactional Applications","nodes":[{"pos":[0,37],"content":"Diagnosing Transactional Applications","nodes":[{"content":"Diagnosing Transactional Applications","pos":[0,37]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[128,165],"content":"Diagnosing Transactional Applications","linkify":"Diagnosing Transactional Applications","nodes":[{"content":"Diagnosing Transactional Applications","pos":[0,37]}]},{"content":"This topic describes how to use the Windows Communication Foundation (WCF) management and diagnostics feature to troubleshoot a transactional application.","pos":[166,320]},{"pos":[329,349],"content":"Performance Counters","linkify":"Performance Counters","nodes":[{"content":"Performance Counters","pos":[0,20]}]},{"content":"WCF provides a standard set of performance counters for you to measure your transactional application's performance.","pos":[353,469]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Performance Counters<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/performance-counters/index.md)</ept>.","pos":[470,593],"source":" For more information, see [Performance Counters](../../../../docs/framework/wcf/diagnostics/performance-counters/index.md)."},{"content":"Performance counters are scoped to three different levels: service, endpoint, and operation, as described in the following tables.","pos":[600,730]},{"pos":[740,768],"content":"Service Performance Counters","linkify":"Service Performance Counters","nodes":[{"content":"Service Performance Counters","pos":[0,28]}]},{"content":"Performance counter","pos":[775,794]},{"content":"Description","pos":[795,806]},{"content":"Transactions Flowed","pos":[859,878]},{"content":"The number of transactions that flowed to operations in this service.","pos":[879,948]},{"content":"This counter is incremented any time a transaction is present in the message that is sent to the service.","pos":[949,1054]},{"content":"Transactions Flowed Per Second","pos":[1059,1089]},{"content":"The number of transactions that flowed to operations in this service within each second.","pos":[1090,1178]},{"content":"This counter is incremented any time a transaction is present in the message that is sent to the service.","pos":[1179,1284]},{"content":"Transacted Operations Committed","pos":[1289,1320]},{"content":"The number of transacted operations performed, whose transaction has completed with the outcome committed in this service.","pos":[1321,1443]},{"content":"Work done under such operations is fully committed.","pos":[1444,1495]},{"content":"Resources are updated in accordance with the work done in the operation.","pos":[1496,1568]},{"content":"Transacted Operations Committed Per Second","pos":[1573,1615]},{"content":"The number of transacted operations performed, whose transaction has completed with the outcome committed in this service within each second.","pos":[1616,1757]},{"content":"Work done under such operations is fully committed.","pos":[1758,1809]},{"content":"Resources are updated in accordance with the work done in the operation.","pos":[1810,1882]},{"content":"Transacted Operations Aborted","pos":[1887,1916]},{"content":"The number of transacted operations performed, whose transaction has completed with the outcome aborted in this service.","pos":[1917,2037]},{"content":"Work done under such operations is rolled back.","pos":[2038,2085]},{"content":"Resources are reverted to their previous state.","pos":[2086,2133]},{"content":"Transacted Operations Aborted Per Second","pos":[2138,2178]},{"content":"The number of transacted operations performed, whose transaction has completed with the outcome aborted in this service within each second.","pos":[2179,2318]},{"content":"Work done under such operations is rolled back.","pos":[2319,2366]},{"content":"Resources are reverted to their previous state.","pos":[2367,2414]},{"content":"Transacted Operations In Doubt","pos":[2419,2449]},{"content":"The number of transacted operations performed, whose transaction has completed with an outcome in doubt in this service.","pos":[2450,2570]},{"content":"Work done with an outcome in doubt is in an indeterminate state.","pos":[2571,2635]},{"content":"Resources are held pending outcome.","pos":[2636,2671]},{"content":"Transacted Operations In Doubt Per Second","pos":[2676,2717]},{"content":"The number of transacted operations performed, whose transaction has completed with an outcome in doubt in this service within each second.","pos":[2718,2857]},{"content":"Work done with an outcome in doubt is in an indeterminate state.","pos":[2858,2922]},{"content":"Resources are held pending outcome.","pos":[2923,2958]},{"pos":[2969,2998],"content":"Endpoint Performance Counters","linkify":"Endpoint Performance Counters","nodes":[{"content":"Endpoint Performance Counters","pos":[0,29]}]},{"content":"Performance counter","pos":[3005,3024]},{"content":"Description","pos":[3025,3036]},{"content":"Transactions Flowed","pos":[3089,3108]},{"content":"The number of transactions that flowed to operations at this endpoint.","pos":[3109,3179]},{"content":"This counter is incremented any time a transaction is present in the message that is sent to the endpoint.","pos":[3180,3286]},{"content":"Transactions Flowed Per Second","pos":[3291,3321]},{"content":"The number of transactions that flowed to operations at this endpoint within each second.","pos":[3322,3411]},{"content":"This counter is incremented any time a transaction is present in the message that is sent to the endpoint.","pos":[3412,3518]},{"pos":[3529,3559],"content":"Operation Performance Counters","linkify":"Operation Performance Counters","nodes":[{"content":"Operation Performance Counters","pos":[0,30]}]},{"content":"Performance counter","pos":[3566,3585]},{"content":"Description","pos":[3586,3597]},{"content":"Transactions Flowed","pos":[3650,3669]},{"content":"The number of transactions that flowed to operations at this endpoint.","pos":[3670,3740]},{"content":"This counter is incremented any time a transaction is present in the message that is sent to the endpoint.","pos":[3741,3847]},{"content":"Transactions Flowed Per Second","pos":[3852,3882]},{"content":"The number of transactions that flowed to operations at this endpoint within each second.","pos":[3883,3972]},{"content":"This counter is incremented any time a transaction is present in the message that is sent to the endpoint.","pos":[3973,4079]},{"pos":[4089,4123],"content":"Windows Management Instrumentation","linkify":"Windows Management Instrumentation","nodes":[{"content":"Windows Management Instrumentation","pos":[0,34]}]},{"content":"WCF exposes inspection data of a service at run time through a WCF Windows Management Instrumentation (WMI) provider.","pos":[4127,4244]},{"content":"For more information about accessing WMI data, see <bpt id=\"p1\">[</bpt>Using Windows Management Instrumentation for Diagnostics<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/wmi/index.md)</ept>.","pos":[4245,4412],"source":" For more information about accessing WMI data, see [Using Windows Management Instrumentation for Diagnostics](../../../../docs/framework/wcf/diagnostics/wmi/index.md)."},{"content":"A number of read-only WMI properties indicate the applied transaction settings for a service.","pos":[4419,4512]},{"content":"The following tables list all of these settings.","pos":[4513,4561]},{"pos":[4568,4642],"content":"On a service, the <ph id=\"ph1\">`ServiceBehaviorAttribute`</ph> has the following properties.","source":"On a service, the `ServiceBehaviorAttribute` has the following properties."},{"content":"Name","pos":[4649,4653]},{"content":"Type","pos":[4654,4658]},{"content":"Description","pos":[4659,4670]},{"content":"ReleaseServiceInstanceOnTransactionComplete","pos":[4719,4762]},{"content":"Boolean","pos":[4763,4770]},{"content":"Specifies whether the service object is recycled when the current transaction completes.","pos":[4771,4859]},{"content":"TransactionAutoCompleteOnSessionClose","pos":[4864,4901]},{"content":"Boolean","pos":[4902,4909]},{"content":"Specifies whether pending transactions are completed when the current session closes.","pos":[4910,4995]},{"content":"TransactionIsolationLevel","pos":[5000,5025]},{"pos":[5026,5124],"content":"A string that contains a valid value of the <ph id=\"ph1\">&lt;xref:System.Transactions.IsolationLevel&gt;</ph> enumeration.","source":"A string that contains a valid value of the <xref:System.Transactions.IsolationLevel> enumeration."},{"content":"Specifies the transaction isolation level that this service supports.","pos":[5125,5194]},{"content":"TransactionTimeout","pos":[5199,5217]},{"content":"Specifies the period within which a transaction must complete.","pos":[5241,5303]},{"pos":[5311,5368],"content":"The <ph id=\"ph1\">`ServiceTimeoutsBehavior`</ph> has the following property.","source":"The `ServiceTimeoutsBehavior` has the following property."},{"content":"Name","pos":[5375,5379]},{"content":"Type","pos":[5380,5384]},{"content":"Description","pos":[5385,5396]},{"content":"TransactionTimeout","pos":[5445,5463]},{"content":"Specifies the period within which a transaction must complete.","pos":[5487,5549]},{"pos":[5557,5636],"content":"On a binding, the <ph id=\"ph1\">`TransactionFlowBindingElement`</ph> has the following properties.","source":"On a binding, the `TransactionFlowBindingElement` has the following properties."},{"content":"Name","pos":[5643,5647]},{"content":"Type","pos":[5648,5652]},{"content":"Description","pos":[5653,5664]},{"content":"TransactionProtocol","pos":[5713,5732]},{"pos":[5733,5829],"content":"A string that contains a valid value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.TransactionProtocol&gt;</ph> type.","source":"A string that contains a valid value of the <xref:System.ServiceModel.TransactionProtocol> type."},{"content":"Specifies the transaction protocol to use in flowing a transaction.","pos":[5830,5897]},{"content":"TransactionFlow","pos":[5902,5917]},{"content":"Boolean","pos":[5918,5925]},{"content":"Specifies whether incoming transaction flow is enabled.","pos":[5926,5981]},{"pos":[5989,6068],"content":"On an operation, the <ph id=\"ph1\">`OperationBehaviorAttribute`</ph> has the following properties:","source":"On an operation, the `OperationBehaviorAttribute` has the following properties:"},{"content":"Name","pos":[6075,6079]},{"content":"Type","pos":[6080,6084]},{"content":"Description","pos":[6085,6096]},{"content":"TransactionAutoComplete","pos":[6145,6168]},{"content":"Boolean","pos":[6169,6176]},{"content":"Specifies whether to automatically commit the current transaction if no unhandled exceptions occur.","pos":[6177,6276]},{"content":"TransactionScopeRequired","pos":[6281,6305]},{"content":"Boolean","pos":[6306,6313]},{"content":"Specifies whether the operation requires a transaction.","pos":[6314,6369]},{"pos":[6377,6454],"content":"On an operation, the <ph id=\"ph1\">`TransactionFlowAttribute`</ph> has the following properties.","source":"On an operation, the `TransactionFlowAttribute` has the following properties."},{"content":"Name","pos":[6461,6465]},{"content":"Type","pos":[6466,6470]},{"content":"Description","pos":[6471,6482]},{"content":"TransactionFlowOption","pos":[6531,6552]},{"pos":[6553,6658],"content":"A string that contains a valid value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.TransactionFlowOption&gt;</ph> enumeration.","source":"A string that contains a valid value of the <xref:System.ServiceModel.TransactionFlowOption> enumeration."},{"content":"Specifies the extent to which transaction flow is required.","pos":[6659,6718]},{"pos":[6728,6735],"content":"Tracing","linkify":"Tracing","nodes":[{"content":"Tracing","pos":[0,7]}]},{"content":"Traces enable you to monitor and analyze faults in your transactional applications.","pos":[6739,6822]},{"content":"You can enable tracing using the following ways:","pos":[6823,6871]},{"content":"Standard WCF tracing","pos":[6881,6901]},{"content":"This type of tracing is the same as tracing any WCF application.","pos":[6912,6976]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Configuring Tracing<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)</ept>.","pos":[6977,7100],"source":" For more information, see [Configuring Tracing](../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)."},{"content":"WS-AtomicTransaction tracing","pos":[7110,7138]},{"content":"WS-AtomicTransaction tracing can be enabled by using the <bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration Utility (wsatConfig.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)</ept>.","pos":[7149,7361],"source":"WS-AtomicTransaction tracing can be enabled by using the [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)."},{"content":"Such tracing provides insight into the state of transactions and participants within a system.","pos":[7362,7456]},{"content":"To also enable internal Service Model tracing, you can set the <ph id=\"ph1\">`HKLM\\SOFTWARE\\Microsoft\\WSAT\\3.0\\ServiceModelDiagnosticTracing`</ph> registry key to a valid value of the <ph id=\"ph2\">&lt;xref:System.Diagnostics.SourceLevels&gt;</ph> enumeration.","pos":[7457,7673],"source":" To also enable internal Service Model tracing, you can set the `HKLM\\SOFTWARE\\Microsoft\\WSAT\\3.0\\ServiceModelDiagnosticTracing` registry key to a valid value of the <xref:System.Diagnostics.SourceLevels> enumeration."},{"content":"You can enable message logging in the same way as other WCF applications.","pos":[7674,7747]},{"pos":[7757,7786],"content":"<ph id=\"ph1\">`System.Transactions`</ph> tracing","source":"`System.Transactions` tracing"},{"content":"When using the OleTransactions protocol, protocol messages cannot be traced.","pos":[7797,7873]},{"content":"The tracing support the <ph id=\"ph1\">&lt;xref:System.Transactions&gt;</ph> infrastructure provides (which uses OleTransactions) allows users to view events that occurred to the transactions.","pos":[7874,8040],"source":" The tracing support the <xref:System.Transactions> infrastructure provides (which uses OleTransactions) allows users to view events that occurred to the transactions."},{"content":"To enable tracing for a <ph id=\"ph1\">&lt;xref:System.Transactions&gt;</ph> application, include the following code in the <ph id=\"ph2\">`App.config`</ph> configuration file.","pos":[8041,8171],"source":" To enable tracing for a <xref:System.Transactions> application, include the following code in the `App.config` configuration file."},{"pos":[8814,8912],"content":"This also enables WCF tracing, as WCF also utilizes the <ph id=\"ph1\">&lt;xref:System.Transactions&gt;</ph> infrastructure.","source":"This also enables WCF tracing, as WCF also utilizes the <xref:System.Transactions> infrastructure."},{"pos":[8921,8929],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[8933,9018],"content":"<bpt id=\"p1\">[</bpt>Administration and Diagnostics<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/index.md)</ept>","source":"[Administration and Diagnostics](../../../../docs/framework/wcf/diagnostics/index.md)"},{"pos":[9021,9117],"content":"<bpt id=\"p1\">[</bpt>Configuring Tracing<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)</ept>","source":"[Configuring Tracing](../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)"},{"pos":[9120,9274],"content":"<bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration Utility (wsatConfig.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)</ept>","source":"[WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)"}]}