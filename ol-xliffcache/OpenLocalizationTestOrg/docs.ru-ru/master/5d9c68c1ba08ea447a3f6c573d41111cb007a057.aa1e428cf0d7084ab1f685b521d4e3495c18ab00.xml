{"content":"---\ntitle: \"Windows Workflow Foundation Feature Specifics | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: e84d12da-a055-45f6-b4d1-878d127b46b6\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Windows Workflow Foundation Feature Specifics\n[!INCLUDE[netfx40_long](../../../includes/netfx40-long-md.md)] adds a number of features to Windows Workflow Foundation. This document describes a number of the new features, and gives details about scenarios in which they may be useful.  \n  \n## Messaging Activities  \n The messaging activities (<xref:System.ServiceModel.Activities.Receive>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.ReceiveReply>) are used to send and receive [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] messages from your workflow.  <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> activities are used to form a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] service operation that is exposed via WSDL just like standard [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] web services.  <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> are used to consume a web service similar to a WCF <xref:System.ServiceModel.ChannelFactory>; an **Add Service Reference** experience also exists for Workflow Foundation that generates pre-configured activities.  \n  \n### Getting Started with Messaging Activities  \n  \n-   In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a WCF Workflow Service Application project. A <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> pair will be placed on your canvas.  \n  \n-   Right-click on the project and select **Add Service Reference**.  Point to an existing web service WSDL and click **OK**.  Build your project to show the generated activities (implemented using <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply>) in your toolbox.  \n  \n-   Samples for these activities can be found in the following sections:  \n  \n    -   Basic: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)  \n  \n    -   Scenarios: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)  \n  \n-   [Conceptual documentation](http://go.microsoft.com/fwlink/?LinkId=204801)  \n  \n-   [Messaging activities designer documentation](http://go.microsoft.com/fwlink/?LinkId=204802)  \n  \n### Messaging Activities Example Scenario  \n A `BestPriceFinder` service calls out to multiple airline services to find the best ticket price for a particular route.  Implementing this scenario would require you to use the message activities to receive the price request, retrieve the prices from the back-end services, and reply to the price request with the best price.  It would also require you to use other out-of-box activities to create the business logic for calculating the best price.  \n  \n## WorkflowServiceHost  \n The <xref:System.ServiceModel.WorkflowServiceHost> is the out-of-box workflow host that supports multiple instances, configuration, and [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] messaging (although the workflows aren’t required to use messaging in order to be hosted).  It also integrates with persistence, tracking, and instance control through a set of service behaviors.  Just like [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]’s <xref:System.ServiceModel.ServiceHost>, the <xref:System.ServiceModel.WorkflowServiceHost> can be self-hosted in a console/WinForms/WPF application or Windows service, or web-hosted (as a .xamlx file) in IIS or WAS.  \n  \n### Getting Started with Workflow Service Host  \n  \n-   In Visual Studio 2010, create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Workflow Service Application project: this project will be set up to use <xref:System.ServiceModel.WorkflowServiceHost> in a web-host environment.  \n  \n-   In order to host a non-messaging workflow, add a custom <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> that will create the instance based on a message.  \n  \n-   Workflow instances can be controlled (e.g. suspended or terminated) by adding a <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> to the <xref:System.ServiceModel.WorkflowServiceHost> and then using a <xref:System.ServiceModel.Activities.WorkflowControlClient>.  \n  \n-   Samples for the <xref:System.ServiceModel.WorkflowServiceHost> can be found in the following sections:  \n  \n    -   [Execution](../../../docs/framework/windows-workflow-foundation/samples/execution.md)  \n  \n    -   Basic: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)  \n  \n    -   Scenarios: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)  \n  \n    -   Application: [Suspended Instance Management](../../../docs/framework/windows-workflow-foundation/samples/suspended-instance-management.md)  \n  \n-   [WorkflowServiceHost Conceptual Documentation](http://go.microsoft.com/fwlink/?LinkId=204807)  \n  \n### WorkflowServiceHost Scenario  \n A BestPriceFinder service calls out to multiple airline services to find the best ticket price for a particular route.  Implementing this scenario would require you to host the workflow in <xref:System.ServiceModel.WorkflowServiceHost>.  It would also use the message activities to receive the price request, retrieve the prices from the back-end services, and reply to the price request with the best price.  \n  \n## Correlation  \n A correlation is one of two things:  \n  \n-   A way of grouping messages together; that is, the relationship between a request message and its reply.  \n  \n-   A way of mapping a piece of data to a service instance  \n  \n### Getting Started  \n  \n-   To get started with correlation, create a new project in Visual Studio. Create a variable of type <xref:System.ServiceModel.Activities.CorrelationHandle>.  \n  \n-   An example of correlation used to group messages together is a Request-Reply correlation that groups messages together.  \n  \n    -   On a <xref:System.ServiceModel.Activities.Receive> activity, click on the <xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A> property and add a a <xref:System.ServiceModel.Activities.RequestReplyCorrelationInitializer> using the CorrelationHandle created in the first step above.  \n  \n    -   Create a <xref:System.ServiceModel.Activities.SendReply> activity by right-clicking on the <xref:System.ServiceModel.Activities.Receive> and clicking \"Create SendReply\". Paste it into your workflow after the <xref:System.ServiceModel.Activities.Receive> activity.  \n  \n-   An example of mapping a piece of data to a service instance is content-based correlation which maps a piece of data (for example, an order ID) to a particular workflow instance.  \n  \n    -   On any messaging activity, click on the `CorrelationInitializers` property and add a <xref:System.ServiceModel.Activities.QueryCorrelationInitializer> using the <xref:System.ServiceModel.Activities.CorrelationHandle> variable created above. Double-click on the desired property on the message (e.g. OrderID) from the drop-down menu. Set the `CorrelatesWith` property to the <xref:System.ServiceModel.Activities.CorrelationHandle> variable used above.  \n  \n-   Samples:  \n  \n    -   Basic: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)  \n  \n    -   Scenarios: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)  \n  \n    -   [Correlation Conceptual Documentation](http://go.microsoft.com/fwlink/?LinkId=204939)  \n  \n### Correlation Scenario  \n An order-processing workflow is used to handle new order creation and updating existing orders that are in process.  Implementing this scenario would require you to host the workflow in <xref:System.ServiceModel.WorkflowServiceHost> and use the messaging activities.  It would also require correlation based on the `orderId` to ensure that updates are made to the correct workflow.  \n  \n## Simplified Configuration  \n The [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] configuration schema is complex and provides users with many hard to find features. In [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)], we have focused on helping [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] users configure their services with the following features:  \n  \n-   Removing the need for explicit per-service configuration. If you do not configure any \\<service> elements for your service, and your service does not define programmatically any endpoint, then a set of endpoints will be automatically added to your service, one per service base address and per contract implemented by your service.  \n  \n-   Enables the user to define default values for WCF bindings and behaviors, which will be applied to services with no explicit configuration.  \n  \n-   Standard endpoints define reusable preconfigured endpoints, which have fixed values for one or more of the endpoint properties (address, binding and contract), and allow defining custom properties.  \n  \n-   Finally, the <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> allows you to do central management of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client configuration, useful in scenarios in which configuration is selected or changed after the application domain load time.  \n  \n### Getting Started  \n  \n-   [A Developer's Guide to WCF 4.0](http://go.microsoft.com/fwlink/?LinkId=204940)  \n  \n-   [Configuration Channel Factory](http://go.microsoft.com/fwlink/?LinkId=204941)  \n  \n-   [Standard Endpoint Element](http://go.microsoft.com/fwlink/?LinkId=204942)  \n  \n-   [Service configuration improvements in .Net Framework 4](http://go.microsoft.com/fwlink/?LinkId=204943)  \n  \n-   [Common User Mistake in .NET 4: Mistyping the WF/WCF Service Configuration Name](http://go.microsoft.com/fwlink/?LinkId=204944)  \n  \n### Simplified Configuration Scenarios  \n  \n-   An experienced ASMX developer wants to start using [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]. However, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] seems way too complicated! What is all that information that I need to write in a configuration file? In .NET 4, you can even decide to not have a configuration file at all.  \n  \n-   An existing set of WCF services are very difficult to configure and maintain. The configuration file has thousands of lines of XML code that are extremely dangerous to touch. Help is needed to reduce that amount of code to something more manageable.  \n  \n## Data Contract Resolver  \n In .NET 3.5, there were a few limitations in the design of known types:  \n  \n-   Adding known types dynamically, during serialization or deserialization, was not possible.  \n  \n-   Serializers could not deal with unknown xsi:type information.  \n  \n-   It was not possible for users to specify what xsi:type they would like to have appear on the wire to, for instance, make the size of a serialization instance on the wire smaller.  \n  \n The [DataContractResolver](../../../docs/framework/wcf/samples/datacontractresolver.md) solves these issues in .NET 4.5.  \n  \n### Getting Started  \n  \n-   [Data Contract Resolver API documentation](http://go.microsoft.com/fwlink/?LinkId=204946)  \n  \n-   [Introducing the Data Contract Resolver](http://go.microsoft.com/fwlink/?LinkId=204947)  \n  \n-   Samples:  \n  \n    -   [DataContractResolver](../../../docs/framework/wcf/samples/datacontractresolver.md)  \n  \n    -   [KnownAssemblyAttribute](../../../docs/framework/wcf/samples/knownassemblyattribute.md)  \n  \n### Data Contract Resolver Scenarios  \n  \n-   Avoiding having to declare tens of <xref:System.Runtime.Serialization.KnownTypeAttribute> objects in a service.  \n  \n-   Reducing the size of the XML blob.  \n  \n## Flowchart  \n Flowchart is a well-known paradigm to visually represent domain problems. It is a new control flow style we’re introducing in .NET 4. A core characteristic of Flowchart is that only one activity is executed at any given time. Flowcharts can express loops and alternative outcomes, but cannot natively express concurrent execution of multiple nodes.  \n  \n### Getting Started  \n  \n-   In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application. Add a Flowchart in the workflow designer.  \n  \n-   The flowchart feature uses the following classes:  \n  \n    -   <xref:System.Activities.Statements.Flowchart>  \n  \n    -   <xref:System.Activities.Statements.FlowNode>  \n  \n    -   <xref:System.Activities.Statements.FlowDecision>  \n  \n    -   <xref:System.Activities.Statements.FlowStep>  \n  \n    -   <xref:System.Activities.Statements.FlowSwitch%601>  \n  \n-   Samples:  \n  \n    -   [Fault Handling in a Flowchart Activity Using TryCatch](../../../docs/framework/windows-workflow-foundation/samples/fault-handling-in-a-flowchart-activity-using-trycatch.md)  \n  \n    -   [StateMachine Scenario Using a Combination of FlowChart and Pick](../../../docs/framework/windows-workflow-foundation/samples/statemachine-scenario-using-a-combination-of-flowchart-and-pick.md)  \n  \n    -   [Hiring Process](../../../docs/framework/windows-workflow-foundation/samples/hiring-process.md)  \n  \n-   Designer Documentation:  \n  \n    -   [Flowchart Activity Designers](/visualstudio/workflow-designer/flowchart-activity-designers)  \n  \n### Flowchart Scenarios  \n A flowchart activity can be used to implement a guessing game. The guessing game is very simple: the computer selects a random number and the player has to guess that number. When the player submits each guess, the computer shows him a hint (i.e. \"try a lower number\"). If the player finds the number in less than 7 attempts, he receives a special congratulation from the computer. This game can be implemented with a combination of the following procedural activities:  \n  \n-   <xref:System.Activities.Statements.Sequence>  \n  \n-   <xref:System.Activities.Statements.While>  \n  \n-   <xref:System.Activities.Statements.Switch%601>  \n  \n-   <xref:System.Activities.Statements.TryCatch>  \n  \n-   <xref:System.Activities.Statements.Assign%601>  \n  \n-   <xref:System.Activities.Statements.If>  \n  \n## Procedural activities (Sequence, If, ForEach, Switch, Assign, DoWhile, While)  \n Procedural activities provide a mechanism to model sequential control flow using concepts that are familiar to programmers. These activities enable traditionally structured programming language constructs and, when appropriate, provide language parity with common procedural languages such as C#/VB.  \n  \n### Getting Started  \n  \n-   In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application. Add procedural activities in the workflow designer.  \n  \n-   Samples:  \n  \n    -   [Hiring Process](../../../docs/framework/windows-workflow-foundation/samples/hiring-process.md)  \n  \n    -   [Corporate Purchase Process](../../../docs/framework/windows-workflow-foundation/samples/corporate-purchase-process.md)  \n  \n-   Designer Documentation:  \n  \n    -   [Parallel Activity Designer](/visualstudio/workflow-designer/parallel-activity-designer)  \n  \n    -   [ParallelForEach\\<T> Activity Designer](/visualstudio/workflow-designer/parallelforeach-t-activity-designer)  \n  \n### Procedural Activity Scenarios  \n  \n-   <xref:System.Activities.Statements.Parallel>Parallel: An intranet document management system has a document approval workflow. Documents need to be approved by people in several departments before they can be published to the intranet. There isn’t an established order for the approvals; they can occur at any time while the document is in the \"approval pending\" phase. When a user submits a document for review it must be approved by her direct manager, the intranet administrator, and the internal communications manager.  \n  \n-   <xref:System.Activities.Statements.ParallelForEach%601>: A WF application manages corporate buys within a large company. The corporate rules dictate that before planning any purchase operation, the valuations of three different vendors is required. An employee from the buying department selects three vendors from the company’s vendor list. After these vendors have been selected and notified, the company will wait for their economic proposals. The proposals can come in any order. To implement this scenario in WF, we use a <xref:System.Activities.Statements.ParallelForEach%601> that will iterate through our collection of vendors and ask for their economic proposals. After all offers are gathered, the best one is selected and displayed.  \n  \n## InvokeMethod  \n The <xref:System.Activities.Statements.InvokeMethod> activity allows invoking public methods in objects or types in scope. It supports invoking instance and static methods with or without parameters (including parameter arrays), and generic methods. It also allows executing method synchronously and asynchronously.  \n  \n### Getting Started  \n  \n-   In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application. Add an <xref:System.Activities.Statements.InvokeMethod> activity in the workflow designer, and configure static and instance methods on it.  \n  \n-   Samples:  \n  \n    -   [InvokeMethod](../../../docs/framework/windows-workflow-foundation/samples/invokemethod.md)  \n  \n-   Designer Documentation: [InvokeMethod Activity Designer](/visualstudio/workflow-designer/invokemethod-activity-designer)  \n  \n### InvokeMethod Scenarios  \n  \n-   A method in an object in scope needs to be invoked. For example, a value needs to be added to a dictionary. The Add method of the instance of the dictionary is invoked, and the key and value are provided.  \n  \n-   A method needs to be invoked on a legacy CLR object. Instead of creating a custom activity to wrap the call to that legacy class, if it is in scope during the workflow execution, <xref:System.Activities.Statements.InvokeMethod> can be used.  \n  \n## Error handling activities  \n The <xref:System.Activities.Statements.TryCatch> activity provides a mechanism for catching exceptions that occur during the execution of a set of contained activities (similar to the Try/Catch construct in C#/VB). <xref:System.Activities.Statements.TryCatch> provides exception handling at the workflow level. When an unhandled exception is thrown, the workflow is aborted and the Finally block won’t be executed. This behavior is consistent with C#.  \n  \n### Getting Started  \n  \n-   In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application. Add a <xref:System.Activities.Statements.TryCatch> activity in the workflow designer.  \n  \n-   Samples:  \n  \n    1.  [Fault Handling in a Flowchart Activity Using TryCatch](../../../docs/framework/windows-workflow-foundation/samples/fault-handling-in-a-flowchart-activity-using-trycatch.md)  \n  \n    2.  [Using Procedural Activities](../../../docs/framework/windows-workflow-foundation/samples/using-procedural-activities.md)  \n  \n-   Designer Documentation: [Error Handling Activity Designers](/visualstudio/workflow-designer/error-handling-activity-designers)  \n  \n### Error handling scenarios  \n A set of activities needs to be executed, and specific logic needs to be executed when an error occurs. If during that error handling logic it is found that the error is not recoverable, the exception will be rethrown, and the parent activity (or the host) will deal with the problem.  \n  \n## Pick activity  \n The <xref:System.Activities.Statements.Pick> Activity provides event-based control flow modeling in WF. <xref:System.Activities.Statements.Pick> contains many branches where each branch waits for a particular event to occur before running. In this setup, a <xref:System.Activities.Statements.Pick> behaves similar to a <xref:System.Activities.Statements.Switch%601> to which the Activity will execute only one of the set of events it is listening. Each branch is event driven and the event that occurs runs the corresponding branch first. All other branches cancel and stop listening for events.  \n  \n### Getting Started  \n  \n-   In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application. Add a <xref:System.Activities.Statements.Pick> activity in the workflow designer.  \n  \n-   Sample: [Using the Pick Activity](../../../docs/framework/windows-workflow-foundation/samples/using-the-pick-activity.md)  \n  \n-   Designer documentation: [Pick Activity Designer](/visualstudio/workflow-designer/pick-activity-designer)  \n  \n### Pick Scenario  \n A user needs to be prompted for input. Under normal circumstances, the developer would use a method call like <xref:System.Console.ReadLine%2A> to prompt for a user’s input. The problem with this setup is that the program waits until the user enters something. In this scenario, a time-out is needed to unblock a blocking activity. A common scenario is one that requires a task to be completed within a given time duration. Timing out a blocking activity is a scenario where Pick adds a lot of value.  \n  \n## WCF Routing Service  \n The Routing Service is designed to be a generic software Router that allows you to control how [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]messages flow in between your clients and services.  The Routing Service allows you to decouple your clients from your services, which gives you much more freedom in terms of the configurations that you can support and the flexibility you have when considering how to host your services.  In .NET 3.5, clients and services were tightly coupled; a client had to know about all of the services it needed to talk to and where they were located. In addition, WCF in .Net Framework 3.5 had the following limitations:  \n  \n-   Error handling was complex, as this logic had to be hard-coded into the client.  \n  \n-   Clients and services had to always use the same bindings.  \n  \n-   Services were rarely well factored: it is easier to have the client talk to one service which implements everything, rather than needing to choose between multiple services.  \n  \n The routing service in .Net 4 is designed to make these problems easier to solve. The new routing service has the following features:  \n  \n1.  Content based routing (<xref:System.ServiceModel.Dispatcher.MessageFilter> objects examine a message to determine where it should be sent.)  \n  \n2.  Protocol bridging (transport & message)  \n  \n3.  Error handling (the router catches communication exceptions and fails over to backup endpoints)  \n  \n4.  Dynamic (in memory) update of <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601> and Routing Configuration.  \n  \n### Getting Started  \n  \n1.  Documentation: [Routing](../../../docs/framework/wcf/feature-details/routing.md)  \n  \n2.  Samples: [Routing Services &#91;WCF Samples&#93;](../../../docs/framework/wcf/samples/routing-services.md)  \n  \n3.  Blog: [Routing Rules!](http://go.microsoft.com/fwlink/?LinkId=204956)  \n  \n### Routing Scenarios  \n The routing service is useful in the following scenarios:  \n  \n-   Clients can talk to multiple services without having to address them all directly.  \n  \n-   Clients can perform additional logic on a client request to determine where to route it  \n  \n-   Decompose the operations a client performs into multiple service implementations without refactoring the client.  \n  \n-   Clients and services can speak different bindings with different security settings.  \n  \n-   Clients can be enabled to be more robust against failure or the unavailability of services.  \n  \n## WCF Discovery  \n [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Discovery is a framework technology that allows you to incorporate a discovery mechanism to your application infrastructure. You can use this to make your service discoverable, and configure your clients to search for services. Clients no longer need to be hard coded with endpoint, making your application more robust and fault tolerant. Discovery is the perfect platform to build auto-configuration capabilities into your application.  \n  \n The product is built on top of the WS-Discovery standard. It’s designed to be interoperable, extensible, and generic. The product supports two modes of operation:  \n  \n1.  Managed: where there is an entity on the network knowledgeable about existing services, clients query it directly for information. This is analogous to Active Directory.  \n  \n2.  Ad-hoc: where clients use multicast messages to locate services.  \n  \n Furthermore, discovery messages are network protocol agnostic; you can use them on top any protocol that supports the mode requirements. For example, discovery multicast messages can be sent over the UDP channel or any other network that supports multicast messaging.  These design points, combined with feature flexibility, allow you to adapt the discovery specifically to your solution.  \n  \n### Getting Started  \n  \n-   Documentation: [WCF Discovery](../../../docs/framework/wcf/feature-details/wcf-discovery.md)  \n  \n-   Samples: [Discovery (Samples)](../../../docs/framework/wcf/samples/discovery-samples.md)  \n  \n### Discovery Scenarios  \n A developer doesn't want to hard code endpoints, since it is unknown when my service will be available. Instead, the developer wants to choose a service at runtime. More decoupling, robustness, and auto-configuration is needed between the components in the application.  \n  \n## Tracking  \n Workflow tracking provides insight into the execution of a workflow instance.  The tracking events are emitted from a workflow at the workflow instance level and when activities within the workflow execute. A workflow tracking participant needs to be added to the workflow host to subscribe to tracking records. The tracking records are filtered using a tracking profile. The .Net Framework provides an ETW (Event Tracing for Windows) tracking participant, and a basic profile is installed in the machine.config file.  \n  \n### Getting Started  \n  \n1.  In [!INCLUDE[vs2010](../../../includes/vs2010-md.md)], create a WCF Workflow Service Application project. A <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> pair will be placed on your canvas to start.  \n  \n2.  Open the web.config and add an ETW tracking behavior with no profile.  \n  \n    1.  The default profile is used.  \n  \n    2.  Open event viewer and enable the analytic channel in the following node: **Event Viewer**, **Applications and Services Logs**, **Microsoft**, **Windows**, **Application Server-Applications**. Right-click **Analytic** and select **Enable Log**.  \n  \n    3.  Run the workflow service.  \n  \n    4.  Observe the workflow tracking events in event viewer.  \n  \n3.  Samples: [Tracking](../../../docs/framework/windows-workflow-foundation/samples/tracking.md)  \n  \n4.  Conceptual documentation: [Workflow Tracking and Tracing](../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)  \n  \n## SQL Workflow Instance Store  \n The <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> is a SQL Server-based implementation of an instance store. An instance store stores the state of a running instance together with all data necessary to load and resume that instance. The service host instructs the instance store to save the instance state if the workflow persists, and it instructs the instance store to load the instance state when a message arrives for that instance or a delay activity expires.  \n  \n### Getting Started  \n  \n1.  In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a Workflow that contains an implicit or explicit <xref:System.Activities.Statements.Persist> activity. Add the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> behavior to your workflow service host. This can be done in code or in the application configuration file.  \n  \n2.  Samples: [Persistence](../../../docs/framework/windows-workflow-foundation/samples/persistence.md)  \n  \n3.  Conceptual documentation: [SQL Workflow Instance Store](../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md).","nodes":[{"pos":[4,332],"embed":true,"restype":"x-metadata","content":"title: \"Windows Workflow Foundation Feature Specifics | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: e84d12da-a055-45f6-b4d1-878d127b46b6\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"Windows Workflow Foundation Feature Specifics | Microsoft Docs","nodes":[{"pos":[0,62],"content":"Windows Workflow Foundation Feature Specifics | Microsoft Docs","nodes":[{"content":"Windows Workflow Foundation Feature Specifics | Microsoft Docs","pos":[0,62]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[339,384],"content":"Windows Workflow Foundation Feature Specifics","linkify":"Windows Workflow Foundation Feature Specifics","nodes":[{"content":"Windows Workflow Foundation Feature Specifics","pos":[0,45]}]},{"content":"adds a number of features to Windows Workflow Foundation.","pos":[448,505]},{"content":"This document describes a number of the new features, and gives details about scenarios in which they may be useful.","pos":[506,622]},{"pos":[631,651],"content":"Messaging Activities","linkify":"Messaging Activities","nodes":[{"content":"Messaging Activities","pos":[0,20]}]},{"content":"The messaging activities (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph>) are used to send and receive <ph id=\"ph5\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> messages from your workflow.","pos":[655,983],"source":"The messaging activities (<xref:System.ServiceModel.Activities.Receive>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.ReceiveReply>) are used to send and receive [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] messages from your workflow."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> activities are used to form a <ph id=\"ph3\">[!INCLUDE[indigo1](../../../includes/indigo1-md.md)]</ph> service operation that is exposed via WSDL just like standard <ph id=\"ph4\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> web services.","pos":[985,1294],"source":"  <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> activities are used to form a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] service operation that is exposed via WSDL just like standard [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] web services."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph> are used to consume a web service similar to a WCF <ph id=\"ph3\">&lt;xref:System.ServiceModel.ChannelFactory&gt;</ph>; an <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept> experience also exists for Workflow Foundation that generates pre-configured activities.","pos":[1296,1605],"source":"  <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> are used to consume a web service similar to a WCF <xref:System.ServiceModel.ChannelFactory>; an **Add Service Reference** experience also exists for Workflow Foundation that generates pre-configured activities."},{"pos":[1615,1656],"content":"Getting Started with Messaging Activities","linkify":"Getting Started with Messaging Activities","nodes":[{"content":"Getting Started with Messaging Activities","pos":[0,41]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a WCF Workflow Service Application project.","pos":[1666,1789],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a WCF Workflow Service Application project."},{"content":"A <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> pair will be placed on your canvas.","pos":[1790,1925],"source":" A <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> pair will be placed on your canvas."},{"content":"Right-click on the project and select <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept>.","pos":[1935,1999],"source":"Right-click on the project and select **Add Service Reference**."},{"content":"Point to an existing web service WSDL and click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[2001,2056],"source":"  Point to an existing web service WSDL and click **OK**."},{"content":"Build your project to show the generated activities (implemented using <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph>) in your toolbox.","pos":[2058,2244],"source":"  Build your project to show the generated activities (implemented using <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply>) in your toolbox."},{"content":"Samples for these activities can be found in the following sections:","pos":[2254,2322]},{"pos":[2336,2426],"content":"Basic: <bpt id=\"p1\">[</bpt>Services<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/services.md)</ept>","source":"Basic: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)"},{"pos":[2440,2534],"content":"Scenarios: <bpt id=\"p1\">[</bpt>Services<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/services.md)</ept>","source":"Scenarios: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)"},{"pos":[2544,2617],"content":"<bpt id=\"p1\">[</bpt>Conceptual documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204801)</ept>","source":"[Conceptual documentation](http://go.microsoft.com/fwlink/?LinkId=204801)"},{"pos":[2627,2719],"content":"<bpt id=\"p1\">[</bpt>Messaging activities designer documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204802)</ept>","source":"[Messaging activities designer documentation](http://go.microsoft.com/fwlink/?LinkId=204802)"},{"pos":[2729,2766],"content":"Messaging Activities Example Scenario","linkify":"Messaging Activities Example Scenario","nodes":[{"content":"Messaging Activities Example Scenario","pos":[0,37]}]},{"content":"A <ph id=\"ph1\">`BestPriceFinder`</ph> service calls out to multiple airline services to find the best ticket price for a particular route.","pos":[2770,2890],"source":"A `BestPriceFinder` service calls out to multiple airline services to find the best ticket price for a particular route."},{"content":"Implementing this scenario would require you to use the message activities to receive the price request, retrieve the prices from the back-end services, and reply to the price request with the best price.","pos":[2892,3096]},{"content":"It would also require you to use other out-of-box activities to create the business logic for calculating the best price.","pos":[3098,3219]},{"pos":[3228,3247],"content":"WorkflowServiceHost","linkify":"WorkflowServiceHost","nodes":[{"content":"WorkflowServiceHost","pos":[0,19]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph> is the out-of-box workflow host that supports multiple instances, configuration, and <ph id=\"ph2\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> messaging (although the workflows aren’t required to use messaging in order to be hosted).","pos":[3251,3530],"source":"The <xref:System.ServiceModel.WorkflowServiceHost> is the out-of-box workflow host that supports multiple instances, configuration, and [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] messaging (although the workflows aren’t required to use messaging in order to be hosted)."},{"content":"It also integrates with persistence, tracking, and instance control through a set of service behaviors.","pos":[3532,3635]},{"content":"Just like <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph>’s <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph>, the <ph id=\"ph3\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph> can be self-hosted in a console/WinForms/WPF application or Windows service, or web-hosted (as a .xamlx file) in IIS or WAS.","pos":[3637,3917],"source":"  Just like [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]’s <xref:System.ServiceModel.ServiceHost>, the <xref:System.ServiceModel.WorkflowServiceHost> can be self-hosted in a console/WinForms/WPF application or Windows service, or web-hosted (as a .xamlx file) in IIS or WAS."},{"pos":[3927,3969],"content":"Getting Started with Workflow Service Host","linkify":"Getting Started with Workflow Service Host","nodes":[{"content":"Getting Started with Workflow Service Host","pos":[0,42]}]},{"pos":[3979,4210],"content":"In Visual Studio 2010, create a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> Workflow Service Application project: this project will be set up to use <ph id=\"ph2\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph> in a web-host environment.","source":"In Visual Studio 2010, create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Workflow Service Application project: this project will be set up to use <xref:System.ServiceModel.WorkflowServiceHost> in a web-host environment."},{"content":"In order to host a non-messaging workflow, add a custom <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowHostingEndpoint&gt;</ph> that will create the instance based on a message.","pos":[4220,4387],"source":"In order to host a non-messaging workflow, add a custom <xref:System.ServiceModel.Activities.WorkflowHostingEndpoint> that will create the instance based on a message."},{"content":"Workflow instances can be controlled (e.g. suspended or terminated) by adding a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowControlEndpoint&gt;</ph> to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph> and then using a <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.WorkflowControlClient&gt;</ph>.","pos":[4397,4670],"source":"Workflow instances can be controlled (e.g. suspended or terminated) by adding a <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> to the <xref:System.ServiceModel.WorkflowServiceHost> and then using a <xref:System.ServiceModel.Activities.WorkflowControlClient>."},{"content":"Samples for the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph> can be found in the following sections:","pos":[4680,4782],"source":"Samples for the <xref:System.ServiceModel.WorkflowServiceHost> can be found in the following sections:"},{"pos":[4796,4881],"content":"<bpt id=\"p1\">[</bpt>Execution<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/execution.md)</ept>","source":"[Execution](../../../docs/framework/windows-workflow-foundation/samples/execution.md)"},{"pos":[4895,4985],"content":"Basic: <bpt id=\"p1\">[</bpt>Services<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/services.md)</ept>","source":"Basic: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)"},{"pos":[4999,5093],"content":"Scenarios: <bpt id=\"p1\">[</bpt>Services<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/services.md)</ept>","source":"Scenarios: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)"},{"pos":[5107,5245],"content":"Application: <bpt id=\"p1\">[</bpt>Suspended Instance Management<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/suspended-instance-management.md)</ept>","source":"Application: [Suspended Instance Management](../../../docs/framework/windows-workflow-foundation/samples/suspended-instance-management.md)"},{"pos":[5255,5348],"content":"<bpt id=\"p1\">[</bpt>WorkflowServiceHost Conceptual Documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204807)</ept>","source":"[WorkflowServiceHost Conceptual Documentation](http://go.microsoft.com/fwlink/?LinkId=204807)"},{"pos":[5358,5386],"content":"WorkflowServiceHost Scenario","linkify":"WorkflowServiceHost Scenario","nodes":[{"content":"WorkflowServiceHost Scenario","pos":[0,28]}]},{"content":"A BestPriceFinder service calls out to multiple airline services to find the best ticket price for a particular route.","pos":[5390,5508]},{"content":"Implementing this scenario would require you to host the workflow in <ph id=\"ph1\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph>.","pos":[5510,5626],"source":"  Implementing this scenario would require you to host the workflow in <xref:System.ServiceModel.WorkflowServiceHost>."},{"content":"It would also use the message activities to receive the price request, retrieve the prices from the back-end services, and reply to the price request with the best price.","pos":[5628,5798]},{"pos":[5807,5818],"content":"Correlation","linkify":"Correlation","nodes":[{"content":"Correlation","pos":[0,11]}]},{"content":"A correlation is one of two things:","pos":[5822,5857]},{"content":"A way of grouping messages together; that is, the relationship between a request message and its reply.","pos":[5867,5970]},{"content":"A way of mapping a piece of data to a service instance","pos":[5980,6034]},{"pos":[6044,6059],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"To get started with correlation, create a new project in Visual Studio.","pos":[6069,6140]},{"content":"Create a variable of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.CorrelationHandle&gt;</ph>.","pos":[6141,6223],"source":" Create a variable of type <xref:System.ServiceModel.Activities.CorrelationHandle>."},{"content":"An example of correlation used to group messages together is a Request-Reply correlation that groups messages together.","pos":[6233,6352]},{"content":"On a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity, click on the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A&gt;</ph> property and add a a <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.RequestReplyCorrelationInitializer&gt;</ph> using the CorrelationHandle created in the first step above.","pos":[6366,6667],"source":"On a <xref:System.ServiceModel.Activities.Receive> activity, click on the <xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A> property and add a a <xref:System.ServiceModel.Activities.RequestReplyCorrelationInitializer> using the CorrelationHandle created in the first step above."},{"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> activity by right-clicking on the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> and clicking \"Create SendReply\".","pos":[6681,6850],"source":"Create a <xref:System.ServiceModel.Activities.SendReply> activity by right-clicking on the <xref:System.ServiceModel.Activities.Receive> and clicking \"Create SendReply\"."},{"content":"Paste it into your workflow after the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity.","pos":[6851,6944],"source":" Paste it into your workflow after the <xref:System.ServiceModel.Activities.Receive> activity."},{"content":"An example of mapping a piece of data to a service instance is content-based correlation which maps a piece of data (for example, an order ID) to a particular workflow instance.","pos":[6954,7131]},{"content":"On any messaging activity, click on the <ph id=\"ph1\">`CorrelationInitializers`</ph> property and add a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.QueryCorrelationInitializer&gt;</ph> using the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.CorrelationHandle&gt;</ph> variable created above.","pos":[7145,7385],"source":"On any messaging activity, click on the `CorrelationInitializers` property and add a <xref:System.ServiceModel.Activities.QueryCorrelationInitializer> using the <xref:System.ServiceModel.Activities.CorrelationHandle> variable created above."},{"content":"Double-click on the desired property on the message (e.g. OrderID) from the drop-down menu.","pos":[7386,7477]},{"content":"Set the <ph id=\"ph1\">`CorrelatesWith`</ph> property to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.CorrelationHandle&gt;</ph> variable used above.","pos":[7478,7595],"source":" Set the `CorrelatesWith` property to the <xref:System.ServiceModel.Activities.CorrelationHandle> variable used above."},{"content":"Samples:","pos":[7605,7613]},{"pos":[7627,7717],"content":"Basic: <bpt id=\"p1\">[</bpt>Services<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/services.md)</ept>","source":"Basic: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)"},{"pos":[7731,7825],"content":"Scenarios: <bpt id=\"p1\">[</bpt>Services<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/services.md)</ept>","source":"Scenarios: [Services](../../../docs/framework/windows-workflow-foundation/samples/services.md)"},{"pos":[7839,7924],"content":"<bpt id=\"p1\">[</bpt>Correlation Conceptual Documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204939)</ept>","source":"[Correlation Conceptual Documentation](http://go.microsoft.com/fwlink/?LinkId=204939)"},{"pos":[7934,7954],"content":"Correlation Scenario","linkify":"Correlation Scenario","nodes":[{"content":"Correlation Scenario","pos":[0,20]}]},{"content":"An order-processing workflow is used to handle new order creation and updating existing orders that are in process.","pos":[7958,8073]},{"content":"Implementing this scenario would require you to host the workflow in <ph id=\"ph1\">&lt;xref:System.ServiceModel.WorkflowServiceHost&gt;</ph> and use the messaging activities.","pos":[8075,8224],"source":"  Implementing this scenario would require you to host the workflow in <xref:System.ServiceModel.WorkflowServiceHost> and use the messaging activities."},{"content":"It would also require correlation based on the <ph id=\"ph1\">`orderId`</ph> to ensure that updates are made to the correct workflow.","pos":[8226,8339],"source":"  It would also require correlation based on the `orderId` to ensure that updates are made to the correct workflow."},{"pos":[8348,8372],"content":"Simplified Configuration","linkify":"Simplified Configuration","nodes":[{"content":"Simplified Configuration","pos":[0,24]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> configuration schema is complex and provides users with many hard to find features.","pos":[8376,8516],"source":"The [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] configuration schema is complex and provides users with many hard to find features."},{"content":"In <ph id=\"ph1\">[!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)]</ph>, we have focused on helping <ph id=\"ph2\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> users configure their services with the following features:","pos":[8517,8737],"source":" In [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)], we have focused on helping [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] users configure their services with the following features:"},{"content":"Removing the need for explicit per-service configuration.","pos":[8747,8804]},{"content":"If you do not configure any <ph id=\"ph1\">\\&lt;</ph>service&gt; elements for your service, and your service does not define programmatically any endpoint, then a set of endpoints will be automatically added to your service, one per service base address and per contract implemented by your service.","pos":[8805,9078],"source":" If you do not configure any \\<service> elements for your service, and your service does not define programmatically any endpoint, then a set of endpoints will be automatically added to your service, one per service base address and per contract implemented by your service."},{"content":"Enables the user to define default values for WCF bindings and behaviors, which will be applied to services with no explicit configuration.","pos":[9088,9227]},{"content":"Standard endpoints define reusable preconfigured endpoints, which have fixed values for one or more of the endpoint properties (address, binding and contract), and allow defining custom properties.","pos":[9237,9434]},{"pos":[9444,9749],"content":"Finally, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601&gt;</ph> allows you to do central management of <ph id=\"ph2\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> client configuration, useful in scenarios in which configuration is selected or changed after the application domain load time.","source":"Finally, the <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> allows you to do central management of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client configuration, useful in scenarios in which configuration is selected or changed after the application domain load time."},{"pos":[9759,9774],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"pos":[9784,9863],"content":"<bpt id=\"p1\">[</bpt>A Developer's Guide to WCF 4.0<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204940)</ept>","source":"[A Developer's Guide to WCF 4.0](http://go.microsoft.com/fwlink/?LinkId=204940)"},{"pos":[9873,9951],"content":"<bpt id=\"p1\">[</bpt>Configuration Channel Factory<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204941)</ept>","source":"[Configuration Channel Factory](http://go.microsoft.com/fwlink/?LinkId=204941)"},{"pos":[9961,10035],"content":"<bpt id=\"p1\">[</bpt>Standard Endpoint Element<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204942)</ept>","source":"[Standard Endpoint Element](http://go.microsoft.com/fwlink/?LinkId=204942)"},{"pos":[10045,10148],"content":"<bpt id=\"p1\">[</bpt>Service configuration improvements in .Net Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204943)</ept>","source":"[Service configuration improvements in .Net Framework 4](http://go.microsoft.com/fwlink/?LinkId=204943)"},{"pos":[10158,10285],"content":"<bpt id=\"p1\">[</bpt>Common User Mistake in .NET 4: Mistyping the WF/WCF Service Configuration Name<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204944)</ept>","source":"[Common User Mistake in .NET 4: Mistyping the WF/WCF Service Configuration Name](http://go.microsoft.com/fwlink/?LinkId=204944)"},{"pos":[10295,10329],"content":"Simplified Configuration Scenarios","linkify":"Simplified Configuration Scenarios","nodes":[{"content":"Simplified Configuration Scenarios","pos":[0,34]}]},{"content":"An experienced ASMX developer wants to start using <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph>.","pos":[10339,10443],"source":"An experienced ASMX developer wants to start using [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]."},{"content":"However, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> seems way too complicated!","pos":[10444,10532],"source":" However, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] seems way too complicated!"},{"content":"What is all that information that I need to write in a configuration file?","pos":[10533,10607]},{"content":"In .NET 4, you can even decide to not have a configuration file at all.","pos":[10608,10679]},{"content":"An existing set of WCF services are very difficult to configure and maintain.","pos":[10689,10766]},{"content":"The configuration file has thousands of lines of XML code that are extremely dangerous to touch.","pos":[10767,10863]},{"content":"Help is needed to reduce that amount of code to something more manageable.","pos":[10864,10938]},{"pos":[10947,10969],"content":"Data Contract Resolver","linkify":"Data Contract Resolver","nodes":[{"content":"Data Contract Resolver","pos":[0,22]}]},{"content":"In .NET 3.5, there were a few limitations in the design of known types:","pos":[10973,11044]},{"content":"Adding known types dynamically, during serialization or deserialization, was not possible.","pos":[11054,11144]},{"content":"Serializers could not deal with unknown xsi:type information.","pos":[11154,11215]},{"content":"It was not possible for users to specify what xsi:type they would like to have appear on the wire to, for instance, make the size of a serialization instance on the wire smaller.","pos":[11225,11403]},{"pos":[11410,11530],"content":"The <bpt id=\"p1\">[</bpt>DataContractResolver<ept id=\"p1\">](../../../docs/framework/wcf/samples/datacontractresolver.md)</ept> solves these issues in .NET 4.5.","source":"The [DataContractResolver](../../../docs/framework/wcf/samples/datacontractresolver.md) solves these issues in .NET 4.5."},{"pos":[11540,11555],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"pos":[11565,11654],"content":"<bpt id=\"p1\">[</bpt>Data Contract Resolver API documentation<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204946)</ept>","source":"[Data Contract Resolver API documentation](http://go.microsoft.com/fwlink/?LinkId=204946)"},{"pos":[11664,11751],"content":"<bpt id=\"p1\">[</bpt>Introducing the Data Contract Resolver<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204947)</ept>","source":"[Introducing the Data Contract Resolver](http://go.microsoft.com/fwlink/?LinkId=204947)"},{"content":"Samples:","pos":[11761,11769]},{"pos":[11783,11866],"content":"<bpt id=\"p1\">[</bpt>DataContractResolver<ept id=\"p1\">](../../../docs/framework/wcf/samples/datacontractresolver.md)</ept>","source":"[DataContractResolver](../../../docs/framework/wcf/samples/datacontractresolver.md)"},{"pos":[11880,11967],"content":"<bpt id=\"p1\">[</bpt>KnownAssemblyAttribute<ept id=\"p1\">](../../../docs/framework/wcf/samples/knownassemblyattribute.md)</ept>","source":"[KnownAssemblyAttribute](../../../docs/framework/wcf/samples/knownassemblyattribute.md)"},{"pos":[11977,12009],"content":"Data Contract Resolver Scenarios","linkify":"Data Contract Resolver Scenarios","nodes":[{"content":"Data Contract Resolver Scenarios","pos":[0,32]}]},{"content":"Avoiding having to declare tens of <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.KnownTypeAttribute&gt;</ph> objects in a service.","pos":[12019,12130],"source":"Avoiding having to declare tens of <xref:System.Runtime.Serialization.KnownTypeAttribute> objects in a service."},{"content":"Reducing the size of the XML blob.","pos":[12140,12174]},{"pos":[12183,12192],"content":"Flowchart","linkify":"Flowchart","nodes":[{"content":"Flowchart","pos":[0,9]}]},{"content":"Flowchart is a well-known paradigm to visually represent domain problems.","pos":[12196,12269]},{"content":"It is a new control flow style we’re introducing in .NET 4.","pos":[12270,12329]},{"content":"A core characteristic of Flowchart is that only one activity is executed at any given time.","pos":[12330,12421]},{"content":"Flowcharts can express loops and alternative outcomes, but cannot natively express concurrent execution of multiple nodes.","pos":[12422,12544]},{"pos":[12554,12569],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a workflow console application.","pos":[12579,12690],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application."},{"content":"Add a Flowchart in the workflow designer.","pos":[12691,12732]},{"content":"The flowchart feature uses the following classes:","pos":[12742,12791]},{"content":"Samples:","pos":[13102,13110]},{"pos":[13124,13297],"content":"<bpt id=\"p1\">[</bpt>Fault Handling in a Flowchart Activity Using TryCatch<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/fault-handling-in-a-flowchart-activity-using-trycatch.md)</ept>","source":"[Fault Handling in a Flowchart Activity Using TryCatch](../../../docs/framework/windows-workflow-foundation/samples/fault-handling-in-a-flowchart-activity-using-trycatch.md)"},{"pos":[13311,13504],"content":"<bpt id=\"p1\">[</bpt>StateMachine Scenario Using a Combination of FlowChart and Pick<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/statemachine-scenario-using-a-combination-of-flowchart-and-pick.md)</ept>","source":"[StateMachine Scenario Using a Combination of FlowChart and Pick](../../../docs/framework/windows-workflow-foundation/samples/statemachine-scenario-using-a-combination-of-flowchart-and-pick.md)"},{"pos":[13518,13613],"content":"<bpt id=\"p1\">[</bpt>Hiring Process<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/hiring-process.md)</ept>","source":"[Hiring Process](../../../docs/framework/windows-workflow-foundation/samples/hiring-process.md)"},{"content":"Designer Documentation:","pos":[13623,13646]},{"pos":[13660,13752],"content":"<bpt id=\"p1\">[</bpt>Flowchart Activity Designers<ept id=\"p1\">](/visualstudio/workflow-designer/flowchart-activity-designers)</ept>","source":"[Flowchart Activity Designers](/visualstudio/workflow-designer/flowchart-activity-designers)"},{"pos":[13762,13781],"content":"Flowchart Scenarios","linkify":"Flowchart Scenarios","nodes":[{"content":"Flowchart Scenarios","pos":[0,19]}]},{"content":"A flowchart activity can be used to implement a guessing game.","pos":[13785,13847]},{"content":"The guessing game is very simple: the computer selects a random number and the player has to guess that number.","pos":[13848,13959]},{"content":"When the player submits each guess, the computer shows him a hint (i.e. \"try a lower number\").","pos":[13960,14054]},{"content":"If the player finds the number in less than 7 attempts, he receives a special congratulation from the computer.","pos":[14055,14166]},{"content":"This game can be implemented with a combination of the following procedural activities:","pos":[14167,14254]},{"pos":[14582,14659],"content":"Procedural activities (Sequence, If, ForEach, Switch, Assign, DoWhile, While)","linkify":"Procedural activities (Sequence, If, ForEach, Switch, Assign, DoWhile, While)","nodes":[{"content":"Procedural activities (Sequence, If, ForEach, Switch, Assign, DoWhile, While)","pos":[0,77]}]},{"content":"Procedural activities provide a mechanism to model sequential control flow using concepts that are familiar to programmers.","pos":[14663,14786]},{"content":"These activities enable traditionally structured programming language constructs and, when appropriate, provide language parity with common procedural languages such as C#/VB.","pos":[14787,14962]},{"pos":[14972,14987],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a workflow console application.","pos":[14997,15108],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application."},{"content":"Add procedural activities in the workflow designer.","pos":[15109,15160]},{"content":"Samples:","pos":[15170,15178]},{"pos":[15192,15287],"content":"<bpt id=\"p1\">[</bpt>Hiring Process<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/hiring-process.md)</ept>","source":"[Hiring Process](../../../docs/framework/windows-workflow-foundation/samples/hiring-process.md)"},{"pos":[15301,15420],"content":"<bpt id=\"p1\">[</bpt>Corporate Purchase Process<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/corporate-purchase-process.md)</ept>","source":"[Corporate Purchase Process](../../../docs/framework/windows-workflow-foundation/samples/corporate-purchase-process.md)"},{"content":"Designer Documentation:","pos":[15430,15453]},{"pos":[15467,15555],"content":"<bpt id=\"p1\">[</bpt>Parallel Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/parallel-activity-designer)</ept>","source":"[Parallel Activity Designer](/visualstudio/workflow-designer/parallel-activity-designer)"},{"pos":[15569,15677],"content":"<bpt id=\"p1\">[</bpt>ParallelForEach<ph id=\"ph1\">\\&lt;</ph>T&gt; Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/parallelforeach-t-activity-designer)</ept>","source":"[ParallelForEach\\<T> Activity Designer](/visualstudio/workflow-designer/parallelforeach-t-activity-designer)"},{"pos":[15687,15716],"content":"Procedural Activity Scenarios","linkify":"Procedural Activity Scenarios","nodes":[{"content":"Procedural Activity Scenarios","pos":[0,29]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.Statements.Parallel&gt;</ph>Parallel: An intranet document management system has a document approval workflow.","pos":[15726,15852],"source":"<xref:System.Activities.Statements.Parallel>Parallel: An intranet document management system has a document approval workflow."},{"content":"Documents need to be approved by people in several departments before they can be published to the intranet.","pos":[15853,15961]},{"content":"There isn’t an established order for the approvals; they can occur at any time while the document is in the \"approval pending\" phase.","pos":[15962,16095]},{"content":"When a user submits a document for review it must be approved by her direct manager, the intranet administrator, and the internal communications manager.","pos":[16096,16249]},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.Statements.ParallelForEach%601&gt;</ph>: A WF application manages corporate buys within a large company.","pos":[16259,16379],"source":"<xref:System.Activities.Statements.ParallelForEach%601>: A WF application manages corporate buys within a large company."},{"content":"The corporate rules dictate that before planning any purchase operation, the valuations of three different vendors is required.","pos":[16380,16507]},{"content":"An employee from the buying department selects three vendors from the company’s vendor list.","pos":[16508,16600]},{"content":"After these vendors have been selected and notified, the company will wait for their economic proposals.","pos":[16601,16705]},{"content":"The proposals can come in any order.","pos":[16706,16742]},{"content":"To implement this scenario in WF, we use a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.ParallelForEach%601&gt;</ph> that will iterate through our collection of vendors and ask for their economic proposals.","pos":[16743,16931],"source":" To implement this scenario in WF, we use a <xref:System.Activities.Statements.ParallelForEach%601> that will iterate through our collection of vendors and ask for their economic proposals."},{"content":"After all offers are gathered, the best one is selected and displayed.","pos":[16932,17002]},{"pos":[17011,17023],"content":"InvokeMethod","linkify":"InvokeMethod","nodes":[{"content":"InvokeMethod","pos":[0,12]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.InvokeMethod&gt;</ph> activity allows invoking public methods in objects or types in scope.","pos":[17027,17149],"source":"The <xref:System.Activities.Statements.InvokeMethod> activity allows invoking public methods in objects or types in scope."},{"content":"It supports invoking instance and static methods with or without parameters (including parameter arrays), and generic methods.","pos":[17150,17276]},{"content":"It also allows executing method synchronously and asynchronously.","pos":[17277,17342]},{"pos":[17352,17367],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a workflow console application.","pos":[17377,17488],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application."},{"content":"Add an <ph id=\"ph1\">&lt;xref:System.Activities.Statements.InvokeMethod&gt;</ph> activity in the workflow designer, and configure static and instance methods on it.","pos":[17489,17628],"source":" Add an <xref:System.Activities.Statements.InvokeMethod> activity in the workflow designer, and configure static and instance methods on it."},{"content":"Samples:","pos":[17638,17646]},{"pos":[17660,17751],"content":"<bpt id=\"p1\">[</bpt>InvokeMethod<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/invokemethod.md)</ept>","source":"[InvokeMethod](../../../docs/framework/windows-workflow-foundation/samples/invokemethod.md)"},{"pos":[17761,17881],"content":"Designer Documentation: <bpt id=\"p1\">[</bpt>InvokeMethod Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/invokemethod-activity-designer)</ept>","source":"Designer Documentation: [InvokeMethod Activity Designer](/visualstudio/workflow-designer/invokemethod-activity-designer)"},{"pos":[17891,17913],"content":"InvokeMethod Scenarios","linkify":"InvokeMethod Scenarios","nodes":[{"content":"InvokeMethod Scenarios","pos":[0,22]}]},{"content":"A method in an object in scope needs to be invoked.","pos":[17923,17974]},{"content":"For example, a value needs to be added to a dictionary.","pos":[17975,18030]},{"content":"The Add method of the instance of the dictionary is invoked, and the key and value are provided.","pos":[18031,18127]},{"content":"A method needs to be invoked on a legacy CLR object.","pos":[18137,18189]},{"content":"Instead of creating a custom activity to wrap the call to that legacy class, if it is in scope during the workflow execution, <ph id=\"ph1\">&lt;xref:System.Activities.Statements.InvokeMethod&gt;</ph> can be used.","pos":[18190,18377],"source":" Instead of creating a custom activity to wrap the call to that legacy class, if it is in scope during the workflow execution, <xref:System.Activities.Statements.InvokeMethod> can be used."},{"pos":[18386,18411],"content":"Error handling activities","linkify":"Error handling activities","nodes":[{"content":"Error handling activities","pos":[0,25]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> activity provides a mechanism for catching exceptions that occur during the execution of a set of contained activities (similar to the Try/Catch construct in C#/VB).","pos":[18415,18629],"source":"The <xref:System.Activities.Statements.TryCatch> activity provides a mechanism for catching exceptions that occur during the execution of a set of contained activities (similar to the Try/Catch construct in C#/VB)."},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> provides exception handling at the workflow level.","pos":[18630,18725],"source":" <xref:System.Activities.Statements.TryCatch> provides exception handling at the workflow level."},{"content":"When an unhandled exception is thrown, the workflow is aborted and the Finally block won’t be executed.","pos":[18726,18829]},{"content":"This behavior is consistent with C#.","pos":[18830,18866]},{"pos":[18876,18891],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a workflow console application.","pos":[18901,19012],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application."},{"content":"Add a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> activity in the workflow designer.","pos":[19013,19098],"source":" Add a <xref:System.Activities.Statements.TryCatch> activity in the workflow designer."},{"content":"Samples:","pos":[19108,19116]},{"pos":[19130,19303],"content":"<bpt id=\"p1\">[</bpt>Fault Handling in a Flowchart Activity Using TryCatch<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/fault-handling-in-a-flowchart-activity-using-trycatch.md)</ept>","source":"[Fault Handling in a Flowchart Activity Using TryCatch](../../../docs/framework/windows-workflow-foundation/samples/fault-handling-in-a-flowchart-activity-using-trycatch.md)"},{"pos":[19317,19438],"content":"<bpt id=\"p1\">[</bpt>Using Procedural Activities<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/using-procedural-activities.md)</ept>","source":"[Using Procedural Activities](../../../docs/framework/windows-workflow-foundation/samples/using-procedural-activities.md)"},{"pos":[19448,19574],"content":"Designer Documentation: <bpt id=\"p1\">[</bpt>Error Handling Activity Designers<ept id=\"p1\">](/visualstudio/workflow-designer/error-handling-activity-designers)</ept>","source":"Designer Documentation: [Error Handling Activity Designers](/visualstudio/workflow-designer/error-handling-activity-designers)"},{"pos":[19584,19608],"content":"Error handling scenarios","linkify":"Error handling scenarios","nodes":[{"content":"Error handling scenarios","pos":[0,24]}]},{"content":"A set of activities needs to be executed, and specific logic needs to be executed when an error occurs.","pos":[19612,19715]},{"content":"If during that error handling logic it is found that the error is not recoverable, the exception will be rethrown, and the parent activity (or the host) will deal with the problem.","pos":[19716,19896]},{"pos":[19905,19918],"content":"Pick activity","linkify":"Pick activity","nodes":[{"content":"Pick activity","pos":[0,13]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> Activity provides event-based control flow modeling in WF.","pos":[19922,20025],"source":"The <xref:System.Activities.Statements.Pick> Activity provides event-based control flow modeling in WF."},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> contains many branches where each branch waits for a particular event to occur before running.","pos":[20026,20161],"source":" <xref:System.Activities.Statements.Pick> contains many branches where each branch waits for a particular event to occur before running."},{"content":"In this setup, a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> behaves similar to a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Switch%601&gt;</ph> to which the Activity will execute only one of the set of events it is listening.","pos":[20162,20369],"source":" In this setup, a <xref:System.Activities.Statements.Pick> behaves similar to a <xref:System.Activities.Statements.Switch%601> to which the Activity will execute only one of the set of events it is listening."},{"content":"Each branch is event driven and the event that occurs runs the corresponding branch first.","pos":[20370,20460]},{"content":"All other branches cancel and stop listening for events.","pos":[20461,20517]},{"pos":[20527,20542],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a workflow console application.","pos":[20552,20663],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a workflow console application."},{"content":"Add a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity in the workflow designer.","pos":[20664,20745],"source":" Add a <xref:System.Activities.Statements.Pick> activity in the workflow designer."},{"pos":[20755,20876],"content":"Sample: <bpt id=\"p1\">[</bpt>Using the Pick Activity<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/using-the-pick-activity.md)</ept>","source":"Sample: [Using the Pick Activity](../../../docs/framework/windows-workflow-foundation/samples/using-the-pick-activity.md)"},{"pos":[20886,20990],"content":"Designer documentation: <bpt id=\"p1\">[</bpt>Pick Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/pick-activity-designer)</ept>","source":"Designer documentation: [Pick Activity Designer](/visualstudio/workflow-designer/pick-activity-designer)"},{"pos":[21000,21013],"content":"Pick Scenario","linkify":"Pick Scenario","nodes":[{"content":"Pick Scenario","pos":[0,13]}]},{"content":"A user needs to be prompted for input.","pos":[21017,21055]},{"content":"Under normal circumstances, the developer would use a method call like <ph id=\"ph1\">&lt;xref:System.Console.ReadLine%2A&gt;</ph> to prompt for a user’s input.","pos":[21056,21190],"source":" Under normal circumstances, the developer would use a method call like <xref:System.Console.ReadLine%2A> to prompt for a user’s input."},{"content":"The problem with this setup is that the program waits until the user enters something.","pos":[21191,21277]},{"content":"In this scenario, a time-out is needed to unblock a blocking activity.","pos":[21278,21348]},{"content":"A common scenario is one that requires a task to be completed within a given time duration.","pos":[21349,21440]},{"content":"Timing out a blocking activity is a scenario where Pick adds a lot of value.","pos":[21441,21517]},{"pos":[21526,21545],"content":"WCF Routing Service","linkify":"WCF Routing Service","nodes":[{"content":"WCF Routing Service","pos":[0,19]}]},{"content":"The Routing Service is designed to be a generic software Router that allows you to control how <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph>messages flow in between your clients and services.","pos":[21549,21747],"source":"The Routing Service is designed to be a generic software Router that allows you to control how [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]messages flow in between your clients and services."},{"content":"The Routing Service allows you to decouple your clients from your services, which gives you much more freedom in terms of the configurations that you can support and the flexibility you have when considering how to host your services.","pos":[21749,21983]},{"content":"In .NET 3.5, clients and services were tightly coupled; a client had to know about all of the services it needed to talk to and where they were located.","pos":[21985,22137]},{"content":"In addition, WCF in .Net Framework 3.5 had the following limitations:","pos":[22138,22207]},{"content":"Error handling was complex, as this logic had to be hard-coded into the client.","pos":[22217,22296]},{"content":"Clients and services had to always use the same bindings.","pos":[22306,22363]},{"content":"Services were rarely well factored: it is easier to have the client talk to one service which implements everything, rather than needing to choose between multiple services.","pos":[22373,22546]},{"content":"The routing service in .Net 4 is designed to make these problems easier to solve.","pos":[22553,22634]},{"content":"The new routing service has the following features:","pos":[22635,22686]},{"content":"Content based routing (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.MessageFilter&gt;</ph> objects examine a message to determine where it should be sent.)","pos":[22696,22835],"source":"Content based routing (<xref:System.ServiceModel.Dispatcher.MessageFilter> objects examine a message to determine where it should be sent.)"},{"content":"Protocol bridging (transport &amp; message)","pos":[22845,22884],"source":"Protocol bridging (transport & message)"},{"content":"Error handling (the router catches communication exceptions and fails over to backup endpoints)","pos":[22894,22989]},{"content":"Dynamic (in memory) update of <ph id=\"ph1\">&lt;xref:System.ServiceModel.Dispatcher.MessageFilterTable%601&gt;</ph> and Routing Configuration.","pos":[22999,23116],"source":"Dynamic (in memory) update of <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601> and Routing Configuration."},{"pos":[23126,23141],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"pos":[23151,23231],"content":"Documentation: <bpt id=\"p1\">[</bpt>Routing<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/routing.md)</ept>","source":"Documentation: [Routing](../../../docs/framework/wcf/feature-details/routing.md)"},{"pos":[23241,23347],"content":"Samples: <bpt id=\"p1\">[</bpt>Routing Services &amp;#91;WCF Samples&amp;#93;<ept id=\"p1\">](../../../docs/framework/wcf/samples/routing-services.md)</ept>","source":"Samples: [Routing Services &#91;WCF Samples&#93;](../../../docs/framework/wcf/samples/routing-services.md)"},{"pos":[23357,23426],"content":"Blog: <bpt id=\"p1\">[</bpt>Routing Rules!<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=204956)</ept>","source":"Blog: [Routing Rules!](http://go.microsoft.com/fwlink/?LinkId=204956)"},{"pos":[23436,23453],"content":"Routing Scenarios","linkify":"Routing Scenarios","nodes":[{"content":"Routing Scenarios","pos":[0,17]}]},{"content":"The routing service is useful in the following scenarios:","pos":[23457,23514]},{"content":"Clients can talk to multiple services without having to address them all directly.","pos":[23524,23606]},{"content":"Clients can perform additional logic on a client request to determine where to route it","pos":[23616,23703]},{"content":"Decompose the operations a client performs into multiple service implementations without refactoring the client.","pos":[23713,23825]},{"content":"Clients and services can speak different bindings with different security settings.","pos":[23835,23918]},{"content":"Clients can be enabled to be more robust against failure or the unavailability of services.","pos":[23928,24019]},{"pos":[24028,24041],"content":"WCF Discovery","linkify":"WCF Discovery","nodes":[{"content":"WCF Discovery","pos":[0,13]}]},{"content":"Discovery is a framework technology that allows you to incorporate a discovery mechanism to your application infrastructure.","pos":[24098,24222]},{"content":"You can use this to make your service discoverable, and configure your clients to search for services.","pos":[24223,24325]},{"content":"Clients no longer need to be hard coded with endpoint, making your application more robust and fault tolerant.","pos":[24326,24436]},{"content":"Discovery is the perfect platform to build auto-configuration capabilities into your application.","pos":[24437,24534]},{"content":"The product is built on top of the WS-Discovery standard.","pos":[24541,24598]},{"content":"It’s designed to be interoperable, extensible, and generic.","pos":[24599,24658]},{"content":"The product supports two modes of operation:","pos":[24659,24703]},{"content":"Managed: where there is an entity on the network knowledgeable about existing services, clients query it directly for information.","pos":[24713,24843]},{"content":"This is analogous to Active Directory.","pos":[24844,24882]},{"content":"Ad-hoc: where clients use multicast messages to locate services.","pos":[24892,24956]},{"content":"Furthermore, discovery messages are network protocol agnostic; you can use them on top any protocol that supports the mode requirements.","pos":[24963,25099]},{"content":"For example, discovery multicast messages can be sent over the UDP channel or any other network that supports multicast messaging.","pos":[25100,25230]},{"content":"These design points, combined with feature flexibility, allow you to adapt the discovery specifically to your solution.","pos":[25232,25351]},{"pos":[25361,25376],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"pos":[25386,25478],"content":"Documentation: <bpt id=\"p1\">[</bpt>WCF Discovery<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/wcf-discovery.md)</ept>","source":"Documentation: [WCF Discovery](../../../docs/framework/wcf/feature-details/wcf-discovery.md)"},{"pos":[25488,25576],"content":"Samples: <bpt id=\"p1\">[</bpt>Discovery (Samples)<ept id=\"p1\">](../../../docs/framework/wcf/samples/discovery-samples.md)</ept>","source":"Samples: [Discovery (Samples)](../../../docs/framework/wcf/samples/discovery-samples.md)"},{"pos":[25586,25605],"content":"Discovery Scenarios","linkify":"Discovery Scenarios","nodes":[{"content":"Discovery Scenarios","pos":[0,19]}]},{"content":"A developer doesn't want to hard code endpoints, since it is unknown when my service will be available.","pos":[25609,25712]},{"content":"Instead, the developer wants to choose a service at runtime.","pos":[25713,25773]},{"content":"More decoupling, robustness, and auto-configuration is needed between the components in the application.","pos":[25774,25878]},{"pos":[25887,25895],"content":"Tracking","linkify":"Tracking","nodes":[{"content":"Tracking","pos":[0,8]}]},{"content":"Workflow tracking provides insight into the execution of a workflow instance.","pos":[25899,25976]},{"content":"The tracking events are emitted from a workflow at the workflow instance level and when activities within the workflow execute.","pos":[25978,26105]},{"content":"A workflow tracking participant needs to be added to the workflow host to subscribe to tracking records.","pos":[26106,26210]},{"content":"The tracking records are filtered using a tracking profile.","pos":[26211,26270]},{"content":"The .Net Framework provides an ETW (Event Tracing for Windows) tracking participant, and a basic profile is installed in the machine.config file.","pos":[26271,26416]},{"pos":[26426,26441],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs2010](../../../includes/vs2010-md.md)]</ph>, create a WCF Workflow Service Application project.","pos":[26451,26556],"source":"In [!INCLUDE[vs2010](../../../includes/vs2010-md.md)], create a WCF Workflow Service Application project."},{"content":"A <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> pair will be placed on your canvas to start.","pos":[26557,26701],"source":" A <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply> pair will be placed on your canvas to start."},{"content":"Open the web.config and add an ETW tracking behavior with no profile.","pos":[26711,26780]},{"content":"The default profile is used.","pos":[26794,26822]},{"content":"Open event viewer and enable the analytic channel in the following node: <bpt id=\"p1\">**</bpt>Event Viewer<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Applications and Services Logs<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Microsoft<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>Windows<ept id=\"p4\">**</ept>, <bpt id=\"p5\">**</bpt>Application Server-Applications<ept id=\"p5\">**</ept>.","pos":[26836,27027],"source":"Open event viewer and enable the analytic channel in the following node: **Event Viewer**, **Applications and Services Logs**, **Microsoft**, **Windows**, **Application Server-Applications**."},{"content":"Right-click <bpt id=\"p1\">**</bpt>Analytic<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Enable Log<ept id=\"p2\">**</ept>.","pos":[27028,27079],"source":" Right-click **Analytic** and select **Enable Log**."},{"content":"Run the workflow service.","pos":[27093,27118]},{"content":"Observe the workflow tracking events in event viewer.","pos":[27132,27185]},{"pos":[27195,27287],"content":"Samples: <bpt id=\"p1\">[</bpt>Tracking<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/tracking.md)</ept>","source":"Samples: [Tracking](../../../docs/framework/windows-workflow-foundation/samples/tracking.md)"},{"pos":[27297,27440],"content":"Conceptual documentation: <bpt id=\"p1\">[</bpt>Workflow Tracking and Tracing<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)</ept>","source":"Conceptual documentation: [Workflow Tracking and Tracing](../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)"},{"pos":[27449,27476],"content":"SQL Workflow Instance Store","linkify":"SQL Workflow Instance Store","nodes":[{"content":"SQL Workflow Instance Store","pos":[0,27]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore&gt;</ph> is a SQL Server-based implementation of an instance store.","pos":[27480,27610],"source":"The <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> is a SQL Server-based implementation of an instance store."},{"content":"An instance store stores the state of a running instance together with all data necessary to load and resume that instance.","pos":[27611,27734]},{"content":"The service host instructs the instance store to save the instance state if the workflow persists, and it instructs the instance store to load the instance state when a message arrives for that instance or a delay activity expires.","pos":[27735,27966]},{"pos":[27976,27991],"content":"Getting Started","linkify":"Getting Started","nodes":[{"content":"Getting Started","pos":[0,15]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]</ph>, create a Workflow that contains an implicit or explicit <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Persist&gt;</ph> activity.","pos":[28001,28183],"source":"In [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)], create a Workflow that contains an implicit or explicit <xref:System.Activities.Statements.Persist> activity."},{"content":"Add the <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore&gt;</ph> behavior to your workflow service host.","pos":[28184,28299],"source":" Add the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> behavior to your workflow service host."},{"content":"This can be done in code or in the application configuration file.","pos":[28300,28366]},{"pos":[28376,28474],"content":"Samples: <bpt id=\"p1\">[</bpt>Persistence<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/samples/persistence.md)</ept>","source":"Samples: [Persistence](../../../docs/framework/windows-workflow-foundation/samples/persistence.md)"},{"pos":[28484,28624],"content":"Conceptual documentation: <bpt id=\"p1\">[</bpt>SQL Workflow Instance Store<ept id=\"p1\">](../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)</ept>.","source":"Conceptual documentation: [SQL Workflow Instance Store](../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)."}]}