{"content":"---\ntitle: \"Object References | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 7a93d260-91c3-4448-8f7a-a66fb562fc23\ncaps.latest.revision: 10\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Object References\nThis sample demonstrates how to pass objects by references between server and client. The sample uses simulated *social networks*. A social network consists of a `Person` class that contains a list of friends in which each friend is an instance of the `Person` class, with its own list of friends. This creates a graph of objects. The service exposes operations on these social networks.  \n  \n In this sample, the service is hosted by Internet Information Services (IIS) and the client is a console application (.exe).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n## Service  \n The `Person` class has the <xref:System.Runtime.Serialization.DataContractAttribute> attribute applied, with the <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> field set to `true` to declare it as a reference type. All properties have the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute applied.  \n  \n```  \n[DataContract(IsReference=true)]  \npublic class Person  \n{  \n    string name;  \n    string location;  \n    string gender;  \n    int age;  \n    List<Person> friends;  \n    [DataMember()]  \n    public string Name  \n    {  \n        get { return name; }  \n        set { name = value; }  \n    }  \n    [DataMember()]  \n    public string Location  \n    {  \n        get { return location; }  \n        set { location = value; }  \n    }  \n    [DataMember()]  \n    public string Gender  \n    {  \n        get { return gender; }  \n        set { gender = value; }  \n    }  \nâ€¦  \n}  \n```  \n  \n The `GetPeopleInNetwork` operation takes a parameter of type `Person` and returns all the people in the network; that is, all the people in the `friends` list, the friend's friends, and so on, without duplicates.  \n  \n```  \npublic List<Person> GetPeopleInNetwork(Person p)  \n{  \n    List<Person> people = new List<Person>();  \n    ListPeopleInNetwork(p, people);  \n    return people;  \n  \n}  \n```  \n  \n The `GetMutualFriends` operation takes a parameter of type `Person` and returns all the friends in the list who also have this person in their `friends` list.  \n  \n```  \npublic List<Person> GetMutualFriends(Person p)  \n{  \n    List<Person> mutual = new List<Person>();  \n    foreach (Person friend in p.Friends)  \n    {  \n        if (friend.Friends.Contains(p))  \n            mutual.Add(friend);  \n    }  \n    return mutual;  \n}  \n```  \n  \n The `GetCommonFriends` operation takes a list of type `Person`. The list is expected to have two `Person` objects in it. The operation returns a list of `Person` objects that are in the `friends` lists of both `Person` objects in the input list.  \n  \n```  \npublic List<Person> GetCommonFriends(List<Person> people)  \n{  \n    List<Person> common = new List<Person>();  \n    foreach (Person friend in people[0].Friends)  \n        if (people[1].Friends.Contains(friend))  \n            common.Add(friend);  \n    return common;  \n}  \n```  \n  \n## Client  \n The client proxy is created using the **Add Service Reference** feature of [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)].  \n  \n A social network that consists of five `Person` objects is created. The client calls each of the three methods in the service.  \n  \n#### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Contract\\Data\\ObjectReferences`  \n  \n## See Also  \n <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A>   \n [Interoperable Object References](../../../../docs/framework/wcf/feature-details/interoperable-object-references.md)","nodes":[{"pos":[4,338],"nodes":[{"content":"Object References | Microsoft Docs","nodes":[{"pos":[0,34],"content":"Object References | Microsoft Docs","nodes":[{"content":"Object References | Microsoft Docs","pos":[0,34]}]}],"pos":[6,43],"yaml":true}],"content":"title: \"Object References | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 7a93d260-91c3-4448-8f7a-a66fb562fc23\ncaps.latest.revision: 10\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[345,362],"content":"Object References","linkify":"Object References","nodes":[{"content":"Object References","pos":[0,17]}]},{"content":"This sample demonstrates how to pass objects by references between server and client.","pos":[363,448]},{"content":"The sample uses simulated <bpt id=\"p1\">*</bpt>social networks<ept id=\"p1\">*</ept>.","pos":[449,493],"source":" The sample uses simulated *social networks*."},{"content":"A social network consists of a <ph id=\"ph1\">`Person`</ph> class that contains a list of friends in which each friend is an instance of the <ph id=\"ph2\">`Person`</ph> class, with its own list of friends.","pos":[494,660],"source":" A social network consists of a `Person` class that contains a list of friends in which each friend is an instance of the `Person` class, with its own list of friends."},{"content":"This creates a graph of objects.","pos":[661,693]},{"content":"The service exposes operations on these social networks.","pos":[694,750]},{"content":"In this sample, the service is hosted by Internet Information Services (IIS) and the client is a console application (.exe).","pos":[757,881]},{"pos":[889,996],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"pos":[1005,1012],"content":"Service","linkify":"Service","nodes":[{"content":"Service","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`Person`</ph> class has the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> attribute applied, with the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A&gt;</ph> field set to <ph id=\"ph4\">`true`</ph> to declare it as a reference type.","pos":[1016,1256],"source":"The `Person` class has the <xref:System.Runtime.Serialization.DataContractAttribute> attribute applied, with the <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> field set to `true` to declare it as a reference type."},{"content":"All properties have the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataMemberAttribute&gt;</ph> attribute applied.","pos":[1257,1355],"source":" All properties have the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute applied."},{"pos":[1945,2157],"content":"The <ph id=\"ph1\">`GetPeopleInNetwork`</ph> operation takes a parameter of type <ph id=\"ph2\">`Person`</ph> and returns all the people in the network; that is, all the people in the <ph id=\"ph3\">`friends`</ph> list, the friend's friends, and so on, without duplicates.","source":"The `GetPeopleInNetwork` operation takes a parameter of type `Person` and returns all the people in the network; that is, all the people in the `friends` list, the friend's friends, and so on, without duplicates."},{"pos":[2348,2506],"content":"The <ph id=\"ph1\">`GetMutualFriends`</ph> operation takes a parameter of type <ph id=\"ph2\">`Person`</ph> and returns all the friends in the list who also have this person in their <ph id=\"ph3\">`friends`</ph> list.","source":"The `GetMutualFriends` operation takes a parameter of type `Person` and returns all the friends in the list who also have this person in their `friends` list."},{"content":"The <ph id=\"ph1\">`GetCommonFriends`</ph> operation takes a list of type <ph id=\"ph2\">`Person`</ph>.","pos":[2789,2852],"source":"The `GetCommonFriends` operation takes a list of type `Person`."},{"content":"The list is expected to have two <ph id=\"ph1\">`Person`</ph> objects in it.","pos":[2853,2909],"source":" The list is expected to have two `Person` objects in it."},{"content":"The operation returns a list of <ph id=\"ph1\">`Person`</ph> objects that are in the <ph id=\"ph2\">`friends`</ph> lists of both <ph id=\"ph3\">`Person`</ph> objects in the input list.","pos":[2910,3034],"source":" The operation returns a list of `Person` objects that are in the `friends` lists of both `Person` objects in the input list."},{"pos":[3330,3336],"content":"Client","linkify":"Client","nodes":[{"content":"Client","pos":[0,6]}]},{"pos":[3340,3489],"content":"The client proxy is created using the <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept> feature of <ph id=\"ph1\">[!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)]</ph>.","source":"The client proxy is created using the **Add Service Reference** feature of [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)]."},{"content":"A social network that consists of five <ph id=\"ph1\">`Person`</ph> objects is created.","pos":[3496,3563],"source":"A social network that consists of five `Person` objects is created."},{"content":"The client calls each of the three methods in the service.","pos":[3564,3622]},{"pos":[3633,3669],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3679,3878],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3888,4097],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4107,4315],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[4323,4455],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[4509,4835],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4836,4886]},{"pos":[4979,4987],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A&gt;</ph>","pos":[4991,5063],"source":"<xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> "},{"content":"<bpt id=\"p1\">[</bpt>Interoperable Object References<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/interoperable-object-references.md)</ept>","pos":[5068,5184],"source":"[Interoperable Object References](../../../../docs/framework/wcf/feature-details/interoperable-object-references.md)"}]}