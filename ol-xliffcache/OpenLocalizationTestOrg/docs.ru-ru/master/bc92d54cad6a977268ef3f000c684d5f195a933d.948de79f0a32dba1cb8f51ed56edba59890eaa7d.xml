{"content":"---\ntitle: \"SQL-CLR Custom Type Mappings\"\nms.date: \"03/30/2017\"\nms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2\n---\n# SQL-CLR Custom Type Mappings\nType mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).  \n  \n When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md). If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.  \n  \n When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file. Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.  \n  \n Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified. If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.  \n  \n## Customization with SQLMetal or O/R Designer  \n With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file. Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.  \n  \n To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file. Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings. With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations. With O/R Designer, you can make your changes within the Designer. For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).  \n  \n> [!NOTE]\n>  Some type mappings may result in overflow or data loss exceptions while translating to or from the database. Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations.  \n  \n In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file. Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file. Doing so will leave some flexibility by not requiring that the code file be recompiled.  \n  \n## Incorporating Database Changes  \n When your database changes, you will need to update your DBML file to reflect those changes. One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations. Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.  \n  \n## See also\n\n- [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)\n- [Code Generation in LINQ to SQL](../../../../../../docs/framework/data/adonet/sql/linq/code-generation-in-linq-to-sql.md)\n","nodes":[{"pos":[4,112],"embed":true,"restype":"x-metadata","content":"title: \"SQL-CLR Custom Type Mappings\"\nms.date: \"03/30/2017\"\nms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2","nodes":[{"content":"SQL-CLR Custom Type Mappings","nodes":[{"pos":[0,28],"content":"SQL-CLR Custom Type Mappings","nodes":[{"content":"SQL-CLR Custom Type Mappings","pos":[0,28]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[119,147],"content":"SQL-CLR Custom Type Mappings","linkify":"SQL-CLR Custom Type Mappings","nodes":[{"content":"SQL-CLR Custom Type Mappings","pos":[0,28]}]},{"content":"Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).","pos":[148,332]},{"content":"When no customized mapping is performed, these tools assign default type mappings as described in <bpt id=\"p1\">[</bpt>SQL-CLR Type Mapping<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)</ept>.","pos":[339,539],"source":"When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)."},{"content":"If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.","pos":[540,657]},{"content":"When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.","pos":[664,773]},{"content":"Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.","pos":[774,894]},{"content":"Once you instantiate the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> object from the code and mapping files, the <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType&gt;</ph> method creates a database based on the type mappings that are specified.","pos":[901,1161],"source":"Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified."},{"content":"If there are no CLR <ph id=\"ph1\">`type`</ph> attributes specified in the mappings, the default type mappings will be used.","pos":[1162,1266],"source":" If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used."},{"pos":[1275,1318],"content":"Customization with SQLMetal or O/R Designer","linkify":"Customization with SQLMetal or O/R Designer","nodes":[{"content":"Customization with SQLMetal or O/R Designer","pos":[0,43]}]},{"content":"With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.","pos":[1322,1474]},{"content":"Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.","pos":[1475,1666]},{"content":"To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.","pos":[1673,1758]},{"content":"Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.","pos":[1759,1873]},{"content":"With SQLMetal, you have to manually change the <ph id=\"ph1\">`Type`</ph> and <ph id=\"ph2\">`DbType`</ph> attributes in the DBML file to make your type mapping customizations.","pos":[1874,2010],"source":" With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations."},{"content":"With O/R Designer, you can make your changes within the Designer.","pos":[2011,2076]},{"content":"For more information about using the O/R Designer, see <bpt id=\"p1\">[</bpt>LINQ to SQL Tools in Visual Studio<ept id=\"p1\">](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2)</ept>.","pos":[2077,2231],"source":" For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2)."},{"pos":[2239,2556],"content":"[!NOTE]\n Some type mappings may result in overflow or data loss exceptions while translating to or from the database. Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations.","leadings":["","> "],"nodes":[{"content":"Some type mappings may result in overflow or data loss exceptions while translating to or from the database. Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations.","pos":[9,315],"nodes":[{"content":"Some type mappings may result in overflow or data loss exceptions while translating to or from the database.","pos":[0,108]},{"content":"Carefully review the Type Mapping Run-time Behavior Matrix in <bpt id=\"p1\">[</bpt>SQL-CLR Type Mapping<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)</ept> before making any customizations.","pos":[109,306],"source":" Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations."}]}]},{"content":"In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.","pos":[2563,2804]},{"content":"Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.","pos":[2805,3007]},{"content":"Doing so will leave some flexibility by not requiring that the code file be recompiled.","pos":[3008,3095]},{"pos":[3104,3134],"content":"Incorporating Database Changes","linkify":"Incorporating Database Changes","nodes":[{"content":"Incorporating Database Changes","pos":[0,30]}]},{"content":"When your database changes, you will need to update your DBML file to reflect those changes.","pos":[3138,3230]},{"content":"One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.","pos":[3231,3341]},{"content":"Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.","pos":[3342,3521]},{"pos":[3530,3538],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3542,3643],"content":"<bpt id=\"p1\">[</bpt>SQL-CLR Type Mapping<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)</ept>","source":"[SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)"},{"pos":[3646,3767],"content":"<bpt id=\"p1\">[</bpt>Code Generation in LINQ to SQL<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/code-generation-in-linq-to-sql.md)</ept>","source":"[Code Generation in LINQ to SQL](../../../../../../docs/framework/data/adonet/sql/linq/code-generation-in-linq-to-sql.md)"}]}