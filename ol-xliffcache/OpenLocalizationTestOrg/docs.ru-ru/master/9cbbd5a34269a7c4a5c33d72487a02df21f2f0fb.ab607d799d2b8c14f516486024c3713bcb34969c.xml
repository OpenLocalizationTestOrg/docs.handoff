{"content":"---\ntitle: \"Interoperable Object References\"\nms.date: \"03/30/2017\"\nms.assetid: cb8da4c8-08ca-4220-a16b-e04c8f527f1b\n---\n# Interoperable Object References\nBy default the <xref:System.Runtime.Serialization.DataContractSerializer> serializes objects by value. You can use the <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> property to instruct the Data Contract Serializer to preserve object references when serializing objects of the type.  \n  \n## Generated XML  \n As an example, consider the following object:  \n  \n```  \n[DataContract]  \npublic class X  \n{  \n    SomeClass someInstance = new SomeClass();  \n    [DataMember]  \n    public SomeClass A = someInstance;  \n    [DataMember]  \n    public SomeClass B = someInstance;  \n}  \n  \npublic class SomeClass   \n{  \n}  \n```  \n  \n With <xref:System.Runtime.Serialization.DataContractSerializer.PreserveObjectReferences%2A> set to `false` (the default), the following XML is generated:  \n  \n```xml  \n<X>  \n   <A>contents of someInstance</A>  \n   <B>contents of someInstance</B>  \n</X>  \n```  \n  \n With <xref:System.Runtime.Serialization.DataContractSerializer.PreserveObjectReferences%2A> set to `true`, the following XML is generated:  \n  \n```xml  \n<X>  \n   <A id=\"1\">contents of someInstance</A>  \n   <B ref=\"1\" />  \n</X>  \n```  \n  \n However, <xref:System.Runtime.Serialization.XsdDataContractExporter> does not describe the `id` and `ref` attributes in its schema, even when the `preserveObjectReferences` property is set to `true`.  \n  \n## Using IsReference  \n To generate object reference information that is valid according to the schema that describes it, apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to a type, and set the <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> flag to `true`. Using `IsReference` in the previous example class `X`:  \n  \n `[DataContract(IsReference=true)] public class X`  \n  \n `{`  \n  \n `SomeClass someInstance = new SomeClass();`  \n  \n `[DataMember]`  \n  \n `public SomeClass A = someInstance;`  \n  \n `[DataMember]`  \n  \n `public SomeClass B = someInstance;`  \n  \n `}`  \n  \n `public class SomeClass`  \n  \n `{`  \n  \n `}`  \n  \n The generated XML is as follows:  \n  \n `<X>`  \n  \n `<A id=\"1\">`  \n  \n `<Value>contents of A</Value>`  \n  \n `</A>`  \n  \n `<B ref=\"1\">`  \n  \n `</B>`  \n  \n `</X>`  \n  \n Using `IsReference` ensures compliance on message round-tripping. Without it, when a type is generated from schema, what is sent back as XML for that type is not necessarily compatible with the schema originally assumed. In other words, although the `id` and `ref` attributes were serialized, the original schema could have barred these attributes (or all attributes) from occurring in the XML. With `IsReference` applied to a data member, the member continues to be recognized as \"referenceable\" when roundtripped.  \n  \n## See also\n\n- <xref:System.Runtime.Serialization.DataContractAttribute>\n- <xref:System.Runtime.Serialization.CollectionDataContractAttribute>\n- <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A>\n- <xref:System.Runtime.Serialization.CollectionDataContractAttribute.IsReference%2A>\n","nodes":[{"pos":[4,115],"embed":true,"restype":"x-metadata","content":"title: \"Interoperable Object References\"\nms.date: \"03/30/2017\"\nms.assetid: cb8da4c8-08ca-4220-a16b-e04c8f527f1b","nodes":[{"content":"Interoperable Object References","nodes":[{"pos":[0,31],"content":"Interoperable Object References","nodes":[{"content":"Interoperable Object References","pos":[0,31]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[122,153],"content":"Interoperable Object References","linkify":"Interoperable Object References","nodes":[{"content":"Interoperable Object References","pos":[0,31]}]},{"content":"By default the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> serializes objects by value.","pos":[154,256],"source":"By default the <xref:System.Runtime.Serialization.DataContractSerializer> serializes objects by value."},{"content":"You can use the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A&gt;</ph> property to instruct the Data Contract Serializer to preserve object references when serializing objects of the type.","pos":[257,463],"source":" You can use the <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> property to instruct the Data Contract Serializer to preserve object references when serializing objects of the type."},{"pos":[472,485],"content":"Generated XML","linkify":"Generated XML","nodes":[{"content":"Generated XML","pos":[0,13]}]},{"content":"As an example, consider the following object:","pos":[489,534]},{"pos":[803,956],"content":"With <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer.PreserveObjectReferences%2A&gt;</ph> set to <ph id=\"ph2\">`false`</ph> (the default), the following XML is generated:","source":"With <xref:System.Runtime.Serialization.DataContractSerializer.PreserveObjectReferences%2A> set to `false` (the default), the following XML is generated:"},{"pos":[1068,1206],"content":"With <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer.PreserveObjectReferences%2A&gt;</ph> set to <ph id=\"ph2\">`true`</ph>, the following XML is generated:","source":"With <xref:System.Runtime.Serialization.DataContractSerializer.PreserveObjectReferences%2A> set to `true`, the following XML is generated:"},{"pos":[1307,1506],"content":"However, <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter&gt;</ph> does not describe the <ph id=\"ph2\">`id`</ph> and <ph id=\"ph3\">`ref`</ph> attributes in its schema, even when the <ph id=\"ph4\">`preserveObjectReferences`</ph> property is set to <ph id=\"ph5\">`true`</ph>.","source":"However, <xref:System.Runtime.Serialization.XsdDataContractExporter> does not describe the `id` and `ref` attributes in its schema, even when the `preserveObjectReferences` property is set to `true`."},{"pos":[1515,1532],"content":"Using IsReference","linkify":"Using IsReference","nodes":[{"content":"Using IsReference","pos":[0,17]}]},{"content":"To generate object reference information that is valid according to the schema that describes it, apply the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> attribute to a type, and set the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A&gt;</ph> flag to <ph id=\"ph3\">`true`</ph>.","pos":[1536,1823],"source":"To generate object reference information that is valid according to the schema that describes it, apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to a type, and set the <xref:System.Runtime.Serialization.DataContractAttribute.IsReference%2A> flag to `true`."},{"content":"Using <ph id=\"ph1\">`IsReference`</ph> in the previous example class <ph id=\"ph2\">`X`</ph>:","pos":[1824,1878],"source":" Using `IsReference` in the previous example class `X`:"},{"content":"The generated XML is as follows:","pos":[2190,2222]},{"content":"Using <ph id=\"ph1\">`IsReference`</ph> ensures compliance on message round-tripping.","pos":[2356,2421],"source":"Using `IsReference` ensures compliance on message round-tripping."},{"content":"Without it, when a type is generated from schema, what is sent back as XML for that type is not necessarily compatible with the schema originally assumed.","pos":[2422,2576]},{"content":"In other words, although the <ph id=\"ph1\">`id`</ph> and <ph id=\"ph2\">`ref`</ph> attributes were serialized, the original schema could have barred these attributes (or all attributes) from occurring in the XML.","pos":[2577,2750],"source":" In other words, although the `id` and `ref` attributes were serialized, the original schema could have barred these attributes (or all attributes) from occurring in the XML."},{"content":"With <ph id=\"ph1\">`IsReference`</ph> applied to a data member, the member continues to be recognized as \"referenceable\" when roundtripped.","pos":[2751,2871],"source":" With `IsReference` applied to a data member, the member continues to be recognized as \"referenceable\" when roundtripped."},{"pos":[2880,2888],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]}]}