{"content":"---\ntitle: \"Batching Operations (WCF Data Services)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF Data Services, client library\"\nms.assetid: 962a49d1-cc11-4b96-bc7d-071dd6607d6c\n---\n# Batching Operations (WCF Data Services)\nThe [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] supports batch processing of requests to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based service. For more information, see [OData: Batch Processing](https://go.microsoft.com/fwlink/?LinkId=186075). In [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], each operation that uses the <xref:System.Data.Services.Client.DataServiceContext>, such as executing a query or saving changes, results in a separate request being sent to the data service. In order to maintain a logical scope for sets of operations, you can explicitly define operational batches. This ensures that all operations in the batch are sent to the data service in a single HTTP request, enables the server to process the operations atomically, and reduces the number of round trips to the data service.  \n  \n## Batching Query Operations  \n To execute multiple queries in a single batch, you must create each query in the batch as a separate instance of the <xref:System.Data.Services.Client.DataServiceRequest%601> class. When you create a query request in this manner, the query itself is defined as a URI, and it follows the rules for addressing resources. For more information, see [Accessing Data Service Resources](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md). The batched query requests are sent to the data service when the <xref:System.Data.Services.Client.DataServiceContext.ExecuteBatch%2A> method is called that contains the query request objects. This method returns a <xref:System.Data.Services.Client.DataServiceResponse> object, which is a collection of <xref:System.Data.Services.Client.QueryOperationResponse%601> objects that represent responses to individual queries in the batch, each of which contains either a collection of objects returned by the query or error information. When any single query operation in the batch fails, error information is returned in the <xref:System.Data.Services.Client.QueryOperationResponse%601> object for the operation that failed and the remaining operations are still executed. For more information, see [How to: Execute Queries in a Batch](../../../../docs/framework/data/wcf/how-to-execute-queries-in-a-batch-wcf-data-services.md).  \n  \n Batched queries can also be executed asynchronously. For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).  \n  \n## Batching the SaveChanges Operation  \n When you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method, all changes that the context tracks are translated into REST-based operations that are sent as requests to the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service. By default, these changes are not sent in a single request message. To require that all changes be sent in a single request, you must call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%28System.Data.Services.Client.SaveChangesOptions%29> method and include a value of <xref:System.Data.Services.Client.SaveChangesOptions.Batch> in the <xref:System.Data.Services.Client.SaveChangesOptions> enumeration that you supply to the method.  \n  \n You can also asynchronously save batched changes. For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).  \n  \n## See also\n\n- [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)\n","nodes":[{"pos":[4,185],"embed":true,"restype":"x-metadata","content":"title: \"Batching Operations (WCF Data Services)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF Data Services, client library\"\nms.assetid: 962a49d1-cc11-4b96-bc7d-071dd6607d6c","nodes":[{"content":"Batching Operations (WCF Data Services)","nodes":[{"pos":[0,39],"content":"Batching Operations (WCF Data Services)","nodes":[{"content":"Batching Operations (WCF Data Services)","pos":[0,39]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[192,231],"content":"Batching Operations (WCF Data Services)","linkify":"Batching Operations (WCF Data Services)","nodes":[{"content":"Batching Operations (WCF Data Services)","pos":[0,39]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> supports batch processing of requests to an <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph>-based service.","pos":[232,424],"source":"The [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] supports batch processing of requests to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based service."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>OData: Batch Processing<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=186075)</ept>.","pos":[425,525],"source":" For more information, see [OData: Batch Processing](https://go.microsoft.com/fwlink/?LinkId=186075)."},{"content":"In <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph>, each operation that uses the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>, such as executing a query or saving changes, results in a separate request being sent to the data service.","pos":[526,780],"source":" In [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], each operation that uses the <xref:System.Data.Services.Client.DataServiceContext>, such as executing a query or saving changes, results in a separate request being sent to the data service."},{"content":"In order to maintain a logical scope for sets of operations, you can explicitly define operational batches.","pos":[781,888]},{"content":"This ensures that all operations in the batch are sent to the data service in a single HTTP request, enables the server to process the operations atomically, and reduces the number of round trips to the data service.","pos":[889,1105]},{"pos":[1114,1139],"content":"Batching Query Operations","linkify":"Batching Query Operations","nodes":[{"content":"Batching Query Operations","pos":[0,25]}]},{"content":"To execute multiple queries in a single batch, you must create each query in the batch as a separate instance of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceRequest%601&gt;</ph> class.","pos":[1143,1324],"source":"To execute multiple queries in a single batch, you must create each query in the batch as a separate instance of the <xref:System.Data.Services.Client.DataServiceRequest%601> class."},{"content":"When you create a query request in this manner, the query itself is defined as a URI, and it follows the rules for addressing resources.","pos":[1325,1461]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Accessing Data Service Resources<ept id=\"p1\">](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md)</ept>.","pos":[1462,1614],"source":" For more information, see [Accessing Data Service Resources](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md)."},{"content":"The batched query requests are sent to the data service when the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.ExecuteBatch%2A&gt;</ph> method is called that contains the query request objects.","pos":[1615,1807],"source":" The batched query requests are sent to the data service when the <xref:System.Data.Services.Client.DataServiceContext.ExecuteBatch%2A> method is called that contains the query request objects."},{"content":"This method returns a <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceResponse&gt;</ph> object, which is a collection of <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.QueryOperationResponse%601&gt;</ph> objects that represent responses to individual queries in the batch, each of which contains either a collection of objects returned by the query or error information.","pos":[1808,2146],"source":" This method returns a <xref:System.Data.Services.Client.DataServiceResponse> object, which is a collection of <xref:System.Data.Services.Client.QueryOperationResponse%601> objects that represent responses to individual queries in the batch, each of which contains either a collection of objects returned by the query or error information."},{"content":"When any single query operation in the batch fails, error information is returned in the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.QueryOperationResponse%601&gt;</ph> object for the operation that failed and the remaining operations are still executed.","pos":[2147,2383],"source":" When any single query operation in the batch fails, error information is returned in the <xref:System.Data.Services.Client.QueryOperationResponse%601> object for the operation that failed and the remaining operations are still executed."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Execute Queries in a Batch<ept id=\"p1\">](../../../../docs/framework/data/wcf/how-to-execute-queries-in-a-batch-wcf-data-services.md)</ept>.","pos":[2384,2539],"source":" For more information, see [How to: Execute Queries in a Batch](../../../../docs/framework/data/wcf/how-to-execute-queries-in-a-batch-wcf-data-services.md)."},{"content":"Batched queries can also be executed asynchronously.","pos":[2546,2598]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Asynchronous Operations<ept id=\"p1\">](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)</ept>.","pos":[2599,2733],"source":" For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)."},{"pos":[2742,2776],"content":"Batching the SaveChanges Operation","linkify":"Batching the SaveChanges Operation","nodes":[{"content":"Batching the SaveChanges Operation","pos":[0,34]}]},{"content":"When you call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A&gt;</ph> method, all changes that the context tracks are translated into REST-based operations that are sent as requests to the <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> service.","pos":[2780,3060],"source":"When you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method, all changes that the context tracks are translated into REST-based operations that are sent as requests to the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service."},{"content":"By default, these changes are not sent in a single request message.","pos":[3061,3128]},{"content":"To require that all changes be sent in a single request, you must call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%28System.Data.Services.Client.SaveChangesOptions%29&gt;</ph> method and include a value of <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.SaveChangesOptions.Batch&gt;</ph> in the <ph id=\"ph3\">&lt;xref:System.Data.Services.Client.SaveChangesOptions&gt;</ph> enumeration that you supply to the method.","pos":[3129,3515],"source":" To require that all changes be sent in a single request, you must call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%28System.Data.Services.Client.SaveChangesOptions%29> method and include a value of <xref:System.Data.Services.Client.SaveChangesOptions.Batch> in the <xref:System.Data.Services.Client.SaveChangesOptions> enumeration that you supply to the method."},{"content":"You can also asynchronously save batched changes.","pos":[3522,3571]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Asynchronous Operations<ept id=\"p1\">](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)</ept>.","pos":[3572,3706],"source":" For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)."},{"pos":[3715,3723],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3727,3834],"content":"<bpt id=\"p1\">[</bpt>WCF Data Services Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</ept>","source":"[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)"}]}