{"content":"---\ntitle: \"Lambda Expressions in PLINQ and TPL | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"Func delegate, creating with lambda expression\"\n  - \"Action delegate, creating with lambda expression\"\n  - \"lambda expressions, with Action and Func\"\nms.assetid: 645b2c17-29d0-4ffa-8684-430743cc2f2d\ncaps.latest.revision: 12\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Lambda Expressions in PLINQ and TPL\nThe Task Parallel Library (TPL) contains many methods that take one of the <xref:System.Func%601?displayProperty=fullName> or <xref:System.Action?displayProperty=fullName> family of delegates as input parameters. You use these delegates to pass in your custom program logic to the parallel loop, task or query. The code examples for TPL as well as PLINQ use lambda expressions to create instances of those delegates as inline code blocks. This topic provides a brief introduction to Func and Action and shows you how to use lambda expressions in the Task Parallel Library and PLINQ.  \n  \n **Note** For more information about delegates in general, see [Delegates](../../csharp/programming-guide/delegates/index.md) and [Delegates](../../visual-basic/programming-guide/language-features/delegates/index.md). For more information about lambda expressions in C# and [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)], see [Lambda Expressions](~/docs/csharp/programming-guide/statements-expressions-operators/lambda-expressions.md) and [Lambda Expressions](~/docs/visual-basic/programming-guide/language-features/procedures/lambda-expressions.md).  \n  \n## Func Delegate  \n A `Func` delegate encapsulates a method that returns a value. In a Func signature, the last or rightmost type parameter always specifies the return type. One common cause of compiler errors is to attempt to pass in two input parameters to a <xref:System.Func%602?displayProperty=fullName>; in fact this type takes only one input parameter. The Framework Class Library defines 17 versions of `Func`: <xref:System.Func%601?displayProperty=fullName>, <xref:System.Func%602?displayProperty=fullName>, <xref:System.Func%603?displayProperty=fullName>, and so on up through <xref:System.Func%6017?displayProperty=fullName>.  \n  \n## Action Delegate  \n A <xref:System.Action?displayProperty=fullName> delegate encapsulates a method (Sub in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) that does not return a value, or returns [void](~/docs/csharp/language-reference/keywords/void.md). In an Action type signature, the type parameters represent only input parameters. Like Func, the Framework Class Library defines 17 versions of Action, from a version that has no type parameters up through a version that has 16 type parameters.  \n  \n## Example  \n The following example for the <xref:System.Threading.Tasks.Parallel.ForEach%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%601%7D%2CSystem.Func%7B%60%600%2CSystem.Threading.Tasks.ParallelLoopState%2C%60%601%2C%60%601%7D%2CSystem.Action%7B%60%601%7D%29?displayProperty=fullName> method shows how to express both Func and Action delegates by using lambda expressions.  \n  \n [!code-csharp[System.Threading.Tasks.Parallel#02](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.parallel/cs/parallelforeach.cs#02)]\n [!code-vb[System.Threading.Tasks.Parallel#02](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.parallel/vb/parallelforeach.vb#02)]  \n  \n## See Also  \n [Parallel Programming](../../../docs/standard/parallel-programming/index.md)","nodes":[{"pos":[12,64],"content":"Lambda Expressions in PLINQ and TPL | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Lambda Expressions in PLINQ and TPL | Microsoft Docs","pos":[0,52]}]},{"pos":[533,568],"content":"Lambda Expressions in PLINQ and TPL","linkify":"Lambda Expressions in PLINQ and TPL","nodes":[{"content":"Lambda Expressions in PLINQ and TPL","pos":[0,35]}]},{"content":"The Task Parallel Library (TPL) contains many methods that take one of the <ph id=\"ph1\">&lt;xref:System.Func%601?displayProperty=fullName&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Action?displayProperty=fullName&gt;</ph> family of delegates as input parameters.","pos":[569,781],"source":"The Task Parallel Library (TPL) contains many methods that take one of the <xref:System.Func%601?displayProperty=fullName> or <xref:System.Action?displayProperty=fullName> family of delegates as input parameters."},{"content":"You use these delegates to pass in your custom program logic to the parallel loop, task or query.","pos":[782,879]},{"content":"The code examples for TPL as well as PLINQ use lambda expressions to create instances of those delegates as inline code blocks.","pos":[880,1007]},{"content":"This topic provides a brief introduction to Func and Action and shows you how to use lambda expressions in the Task Parallel Library and PLINQ.","pos":[1008,1151]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept> For more information about delegates in general, see <bpt id=\"p2\">[</bpt>Delegates<ept id=\"p2\">](../../csharp/programming-guide/delegates/index.md)</ept> and <bpt id=\"p3\">[</bpt>Delegates<ept id=\"p3\">](../../visual-basic/programming-guide/language-features/delegates/index.md)</ept>.","pos":[1158,1374],"source":"**Note** For more information about delegates in general, see [Delegates](../../csharp/programming-guide/delegates/index.md) and [Delegates](../../visual-basic/programming-guide/language-features/delegates/index.md)."},{"content":"For more information about lambda expressions in C# and <ph id=\"ph1\">[!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>Lambda Expressions<ept id=\"p1\">](~/docs/csharp/programming-guide/statements-expressions-operators/lambda-expressions.md)</ept> and <bpt id=\"p2\">[</bpt>Lambda Expressions<ept id=\"p2\">](~/docs/visual-basic/programming-guide/language-features/procedures/lambda-expressions.md)</ept>.","pos":[1375,1711],"source":" For more information about lambda expressions in C# and [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)], see [Lambda Expressions](~/docs/csharp/programming-guide/statements-expressions-operators/lambda-expressions.md) and [Lambda Expressions](~/docs/visual-basic/programming-guide/language-features/procedures/lambda-expressions.md)."},{"pos":[1720,1733],"content":"Func Delegate","linkify":"Func Delegate","nodes":[{"content":"Func Delegate","pos":[0,13]}]},{"content":"A <ph id=\"ph1\">`Func`</ph> delegate encapsulates a method that returns a value.","pos":[1737,1798],"source":"A `Func` delegate encapsulates a method that returns a value."},{"content":"In a Func signature, the last or rightmost type parameter always specifies the return type.","pos":[1799,1890]},{"content":"One common cause of compiler errors is to attempt to pass in two input parameters to a <ph id=\"ph1\">&lt;xref:System.Func%602?displayProperty=fullName&gt;</ph>; in fact this type takes only one input parameter.","pos":[1891,2076],"source":" One common cause of compiler errors is to attempt to pass in two input parameters to a <xref:System.Func%602?displayProperty=fullName>; in fact this type takes only one input parameter."},{"content":"The Framework Class Library defines 17 versions of <ph id=\"ph1\">`Func`</ph>: <ph id=\"ph2\">&lt;xref:System.Func%601?displayProperty=fullName&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Func%602?displayProperty=fullName&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.Func%603?displayProperty=fullName&gt;</ph>, and so on up through <ph id=\"ph5\">&lt;xref:System.Func%6017?displayProperty=fullName&gt;</ph>.","pos":[2077,2353],"source":" The Framework Class Library defines 17 versions of `Func`: <xref:System.Func%601?displayProperty=fullName>, <xref:System.Func%602?displayProperty=fullName>, <xref:System.Func%603?displayProperty=fullName>, and so on up through <xref:System.Func%6017?displayProperty=fullName>."},{"pos":[2362,2377],"content":"Action Delegate","linkify":"Action Delegate","nodes":[{"content":"Action Delegate","pos":[0,15]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Action?displayProperty=fullName&gt;</ph> delegate encapsulates a method (Sub in <ph id=\"ph2\">[!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]</ph>) that does not return a value, or returns <bpt id=\"p1\">[</bpt>void<ept id=\"p1\">](~/docs/csharp/language-reference/keywords/void.md)</ept>.","pos":[2381,2619],"source":"A <xref:System.Action?displayProperty=fullName> delegate encapsulates a method (Sub in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) that does not return a value, or returns [void](~/docs/csharp/language-reference/keywords/void.md)."},{"content":"In an Action type signature, the type parameters represent only input parameters.","pos":[2620,2701]},{"content":"Like Func, the Framework Class Library defines 17 versions of Action, from a version that has no type parameters up through a version that has 16 type parameters.","pos":[2702,2864]},{"pos":[2873,2880],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example for the <ph id=\"ph1\">&lt;xref:System.Threading.Tasks.Parallel.ForEach%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%601%7D%2CSystem.Func%7B%60%600%2CSystem.Threading.Tasks.ParallelLoopState%2C%60%601%2C%60%601%7D%2CSystem.Action%7B%60%601%7D%29?displayProperty=fullName&gt;</ph> method shows how to express both Func and Action delegates by using lambda expressions.","pos":[2884,3283],"source":"The following example for the <xref:System.Threading.Tasks.Parallel.ForEach%60%602%28System.Collections.Generic.IEnumerable%7B%60%600%7D%2CSystem.Func%7B%60%601%7D%2CSystem.Func%7B%60%600%2CSystem.Threading.Tasks.ParallelLoopState%2C%60%601%2C%60%601%7D%2CSystem.Action%7B%60%601%7D%29?displayProperty=fullName> method shows how to express both Func and Action delegates by using lambda expressions."},{"pos":[3290,3621],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.Threading.Tasks.Parallel#02<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.parallel/cs/parallelforeach.cs#02)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.Threading.Tasks.Parallel#02<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.parallel/vb/parallelforeach.vb#02)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[System.Threading.Tasks.Parallel#02](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.parallel/cs/parallelforeach.cs#02)]\n [!code-vb[System.Threading.Tasks.Parallel#02](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.parallel/vb/parallelforeach.vb#02)]"},{"pos":[3630,3638],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[3642,3718],"content":"<bpt id=\"p1\">[</bpt>Parallel Programming<ept id=\"p1\">](../../../docs/standard/parallel-programming/index.md)</ept>","source":"[Parallel Programming](../../../docs/standard/parallel-programming/index.md)"}]}