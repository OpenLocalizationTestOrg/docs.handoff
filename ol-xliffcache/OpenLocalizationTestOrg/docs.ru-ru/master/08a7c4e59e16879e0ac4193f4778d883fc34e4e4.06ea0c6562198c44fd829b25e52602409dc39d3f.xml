{"content":"---\ntitle: \"&lt;cookieHandler&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: bfdc127f-8d94-4566-8bef-f583c6ae7398\ncaps.latest.revision: 5\nauthor: \"BrucePerlerMS\"\nms.author: \"bruceper\"\nmanager: \"mbaldwin\"\n---\n# &lt;cookieHandler&gt;\nConfigures the <xref:System.IdentityModel.Services.CookieHandler> that the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM) uses to read and write cookies.  \n  \n \\<system.identityModel.services>  \n\\<federationConfiguration>  \n\\<cookieHandler>  \n  \n## Syntax  \n  \n```  \n<system.identityModel.services>  \n  <federationConfiguration>  \n    <cookieHandler name=xs:string  \n        path=Path  \n        mode=\"Chunked||Custom||Default\"  \n        persistentSessionLifetime=xs:string  \n        hideFromScript=xs:boolean  \n        requireSSL=xs:boolean  \n        domain=xs:string  \n      <chunkedCookieHandler size=xs:int />  \n      <customCookieHandler type=\"MyNamespace.MyCustomCookieHandler, MyAssembly\" />  \n    </cookieHandler>  \n  </federationConfiguration>  \n</system.identityModel.services>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|name|Specifies the base name for any cookies written. The default is \"FedAuth\".|  \n|path|Specifies the path value for any cookies written. The default is \"HttpRuntime.AppDomainAppVirtualPath\".|  \n|mode|One of the <xref:System.IdentityModel.Services.CookieHandlerMode> values that specifies the kind of cookie handler used by the SAM. The following values may be used:<br /><br /> -   \"Default\" — The same as \"Chunked\".<br />-   \"Chunked\" — Uses an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class. This cookie handler ensures that individual cookies do not exceed a set maximum size. It accomplishes this by potentially \"chunking\" one logical cookie into a number of cookies on-the-wire.<br />-   \"Custom\" — Uses an instance of a custom class derived from <xref:System.IdentityModel.Services.CookieHandler>. The derived class is referenced by the `<customCookieHandler>` child element.<br /><br /> The default is \"Default\".|  \n|persistentSessionLifetime|Specifies the lifetime of persistent sessions. If zero, transient sessions are always used. The default value is \"0:0:0\", which specifies a transient session. The maximum value is \"365:0:0\", which specifies a session of 365 days. The value should be specified according to the following restriction: `<xs:pattern value=\"([0-9.]+:){0,1}([0-9]+:){0,1}[0-9.]+\" />`, where the leftmost value specifies days, the middle value (if present) specifies hours, and the rightmost value (if present) specifies minutes.|  \n|requireSsl|Specifies whether the \"Secure\" flag is emitted for any cookies written. If this value is set, the sign-in session cookies will only be available over HTTPS. The default is \"true\".|  \n|hideFromScript|Controls whether the \"HttpOnly\" flag is emitted for any cookies written. Certain web browsers honor this flag by keeping client-side script from accessing the cookie value. The default is \"true\".|  \n|domain|The domain value for any cookies written. The default is \"\".|  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<chunkedCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/chunkedcookiehandler.md)|Configures the <xref:System.IdentityModel.Services.ChunkedCookieHandler>. This element may only be present if the `mode` attribute of the `<cookieHandler>` element is \"Default\" or \"Chunked\".|  \n|[\\<customCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/customcookiehandler.md)|Sets the custom cookie handler type. This element must be present if the `mode` attribute of the `<cookieHandler>` element is \"Custom\". It cannot be present for any other values of the `mode` attribute. The custom type must be derived from the <xref:System.IdentityModel.Services.CookieHandler> class.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<federationConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md)|Contains the settings that configure the <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> (WSFAM) and the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM).|  \n  \n## Remarks  \n The <xref:System.IdentityModel.Services.CookieHandler> is responsible for reading and writing raw cookies at the HTTP protocol level. You can configure either a <xref:System.IdentityModel.Services.ChunkedCookieHandler> or a custom cookie handler derived from the <xref:System.IdentityModel.Services.CookieHandler> class.  \n  \n To configure a chunked cookie handler, set the mode attribute to \"Chunked\" or \"Default\". The default chunk size is 2000 bytes, but you may optionally specify a different chunk size by including a `<chunkedCookieHandler>` child element.  \n  \n To configure a custom cookie handler, set the mode attribute to \"Custom\". You must also specify a `<customCookieHandler>` child element that references the type of your custom handler.  \n  \n The `<cookieHandler>` element is represented by the <xref:System.IdentityModel.Services.CookieHandlerElement> class. The cookie handler that was specified in configuration is available from the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration.CookieHandler%2A> property of the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration> object set on the <xref:System.IdentityModel.Services.FederatedAuthentication.FederationConfiguration%2A?displayProperty=fullName> property.  \n  \n## Example  \n The following XML shows a `<cookieHandler>` element. In this example, because the `mode` attribute is not specified, the default cookie handler will be used by the SAM. This is an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class. Because the `<chunkedCookieHandler>` child element is not specified, the default chunk size will be used. HTTPS will not be required because the `requireSsl` attribute is set `false`.  \n  \n> [!WARNING]\n>  In this example, HTTPS is not required to write session cookies. This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`. This setting is not recommended for most production environments as it may present a security risk.  \n  \n```  \n<cookieHandler requireSsl=\"false\" />  \n```  \n  \n## See Also  \n <xref:System.IdentityModel.Services.CookieHandler>   \n <xref:System.IdentityModel.Services.ChunkedCookieHandler>   \n <xref:System.IdentityModel.Services.SessionAuthenticationModule>\n","nodes":[{"pos":[12,50],"content":"&lt;cookieHandler&gt; | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>cookieHandler<ph id=\"ph2\">&amp;gt;</ph> | Microsoft Docs","pos":[0,38],"source":"&lt;cookieHandler&gt; | Microsoft Docs"}]},{"pos":[359,380],"content":"&lt;cookieHandler&gt;","linkify":"&lt;cookieHandler&gt;","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>cookieHandler<ph id=\"ph2\">&amp;gt;</ph>","pos":[0,21],"source":"&lt;cookieHandler&gt;"}]},{"content":"Configures the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> that the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.SessionAuthenticationModule&gt;</ph> (SAM) uses to read and write cookies.","pos":[381,558],"source":"Configures the <xref:System.IdentityModel.Services.CookieHandler> that the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM) uses to read and write cookies."},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.identityModel.services&gt;","pos":[565,597],"source":"\\<system.identityModel.services>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>federationConfiguration&gt;","pos":[600,626],"source":"\\<federationConfiguration>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>cookieHandler&gt;","pos":[629,645],"source":"\\<cookieHandler>"},{"pos":[654,660],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1206,1229],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[1233,1313]},{"pos":[1323,1333],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1340,1349]},{"content":"Description","pos":[1350,1361]},{"content":"name","pos":[1404,1408]},{"content":"Specifies the base name for any cookies written.","pos":[1409,1457]},{"content":"The default is \"FedAuth\".","pos":[1458,1483]},{"content":"path","pos":[1488,1492]},{"content":"Specifies the path value for any cookies written.","pos":[1493,1542]},{"content":"The default is \"HttpRuntime.AppDomainAppVirtualPath\".","pos":[1543,1596]},{"content":"mode","pos":[1601,1605]},{"content":"One of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandlerMode&gt;</ph> values that specifies the kind of cookie handler used by the SAM.","pos":[1606,1737],"source":"One of the <xref:System.IdentityModel.Services.CookieHandlerMode> values that specifies the kind of cookie handler used by the SAM."},{"content":"The following values may be used:","pos":[1738,1771]},{"content":"-   \"Default\" — The same as \"Chunked\".","pos":[1784,1822]},{"content":"-   \"Chunked\" — Uses an instance of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph> class.","pos":[1828,1932],"source":"-   \"Chunked\" — Uses an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class."},{"content":"This cookie handler ensures that individual cookies do not exceed a set maximum size.","pos":[1933,2018]},{"content":"It accomplishes this by potentially \"chunking\" one logical cookie into a number of cookies on-the-wire.","pos":[2019,2122]},{"content":"-   \"Custom\" — Uses an instance of a custom class derived from <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph>.","pos":[2128,2242],"source":"-   \"Custom\" — Uses an instance of a custom class derived from <xref:System.IdentityModel.Services.CookieHandler>."},{"content":"The derived class is referenced by the <ph id=\"ph1\">`&lt;customCookieHandler&gt;`</ph> child element.","pos":[2243,2320],"source":" The derived class is referenced by the `<customCookieHandler>` child element."},{"content":"The default is \"Default\".","pos":[2333,2358]},{"content":"persistentSessionLifetime","pos":[2363,2388]},{"content":"Specifies the lifetime of persistent sessions.","pos":[2389,2435]},{"content":"If zero, transient sessions are always used.","pos":[2436,2480]},{"content":"The default value is \"0:0:0\", which specifies a transient session.","pos":[2481,2547]},{"content":"The maximum value is \"365:0:0\", which specifies a session of 365 days.","pos":[2548,2618]},{"content":"The value should be specified according to the following restriction: <ph id=\"ph1\">`&lt;xs:pattern value=\"([0-9.]+:){0,1}([0-9]+:){0,1}[0-9.]+\" /&gt;`</ph>, where the leftmost value specifies days, the middle value (if present) specifies hours, and the rightmost value (if present) specifies minutes.","pos":[2619,2895],"source":" The value should be specified according to the following restriction: `<xs:pattern value=\"([0-9.]+:){0,1}([0-9]+:){0,1}[0-9.]+\" />`, where the leftmost value specifies days, the middle value (if present) specifies hours, and the rightmost value (if present) specifies minutes."},{"content":"requireSsl","pos":[2900,2910]},{"content":"Specifies whether the \"Secure\" flag is emitted for any cookies written.","pos":[2911,2982]},{"content":"If this value is set, the sign-in session cookies will only be available over HTTPS.","pos":[2983,3067]},{"content":"The default is \"true\".","pos":[3068,3090]},{"content":"hideFromScript","pos":[3095,3109]},{"content":"Controls whether the \"HttpOnly\" flag is emitted for any cookies written.","pos":[3110,3182]},{"content":"Certain web browsers honor this flag by keeping client-side script from accessing the cookie value.","pos":[3183,3282]},{"content":"The default is \"true\".","pos":[3283,3305]},{"content":"domain","pos":[3310,3316]},{"content":"The domain value for any cookies written.","pos":[3317,3358]},{"content":"The default is \"\".","pos":[3359,3377]},{"pos":[3388,3402],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[3409,3416]},{"content":"Description","pos":[3417,3428]},{"pos":[3469,3604],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>chunkedCookieHandler&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/chunkedcookiehandler.md)</ept>","source":"[\\<chunkedCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/chunkedcookiehandler.md)"},{"content":"Configures the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph>.","pos":[3605,3678],"source":"Configures the <xref:System.IdentityModel.Services.ChunkedCookieHandler>."},{"content":"This element may only be present if the <ph id=\"ph1\">`mode`</ph> attribute of the <ph id=\"ph2\">`&lt;cookieHandler&gt;`</ph> element is \"Default\" or \"Chunked\".","pos":[3679,3795],"source":" This element may only be present if the `mode` attribute of the `<cookieHandler>` element is \"Default\" or \"Chunked\"."},{"pos":[3800,3933],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>customCookieHandler&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/customcookiehandler.md)</ept>","source":"[\\<customCookieHandler>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/customcookiehandler.md)"},{"content":"Sets the custom cookie handler type.","pos":[3934,3970]},{"content":"This element must be present if the <ph id=\"ph1\">`mode`</ph> attribute of the <ph id=\"ph2\">`&lt;cookieHandler&gt;`</ph> element is \"Custom\".","pos":[3971,4069],"source":" This element must be present if the `mode` attribute of the `<cookieHandler>` element is \"Custom\"."},{"content":"It cannot be present for any other values of the <ph id=\"ph1\">`mode`</ph> attribute.","pos":[4070,4136],"source":" It cannot be present for any other values of the `mode` attribute."},{"content":"The custom type must be derived from the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> class.","pos":[4137,4235],"source":" The custom type must be derived from the <xref:System.IdentityModel.Services.CookieHandler> class."},{"pos":[4246,4261],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[4268,4275]},{"content":"Description","pos":[4276,4287]},{"pos":[4328,4469],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>federationConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md)</ept>","source":"[\\<federationConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/federationconfiguration.md)"},{"content":"Contains the settings that configure the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.WSFederationAuthenticationModule&gt;</ph> (WSFAM) and the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.SessionAuthenticationModule&gt;</ph> (SAM).","pos":[4470,4668],"source":"Contains the settings that configure the <xref:System.IdentityModel.Services.WSFederationAuthenticationModule> (WSFAM) and the <xref:System.IdentityModel.Services.SessionAuthenticationModule> (SAM)."},{"pos":[4678,4685],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> is responsible for reading and writing raw cookies at the HTTP protocol level.","pos":[4689,4822],"source":"The <xref:System.IdentityModel.Services.CookieHandler> is responsible for reading and writing raw cookies at the HTTP protocol level."},{"content":"You can configure either a <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph> or a custom cookie handler derived from the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.CookieHandler&gt;</ph> class.","pos":[4823,5009],"source":" You can configure either a <xref:System.IdentityModel.Services.ChunkedCookieHandler> or a custom cookie handler derived from the <xref:System.IdentityModel.Services.CookieHandler> class."},{"content":"To configure a chunked cookie handler, set the mode attribute to \"Chunked\" or \"Default\".","pos":[5016,5104]},{"content":"The default chunk size is 2000 bytes, but you may optionally specify a different chunk size by including a <ph id=\"ph1\">`&lt;chunkedCookieHandler&gt;`</ph> child element.","pos":[5105,5251],"source":" The default chunk size is 2000 bytes, but you may optionally specify a different chunk size by including a `<chunkedCookieHandler>` child element."},{"content":"To configure a custom cookie handler, set the mode attribute to \"Custom\".","pos":[5258,5331]},{"content":"You must also specify a <ph id=\"ph1\">`&lt;customCookieHandler&gt;`</ph> child element that references the type of your custom handler.","pos":[5332,5442],"source":" You must also specify a `<customCookieHandler>` child element that references the type of your custom handler."},{"content":"The <ph id=\"ph1\">`&lt;cookieHandler&gt;`</ph> element is represented by the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.CookieHandlerElement&gt;</ph> class.","pos":[5449,5565],"source":"The `<cookieHandler>` element is represented by the <xref:System.IdentityModel.Services.CookieHandlerElement> class."},{"content":"The cookie handler that was specified in configuration is available from the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.Configuration.FederationConfiguration.CookieHandler%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Services.Configuration.FederationConfiguration&gt;</ph> object set on the <ph id=\"ph3\">&lt;xref:System.IdentityModel.Services.FederatedAuthentication.FederationConfiguration%2A?displayProperty=fullName&gt;</ph> property.","pos":[5566,5966],"source":" The cookie handler that was specified in configuration is available from the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration.CookieHandler%2A> property of the <xref:System.IdentityModel.Services.Configuration.FederationConfiguration> object set on the <xref:System.IdentityModel.Services.FederatedAuthentication.FederationConfiguration%2A?displayProperty=fullName> property."},{"pos":[5975,5982],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following XML shows a <ph id=\"ph1\">`&lt;cookieHandler&gt;`</ph> element.","pos":[5986,6038],"source":"The following XML shows a `<cookieHandler>` element."},{"content":"In this example, because the <ph id=\"ph1\">`mode`</ph> attribute is not specified, the default cookie handler will be used by the SAM.","pos":[6039,6154],"source":" In this example, because the `mode` attribute is not specified, the default cookie handler will be used by the SAM."},{"content":"This is an instance of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Services.ChunkedCookieHandler&gt;</ph> class.","pos":[6155,6246],"source":" This is an instance of the <xref:System.IdentityModel.Services.ChunkedCookieHandler> class."},{"content":"Because the <ph id=\"ph1\">`&lt;chunkedCookieHandler&gt;`</ph> child element is not specified, the default chunk size will be used.","pos":[6247,6352],"source":" Because the `<chunkedCookieHandler>` child element is not specified, the default chunk size will be used."},{"content":"HTTPS will not be required because the <ph id=\"ph1\">`requireSsl`</ph> attribute is set <ph id=\"ph2\">`false`</ph>.","pos":[6353,6430],"source":" HTTPS will not be required because the `requireSsl` attribute is set `false`."},{"pos":[6438,6711],"content":"[!WARNING]\n In this example, HTTPS is not required to write session cookies. This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`. This setting is not recommended for most production environments as it may present a security risk.","leadings":["","> "],"nodes":[{"content":" In this example, HTTPS is not required to write session cookies. This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`. This setting is not recommended for most production environments as it may present a security risk.","pos":[11,271],"nodes":[{"content":"In this example, HTTPS is not required to write session cookies.","pos":[1,65]},{"content":"This is because the <ph id=\"ph1\">`requireSsl`</ph> attribute on the <ph id=\"ph2\">`&lt;cookieHandler&gt;`</ph> element is set to <ph id=\"ph3\">`false`</ph>.","pos":[66,160],"source":" This is because the `requireSsl` attribute on the `<cookieHandler>` element is set to `false`."},{"content":"This setting is not recommended for most production environments as it may present a security risk.","pos":[161,260]}]}]},{"pos":[6774,6782],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}