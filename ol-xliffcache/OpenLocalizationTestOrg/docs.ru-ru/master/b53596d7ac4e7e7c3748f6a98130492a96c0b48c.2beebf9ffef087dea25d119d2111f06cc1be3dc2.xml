{"content":"---\ntitle: \"How to: Replace the WCF URL Reservation with a Restricted Reservation\"\nms.date: \"03/30/2017\"\nms.assetid: 2754d223-79fc-4e2b-a6ce-989889f2abfa\n---\n# How to: Replace the WCF URL Reservation with a Restricted Reservation\nA URL reservation allows you to restrict who can receive messages from a URL or a set of URLs. A reservation consists of a URL template, an access control list (ACL), and a set of flags. The URL template defines which URLs the reservation affects. For more information about how URL templates are processed, see [Routing Incoming Requests](https://go.microsoft.com/fwlink/?LinkId=136764). The ACL controls what user or group of users is permitted to receive messages from the specified URLs. The flags indicate whether the reservation is to give a user or group permission to listen on the URL directly or to delegate the permission to listen to some other process.  \n  \n As part of the default operating system configuration, Windows Communication Foundation (WCF) creates a globally accessible reservation for port 80 to enable all users to run applications that use a dual HTTP binding for duplex communication. Because the ACL on this reservation is for everyone, administrators cannot explicitly allow or disallow permission to listen on a URL or set of URLs. This topic explains how to delete this reservation and how to re-create the reservation with a restricted ACL.  \n  \n On [!INCLUDE[wv](../../../../includes/wv-md.md)] or [!INCLUDE[lserver](../../../../includes/lserver-md.md)] you can view all of the HTTP URL reservations from an elevated command prompt by typing `netsh http show urlacl`.  The following example shows what a WCF URL reservation should resemble.  \n  \n```  \nReserved URL : http://+:80/Temporary_Listen_Addresses/  \n        User: \\Everyone  \n            Listen: Yes  \n            Delegate: No  \n            SDDL: D:(A;;GX;;;WD)  \n```  \n  \n The reservation consists of a URL template used when a WCF application is using an HTTP dual binding for duplex communication. URLs of this form are used for a WCF service to send messages back to the WCF client when communicating over a HTTP dual binding. Everyone is given permission to listen on the URL but not to delegate listening to another process. Finally, the ACL is described in Security Descriptor Definition Language (SSDL). For more information about SSDL, see [SSDL](https://go.microsoft.com/fwlink/?LinkId=136789)  \n  \n### To delete the WCF URL reservation  \n  \n1.  Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up. Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.  \n  \n2.  Type in **netsh http delete urlacl url=http://+:80/Temporary_Listen_Addresses/** in the command prompt window.  \n  \n3.  If the reservation is deleted successfully, the following message is displayed. **URL reservation successfully deleted**  \n  \n## Creating a New Security Group and New Restricted URL Reservation  \n To replace the WCF URL reservation with a restricted reservation you must first create a new security group. You can do this in one of two ways: from a command prompt or from the computer management console. You only have to do one.  \n  \n#### To create a new security group from a command prompt  \n  \n1.  Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up. Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.  \n  \n2.  Type in **net localgroup \"\\<security group name>\" /comment:\"\\<security group description>\" /add** at the command prompt. Replacing **\\<security group name>** with the name of the security group you want to create and **\\<security group description>** with a suitable description for the security group.  \n  \n3.  If the security group is created successfully, the following message is displayed. **The command completed successfully.**  \n  \n#### To create a new security group from the computer management console  \n  \n1.  Click **Start**, click **Control Panel**, click **Administrative Tools**, and click **Computer Management** to open up the Computer Management Console. Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.  \n  \n2.  Click **System Tools**, click **Local Users and Groups**, right-click **Groups** folder and click **New Group** on the context menu that comes up. Type in the desired **Group Name**, **Description** and other details of this new security group and click the **Create** button to create the security group.  \n  \n#### To create the restricted URL reservation  \n  \n1.  Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up. Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue.  \n  \n2.  Type in **netsh http add urlacl url=http://+:80/Temporary_Listen_Addresses/ user=\"\\<machine name>\\\\<security group name\\>** at the command prompt. Replacing **\\<machine name>** with the computer name on which the group must be created and **\\<security group name>** with the name of the security group you created previously.  \n  \n3.  If the reservation is created successfully, the following message is displayed. **URL reservation successfully added**.\n","nodes":[{"pos":[4,153],"embed":true,"restype":"x-metadata","content":"title: \"How to: Replace the WCF URL Reservation with a Restricted Reservation\"\nms.date: \"03/30/2017\"\nms.assetid: 2754d223-79fc-4e2b-a6ce-989889f2abfa","nodes":[{"content":"How to: Replace the WCF URL Reservation with a Restricted Reservation","nodes":[{"pos":[0,69],"content":"How to: Replace the WCF URL Reservation with a Restricted Reservation","nodes":[{"content":"How to: Replace the WCF URL Reservation with a Restricted Reservation","pos":[0,69]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[160,229],"content":"How to: Replace the WCF URL Reservation with a Restricted Reservation","linkify":"How to: Replace the WCF URL Reservation with a Restricted Reservation","nodes":[{"content":"How to: Replace the WCF URL Reservation with a Restricted Reservation","pos":[0,69]}]},{"content":"A URL reservation allows you to restrict who can receive messages from a URL or a set of URLs.","pos":[230,324]},{"content":"A reservation consists of a URL template, an access control list (ACL), and a set of flags.","pos":[325,416]},{"content":"The URL template defines which URLs the reservation affects.","pos":[417,477]},{"content":"For more information about how URL templates are processed, see <bpt id=\"p1\">[</bpt>Routing Incoming Requests<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=136764)</ept>.","pos":[478,618],"source":" For more information about how URL templates are processed, see [Routing Incoming Requests](https://go.microsoft.com/fwlink/?LinkId=136764)."},{"content":"The ACL controls what user or group of users is permitted to receive messages from the specified URLs.","pos":[619,721]},{"content":"The flags indicate whether the reservation is to give a user or group permission to listen on the URL directly or to delegate the permission to listen to some other process.","pos":[722,895]},{"content":"As part of the default operating system configuration, Windows Communication Foundation (WCF) creates a globally accessible reservation for port 80 to enable all users to run applications that use a dual HTTP binding for duplex communication.","pos":[902,1144]},{"content":"Because the ACL on this reservation is for everyone, administrators cannot explicitly allow or disallow permission to listen on a URL or set of URLs.","pos":[1145,1294]},{"content":"This topic explains how to delete this reservation and how to re-create the reservation with a restricted ACL.","pos":[1295,1405]},{"content":"On <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> or <ph id=\"ph2\">[!INCLUDE[lserver](../../../../includes/lserver-md.md)]</ph> you can view all of the HTTP URL reservations from an elevated command prompt by typing <ph id=\"ph3\">`netsh http show urlacl`</ph>.","pos":[1412,1633],"source":"On [!INCLUDE[wv](../../../../includes/wv-md.md)] or [!INCLUDE[lserver](../../../../includes/lserver-md.md)] you can view all of the HTTP URL reservations from an elevated command prompt by typing `netsh http show urlacl`."},{"content":"The following example shows what a WCF URL reservation should resemble.","pos":[1635,1706]},{"content":"The reservation consists of a URL template used when a WCF application is using an HTTP dual binding for duplex communication.","pos":[1899,2025]},{"content":"URLs of this form are used for a WCF service to send messages back to the WCF client when communicating over a HTTP dual binding.","pos":[2026,2155]},{"content":"Everyone is given permission to listen on the URL but not to delegate listening to another process.","pos":[2156,2255]},{"content":"Finally, the ACL is described in Security Descriptor Definition Language (SSDL).","pos":[2256,2336]},{"content":"For more information about SSDL, see <bpt id=\"p1\">[</bpt>SSDL<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=136789)</ept>","pos":[2337,2428],"source":" For more information about SSDL, see [SSDL](https://go.microsoft.com/fwlink/?LinkId=136789)"},{"pos":[2438,2471],"content":"To delete the WCF URL reservation","linkify":"To delete the WCF URL reservation","nodes":[{"content":"To delete the WCF URL reservation","pos":[0,33]}]},{"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>All Programs<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>Accessories<ept id=\"p3\">**</ept>, right-click <bpt id=\"p4\">**</bpt>Command Prompt<ept id=\"p4\">**</ept> and click <bpt id=\"p5\">**</bpt>Run as Administrator<ept id=\"p5\">**</ept> on the context menu that comes up.","pos":[2481,2648],"source":"Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up."},{"content":"Click <bpt id=\"p1\">**</bpt>Continue<ept id=\"p1\">**</ept> on the User Account Control (UAC) window that might ask permissions to continue.","pos":[2649,2748],"source":" Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue."},{"pos":[2758,2868],"content":"Type in <bpt id=\"p1\">**</bpt>netsh http delete urlacl url=<ph id=\"ph1\">http://+:80/Temporary_Listen_Addresses/</ph><ept id=\"p1\">**</ept> in the command prompt window.","source":"Type in **netsh http delete urlacl url=http://+:80/Temporary_Listen_Addresses/** in the command prompt window."},{"content":"If the reservation is deleted successfully, the following message is displayed.","pos":[2878,2957]},{"content":"<bpt id=\"p1\">**</bpt>URL reservation successfully deleted<ept id=\"p1\">**</ept>","pos":[2958,2998],"source":"**URL reservation successfully deleted**"},{"pos":[3007,3071],"content":"Creating a New Security Group and New Restricted URL Reservation","linkify":"Creating a New Security Group and New Restricted URL Reservation","nodes":[{"content":"Creating a New Security Group and New Restricted URL Reservation","pos":[0,64]}]},{"content":"To replace the WCF URL reservation with a restricted reservation you must first create a new security group.","pos":[3075,3183]},{"content":"You can do this in one of two ways: from a command prompt or from the computer management console.","pos":[3184,3282]},{"content":"You only have to do one.","pos":[3283,3307]},{"pos":[3318,3370],"content":"To create a new security group from a command prompt","linkify":"To create a new security group from a command prompt","nodes":[{"content":"To create a new security group from a command prompt","pos":[0,52]}]},{"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>All Programs<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>Accessories<ept id=\"p3\">**</ept>, right-click <bpt id=\"p4\">**</bpt>Command Prompt<ept id=\"p4\">**</ept> and click <bpt id=\"p5\">**</bpt>Run as Administrator<ept id=\"p5\">**</ept> on the context menu that comes up.","pos":[3380,3547],"source":"Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up."},{"content":"Click <bpt id=\"p1\">**</bpt>Continue<ept id=\"p1\">**</ept> on the User Account Control (UAC) window that might ask permissions to continue.","pos":[3548,3647],"source":" Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue."},{"content":"Type in <bpt id=\"p1\">**</bpt>net localgroup \"<ph id=\"ph1\">\\&lt;</ph>security group name&gt;\" /comment:\"<ph id=\"ph2\">\\&lt;</ph>security group description&gt;\" /add<ept id=\"p1\">**</ept> at the command prompt.","pos":[3657,3777],"source":"Type in **net localgroup \"\\<security group name>\" /comment:\"\\<security group description>\" /add** at the command prompt."},{"content":"Replacing <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>security group name&gt;<ept id=\"p1\">**</ept> with the name of the security group you want to create and <bpt id=\"p2\">**</bpt><ph id=\"ph2\">\\&lt;</ph>security group description&gt;<ept id=\"p2\">**</ept> with a suitable description for the security group.","pos":[3778,3959],"source":" Replacing **\\<security group name>** with the name of the security group you want to create and **\\<security group description>** with a suitable description for the security group."},{"content":"If the security group is created successfully, the following message is displayed.","pos":[3969,4051]},{"content":"<bpt id=\"p1\">**</bpt>The command completed successfully.<ept id=\"p1\">**</ept>","pos":[4052,4091],"source":"**The command completed successfully.**"},{"pos":[4102,4169],"content":"To create a new security group from the computer management console","linkify":"To create a new security group from the computer management console","nodes":[{"content":"To create a new security group from the computer management console","pos":[0,67]}]},{"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Control Panel<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>Administrative Tools<ept id=\"p3\">**</ept>, and click <bpt id=\"p4\">**</bpt>Computer Management<ept id=\"p4\">**</ept> to open up the Computer Management Console.","pos":[4179,4330],"source":"Click **Start**, click **Control Panel**, click **Administrative Tools**, and click **Computer Management** to open up the Computer Management Console."},{"content":"Click <bpt id=\"p1\">**</bpt>Continue<ept id=\"p1\">**</ept> on the User Account Control (UAC) window that might ask permissions to continue.","pos":[4331,4430],"source":" Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue."},{"content":"Click <bpt id=\"p1\">**</bpt>System Tools<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Local Users and Groups<ept id=\"p2\">**</ept>, right-click <bpt id=\"p3\">**</bpt>Groups<ept id=\"p3\">**</ept> folder and click <bpt id=\"p4\">**</bpt>New Group<ept id=\"p4\">**</ept> on the context menu that comes up.","pos":[4440,4586],"source":"Click **System Tools**, click **Local Users and Groups**, right-click **Groups** folder and click **New Group** on the context menu that comes up."},{"content":"Type in the desired <bpt id=\"p1\">**</bpt>Group Name<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Description<ept id=\"p2\">**</ept> and other details of this new security group and click the <bpt id=\"p3\">**</bpt>Create<ept id=\"p3\">**</ept> button to create the security group.","pos":[4587,4745],"source":" Type in the desired **Group Name**, **Description** and other details of this new security group and click the **Create** button to create the security group."},{"pos":[4756,4796],"content":"To create the restricted URL reservation","linkify":"To create the restricted URL reservation","nodes":[{"content":"To create the restricted URL reservation","pos":[0,40]}]},{"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>All Programs<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>Accessories<ept id=\"p3\">**</ept>, right-click <bpt id=\"p4\">**</bpt>Command Prompt<ept id=\"p4\">**</ept> and click <bpt id=\"p5\">**</bpt>Run as Administrator<ept id=\"p5\">**</ept> on the context menu that comes up.","pos":[4806,4973],"source":"Click **Start**, point to **All Programs**, click **Accessories**, right-click **Command Prompt** and click **Run as Administrator** on the context menu that comes up."},{"content":"Click <bpt id=\"p1\">**</bpt>Continue<ept id=\"p1\">**</ept> on the User Account Control (UAC) window that might ask permissions to continue.","pos":[4974,5073],"source":" Click **Continue** on the User Account Control (UAC) window that might ask permissions to continue."},{"content":"Type in <bpt id=\"p1\">**</bpt>netsh http add urlacl url=<ph id=\"ph1\">http://+:80/Temporary_Listen_Addresses/</ph> user=\"<ph id=\"ph2\">\\&lt;</ph>machine name&gt;<ph id=\"ph3\">\\\\</ph>&lt;security group name<ph id=\"ph4\">\\&gt;</ph><ept id=\"p1\">**</ept> at the command prompt.","pos":[5083,5229],"source":"Type in **netsh http add urlacl url=http://+:80/Temporary_Listen_Addresses/ user=\"\\<machine name>\\\\<security group name\\>** at the command prompt."},{"content":"Replacing <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>machine name&gt;<ept id=\"p1\">**</ept> with the computer name on which the group must be created and <bpt id=\"p2\">**</bpt><ph id=\"ph2\">\\&lt;</ph>security group name&gt;<ept id=\"p2\">**</ept> with the name of the security group you created previously.","pos":[5230,5408],"source":" Replacing **\\<machine name>** with the computer name on which the group must be created and **\\<security group name>** with the name of the security group you created previously."},{"content":"If the reservation is created successfully, the following message is displayed.","pos":[5418,5497]},{"content":"<bpt id=\"p1\">**</bpt>URL reservation successfully added<ept id=\"p1\">**</ept>.","pos":[5498,5537],"source":"**URL reservation successfully added**."}]}