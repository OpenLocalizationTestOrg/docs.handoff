{"content":"---\ntitle: \"Configuring WS-Atomic Transaction Support\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WS-AT protocol [WCF], configuring WS-Atomic Transaction\"\nms.assetid: cb9f1c9c-1439-4172-b9bc-b01c3e09ac48\n---\n# Configuring WS-Atomic Transaction Support\nThis topic describes how you can configure WS-AtomicTransaction (WS-AT) support by using the WS-AT Configuration Utility.  \n  \n## Using the WS-AT Configuration Utility  \n The WS-AT Configuration Utility (wsatConfig.exe) is used to configure WS-AT settings. In order to enable the WS-AT protocol service, you must use the configuration utility to configure the HTTPS port for WS-AT, bind an X.509 certificate to the HTTPS port, and configure authorized partner certificates by specifying certificate subject names or thumbprints. The configuration utility also allows you to select the tracing mode and set default outgoing and maximum incoming transaction timeouts.  \n  \n You can access this tool's functionality by using a Microsoft Management Console (MMC) property page snap-in in the Component Services management console, or from a command-line window. Configure WS-AT support on the local machine through the command-line window; configure settings on both local and remote machines by using the MMC snap-in.  \n  \n The command-line window can be accessed in the Windows SDK installation location \"%WINDIR%\\Microsoft.NET\\Framework\\v3.0\\Windows Communication Foundation\".  \n  \n For more information about the command-line tool, see [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md).  \n  \n If you are running [!INCLUDE[wxp](../../../../includes/wxp-md.md)] or [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], you can access the MMC snap-in by navigating to **Control Panel/Administrative Tools/Component Services**, right-clicking **My Computer**, and selecting **Properties**. This is the same location where you can configure the Microsoft Distributed Transaction Coordinator (MSDTC). Options available for configuration are grouped under the **WS-AT** tab. If you are running Windows Vista or [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the MMC snap-in can be found by clicking the **Start** button, and entering `dcomcnfg.exe` in the **Search** box. When the MMC is opened, navigate to the **My Computer\\Distributed Transaction Coordinator\\Local DTC** node, right click and select **Properties**. Options available for configuration are grouped under the **WS-AT** tab.  \n  \n For more information about the snap-in, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md).  \n  \n To enable the tool's user interface, you must first register the WsatUI.dll file, located at the following path  \n  \n %PROGRAMFILES%\\Microsoft SDKs\\Windows\\v6.0\\Bin  \n  \n To register the product, execute the following command from a Command Prompt window:  \n  \n `regasm.exe /codebase WsatUI.dll`  \n  \n## Enabling WS-AT  \n To enable the WS-AT protocol service inside MSDTC using port 443 and an X.509 certificate with a private key that has been installed in the local machine store, use the wsatConfig.exe tool with the following command.  \n  \n `WsatConfig.exe –network:enable –port:8443 –endpointCert:<machine|\"Issuer\\SubjectName\"> -accountsCerts:<thumbprint|\"Issuer\\SubjectName\"> -restart`  \n  \n Substitute the respective parameters with values relevant to your environment.  \n  \n To disable the WS-AT protocol service inside MSDTC, use the wsatConfig.exe tool with the following command.  \n  \n `WsatConfig.exe –network:disable -restart`  \n  \n## Configuring Trust Between Two Machines  \n The WS-AT protocol service requires the administrator to explicitly authorize individual accounts to participate in distributed transactions. If you are an administrator for two machines, you can configure both machines to establish a mutual trust relationship by exchanging the right set of certificates between the machines, installing them into the appropriate certificate stores, and using the wsatConfig.exe tool to add each machine's certificate to the other's list of authorized participant certificates. This step is necessary to perform distributed transactions between two machines using WS-AT.  \n  \n In the following example outlines the steps to establish trust between two machines, A and B.  \n  \n### Creating and Exporting Certificates  \n This procedure requires the MMC Certificates snap-in. The snap-in can be accessed by opening the Start/Run menu, typing \"mmc\" in the input box and pressing OK. Then, in the **Console1** window, navigate to **the File/Add-Remove** Snap-in, click Add, and choose **Certificates** from the **Available Standalone Snapins** list. Finally, select **Computer Account** to manage and click **OK**. The **Certificates** node appears in the snap-in console.  \n  \n You must already possess the required certificates to establish trust. To learn how to create and install new certificates prior to the following steps, see [How to: Create and Install Temporary Client Certificates in WCF During Development](https://go.microsoft.com/fwlink/?LinkId=158925).  \n  \n1.  On machine A, using the MMC Certificates snap-in, import the existing certificate (certA) into the LocalMachine\\MY (Personal Node) and LocalMachine\\ROOT store (trusted root certification authority node). To import a certificate to a specific node, right-click the node and choose **All Tasks/Import**.  \n  \n2.  On machine B, using the MMC Certificates snap-in, create or obtain a certificate certB with a private key and import it into the LocalMachine\\MY (Personal Node) and LocalMachine\\ROOT store (trusted root certification authority node).  \n  \n3.  Export certA's public key to a file if this has not been done already.  \n  \n4.  Export certB's public key to a file if this has not been done already.  \n  \n### Establishing Mutual Trust Between Machines  \n  \n1.  On machine A, import the file representation of certB into the LocalMachine\\MY and LocalMachine\\ROOT stores. This declares that machine A trusts certB to communicate with it.  \n  \n2.  On machine B, import certA’s file into the LocalMachine\\MY and LocalMachine\\ROOT stores. This implies that machine B trusts certA to communicate with it.  \n  \n After completing these steps, trust is established between the two machines, and they can be configured to communicate with each other using WS-AT.  \n  \n### Configuring MSDTC to Use Certificates  \n Since the WS-AT protocol service acts as both a client and a server, it must both listen for incoming connections and initiate outgoing connections. Therefore, you need to configure MSDTC so that it knows which certificate to use when communicating with external parties, and which certificates to authorize when accepting incoming communication.  \n  \n You can configure this by using the MMC WS-AT snap-in. For more information about this tool, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) topic. The following steps describe how to establish trust between two computers running MSDTC.  \n  \n1.  Configure machine A's settings. For \"Endpoint Certificate\", select certA. For \"Authorized Certificates\", select the certB.  \n  \n2.  Configure machine B's settings. For \"Endpoint Certificate\", select certB. For \"Authorized Certificates\", select the certA.  \n  \n> [!NOTE]\n>  When one machine sends a message to the other machine, the sender attempts to verify that the subject name of the recipient’s certificate and the name of the recipient’s machine match. If they do not match, certificate verification fails and the two machines cannot communicate.  \n>   \n>  For a machine joined to a domain, the name is the fully qualified domain name. By default, the name of a machine on a workgroup is the machine’s NetBIOS name. However, the name can also include a Domain Name System (DNS) suffix if one is present for the connection being used between the two machines.  \n>   \n>  If the name of the machine changes, for example, when a workgroup machine joins a domain, you must reissue certificates or manually configure DNS suffixes.  \n  \n## Security  \n Since some of the settings related to MSDTC and WS-AT are stored in the registry at HKLM\\Software\\Microsoft\\MSDTC and at HKLM\\Software\\Microsoft\\WSAT, respectively, ensure that these registry keys are secured so that only administrators can write to them. In the Registry Editor tool, right-click the key you want to secure and select **Permission** to set the appropriate access control. It is crucial to the security and integrity of the system that important keys are read-only for low-privileged users.  \n  \n When deploying MSDTC, the administrator must ensure that any MSDTC data interchange is secure. In a workgroup deployment, isolate the transactional infrastructure from malicious users; in a cluster deployment, secure the cluster registry.  \n  \n## Tracing  \n The WS-AT protocol service supports integrated, transaction specific tracing that can be enabled and managed through the use of the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) tool.  Traces can include data indicating the time an enlistment is made for a specific transaction, the time a transaction reaches its terminal state, the outcome each transaction enlistment has received. All traces can be viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) tool.  \n  \n The WS-AT protocol service also supports integrated ServiceModel tracing through the ETW trace session. This provides more detailed, communication-specific traces in addition to the existing transaction traces.  To enable these additional traces, follow these steps  \n  \n1.  Open the **Start/Run** menu, type \"regedit\" in the input box and select **OK**.  \n  \n2.  In the **Registry Editor**, navigate to the following folder on the left pane, Hkey_Local_Machine\\SOFTWARE\\Microsoft\\WSAT\\3.0\\  \n  \n3.  Right click the `ServiceModelDiagnosticTracing` value in the right pane and select **Modify**.  \n  \n4.  In the **Value data** input box, enter one of the following valid values to specify the trace level you want to enable.  \n  \n-   0: off  \n  \n-   1: critical  \n  \n-   3: error. This is the default value  \n  \n-   7: warning  \n  \n-   15: information  \n  \n-   31: verbose  \n  \n## See also\n\n- [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)\n- [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)\n","nodes":[{"pos":[4,209],"embed":true,"restype":"x-metadata","content":"title: \"Configuring WS-Atomic Transaction Support\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WS-AT protocol [WCF], configuring WS-Atomic Transaction\"\nms.assetid: cb9f1c9c-1439-4172-b9bc-b01c3e09ac48","nodes":[{"content":"Configuring WS-Atomic Transaction Support","nodes":[{"pos":[0,41],"content":"Configuring WS-Atomic Transaction Support","nodes":[{"content":"Configuring WS-Atomic Transaction Support","pos":[0,41]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[216,257],"content":"Configuring WS-Atomic Transaction Support","linkify":"Configuring WS-Atomic Transaction Support","nodes":[{"content":"Configuring WS-Atomic Transaction Support","pos":[0,41]}]},{"content":"This topic describes how you can configure WS-AtomicTransaction (WS-AT) support by using the WS-AT Configuration Utility.","pos":[258,379]},{"pos":[388,425],"content":"Using the WS-AT Configuration Utility","linkify":"Using the WS-AT Configuration Utility","nodes":[{"content":"Using the WS-AT Configuration Utility","pos":[0,37]}]},{"content":"The WS-AT Configuration Utility (wsatConfig.exe) is used to configure WS-AT settings.","pos":[429,514]},{"content":"In order to enable the WS-AT protocol service, you must use the configuration utility to configure the HTTPS port for WS-AT, bind an X.509 certificate to the HTTPS port, and configure authorized partner certificates by specifying certificate subject names or thumbprints.","pos":[515,786]},{"content":"The configuration utility also allows you to select the tracing mode and set default outgoing and maximum incoming transaction timeouts.","pos":[787,923]},{"content":"You can access this tool's functionality by using a Microsoft Management Console (MMC) property page snap-in in the Component Services management console, or from a command-line window.","pos":[930,1115]},{"content":"Configure WS-AT support on the local machine through the command-line window; configure settings on both local and remote machines by using the MMC snap-in.","pos":[1116,1272]},{"content":"The command-line window can be accessed in the Windows SDK installation location \"%WINDIR%\\Microsoft.NET\\Framework\\v3.0\\Windows Communication Foundation\".","pos":[1279,1433]},{"pos":[1440,1649],"content":"For more information about the command-line tool, see <bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration Utility (wsatConfig.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)</ept>.","source":"For more information about the command-line tool, see [WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)."},{"content":"If you are running <ph id=\"ph1\">[!INCLUDE[wxp](../../../../includes/wxp-md.md)]</ph> or <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph>, you can access the MMC snap-in by navigating to <bpt id=\"p1\">**</bpt>Control Panel/Administrative Tools/Component Services<ept id=\"p1\">**</ept>, right-clicking <bpt id=\"p2\">**</bpt>My Computer<ept id=\"p2\">**</ept>, and selecting <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept>.","pos":[1656,1949],"source":"If you are running [!INCLUDE[wxp](../../../../includes/wxp-md.md)] or [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], you can access the MMC snap-in by navigating to **Control Panel/Administrative Tools/Component Services**, right-clicking **My Computer**, and selecting **Properties**."},{"content":"This is the same location where you can configure the Microsoft Distributed Transaction Coordinator (MSDTC).","pos":[1950,2058]},{"content":"Options available for configuration are grouped under the <bpt id=\"p1\">**</bpt>WS-AT<ept id=\"p1\">**</ept> tab. If you are running Windows Vista or <ph id=\"ph1\">[!INCLUDE[lserver](../../../../includes/lserver-md.md)]</ph>, the MMC snap-in can be found by clicking the <bpt id=\"p2\">**</bpt>Start<ept id=\"p2\">**</ept> button, and entering <ph id=\"ph2\">`dcomcnfg.exe`</ph> in the <bpt id=\"p3\">**</bpt>Search<ept id=\"p3\">**</ept> box.","pos":[2059,2338],"source":" Options available for configuration are grouped under the **WS-AT** tab. If you are running Windows Vista or [!INCLUDE[lserver](../../../../includes/lserver-md.md)], the MMC snap-in can be found by clicking the **Start** button, and entering `dcomcnfg.exe` in the **Search** box."},{"content":"When the MMC is opened, navigate to the <bpt id=\"p1\">**</bpt>My Computer\\Distributed Transaction Coordinator\\Local DTC<ept id=\"p1\">**</ept> node, right click and select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","pos":[2339,2485],"source":" When the MMC is opened, navigate to the **My Computer\\Distributed Transaction Coordinator\\Local DTC** node, right click and select **Properties**."},{"content":"Options available for configuration are grouped under the <bpt id=\"p1\">**</bpt>WS-AT<ept id=\"p1\">**</ept> tab.","pos":[2486,2558],"source":" Options available for configuration are grouped under the **WS-AT** tab."},{"pos":[2565,2744],"content":"For more information about the snap-in, see the <bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration MMC Snap-in<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)</ept>.","source":"For more information about the snap-in, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)."},{"content":"To enable the tool's user interface, you must first register the WsatUI.dll file, located at the following path","pos":[2751,2862]},{"content":"%PROGRAMFILES%\\Microsoft SDKs\\Windows\\v6.0\\Bin","pos":[2869,2915]},{"content":"To register the product, execute the following command from a Command Prompt window:","pos":[2922,3006]},{"pos":[3055,3069],"content":"Enabling WS-AT","linkify":"Enabling WS-AT","nodes":[{"content":"Enabling WS-AT","pos":[0,14]}]},{"content":"To enable the WS-AT protocol service inside MSDTC using port 443 and an X.509 certificate with a private key that has been installed in the local machine store, use the wsatConfig.exe tool with the following command.","pos":[3073,3289]},{"content":"Substitute the respective parameters with values relevant to your environment.","pos":[3449,3527]},{"content":"To disable the WS-AT protocol service inside MSDTC, use the wsatConfig.exe tool with the following command.","pos":[3534,3641]},{"pos":[3699,3737],"content":"Configuring Trust Between Two Machines","linkify":"Configuring Trust Between Two Machines","nodes":[{"content":"Configuring Trust Between Two Machines","pos":[0,38]}]},{"content":"The WS-AT protocol service requires the administrator to explicitly authorize individual accounts to participate in distributed transactions.","pos":[3741,3882]},{"content":"If you are an administrator for two machines, you can configure both machines to establish a mutual trust relationship by exchanging the right set of certificates between the machines, installing them into the appropriate certificate stores, and using the wsatConfig.exe tool to add each machine's certificate to the other's list of authorized participant certificates.","pos":[3883,4252]},{"content":"This step is necessary to perform distributed transactions between two machines using WS-AT.","pos":[4253,4345]},{"content":"In the following example outlines the steps to establish trust between two machines, A and B.","pos":[4352,4445]},{"pos":[4455,4490],"content":"Creating and Exporting Certificates","linkify":"Creating and Exporting Certificates","nodes":[{"content":"Creating and Exporting Certificates","pos":[0,35]}]},{"content":"This procedure requires the MMC Certificates snap-in.","pos":[4494,4547]},{"content":"The snap-in can be accessed by opening the Start/Run menu, typing \"mmc\" in the input box and pressing OK.","pos":[4548,4653]},{"content":"Then, in the <bpt id=\"p1\">**</bpt>Console1<ept id=\"p1\">**</ept> window, navigate to <bpt id=\"p2\">**</bpt>the File/Add-Remove<ept id=\"p2\">**</ept> Snap-in, click Add, and choose <bpt id=\"p3\">**</bpt>Certificates<ept id=\"p3\">**</ept> from the <bpt id=\"p4\">**</bpt>Available Standalone Snapins<ept id=\"p4\">**</ept> list.","pos":[4654,4819],"source":" Then, in the **Console1** window, navigate to **the File/Add-Remove** Snap-in, click Add, and choose **Certificates** from the **Available Standalone Snapins** list."},{"content":"Finally, select <bpt id=\"p1\">**</bpt>Computer Account<ept id=\"p1\">**</ept> to manage and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","pos":[4820,4884],"source":" Finally, select **Computer Account** to manage and click **OK**."},{"content":"The <bpt id=\"p1\">**</bpt>Certificates<ept id=\"p1\">**</ept> node appears in the snap-in console.","pos":[4885,4942],"source":" The **Certificates** node appears in the snap-in console."},{"content":"You must already possess the required certificates to establish trust.","pos":[4949,5019]},{"content":"To learn how to create and install new certificates prior to the following steps, see <bpt id=\"p1\">[</bpt>How to: Create and Install Temporary Client Certificates in WCF During Development<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=158925)</ept>.","pos":[5020,5239],"source":" To learn how to create and install new certificates prior to the following steps, see [How to: Create and Install Temporary Client Certificates in WCF During Development](https://go.microsoft.com/fwlink/?LinkId=158925)."},{"content":"On machine A, using the MMC Certificates snap-in, import the existing certificate (certA) into the LocalMachine\\MY (Personal Node) and LocalMachine\\ROOT store (trusted root certification authority node).","pos":[5249,5452]},{"content":"To import a certificate to a specific node, right-click the node and choose <bpt id=\"p1\">**</bpt>All Tasks/Import<ept id=\"p1\">**</ept>.","pos":[5453,5550],"source":" To import a certificate to a specific node, right-click the node and choose **All Tasks/Import**."},{"content":"On machine B, using the MMC Certificates snap-in, create or obtain a certificate certB with a private key and import it into the LocalMachine\\MY (Personal Node) and LocalMachine\\ROOT store (trusted root certification authority node).","pos":[5560,5793]},{"content":"Export certA's public key to a file if this has not been done already.","pos":[5803,5873]},{"content":"Export certB's public key to a file if this has not been done already.","pos":[5883,5953]},{"pos":[5963,6005],"content":"Establishing Mutual Trust Between Machines","linkify":"Establishing Mutual Trust Between Machines","nodes":[{"content":"Establishing Mutual Trust Between Machines","pos":[0,42]}]},{"content":"On machine A, import the file representation of certB into the LocalMachine\\MY and LocalMachine\\ROOT stores.","pos":[6015,6123]},{"content":"This declares that machine A trusts certB to communicate with it.","pos":[6124,6189]},{"content":"On machine B, import certA’s file into the LocalMachine\\MY and LocalMachine\\ROOT stores.","pos":[6199,6287]},{"content":"This implies that machine B trusts certA to communicate with it.","pos":[6288,6352]},{"content":"After completing these steps, trust is established between the two machines, and they can be configured to communicate with each other using WS-AT.","pos":[6359,6506]},{"pos":[6516,6553],"content":"Configuring MSDTC to Use Certificates","linkify":"Configuring MSDTC to Use Certificates","nodes":[{"content":"Configuring MSDTC to Use Certificates","pos":[0,37]}]},{"content":"Since the WS-AT protocol service acts as both a client and a server, it must both listen for incoming connections and initiate outgoing connections.","pos":[6557,6705]},{"content":"Therefore, you need to configure MSDTC so that it knows which certificate to use when communicating with external parties, and which certificates to authorize when accepting incoming communication.","pos":[6706,6903]},{"content":"You can configure this by using the MMC WS-AT snap-in.","pos":[6910,6964]},{"content":"For more information about this tool, see the <bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration MMC Snap-in<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)</ept> topic.","pos":[6965,7148],"source":" For more information about this tool, see the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) topic."},{"content":"The following steps describe how to establish trust between two computers running MSDTC.","pos":[7149,7237]},{"content":"Configure machine A's settings.","pos":[7247,7278]},{"content":"For \"Endpoint Certificate\", select certA.","pos":[7279,7320]},{"content":"For \"Authorized Certificates\", select the certB.","pos":[7321,7369]},{"content":"Configure machine B's settings.","pos":[7379,7410]},{"content":"For \"Endpoint Certificate\", select certB.","pos":[7411,7452]},{"content":"For \"Authorized Certificates\", select the certA.","pos":[7453,7501]},{"pos":[7509,7798],"content":"[!NOTE]\n When one machine sends a message to the other machine, the sender attempts to verify that the subject name of the recipient’s certificate and the name of the recipient’s machine match. If they do not match, certificate verification fails and the two machines cannot communicate.","leadings":["","> "],"nodes":[{"content":"When one machine sends a message to the other machine, the sender attempts to verify that the subject name of the recipient’s certificate and the name of the recipient’s machine match. If they do not match, certificate verification fails and the two machines cannot communicate.","pos":[9,287],"nodes":[{"content":"When one machine sends a message to the other machine, the sender attempts to verify that the subject name of the recipient’s certificate and the name of the recipient’s machine match.","pos":[0,184]},{"content":"If they do not match, certificate verification fails and the two machines cannot communicate.","pos":[185,278]}]}]},{"content":"For a machine joined to a domain, the name is the fully qualified domain name.","pos":[7809,7887]},{"content":"By default, the name of a machine on a workgroup is the machine’s NetBIOS name.","pos":[7888,7967]},{"content":"However, the name can also include a Domain Name System (DNS) suffix if one is present for the connection being used between the two machines.","pos":[7968,8110]},{"content":"If the name of the machine changes, for example, when a workgroup machine joins a domain, you must reissue certificates or manually configure DNS suffixes.","pos":[8121,8276]},{"pos":[8285,8293],"content":"Security","linkify":"Security","nodes":[{"content":"Security","pos":[0,8]}]},{"content":"Since some of the settings related to MSDTC and WS-AT are stored in the registry at HKLM\\Software\\Microsoft\\MSDTC and at HKLM\\Software\\Microsoft\\WSAT, respectively, ensure that these registry keys are secured so that only administrators can write to them.","pos":[8297,8552]},{"content":"In the Registry Editor tool, right-click the key you want to secure and select <bpt id=\"p1\">**</bpt>Permission<ept id=\"p1\">**</ept> to set the appropriate access control.","pos":[8553,8685],"source":" In the Registry Editor tool, right-click the key you want to secure and select **Permission** to set the appropriate access control."},{"content":"It is crucial to the security and integrity of the system that important keys are read-only for low-privileged users.","pos":[8686,8803]},{"content":"When deploying MSDTC, the administrator must ensure that any MSDTC data interchange is secure.","pos":[8810,8904]},{"content":"In a workgroup deployment, isolate the transactional infrastructure from malicious users; in a cluster deployment, secure the cluster registry.","pos":[8905,9048]},{"pos":[9057,9064],"content":"Tracing","linkify":"Tracing","nodes":[{"content":"Tracing","pos":[0,7]}]},{"content":"The WS-AT protocol service supports integrated, transaction specific tracing that can be enabled and managed through the use of the <bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration MMC Snap-in<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)</ept> tool.","pos":[9068,9336],"source":"The WS-AT protocol service supports integrated, transaction specific tracing that can be enabled and managed through the use of the [WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md) tool."},{"content":"Traces can include data indicating the time an enlistment is made for a specific transaction, the time a transaction reaches its terminal state, the outcome each transaction enlistment has received.","pos":[9338,9536]},{"content":"All traces can be viewed using the <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept> tool.","pos":[9537,9706],"source":" All traces can be viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) tool."},{"content":"The WS-AT protocol service also supports integrated ServiceModel tracing through the ETW trace session.","pos":[9713,9816]},{"content":"This provides more detailed, communication-specific traces in addition to the existing transaction traces.","pos":[9817,9923]},{"content":"To enable these additional traces, follow these steps","pos":[9925,9978]},{"pos":[9988,10067],"content":"Open the <bpt id=\"p1\">**</bpt>Start/Run<ept id=\"p1\">**</ept> menu, type \"regedit\" in the input box and select <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","source":"Open the **Start/Run** menu, type \"regedit\" in the input box and select **OK**."},{"pos":[10077,10203],"content":"In the <bpt id=\"p1\">**</bpt>Registry Editor<ept id=\"p1\">**</ept>, navigate to the following folder on the left pane, Hkey_Local_Machine\\SOFTWARE\\Microsoft\\WSAT\\3.0\\","source":"In the **Registry Editor**, navigate to the following folder on the left pane, Hkey_Local_Machine\\SOFTWARE\\Microsoft\\WSAT\\3.0\\"},{"pos":[10213,10307],"content":"Right click the <ph id=\"ph1\">`ServiceModelDiagnosticTracing`</ph> value in the right pane and select <bpt id=\"p1\">**</bpt>Modify<ept id=\"p1\">**</ept>.","source":"Right click the `ServiceModelDiagnosticTracing` value in the right pane and select **Modify**."},{"pos":[10317,10436],"content":"In the <bpt id=\"p1\">**</bpt>Value data<ept id=\"p1\">**</ept> input box, enter one of the following valid values to specify the trace level you want to enable.","source":"In the **Value data** input box, enter one of the following valid values to specify the trace level you want to enable."},{"content":"0: off","pos":[10446,10452]},{"content":"1: critical","pos":[10462,10473]},{"content":"3: error.","pos":[10483,10492]},{"content":"This is the default value","pos":[10493,10518]},{"content":"7: warning","pos":[10528,10538]},{"content":"15: information","pos":[10548,10563]},{"content":"31: verbose","pos":[10573,10584]},{"pos":[10593,10601],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10605,10759],"content":"<bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration Utility (wsatConfig.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)</ept>","source":"[WS-AtomicTransaction Configuration Utility (wsatConfig.exe)](../../../../docs/framework/wcf/ws-atomictransaction-configuration-utility-wsatconfig-exe.md)"},{"pos":[10762,10892],"content":"<bpt id=\"p1\">[</bpt>WS-AtomicTransaction Configuration MMC Snap-in<ept id=\"p1\">](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)</ept>","source":"[WS-AtomicTransaction Configuration MMC Snap-in](../../../../docs/framework/wcf/ws-atomictransaction-configuration-mmc-snap-in.md)"}]}