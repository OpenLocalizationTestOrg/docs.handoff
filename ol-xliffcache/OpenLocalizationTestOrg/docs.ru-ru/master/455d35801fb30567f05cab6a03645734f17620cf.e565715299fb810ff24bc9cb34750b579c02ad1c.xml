{"content":"---\ntitle: \"User-Drawn Controls | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-winforms\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"custom controls [Windows Forms], user-drawn\"\n  - \"OnPaint method [Windows Forms]\"\n  - \"user-drawn controls [Windows Forms]\"\nms.assetid: 034af4b5-457f-4160-a937-22891817faa8\ncaps.latest.revision: 14\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# User-Drawn Controls\nThe .NET Framework provides you with the ability to easily develop your own controls. You can create a user control, which is a set of standard controls bound together by code, or you can design your own control from the ground up. You can even use inheritance to create a control that inherits from an existing control and add to its inherent functionality. Whatever approach you use, the .NET Framework provides the functionality to draw a custom graphical interface for any control you create.  \n  \n Painting of a control is accomplished by the execution of code in the control's <xref:System.Windows.Forms.Control.OnPaint%2A> method. The single argument of the <xref:System.Windows.Forms.Control.OnPaint%2A> method is a <xref:System.Windows.Forms.PaintEventArgs> object that provides all of the information and functionality required to render your control. The <xref:System.Windows.Forms.PaintEventArgs> provides as properties two principal objects that will be used in the rendering of your control:  \n  \n-   <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> object - the rectangle that represents the part of the control that will be drawn. This can be the entire control, or part of the control depending on how the control is drawn.  \n  \n-   <xref:System.Drawing.Graphics> object - encapsulates several graphics-oriented objects and methods that provide the functionality necessary to draw your control.  \n  \n For more information on the <xref:System.Drawing.Graphics> object and how to use it, see [How to: Create Graphics Objects for Drawing](../../../../docs/framework/winforms/advanced/how-to-create-graphics-objects-for-drawing.md).  \n  \n The <xref:System.Windows.Forms.Control.OnPaint%2A> event is fired whenever the control is drawn or refreshed on the screen, and the <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> object represents the rectangle in which painting will take place. If the entire control needs to be refreshed, the <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> will represent the size of the entire control. If only part of the control needs to be refreshed, however, the <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> object will represent only the region that needs to be redrawn. An example of such a case would be when a control was partially obscured by another control or form in the user interface.  \n  \n When inheriting from the <xref:System.Windows.Forms.Control> class, you must override the <xref:System.Windows.Forms.Control.OnPaint%2A> method and provide graphics-rendering code within. If you want to provide a custom graphical interface to a user control or an inherited control, you can also do so by overriding the <xref:System.Windows.Forms.Control.OnPaint%2A> method. An example is shown below:  \n  \n```vb  \nProtected Overrides Sub OnPaint(ByVal pe As PaintEventArgs)  \n   ' Call the OnPaint method of the base class.  \n   MyBase.OnPaint(pe)  \n  \n   ' Declare and instantiate a drawing pen.  \n   Dim myPen As System.Drawing.Pen = New System.Drawing.Pen(Color.Aqua)  \n  \n   ' Draw an aqua rectangle in the rectangle represented by the control.  \n   pe.Graphics.DrawRectangle(myPen, New Rectangle(Me.Location, Me.Size))  \nEnd Sub  \n  \n```  \n  \n```csharp  \nprotected override void OnPaint(PaintEventArgs pe)  \n{  \n   // Call the OnPaint method of the base class.  \n   base.OnPaint(pe);  \n  \n   // Declare and instantiate a new pen.  \n   System.Drawing.Pen myPen = new System.Drawing.Pen(Color.Aqua);  \n  \n   // Draw an aqua rectangle in the rectangle represented by the control.  \n   pe.Graphics.DrawRectangle(myPen, new Rectangle(this.Location,   \n      this.Size));  \n}  \n  \n```  \n  \n The preceding example demonstrates how to render a control with a very simple graphical representation. It calls the <xref:System.Windows.Forms.Control.OnPaint%2A> method of the base class, it creates a <xref:System.Drawing.Pen> object with which to draw, and finally draws an ellipse in the rectangle determined by the <xref:System.Windows.Forms.Control.Location%2A> and <xref:System.Windows.Forms.Control.Size%2A> of the control. Although most rendering code will be significantly more complicated than this, this example demonstrates the use of the <xref:System.Drawing.Graphics> object contained within the <xref:System.Windows.Forms.PaintEventArgs> object. Note that if you are inheriting from a class that already has a graphical representation, such as <xref:System.Windows.Forms.UserControl> or <xref:System.Windows.Forms.Button>, and you do not wish to incorporate that representation into your rendering, you should not call your base class's <xref:System.Windows.Forms.Control.OnPaint%2A> method.  \n  \n The code in the <xref:System.Windows.Forms.Control.OnPaint%2A> method of your control will execute when the control is first drawn, and whenever it is refreshed. To ensure that your control is redrawn every time it is resized, add the following line to the constructor of your control:  \n  \n```vb  \nSetStyle(ControlStyles.ResizeRedraw, True)  \n  \n```  \n  \n```csharp  \nSetStyle(ControlStyles.ResizeRedraw, true);  \n  \n```  \n  \n> [!NOTE]\n>  Use the <xref:System.Windows.Forms.Control.Region%2A?displayProperty=fullName> property to implement a non-rectangular control.  \n  \n## See Also  \n <xref:System.Windows.Forms.Control.Region%2A>   \n <xref:System.Windows.Forms.ControlStyles>   \n <xref:System.Drawing.Graphics>   \n <xref:System.Windows.Forms.Control.OnPaint%2A>   \n <xref:System.Windows.Forms.PaintEventArgs>   \n [How to: Create Graphics Objects for Drawing](../../../../docs/framework/winforms/advanced/how-to-create-graphics-objects-for-drawing.md)   \n [Constituent Controls](../../../../docs/framework/winforms/controls/constituent-controls.md)   \n [Varieties of Custom Controls](../../../../docs/framework/winforms/controls/varieties-of-custom-controls.md)","nodes":[{"pos":[4,530],"embed":true,"restype":"x-metadata","content":"title: \"User-Drawn Controls | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-winforms\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"custom controls [Windows Forms], user-drawn\"\n  - \"OnPaint method [Windows Forms]\"\n  - \"user-drawn controls [Windows Forms]\"\nms.assetid: 034af4b5-457f-4160-a937-22891817faa8\ncaps.latest.revision: 14\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"","nodes":[{"content":"User-Drawn Controls | Microsoft Docs","nodes":[{"pos":[0,36],"content":"User-Drawn Controls | Microsoft Docs","nodes":[{"content":"User-Drawn Controls | Microsoft Docs","pos":[0,36]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[537,556],"content":"User-Drawn Controls","linkify":"User-Drawn Controls","nodes":[{"content":"User-Drawn Controls","pos":[0,19]}]},{"content":"The .NET Framework provides you with the ability to easily develop your own controls.","pos":[557,642]},{"content":"You can create a user control, which is a set of standard controls bound together by code, or you can design your own control from the ground up.","pos":[643,788]},{"content":"You can even use inheritance to create a control that inherits from an existing control and add to its inherent functionality.","pos":[789,915]},{"content":"Whatever approach you use, the .NET Framework provides the functionality to draw a custom graphical interface for any control you create.","pos":[916,1053]},{"content":"Painting of a control is accomplished by the execution of code in the control's <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method.","pos":[1060,1194],"source":"Painting of a control is accomplished by the execution of code in the control's <xref:System.Windows.Forms.Control.OnPaint%2A> method."},{"content":"The single argument of the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method is a <ph id=\"ph2\">&lt;xref:System.Windows.Forms.PaintEventArgs&gt;</ph> object that provides all of the information and functionality required to render your control.","pos":[1195,1418],"source":" The single argument of the <xref:System.Windows.Forms.Control.OnPaint%2A> method is a <xref:System.Windows.Forms.PaintEventArgs> object that provides all of the information and functionality required to render your control."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Forms.PaintEventArgs&gt;</ph> provides as properties two principal objects that will be used in the rendering of your control:","pos":[1419,1562],"source":" The <xref:System.Windows.Forms.PaintEventArgs> provides as properties two principal objects that will be used in the rendering of your control:"},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A&gt;</ph> object - the rectangle that represents the part of the control that will be drawn.","pos":[1572,1714],"source":"<xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> object - the rectangle that represents the part of the control that will be drawn."},{"content":"This can be the entire control, or part of the control depending on how the control is drawn.","pos":[1715,1808]},{"pos":[1818,1979],"content":"<ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object - encapsulates several graphics-oriented objects and methods that provide the functionality necessary to draw your control.","source":"<xref:System.Drawing.Graphics> object - encapsulates several graphics-oriented objects and methods that provide the functionality necessary to draw your control."},{"pos":[1986,2213],"content":"For more information on the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object and how to use it, see <bpt id=\"p1\">[</bpt>How to: Create Graphics Objects for Drawing<ept id=\"p1\">](../../../../docs/framework/winforms/advanced/how-to-create-graphics-objects-for-drawing.md)</ept>.","source":"For more information on the <xref:System.Drawing.Graphics> object and how to use it, see [How to: Create Graphics Objects for Drawing](../../../../docs/framework/winforms/advanced/how-to-create-graphics-objects-for-drawing.md)."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> event is fired whenever the control is drawn or refreshed on the screen, and the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A&gt;</ph> object represents the rectangle in which painting will take place.","pos":[2220,2478],"source":"The <xref:System.Windows.Forms.Control.OnPaint%2A> event is fired whenever the control is drawn or refreshed on the screen, and the <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> object represents the rectangle in which painting will take place."},{"content":"If the entire control needs to be refreshed, the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A&gt;</ph> will represent the size of the entire control.","pos":[2479,2634],"source":" If the entire control needs to be refreshed, the <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> will represent the size of the entire control."},{"content":"If only part of the control needs to be refreshed, however, the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A&gt;</ph> object will represent only the region that needs to be redrawn.","pos":[2635,2822],"source":" If only part of the control needs to be refreshed, however, the <xref:System.Windows.Forms.PaintEventArgs.ClipRectangle%2A> object will represent only the region that needs to be redrawn."},{"content":"An example of such a case would be when a control was partially obscured by another control or form in the user interface.","pos":[2823,2945]},{"content":"When inheriting from the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control&gt;</ph> class, you must override the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method and provide graphics-rendering code within.","pos":[2952,3139],"source":"When inheriting from the <xref:System.Windows.Forms.Control> class, you must override the <xref:System.Windows.Forms.Control.OnPaint%2A> method and provide graphics-rendering code within."},{"content":"If you want to provide a custom graphical interface to a user control or an inherited control, you can also do so by overriding the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method.","pos":[3140,3326],"source":" If you want to provide a custom graphical interface to a user control or an inherited control, you can also do so by overriding the <xref:System.Windows.Forms.Control.OnPaint%2A> method."},{"content":"An example is shown below:","pos":[3327,3353]},{"content":"The preceding example demonstrates how to render a control with a very simple graphical representation.","pos":[4243,4346]},{"content":"It calls the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method of the base class, it creates a <ph id=\"ph2\">&lt;xref:System.Drawing.Pen&gt;</ph> object with which to draw, and finally draws an ellipse in the rectangle determined by the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.Control.Location%2A&gt;</ph> and <ph id=\"ph4\">&lt;xref:System.Windows.Forms.Control.Size%2A&gt;</ph> of the control.","pos":[4347,4674],"source":" It calls the <xref:System.Windows.Forms.Control.OnPaint%2A> method of the base class, it creates a <xref:System.Drawing.Pen> object with which to draw, and finally draws an ellipse in the rectangle determined by the <xref:System.Windows.Forms.Control.Location%2A> and <xref:System.Windows.Forms.Control.Size%2A> of the control."},{"content":"Although most rendering code will be significantly more complicated than this, this example demonstrates the use of the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object contained within the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.PaintEventArgs&gt;</ph> object.","pos":[4675,4904],"source":" Although most rendering code will be significantly more complicated than this, this example demonstrates the use of the <xref:System.Drawing.Graphics> object contained within the <xref:System.Windows.Forms.PaintEventArgs> object."},{"content":"Note that if you are inheriting from a class that already has a graphical representation, such as <ph id=\"ph1\">&lt;xref:System.Windows.Forms.UserControl&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Button&gt;</ph>, and you do not wish to incorporate that representation into your rendering, you should not call your base class's <ph id=\"ph3\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method.","pos":[4905,5250],"source":" Note that if you are inheriting from a class that already has a graphical representation, such as <xref:System.Windows.Forms.UserControl> or <xref:System.Windows.Forms.Button>, and you do not wish to incorporate that representation into your rendering, you should not call your base class's <xref:System.Windows.Forms.Control.OnPaint%2A> method."},{"content":"The code in the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.OnPaint%2A&gt;</ph> method of your control will execute when the control is first drawn, and whenever it is refreshed.","pos":[5257,5418],"source":"The code in the <xref:System.Windows.Forms.Control.OnPaint%2A> method of your control will execute when the control is first drawn, and whenever it is refreshed."},{"content":"To ensure that your control is redrawn every time it is resized, add the following line to the constructor of your control:","pos":[5419,5542]},{"pos":[5685,5823],"content":"[!NOTE]\n Use the <xref:System.Windows.Forms.Control.Region%2A?displayProperty=fullName> property to implement a non-rectangular control.","leadings":["","> "],"nodes":[{"content":"Use the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.Region%2A?displayProperty=fullName&gt;</ph> property to implement a non-rectangular control.","pos":[9,136],"source":"Use the <xref:System.Windows.Forms.Control.Region%2A?displayProperty=fullName> property to implement a non-rectangular control."}]},{"pos":[5832,5840],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>How to: Create Graphics Objects for Drawing<ept id=\"p1\">](../../../../docs/framework/winforms/advanced/how-to-create-graphics-objects-for-drawing.md)</ept><ph id=\"ph1\"> </ph>","pos":[6073,6211],"source":"[How to: Create Graphics Objects for Drawing](../../../../docs/framework/winforms/advanced/how-to-create-graphics-objects-for-drawing.md) "},{"content":"<bpt id=\"p1\">[</bpt>Constituent Controls<ept id=\"p1\">](../../../../docs/framework/winforms/controls/constituent-controls.md)</ept><ph id=\"ph1\"> </ph>","pos":[6215,6308],"source":"[Constituent Controls](../../../../docs/framework/winforms/controls/constituent-controls.md) "},{"content":"<bpt id=\"p1\">[</bpt>Varieties of Custom Controls<ept id=\"p1\">](../../../../docs/framework/winforms/controls/varieties-of-custom-controls.md)</ept>","pos":[6312,6420],"source":"[Varieties of Custom Controls](../../../../docs/framework/winforms/controls/varieties-of-custom-controls.md)"}]}