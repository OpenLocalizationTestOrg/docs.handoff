{"content":"---\ntitle: \"Collections and Collection Types for XAML\"\nms.date: \"03/30/2017\"\nms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa\n---\n\n# Collections and Collection Types for XAML\n\nThis topic describes how to define properties of types that are intended to support a collection, and to support the XAML syntax for instantiating collection items as element children of a parent object element or property element.\n\n## XAML Collection Concepts\n\nConceptually, any relationship in XAML where there are multiple child items within the scope of a XAML object element or XAML property element must be implemented as a collection. That collection must be associated with a particular XAML property of the XAML type that is the parent in that relationship. The property must be a collection because a XAML processor expects to assign each item in markup to be a newly added item of the backing collection property.\n\nAt the XAML language level, the exact requirements of collection support are not fully defined. The concept that a collection can be either a list or a dictionary(but not both) is defined at the XAML language level, but which backing types represent either lists or dictionaries is not defined by the XAML language.\n\nIn .NET Framework XAML Services, the concept of XAML collection support is more clearly defined in terms of .NET Framework backing types. Specifically, the XAML support for collections is based on several .NET Framework concepts and APIs that are used for lists and dictionaries in general .NET Framework programming.\n\n1. The <xref:System.Collections.IList> interface indicates a list collection.\n\n2. The <xref:System.Collections.IDictionary> interface indicates a dictionary collection.\n\n3. <xref:System.Array> represents an array, and an array supports <xref:System.Collections.IList> methods.\n\nIn each of these collection concepts, a .NET Framework XAML Services XAML processor expects to call the `Add` method on a specific instance of the collection property's type. Or, in a serialization scenario, a XAML processor produces discrete XAML-type instances for each item found in the list, dictionary or array based on each collection's specific concept of \"Items\". These are : <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; the explicit <xref:System.Array.System%23Collections%23IList%23Item%2A> for <xref:System.Array>.\n\n## Generic Collections\n\nGeneric collections can be useful for general .NET Framework programming, and can also be used for XAML collection properties. However, the generic interfaces <xref:System.Collections.Generic.IList%601> and <xref:System.Collections.Generic.IDictionary%602> are not identified by .NET Framework XAML Services XAML processors as being equivalent to the non-generic <xref:System.Collections.IList> or <xref:System.Collections.IDictionary>. Rather than implementing the interfaces, a recommended approach for generic collection property types is to derive from the classes <xref:System.Collections.Generic.List%601> or <xref:System.Collections.Generic.Dictionary%602>. These classes implement the non-generic interfaces and thus include the expected support for XAML collections in the base implementation.\n\n## Read-Only Collections and Initialization Logic\n\nIn .NET Framework programming, it is a common design pattern to make any property that holds a value of a collection as a read-only collection. This pattern permits the instance that owns the collection property to better control what happens to the collection.. Specifically, the pattern prevents accidental replacement of the entire pre-existing collection by setting the property. In this pattern, any access to the collection by callers should instead be made by calling methods or properties as supported by the collection type and/or the relevant collection interfaces such as <xref:System.Collections.IList>.\n\nUsing this pattern implies that any class that exposes a read-only collection property must first initialize that property to hold an empty collection. Typically the initialization is performed as part of the construction behavior for the class. To be useful for XAML, it is important that such logic is always referenced by the default constructor, because XAML generally calls the default constructor prior to processing the properties (collection properties or otherwise).\n\n## XAML Type System Support and Collections\n\nBeyond the basic mechanics of parsing XAML and populating or serializing collection properties, the XAML type system as implemented in .NET Framework XAML Services includes several design features that pertain to collections in XAML.\n\n1. <xref:System.Xaml.XamlType.IsCollection%2A> returns true if the XAML type is backed by a type that provides XAML collection support.\n\n2. <xref:System.Xaml.XamlType.IsDictionary%2A> and <xref:System.Xaml.XamlType.IsArray%2A> can further identify which collection mode the XAML type supports. For custom XAML processors that are based on .NET Framework XAML Services and the XAML type system but not based on existing <xref:System.Xaml.XamlWriter> implementations, knowing which collection mode is used might be necessary in order to know which method to invoke for collection processing.\n\n3. Each of the previous property values are potentially influenced by overrides of <xref:System.Xaml.XamlType.LookupCollectionKind%2A> on a XAML type.\n","nodes":[{"pos":[4,125],"embed":true,"restype":"x-metadata","content":"title: \"Collections and Collection Types for XAML\"\nms.date: \"03/30/2017\"\nms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa","nodes":[{"content":"Collections and Collection Types for XAML","nodes":[{"pos":[0,41],"content":"Collections and Collection Types for XAML","nodes":[{"content":"Collections and Collection Types for XAML","pos":[0,41]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[133,174],"content":"Collections and Collection Types for XAML","linkify":"Collections and Collection Types for XAML","nodes":[{"content":"Collections and Collection Types for XAML","pos":[0,41]}]},{"content":"This topic describes how to define properties of types that are intended to support a collection, and to support the XAML syntax for instantiating collection items as element children of a parent object element or property element.","pos":[176,407]},{"pos":[412,436],"content":"XAML Collection Concepts","linkify":"XAML Collection Concepts","nodes":[{"content":"XAML Collection Concepts","pos":[0,24]}]},{"content":"Conceptually, any relationship in XAML where there are multiple child items within the scope of a XAML object element or XAML property element must be implemented as a collection.","pos":[438,617]},{"content":"That collection must be associated with a particular XAML property of the XAML type that is the parent in that relationship.","pos":[618,742]},{"content":"The property must be a collection because a XAML processor expects to assign each item in markup to be a newly added item of the backing collection property.","pos":[743,900]},{"content":"At the XAML language level, the exact requirements of collection support are not fully defined.","pos":[902,997]},{"content":"The concept that a collection can be either a list or a dictionary(but not both) is defined at the XAML language level, but which backing types represent either lists or dictionaries is not defined by the XAML language.","pos":[998,1217]},{"content":"In .NET Framework XAML Services, the concept of XAML collection support is more clearly defined in terms of .NET Framework backing types.","pos":[1219,1356]},{"content":"Specifically, the XAML support for collections is based on several .NET Framework concepts and APIs that are used for lists and dictionaries in general .NET Framework programming.","pos":[1357,1536]},{"pos":[1541,1615],"content":"The <ph id=\"ph1\">&lt;xref:System.Collections.IList&gt;</ph> interface indicates a list collection.","source":"The <xref:System.Collections.IList> interface indicates a list collection."},{"pos":[1620,1706],"content":"The <ph id=\"ph1\">&lt;xref:System.Collections.IDictionary&gt;</ph> interface indicates a dictionary collection.","source":"The <xref:System.Collections.IDictionary> interface indicates a dictionary collection."},{"pos":[1711,1814],"content":"<ph id=\"ph1\">&lt;xref:System.Array&gt;</ph> represents an array, and an array supports <ph id=\"ph2\">&lt;xref:System.Collections.IList&gt;</ph> methods.","source":"<xref:System.Array> represents an array, and an array supports <xref:System.Collections.IList> methods."},{"content":"In each of these collection concepts, a .NET Framework XAML Services XAML processor expects to call the <ph id=\"ph1\">`Add`</ph> method on a specific instance of the collection property's type.","pos":[1816,1990],"source":"In each of these collection concepts, a .NET Framework XAML Services XAML processor expects to call the `Add` method on a specific instance of the collection property's type."},{"content":"Or, in a serialization scenario, a XAML processor produces discrete XAML-type instances for each item found in the list, dictionary or array based on each collection's specific concept of \"Items\".","pos":[1991,2187]},{"content":"These are : <ph id=\"ph1\">&lt;xref:System.Collections.IList.Item%2A&gt;</ph>; <ph id=\"ph2\">&lt;xref:System.Collections.IDictionary.Item%2A&gt;</ph>; the explicit <ph id=\"ph3\">&lt;xref:System.Array.System%23Collections%23IList%23Item%2A&gt;</ph> for <ph id=\"ph4\">&lt;xref:System.Array&gt;</ph>.","pos":[2188,2384],"source":" These are : <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; the explicit <xref:System.Array.System%23Collections%23IList%23Item%2A> for <xref:System.Array>."},{"pos":[2389,2408],"content":"Generic Collections","linkify":"Generic Collections","nodes":[{"content":"Generic Collections","pos":[0,19]}]},{"content":"Generic collections can be useful for general .NET Framework programming, and can also be used for XAML collection properties.","pos":[2410,2536]},{"content":"However, the generic interfaces <ph id=\"ph1\">&lt;xref:System.Collections.Generic.IList%601&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Collections.Generic.IDictionary%602&gt;</ph> are not identified by .NET Framework XAML Services XAML processors as being equivalent to the non-generic <ph id=\"ph3\">&lt;xref:System.Collections.IList&gt;</ph> or <ph id=\"ph4\">&lt;xref:System.Collections.IDictionary&gt;</ph>.","pos":[2537,2846],"source":" However, the generic interfaces <xref:System.Collections.Generic.IList%601> and <xref:System.Collections.Generic.IDictionary%602> are not identified by .NET Framework XAML Services XAML processors as being equivalent to the non-generic <xref:System.Collections.IList> or <xref:System.Collections.IDictionary>."},{"content":"Rather than implementing the interfaces, a recommended approach for generic collection property types is to derive from the classes <ph id=\"ph1\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Collections.Generic.Dictionary%602&gt;</ph>.","pos":[2847,3074],"source":" Rather than implementing the interfaces, a recommended approach for generic collection property types is to derive from the classes <xref:System.Collections.Generic.List%601> or <xref:System.Collections.Generic.Dictionary%602>."},{"content":"These classes implement the non-generic interfaces and thus include the expected support for XAML collections in the base implementation.","pos":[3075,3212]},{"pos":[3217,3263],"content":"Read-Only Collections and Initialization Logic","linkify":"Read-Only Collections and Initialization Logic","nodes":[{"content":"Read-Only Collections and Initialization Logic","pos":[0,46]}]},{"content":"In .NET Framework programming, it is a common design pattern to make any property that holds a value of a collection as a read-only collection.","pos":[3265,3408]},{"content":"This pattern permits the instance that owns the collection property to better control what happens to the collection..","pos":[3409,3527]},{"content":"Specifically, the pattern prevents accidental replacement of the entire pre-existing collection by setting the property.","pos":[3528,3648]},{"content":"In this pattern, any access to the collection by callers should instead be made by calling methods or properties as supported by the collection type and/or the relevant collection interfaces such as <ph id=\"ph1\">&lt;xref:System.Collections.IList&gt;</ph>.","pos":[3649,3880],"source":" In this pattern, any access to the collection by callers should instead be made by calling methods or properties as supported by the collection type and/or the relevant collection interfaces such as <xref:System.Collections.IList>."},{"content":"Using this pattern implies that any class that exposes a read-only collection property must first initialize that property to hold an empty collection.","pos":[3882,4033]},{"content":"Typically the initialization is performed as part of the construction behavior for the class.","pos":[4034,4127]},{"content":"To be useful for XAML, it is important that such logic is always referenced by the default constructor, because XAML generally calls the default constructor prior to processing the properties (collection properties or otherwise).","pos":[4128,4357]},{"pos":[4362,4402],"content":"XAML Type System Support and Collections","linkify":"XAML Type System Support and Collections","nodes":[{"content":"XAML Type System Support and Collections","pos":[0,40]}]},{"content":"Beyond the basic mechanics of parsing XAML and populating or serializing collection properties, the XAML type system as implemented in .NET Framework XAML Services includes several design features that pertain to collections in XAML.","pos":[4404,4637]},{"pos":[4642,4774],"content":"<ph id=\"ph1\">&lt;xref:System.Xaml.XamlType.IsCollection%2A&gt;</ph> returns true if the XAML type is backed by a type that provides XAML collection support.","source":"<xref:System.Xaml.XamlType.IsCollection%2A> returns true if the XAML type is backed by a type that provides XAML collection support."},{"content":"<ph id=\"ph1\">&lt;xref:System.Xaml.XamlType.IsDictionary%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Xaml.XamlType.IsArray%2A&gt;</ph> can further identify which collection mode the XAML type supports.","pos":[4779,4932],"source":"<xref:System.Xaml.XamlType.IsDictionary%2A> and <xref:System.Xaml.XamlType.IsArray%2A> can further identify which collection mode the XAML type supports."},{"content":"For custom XAML processors that are based on .NET Framework XAML Services and the XAML type system but not based on existing <ph id=\"ph1\">&lt;xref:System.Xaml.XamlWriter&gt;</ph> implementations, knowing which collection mode is used might be necessary in order to know which method to invoke for collection processing.","pos":[4933,5228],"source":" For custom XAML processors that are based on .NET Framework XAML Services and the XAML type system but not based on existing <xref:System.Xaml.XamlWriter> implementations, knowing which collection mode is used might be necessary in order to know which method to invoke for collection processing."},{"pos":[5233,5380],"content":"Each of the previous property values are potentially influenced by overrides of <ph id=\"ph1\">&lt;xref:System.Xaml.XamlType.LookupCollectionKind%2A&gt;</ph> on a XAML type.","source":"Each of the previous property values are potentially influenced by overrides of <xref:System.Xaml.XamlType.LookupCollectionKind%2A> on a XAML type."}]}