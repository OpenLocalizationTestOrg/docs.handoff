{"content":"---\ntitle: \"How to: Set Cache Policy for a Request | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"request cache policies\"\nms.assetid: 39c15e40-586b-4ac9-9cce-146f74b7e545\ncaps.latest.revision: 11\nauthor: \"mcleblanc\"\nms.author: \"markl\"\nmanager: \"markl\"\n---\n# How to: Set Cache Policy for a Request\nThe following example demonstrates setting a cache policy for a request. The example input is a URI such as http://www.contoso.com/.  \n  \n## Example  \n The following code example creates a cache policy that allows the requested resource to be used from the cache if it has not been in the cache for longer than one day. The example displays a message that indicates whether the resource was used from the cache—for example, `\"The response was retrieved from the cache : False.\"`—and then displays the resource. A request can be fulfilled by any cache between the client and server.  \n  \n```csharp  \nusing System;  \nusing System.Net;  \nusing System.Net.Cache;  \nusing System.IO;  \n  \nnamespace Examples.System.Net.Cache  \n{  \n    public class CacheExample  \n    {     \n        public static void UseCacheForOneDay(Uri resource)  \n        {  \n            // Create a policy that allows items in the cache  \n            // to be used if they have been cached one day or less.  \n            HttpRequestCachePolicy requestPolicy =   \n                new HttpRequestCachePolicy (HttpCacheAgeControl.MaxAge,  \n                TimeSpan.FromDays(1));  \n  \n            WebRequest request = WebRequest.Create (resource);  \n            // Set the policy for this request only.  \n            request.CachePolicy = requestPolicy;  \n            HttpWebResponse response = (HttpWebResponse)request.GetResponse();  \n            // Determine whether the response was retrieved from the cache.  \n            Console.WriteLine (\"The response was retrieved from the cache : {0}.\",  \n               response.IsFromCache);  \n            Stream s = response.GetResponseStream ();  \n            StreamReader reader = new StreamReader (s);  \n            // Display the requested resource.  \n            Console.WriteLine(reader.ReadToEnd());  \n            reader.Close ();  \n            s.Close();  \n            response.Close();  \n        }  \n        public static void Main(string[] args)  \n        {  \n            if (args == null || args.Length != 1)  \n            {  \n                Console.WriteLine (\"You must specify the URI to retrieve.\");  \n                return;  \n            }  \n            UseCacheForOneDay (new Uri(args[0]));  \n        }  \n    }  \n}  \n```  \n  \n```vb  \nImports System  \nImports System.Net  \nImports System.Net.Cache  \nImports System.IO  \nNamespace Examples.System.Net.Cache  \n    Public Class CacheExample  \n        Public Shared Sub UseCacheForOneDay(ByVal resource As Uri)  \n            ' Create a policy that allows items in the cache  \n            ' to be used if they have been cached one day or less.  \n            Dim requestPolicy As New HttpRequestCachePolicy _  \n                  (HttpCacheAgeControl.MaxAge, TimeSpan.FromDays(1))  \n            Dim request As WebRequest = WebRequest.Create(resource)  \n            ' Set the policy for this request only.  \n            request.CachePolicy = requestPolicy  \n            Dim response As HttpWebResponse = _  \n             CType(request.GetResponse(), HttpWebResponse)  \n            ' Determine whether the response was retrieved from the cache.  \n            Console.WriteLine(\"The response was retrieved from the cache : {0}.\", _  \n                response.IsFromCache)  \n            Dim s As Stream = response.GetResponseStream()  \n            Dim reader As New StreamReader(s)  \n            ' Display the requested resource.  \n            Console.WriteLine(reader.ReadToEnd())  \n            reader.Close()  \n            s.Close()  \n            response.Close()  \n        End Sub  \n        Public Shared Sub Main(ByVal args() As String)  \n            If args Is Nothing OrElse args.Length <> 1 Then  \n                Console.WriteLine(\"You must specify the URI to retrieve.\")  \n                Return  \n            End If  \n            UseCacheForOneDay(New Uri(args(0)))  \n        End Sub  \n    End Class  \nEnd Namespace  \n  \n```  \n  \n## See Also  \n [Cache Management for Network Applications](../../../docs/framework/network-programming/cache-management-for-network-applications.md)   \n [Cache Policy](../../../docs/framework/network-programming/cache-policy.md)   \n [Location-Based Cache Policies](../../../docs/framework/network-programming/location-based-cache-policies.md)   \n [Time-Based Cache Policies](../../../docs/framework/network-programming/time-based-cache-policies.md)   \n [\\<requestCaching> Element (Network Settings)](../../../docs/framework/configure-apps/file-schema/network/requestcaching-element-network-settings.md)","nodes":[{"pos":[4,435],"nodes":[{"content":"How to: Set Cache Policy for a Request | Microsoft Docs","nodes":[{"pos":[0,55],"content":"How to: Set Cache Policy for a Request | Microsoft Docs","nodes":[{"content":"How to: Set Cache Policy for a Request | Microsoft Docs","pos":[0,55]}]}],"pos":[6,64],"yaml":true}],"content":"title: \"How to: Set Cache Policy for a Request | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"request cache policies\"\nms.assetid: 39c15e40-586b-4ac9-9cce-146f74b7e545\ncaps.latest.revision: 11\nauthor: \"mcleblanc\"\nms.author: \"markl\"\nmanager: \"markl\"","yamlblock":true},{"pos":[442,480],"content":"How to: Set Cache Policy for a Request","linkify":"How to: Set Cache Policy for a Request","nodes":[{"content":"How to: Set Cache Policy for a Request","pos":[0,38]}]},{"content":"The following example demonstrates setting a cache policy for a request.","pos":[481,553]},{"content":"The example input is a URI such as http://www.contoso.com/.","pos":[554,613]},{"pos":[622,629],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example creates a cache policy that allows the requested resource to be used from the cache if it has not been in the cache for longer than one day.","pos":[633,800]},{"content":"The example displays a message that indicates whether the resource was used from the cache—for example, <ph id=\"ph1\">`\"The response was retrieved from the cache : False.\"`</ph>—and then displays the resource.","pos":[801,991],"source":" The example displays a message that indicates whether the resource was used from the cache—for example, `\"The response was retrieved from the cache : False.\"`—and then displays the resource."},{"content":"A request can be fulfilled by any cache between the client and server.","pos":[992,1062]},{"pos":[4389,4397],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Cache Management for Network Applications<ept id=\"p1\">](../../../docs/framework/network-programming/cache-management-for-network-applications.md)</ept><ph id=\"ph1\"> </ph>","pos":[4401,4535],"source":"[Cache Management for Network Applications](../../../docs/framework/network-programming/cache-management-for-network-applications.md) "},{"content":"<bpt id=\"p1\">[</bpt>Cache Policy<ept id=\"p1\">](../../../docs/framework/network-programming/cache-policy.md)</ept><ph id=\"ph1\"> </ph>","pos":[4539,4615],"source":"[Cache Policy](../../../docs/framework/network-programming/cache-policy.md) "},{"content":"<bpt id=\"p1\">[</bpt>Location-Based Cache Policies<ept id=\"p1\">](../../../docs/framework/network-programming/location-based-cache-policies.md)</ept><ph id=\"ph1\"> </ph>","pos":[4619,4729],"source":"[Location-Based Cache Policies](../../../docs/framework/network-programming/location-based-cache-policies.md) "},{"content":"<bpt id=\"p1\">[</bpt>Time-Based Cache Policies<ept id=\"p1\">](../../../docs/framework/network-programming/time-based-cache-policies.md)</ept><ph id=\"ph1\"> </ph>","pos":[4733,4835],"source":"[Time-Based Cache Policies](../../../docs/framework/network-programming/time-based-cache-policies.md) "},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>requestCaching&gt; Element (Network Settings)<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/network/requestcaching-element-network-settings.md)</ept>","pos":[4839,4988],"source":"[\\<requestCaching> Element (Network Settings)](../../../docs/framework/configure-apps/file-schema/network/requestcaching-element-network-settings.md)"}]}