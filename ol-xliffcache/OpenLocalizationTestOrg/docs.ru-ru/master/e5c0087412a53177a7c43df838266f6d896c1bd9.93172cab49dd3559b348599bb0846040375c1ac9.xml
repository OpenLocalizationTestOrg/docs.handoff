{"content":"---\ntitle: \"Mitigation: XML Schema Validation\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: b73dd4f4-f2dc-47a2-9425-3896e92321fb\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Mitigation: XML Schema Validation\nIn the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], XSD schema validation detects a violation of the unique constraint if a compound key is used and one key is empty.  \n  \n## Impact  \n The impact of this change should be minimal: based on the schema specification, a schema validation error is expected if `xsd:unique` is violated by using a compound key with an empty key.  \n  \n## Mitigation  \n Whether a schema validation error is detected if a compound key has one empty key is a configurable feature:  \n  \n-   Starting with the apps that target the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], detection of the schema validation error is enabled by default; however, it is possible to opt out of it, so that the schema validation error will not be detected.  \n  \n-   In apps that run under the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] but target the [!INCLUDE[net_v452](../../../includes/net-v452-md.md)] and earlier versions, a schema validation error is not detected by default; however, it is possible to opt into it, so that the schema validation error will be detected.  \n  \n This behavior can be configured by using the <xref:System.AppContext> class to define the value of the `System.Xml.IgnoreEmptyKeySequences` switch. Because the switch's default value is `false` (empty key sequences are not ignored), apps that target the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] can opt out of the behavior by using the following code to set the switch's value to `true`:  \n  \n [!code-csharp[AppCompat.IgnoreEmptyKeySequences#1](../../../samples/snippets/csharp/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/cs/program.cs#1)]\n [!code-vb[AppCompat.IgnoreEmptyKeySequences#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/vb/module1.vb#1)]  \n  \n For apps that target the [!INCLUDE[net_v452](../../../includes/net-v452-md.md)] and earlier versions, because the switch's default value is `true` (empty key sequences are ignored), it is possible to ensure that a compound key with an empty key does generate a schema validation error by using the following code to set the switch's value to `false`.  \n  \n [!code-csharp[AppCompat.IgnoreEmptyKeySequences#2](../../../samples/snippets/csharp/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/cs/program.cs#2)]\n [!code-vb[AppCompat.IgnoreEmptyKeySequences#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/vb/module1.vb#2)]  \n  \n## See also\n\n- [Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6.md)\n","nodes":[{"pos":[4,191],"embed":true,"restype":"x-metadata","content":"title: \"Mitigation: XML Schema Validation\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: b73dd4f4-f2dc-47a2-9425-3896e92321fb\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Mitigation: XML Schema Validation","nodes":[{"pos":[0,33],"content":"Mitigation: XML Schema Validation","nodes":[{"content":"Mitigation: XML Schema Validation","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[198,231],"content":"Mitigation: XML Schema Validation","linkify":"Mitigation: XML Schema Validation","nodes":[{"content":"Mitigation: XML Schema Validation","pos":[0,33]}]},{"pos":[232,407],"content":"In the <ph id=\"ph1\">[!INCLUDE[net_v46](../../../includes/net-v46-md.md)]</ph>, XSD schema validation detects a violation of the unique constraint if a compound key is used and one key is empty.","source":"In the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], XSD schema validation detects a violation of the unique constraint if a compound key is used and one key is empty."},{"pos":[416,422],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"pos":[426,614],"content":"The impact of this change should be minimal: based on the schema specification, a schema validation error is expected if <ph id=\"ph1\">`xsd:unique`</ph> is violated by using a compound key with an empty key.","source":"The impact of this change should be minimal: based on the schema specification, a schema validation error is expected if `xsd:unique` is violated by using a compound key with an empty key."},{"pos":[623,633],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"content":"Whether a schema validation error is detected if a compound key has one empty key is a configurable feature:","pos":[637,745]},{"pos":[755,1011],"content":"Starting with the apps that target the <ph id=\"ph1\">[!INCLUDE[net_v46](../../../includes/net-v46-md.md)]</ph>, detection of the schema validation error is enabled by default; however, it is possible to opt out of it, so that the schema validation error will not be detected.","source":"Starting with the apps that target the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], detection of the schema validation error is enabled by default; however, it is possible to opt out of it, so that the schema validation error will not be detected."},{"pos":[1021,1340],"content":"In apps that run under the <ph id=\"ph1\">[!INCLUDE[net_v46](../../../includes/net-v46-md.md)]</ph> but target the <ph id=\"ph2\">[!INCLUDE[net_v452](../../../includes/net-v452-md.md)]</ph> and earlier versions, a schema validation error is not detected by default; however, it is possible to opt into it, so that the schema validation error will be detected.","source":"In apps that run under the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] but target the [!INCLUDE[net_v452](../../../includes/net-v452-md.md)] and earlier versions, a schema validation error is not detected by default; however, it is possible to opt into it, so that the schema validation error will be detected."},{"content":"This behavior can be configured by using the <ph id=\"ph1\">&lt;xref:System.AppContext&gt;</ph> class to define the value of the <ph id=\"ph2\">`System.Xml.IgnoreEmptyKeySequences`</ph> switch.","pos":[1347,1494],"source":"This behavior can be configured by using the <xref:System.AppContext> class to define the value of the `System.Xml.IgnoreEmptyKeySequences` switch."},{"content":"Because the switch's default value is <ph id=\"ph1\">`false`</ph> (empty key sequences are not ignored), apps that target the <ph id=\"ph2\">[!INCLUDE[net_v46](../../../includes/net-v46-md.md)]</ph> can opt out of the behavior by using the following code to set the switch's value to <ph id=\"ph3\">`true`</ph>:","pos":[1495,1746],"source":" Because the switch's default value is `false` (empty key sequences are not ignored), apps that target the [!INCLUDE[net_v46](../../../includes/net-v46-md.md)] can opt out of the behavior by using the following code to set the switch's value to `true`:"},{"pos":[1753,2058],"content":"[!code-csharp[AppCompat.IgnoreEmptyKeySequences#1](../../../samples/snippets/csharp/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/cs/program.cs#1)]\n[!code-vb[AppCompat.IgnoreEmptyKeySequences#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/vb/module1.vb#1)]","leadings":[""," "],"nodes":[]},{"pos":[2065,2415],"content":"For apps that target the <ph id=\"ph1\">[!INCLUDE[net_v452](../../../includes/net-v452-md.md)]</ph> and earlier versions, because the switch's default value is <ph id=\"ph2\">`true`</ph> (empty key sequences are ignored), it is possible to ensure that a compound key with an empty key does generate a schema validation error by using the following code to set the switch's value to <ph id=\"ph3\">`false`</ph>.","source":"For apps that target the [!INCLUDE[net_v452](../../../includes/net-v452-md.md)] and earlier versions, because the switch's default value is `true` (empty key sequences are ignored), it is possible to ensure that a compound key with an empty key does generate a schema validation error by using the following code to set the switch's value to `false`."},{"pos":[2422,2727],"content":"[!code-csharp[AppCompat.IgnoreEmptyKeySequences#2](../../../samples/snippets/csharp/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/cs/program.cs#2)]\n[!code-vb[AppCompat.IgnoreEmptyKeySequences#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/appcompat.ignoreemptykeysequences/vb/module1.vb#2)]","leadings":[""," "],"nodes":[]},{"pos":[2736,2744],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2748,2858],"content":"<bpt id=\"p1\">[</bpt>Retargeting Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6.md)</ept>","source":"[Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6.md)"}]}