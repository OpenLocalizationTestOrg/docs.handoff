{"content":"---\ntitle: \"How to: Compile Conditionally with Trace and Debug | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"trace compiler options\"\n  - \"trace statements\"\n  - \"compiling source code, trace statements\"\n  - \"tracing [.NET Framework], enabling or disabling\"\n  - \"tracing [.NET Framework], compiling conditionally\"\n  - \"TRACE directive\"\n  - \"conditional compilation, tracing code\"\nms.assetid: 56d051c3-012c-42c1-9a58-7270edc624aa\ncaps.latest.revision: 11\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# How to: Compile Conditionally with Trace and Debug\nWhile you are debugging an application during development, both your tracing and debugging output go to the Output window in Visual Studio. However, to include tracing features in a deployed application, you must compile your instrumented applications with the **TRACE** compiler directive enabled. This allows tracing code to be compiled into the release version of your application. If you do not enable the **TRACE** directive, all tracing code is ignored during compilation and is not included in the executable code that you will deploy.  \n  \n Both the tracing and debugging methods have associated conditional attributes. For example, if the conditional attribute for tracing is **true**, all trace statements are included within an assembly (a compiled .exe file or .dll); if the **Trace** conditional attribute is **false**, the trace statements are not included.  \n  \n You can have either the **Trace** or **Debug** conditional attribute turned on for a build, or both, or neither. Thus, there are four types of build: **Debug**, **Trace**, both, or neither. Some release builds for production deployment might contain neither; most debugging builds contain both.  \n  \n You can specify the compiler settings for your application in several ways:  \n  \n-   The property pages  \n  \n-   The command line  \n  \n-   **#CONST** (for Visual Basic) and **#define** (for C#)  \n  \n### To change compile settings from the property pages dialog box  \n  \n1.  Right-click the project node in **Solution Explorer**.  \n  \n2.  Choose **Properties** from the shortcut menu.  \n  \n    -   In Visual Basic, click the **Compile** tab in the left pane of the property page, then click the **Advanced Compile Options** button to display the **Advanced Compiler Settings** dialog box. Select the check boxes for the compiler settings you want to enable. Clear the check boxes for settings you want to disable.  \n  \n    -   In C#, click the **Build** tab in the left pane of the property page, then select the check boxes for the compiler settings you want to enable. Clear the check boxes for settings you want to disable.  \n  \n### To compile instrumented code using the command line  \n  \n1.  Set a conditional compiler switch on the command line. The compiler will include trace or debug code in the executable.  \n  \n     For example, the following compiler instruction entered on the command line would include your tracing code in a compiled executable:  \n  \n     For Visual Basic: **vbc /r:System.dll /d:TRACE=TRUE /d:DEBUG=FALSE MyApplication.vb**  \n  \n     For C#: **csc /r:System.dll /d:TRACE /d:DEBUG=FALSE MyApplication.cs**  \n  \n    > [!TIP]\n    >  To compile more than one application file, leave a blank space between the file names, for example, **MyApplication1.vb MyApplication2.vb MyApplication3.vb** or **MyApplication1.cs MyApplication2.cs MyApplication3.cs**.  \n  \n     The meaning of the conditional-compilation directives used in the above examples is as follows:  \n  \n    |Directive|Meaning|  \n    |---------------|-------------|  \n    |`vbc`|Visual Basic compiler|  \n    |`csc`|C# compiler|  \n    |`/r:`|References an external assembly (EXE or DLL)|  \n    |`/d:`|Defines a conditional compilation symbol|  \n  \n    > [!NOTE]\n    >  You must spell TRACE or DEBUG with uppercase letters. For more information about the conditional compilation commands, enter `vbc /?` (for Visual Basic) or `csc /?` (for C#) at the command prompt. For more information, see [Building from the Command Line](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md) (C#) or [Invoking the Command-Line Compiler](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md) (Visual Basic).  \n  \n### To perform conditional compilation using #CONST or #define  \n  \n1.  Type the appropriate statement for your programming language at the top of the source code file.  \n  \n    |Language|Statement|Result|  \n    |--------------|---------------|------------|  \n    |**Visual Basic**|**#CONST TRACE = true**|Enables tracing|  \n    ||**#CONST TRACE = false**|Disables tracing|  \n    ||**#CONST DEBUG = true**|Enables debugging|  \n    ||**#CONST DEBUG = false**|Disables debugging|  \n    |**C#**|**#define TRACE**|Enables tracing|  \n    ||**#undef TRACE**|Disables tracing|  \n    ||**#define DEBUG**|Enables debugging|  \n    ||**#undef DEBUG**|Disables debugging|  \n  \n### To disable tracing or debugging  \n  \n1.  Delete the compiler directive from your source code.  \n  \n     \\- or -  \n  \n2.  Comment out the compiler directive.  \n  \n    > [!NOTE]\n    >  When you are ready to compile, you can either choose **Build** from the **Build** menu, or use the command line method but without typing the **d:** to define conditional compilation symbols.  \n  \n## See Also  \n [Tracing and Instrumenting Applications](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)   \n [How to: Create, Initialize and Configure Trace Switches](../../../docs/framework/debug-trace-profile/how-to-create-initialize-and-configure-trace-switches.md)   \n [Trace Switches](../../../docs/framework/debug-trace-profile/trace-switches.md)   \n [Trace Listeners](../../../docs/framework/debug-trace-profile/trace-listeners.md)   \n [How to: Add Trace Statements to Application Code](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md)   \n [How to: Set Environment Variables for the Visual Studio Command Line](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md)   \n [How to: Invoke the Command-Line Compiler](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md)","nodes":[{"pos":[12,79],"content":"How to: Compile Conditionally with Trace and Debug | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Compile Conditionally with Trace and Debug | Microsoft Docs","pos":[0,67]}]},{"pos":[733,783],"content":"How to: Compile Conditionally with Trace and Debug","linkify":"How to: Compile Conditionally with Trace and Debug","nodes":[{"content":"How to: Compile Conditionally with Trace and Debug","pos":[0,50]}]},{"content":"While you are debugging an application during development, both your tracing and debugging output go to the Output window in Visual Studio.","pos":[784,923]},{"content":"However, to include tracing features in a deployed application, you must compile your instrumented applications with the <bpt id=\"p1\">**</bpt>TRACE<ept id=\"p1\">**</ept> compiler directive enabled.","pos":[924,1082],"source":" However, to include tracing features in a deployed application, you must compile your instrumented applications with the **TRACE** compiler directive enabled."},{"content":"This allows tracing code to be compiled into the release version of your application.","pos":[1083,1168]},{"content":"If you do not enable the <bpt id=\"p1\">**</bpt>TRACE<ept id=\"p1\">**</ept> directive, all tracing code is ignored during compilation and is not included in the executable code that you will deploy.","pos":[1169,1326],"source":" If you do not enable the **TRACE** directive, all tracing code is ignored during compilation and is not included in the executable code that you will deploy."},{"content":"Both the tracing and debugging methods have associated conditional attributes.","pos":[1333,1411]},{"content":"For example, if the conditional attribute for tracing is <bpt id=\"p1\">**</bpt>true<ept id=\"p1\">**</ept>, all trace statements are included within an assembly (a compiled .exe file or .dll); if the <bpt id=\"p2\">**</bpt>Trace<ept id=\"p2\">**</ept> conditional attribute is <bpt id=\"p3\">**</bpt>false<ept id=\"p3\">**</ept>, the trace statements are not included.","pos":[1412,1655],"source":" For example, if the conditional attribute for tracing is **true**, all trace statements are included within an assembly (a compiled .exe file or .dll); if the **Trace** conditional attribute is **false**, the trace statements are not included."},{"content":"You can have either the <bpt id=\"p1\">**</bpt>Trace<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Debug<ept id=\"p2\">**</ept> conditional attribute turned on for a build, or both, or neither.","pos":[1662,1774],"source":"You can have either the **Trace** or **Debug** conditional attribute turned on for a build, or both, or neither."},{"content":"Thus, there are four types of build: <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Trace<ept id=\"p2\">**</ept>, both, or neither.","pos":[1775,1851],"source":" Thus, there are four types of build: **Debug**, **Trace**, both, or neither."},{"content":"Some release builds for production deployment might contain neither; most debugging builds contain both.","pos":[1852,1956]},{"content":"You can specify the compiler settings for your application in several ways:","pos":[1963,2038]},{"content":"The property pages","pos":[2048,2066]},{"content":"The command line","pos":[2076,2092]},{"pos":[2102,2156],"content":"<bpt id=\"p1\">**</bpt>#CONST<ept id=\"p1\">**</ept> (for Visual Basic) and <bpt id=\"p2\">**</bpt>#define<ept id=\"p2\">**</ept> (for C#)","source":"**#CONST** (for Visual Basic) and **#define** (for C#)"},{"pos":[2166,2227],"content":"To change compile settings from the property pages dialog box","linkify":"To change compile settings from the property pages dialog box","nodes":[{"content":"To change compile settings from the property pages dialog box","pos":[0,61]}]},{"pos":[2237,2291],"content":"Right-click the project node in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>.","source":"Right-click the project node in **Solution Explorer**."},{"pos":[2301,2346],"content":"Choose <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> from the shortcut menu.","source":"Choose **Properties** from the shortcut menu."},{"content":"In Visual Basic, click the <bpt id=\"p1\">**</bpt>Compile<ept id=\"p1\">**</ept> tab in the left pane of the property page, then click the <bpt id=\"p2\">**</bpt>Advanced Compile Options<ept id=\"p2\">**</ept> button to display the <bpt id=\"p3\">**</bpt>Advanced Compiler Settings<ept id=\"p3\">**</ept> dialog box.","pos":[2360,2550],"source":"In Visual Basic, click the **Compile** tab in the left pane of the property page, then click the **Advanced Compile Options** button to display the **Advanced Compiler Settings** dialog box."},{"content":"Select the check boxes for the compiler settings you want to enable.","pos":[2551,2619]},{"content":"Clear the check boxes for settings you want to disable.","pos":[2620,2675]},{"content":"In C#, click the <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> tab in the left pane of the property page, then select the check boxes for the compiler settings you want to enable.","pos":[2689,2832],"source":"In C#, click the **Build** tab in the left pane of the property page, then select the check boxes for the compiler settings you want to enable."},{"content":"Clear the check boxes for settings you want to disable.","pos":[2833,2888]},{"pos":[2898,2949],"content":"To compile instrumented code using the command line","linkify":"To compile instrumented code using the command line","nodes":[{"content":"To compile instrumented code using the command line","pos":[0,51]}]},{"content":"Set a conditional compiler switch on the command line.","pos":[2959,3013]},{"content":"The compiler will include trace or debug code in the executable.","pos":[3014,3078]},{"content":"For example, the following compiler instruction entered on the command line would include your tracing code in a compiled executable:","pos":[3089,3222]},{"pos":[3233,3318],"content":"For Visual Basic: <bpt id=\"p1\">**</bpt>vbc /r:System.dll /d:TRACE=TRUE /d:DEBUG=FALSE MyApplication.vb<ept id=\"p1\">**</ept>","source":"For Visual Basic: **vbc /r:System.dll /d:TRACE=TRUE /d:DEBUG=FALSE MyApplication.vb**"},{"pos":[3329,3399],"content":"For C#: <bpt id=\"p1\">**</bpt>csc /r:System.dll /d:TRACE /d:DEBUG=FALSE MyApplication.cs<ept id=\"p1\">**</ept>","source":"For C#: **csc /r:System.dll /d:TRACE /d:DEBUG=FALSE MyApplication.cs**"},{"pos":[3411,3644],"content":"[!TIP]\nTo compile more than one application file, leave a blank space between the file names, for example, **MyApplication1.vb MyApplication2.vb MyApplication3.vb** or **MyApplication1.cs MyApplication2.cs MyApplication3.cs**.","leadings":["","    >  "],"nodes":[{"content":"To compile more than one application file, leave a blank space between the file names, for example, <bpt id=\"p1\">**</bpt>MyApplication1.vb MyApplication2.vb MyApplication3.vb<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>MyApplication1.cs MyApplication2.cs MyApplication3.cs<ept id=\"p2\">**</ept>.","pos":[7,226],"source":"To compile more than one application file, leave a blank space between the file names, for example, **MyApplication1.vb MyApplication2.vb MyApplication3.vb** or **MyApplication1.cs MyApplication2.cs MyApplication3.cs**."}]},{"content":"The meaning of the conditional-compilation directives used in the above examples is as follows:","pos":[3655,3750]},{"content":"Directive","pos":[3761,3770]},{"content":"Meaning","pos":[3771,3778]},{"content":"Visual Basic compiler","pos":[3831,3852]},{"content":"C# compiler","pos":[3867,3878]},{"content":"References an external assembly (EXE or DLL)","pos":[3893,3937]},{"content":"Defines a conditional compilation symbol","pos":[3952,3992]},{"pos":[4005,4554],"content":"[!NOTE]\nYou must spell TRACE or DEBUG with uppercase letters. For more information about the conditional compilation commands, enter `vbc /?` (for Visual Basic) or `csc /?` (for C#) at the command prompt. For more information, see [Building from the Command Line](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md) (C#) or [Invoking the Command-Line Compiler](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md) (Visual Basic).","leadings":["","    >  "],"nodes":[{"content":"You must spell TRACE or DEBUG with uppercase letters. For more information about the conditional compilation commands, enter `vbc /?` (for Visual Basic) or `csc /?` (for C#) at the command prompt. For more information, see [Building from the Command Line](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md) (C#) or [Invoking the Command-Line Compiler](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md) (Visual Basic).","pos":[8,542],"nodes":[{"content":"You must spell TRACE or DEBUG with uppercase letters.","pos":[0,53]},{"content":"For more information about the conditional compilation commands, enter <ph id=\"ph1\">`vbc /?`</ph> (for Visual Basic) or <ph id=\"ph2\">`csc /?`</ph> (for C#) at the command prompt.","pos":[54,196],"source":" For more information about the conditional compilation commands, enter `vbc /?` (for Visual Basic) or `csc /?` (for C#) at the command prompt."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Building from the Command Line<ept id=\"p1\">](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md)</ept> (C#) or <bpt id=\"p2\">[</bpt>Invoking the Command-Line Compiler<ept id=\"p2\">](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md)</ept> (Visual Basic).","pos":[197,534],"source":" For more information, see [Building from the Command Line](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md) (C#) or [Invoking the Command-Line Compiler](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md) (Visual Basic)."}]}]},{"pos":[4564,4622],"content":"To perform conditional compilation using #CONST or #define","linkify":"To perform conditional compilation using #CONST or #define","nodes":[{"content":"To perform conditional compilation using #CONST or #define","pos":[0,58]}]},{"content":"Type the appropriate statement for your programming language at the top of the source code file.","pos":[4632,4728]},{"content":"Language","pos":[4739,4747]},{"content":"Statement","pos":[4748,4757]},{"content":"Result","pos":[4758,4764]},{"pos":[4825,4841],"content":"<bpt id=\"p1\">**</bpt>Visual Basic<ept id=\"p1\">**</ept>","source":"**Visual Basic**"},{"pos":[4842,4865],"content":"<bpt id=\"p1\">**</bpt>#CONST TRACE = true<ept id=\"p1\">**</ept>","source":"**#CONST TRACE = true**"},{"content":"Enables tracing","pos":[4866,4881]},{"pos":[4891,4915],"content":"<bpt id=\"p1\">**</bpt>#CONST TRACE = false<ept id=\"p1\">**</ept>","source":"**#CONST TRACE = false**"},{"content":"Disables tracing","pos":[4916,4932]},{"pos":[4942,4965],"content":"<bpt id=\"p1\">**</bpt>#CONST DEBUG = true<ept id=\"p1\">**</ept>","source":"**#CONST DEBUG = true**"},{"content":"Enables debugging","pos":[4966,4983]},{"pos":[4993,5017],"content":"<bpt id=\"p1\">**</bpt>#CONST DEBUG = false<ept id=\"p1\">**</ept>","source":"**#CONST DEBUG = false**"},{"content":"Disables debugging","pos":[5018,5036]},{"pos":[5045,5051],"content":"<bpt id=\"p1\">**</bpt>C#<ept id=\"p1\">**</ept>","source":"**C#**"},{"pos":[5052,5069],"content":"<bpt id=\"p1\">**</bpt>#define TRACE<ept id=\"p1\">**</ept>","source":"**#define TRACE**"},{"content":"Enables tracing","pos":[5070,5085]},{"pos":[5095,5111],"content":"<bpt id=\"p1\">**</bpt>#undef TRACE<ept id=\"p1\">**</ept>","source":"**#undef TRACE**"},{"content":"Disables tracing","pos":[5112,5128]},{"pos":[5138,5155],"content":"<bpt id=\"p1\">**</bpt>#define DEBUG<ept id=\"p1\">**</ept>","source":"**#define DEBUG**"},{"content":"Enables debugging","pos":[5156,5173]},{"pos":[5183,5199],"content":"<bpt id=\"p1\">**</bpt>#undef DEBUG<ept id=\"p1\">**</ept>","source":"**#undef DEBUG**"},{"content":"Disables debugging","pos":[5200,5218]},{"pos":[5229,5260],"content":"To disable tracing or debugging","linkify":"To disable tracing or debugging","nodes":[{"content":"To disable tracing or debugging","pos":[0,31]}]},{"content":"Delete the compiler directive from your source code.","pos":[5270,5322]},{"content":"<ph id=\"ph1\">\\-</ph> or -","pos":[5333,5340],"source":"\\- or -"},{"content":"Comment out the compiler directive.","pos":[5350,5385]},{"pos":[5397,5603],"content":"[!NOTE]\nWhen you are ready to compile, you can either choose **Build** from the **Build** menu, or use the command line method but without typing the **d:** to define conditional compilation symbols.","leadings":["","    >  "],"nodes":[{"content":"When you are ready to compile, you can either choose <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept> menu, or use the command line method but without typing the <bpt id=\"p3\">**</bpt>d:<ept id=\"p3\">**</ept> to define conditional compilation symbols.","pos":[8,199],"source":"When you are ready to compile, you can either choose **Build** from the **Build** menu, or use the command line method but without typing the **d:** to define conditional compilation symbols."}]},{"pos":[5612,5620],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Tracing and Instrumenting Applications<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)</ept><ph id=\"ph1\"> </ph>","pos":[5624,5752],"source":"[Tracing and Instrumenting Applications](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md) "},{"content":"<bpt id=\"p1\"> [</bpt>How to: Create, Initialize and Configure Trace Switches<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/how-to-create-initialize-and-configure-trace-switches.md)</ept><ph id=\"ph1\"> </ph>","pos":[5755,5916],"source":" [How to: Create, Initialize and Configure Trace Switches](../../../docs/framework/debug-trace-profile/how-to-create-initialize-and-configure-trace-switches.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Trace Switches<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/trace-switches.md)</ept><ph id=\"ph1\"> </ph>","pos":[5919,6000],"source":" [Trace Switches](../../../docs/framework/debug-trace-profile/trace-switches.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Trace Listeners<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/trace-listeners.md)</ept><ph id=\"ph1\"> </ph>","pos":[6003,6086],"source":" [Trace Listeners](../../../docs/framework/debug-trace-profile/trace-listeners.md) "},{"content":"<bpt id=\"p1\"> [</bpt>How to: Add Trace Statements to Application Code<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md)</ept><ph id=\"ph1\"> </ph>","pos":[6089,6237],"source":" [How to: Add Trace Statements to Application Code](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md) "},{"content":"<bpt id=\"p1\"> [</bpt>How to: Set Environment Variables for the Visual Studio Command Line<ept id=\"p1\">](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md)</ept><ph id=\"ph1\"> </ph>","pos":[6240,6434],"source":" [How to: Set Environment Variables for the Visual Studio Command Line](~/docs/csharp/language-reference/compiler-options/how-to-set-environment-variables-for-the-visual-studio-command-line.md) "},{"content":"<bpt id=\"p1\"> [</bpt>How to: Invoke the Command-Line Compiler<ept id=\"p1\">](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md)</ept>","pos":[6437,6576],"source":" [How to: Invoke the Command-Line Compiler](~/docs/visual-basic/reference/command-line-compiler/how-to-invoke-the-command-line-compiler.md)"}]}