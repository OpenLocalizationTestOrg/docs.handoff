{"content":"---\ntitle: \"Using a Data Contract Resolver | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 2e68a16c-36f0-4df4-b763-32021bff2b89\ncaps.latest.revision: 5\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Using a Data Contract Resolver\nA data contract resolver allows you to configure known types dynamically. Known types are required when serializing or deserializing a type not expected by a data contract. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] known types, see [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md). Known types are normally specified statically. This means you would have to know all the possible types an operation may receive while implementing the operation. There are scenarios in which this is not true and being able to specify known types dynamically is important.  \n  \n## Creating a Data Contract Resolver  \n Creating a data contract resolver involves implementing two methods, <xref:System.Runtime.Serialization.DataContractResolver.TryResolveType%2A> and <xref:System.Runtime.Serialization.DataContractResolver.ResolveName%2A>. These two methods implement callbacks that are used during serialization and deserialization, respectively. The <xref:System.Runtime.Serialization.DataContractResolver.TryResolveType%2A> method is invoked during serialization and takes a data contract type and maps it to an `xsi:type` name and namespace. The <xref:System.Runtime.Serialization.DataContractResolver.ResolveName%2A> method is invoked during deserialization and takes an `xsi:type` name and namespace and resolves it to a data contract type. Both of these methods have a `knownTypeResolver` parameter that can be used to use the default known type resolver in your implementation.  \n  \n The following example shows how to implement a <xref:System.Runtime.Serialization.DataContractResolver> to map to and from a data contract type named `Customer` derived from a data contract type `Person`.  \n  \n```csharp  \npublic class MyCustomerResolver : DataContractResolver  \n{  \n    public override bool TryResolveType(Type dataContractType, Type declaredType, DataContractResolver knownTypeResolver, out XmlDictionaryString typeName, out XmlDictionaryString typeNamespace)  \n    {  \n        if (dataContractType == typeof(Customer))  \n        {  \n            XmlDictionary dictionary = new XmlDictionary();  \n            typeName = dictionary.Add(\"SomeCustomer\");  \n            typeNamespace = dictionary.Add(\"http://tempuri.com\");  \n            return true;  \n        }  \n        else  \n        {  \n            return knownTypeResolver.TryResolveType(dataContractType, declaredType, null, out typeName, out typeNamespace);  \n        }  \n    }  \n  \n    public override Type ResolveName(string typeName, string typeNamespace, DataContractResolver knownTypeResolver)  \n    {  \n        if (typeName == \"SomeCustomer\" && typeNamespace == \"http://tempuri.com\")  \n        {  \n            return typeof(Customer);  \n        }  \n        else  \n        {  \n            return knownTypeResolver.ResolveName(typeName, typeNamespace, null);  \n        }  \n    }  \n}  \n```  \n  \n Once you have defined a <xref:System.Runtime.Serialization.DataContractResolver> you can use it by passing it to the <xref:System.Runtime.Serialization.DataContractSerializer> constructor as shown in the following example.  \n  \n```  \nXmlObjectSerializer serializer = new DataContractSerializer(typeof(Customer), null, Int32.MaxValue, false, false, null, new MyCustomerResolver());  \n```  \n  \n You can specify a <xref:System.Runtime.Serialization.DataContractSerializer> in a call to the <xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A> or <xref:System.Runtime.Serialization.DataContractSerializer.WriteObject%2A> methods, as shown in the following example.  \n  \n```  \nMemoryStream ms = new MemoryStream();  \nDataContractSerializer serializer = new DataContractSerializer(typeof(Customer));  \nXmlDictionaryWriter writer = XmlDictionaryWriter.CreateDictionaryWriter(XmlWriter.Create(ms));  \nserializer.WriteObject(writer, new Customer(), new MyCustomerResolver());  \nwriter.Flush();  \nms.Position = 0;  \nConsole.WriteLine(((Customer)serializer.ReadObject(XmlDictionaryReader.CreateDictionaryReader(XmlReader.Create(ms)), false, new MyCustomerResolver()));  \n  \n```  \n  \n Or you can set it on the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> as shown in the following example.  \n  \n```  \nServiceHost host = new ServiceHost(typeof(MyService));  \n  \nContractDescription cd = host.Description.Endpoints[0].Contract;  \nOperationDescription myOperationDescription = cd.Operations.Find(\"Echo\");  \n  \nDataContractSerializerOperationBehavior serializerBehavior = myOperationDescription.Behaviors.Find<DataContractSerializerOperationBehavior>();  \nif (serializerBehavior == null)  \n{  \n    serializerBehavior = new DataContractSerializerOperationBehavior(myOperationDescription);  \n    myOperationDescription.Behaviors.Add(serializerBehavior);  \n}  \n  \nSerializerBehavior.DataContractResolver = new MyCustomerResolver();  \n  \n```  \n  \n You can declaratively specify a data contract resolver by implementing an attribute that can be applied to a service.  [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] the [KnownAssemblyAttribute](../../../../docs/framework/wcf/samples/knownassemblyattribute.md) sample. This sample implements an attribute called \"KnownAssembly\" that adds a custom data contract resolver to the serviceâ€™s behavior.  \n  \n## See Also  \n [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)   \n [DataContractSerializer Sample](../../../../docs/framework/wcf/samples/datacontractserializer-sample.md)   \n [KnownAssemblyAttribute](../../../../docs/framework/wcf/samples/knownassemblyattribute.md)\n","nodes":[{"pos":[4,350],"nodes":[{"content":"Using a Data Contract Resolver | Microsoft Docs","nodes":[{"pos":[0,47],"content":"Using a Data Contract Resolver | Microsoft Docs","nodes":[{"content":"Using a Data Contract Resolver | Microsoft Docs","pos":[0,47]}]}],"pos":[6,56],"yaml":true}],"content":"title: \"Using a Data Contract Resolver | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 2e68a16c-36f0-4df4-b763-32021bff2b89\ncaps.latest.revision: 5\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[357,387],"content":"Using a Data Contract Resolver","linkify":"Using a Data Contract Resolver","nodes":[{"content":"Using a Data Contract Resolver","pos":[0,30]}]},{"content":"A data contract resolver allows you to configure known types dynamically.","pos":[388,461]},{"content":"Known types are required when serializing or deserializing a type not expected by a data contract.","pos":[462,560]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> known types, see <bpt id=\"p1\">[</bpt>Data Contract Known Types<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)</ept>.","pos":[561,739],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] known types, see [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)."},{"content":"Known types are normally specified statically.","pos":[740,786]},{"content":"This means you would have to know all the possible types an operation may receive while implementing the operation.","pos":[787,902]},{"content":"There are scenarios in which this is not true and being able to specify known types dynamically is important.","pos":[903,1012]},{"pos":[1021,1054],"content":"Creating a Data Contract Resolver","linkify":"Creating a Data Contract Resolver","nodes":[{"content":"Creating a Data Contract Resolver","pos":[0,33]}]},{"content":"Creating a data contract resolver involves implementing two methods, <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractResolver.TryResolveType%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractResolver.ResolveName%2A&gt;</ph>.","pos":[1058,1278],"source":"Creating a data contract resolver involves implementing two methods, <xref:System.Runtime.Serialization.DataContractResolver.TryResolveType%2A> and <xref:System.Runtime.Serialization.DataContractResolver.ResolveName%2A>."},{"content":"These two methods implement callbacks that are used during serialization and deserialization, respectively.","pos":[1279,1386]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractResolver.TryResolveType%2A&gt;</ph> method is invoked during serialization and takes a data contract type and maps it to an <ph id=\"ph2\">`xsi:type`</ph> name and namespace.","pos":[1387,1584],"source":" The <xref:System.Runtime.Serialization.DataContractResolver.TryResolveType%2A> method is invoked during serialization and takes a data contract type and maps it to an `xsi:type` name and namespace."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractResolver.ResolveName%2A&gt;</ph> method is invoked during deserialization and takes an <ph id=\"ph2\">`xsi:type`</ph> name and namespace and resolves it to a data contract type.","pos":[1585,1785],"source":" The <xref:System.Runtime.Serialization.DataContractResolver.ResolveName%2A> method is invoked during deserialization and takes an `xsi:type` name and namespace and resolves it to a data contract type."},{"content":"Both of these methods have a <ph id=\"ph1\">`knownTypeResolver`</ph> parameter that can be used to use the default known type resolver in your implementation.","pos":[1786,1924],"source":" Both of these methods have a `knownTypeResolver` parameter that can be used to use the default known type resolver in your implementation."},{"pos":[1931,2135],"content":"The following example shows how to implement a <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractResolver&gt;</ph> to map to and from a data contract type named <ph id=\"ph2\">`Customer`</ph> derived from a data contract type <ph id=\"ph3\">`Person`</ph>.","source":"The following example shows how to implement a <xref:System.Runtime.Serialization.DataContractResolver> to map to and from a data contract type named `Customer` derived from a data contract type `Person`."},{"content":"Once you have defined a <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractResolver&gt;</ph> you can use it by passing it to the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> constructor as shown in the following example.","pos":[3301,3523],"source":"Once you have defined a <xref:System.Runtime.Serialization.DataContractResolver> you can use it by passing it to the <xref:System.Runtime.Serialization.DataContractSerializer> constructor as shown in the following example."},{"content":"You can specify a <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> in a call to the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.DataContractSerializer.WriteObject%2A&gt;</ph> methods, as shown in the following example.","pos":[3694,3981],"source":"You can specify a <xref:System.Runtime.Serialization.DataContractSerializer> in a call to the <xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A> or <xref:System.Runtime.Serialization.DataContractSerializer.WriteObject%2A> methods, as shown in the following example."},{"content":"Or you can set it on the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior&gt;</ph> as shown in the following example.","pos":[4494,4632],"source":"Or you can set it on the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> as shown in the following example."},{"content":"You can declaratively specify a data contract resolver by implementing an attribute that can be applied to a service.","pos":[5283,5400]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph> the <bpt id=\"p1\">[</bpt>KnownAssemblyAttribute<ept id=\"p1\">](../../../../docs/framework/wcf/samples/knownassemblyattribute.md)</ept> sample.","pos":[5402,5564],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] the [KnownAssemblyAttribute](../../../../docs/framework/wcf/samples/knownassemblyattribute.md) sample."},{"content":"This sample implements an attribute called \"KnownAssembly\" that adds a custom data contract resolver to the serviceâ€™s behavior.","pos":[5565,5692]},{"pos":[5701,5709],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Data Contract Known Types<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)</ept><ph id=\"ph1\"> </ph>","pos":[5713,5818],"source":"[Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md) "},{"content":"<bpt id=\"p1\">[</bpt>DataContractSerializer Sample<ept id=\"p1\">](../../../../docs/framework/wcf/samples/datacontractserializer-sample.md)</ept><ph id=\"ph1\"> </ph>","pos":[5822,5927],"source":"[DataContractSerializer Sample](../../../../docs/framework/wcf/samples/datacontractserializer-sample.md) "},{"content":"<bpt id=\"p1\">[</bpt>KnownAssemblyAttribute<ept id=\"p1\">](../../../../docs/framework/wcf/samples/knownassemblyattribute.md)</ept>","pos":[5931,6021],"source":"[KnownAssemblyAttribute](../../../../docs/framework/wcf/samples/knownassemblyattribute.md)"}]}