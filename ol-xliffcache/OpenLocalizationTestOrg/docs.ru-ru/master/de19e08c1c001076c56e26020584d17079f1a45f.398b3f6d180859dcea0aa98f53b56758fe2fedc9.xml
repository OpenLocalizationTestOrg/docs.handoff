{"content":"---\ntitle: \"Peer Resolvers\"\nms.date: \"03/30/2017\"\nms.assetid: d86d12a1-7358-450f-9727-b6afb95adb9c\n---\n# Peer Resolvers\nIn order to connect to a mesh, a peer node requires the IP addresses of other nodes. IP addresses are obtained by contacting a resolver service, which takes the mesh ID and returns a list of addresses corresponding to nodes registered with that particular mesh ID. The resolver keeps a list of registered addresses, which it creates by having each node in the mesh register with the service.  \n  \n You can specify which PeerResolver service to use through the `Resolver` property of the <xref:System.ServiceModel.NetPeerTcpBinding>.  \n  \n## Supported Peer Resolvers  \n Peer Channel supports two types of resolvers: Peer Name Resolution Protocol (PNRP), and custom resolver services.  \n  \n By default, Peer Channel uses the PNRP peer resolver service for discovery of peers and neighbors in the mesh. For situations/platforms where PNRP is not available or feasible, Windows Communication Foundation (WCF) provides an alternative, server-based discovery service - the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>. You can also explicitly define a custom resolver service by writing a class that implements the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface.  \n  \n### Peer Name Resolution Protocol (PNRP)  \n PNRP, the default resolver for [!INCLUDE[wv](../../../../includes/wv-md.md)], is a distributed, serverless name resolver service. PNRP can also be used on [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)] by installing the Advanced Networking Pack. Any two clients running the same version of PNRP can locate each other using this protocol, provided they meet certain conditions (such as the lack of an intervening corporate firewall). Note that the version of PNRP that ships with [!INCLUDE[wv](../../../../includes/wv-md.md)] is newer than the version included in the Advanced Networking Pack. Check the Microsoft Download Center for updates to PNRP for [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)].  \n  \n### Custom Resolver Services  \n When the PNRP service is unavailable, or you want complete control over mesh shaping, you can use a custom, server-based resolver service. You can explicitly define this service by writing a resolver class implementing the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface, or by using the in-box default implementation, <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.  \n  \n Under the default implementation of the service, client registrations expire after a certain amount of time if the client does not explicitly refresh the registration. Clients using the resolver service must be aware of the upper bound on client-server latency in order to successfully refresh registrations in time. This involves choosing an appropriate refresh time-out (`RefreshInterval`) on the resolver service. (For more information, see [Inside the CustomPeerResolverService: Client Registrations](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md).)  \n  \n The application writer must also consider securing the connection between clients and the custom resolver service. You may do this by using security settings on the <xref:System.ServiceModel.NetTcpBinding> that clients use to contact the resolver service. You must specify credentials (if used) on the `ChannelFactory` used to create Peer Channel. These credentials are passed to the `ChannelFactory` used to create channels to the custom resolver.  \n  \n> [!NOTE]\n>  When using local and impromptu networks with a custom resolver, it is strongly advised that applications using or supporting link-local or impromptu networks include logic that selects a single link-local address to use when connecting. This prevents any confusion potentially caused by computers with multiple link-local addresses. In accordance with this, Peer Channel only supports using a single link-local address at any one time. You may specify this address with the `ListenIpAddress` property on the <xref:System.ServiceModel.NetPeerTcpBinding>.  \n  \n For a demonstration of how to implement a custom resolver, see [Peer Channel Custom Peer Resolver](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90)).  \n  \n## In This Section  \n [Inside the CustomPeerResolverService: Client Registrations](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md)  \n  \n## See also\n\n- [Peer Channel Concepts](../../../../docs/framework/wcf/feature-details/peer-channel-concepts.md)\n- [Peer Channel Security](../../../../docs/framework/wcf/feature-details/peer-channel-security.md)\n- [Building a Peer Channel Application](../../../../docs/framework/wcf/feature-details/building-a-peer-channel-application.md)\n","nodes":[{"pos":[4,98],"embed":true,"restype":"x-metadata","content":"title: \"Peer Resolvers\"\nms.date: \"03/30/2017\"\nms.assetid: d86d12a1-7358-450f-9727-b6afb95adb9c","nodes":[{"content":"Peer Resolvers","nodes":[{"pos":[0,14],"content":"Peer Resolvers","nodes":[{"content":"Peer Resolvers","pos":[0,14]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[105,119],"content":"Peer Resolvers","linkify":"Peer Resolvers","nodes":[{"content":"Peer Resolvers","pos":[0,14]}]},{"content":"In order to connect to a mesh, a peer node requires the IP addresses of other nodes.","pos":[120,204]},{"content":"IP addresses are obtained by contacting a resolver service, which takes the mesh ID and returns a list of addresses corresponding to nodes registered with that particular mesh ID.","pos":[205,384]},{"content":"The resolver keeps a list of registered addresses, which it creates by having each node in the mesh register with the service.","pos":[385,511]},{"pos":[518,652],"content":"You can specify which PeerResolver service to use through the <ph id=\"ph1\">`Resolver`</ph> property of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.NetPeerTcpBinding&gt;</ph>.","source":"You can specify which PeerResolver service to use through the `Resolver` property of the <xref:System.ServiceModel.NetPeerTcpBinding>."},{"pos":[661,685],"content":"Supported Peer Resolvers","linkify":"Supported Peer Resolvers","nodes":[{"content":"Supported Peer Resolvers","pos":[0,24]}]},{"content":"Peer Channel supports two types of resolvers: Peer Name Resolution Protocol (PNRP), and custom resolver services.","pos":[689,802]},{"content":"By default, Peer Channel uses the PNRP peer resolver service for discovery of peers and neighbors in the mesh.","pos":[809,919]},{"content":"For situations/platforms where PNRP is not available or feasible, Windows Communication Foundation (WCF) provides an alternative, server-based discovery service - the <ph id=\"ph1\">&lt;xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService&gt;</ph>.","pos":[920,1154],"source":" For situations/platforms where PNRP is not available or feasible, Windows Communication Foundation (WCF) provides an alternative, server-based discovery service - the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>."},{"content":"You can also explicitly define a custom resolver service by writing a class that implements the <ph id=\"ph1\">&lt;xref:System.ServiceModel.PeerResolvers.IPeerResolverContract&gt;</ph> interface.","pos":[1155,1324],"source":" You can also explicitly define a custom resolver service by writing a class that implements the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface."},{"pos":[1334,1370],"content":"Peer Name Resolution Protocol (PNRP)","linkify":"Peer Name Resolution Protocol (PNRP)","nodes":[{"content":"Peer Name Resolution Protocol (PNRP)","pos":[0,36]}]},{"content":"PNRP, the default resolver for <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>, is a distributed, serverless name resolver service.","pos":[1374,1503],"source":"PNRP, the default resolver for [!INCLUDE[wv](../../../../includes/wv-md.md)], is a distributed, serverless name resolver service."},{"content":"PNRP can also be used on <ph id=\"ph1\">[!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]</ph> by installing the Advanced Networking Pack.","pos":[1504,1626],"source":" PNRP can also be used on [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)] by installing the Advanced Networking Pack."},{"content":"Any two clients running the same version of PNRP can locate each other using this protocol, provided they meet certain conditions (such as the lack of an intervening corporate firewall).","pos":[1627,1813]},{"content":"Note that the version of PNRP that ships with <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph> is newer than the version included in the Advanced Networking Pack.","pos":[1814,1973],"source":" Note that the version of PNRP that ships with [!INCLUDE[wv](../../../../includes/wv-md.md)] is newer than the version included in the Advanced Networking Pack."},{"content":"Check the Microsoft Download Center for updates to PNRP for <ph id=\"ph1\">[!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]</ph>.","pos":[1974,2088],"source":" Check the Microsoft Download Center for updates to PNRP for [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]."},{"pos":[2098,2122],"content":"Custom Resolver Services","linkify":"Custom Resolver Services","nodes":[{"content":"Custom Resolver Services","pos":[0,24]}]},{"content":"When the PNRP service is unavailable, or you want complete control over mesh shaping, you can use a custom, server-based resolver service.","pos":[2126,2264]},{"content":"You can explicitly define this service by writing a resolver class implementing the <ph id=\"ph1\">&lt;xref:System.ServiceModel.PeerResolvers.IPeerResolverContract&gt;</ph> interface, or by using the in-box default implementation, <ph id=\"ph2\">&lt;xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService&gt;</ph>.","pos":[2265,2537],"source":" You can explicitly define this service by writing a resolver class implementing the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface, or by using the in-box default implementation, <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>."},{"content":"Under the default implementation of the service, client registrations expire after a certain amount of time if the client does not explicitly refresh the registration.","pos":[2544,2711]},{"content":"Clients using the resolver service must be aware of the upper bound on client-server latency in order to successfully refresh registrations in time.","pos":[2712,2860]},{"content":"This involves choosing an appropriate refresh time-out (<ph id=\"ph1\">`RefreshInterval`</ph>) on the resolver service.","pos":[2861,2960],"source":" This involves choosing an appropriate refresh time-out (`RefreshInterval`) on the resolver service."},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>Inside the CustomPeerResolverService: Client Registrations<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md)</ept>.)","pos":[2961,3159],"source":" (For more information, see [Inside the CustomPeerResolverService: Client Registrations](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md).)"},{"content":"The application writer must also consider securing the connection between clients and the custom resolver service.","pos":[3166,3280]},{"content":"You may do this by using security settings on the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> that clients use to contact the resolver service.","pos":[3281,3421],"source":" You may do this by using security settings on the <xref:System.ServiceModel.NetTcpBinding> that clients use to contact the resolver service."},{"content":"You must specify credentials (if used) on the <ph id=\"ph1\">`ChannelFactory`</ph> used to create Peer Channel.","pos":[3422,3513],"source":" You must specify credentials (if used) on the `ChannelFactory` used to create Peer Channel."},{"content":"These credentials are passed to the <ph id=\"ph1\">`ChannelFactory`</ph> used to create channels to the custom resolver.","pos":[3514,3614],"source":" These credentials are passed to the `ChannelFactory` used to create channels to the custom resolver."},{"pos":[3622,4186],"content":"[!NOTE]\n When using local and impromptu networks with a custom resolver, it is strongly advised that applications using or supporting link-local or impromptu networks include logic that selects a single link-local address to use when connecting. This prevents any confusion potentially caused by computers with multiple link-local addresses. In accordance with this, Peer Channel only supports using a single link-local address at any one time. You may specify this address with the `ListenIpAddress` property on the <xref:System.ServiceModel.NetPeerTcpBinding>.","leadings":["","> "],"nodes":[{"content":"When using local and impromptu networks with a custom resolver, it is strongly advised that applications using or supporting link-local or impromptu networks include logic that selects a single link-local address to use when connecting. This prevents any confusion potentially caused by computers with multiple link-local addresses. In accordance with this, Peer Channel only supports using a single link-local address at any one time. You may specify this address with the `ListenIpAddress` property on the <xref:System.ServiceModel.NetPeerTcpBinding>.","pos":[9,562],"nodes":[{"content":"When using local and impromptu networks with a custom resolver, it is strongly advised that applications using or supporting link-local or impromptu networks include logic that selects a single link-local address to use when connecting.","pos":[0,236]},{"content":"This prevents any confusion potentially caused by computers with multiple link-local addresses.","pos":[237,332]},{"content":"In accordance with this, Peer Channel only supports using a single link-local address at any one time.","pos":[333,435]},{"content":"You may specify this address with the <ph id=\"ph1\">`ListenIpAddress`</ph> property on the <ph id=\"ph2\">&lt;xref:System.ServiceModel.NetPeerTcpBinding&gt;</ph>.","pos":[436,553],"source":" You may specify this address with the `ListenIpAddress` property on the <xref:System.ServiceModel.NetPeerTcpBinding>."}]}]},{"pos":[4193,4380],"content":"For a demonstration of how to implement a custom resolver, see <bpt id=\"p1\">[</bpt>Peer Channel Custom Peer Resolver<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90))</ept>.","source":"For a demonstration of how to implement a custom resolver, see [Peer Channel Custom Peer Resolver](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90))."},{"pos":[4389,4404],"content":"In This Section","linkify":"In This Section","nodes":[{"content":"In This Section","pos":[0,15]}]},{"pos":[4408,4577],"content":"<bpt id=\"p1\">[</bpt>Inside the CustomPeerResolverService: Client Registrations<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md)</ept>","source":"[Inside the CustomPeerResolverService: Client Registrations](../../../../docs/framework/wcf/feature-details/inside-the-custompeerresolverservice-client-registrations.md)"},{"pos":[4586,4594],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4598,4694],"content":"<bpt id=\"p1\">[</bpt>Peer Channel Concepts<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/peer-channel-concepts.md)</ept>","source":"[Peer Channel Concepts](../../../../docs/framework/wcf/feature-details/peer-channel-concepts.md)"},{"pos":[4697,4793],"content":"<bpt id=\"p1\">[</bpt>Peer Channel Security<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/peer-channel-security.md)</ept>","source":"[Peer Channel Security](../../../../docs/framework/wcf/feature-details/peer-channel-security.md)"},{"pos":[4796,4920],"content":"<bpt id=\"p1\">[</bpt>Building a Peer Channel Application<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/building-a-peer-channel-application.md)</ept>","source":"[Building a Peer Channel Application](../../../../docs/framework/wcf/feature-details/building-a-peer-channel-application.md)"}]}