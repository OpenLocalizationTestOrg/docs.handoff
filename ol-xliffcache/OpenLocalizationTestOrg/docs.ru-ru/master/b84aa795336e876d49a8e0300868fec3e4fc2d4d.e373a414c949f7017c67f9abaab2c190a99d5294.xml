{"content":"---\ntitle: \"Using the NetHttpBinding | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: fe134acf-ceca-49de-84a9-05a37e3841f1\ncaps.latest.revision: 5\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Using the NetHttpBinding\n<xref:System.ServiceModel.NetHttpBinding> is a binding designed for consuming HTTP or WebSocket services and uses binary encoding by default. <xref:System.ServiceModel.NetHttpBinding> will detect whether it is used with a request-reply contract or duplex contract and change its behavior to match - it will use HTTP for request-reply contracts and WebSockets for duplex contracts. This behavior can be overridden using the <!--zz <xref:System.ServiceModel.NetHttpBinding.WebSocketTransportUsage%2A> --> `WebSocketTransportUsage` setting:  \n  \n1.  Always - This forces WebSockets to be used even for request-reply contracts.  \n  \n2.  Never - This prevents WebSockets from being used. Attempting to use a duplex contract with this setting will result in an exception.  \n  \n3.  WhenDuplex - This is the default value and behaves as described above.  \n  \n <xref:System.ServiceModel.NetHttpBinding> supports reliable sessions in both HTTP mode and WebSocket mode. In WebSocket mode sessions are provided by the transport.  \n  \n> [!WARNING]\n>  When using the <xref:System.ServiceModel.NetHttpBinding> and the binding’s TransferMode is set to TransferMode.Streamed, large streams may cause a deadlock and the call will timeout. To work around this issue send smaller messages or use TransferMode.Buffered.  \n  \n## Configuring a Service to use NetHttpBinding  \n The <xref:System.ServiceModel.NetHttpBinding> can be configured the same as any other binding. The following configuration snippet illustrates how to configure a WCF service with <xref:System.ServiceModel.NetHttpBinding>.  \n  \n```xml  \n<system.serviceModel>  \n    <services>  \n      <service name=\"WcfService1.Service1\">  \n        <endpoint address=\"\"  \n                  binding=\"netHttpBinding\"  \n                  contract=\"WcfService1.IService1\"/>  \n        <endpoint address=\"mex\"  \n                  binding=\"mexHttpBinding\"  \n                  contract=\"IMetadataExchange\"/>  \n      </service>  \n    </services>  \n    <bindings>  \n      <netHttpBinding>  \n        <binding name=\"My_NetHttpBindingConfig\">  \n          <webSocketSettings transportUsage=\"WhenDuplex\"/>  \n        </binding>  \n      </netHttpBinding>  \n    </bindings>  \n    <!- ... -->   \n  </system.serviceModel>  \n```  \n  \n The following code snippet shows how to add the <xref:System.ServiceModel.NetHttpBinding> in code.  \n  \n```csharp  \nServiceHost svchost = new ServiceHost(typeof(Service1), baseAddress);  \n            NetHttpBinding binding = new NetHttpBinding();  \n            svchost.AddServiceEndpoint(typeof(IService1), binding, address);   \n        }  \n```  \n  \n## See Also  \n [Configuring Bindings for Services](../../../../docs/framework/wcf/configuring-bindings-for-wcf-services.md)   \n [Bindings](../../../../docs/framework/wcf/feature-details/bindings.md)   \n [System-Provided Bindings](../../../../docs/framework/wcf/system-provided-bindings.md)   \n [Duplex Services](../../../../docs/framework/wcf/feature-details/duplex-services.md)","nodes":[{"pos":[12,53],"content":"Using the NetHttpBinding | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Using the NetHttpBinding | Microsoft Docs","pos":[0,41]}]},{"pos":[351,375],"content":"Using the NetHttpBinding","linkify":"Using the NetHttpBinding","nodes":[{"content":"Using the NetHttpBinding","pos":[0,24]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph> is a binding designed for consuming HTTP or WebSocket services and uses binary encoding by default.","pos":[376,517],"source":"<xref:System.ServiceModel.NetHttpBinding> is a binding designed for consuming HTTP or WebSocket services and uses binary encoding by default."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph> will detect whether it is used with a request-reply contract or duplex contract and change its behavior to match - it will use HTTP for request-reply contracts and WebSockets for duplex contracts.","pos":[518,756],"source":"<xref:System.ServiceModel.NetHttpBinding> will detect whether it is used with a request-reply contract or duplex contract and change its behavior to match - it will use HTTP for request-reply contracts and WebSockets for duplex contracts."},{"content":"This behavior can be overridden using the <ph id=\"ph1\">&lt;!--zz &lt;xref:System.ServiceModel.NetHttpBinding.WebSocketTransportUsage%2A&gt; --&gt;</ph> <ph id=\"ph2\">`WebSocketTransportUsage`</ph> setting:","pos":[757,913],"source":" This behavior can be overridden using the <!--zz <xref:System.ServiceModel.NetHttpBinding.WebSocketTransportUsage%2A> --> `WebSocketTransportUsage` setting:"},{"content":"Always - This forces WebSockets to be used even for request-reply contracts.","pos":[923,999]},{"content":"Never - This prevents WebSockets from being used.","pos":[1009,1058]},{"content":"Attempting to use a duplex contract with this setting will result in an exception.","pos":[1059,1141]},{"content":"WhenDuplex - This is the default value and behaves as described above.","pos":[1151,1221]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph> supports reliable sessions in both HTTP mode and WebSocket mode.","pos":[1228,1334],"source":"<xref:System.ServiceModel.NetHttpBinding> supports reliable sessions in both HTTP mode and WebSocket mode."},{"content":"In WebSocket mode sessions are provided by the transport.","pos":[1335,1392]},{"pos":[1400,1674],"content":"[!WARNING]\n When using the <xref:System.ServiceModel.NetHttpBinding> and the binding’s TransferMode is set to TransferMode.Streamed, large streams may cause a deadlock and the call will timeout. To work around this issue send smaller messages or use TransferMode.Buffered.","leadings":["","> "],"nodes":[{"content":" When using the <xref:System.ServiceModel.NetHttpBinding> and the binding’s TransferMode is set to TransferMode.Streamed, large streams may cause a deadlock and the call will timeout. To work around this issue send smaller messages or use TransferMode.Buffered.","pos":[11,272],"nodes":[{"content":"When using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph> and the binding’s TransferMode is set to TransferMode.Streamed, large streams may cause a deadlock and the call will timeout.","pos":[1,183],"source":" When using the <xref:System.ServiceModel.NetHttpBinding> and the binding’s TransferMode is set to TransferMode.Streamed, large streams may cause a deadlock and the call will timeout."},{"content":"To work around this issue send smaller messages or use TransferMode.Buffered.","pos":[184,261]}]}]},{"pos":[1683,1726],"content":"Configuring a Service to use NetHttpBinding","linkify":"Configuring a Service to use NetHttpBinding","nodes":[{"content":"Configuring a Service to use NetHttpBinding","pos":[0,43]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph> can be configured the same as any other binding.","pos":[1730,1824],"source":"The <xref:System.ServiceModel.NetHttpBinding> can be configured the same as any other binding."},{"content":"The following configuration snippet illustrates how to configure a WCF service with <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph>.","pos":[1825,1951],"source":" The following configuration snippet illustrates how to configure a WCF service with <xref:System.ServiceModel.NetHttpBinding>."},{"content":"The following code snippet shows how to add the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetHttpBinding&gt;</ph> in code.","pos":[2626,2724],"source":"The following code snippet shows how to add the <xref:System.ServiceModel.NetHttpBinding> in code."},{"pos":[2979,2987],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Configuring Bindings for Services<ept id=\"p1\">](../../../../docs/framework/wcf/configuring-bindings-for-wcf-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[2991,3100],"source":"[Configuring Bindings for Services](../../../../docs/framework/wcf/configuring-bindings-for-wcf-services.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/bindings.md)</ept><ph id=\"ph1\"> </ph>","pos":[3103,3175],"source":" [Bindings](../../../../docs/framework/wcf/feature-details/bindings.md) "},{"content":"<bpt id=\"p1\"> [</bpt>System-Provided Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/system-provided-bindings.md)</ept><ph id=\"ph1\"> </ph>","pos":[3178,3266],"source":" [System-Provided Bindings](../../../../docs/framework/wcf/system-provided-bindings.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Duplex Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/duplex-services.md)</ept>","pos":[3269,3354],"source":" [Duplex Services](../../../../docs/framework/wcf/feature-details/duplex-services.md)"}]}