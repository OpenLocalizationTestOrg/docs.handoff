{"content":"---\ntitle: \"Recommended Settings for Tracing and Message Logging | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: c6aca6e8-704e-4779-a9ef-50c46850249e\ncaps.latest.revision: 11\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Recommended Settings for Tracing and Message Logging\nThis topic describes recommended tracing and message logging settings for different operating environments.  \n  \n## Recommended Settings for a Production Environment  \n For a production environment, if you are using WCF trace sources, set the `switchValue` to Warning. If you are using the WCF `System.ServiceModel` trace source, set the `switchValue` attribute to `Warning` and the `propagateActivity` attribute to `true`. If you are using a user-defined trace source, set the `switchValue` attribute to `Warning, ActivityTracing`. This can be done manually using the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md). If you do not anticipate a hit in performance, you can set the `switchValue` attribute to `Information` in all the previously mentioned cases, which generates a fairly large amount of trace data. The following example demonstrates these recommended settings.  \n  \n```  \n<configuration>  \n <system.diagnostics>  \n  <sources>  \n    <source name=\"System.ServiceModel\"  \n            switchValue=\"Warning\"  \n            propagateActivity=\"true\" >  \n      <listeners>  \n        <add name=\"xml\"/>  \n      </listeners>  \n    </source>  \n    <source name=\"myUserTraceSource\"  \n            switchValue=\"Warning, ActivityTracing\">  \n      <listeners>  \n        <add name=\"xml\"/>  \n      </listeners>  \n    </source>  \n  </sources>  \n  <sharedListeners>  \n    <add name=\"xml\"  \n         type=\"System.Diagnostics.XmlWriterTraceListener\"  \n               initializeData=\"C:\\logs\\Traces.svclog\" />  \n  </sharedListeners>  \n </system.diagnostics>  \n  \n<system.serviceModel>  \n  <diagnostics wmiProviderEnabled=\"true\">  \n  </diagnostics>  \n </system.serviceModel>  \n</configuration>  \n```  \n  \n## Recommended Settings for Deployment or Debugging  \n For deployment or debugging environment, choose `Information` or `Verbose`, along with `ActivityTracing` for either a user-defined or `System.ServiceModel` trace source. To enhance debugging, you should also add an additional trace source (`System.ServiceModel.MessageLogging`) to the configuration to enable message logging. Notice that the `switchValue` attribute has no impact on this trace source.  \n  \n The following example demonstrates the recommended settings, using a shared listener that utilizes the `XmlWriterTraceListener`.  \n  \n```  \n<configuration>  \n <system.diagnostics>  \n  <sources>  \n    <source name=\"System.ServiceModel\"  \n            switchValue=\"Information, ActivityTracing\"  \n            propagateActivity=\"true\" >  \n      <listeners>  \n        <add name=\"xml\"/>  \n      </listeners>  \n    </source>  \n    <source name=\"System.ServiceModel.MessageLogging\">  \n      <listeners>  \n        <add name=\"xml\"/>  \n      </listeners>  \n    </source>  \n    <source name=\"myUserTraceSource\"  \n            switchValue=\"Information, ActivityTracing\">  \n      <listeners>  \n        <add name=\"xml\"/>  \n      </listeners>  \n    </source>  \n  </sources>  \n  <sharedListeners>  \n    <add name=\"xml\"  \n         type=\"System.Diagnostics.XmlWriterTraceListener\"  \n               initializeData=\"C:\\logs\\Traces.svclog\" />  \n  </sharedListeners>  \n </system.diagnostics>  \n  \n <system.serviceModel>  \n  <diagnostics wmiProviderEnabled=\"true\">  \n      <messageLogging   \n           logEntireMessage=\"true\"   \n           logMalformedMessages=\"true\"  \n           logMessagesAtServiceLevel=\"true\"   \n           logMessagesAtTransportLevel=\"true\"  \n           maxMessagesToLog=\"3000\"   \n       />  \n  </diagnostics>  \n </system.serviceModel>  \n</configuration>  \n```  \n  \n## Using WMI to Modify Settings  \n You can use WMI to change configuration settings at runtime (by enabling the `wmiProviderEnabled` attribute in the configuration, as demonstrated in the previously configuration example). For example, you can use WMI within the CIM Studio to change the trace source levels from Warning to Information at runtime. You should be aware that the performance cost of live debugging in this way can be very high. For more information about using WMI, see the [Using Windows Management Instrumentation for Diagnostics](../../../../../docs/framework/wcf/diagnostics/wmi/index.md) topic.  \n  \n## Enable Correlated Events in ASP.NET Tracing  \n ASP.NET events do not set the correlation ID (ActivityID) unless ASP.NET event tracing is turned on. To see correlated events properly, you have to turn on ASP.NET events tracing using the following command in the command console, which can be invoked by going to **Start**, **Run** and type **cmd**,  \n  \n```  \nlogman start mytrace -pf logman.providers -o test.etl â€“ets  \n```  \n  \n To turn off tracing of ASP.NET events, use the following command,  \n  \n```  \nlogman stop mytrace -ets  \n```  \n  \n## See Also  \n [Using Windows Management Instrumentation for Diagnostics](../../../../../docs/framework/wcf/diagnostics/wmi/index.md)","nodes":[{"pos":[12,81],"content":"Recommended Settings for Tracing and Message Logging | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Recommended Settings for Tracing and Message Logging | Microsoft Docs","pos":[0,69]}]},{"pos":[380,432],"content":"Recommended Settings for Tracing and Message Logging","linkify":"Recommended Settings for Tracing and Message Logging","nodes":[{"content":"Recommended Settings for Tracing and Message Logging","pos":[0,52]}]},{"content":"This topic describes recommended tracing and message logging settings for different operating environments.","pos":[433,540]},{"pos":[549,598],"content":"Recommended Settings for a Production Environment","linkify":"Recommended Settings for a Production Environment","nodes":[{"content":"Recommended Settings for a Production Environment","pos":[0,49]}]},{"content":"For a production environment, if you are using WCF trace sources, set the <ph id=\"ph1\">`switchValue`</ph> to Warning.","pos":[602,701],"source":"For a production environment, if you are using WCF trace sources, set the `switchValue` to Warning."},{"content":"If you are using the WCF <ph id=\"ph1\">`System.ServiceModel`</ph> trace source, set the <ph id=\"ph2\">`switchValue`</ph> attribute to <ph id=\"ph3\">`Warning`</ph> and the <ph id=\"ph4\">`propagateActivity`</ph> attribute to <ph id=\"ph5\">`true`</ph>.","pos":[702,856],"source":" If you are using the WCF `System.ServiceModel` trace source, set the `switchValue` attribute to `Warning` and the `propagateActivity` attribute to `true`."},{"content":"If you are using a user-defined trace source, set the <ph id=\"ph1\">`switchValue`</ph> attribute to <ph id=\"ph2\">`Warning, ActivityTracing`</ph>.","pos":[857,965],"source":" If you are using a user-defined trace source, set the `switchValue` attribute to `Warning, ActivityTracing`."},{"content":"This can be done manually using the <bpt id=\"p1\">[</bpt>Configuration Editor Tool (SvcConfigEditor.exe)<ept id=\"p1\">](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md)</ept>.","pos":[966,1136],"source":" This can be done manually using the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md)."},{"content":"If you do not anticipate a hit in performance, you can set the <ph id=\"ph1\">`switchValue`</ph> attribute to <ph id=\"ph2\">`Information`</ph> in all the previously mentioned cases, which generates a fairly large amount of trace data.","pos":[1137,1332],"source":" If you do not anticipate a hit in performance, you can set the `switchValue` attribute to `Information` in all the previously mentioned cases, which generates a fairly large amount of trace data."},{"content":"The following example demonstrates these recommended settings.","pos":[1333,1395]},{"pos":[2217,2265],"content":"Recommended Settings for Deployment or Debugging","linkify":"Recommended Settings for Deployment or Debugging","nodes":[{"content":"Recommended Settings for Deployment or Debugging","pos":[0,48]}]},{"content":"For deployment or debugging environment, choose <ph id=\"ph1\">`Information`</ph> or <ph id=\"ph2\">`Verbose`</ph>, along with <ph id=\"ph3\">`ActivityTracing`</ph> for either a user-defined or <ph id=\"ph4\">`System.ServiceModel`</ph> trace source.","pos":[2269,2438],"source":"For deployment or debugging environment, choose `Information` or `Verbose`, along with `ActivityTracing` for either a user-defined or `System.ServiceModel` trace source."},{"content":"To enhance debugging, you should also add an additional trace source (<ph id=\"ph1\">`System.ServiceModel.MessageLogging`</ph>) to the configuration to enable message logging.","pos":[2439,2594],"source":" To enhance debugging, you should also add an additional trace source (`System.ServiceModel.MessageLogging`) to the configuration to enable message logging."},{"content":"Notice that the <ph id=\"ph1\">`switchValue`</ph> attribute has no impact on this trace source.","pos":[2595,2670],"source":" Notice that the `switchValue` attribute has no impact on this trace source."},{"pos":[2677,2805],"content":"The following example demonstrates the recommended settings, using a shared listener that utilizes the <ph id=\"ph1\">`XmlWriterTraceListener`</ph>.","source":"The following example demonstrates the recommended settings, using a shared listener that utilizes the `XmlWriterTraceListener`."},{"pos":[4044,4072],"content":"Using WMI to Modify Settings","linkify":"Using WMI to Modify Settings","nodes":[{"content":"Using WMI to Modify Settings","pos":[0,28]}]},{"content":"You can use WMI to change configuration settings at runtime (by enabling the <ph id=\"ph1\">`wmiProviderEnabled`</ph> attribute in the configuration, as demonstrated in the previously configuration example).","pos":[4076,4263],"source":"You can use WMI to change configuration settings at runtime (by enabling the `wmiProviderEnabled` attribute in the configuration, as demonstrated in the previously configuration example)."},{"content":"For example, you can use WMI within the CIM Studio to change the trace source levels from Warning to Information at runtime.","pos":[4264,4388]},{"content":"You should be aware that the performance cost of live debugging in this way can be very high.","pos":[4389,4482]},{"content":"For more information about using WMI, see the <bpt id=\"p1\">[</bpt>Using Windows Management Instrumentation for Diagnostics<ept id=\"p1\">](../../../../../docs/framework/wcf/diagnostics/wmi/index.md)</ept> topic.","pos":[4483,4654],"source":" For more information about using WMI, see the [Using Windows Management Instrumentation for Diagnostics](../../../../../docs/framework/wcf/diagnostics/wmi/index.md) topic."},{"pos":[4663,4706],"content":"Enable Correlated Events in ASP.NET Tracing","linkify":"Enable Correlated Events in ASP.NET Tracing","nodes":[{"content":"Enable Correlated Events in ASP.NET Tracing","pos":[0,43]}]},{"content":"ASP.NET events do not set the correlation ID (ActivityID) unless ASP.NET event tracing is turned on.","pos":[4710,4810]},{"content":"To see correlated events properly, you have to turn on ASP.NET events tracing using the following command in the command console, which can be invoked by going to <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Run<ept id=\"p2\">**</ept> and type <bpt id=\"p3\">**</bpt>cmd<ept id=\"p3\">**</ept>,","pos":[4811,5010],"source":" To see correlated events properly, you have to turn on ASP.NET events tracing using the following command in the command console, which can be invoked by going to **Start**, **Run** and type **cmd**,"},{"content":"To turn off tracing of ASP.NET events, use the following command,","pos":[5093,5158]},{"pos":[5209,5217],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[5221,5339],"content":"<bpt id=\"p1\">[</bpt>Using Windows Management Instrumentation for Diagnostics<ept id=\"p1\">](../../../../../docs/framework/wcf/diagnostics/wmi/index.md)</ept>","source":"[Using Windows Management Instrumentation for Diagnostics](../../../../../docs/framework/wcf/diagnostics/wmi/index.md)"}]}