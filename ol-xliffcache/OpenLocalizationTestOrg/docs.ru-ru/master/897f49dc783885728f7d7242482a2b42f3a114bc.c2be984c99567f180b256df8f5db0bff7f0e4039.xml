{"content":"---\ntitle: \"Latency Modes\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"garbage collection, intrusiveness\"\n  - \"garbage collection, latency modes\"\nms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Latency Modes\nTo reclaim objects, the garbage collector must stop all the executing threads in an application. In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance. You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.  \n  \n Latency refers to the time that the garbage collector intrudes in your application. During low latency periods, the garbage collector is more conservative and less intrusive in reclaiming objects. The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:  \n  \n-   <xref:System.Runtime.GCLatencyMode.LowLatency> suppresses generation 2 collections and performs only generation 0 and 1 collections. It can be used only for short periods of time. Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation. This setting is available only for workstation garbage collection.  \n  \n-   <xref:System.Runtime.GCLatencyMode.SustainedLowLatency> suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections. It can be used for longer periods of time, and is available for both workstation and server garbage collection. This setting cannot be used if [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled.  \n  \n During low latency periods, generation 2 collections are suppressed unless the following occurs:  \n  \n-   The system receives a low memory notification from the operating system.  \n  \n-   Your application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.  \n  \n The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values.  \n  \n|Latency mode|Application scenarios|  \n|------------------|---------------------------|  \n|<xref:System.Runtime.GCLatencyMode.Batch>|For applications that have no UI or server-side operations.<br /><br /> This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled.|  \n|<xref:System.Runtime.GCLatencyMode.Interactive>|For most applications that have a UI.<br /><br /> This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is enabled.|  \n|<xref:System.Runtime.GCLatencyMode.LowLatency>|For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive. For example, applications that do animation rendering or data acquisition functions.|  \n|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive. For example, applications that need quick response times as market data changes during trading hours.<br /><br /> This mode results in a larger managed heap size than other modes. Because it does not compact the managed heap, higher fragmentation is possible. Ensure that sufficient memory is available.|  \n  \n## Guidelines for Using Low Latency  \n When you use <xref:System.Runtime.GCLatencyMode.LowLatency> mode, consider the following guidelines:  \n  \n-   Keep the period of time in low latency as short as possible.  \n  \n-   Avoid allocating high amounts of memory during low latency periods. Low memory notifications can occur because garbage collection reclaims fewer objects.  \n  \n-   While in the low latency mode, minimize the number of allocations you make, in particular allocations onto the Large Object Heap and pinned objects.  \n  \n-   Be aware of threads that could be allocating. Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, you could generate an <xref:System.OutOfMemoryException> on any thread that may be allocating.  \n  \n-   Wrap the low latency code in constrained execution regions (for more information, see [Constrained Execution Regions](../../../docs/framework/performance/constrained-execution-regions.md)).  \n  \n-   You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.  \n  \n## See also\n\n- <xref:System.GC?displayProperty=nameWithType>\n- [Induced Collections](../../../docs/standard/garbage-collection/induced.md)\n- [Garbage Collection](../../../docs/standard/garbage-collection/index.md)\n","nodes":[{"pos":[4,270],"embed":true,"restype":"x-metadata","content":"title: \"Latency Modes\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"garbage collection, intrusiveness\"\n  - \"garbage collection, latency modes\"\nms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Latency Modes","nodes":[{"pos":[0,13],"content":"Latency Modes","nodes":[{"content":"Latency Modes","pos":[0,13]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[277,290],"content":"Latency Modes","linkify":"Latency Modes","nodes":[{"content":"Latency Modes","pos":[0,13]}]},{"content":"To reclaim objects, the garbage collector must stop all the executing threads in an application.","pos":[291,387]},{"content":"In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.","pos":[388,550]},{"content":"You can adjust the intrusiveness of the garbage collector by setting the <ph id=\"ph1\">&lt;xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType&gt;</ph> property to one of the <ph id=\"ph2\">&lt;xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType&gt;</ph> values.","pos":[551,796],"source":" You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values."},{"content":"Latency refers to the time that the garbage collector intrudes in your application.","pos":[803,886]},{"content":"During low latency periods, the garbage collector is more conservative and less intrusive in reclaiming objects.","pos":[887,999]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType&gt;</ph> enumeration provides two low latency settings:","pos":[1000,1115],"source":" The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:"},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.GCLatencyMode.LowLatency&gt;</ph> suppresses generation 2 collections and performs only generation 0 and 1 collections.","pos":[1125,1257],"source":"<xref:System.Runtime.GCLatencyMode.LowLatency> suppresses generation 2 collections and performs only generation 0 and 1 collections."},{"content":"It can be used only for short periods of time.","pos":[1258,1304]},{"content":"Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.","pos":[1305,1493]},{"content":"This setting is available only for workstation garbage collection.","pos":[1494,1560]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.GCLatencyMode.SustainedLowLatency&gt;</ph> suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.","pos":[1570,1748],"source":"<xref:System.Runtime.GCLatencyMode.SustainedLowLatency> suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections."},{"content":"It can be used for longer periods of time, and is available for both workstation and server garbage collection.","pos":[1749,1860]},{"content":"This setting cannot be used if <bpt id=\"p1\">[</bpt>concurrent garbage collection<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md)</ept> is disabled.","pos":[1861,2020],"source":" This setting cannot be used if [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled."},{"content":"During low latency periods, generation 2 collections are suppressed unless the following occurs:","pos":[2027,2123]},{"content":"The system receives a low memory notification from the operating system.","pos":[2133,2205]},{"pos":[2215,2385],"content":"Your application code induces a collection by calling the <ph id=\"ph1\">&lt;xref:System.GC.Collect%2A?displayProperty=nameWithType&gt;</ph> method and specifying 2 for the <ph id=\"ph2\">`generation`</ph> parameter.","source":"Your application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter."},{"pos":[2392,2501],"content":"The following table lists the application scenarios for using the <ph id=\"ph1\">&lt;xref:System.Runtime.GCLatencyMode&gt;</ph> values.","source":"The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values."},{"content":"Latency mode","pos":[2508,2520]},{"content":"Application scenarios","pos":[2521,2542]},{"content":"For applications that have no UI or server-side operations.","pos":[2640,2699]},{"content":"This is the default mode when <bpt id=\"p1\">[</bpt>concurrent garbage collection<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md)</ept> is disabled.","pos":[2712,2870],"source":"This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled."},{"content":"For most applications that have a UI.","pos":[2923,2960]},{"content":"This is the default mode when <bpt id=\"p1\">[</bpt>concurrent garbage collection<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md)</ept> is enabled.","pos":[2973,3130],"source":"This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is enabled."},{"content":"For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.","pos":[3182,3321]},{"content":"For example, applications that do animation rendering or data acquisition functions.","pos":[3322,3406]},{"content":"For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.","pos":[3467,3650]},{"content":"For example, applications that need quick response times as market data changes during trading hours.","pos":[3651,3752]},{"content":"This mode results in a larger managed heap size than other modes.","pos":[3765,3830]},{"content":"Because it does not compact the managed heap, higher fragmentation is possible.","pos":[3831,3910]},{"content":"Ensure that sufficient memory is available.","pos":[3911,3954]},{"pos":[3964,3996],"content":"Guidelines for Using Low Latency","linkify":"Guidelines for Using Low Latency","nodes":[{"content":"Guidelines for Using Low Latency","pos":[0,32]}]},{"pos":[4000,4100],"content":"When you use <ph id=\"ph1\">&lt;xref:System.Runtime.GCLatencyMode.LowLatency&gt;</ph> mode, consider the following guidelines:","source":"When you use <xref:System.Runtime.GCLatencyMode.LowLatency> mode, consider the following guidelines:"},{"content":"Keep the period of time in low latency as short as possible.","pos":[4110,4170]},{"content":"Avoid allocating high amounts of memory during low latency periods.","pos":[4180,4247]},{"content":"Low memory notifications can occur because garbage collection reclaims fewer objects.","pos":[4248,4333]},{"content":"While in the low latency mode, minimize the number of allocations you make, in particular allocations onto the Large Object Heap and pinned objects.","pos":[4343,4491]},{"content":"Be aware of threads that could be allocating.","pos":[4501,4546]},{"content":"Because the <ph id=\"ph1\">&lt;xref:System.Runtime.GCSettings.LatencyMode%2A&gt;</ph> property setting is process-wide, you could generate an <ph id=\"ph2\">&lt;xref:System.OutOfMemoryException&gt;</ph> on any thread that may be allocating.","pos":[4547,4735],"source":" Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, you could generate an <xref:System.OutOfMemoryException> on any thread that may be allocating."},{"pos":[4745,4934],"content":"Wrap the low latency code in constrained execution regions (for more information, see <bpt id=\"p1\">[</bpt>Constrained Execution Regions<ept id=\"p1\">](../../../docs/framework/performance/constrained-execution-regions.md)</ept>).","source":"Wrap the low latency code in constrained execution regions (for more information, see [Constrained Execution Regions](../../../docs/framework/performance/constrained-execution-regions.md))."},{"pos":[4944,5131],"content":"You can force generation 2 collections during a low latency period by calling the <ph id=\"ph1\">&lt;xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType&gt;</ph> method.","source":"You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method."},{"pos":[5140,5148],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5200,5275],"content":"<bpt id=\"p1\">[</bpt>Induced Collections<ept id=\"p1\">](../../../docs/standard/garbage-collection/induced.md)</ept>","source":"[Induced Collections](../../../docs/standard/garbage-collection/induced.md)"},{"pos":[5278,5350],"content":"<bpt id=\"p1\">[</bpt>Garbage Collection<ept id=\"p1\">](../../../docs/standard/garbage-collection/index.md)</ept>","source":"[Garbage Collection](../../../docs/standard/garbage-collection/index.md)"}]}