{"content":"---\ntitle: \"Batching Operations (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF Data Services, client library\"\nms.assetid: 962a49d1-cc11-4b96-bc7d-071dd6607d6c\ncaps.latest.revision: 3\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Batching Operations (WCF Data Services)\nThe [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] supports batch processing of requests to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based service. For more information, see [OData: Batch Processing](http://go.microsoft.com/fwlink/?LinkId=186075). In [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], each operation that uses the <xref:System.Data.Services.Client.DataServiceContext>, such as executing a query or saving changes, results in a separate request being sent to the data service. In order to maintain a logical scope for sets of operations, you can explicitly define operational batches. This ensures that all operations in the batch are sent to the data service in a single HTTP request, enables the server to process the operations atomically, and reduces the number of round trips to the data service.  \n  \n## Batching Query Operations  \n To execute multiple queries in a single batch, you must create each query in the batch as a separate instance of the <xref:System.Data.Services.Client.DataServiceRequest%601> class. When you create a query request in this manner, the query itself is defined as a URI, and it follows the rules for addressing resources. For more information, see [Accessing Data Service Resources](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md). The batched query requests are sent to the data service when the <xref:System.Data.Services.Client.DataServiceContext.ExecuteBatch%2A> method is called that contains the query request objects. This method returns a <xref:System.Data.Services.Client.DataServiceResponse> object, which is a collection of <xref:System.Data.Services.Client.QueryOperationResponse%601> objects that represent responses to individual queries in the batch, each of which contains either a collection of objects returned by the query or error information. When any single query operation in the batch fails, error information is returned in the <xref:System.Data.Services.Client.QueryOperationResponse%601> object for the operation that failed and the remaining operations are still executed. For more information, see [How to: Execute Queries in a Batch](../../../../docs/framework/data/wcf/how-to-execute-queries-in-a-batch-wcf-data-services.md).  \n  \n Batched queries can also be executed asynchronously. For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).  \n  \n## Batching the SaveChanges Operation  \n When you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method, all changes that the context tracks are translated into REST-based operations that are sent as requests to the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service. By default, these changes are not sent in a single request message. To require that all changes be sent in a single request, you must call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%28System.Data.Services.Client.SaveChangesOptions%29> method and include a value of <xref:System.Data.Services.Client.SaveChangesOptions> in the <xref:System.Data.Services.Client.SaveChangesOptions> enumeration that you supply to the method.  \n  \n You can also asynchronously save batched changes. For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md).  \n  \n## See Also  \n [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)","nodes":[{"pos":[12,68],"content":"Batching Operations (WCF Data Services) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Batching Operations (WCF Data Services) | Microsoft Docs","pos":[0,56]}]},{"pos":[432,471],"content":"Batching Operations (WCF Data Services)","linkify":"Batching Operations (WCF Data Services)","nodes":[{"content":"Batching Operations (WCF Data Services)","pos":[0,39]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> supports batch processing of requests to an <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph>-based service.","pos":[472,664],"source":"The [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] supports batch processing of requests to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based service."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>OData: Batch Processing<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=186075)</ept>.","pos":[665,764],"source":" For more information, see [OData: Batch Processing](http://go.microsoft.com/fwlink/?LinkId=186075)."},{"content":"In <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph>, each operation that uses the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>, such as executing a query or saving changes, results in a separate request being sent to the data service.","pos":[765,1019],"source":" In [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], each operation that uses the <xref:System.Data.Services.Client.DataServiceContext>, such as executing a query or saving changes, results in a separate request being sent to the data service."},{"content":"In order to maintain a logical scope for sets of operations, you can explicitly define operational batches.","pos":[1020,1127]},{"content":"This ensures that all operations in the batch are sent to the data service in a single HTTP request, enables the server to process the operations atomically, and reduces the number of round trips to the data service.","pos":[1128,1344]},{"pos":[1353,1378],"content":"Batching Query Operations","linkify":"Batching Query Operations","nodes":[{"content":"Batching Query Operations","pos":[0,25]}]},{"content":"To execute multiple queries in a single batch, you must create each query in the batch as a separate instance of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceRequest%601&gt;</ph> class.","pos":[1382,1563],"source":"To execute multiple queries in a single batch, you must create each query in the batch as a separate instance of the <xref:System.Data.Services.Client.DataServiceRequest%601> class."},{"content":"When you create a query request in this manner, the query itself is defined as a URI, and it follows the rules for addressing resources.","pos":[1564,1700]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Accessing Data Service Resources<ept id=\"p1\">](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md)</ept>.","pos":[1701,1853],"source":" For more information, see [Accessing Data Service Resources](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md)."},{"content":"The batched query requests are sent to the data service when the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.ExecuteBatch%2A&gt;</ph> method is called that contains the query request objects.","pos":[1854,2046],"source":" The batched query requests are sent to the data service when the <xref:System.Data.Services.Client.DataServiceContext.ExecuteBatch%2A> method is called that contains the query request objects."},{"content":"This method returns a <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceResponse&gt;</ph> object, which is a collection of <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.QueryOperationResponse%601&gt;</ph> objects that represent responses to individual queries in the batch, each of which contains either a collection of objects returned by the query or error information.","pos":[2047,2385],"source":" This method returns a <xref:System.Data.Services.Client.DataServiceResponse> object, which is a collection of <xref:System.Data.Services.Client.QueryOperationResponse%601> objects that represent responses to individual queries in the batch, each of which contains either a collection of objects returned by the query or error information."},{"content":"When any single query operation in the batch fails, error information is returned in the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.QueryOperationResponse%601&gt;</ph> object for the operation that failed and the remaining operations are still executed.","pos":[2386,2622],"source":" When any single query operation in the batch fails, error information is returned in the <xref:System.Data.Services.Client.QueryOperationResponse%601> object for the operation that failed and the remaining operations are still executed."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Execute Queries in a Batch<ept id=\"p1\">](../../../../docs/framework/data/wcf/how-to-execute-queries-in-a-batch-wcf-data-services.md)</ept>.","pos":[2623,2778],"source":" For more information, see [How to: Execute Queries in a Batch](../../../../docs/framework/data/wcf/how-to-execute-queries-in-a-batch-wcf-data-services.md)."},{"content":"Batched queries can also be executed asynchronously.","pos":[2785,2837]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Asynchronous Operations<ept id=\"p1\">](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)</ept>.","pos":[2838,2972],"source":" For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)."},{"pos":[2981,3015],"content":"Batching the SaveChanges Operation","linkify":"Batching the SaveChanges Operation","nodes":[{"content":"Batching the SaveChanges Operation","pos":[0,34]}]},{"content":"When you call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A&gt;</ph> method, all changes that the context tracks are translated into REST-based operations that are sent as requests to the <ph id=\"ph2\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> service.","pos":[3019,3299],"source":"When you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method, all changes that the context tracks are translated into REST-based operations that are sent as requests to the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service."},{"content":"By default, these changes are not sent in a single request message.","pos":[3300,3367]},{"content":"To require that all changes be sent in a single request, you must call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%28System.Data.Services.Client.SaveChangesOptions%29&gt;</ph> method and include a value of <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.SaveChangesOptions&gt;</ph> in the <ph id=\"ph3\">&lt;xref:System.Data.Services.Client.SaveChangesOptions&gt;</ph> enumeration that you supply to the method.","pos":[3368,3748],"source":" To require that all changes be sent in a single request, you must call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%28System.Data.Services.Client.SaveChangesOptions%29> method and include a value of <xref:System.Data.Services.Client.SaveChangesOptions> in the <xref:System.Data.Services.Client.SaveChangesOptions> enumeration that you supply to the method."},{"content":"You can also asynchronously save batched changes.","pos":[3755,3804]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Asynchronous Operations<ept id=\"p1\">](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)</ept>.","pos":[3805,3939],"source":" For more information, see [Asynchronous Operations](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)."},{"pos":[3948,3956],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[3960,4067],"content":"<bpt id=\"p1\">[</bpt>WCF Data Services Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</ept>","source":"[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)"}]}