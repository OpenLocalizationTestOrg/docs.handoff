{"content":"---\ntitle: \"How to: Set Up a Signature Confirmation\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"signature confirmation\"\n  - \"WCF, security\"\nms.assetid: 2424c137-c7c2-4aa9-8d5d-a066e12fefda\n---\n# How to: Set Up a Signature Confirmation\n*Signature confirmation* is a mechanism for a message initiator to ensure that a received reply was generated in response to the sender's original message. Signature confirmation is defined in the WS-Security 1.1 specification. If an endpoint supports WS-Security 1.0, you cannot use signature confirmation.  \n  \n The following procedures specify how to enable signature confirmation using an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>. You can use the same procedure with a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>. The procedure builds upon the basic steps found in [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).  \n  \n### To enable signature confirmation in code  \n  \n1.  Create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class.  \n  \n2.  Create an instance of the  <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> class.  \n  \n3.  Set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.RequireSignatureConfirmation%2A> to `true`.  \n  \n4.  Add the security element to the binding collection.  \n  \n5.  Create a custom binding, as specified in [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).  \n  \n### To enable signature confirmation in configuration  \n  \n1.  Add a `<customBinding>` element to the `<bindings>` section of the configuration file.  \n  \n2.  Add a `<binding>` element and set the name attribute to an appropriate value.  \n  \n3.  Add an appropriate encoding element. The following example adds a `<TextMessageEncoding>` element.  \n  \n4.  Add a `<security>` child element and set the `requireSignatureConfirmation` attribute to `true`.  \n  \n5.  Optional. To enable signature confirmation during the bootstrap, add a [\\<secureConversationBootstrap>](../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md) child element and set the `equireSignatureConfirmation` attribute to `true`.  \n  \n6.  Add an appropriate transport element. The following example adds an [\\<httpTransport>](../../../../docs/framework/configure-apps/file-schema/wcf/httptransport.md):  \n  \n    ```xml  \n    <bindings>  \n      <customBinding>  \n        <binding name=\"SignatureConfirmationBinding\">  \n          <security requireSignatureConfirmation=\"true\">  \n            <secureConversationBootstrap requireSignatureConfirmation=\"true\" />  \n              </security>  \n           <textMessageEncoding />  \n             <httpTransport />  \n        </binding>  \n      </customBinding>  \n    </bindings>  \n    ```  \n  \n## Example  \n The following code creates an instance of the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and sets the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.RequireSignatureConfirmation%2A> property to `true`. Note that this example does not use the `<secureConversationBootstrap>` element shown in the preceding example. This example demonstrates signature confirmation when using a Windows (Kerberos protocol) token. In this case, the signature of the client is returned in all responses from the service and is confirmed by the client.  \n  \n [!code-csharp[c_SignatureConfirmation#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_signatureconfirmation/cs/source.cs#1)]\n [!code-vb[c_SignatureConfirmation#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_signatureconfirmation/vb/source.vb#1)]  \n  \n## See also\n\n- <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>\n- <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>\n- <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A>\n- [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)\n- [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)\n","nodes":[{"pos":[4,228],"embed":true,"restype":"x-metadata","content":"title: \"How to: Set Up a Signature Confirmation\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"signature confirmation\"\n  - \"WCF, security\"\nms.assetid: 2424c137-c7c2-4aa9-8d5d-a066e12fefda","nodes":[{"content":"How to: Set Up a Signature Confirmation","nodes":[{"pos":[0,39],"content":"How to: Set Up a Signature Confirmation","nodes":[{"content":"How to: Set Up a Signature Confirmation","pos":[0,39]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[235,274],"content":"How to: Set Up a Signature Confirmation","linkify":"How to: Set Up a Signature Confirmation","nodes":[{"content":"How to: Set Up a Signature Confirmation","pos":[0,39]}]},{"content":"<bpt id=\"p1\">*</bpt>Signature confirmation<ept id=\"p1\">*</ept> is a mechanism for a message initiator to ensure that a received reply was generated in response to the sender's original message.","pos":[275,430],"source":"*Signature confirmation* is a mechanism for a message initiator to ensure that a received reply was generated in response to the sender's original message."},{"content":"Signature confirmation is defined in the WS-Security 1.1 specification.","pos":[431,502]},{"content":"If an endpoint supports WS-Security 1.0, you cannot use signature confirmation.","pos":[503,582]},{"content":"The following procedures specify how to enable signature confirmation using an <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement&gt;</ph>.","pos":[589,737],"source":"The following procedures specify how to enable signature confirmation using an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>."},{"content":"You can use the same procedure with a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph>.","pos":[738,844],"source":" You can use the same procedure with a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>."},{"content":"The procedure builds upon the basic steps found in <bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>.","pos":[845,1078],"source":" The procedure builds upon the basic steps found in [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)."},{"pos":[1088,1128],"content":"To enable signature confirmation in code","linkify":"To enable signature confirmation in code","nodes":[{"content":"To enable signature confirmation in code","pos":[0,40]}]},{"pos":[1138,1231],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.BindingElementCollection&gt;</ph> class.","source":"Create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class."},{"pos":[1241,1342],"content":"Create an instance of the  <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> class.","source":"Create an instance of the  <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> class."},{"pos":[1352,1470],"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.RequireSignatureConfirmation%2A&gt;</ph> to <ph id=\"ph2\">`true`</ph>.","source":"Set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.RequireSignatureConfirmation%2A> to `true`."},{"content":"Add the security element to the binding collection.","pos":[1480,1531]},{"pos":[1541,1764],"content":"Create a custom binding, as specified in <bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>.","source":"Create a custom binding, as specified in [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)."},{"pos":[1774,1823],"content":"To enable signature confirmation in configuration","linkify":"To enable signature confirmation in configuration","nodes":[{"content":"To enable signature confirmation in configuration","pos":[0,49]}]},{"pos":[1833,1919],"content":"Add a <ph id=\"ph1\">`&lt;customBinding&gt;`</ph> element to the <ph id=\"ph2\">`&lt;bindings&gt;`</ph> section of the configuration file.","source":"Add a `<customBinding>` element to the `<bindings>` section of the configuration file."},{"pos":[1929,2006],"content":"Add a <ph id=\"ph1\">`&lt;binding&gt;`</ph> element and set the name attribute to an appropriate value.","source":"Add a `<binding>` element and set the name attribute to an appropriate value."},{"content":"Add an appropriate encoding element.","pos":[2016,2052]},{"content":"The following example adds a <ph id=\"ph1\">`&lt;TextMessageEncoding&gt;`</ph> element.","pos":[2053,2114],"source":" The following example adds a `<TextMessageEncoding>` element."},{"pos":[2124,2220],"content":"Add a <ph id=\"ph1\">`&lt;security&gt;`</ph> child element and set the <ph id=\"ph2\">`requireSignatureConfirmation`</ph> attribute to <ph id=\"ph3\">`true`</ph>.","source":"Add a `<security>` child element and set the `requireSignatureConfirmation` attribute to `true`."},{"content":"Optional.","pos":[2230,2239]},{"content":"To enable signature confirmation during the bootstrap, add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>secureConversationBootstrap&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)</ept> child element and set the <ph id=\"ph2\">`equireSignatureConfirmation`</ph> attribute to <ph id=\"ph3\">`true`</ph>.","pos":[2240,2500],"source":" To enable signature confirmation during the bootstrap, add a [\\<secureConversationBootstrap>](../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md) child element and set the `equireSignatureConfirmation` attribute to `true`."},{"content":"Add an appropriate transport element.","pos":[2510,2547]},{"content":"The following example adds an <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>httpTransport&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/httptransport.md)</ept>:","pos":[2548,2673],"source":" The following example adds an [\\<httpTransport>](../../../../docs/framework/configure-apps/file-schema/wcf/httptransport.md):"},{"pos":[3108,3115],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code creates an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> and sets the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.RequireSignatureConfirmation%2A&gt;</ph> property to <ph id=\"ph3\">`true`</ph>.","pos":[3119,3365],"source":"The following code creates an instance of the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and sets the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.RequireSignatureConfirmation%2A> property to `true`."},{"content":"Note that this example does not use the <ph id=\"ph1\">`&lt;secureConversationBootstrap&gt;`</ph> element shown in the preceding example.","pos":[3366,3477],"source":" Note that this example does not use the `<secureConversationBootstrap>` element shown in the preceding example."},{"content":"This example demonstrates signature confirmation when using a Windows (Kerberos protocol) token.","pos":[3478,3574]},{"content":"In this case, the signature of the client is returned in all responses from the service and is confirmed by the client.","pos":[3575,3694]},{"pos":[3979,3987],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4234,4415],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>","source":"[How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)"},{"pos":[4418,4621],"content":"<bpt id=\"p1\">[</bpt>How to: Create a SecurityBindingElement for a Specified Authentication Mode<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)</ept>","source":"[How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)"}]}