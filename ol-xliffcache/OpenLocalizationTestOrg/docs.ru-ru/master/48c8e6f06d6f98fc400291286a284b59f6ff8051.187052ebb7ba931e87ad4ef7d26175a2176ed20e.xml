{"content":"---\ntitle: \"How to: Map Database Relationships | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 538def39-8399-46fb-b02d-60ede4e050af\ncaps.latest.revision: 3\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"\n---\n# How to: Map Database Relationships\nYou can encode as property references in your entity class any data relationships that will always be the same. In the Northwind sample database, for example, because customers typically place orders, there is always a relationship in the model between customers and their orders.  \n  \n [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] defines an <xref:System.Data.Linq.Mapping.AssociationAttribute> attribute to help represent such relationships. This attribute is used together with the <xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601> types to represent what would be a foreign key relationship in a database. For more information, see the Association Attribute section of [Attribute-Based Mapping](../../../../../../docs/framework/data/adonet/sql/linq/attribute-based-mapping.md).  \n  \n> [!NOTE]\n>  AssociationAttribute and ColumnAttribute Storage property values are case sensitive. For example, ensure that values used in the attribute for the AssociationAttribute.Storage property match the case for the corresponding property names used elsewhere in the code. This applies to all .NET programming languages, even those which are not typically case sensitive, including [!INCLUDE[vb_current_short](../../../../../../includes/vb-current-short-md.md)]. For more information about the Storage property, see <xref:System.Data.Linq.Mapping.DataAttribute.Storage%2A?displayProperty=fullName>.  \n  \n Most relationships are one-to-many, as in the example later in this topic. You can also represent one-to-one and many-to-many relationships as follows:  \n  \n-   One-to-one: Represent this kind of relationship by including <xref:System.Data.Linq.EntitySet%601> on both sides.  \n  \n     For example, consider a `Customer`-`SecurityCode` relationship, created so that the customer's security code will not be found in the `Customer` table and can be accessed only by authorized persons.  \n  \n-   Many-to-many: In many-to-many relationships, the primary key of the link table (also named the *junction* table) is often formed by a composite of the foreign keys from the other two tables.  \n  \n     For example, consider an `Employee`-`Project` many-to-many relationship formed by using link table `EmployeeProject`. [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] requires that such a relationship be modeled by using three classes: `Employee`, `Project`, and `EmployeeProject`. In this case, changing the relationship between an `Employee` and a `Project` can appear to require an update of the primary key `EmployeeProject`. However, this situation is best modeled as deleting an existing `EmployeeProject` and the creating a new `EmployeeProject`.  \n  \n    > [!NOTE]\n    >  Relationships in relational databases are typically modeled as foreign key values that refer to primary keys in other tables. To navigate between them you explicitly associate the two tables by using a relational *join* operation.  \n    >   \n    >  Objects in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], on the other hand, refer to each other by using property references or collections of references that you navigate by using *dot* notation.  \n  \n## Example  \n In the following one-to-many example, the `Customer` class has a property that declares the relationship between customers and their orders.  The `Orders` property is of type <xref:System.Data.Linq.EntitySet%601>. This type signifies that this relationship is one-to-many (one customer to many orders). The <xref:System.Data.Linq.Mapping.AssociationAttribute.OtherKey%2A> property is used to describe how this association is accomplished, namely, by specifying the name of the property in the related class to be compared with this one. In this example, the `CustomerID` property is compared, just as a database *join* would compare that column value.  \n  \n> [!NOTE]\n>  If you are using [!INCLUDE[vs_current_short](../../../../../../includes/vs-current-short-md.md)], you can use the [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] to create an association between classes.  \n  \n [!code-csharp[DlinqCustomize#3](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqCustomize/cs/Program.cs#3)]\n [!code-vb[DlinqCustomize#3](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqCustomize/vb/Module1.vb#3)]  \n  \n## Example  \n You can also reverse the situation. Instead of using the `Customer` class to describe the association between customers and orders, you can use the `Order` class. The `Order` class uses the <xref:System.Data.Linq.EntityRef%601> type to describe the relationship back to the customer, as in the following code example.  \n  \n> [!NOTE]\n>  The <xref:System.Data.Linq.EntityRef%601> class supports *deferred loading*. For more information, *see* [Deferred versus Immediate Loading](../../../../../../docs/framework/data/adonet/sql/linq/deferred-versus-immediate-loading.md).  \n  \n [!code-csharp[DLinqCustomize#5](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqCustomize/cs/Program.cs#5)]\n [!code-vb[DLinqCustomize#5](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqCustomize/vb/Module1.vb#5)]  \n  \n## See Also  \n [How to: Customize Entity Classes by Using the Code Editor](../../../../../../docs/framework/data/adonet/sql/linq/how-to-customize-entity-classes-by-using-the-code-editor.md)   \n [The LINQ to SQL Object Model](../../../../../../docs/framework/data/adonet/sql/linq/the-linq-to-sql-object-model.md)","nodes":[{"pos":[4,365],"embed":true,"restype":"x-metadata","content":"title: \"How to: Map Database Relationships | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 538def39-8399-46fb-b02d-60ede4e050af\ncaps.latest.revision: 3\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"","nodes":[{"content":"How to: Map Database Relationships | Microsoft Docs","nodes":[{"pos":[0,51],"content":"How to: Map Database Relationships | Microsoft Docs","nodes":[{"content":"How to: Map Database Relationships | Microsoft Docs","pos":[0,51]}]}],"path":["title"]}],"yml":true},{"pos":[372,406],"content":"How to: Map Database Relationships","linkify":"How to: Map Database Relationships","nodes":[{"content":"How to: Map Database Relationships","pos":[0,34]}]},{"content":"You can encode as property references in your entity class any data relationships that will always be the same.","pos":[407,518]},{"content":"In the Northwind sample database, for example, because customers typically place orders, there is always a relationship in the model between customers and their orders.","pos":[519,687]},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> defines an <ph id=\"ph2\">&lt;xref:System.Data.Linq.Mapping.AssociationAttribute&gt;</ph> attribute to help represent such relationships.","pos":[694,873],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] defines an <xref:System.Data.Linq.Mapping.AssociationAttribute> attribute to help represent such relationships."},{"content":"This attribute is used together with the <ph id=\"ph1\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntityRef%601&gt;</ph> types to represent what would be a foreign key relationship in a database.","pos":[874,1069],"source":" This attribute is used together with the <xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601> types to represent what would be a foreign key relationship in a database."},{"content":"For more information, see the Association Attribute section of <bpt id=\"p1\">[</bpt>Attribute-Based Mapping<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/attribute-based-mapping.md)</ept>.","pos":[1070,1241],"source":" For more information, see the Association Attribute section of [Attribute-Based Mapping](../../../../../../docs/framework/data/adonet/sql/linq/attribute-based-mapping.md)."},{"pos":[1249,1850],"content":"[!NOTE]\n AssociationAttribute and ColumnAttribute Storage property values are case sensitive. For example, ensure that values used in the attribute for the AssociationAttribute.Storage property match the case for the corresponding property names used elsewhere in the code. This applies to all .NET programming languages, even those which are not typically case sensitive, including [!INCLUDE[vb_current_short](../../../../../../includes/vb-current-short-md.md)]. For more information about the Storage property, see <xref:System.Data.Linq.Mapping.DataAttribute.Storage%2A?displayProperty=fullName>.","leadings":["","> "],"nodes":[{"content":"AssociationAttribute and ColumnAttribute Storage property values are case sensitive. For example, ensure that values used in the attribute for the AssociationAttribute.Storage property match the case for the corresponding property names used elsewhere in the code. This applies to all .NET programming languages, even those which are not typically case sensitive, including [!INCLUDE[vb_current_short](../../../../../../includes/vb-current-short-md.md)]. For more information about the Storage property, see <xref:System.Data.Linq.Mapping.DataAttribute.Storage%2A?displayProperty=fullName>.","pos":[9,599],"nodes":[{"content":"AssociationAttribute and ColumnAttribute Storage property values are case sensitive.","pos":[0,84]},{"content":"For example, ensure that values used in the attribute for the AssociationAttribute.Storage property match the case for the corresponding property names used elsewhere in the code.","pos":[85,264]},{"content":"This applies to all .NET programming languages, even those which are not typically case sensitive, including <ph id=\"ph1\">[!INCLUDE[vb_current_short](../../../../../../includes/vb-current-short-md.md)]</ph>.","pos":[265,454],"source":" This applies to all .NET programming languages, even those which are not typically case sensitive, including [!INCLUDE[vb_current_short](../../../../../../includes/vb-current-short-md.md)]."},{"content":"For more information about the Storage property, see <ph id=\"ph1\">&lt;xref:System.Data.Linq.Mapping.DataAttribute.Storage%2A?displayProperty=fullName&gt;</ph>.","pos":[455,590],"source":" For more information about the Storage property, see <xref:System.Data.Linq.Mapping.DataAttribute.Storage%2A?displayProperty=fullName>."}]}]},{"content":"Most relationships are one-to-many, as in the example later in this topic.","pos":[1857,1931]},{"content":"You can also represent one-to-one and many-to-many relationships as follows:","pos":[1932,2008]},{"content":"One-to-one: Represent this kind of relationship by including <ph id=\"ph1\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph> on both sides.","pos":[2018,2131],"source":"One-to-one: Represent this kind of relationship by including <xref:System.Data.Linq.EntitySet%601> on both sides."},{"pos":[2142,2340],"content":"For example, consider a <ph id=\"ph1\">`Customer`</ph><ph id=\"ph2\">-</ph><ph id=\"ph3\">`SecurityCode`</ph> relationship, created so that the customer's security code will not be found in the <ph id=\"ph4\">`Customer`</ph> table and can be accessed only by authorized persons.","source":"For example, consider a `Customer`-`SecurityCode` relationship, created so that the customer's security code will not be found in the `Customer` table and can be accessed only by authorized persons."},{"pos":[2350,2540],"content":"Many-to-many: In many-to-many relationships, the primary key of the link table (also named the <bpt id=\"p1\">*</bpt>junction<ept id=\"p1\">*</ept> table) is often formed by a composite of the foreign keys from the other two tables.","source":"Many-to-many: In many-to-many relationships, the primary key of the link table (also named the *junction* table) is often formed by a composite of the foreign keys from the other two tables."},{"content":"For example, consider an <ph id=\"ph1\">`Employee`</ph><ph id=\"ph2\">-</ph><ph id=\"ph3\">`Project`</ph> many-to-many relationship formed by using link table <ph id=\"ph4\">`EmployeeProject`</ph>.","pos":[2551,2668],"source":"For example, consider an `Employee`-`Project` many-to-many relationship formed by using link table `EmployeeProject`."},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> requires that such a relationship be modeled by using three classes: <ph id=\"ph2\">`Employee`</ph>, <ph id=\"ph3\">`Project`</ph>, and <ph id=\"ph4\">`EmployeeProject`</ph>.","pos":[2669,2851],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] requires that such a relationship be modeled by using three classes: `Employee`, `Project`, and `EmployeeProject`."},{"content":"In this case, changing the relationship between an <ph id=\"ph1\">`Employee`</ph> and a <ph id=\"ph2\">`Project`</ph> can appear to require an update of the primary key <ph id=\"ph3\">`EmployeeProject`</ph>.","pos":[2852,2999],"source":" In this case, changing the relationship between an `Employee` and a `Project` can appear to require an update of the primary key `EmployeeProject`."},{"content":"However, this situation is best modeled as deleting an existing <ph id=\"ph1\">`EmployeeProject`</ph> and the creating a new <ph id=\"ph2\">`EmployeeProject`</ph>.","pos":[3000,3123],"source":" However, this situation is best modeled as deleting an existing `EmployeeProject` and the creating a new `EmployeeProject`."},{"pos":[3135,3380],"content":"[!NOTE]\nRelationships in relational databases are typically modeled as foreign key values that refer to primary keys in other tables. To navigate between them you explicitly associate the two tables by using a relational *join* operation.","leadings":["","    >  "],"nodes":[{"content":"Relationships in relational databases are typically modeled as foreign key values that refer to primary keys in other tables. To navigate between them you explicitly associate the two tables by using a relational *join* operation.","pos":[8,238],"nodes":[{"content":"Relationships in relational databases are typically modeled as foreign key values that refer to primary keys in other tables.","pos":[0,125]},{"content":"To navigate between them you explicitly associate the two tables by using a relational <bpt id=\"p1\">*</bpt>join<ept id=\"p1\">*</ept> operation.","pos":[126,230],"source":" To navigate between them you explicitly associate the two tables by using a relational *join* operation."}]}]},{"pos":[3399,3618],"content":"Objects in <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph>, on the other hand, refer to each other by using property references or collections of references that you navigate by using <bpt id=\"p1\">*</bpt>dot<ept id=\"p1\">*</ept> notation.","source":"Objects in [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], on the other hand, refer to each other by using property references or collections of references that you navigate by using *dot* notation."},{"pos":[3627,3634],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"In the following one-to-many example, the <ph id=\"ph1\">`Customer`</ph> class has a property that declares the relationship between customers and their orders.","pos":[3638,3778],"source":"In the following one-to-many example, the `Customer` class has a property that declares the relationship between customers and their orders."},{"content":"The <ph id=\"ph1\">`Orders`</ph> property is of type <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph>.","pos":[3780,3851],"source":"  The `Orders` property is of type <xref:System.Data.Linq.EntitySet%601>."},{"content":"This type signifies that this relationship is one-to-many (one customer to many orders).","pos":[3852,3940]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Linq.Mapping.AssociationAttribute.OtherKey%2A&gt;</ph> property is used to describe how this association is accomplished, namely, by specifying the name of the property in the related class to be compared with this one.","pos":[3941,4174],"source":" The <xref:System.Data.Linq.Mapping.AssociationAttribute.OtherKey%2A> property is used to describe how this association is accomplished, namely, by specifying the name of the property in the related class to be compared with this one."},{"content":"In this example, the <ph id=\"ph1\">`CustomerID`</ph> property is compared, just as a database <bpt id=\"p1\">*</bpt>join<ept id=\"p1\">*</ept> would compare that column value.","pos":[4175,4289],"source":" In this example, the `CustomerID` property is compared, just as a database *join* would compare that column value."},{"pos":[4297,4547],"content":"[!NOTE]\n If you are using [!INCLUDE[vs_current_short](../../../../../../includes/vs-current-short-md.md)], you can use the [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] to create an association between classes.","leadings":["","> "],"nodes":[{"content":"If you are using <ph id=\"ph1\">[!INCLUDE[vs_current_short](../../../../../../includes/vs-current-short-md.md)]</ph>, you can use the <ph id=\"ph2\">[!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)]</ph> to create an association between classes.","pos":[9,248],"source":"If you are using [!INCLUDE[vs_current_short](../../../../../../includes/vs-current-short-md.md)], you can use the [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] to create an association between classes."}]},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>DlinqCustomize#3<ept id=\"p2\">](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqCustomize/cs/Program.cs#3)</ept><ept id=\"p1\">]</ept>","pos":[4554,4677],"source":"[!code-csharp[DlinqCustomize#3](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqCustomize/cs/Program.cs#3)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>DlinqCustomize#3<ept id=\"p2\">](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqCustomize/vb/Module1.vb#3)</ept><ept id=\"p1\">]</ept>","pos":[4679,4803],"source":"[!code-vb[DlinqCustomize#3](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqCustomize/vb/Module1.vb#3)]"},{"pos":[4812,4819],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"You can also reverse the situation.","pos":[4823,4858]},{"content":"Instead of using the <ph id=\"ph1\">`Customer`</ph> class to describe the association between customers and orders, you can use the <ph id=\"ph2\">`Order`</ph> class.","pos":[4859,4985],"source":" Instead of using the `Customer` class to describe the association between customers and orders, you can use the `Order` class."},{"content":"The <ph id=\"ph1\">`Order`</ph> class uses the <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntityRef%601&gt;</ph> type to describe the relationship back to the customer, as in the following code example.","pos":[4986,5140],"source":" The `Order` class uses the <xref:System.Data.Linq.EntityRef%601> type to describe the relationship back to the customer, as in the following code example."},{"pos":[5148,5392],"content":"[!NOTE]\n The <xref:System.Data.Linq.EntityRef%601> class supports *deferred loading*. For more information, *see* [Deferred versus Immediate Loading](../../../../../../docs/framework/data/adonet/sql/linq/deferred-versus-immediate-loading.md).","leadings":["","> "],"nodes":[{"content":"The <xref:System.Data.Linq.EntityRef%601> class supports *deferred loading*. For more information, *see* [Deferred versus Immediate Loading](../../../../../../docs/framework/data/adonet/sql/linq/deferred-versus-immediate-loading.md).","pos":[9,242],"nodes":[{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Linq.EntityRef%601&gt;</ph> class supports <bpt id=\"p1\">*</bpt>deferred loading<ept id=\"p1\">*</ept>.","pos":[0,76],"source":"The <xref:System.Data.Linq.EntityRef%601> class supports *deferred loading*."},{"content":"For more information, <bpt id=\"p1\">*</bpt>see<ept id=\"p1\">*</ept> <bpt id=\"p2\">[</bpt>Deferred versus Immediate Loading<ept id=\"p2\">](../../../../../../docs/framework/data/adonet/sql/linq/deferred-versus-immediate-loading.md)</ept>.","pos":[77,233],"source":" For more information, *see* [Deferred versus Immediate Loading](../../../../../../docs/framework/data/adonet/sql/linq/deferred-versus-immediate-loading.md)."}]}]},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>DLinqCustomize#5<ept id=\"p2\">](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqCustomize/cs/Program.cs#5)</ept><ept id=\"p1\">]</ept>","pos":[5399,5522],"source":"[!code-csharp[DLinqCustomize#5](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqCustomize/cs/Program.cs#5)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>DLinqCustomize#5<ept id=\"p2\">](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqCustomize/vb/Module1.vb#5)</ept><ept id=\"p1\">]</ept>","pos":[5524,5648],"source":"[!code-vb[DLinqCustomize#5](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqCustomize/vb/Module1.vb#5)]"},{"pos":[5657,5665],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>How to: Customize Entity Classes by Using the Code Editor<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/how-to-customize-entity-classes-by-using-the-code-editor.md)</ept><ph id=\"ph1\"> </ph>","pos":[5669,5844],"source":"[How to: Customize Entity Classes by Using the Code Editor](../../../../../../docs/framework/data/adonet/sql/linq/how-to-customize-entity-classes-by-using-the-code-editor.md) "},{"content":"<bpt id=\"p1\">[</bpt>The LINQ to SQL Object Model<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/the-linq-to-sql-object-model.md)</ept>","pos":[5848,5965],"source":"[The LINQ to SQL Object Model](../../../../../../docs/framework/data/adonet/sql/linq/the-linq-to-sql-object-model.md)"}]}