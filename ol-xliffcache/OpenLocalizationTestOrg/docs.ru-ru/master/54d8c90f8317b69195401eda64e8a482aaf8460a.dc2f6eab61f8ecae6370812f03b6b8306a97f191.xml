{"content":"---\ntitle: \"AJAX Service Using Complex Types Sample\"\nms.date: \"03/30/2017\"\nms.assetid: 88242b99-4811-4cbe-8201-52ddf48fb174\n---\n# AJAX Service Using Complex Types Sample\nThis sample demonstrates how to use Windows Communication Foundation (WCF) to create an ASP.NET Asynchronous JavaScript and XML (AJAX) service that creates instances of complex types and sends them between service and client as JavaScript Object Notation (JSON). You can access an AJAX service by using JavaScript code from a Web browser client. This sample builds on the [Basic AJAX Service](../../../../docs/framework/wcf/samples/basic-ajax-service.md) sample.  \n  \n AJAX support in WCF is optimized for use with ASP.NET AJAX through the <xref:System.Web.UI.ScriptManager> control. For an example of using WCF with ASP.NET AJAX, see the [AJAX Samples](ajax.md).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The service in the following sample is a WCF service with no AJAX-specific code. Because the <xref:System.ServiceModel.Web.WebGetAttribute> attribute is not applied, the default HTTP verb (\"POST\") is used. The service has one operation, `DoMath`, which returns a complex type named `MathResult`. The complex type is a standard data contract type, which also contains no AJAX-specific code.  \n\n```csharp\n[DataContract]  \npublic class MathResult  \n{  \n    [DataMember]  \n    public double sum;  \n    [DataMember]  \n    public double difference;  \n    [DataMember]  \n    public double product;  \n    [DataMember]  \n    public double quotient;  \n}  \n```\n\n Create an AJAX endpoint on the service by using the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory>, just as in the Basic AJAX Service sample.  \n  \n The client Web page ComplexTypeClientPage.aspx contains ASP.NET and JavaScript code to invoke the service when the user clicks the **Perform calculation** button on the page. The code to invoke the service constructs a JSON body and sends it using HTTP POST, similar to the [AJAX Service Using HTTP POST](../../../../docs/framework/wcf/samples/ajax-service-using-http-post.md) sample.  \n  \n After the service call succeeds, you can access the individual data members (`sum`, `difference`, `product` and `quotient`) on the resulting JavaScript object.  \n\n```javascript\nfunction onSuccess(mathResult){  \n     document.getElementById(\"sum\").value = mathResult.sum;  \n     document.getElementById(\"difference\").value = mathResult.difference;  \n     document.getElementById(\"product\").value = mathResult.product;  \n     document.getElementById(\"quotient\").value = mathResult.quotient;  \n}  \n```\n\n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  Build the solution ComplexTypeAjaxService.sln as described in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  Navigate to `http://localhost/ServiceModelSamples/ComplexTypeClientPage.aspx` (do not open ComplexTypeClientPage.aspx in the browser from the project directory).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Ajax\\ComplexTypeAjaxService`  \n  \n## See also\n\n- [Basic AJAX Service](../../../../docs/framework/wcf/samples/basic-ajax-service.md)\n","nodes":[{"pos":[4,123],"embed":true,"restype":"x-metadata","content":"title: \"AJAX Service Using Complex Types Sample\"\nms.date: \"03/30/2017\"\nms.assetid: 88242b99-4811-4cbe-8201-52ddf48fb174","nodes":[{"content":"AJAX Service Using Complex Types Sample","nodes":[{"pos":[0,39],"content":"AJAX Service Using Complex Types Sample","nodes":[{"content":"AJAX Service Using Complex Types Sample","pos":[0,39]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[130,169],"content":"AJAX Service Using Complex Types Sample","linkify":"AJAX Service Using Complex Types Sample","nodes":[{"content":"AJAX Service Using Complex Types Sample","pos":[0,39]}]},{"content":"This sample demonstrates how to use Windows Communication Foundation (WCF) to create an ASP.NET Asynchronous JavaScript and XML (AJAX) service that creates instances of complex types and sends them between service and client as JavaScript Object Notation (JSON).","pos":[170,432]},{"content":"You can access an AJAX service by using JavaScript code from a Web browser client.","pos":[433,515]},{"content":"This sample builds on the <bpt id=\"p1\">[</bpt>Basic AJAX Service<ept id=\"p1\">](../../../../docs/framework/wcf/samples/basic-ajax-service.md)</ept> sample.","pos":[516,632],"source":" This sample builds on the [Basic AJAX Service](../../../../docs/framework/wcf/samples/basic-ajax-service.md) sample."},{"content":"AJAX support in WCF is optimized for use with ASP.NET AJAX through the <ph id=\"ph1\">&lt;xref:System.Web.UI.ScriptManager&gt;</ph> control.","pos":[639,753],"source":"AJAX support in WCF is optimized for use with ASP.NET AJAX through the <xref:System.Web.UI.ScriptManager> control."},{"content":"For an example of using WCF with ASP.NET AJAX, see the <bpt id=\"p1\">[</bpt>AJAX Samples<ept id=\"p1\">](ajax.md)</ept>.","pos":[754,833],"source":" For an example of using WCF with ASP.NET AJAX, see the [AJAX Samples](ajax.md)."},{"pos":[841,948],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The service in the following sample is a WCF service with no AJAX-specific code.","pos":[955,1035]},{"content":"Because the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebGetAttribute&gt;</ph> attribute is not applied, the default HTTP verb (\"POST\") is used.","pos":[1036,1160],"source":" Because the <xref:System.ServiceModel.Web.WebGetAttribute> attribute is not applied, the default HTTP verb (\"POST\") is used."},{"content":"The service has one operation, <ph id=\"ph1\">`DoMath`</ph>, which returns a complex type named <ph id=\"ph2\">`MathResult`</ph>.","pos":[1161,1250],"source":" The service has one operation, `DoMath`, which returns a complex type named `MathResult`."},{"content":"The complex type is a standard data contract type, which also contains no AJAX-specific code.","pos":[1251,1344]},{"pos":[1607,1767],"content":"Create an AJAX endpoint on the service by using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph>, just as in the Basic AJAX Service sample.","source":"Create an AJAX endpoint on the service by using the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory>, just as in the Basic AJAX Service sample."},{"content":"The client Web page ComplexTypeClientPage.aspx contains ASP.NET and JavaScript code to invoke the service when the user clicks the <bpt id=\"p1\">**</bpt>Perform calculation<ept id=\"p1\">**</ept> button on the page.","pos":[1774,1948],"source":"The client Web page ComplexTypeClientPage.aspx contains ASP.NET and JavaScript code to invoke the service when the user clicks the **Perform calculation** button on the page."},{"content":"The code to invoke the service constructs a JSON body and sends it using HTTP POST, similar to the <bpt id=\"p1\">[</bpt>AJAX Service Using HTTP POST<ept id=\"p1\">](../../../../docs/framework/wcf/samples/ajax-service-using-http-post.md)</ept> sample.","pos":[1949,2158],"source":" The code to invoke the service constructs a JSON body and sends it using HTTP POST, similar to the [AJAX Service Using HTTP POST](../../../../docs/framework/wcf/samples/ajax-service-using-http-post.md) sample."},{"pos":[2165,2324],"content":"After the service call succeeds, you can access the individual data members (<ph id=\"ph1\">`sum`</ph>, <ph id=\"ph2\">`difference`</ph>, <ph id=\"ph3\">`product`</ph> and <ph id=\"ph4\">`quotient`</ph>) on the resulting JavaScript object.","source":"After the service call succeeds, you can access the individual data members (`sum`, `difference`, `product` and `quotient`) on the resulting JavaScript object."},{"pos":[2669,2705],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2715,2914],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[2924,3106],"content":"Build the solution ComplexTypeAjaxService.sln as described in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"Build the solution ComplexTypeAjaxService.sln as described in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3116,3277],"content":"Navigate to <ph id=\"ph1\">`http://localhost/ServiceModelSamples/ComplexTypeClientPage.aspx`</ph> (do not open ComplexTypeClientPage.aspx in the browser from the project directory).","source":"Navigate to `http://localhost/ServiceModelSamples/ComplexTypeClientPage.aspx` (do not open ComplexTypeClientPage.aspx in the browser from the project directory)."},{"pos":[3285,3418],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[14,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[0,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3472,3782],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3783,3833]},{"pos":[3923,3931],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3935,4017],"content":"<bpt id=\"p1\">[</bpt>Basic AJAX Service<ept id=\"p1\">](../../../../docs/framework/wcf/samples/basic-ajax-service.md)</ept>","source":"[Basic AJAX Service](../../../../docs/framework/wcf/samples/basic-ajax-service.md)"}]}