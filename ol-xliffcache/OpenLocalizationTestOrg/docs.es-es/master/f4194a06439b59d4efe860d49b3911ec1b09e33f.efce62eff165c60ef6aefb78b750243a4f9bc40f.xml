{"content":"---\ntitle: \"AspNetRouteIntegration | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 0638ce0e-d053-47df-a447-688e447a03fb\ncaps.latest.revision: 8\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# AspNetRouteIntegration\nThis sample demonstrates how to host a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] REST service using ASP.NET routes. The [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample shows a self-hosted version of this scenario and discusses the service implementation in depth. This topic focuses on the ASP.NET integration feature. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] ASP.NET Routing, see <xref:System.Web.Routing>.  \n  \n## Sample Details  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service exposes a collection of customers in a resource-oriented/REST manner. Just like a SOAP-based [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, the service can be hosted in ASP.NET using a .svc file. However, this is often not preferred for HTTP scenarios because it requires having .svc in the URL for the service. In addition, it requires deploying a .svc file along with the service library. These limitations can be avoided by hosting the service using ASP.NET routes, as is demonstrated in this sample.  \n  \n The sample hosts the service in ASP.NET by adding a <xref:System.ServiceModel.Activation.ServiceRoute> in a Global.asax file. The <xref:System.ServiceModel.Activation.ServiceRoute> specifies the type of the service (‘Service’ in this case), the type of the service host factory to use for the service (<xref:System.ServiceModel.Activation.WebServiceHostFactory> in this case) and the HTTP base address for the service (‘~/Customers’ in this case).  \n  \n In addition to this, the sample includes a Web.config that adds the <xref:System.Web.Routing.UrlRoutingModule> (to turn on ASP.NET routes) and includes the configuration for the service. In particular, the configuration configures the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service with a default <xref:System.ServiceModel.Description.WebHttpEndpoint> that has the <xref:System.ServiceModel.Description.WebHttpEndpoint.HelpEnabled%2A> setting to `true`. As a result, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastructure creates an automatic HTML based help page at `http://localhost/Customers/help` that provides information about how to construct HTTP requests to the service and how to access the service’s HTTP response – for instance, an example of how the customer details are represented in XML and JSON.  \n  \n Exposing the customer collection (and more generally, any resource) in this manner allows a client to interact with a service in a uniform way using URIs and HTTP `GET`, `PUT`, `DELETE` and `POST`.  \n  \n Program.cs in the Client project demonstrates how such a client can be authored using <xref:System.Net.HttpWebRequest>. Note that this is just one way to access a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service. It is also possible to access the service using other .NET Framework classes like the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel factory and <xref:System.Net.WebClient>. Other samples in the SDK (such as the [Basic HTTP Service](../../../../docs/framework/wcf/samples/basic-http-service.md) sample and the [Automatic Format Selection](../../../../docs/framework/wcf/samples/automatic-format-selection.md) sample) show how to use these classes to communicate with a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.  \n  \n This sample consists of 3 projects:  \n  \n Service  \n A Web application project that includes a WCF HTTP service hosted in ASP.NET.  \n  \n Client  \n A console application project that makes calls to the service.  \n  \n Common  \n A shared library that contains the `Customer` type used by the client and service. As the client console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.  \n  \n#### To use this sample  \n  \n1.  Open the solution for the ASP.NET Routes Integration sample in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].  \n  \n2.  Press CTRL+SHIFT+B to build the solution.  \n  \n3.  If it is not already open, press \"CTRL+W, S\" to open the **Solution Explorer** window.  \n  \n4.  From the **Solution Explorer** windows, right-click the **Service** project and place the cursor over the **Debug** context menu option so that the **Start New Instance** context menu appears and select **Start New Instance**.  This launches the ASP.NET development server, which hosts the service.  \n  \n5.  From the **Solution Explorer** windows, right-click the **Client** project and place the cursor over the **Debug** context menu option so that the **Start New Instance** context menu appears and select **Start New Instance**.  \n  \n6.  The client console window appears and provides the URI of the running service and the URI of the HTML help page for the running service. At any point in time you can view the HTML help page by typing the URI of the help page in a browser. As the sample runs, the client writes the status of the current activity.  \n  \n7.  Press any key to terminate the client console application.  \n  \n8.  Press Shift+F5 to stop debugging the service and in the Windows Notification Area, right-click the ASP.NET development server icon and select **Stop** from the context menu.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Web\\AspNetRouteIntegration`  \n  \n## See Also","nodes":[{"pos":[12,51],"content":"AspNetRouteIntegration | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"AspNetRouteIntegration | Microsoft Docs","pos":[0,39]}]},{"pos":[349,371],"content":"AspNetRouteIntegration","linkify":"AspNetRouteIntegration","nodes":[{"content":"AspNetRouteIntegration","pos":[0,22]}]},{"content":"This sample demonstrates how to host a <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> REST service using ASP.NET routes.","pos":[372,501],"source":"This sample demonstrates how to host a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] REST service using ASP.NET routes."},{"content":"The <bpt id=\"p1\">[</bpt>Basic Resource Service<ept id=\"p1\">](../../../../docs/framework/wcf/samples/basic-resource-service.md)</ept> sample shows a self-hosted version of this scenario and discusses the service implementation in depth.","pos":[502,699],"source":" The [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample shows a self-hosted version of this scenario and discusses the service implementation in depth."},{"content":"This topic focuses on the ASP.NET integration feature.","pos":[700,754]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> ASP.NET Routing, see <ph id=\"ph2\">&lt;xref:System.Web.Routing&gt;</ph>.","pos":[755,858],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] ASP.NET Routing, see <xref:System.Web.Routing>."},{"pos":[867,881],"content":"Sample Details","linkify":"Sample Details","nodes":[{"content":"Sample Details","pos":[0,14]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service exposes a collection of customers in a resource-oriented/REST manner.","pos":[885,1022],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service exposes a collection of customers in a resource-oriented/REST manner."},{"content":"Just like a SOAP-based <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service, the service can be hosted in ASP.NET using a .svc file.","pos":[1023,1166],"source":" Just like a SOAP-based [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, the service can be hosted in ASP.NET using a .svc file."},{"content":"However, this is often not preferred for HTTP scenarios because it requires having .svc in the URL for the service.","pos":[1167,1282]},{"content":"In addition, it requires deploying a .svc file along with the service library.","pos":[1283,1361]},{"content":"These limitations can be avoided by hosting the service using ASP.NET routes, as is demonstrated in this sample.","pos":[1362,1474]},{"content":"The sample hosts the service in ASP.NET by adding a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.ServiceRoute&gt;</ph> in a Global.asax file.","pos":[1481,1606],"source":"The sample hosts the service in ASP.NET by adding a <xref:System.ServiceModel.Activation.ServiceRoute> in a Global.asax file."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.ServiceRoute&gt;</ph> specifies the type of the service (‘Service’ in this case), the type of the service host factory to use for the service (<ph id=\"ph2\">&lt;xref:System.ServiceModel.Activation.WebServiceHostFactory&gt;</ph> in this case) and the HTTP base address for the service (‘~/Customers’ in this case).","pos":[1607,1928],"source":" The <xref:System.ServiceModel.Activation.ServiceRoute> specifies the type of the service (‘Service’ in this case), the type of the service host factory to use for the service (<xref:System.ServiceModel.Activation.WebServiceHostFactory> in this case) and the HTTP base address for the service (‘~/Customers’ in this case)."},{"content":"In addition to this, the sample includes a Web.config that adds the <ph id=\"ph1\">&lt;xref:System.Web.Routing.UrlRoutingModule&gt;</ph> (to turn on ASP.NET routes) and includes the configuration for the service.","pos":[1935,2121],"source":"In addition to this, the sample includes a Web.config that adds the <xref:System.Web.Routing.UrlRoutingModule> (to turn on ASP.NET routes) and includes the configuration for the service."},{"content":"In particular, the configuration configures the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service with a default <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.WebHttpEndpoint&gt;</ph> that has the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.WebHttpEndpoint.HelpEnabled%2A&gt;</ph> setting to <ph id=\"ph4\">`true`</ph>.","pos":[2122,2405],"source":" In particular, the configuration configures the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service with a default <xref:System.ServiceModel.Description.WebHttpEndpoint> that has the <xref:System.ServiceModel.Description.WebHttpEndpoint.HelpEnabled%2A> setting to `true`."},{"content":"As a result, the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> infrastructure creates an automatic HTML based help page at <ph id=\"ph2\">`http://localhost/Customers/help`</ph> that provides information about how to construct HTTP requests to the service and how to access the service’s HTTP response – for instance, an example of how the customer details are represented in XML and JSON.","pos":[2406,2784],"source":" As a result, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastructure creates an automatic HTML based help page at `http://localhost/Customers/help` that provides information about how to construct HTTP requests to the service and how to access the service’s HTTP response – for instance, an example of how the customer details are represented in XML and JSON."},{"pos":[2791,2988],"content":"Exposing the customer collection (and more generally, any resource) in this manner allows a client to interact with a service in a uniform way using URIs and HTTP <ph id=\"ph1\">`GET`</ph>, <ph id=\"ph2\">`PUT`</ph>, <ph id=\"ph3\">`DELETE`</ph> and <ph id=\"ph4\">`POST`</ph>.","source":"Exposing the customer collection (and more generally, any resource) in this manner allows a client to interact with a service in a uniform way using URIs and HTTP `GET`, `PUT`, `DELETE` and `POST`."},{"content":"Program.cs in the Client project demonstrates how such a client can be authored using <ph id=\"ph1\">&lt;xref:System.Net.HttpWebRequest&gt;</ph>.","pos":[2995,3114],"source":"Program.cs in the Client project demonstrates how such a client can be authored using <xref:System.Net.HttpWebRequest>."},{"content":"Note that this is just one way to access a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service.","pos":[3115,3222],"source":" Note that this is just one way to access a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service."},{"content":"It is also possible to access the service using other .NET Framework classes like the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> channel factory and <ph id=\"ph2\">&lt;xref:System.Net.WebClient&gt;</ph>.","pos":[3223,3413],"source":" It is also possible to access the service using other .NET Framework classes like the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel factory and <xref:System.Net.WebClient>."},{"content":"Other samples in the SDK (such as the <bpt id=\"p1\">[</bpt>Basic HTTP Service<ept id=\"p1\">](../../../../docs/framework/wcf/samples/basic-http-service.md)</ept> sample and the <bpt id=\"p2\">[</bpt>Automatic Format Selection<ept id=\"p2\">](../../../../docs/framework/wcf/samples/automatic-format-selection.md)</ept> sample) show how to use these classes to communicate with a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service.","pos":[3414,3773],"source":" Other samples in the SDK (such as the [Basic HTTP Service](../../../../docs/framework/wcf/samples/basic-http-service.md) sample and the [Automatic Format Selection](../../../../docs/framework/wcf/samples/automatic-format-selection.md) sample) show how to use these classes to communicate with a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service."},{"content":"This sample consists of 3 projects:","pos":[3780,3815]},{"content":"Service","pos":[3822,3829]},{"content":"A Web application project that includes a WCF HTTP service hosted in ASP.NET.","pos":[3833,3910]},{"content":"Client","pos":[3917,3923]},{"content":"A console application project that makes calls to the service.","pos":[3927,3989]},{"content":"Common","pos":[3996,4002]},{"content":"A shared library that contains the <ph id=\"ph1\">`Customer`</ph> type used by the client and service.","pos":[4006,4088],"source":" A shared library that contains the `Customer` type used by the client and service."},{"content":"As the client console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.","pos":[4089,4248]},{"pos":[4259,4277],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[4287,4422],"content":"Open the solution for the ASP.NET Routes Integration sample in <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>.","source":"Open the solution for the ASP.NET Routes Integration sample in [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]."},{"content":"Press CTRL+SHIFT+B to build the solution.","pos":[4432,4473]},{"pos":[4483,4569],"content":"If it is not already open, press \"CTRL+W, S\" to open the <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> window.","source":"If it is not already open, press \"CTRL+W, S\" to open the **Solution Explorer** window."},{"content":"From the <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> windows, right-click the <bpt id=\"p2\">**</bpt>Service<ept id=\"p2\">**</ept> project and place the cursor over the <bpt id=\"p3\">**</bpt>Debug<ept id=\"p3\">**</ept> context menu option so that the <bpt id=\"p4\">**</bpt>Start New Instance<ept id=\"p4\">**</ept> context menu appears and select <bpt id=\"p5\">**</bpt>Start New Instance<ept id=\"p5\">**</ept>.","pos":[4579,4805],"source":"From the **Solution Explorer** windows, right-click the **Service** project and place the cursor over the **Debug** context menu option so that the **Start New Instance** context menu appears and select **Start New Instance**."},{"content":"This launches the ASP.NET development server, which hosts the service.","pos":[4807,4877]},{"pos":[4887,5112],"content":"From the <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> windows, right-click the <bpt id=\"p2\">**</bpt>Client<ept id=\"p2\">**</ept> project and place the cursor over the <bpt id=\"p3\">**</bpt>Debug<ept id=\"p3\">**</ept> context menu option so that the <bpt id=\"p4\">**</bpt>Start New Instance<ept id=\"p4\">**</ept> context menu appears and select <bpt id=\"p5\">**</bpt>Start New Instance<ept id=\"p5\">**</ept>.","source":"From the **Solution Explorer** windows, right-click the **Client** project and place the cursor over the **Debug** context menu option so that the **Start New Instance** context menu appears and select **Start New Instance**."},{"content":"The client console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.","pos":[5122,5258]},{"content":"At any point in time you can view the HTML help page by typing the URI of the help page in a browser.","pos":[5259,5360]},{"content":"As the sample runs, the client writes the status of the current activity.","pos":[5361,5434]},{"content":"Press any key to terminate the client console application.","pos":[5444,5502]},{"pos":[5512,5685],"content":"Press Shift+F5 to stop debugging the service and in the Windows Notification Area, right-click the ASP.NET development server icon and select <bpt id=\"p1\">**</bpt>Stop<ept id=\"p1\">**</ept> from the context menu.","source":"Press Shift+F5 to stop debugging the service and in the Windows Notification Area, right-click the ASP.NET development server icon and select **Stop** from the context menu."},{"pos":[5693,5825],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5879,6205],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[6206,6256]},{"pos":[6345,6353],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}