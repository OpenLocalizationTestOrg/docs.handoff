{"content":"---\ntitle: \"Bookmarks1\"\nms.date: \"03/30/2017\"\nms.assetid: 9b51a346-09ae-455c-a70a-e2264ddeb9e2\n---\n# Bookmarks\nBookmarks are the mechanism that enables an activity to passively wait for input without holding onto a workflow thread. When an activity signals that it is waiting for stimulus, it can create a bookmark. This indicates to the runtime that the activity’s execution should not be considered complete even when the currently executing method (which created the <xref:System.Activities.Bookmark>) returns.  \n  \n## Bookmark Basics  \n A <xref:System.Activities.Bookmark> represents a point at which execution can be resumed (and through which input can be delivered) within a workflow instance. Typically, a <xref:System.Activities.Bookmark> is given a name and external (host or extension) code is responsible for resuming the bookmark with relevant data. When a <xref:System.Activities.Bookmark> is resumed, the workflow runtime schedules the <xref:System.Activities.BookmarkCallback> delegate that was associated with that <xref:System.Activities.Bookmark> at the time of its creation.  \n  \n## Bookmark Options  \n The <xref:System.Activities.BookmarkOptions> class specifies the type of <xref:System.Activities.Bookmark> being created. The possible non mutually-exclusive values are <xref:System.Activities.BookmarkOptions.None>, <xref:System.Activities.BookmarkOptions.MultipleResume>, and <xref:System.Activities.BookmarkOptions.NonBlocking>. Use <xref:System.Activities.BookmarkOptions.None>, the default, when creating a <xref:System.Activities.Bookmark> that is expected to be resumed exactly once. Use <xref:System.Activities.BookmarkOptions.MultipleResume> when creating a <xref:System.Activities.Bookmark> that can be resumed multiple times. Use <xref:System.Activities.BookmarkOptions.NonBlocking> when creating a <xref:System.Activities.Bookmark> that might never be resumed. Unlike bookmarks created using the default <xref:System.Activities.BookmarkOptions>, <xref:System.Activities.BookmarkOptions.NonBlocking> bookmarks do not prevent an activity from completing.  \n  \n## Bookmark Resumption  \n Bookmarks can be resumed by code outside of a workflow using one of the <xref:System.Activities.WorkflowApplication.ResumeBookmark%2A> overloads. In this example, a `ReadLine` activity is created. When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed. When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument.  \n  \n```csharp  \npublic sealed class ReadLine : NativeActivity<string>  \n{  \n    [RequiredArgument]  \n    public  InArgument<string> BookmarkName { get; set; }  \n  \n    protected override void Execute(NativeActivityContext context)  \n    {  \n        // Create a Bookmark and wait for it to be resumed.  \n        context.CreateBookmark(BookmarkName.Get(context),   \n            new BookmarkCallback(OnResumeBookmark));  \n    }  \n  \n    // NativeActivity derived activities that do asynchronous operations by calling   \n    // one of the CreateBookmark overloads defined on System.Activities.NativeActivityContext   \n    // must override the CanInduceIdle property and return true.  \n    protected override bool CanInduceIdle  \n    {  \n        get { return true; }  \n    }  \n  \n    public void OnResumeBookmark(NativeActivityContext context, Bookmark bookmark, object obj)  \n    {  \n        // When the Bookmark is resumed, assign its value to  \n        // the Result argument.  \n        Result.Set(context, (string)obj);  \n    }  \n}  \n```  \n  \n In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window. The host application performs the actual work of gathering the input and passes it to the workflow by resuming the <xref:System.Activities.Bookmark>.  \n  \n```csharp  \nVariable<string> name = new Variable<string>  \n{  \n    Name = \"name\"  \n};  \n  \nActivity wf = new Sequence  \n{  \n    Variables =  \n    {  \n        name  \n    },  \n    Activities =  \n    {  \n        new WriteLine()  \n        {  \n            Text = \"What is your name?\"  \n        },  \n        new ReadLine()  \n        {  \n            BookmarkName = \"UserName\",  \n            Result = name  \n        },  \n        new WriteLine()  \n        {  \n            Text = new InArgument<string>((env) => \"Hello, \" + name.Get(env))  \n        }  \n    }  \n};  \n  \nAutoResetEvent syncEvent = new AutoResetEvent(false);  \n  \n// Create the WorkflowApplication using the desired  \n// workflow definition.  \nWorkflowApplication wfApp = new WorkflowApplication(wf);  \n  \n// Handle the desired lifecycle events.  \nwfApp.Completed = delegate(WorkflowApplicationCompletedEventArgs e)  \n{  \n    // Signal the host that the workflow is complete.  \n    syncEvent.Set();  \n};  \n  \n// Start the workflow.  \nwfApp.Run();  \n  \n// Collect the user's name and resume the bookmark.  \n// Bookmark resumption only occurs when the workflow  \n// is idle. If a call to ResumeBookmark is made and the workflow  \n// is not idle, ResumeBookmark blocks until the workflow becomes  \n// idle before resuming the bookmark.  \nwfApp.ResumeBookmark(\"UserName\", Console.ReadLine());  \n  \n// Wait for Completed to arrive and signal that  \n// the workflow is complete.  \nsyncEvent.WaitOne();  \n```  \n  \n When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed. The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>. The workflow resumes, displays the name, and then completes. Note that no synchronization code is required with regard to resuming the bookmark. A <xref:System.Activities.Bookmark> can only be resumed when the workflow is idle, and if the workflow is not idle, the call to <xref:System.Activities.WorkflowApplication.ResumeBookmark%2A> blocks until the workflow becomes idle.  \n  \n## Bookmark Resumption Result  \n <xref:System.Activities.WorkflowApplication.ResumeBookmark%2A> returns a <xref:System.Activities.BookmarkResumptionResult> enumeration value to indicate the results of the bookmark resumption request. The possible return values are <xref:System.Activities.BookmarkResumptionResult.Success>, <xref:System.Activities.BookmarkResumptionResult.NotReady>, and <xref:System.Activities.BookmarkResumptionResult.NotFound>. Hosts and extensions can use this value to determine how to proceed.\n","nodes":[{"pos":[4,94],"embed":true,"restype":"x-metadata","content":"title: \"Bookmarks1\"\nms.date: \"03/30/2017\"\nms.assetid: 9b51a346-09ae-455c-a70a-e2264ddeb9e2","nodes":[{"content":"Bookmarks1","nodes":[{"pos":[0,10],"content":"Bookmarks1","nodes":[{"content":"Bookmarks1","pos":[0,10]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[101,110],"content":"Bookmarks","linkify":"Bookmarks","nodes":[{"content":"Bookmarks","pos":[0,9]}]},{"content":"Bookmarks are the mechanism that enables an activity to passively wait for input without holding onto a workflow thread.","pos":[111,231]},{"content":"When an activity signals that it is waiting for stimulus, it can create a bookmark.","pos":[232,315]},{"content":"This indicates to the runtime that the activity’s execution should not be considered complete even when the currently executing method (which created the <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph>) returns.","pos":[316,513],"source":" This indicates to the runtime that the activity’s execution should not be considered complete even when the currently executing method (which created the <xref:System.Activities.Bookmark>) returns."},{"pos":[522,537],"content":"Bookmark Basics","linkify":"Bookmark Basics","nodes":[{"content":"Bookmark Basics","pos":[0,15]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph> represents a point at which execution can be resumed (and through which input can be delivered) within a workflow instance.","pos":[541,700],"source":"A <xref:System.Activities.Bookmark> represents a point at which execution can be resumed (and through which input can be delivered) within a workflow instance."},{"content":"Typically, a <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph> is given a name and external (host or extension) code is responsible for resuming the bookmark with relevant data.","pos":[701,862],"source":" Typically, a <xref:System.Activities.Bookmark> is given a name and external (host or extension) code is responsible for resuming the bookmark with relevant data."},{"content":"When a <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph> is resumed, the workflow runtime schedules the <ph id=\"ph2\">&lt;xref:System.Activities.BookmarkCallback&gt;</ph> delegate that was associated with that <ph id=\"ph3\">&lt;xref:System.Activities.Bookmark&gt;</ph> at the time of its creation.","pos":[863,1094],"source":" When a <xref:System.Activities.Bookmark> is resumed, the workflow runtime schedules the <xref:System.Activities.BookmarkCallback> delegate that was associated with that <xref:System.Activities.Bookmark> at the time of its creation."},{"pos":[1103,1119],"content":"Bookmark Options","linkify":"Bookmark Options","nodes":[{"content":"Bookmark Options","pos":[0,16]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkOptions&gt;</ph> class specifies the type of <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph> being created.","pos":[1123,1244],"source":"The <xref:System.Activities.BookmarkOptions> class specifies the type of <xref:System.Activities.Bookmark> being created."},{"content":"The possible non mutually-exclusive values are <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkOptions.None&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Activities.BookmarkOptions.MultipleResume&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Activities.BookmarkOptions.NonBlocking&gt;</ph>.","pos":[1245,1453],"source":" The possible non mutually-exclusive values are <xref:System.Activities.BookmarkOptions.None>, <xref:System.Activities.BookmarkOptions.MultipleResume>, and <xref:System.Activities.BookmarkOptions.NonBlocking>."},{"content":"Use <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkOptions.None&gt;</ph>, the default, when creating a <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph> that is expected to be resumed exactly once.","pos":[1454,1612],"source":" Use <xref:System.Activities.BookmarkOptions.None>, the default, when creating a <xref:System.Activities.Bookmark> that is expected to be resumed exactly once."},{"content":"Use <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkOptions.MultipleResume&gt;</ph> when creating a <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph> that can be resumed multiple times.","pos":[1613,1758],"source":" Use <xref:System.Activities.BookmarkOptions.MultipleResume> when creating a <xref:System.Activities.Bookmark> that can be resumed multiple times."},{"content":"Use <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkOptions.NonBlocking&gt;</ph> when creating a <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph> that might never be resumed.","pos":[1759,1894],"source":" Use <xref:System.Activities.BookmarkOptions.NonBlocking> when creating a <xref:System.Activities.Bookmark> that might never be resumed."},{"content":"Unlike bookmarks created using the default <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkOptions&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Activities.BookmarkOptions.NonBlocking&gt;</ph> bookmarks do not prevent an activity from completing.","pos":[1895,2086],"source":" Unlike bookmarks created using the default <xref:System.Activities.BookmarkOptions>, <xref:System.Activities.BookmarkOptions.NonBlocking> bookmarks do not prevent an activity from completing."},{"pos":[2095,2114],"content":"Bookmark Resumption","linkify":"Bookmark Resumption","nodes":[{"content":"Bookmark Resumption","pos":[0,19]}]},{"content":"Bookmarks can be resumed by code outside of a workflow using one of the <ph id=\"ph1\">&lt;xref:System.Activities.WorkflowApplication.ResumeBookmark%2A&gt;</ph> overloads.","pos":[2118,2263],"source":"Bookmarks can be resumed by code outside of a workflow using one of the <xref:System.Activities.WorkflowApplication.ResumeBookmark%2A> overloads."},{"content":"In this example, a <ph id=\"ph1\">`ReadLine`</ph> activity is created.","pos":[2264,2314],"source":" In this example, a `ReadLine` activity is created."},{"content":"When executed, the <ph id=\"ph1\">`ReadLine`</ph> activity creates a <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph>, registers a callback, and then waits for the <ph id=\"ph3\">&lt;xref:System.Activities.Bookmark&gt;</ph> to be resumed.","pos":[2315,2492],"source":" When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed."},{"content":"When it is resumed, the <ph id=\"ph1\">`ReadLine`</ph> activity assigns the data that was passed with the <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph> to its <ph id=\"ph3\">&lt;xref:System.Activities.Activity%601.Result%2A&gt;</ph> argument.","pos":[2493,2677],"source":" When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument."},{"content":"In this example, a workflow is created that uses the <ph id=\"ph1\">`ReadLine`</ph> activity to gather the user’s name and display it to the console window.","pos":[3722,3858],"source":"In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window."},{"content":"The host application performs the actual work of gathering the input and passes it to the workflow by resuming the <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph>.","pos":[3859,4008],"source":" The host application performs the actual work of gathering the input and passes it to the workflow by resuming the <xref:System.Activities.Bookmark>."},{"content":"When the <ph id=\"ph1\">`ReadLine`</ph> activity is executed, it creates a <ph id=\"ph2\">&lt;xref:System.Activities.Bookmark&gt;</ph> named <ph id=\"ph3\">`UserName`</ph> and then waits for the bookmark to be resumed.","pos":[5476,5628],"source":"When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed."},{"content":"The host collects the desired data and then resumes the <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph>.","pos":[5629,5719],"source":" The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>."},{"content":"The workflow resumes, displays the name, and then completes.","pos":[5720,5780]},{"content":"Note that no synchronization code is required with regard to resuming the bookmark.","pos":[5781,5864]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Bookmark&gt;</ph> can only be resumed when the workflow is idle, and if the workflow is not idle, the call to <ph id=\"ph2\">&lt;xref:System.Activities.WorkflowApplication.ResumeBookmark%2A&gt;</ph> blocks until the workflow becomes idle.","pos":[5865,6095],"source":" A <xref:System.Activities.Bookmark> can only be resumed when the workflow is idle, and if the workflow is not idle, the call to <xref:System.Activities.WorkflowApplication.ResumeBookmark%2A> blocks until the workflow becomes idle."},{"pos":[6104,6130],"content":"Bookmark Resumption Result","linkify":"Bookmark Resumption Result","nodes":[{"content":"Bookmark Resumption Result","pos":[0,26]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.WorkflowApplication.ResumeBookmark%2A&gt;</ph> returns a <ph id=\"ph2\">&lt;xref:System.Activities.BookmarkResumptionResult&gt;</ph> enumeration value to indicate the results of the bookmark resumption request.","pos":[6134,6334],"source":"<xref:System.Activities.WorkflowApplication.ResumeBookmark%2A> returns a <xref:System.Activities.BookmarkResumptionResult> enumeration value to indicate the results of the bookmark resumption request."},{"content":"The possible return values are <ph id=\"ph1\">&lt;xref:System.Activities.BookmarkResumptionResult.Success&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Activities.BookmarkResumptionResult.NotReady&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Activities.BookmarkResumptionResult.NotFound&gt;</ph>.","pos":[6335,6548],"source":" The possible return values are <xref:System.Activities.BookmarkResumptionResult.Success>, <xref:System.Activities.BookmarkResumptionResult.NotReady>, and <xref:System.Activities.BookmarkResumptionResult.NotFound>."},{"content":"Hosts and extensions can use this value to determine how to proceed.","pos":[6549,6617]}]}