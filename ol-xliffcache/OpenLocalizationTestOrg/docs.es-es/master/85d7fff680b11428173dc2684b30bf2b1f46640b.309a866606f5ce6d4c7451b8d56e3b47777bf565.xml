{"content":"---\ntitle: \"State Machine Workflows\"\nms.date: \"03/30/2017\"\nms.assetid: 344caacd-bf3b-4716-bd5a-eca74fc5a61d\n---\n# State Machine Workflows\nA state machine is a well-known paradigm for developing programs. The <xref:System.Activities.Statements.StateMachine> activity, along with <xref:System.Activities.Statements.State>, <xref:System.Activities.Statements.Transition>, and other activities can be used to build state machine workflow programs. This topic provides an overview of creating state machine workflows.  \n  \n## State Machine Workflow Overview  \n State machine workflows provide a modeling style with which you can model your workflow in an event-driven manner. A <xref:System.Activities.Statements.StateMachine> activity contains the states and transitions that make up the logic of the state machine, and can be used anywhere an activity can be used. There are several classes in the state machine runtime:  \n  \n-   <xref:System.Activities.Statements.StateMachine>  \n  \n-   <xref:System.Activities.Statements.State>  \n  \n-   <xref:System.Activities.Statements.Transition>  \n  \n To create a state machine workflow, states are added to a <xref:System.Activities.Statements.StateMachine> activity, and transitions are used control the flow between states. The following screenshot, from the [Getting Started Tutorial](getting-started-tutorial.md) step [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md), shows a state machine workflow with three states and three transitions. **Initialize Target** is the initial state and represents the first state in the workflow. This is designated by the line leading to it from the **Start** node. The final state in the workflow is named **FinalState**, and represents the point at which the workflow is completed.  \n  \n ![Completed State Machine Workflow](./media/wfstatemachinegettingstartedtutorialcomplete.JPG \"WFStateMachineGettingStartedTutorialComplete\")  \n  \n A state machine workflow must have one and only one initial state, and at least one final state. Each state that is not a final state must have at least one transition. The following sections cover creating and configuring states and transitions.  \n  \n## Creating and Configuring States  \n A <xref:System.Activities.Statements.State> represents a state in which a state machine can be in. To add a <xref:System.Activities.Statements.State> to a workflow, drag the **State** activity designer from the **State Machine** section of the **Toolbox** and drop it onto a <xref:System.Activities.Statements.StateMachine> activity on the [!INCLUDE[wfd1](../../../includes/wfd1-md.md)] surface.  \n  \n ![WF4 State Machine Activities](./media/netframework4platformupdate1statemachineactivities.jpg \"NETFramework4PlatformUpdate1StateMachineActivities\")  \n  \n To configure a state as the **Initial State**, right-click the state and select **Set as Initial State**. Additionally, if there is no current initial state, the initial state can be designated by dragging a line from the **Start** node at the top of the workflow to the desired state. When a <xref:System.Activities.Statements.StateMachine> activity is dropped onto the workflow designer, it is pre-configured with an initial state named **State1**. A state machine workflow must have one and only one initial state.  \n  \n A state that represents a terminating state in a state machine is called a final state. A final state is a state that has its <xref:System.Activities.Statements.State.IsFinal%2A> property set to `true`, has no <xref:System.Activities.Statements.State.Exit%2A> activity, and no transitions originating from it. To add a final state to a workflow, drag a **FinalState** activity designer from the **State Machine** section of the **Toolbox** and drop it onto a <xref:System.Activities.Statements.StateMachine> activity on the [!INCLUDE[wfd1](../../../includes/wfd1-md.md)] surface. A state machine workflow must have at least one final state.  \n  \n### Configuring Entry and Exit Actions  \n A state can have an <xref:System.Activities.Statements.State.Entry%2A> and an <xref:System.Activities.Statements.State.Exit%2A> action. (A state configured as a final state may have only an entry action). When a workflow instance enters a state, any activities in the entry action execute. When the entry action is complete, the triggers for the state’s transitions are scheduled. When a transition to another state is confirmed, the activities in the exit action are executed, even if the state transitions back to the same state. After the exit action completes, the activities in the transition’s action execute, and then the new state is transitioned to, and its entry actions are scheduled.  \n  \n> [!NOTE]\n>  When debugging a state machine workflow, breakpoints can be placed on the root state machine activity and states within the state machine workflow. Breakpoints may not be placed directly on the transitions, but they may be placed on any activities contained within the states and transitions.  \n  \n## Creating and Configuring Transitions  \n All states must have at least one transition, except for a final state which may not have any transitions. Transitions may be added after a state is added to a state machine workflow, or they can be created as the state is dropped.  \n  \n To add a <xref:System.Activities.Statements.State> and create a transition in one step, drag a **State** activity from the **State Machine** section of the **Toolbox** and hover it over another state in the workflow designer. When the dragged <xref:System.Activities.Statements.State> is over another <xref:System.Activities.Statements.State>, four triangles will appear around the other <xref:System.Activities.Statements.State>. If the <xref:System.Activities.Statements.State> is dropped onto one of the four triangles, it is added to the state machine and a transition is created from the source <xref:System.Activities.Statements.State> to the dropped destination <xref:System.Activities.Statements.State>. For more information, see [Transition Activity Designer](/visualstudio/workflow-designer/transition-activity-designer).  \n  \n To create a transition after a state is added, there are two options. The first option is to drag the state from the workflow designer surface and hover it over an existing state and drop it on one of the drop points. This is very similar to the method described in the previous section. You can also hover the mouse over the desired source state, and drag a line to the desired destination state.  \n  \n> [!NOTE]\n>  A single state in a state machine can have up to 76 transitions created using the workflow designer. The limit on transitions for a state for workflows created outside the designer is limited only by system resources.  \n  \n A transition may have a <xref:System.Activities.Statements.Transition.Trigger%2A>, a <xref:System.Activities.Statements.Transition.Condition%2A>, and an <xref:System.Activities.Statements.Transition.Action%2A>. A transition’s <xref:System.Activities.Statements.Transition.Trigger%2A> is scheduled when the transition’s source state’s <xref:System.Activities.Statements.State.Entry%2A> action is complete. Typically the <xref:System.Activities.Statements.Transition.Trigger%2A> is an activity that waits for some type of event to occur, but it can be any activity, or no activity at all. Once the <xref:System.Activities.Statements.Transition.Trigger%2A> activity is complete, the <xref:System.Activities.Statements.Transition.Condition%2A>, if present, is evaluated. If there is no <xref:System.Activities.Statements.Transition.Trigger%2A> activity then the <xref:System.Activities.Statements.Transition.Condition%2A> is immediately evaluated. If the condition evaluates to `false`, the transition is cancelled, and the <xref:System.Activities.Statements.Transition.Trigger%2A> activity for all transitions from the state are rescheduled. If there are other transitions that share the same source state as the current transition, those <xref:System.Activities.Statements.Transition.Trigger%2A> actions are cancelled and rescheduled as well. If the <xref:System.Activities.Statements.Transition.Condition%2A> evaluates to `true`, or there is no condition, then the <xref:System.Activities.Statements.State.Exit%2A> action of the source state is executed, and then the <xref:System.Activities.Statements.Transition.Action%2A> of the transition is executed. When the <xref:System.Activities.Statements.Transition.Action%2A> completes, control passes to the **Target** state  \n  \n Transitions that share a common trigger are known as shared trigger transitions. Each transition in a group of shared trigger transitions has the same trigger, but a unique <xref:System.Activities.Statements.Transition.Condition%2A> and Action. To add additional actions to a transition and create a shared transition, click the circle that indicates the start of the desired transition and drag it to the desired state. The new transition will share a same trigger as the initial transition, but it will have a unique condition and action. Shared transitions can also be created from within the transition designer by clicking **Add shared trigger transition** at the bottom of the transition designer, and then selecting the desired target state from the **Available states to connect** drop-down.  \n  \n> [!NOTE]\n>  Note that if the <xref:System.Activities.Statements.Transition.Condition%2A> of a transition evaluates to `False` (or all of the conditions of a shared trigger transition evaluate to `False`), the transition will not occur and all triggers for all the transitions from the state will be rescheduled.  \n  \n For more information on creating state machine workflows, see [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md), [StateMachine Activity Designer](/visualstudio/workflow-designer/statemachine-activity-designer), [State Activity Designer](/visualstudio/workflow-designer/state-activity-designer), [FinalState Activity Designer](/visualstudio/workflow-designer/finalstate-activity-designer), and [Transition Activity Designer](/visualstudio/workflow-designer/transition-activity-designer).  \n  \n## State Machine Terminology  \n This section defines the state machine vocabulary used throughout this topic.  \n  \n State  \n The basic unit that composes a state machine. A state machine can be in one state at any particular time.  \n  \n Entry Action  \n An activity executed when entering the state  \n  \n Exit Action  \n An activity executed when exiting the state  \n  \n Transition  \n A directed relationship between two states which represents the complete response of a state machine to an occurrence of an event of a particular type.  \n  \n Shared Transition  \n A transition that shares a source state and trigger with one or more transitions, but has a unique condition and action.  \n  \n Trigger  \n A triggering activity that causes a transition to occur.  \n  \n Condition  \n A constraint which must evaluate to `true` after the trigger occurs in order for the transition to complete.  \n  \n Transition Action  \n An activity which is executed when performing a certain transition.  \n  \n Conditional Transition  \n A transition with an explicit condition.  \n  \n Self-transition  \n A transition which transits from a state to itself.  \n  \n Initial State  \n A state which represents the starting point of the state machine.  \n  \n Final State  \n A state which represents the completion of the state machine.  \n  \n## See also\n\n- [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md)\n- [StateMachine Activity Designer](/visualstudio/workflow-designer/statemachine-activity-designer)\n- [State Activity Designer](/visualstudio/workflow-designer/state-activity-designer)\n- [FinalState Activity Designer](/visualstudio/workflow-designer/finalstate-activity-designer)\n- [Transition Activity Designer](/visualstudio/workflow-designer/transition-activity-designer)\n","nodes":[{"pos":[4,107],"embed":true,"restype":"x-metadata","content":"title: \"State Machine Workflows\"\nms.date: \"03/30/2017\"\nms.assetid: 344caacd-bf3b-4716-bd5a-eca74fc5a61d","nodes":[{"content":"State Machine Workflows","nodes":[{"pos":[0,23],"content":"State Machine Workflows","nodes":[{"content":"State Machine Workflows","pos":[0,23]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[114,137],"content":"State Machine Workflows","linkify":"State Machine Workflows","nodes":[{"content":"State Machine Workflows","pos":[0,23]}]},{"content":"A state machine is a well-known paradigm for developing programs.","pos":[138,203]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.StateMachine&gt;</ph> activity, along with <ph id=\"ph2\">&lt;xref:System.Activities.Statements.State&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Activities.Statements.Transition&gt;</ph>, and other activities can be used to build state machine workflow programs.","pos":[204,443],"source":" The <xref:System.Activities.Statements.StateMachine> activity, along with <xref:System.Activities.Statements.State>, <xref:System.Activities.Statements.Transition>, and other activities can be used to build state machine workflow programs."},{"content":"This topic provides an overview of creating state machine workflows.","pos":[444,512]},{"pos":[521,552],"content":"State Machine Workflow Overview","linkify":"State Machine Workflow Overview","nodes":[{"content":"State Machine Workflow Overview","pos":[0,31]}]},{"content":"State machine workflows provide a modeling style with which you can model your workflow in an event-driven manner.","pos":[556,670]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Statements.StateMachine&gt;</ph> activity contains the states and transitions that make up the logic of the state machine, and can be used anywhere an activity can be used.","pos":[671,861],"source":" A <xref:System.Activities.Statements.StateMachine> activity contains the states and transitions that make up the logic of the state machine, and can be used anywhere an activity can be used."},{"content":"There are several classes in the state machine runtime:","pos":[862,917]},{"content":"To create a state machine workflow, states are added to a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.StateMachine&gt;</ph> activity, and transitions are used control the flow between states.","pos":[1089,1263],"source":"To create a state machine workflow, states are added to a <xref:System.Activities.Statements.StateMachine> activity, and transitions are used control the flow between states."},{"content":"The following screenshot, from the <bpt id=\"p1\">[</bpt>Getting Started Tutorial<ept id=\"p1\">](getting-started-tutorial.md)</ept> step <bpt id=\"p2\">[</bpt>How to: Create a State Machine Workflow<ept id=\"p2\">](how-to-create-a-state-machine-workflow.md)</ept>, shows a state machine workflow with three states and three transitions.","pos":[1264,1517],"source":" The following screenshot, from the [Getting Started Tutorial](getting-started-tutorial.md) step [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md), shows a state machine workflow with three states and three transitions."},{"content":"<bpt id=\"p1\">**</bpt>Initialize Target<ept id=\"p1\">**</ept> is the initial state and represents the first state in the workflow.","pos":[1518,1608],"source":"**Initialize Target** is the initial state and represents the first state in the workflow."},{"content":"This is designated by the line leading to it from the <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept> node.","pos":[1609,1678],"source":" This is designated by the line leading to it from the **Start** node."},{"content":"The final state in the workflow is named <bpt id=\"p1\">**</bpt>FinalState<ept id=\"p1\">**</ept>, and represents the point at which the workflow is completed.","pos":[1679,1796],"source":" The final state in the workflow is named **FinalState**, and represents the point at which the workflow is completed."},{"pos":[1803,1943],"content":"<bpt id=\"p1\">![</bpt>Completed State Machine Workflow<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/wfstatemachinegettingstartedtutorialcomplete.JPG \"</bpt>WFStateMachineGettingStartedTutorialComplete<ept id=\"p2\">\")</ept>","source":"![Completed State Machine Workflow](./media/wfstatemachinegettingstartedtutorialcomplete.JPG \"WFStateMachineGettingStartedTutorialComplete\")"},{"content":"A state machine workflow must have one and only one initial state, and at least one final state.","pos":[1950,2046]},{"content":"Each state that is not a final state must have at least one transition.","pos":[2047,2118]},{"content":"The following sections cover creating and configuring states and transitions.","pos":[2119,2196]},{"pos":[2205,2236],"content":"Creating and Configuring States","linkify":"Creating and Configuring States","nodes":[{"content":"Creating and Configuring States","pos":[0,31]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State&gt;</ph> represents a state in which a state machine can be in.","pos":[2240,2338],"source":"A <xref:System.Activities.Statements.State> represents a state in which a state machine can be in."},{"content":"To add a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State&gt;</ph> to a workflow, drag the <bpt id=\"p1\">**</bpt>State<ept id=\"p1\">**</ept> activity designer from the <bpt id=\"p2\">**</bpt>State Machine<ept id=\"p2\">**</ept> section of the <bpt id=\"p3\">**</bpt>Toolbox<ept id=\"p3\">**</ept> and drop it onto a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.StateMachine&gt;</ph> activity on the <ph id=\"ph3\">[!INCLUDE[wfd1](../../../includes/wfd1-md.md)]</ph> surface.","pos":[2339,2635],"source":" To add a <xref:System.Activities.Statements.State> to a workflow, drag the **State** activity designer from the **State Machine** section of the **Toolbox** and drop it onto a <xref:System.Activities.Statements.StateMachine> activity on the [!INCLUDE[wfd1](../../../includes/wfd1-md.md)] surface."},{"pos":[2642,2790],"content":"<bpt id=\"p1\">![</bpt>WF4 State Machine Activities<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/netframework4platformupdate1statemachineactivities.jpg \"</bpt>NETFramework4PlatformUpdate1StateMachineActivities<ept id=\"p2\">\")</ept>","source":"![WF4 State Machine Activities](./media/netframework4platformupdate1statemachineactivities.jpg \"NETFramework4PlatformUpdate1StateMachineActivities\")"},{"content":"To configure a state as the <bpt id=\"p1\">**</bpt>Initial State<ept id=\"p1\">**</ept>, right-click the state and select <bpt id=\"p2\">**</bpt>Set as Initial State<ept id=\"p2\">**</ept>.","pos":[2797,2902],"source":"To configure a state as the **Initial State**, right-click the state and select **Set as Initial State**."},{"content":"Additionally, if there is no current initial state, the initial state can be designated by dragging a line from the <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept> node at the top of the workflow to the desired state.","pos":[2903,3082],"source":" Additionally, if there is no current initial state, the initial state can be designated by dragging a line from the **Start** node at the top of the workflow to the desired state."},{"content":"When a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.StateMachine&gt;</ph> activity is dropped onto the workflow designer, it is pre-configured with an initial state named <bpt id=\"p1\">**</bpt>State1<ept id=\"p1\">**</ept>.","pos":[3083,3247],"source":" When a <xref:System.Activities.Statements.StateMachine> activity is dropped onto the workflow designer, it is pre-configured with an initial state named **State1**."},{"content":"A state machine workflow must have one and only one initial state.","pos":[3248,3314]},{"content":"A state that represents a terminating state in a state machine is called a final state.","pos":[3321,3408]},{"content":"A final state is a state that has its <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State.IsFinal%2A&gt;</ph> property set to <ph id=\"ph2\">`true`</ph>, has no <ph id=\"ph3\">&lt;xref:System.Activities.Statements.State.Exit%2A&gt;</ph> activity, and no transitions originating from it.","pos":[3409,3630],"source":" A final state is a state that has its <xref:System.Activities.Statements.State.IsFinal%2A> property set to `true`, has no <xref:System.Activities.Statements.State.Exit%2A> activity, and no transitions originating from it."},{"content":"To add a final state to a workflow, drag a <bpt id=\"p1\">**</bpt>FinalState<ept id=\"p1\">**</ept> activity designer from the <bpt id=\"p2\">**</bpt>State Machine<ept id=\"p2\">**</ept> section of the <bpt id=\"p3\">**</bpt>Toolbox<ept id=\"p3\">**</ept> and drop it onto a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.StateMachine&gt;</ph> activity on the <ph id=\"ph2\">[!INCLUDE[wfd1](../../../includes/wfd1-md.md)]</ph> surface.","pos":[3631,3900],"source":" To add a final state to a workflow, drag a **FinalState** activity designer from the **State Machine** section of the **Toolbox** and drop it onto a <xref:System.Activities.Statements.StateMachine> activity on the [!INCLUDE[wfd1](../../../includes/wfd1-md.md)] surface."},{"content":"A state machine workflow must have at least one final state.","pos":[3901,3961]},{"pos":[3971,4005],"content":"Configuring Entry and Exit Actions","linkify":"Configuring Entry and Exit Actions","nodes":[{"content":"Configuring Entry and Exit Actions","pos":[0,34]}]},{"content":"A state can have an <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State.Entry%2A&gt;</ph> and an <ph id=\"ph2\">&lt;xref:System.Activities.Statements.State.Exit%2A&gt;</ph> action.","pos":[4009,4144],"source":"A state can have an <xref:System.Activities.Statements.State.Entry%2A> and an <xref:System.Activities.Statements.State.Exit%2A> action."},{"content":"(A state configured as a final state may have only an entry action).","pos":[4145,4213]},{"content":"When a workflow instance enters a state, any activities in the entry action execute.","pos":[4214,4298]},{"content":"When the entry action is complete, the triggers for the state’s transitions are scheduled.","pos":[4299,4389]},{"content":"When a transition to another state is confirmed, the activities in the exit action are executed, even if the state transitions back to the same state.","pos":[4390,4540]},{"content":"After the exit action completes, the activities in the transition’s action execute, and then the new state is transitioned to, and its entry actions are scheduled.","pos":[4541,4704]},{"pos":[4712,5015],"content":"[!NOTE]\n When debugging a state machine workflow, breakpoints can be placed on the root state machine activity and states within the state machine workflow. Breakpoints may not be placed directly on the transitions, but they may be placed on any activities contained within the states and transitions.","leadings":["","> "],"nodes":[{"content":"When debugging a state machine workflow, breakpoints can be placed on the root state machine activity and states within the state machine workflow. Breakpoints may not be placed directly on the transitions, but they may be placed on any activities contained within the states and transitions.","pos":[9,301],"nodes":[{"content":"When debugging a state machine workflow, breakpoints can be placed on the root state machine activity and states within the state machine workflow.","pos":[0,147]},{"content":"Breakpoints may not be placed directly on the transitions, but they may be placed on any activities contained within the states and transitions.","pos":[148,292]}]}]},{"pos":[5024,5060],"content":"Creating and Configuring Transitions","linkify":"Creating and Configuring Transitions","nodes":[{"content":"Creating and Configuring Transitions","pos":[0,36]}]},{"content":"All states must have at least one transition, except for a final state which may not have any transitions.","pos":[5064,5170]},{"content":"Transitions may be added after a state is added to a state machine workflow, or they can be created as the state is dropped.","pos":[5171,5295]},{"content":"To add a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State&gt;</ph> and create a transition in one step, drag a <bpt id=\"p1\">**</bpt>State<ept id=\"p1\">**</ept> activity from the <bpt id=\"p2\">**</bpt>State Machine<ept id=\"p2\">**</ept> section of the <bpt id=\"p3\">**</bpt>Toolbox<ept id=\"p3\">**</ept> and hover it over another state in the workflow designer.","pos":[5302,5527],"source":"To add a <xref:System.Activities.Statements.State> and create a transition in one step, drag a **State** activity from the **State Machine** section of the **Toolbox** and hover it over another state in the workflow designer."},{"content":"When the dragged <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State&gt;</ph> is over another <ph id=\"ph2\">&lt;xref:System.Activities.Statements.State&gt;</ph>, four triangles will appear around the other <ph id=\"ph3\">&lt;xref:System.Activities.Statements.State&gt;</ph>.","pos":[5528,5732],"source":" When the dragged <xref:System.Activities.Statements.State> is over another <xref:System.Activities.Statements.State>, four triangles will appear around the other <xref:System.Activities.Statements.State>."},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.State&gt;</ph> is dropped onto one of the four triangles, it is added to the state machine and a transition is created from the source <ph id=\"ph2\">&lt;xref:System.Activities.Statements.State&gt;</ph> to the dropped destination <ph id=\"ph3\">&lt;xref:System.Activities.Statements.State&gt;</ph>.","pos":[5733,6013],"source":" If the <xref:System.Activities.Statements.State> is dropped onto one of the four triangles, it is added to the state machine and a transition is created from the source <xref:System.Activities.Statements.State> to the dropped destination <xref:System.Activities.Statements.State>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Transition Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/transition-activity-designer)</ept>.","pos":[6014,6133],"source":" For more information, see [Transition Activity Designer](/visualstudio/workflow-designer/transition-activity-designer)."},{"content":"To create a transition after a state is added, there are two options.","pos":[6140,6209]},{"content":"The first option is to drag the state from the workflow designer surface and hover it over an existing state and drop it on one of the drop points.","pos":[6210,6357]},{"content":"This is very similar to the method described in the previous section.","pos":[6358,6427]},{"content":"You can also hover the mouse over the desired source state, and drag a line to the desired destination state.","pos":[6428,6537]},{"pos":[6545,6773],"content":"[!NOTE]\n A single state in a state machine can have up to 76 transitions created using the workflow designer. The limit on transitions for a state for workflows created outside the designer is limited only by system resources.","leadings":["","> "],"nodes":[{"content":"A single state in a state machine can have up to 76 transitions created using the workflow designer. The limit on transitions for a state for workflows created outside the designer is limited only by system resources.","pos":[9,226],"nodes":[{"content":"A single state in a state machine can have up to 76 transitions created using the workflow designer.","pos":[0,100]},{"content":"The limit on transitions for a state for workflows created outside the designer is limited only by system resources.","pos":[101,217]}]}]},{"content":"A transition may have a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph>, a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Transition.Condition%2A&gt;</ph>, and an <ph id=\"ph3\">&lt;xref:System.Activities.Statements.Transition.Action%2A&gt;</ph>.","pos":[6780,6990],"source":"A transition may have a <xref:System.Activities.Statements.Transition.Trigger%2A>, a <xref:System.Activities.Statements.Transition.Condition%2A>, and an <xref:System.Activities.Statements.Transition.Action%2A>."},{"content":"A transition’s <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph> is scheduled when the transition’s source state’s <ph id=\"ph2\">&lt;xref:System.Activities.Statements.State.Entry%2A&gt;</ph> action is complete.","pos":[6991,7184],"source":" A transition’s <xref:System.Activities.Statements.Transition.Trigger%2A> is scheduled when the transition’s source state’s <xref:System.Activities.Statements.State.Entry%2A> action is complete."},{"content":"Typically the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph> is an activity that waits for some type of event to occur, but it can be any activity, or no activity at all.","pos":[7185,7366],"source":" Typically the <xref:System.Activities.Statements.Transition.Trigger%2A> is an activity that waits for some type of event to occur, but it can be any activity, or no activity at all."},{"content":"Once the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph> activity is complete, the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Transition.Condition%2A&gt;</ph>, if present, is evaluated.","pos":[7367,7546],"source":" Once the <xref:System.Activities.Statements.Transition.Trigger%2A> activity is complete, the <xref:System.Activities.Statements.Transition.Condition%2A>, if present, is evaluated."},{"content":"If there is no <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph> activity then the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Transition.Condition%2A&gt;</ph> is immediately evaluated.","pos":[7547,7723],"source":" If there is no <xref:System.Activities.Statements.Transition.Trigger%2A> activity then the <xref:System.Activities.Statements.Transition.Condition%2A> is immediately evaluated."},{"content":"If the condition evaluates to <ph id=\"ph1\">`false`</ph>, the transition is cancelled, and the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph> activity for all transitions from the state are rescheduled.","pos":[7724,7918],"source":" If the condition evaluates to `false`, the transition is cancelled, and the <xref:System.Activities.Statements.Transition.Trigger%2A> activity for all transitions from the state are rescheduled."},{"content":"If there are other transitions that share the same source state as the current transition, those <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Trigger%2A&gt;</ph> actions are cancelled and rescheduled as well.","pos":[7919,8120],"source":" If there are other transitions that share the same source state as the current transition, those <xref:System.Activities.Statements.Transition.Trigger%2A> actions are cancelled and rescheduled as well."},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Condition%2A&gt;</ph> evaluates to <ph id=\"ph2\">`true`</ph>, or there is no condition, then the <ph id=\"ph3\">&lt;xref:System.Activities.Statements.State.Exit%2A&gt;</ph> action of the source state is executed, and then the <ph id=\"ph4\">&lt;xref:System.Activities.Statements.Transition.Action%2A&gt;</ph> of the transition is executed.","pos":[8121,8434],"source":" If the <xref:System.Activities.Statements.Transition.Condition%2A> evaluates to `true`, or there is no condition, then the <xref:System.Activities.Statements.State.Exit%2A> action of the source state is executed, and then the <xref:System.Activities.Statements.Transition.Action%2A> of the transition is executed."},{"content":"When the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Action%2A&gt;</ph> completes, control passes to the <bpt id=\"p1\">**</bpt>Target<ept id=\"p1\">**</ept> state","pos":[8435,8550],"source":" When the <xref:System.Activities.Statements.Transition.Action%2A> completes, control passes to the **Target** state"},{"content":"Transitions that share a common trigger are known as shared trigger transitions.","pos":[8557,8637]},{"content":"Each transition in a group of shared trigger transitions has the same trigger, but a unique <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Condition%2A&gt;</ph> and Action.","pos":[8638,8801],"source":" Each transition in a group of shared trigger transitions has the same trigger, but a unique <xref:System.Activities.Statements.Transition.Condition%2A> and Action."},{"content":"To add additional actions to a transition and create a shared transition, click the circle that indicates the start of the desired transition and drag it to the desired state.","pos":[8802,8977]},{"content":"The new transition will share a same trigger as the initial transition, but it will have a unique condition and action.","pos":[8978,9097]},{"content":"Shared transitions can also be created from within the transition designer by clicking <bpt id=\"p1\">**</bpt>Add shared trigger transition<ept id=\"p1\">**</ept> at the bottom of the transition designer, and then selecting the desired target state from the <bpt id=\"p2\">**</bpt>Available states to connect<ept id=\"p2\">**</ept> drop-down.","pos":[9098,9356],"source":" Shared transitions can also be created from within the transition designer by clicking **Add shared trigger transition** at the bottom of the transition designer, and then selecting the desired target state from the **Available states to connect** drop-down."},{"pos":[9364,9674],"content":"[!NOTE]\n Note that if the <xref:System.Activities.Statements.Transition.Condition%2A> of a transition evaluates to `False` (or all of the conditions of a shared trigger transition evaluate to `False`), the transition will not occur and all triggers for all the transitions from the state will be rescheduled.","leadings":["","> "],"nodes":[{"content":"Note that if the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Transition.Condition%2A&gt;</ph> of a transition evaluates to <ph id=\"ph2\">`False`</ph> (or all of the conditions of a shared trigger transition evaluate to <ph id=\"ph3\">`False`</ph>), the transition will not occur and all triggers for all the transitions from the state will be rescheduled.","pos":[9,308],"source":"Note that if the <xref:System.Activities.Statements.Transition.Condition%2A> of a transition evaluates to `False` (or all of the conditions of a shared trigger transition evaluate to `False`), the transition will not occur and all triggers for all the transitions from the state will be rescheduled."}]},{"pos":[9681,10202],"content":"For more information on creating state machine workflows, see <bpt id=\"p1\">[</bpt>How to: Create a State Machine Workflow<ept id=\"p1\">](how-to-create-a-state-machine-workflow.md)</ept>, <bpt id=\"p2\">[</bpt>StateMachine Activity Designer<ept id=\"p2\">](/visualstudio/workflow-designer/statemachine-activity-designer)</ept>, <bpt id=\"p3\">[</bpt>State Activity Designer<ept id=\"p3\">](/visualstudio/workflow-designer/state-activity-designer)</ept>, <bpt id=\"p4\">[</bpt>FinalState Activity Designer<ept id=\"p4\">](/visualstudio/workflow-designer/finalstate-activity-designer)</ept>, and <bpt id=\"p5\">[</bpt>Transition Activity Designer<ept id=\"p5\">](/visualstudio/workflow-designer/transition-activity-designer)</ept>.","source":"For more information on creating state machine workflows, see [How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md), [StateMachine Activity Designer](/visualstudio/workflow-designer/statemachine-activity-designer), [State Activity Designer](/visualstudio/workflow-designer/state-activity-designer), [FinalState Activity Designer](/visualstudio/workflow-designer/finalstate-activity-designer), and [Transition Activity Designer](/visualstudio/workflow-designer/transition-activity-designer)."},{"pos":[10211,10236],"content":"State Machine Terminology","linkify":"State Machine Terminology","nodes":[{"content":"State Machine Terminology","pos":[0,25]}]},{"content":"This section defines the state machine vocabulary used throughout this topic.","pos":[10240,10317]},{"content":"State","pos":[10324,10329]},{"content":"The basic unit that composes a state machine.","pos":[10333,10378]},{"content":"A state machine can be in one state at any particular time.","pos":[10379,10438]},{"content":"Entry Action","pos":[10445,10457]},{"content":"An activity executed when entering the state","pos":[10461,10505]},{"content":"Exit Action","pos":[10512,10523]},{"content":"An activity executed when exiting the state","pos":[10527,10570]},{"content":"Transition","pos":[10577,10587]},{"content":"A directed relationship between two states which represents the complete response of a state machine to an occurrence of an event of a particular type.","pos":[10591,10742]},{"content":"Shared Transition","pos":[10749,10766]},{"content":"A transition that shares a source state and trigger with one or more transitions, but has a unique condition and action.","pos":[10770,10890]},{"content":"Trigger","pos":[10897,10904]},{"content":"A triggering activity that causes a transition to occur.","pos":[10908,10964]},{"content":"Condition","pos":[10971,10980]},{"content":"A constraint which must evaluate to <ph id=\"ph1\">`true`</ph> after the trigger occurs in order for the transition to complete.","pos":[10984,11092],"source":"A constraint which must evaluate to `true` after the trigger occurs in order for the transition to complete."},{"content":"Transition Action","pos":[11099,11116]},{"content":"An activity which is executed when performing a certain transition.","pos":[11120,11187]},{"content":"Conditional Transition","pos":[11194,11216]},{"content":"A transition with an explicit condition.","pos":[11220,11260]},{"content":"Self-transition","pos":[11267,11282]},{"content":"A transition which transits from a state to itself.","pos":[11286,11337]},{"content":"Initial State","pos":[11344,11357]},{"content":"A state which represents the starting point of the state machine.","pos":[11361,11426]},{"content":"Final State","pos":[11433,11444]},{"content":"A state which represents the completion of the state machine.","pos":[11448,11509]},{"pos":[11518,11526],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[11530,11614],"content":"<bpt id=\"p1\">[</bpt>How to: Create a State Machine Workflow<ept id=\"p1\">](how-to-create-a-state-machine-workflow.md)</ept>","source":"[How to: Create a State Machine Workflow](how-to-create-a-state-machine-workflow.md)"},{"pos":[11617,11713],"content":"<bpt id=\"p1\">[</bpt>StateMachine Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/statemachine-activity-designer)</ept>","source":"[StateMachine Activity Designer](/visualstudio/workflow-designer/statemachine-activity-designer)"},{"pos":[11716,11798],"content":"<bpt id=\"p1\">[</bpt>State Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/state-activity-designer)</ept>","source":"[State Activity Designer](/visualstudio/workflow-designer/state-activity-designer)"},{"pos":[11801,11893],"content":"<bpt id=\"p1\">[</bpt>FinalState Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/finalstate-activity-designer)</ept>","source":"[FinalState Activity Designer](/visualstudio/workflow-designer/finalstate-activity-designer)"},{"pos":[11896,11988],"content":"<bpt id=\"p1\">[</bpt>Transition Activity Designer<ept id=\"p1\">](/visualstudio/workflow-designer/transition-activity-designer)</ept>","source":"[Transition Activity Designer](/visualstudio/workflow-designer/transition-activity-designer)"}]}