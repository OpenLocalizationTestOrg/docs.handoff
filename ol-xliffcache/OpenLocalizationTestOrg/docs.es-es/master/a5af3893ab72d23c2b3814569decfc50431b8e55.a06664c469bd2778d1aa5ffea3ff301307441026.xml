{"content":"---\ntitle: \"<securityTokenHandlers>\"\nms.date: \"03/30/2017\"\nms.assetid: f11a631d-4094-4e11-bb03-4ede74b30281\nauthor: \"BrucePerlerMS\"\n---\n# \\<securityTokenHandlers>\nSpecifies a collection of security token handlers that are registered with the endpoint.  \n  \n \\<system.identityModel>  \n\\<identityConfiguration>  \n\\<securityTokenHandlers>  \n  \n## Syntax  \n  \n```xml  \n<system.identityModel>  \n  <identityConfiguration>  \n    <securityTokenHandlers>  \n    </securityTokenHandlers>  \n  </identityConfiguration>  \n</system.identityModel>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|name|Specifies the name of a token handler collection. The only values recognized by the framework are \"ActAs\" and \"OnBehalfOf\". If token handler collections are specified with either of these names, the collection will be used when processing ActAs or OnBehalfOf tokens respectively.|  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<add>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/add.md)|Adds a security token handler to the token handler collection.|  \n|[\\<clear>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/clear.md)|Clears all security token handlers from the token handler collection.|  \n|[\\<remove>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/remove.md)|Removes a security token handler from the token handler collection.|  \n|[\\<securityTokenHandlerConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)|Provides configuration for the collection of token handlers.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)|Specifies service-level identity settings.|  \n  \n## Remarks  \n You can specify one or more named collections of security token handlers in a service configuration. You can specify a name for a collection by using the `name` attribute. The only names that the framework handles are \"ActAs\" and \"OnBehalfOf\". If handlers exist in these collections, they are used by a security token service (STS) instead of the default handlers when processing `ActAs` and `OnBehalfOf` tokens.  \n  \n By default, the collection is populated with the following handler types: <xref:System.IdentityModel.Tokens.SamlSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler>, <xref:System.IdentityModel.Tokens.KerberosSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.WindowsUserNameSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.RsaSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.X509SecurityTokenHandler>, and <xref:System.IdentityModel.Tokens.EncryptedSecurityTokenHandler>. You can modify the collection by using the `<add>`, `<remove>`, and `<clear>` elements. You must ensure that only a single handler of any particular type exists in the collection. For example, if you derive a handler from the <xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler> class, either your handler or the <xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler> may be configured in a single collection, but not both.  \n  \n Use the `<securityTokenHandlerConfiguration>` element to specify configuration settings for the handlers in the collection. Settings specified through this element override those specified on the service through the [\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element. Some handlers (including several of the built-in handler types) can support additional configuration through a child element of the `<add>` element. Settings specified on a handler override equivalent settings specified on the collection or the service.\n","nodes":[{"pos":[4,131],"embed":true,"restype":"x-metadata","content":"title: \"<securityTokenHandlers>\"\nms.date: \"03/30/2017\"\nms.assetid: f11a631d-4094-4e11-bb03-4ede74b30281\nauthor: \"BrucePerlerMS\"","nodes":[{"content":"<securityTokenHandlers>","nodes":[],"path":["title"],"nosxs":false}],"yml":true},{"pos":[138,162],"content":"\\<securityTokenHandlers>","linkify":"\\<securityTokenHandlers>","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>securityTokenHandlers&gt;","pos":[0,24],"source":"\\<securityTokenHandlers>"}]},{"content":"Specifies a collection of security token handlers that are registered with the endpoint.","pos":[163,251]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.identityModel&gt;","pos":[258,281],"source":"\\<system.identityModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;","pos":[284,308],"source":"\\<identityConfiguration>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>securityTokenHandlers&gt;","pos":[311,335],"source":"\\<securityTokenHandlers>"},{"pos":[344,350],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[546,569],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[573,653]},{"pos":[663,673],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[680,689]},{"content":"Description","pos":[690,701]},{"content":"name","pos":[744,748]},{"content":"Specifies the name of a token handler collection.","pos":[749,798]},{"content":"The only values recognized by the framework are \"ActAs\" and \"OnBehalfOf\".","pos":[799,872]},{"content":"If token handler collections are specified with either of these names, the collection will be used when processing ActAs or OnBehalfOf tokens respectively.","pos":[873,1028]},{"pos":[1039,1053],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[1060,1067]},{"content":"Description","pos":[1068,1079]},{"pos":[1120,1221],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>add&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/add.md)</ept>","source":"[\\<add>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/add.md)"},{"content":"Adds a security token handler to the token handler collection.","pos":[1222,1284]},{"pos":[1289,1394],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>clear&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/clear.md)</ept>","source":"[\\<clear>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/clear.md)"},{"content":"Clears all security token handlers from the token handler collection.","pos":[1395,1464]},{"pos":[1469,1576],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>remove&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/remove.md)</ept>","source":"[\\<remove>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/remove.md)"},{"content":"Removes a security token handler from the token handler collection.","pos":[1577,1644]},{"pos":[1649,1810],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>securityTokenHandlerConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)</ept>","source":"[\\<securityTokenHandlerConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlerconfiguration.md)"},{"content":"Provides configuration for the collection of token handlers.","pos":[1811,1871]},{"pos":[1882,1897],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[1904,1911]},{"content":"Description","pos":[1912,1923]},{"pos":[1964,2101],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)</ept>","source":"[\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)"},{"content":"Specifies service-level identity settings.","pos":[2102,2144]},{"pos":[2154,2161],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"You can specify one or more named collections of security token handlers in a service configuration.","pos":[2165,2265]},{"content":"You can specify a name for a collection by using the <ph id=\"ph1\">`name`</ph> attribute.","pos":[2266,2336],"source":" You can specify a name for a collection by using the `name` attribute."},{"content":"The only names that the framework handles are \"ActAs\" and \"OnBehalfOf\".","pos":[2337,2408]},{"content":"If handlers exist in these collections, they are used by a security token service (STS) instead of the default handlers when processing <ph id=\"ph1\">`ActAs`</ph> and <ph id=\"ph2\">`OnBehalfOf`</ph> tokens.","pos":[2409,2577],"source":" If handlers exist in these collections, they are used by a security token service (STS) instead of the default handlers when processing `ActAs` and `OnBehalfOf` tokens."},{"content":"By default, the collection is populated with the following handler types: <ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.SamlSecurityTokenHandler&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.IdentityModel.Tokens.KerberosSecurityTokenHandler&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.IdentityModel.Tokens.WindowsUserNameSecurityTokenHandler&gt;</ph>, <ph id=\"ph5\">&lt;xref:System.IdentityModel.Tokens.RsaSecurityTokenHandler&gt;</ph>, <ph id=\"ph6\">&lt;xref:System.IdentityModel.Tokens.X509SecurityTokenHandler&gt;</ph>, and <ph id=\"ph7\">&lt;xref:System.IdentityModel.Tokens.EncryptedSecurityTokenHandler&gt;</ph>.","pos":[2584,3108],"source":"By default, the collection is populated with the following handler types: <xref:System.IdentityModel.Tokens.SamlSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler>, <xref:System.IdentityModel.Tokens.KerberosSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.WindowsUserNameSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.RsaSecurityTokenHandler>, <xref:System.IdentityModel.Tokens.X509SecurityTokenHandler>, and <xref:System.IdentityModel.Tokens.EncryptedSecurityTokenHandler>."},{"content":"You can modify the collection by using the <ph id=\"ph1\">`&lt;add&gt;`</ph>, <ph id=\"ph2\">`&lt;remove&gt;`</ph>, and <ph id=\"ph3\">`&lt;clear&gt;`</ph> elements.","pos":[3109,3196],"source":" You can modify the collection by using the `<add>`, `<remove>`, and `<clear>` elements."},{"content":"You must ensure that only a single handler of any particular type exists in the collection.","pos":[3197,3288]},{"content":"For example, if you derive a handler from the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler&gt;</ph> class, either your handler or the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler&gt;</ph> may be configured in a single collection, but not both.","pos":[3289,3546],"source":" For example, if you derive a handler from the <xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler> class, either your handler or the <xref:System.IdentityModel.Tokens.Saml2SecurityTokenHandler> may be configured in a single collection, but not both."},{"content":"Use the <ph id=\"ph1\">`&lt;securityTokenHandlerConfiguration&gt;`</ph> element to specify configuration settings for the handlers in the collection.","pos":[3553,3676],"source":"Use the `<securityTokenHandlerConfiguration>` element to specify configuration settings for the handlers in the collection."},{"content":"Settings specified through this element override those specified on the service through the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)</ept> element.","pos":[3677,3915],"source":" Settings specified through this element override those specified on the service through the [\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element."},{"content":"Some handlers (including several of the built-in handler types) can support additional configuration through a child element of the <ph id=\"ph1\">`&lt;add&gt;`</ph> element.","pos":[3916,4064],"source":" Some handlers (including several of the built-in handler types) can support additional configuration through a child element of the `<add>` element."},{"content":"Settings specified on a handler override equivalent settings specified on the collection or the service.","pos":[4065,4169]}]}