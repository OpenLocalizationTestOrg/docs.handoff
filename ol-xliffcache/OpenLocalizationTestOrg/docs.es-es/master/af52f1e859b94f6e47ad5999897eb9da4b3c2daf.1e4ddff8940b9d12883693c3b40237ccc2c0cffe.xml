{"content":"---\ntitle: \"How to: Configure a WCF Client to interoperate with WSE3.0 Services | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 3dadd7f1-d207-4ea5-a73b-3e8aa44407f8\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Configure a WCF Client to interoperate with WSE3.0 Services\n[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] clients are wire-level compatible with Web Services Enhancements 3.0 for Microsoft .NET (WSE) services when [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients are configured to use the August 2004 version of the WS-Addressing specification.  \n  \n### To configure a WCF client to interoperate with a WSE 3.0 Web service  \n  \n1.  Run the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to create a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client for the WSE 3.0 Web service.  \n  \n     For a WSE Web service, a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client class is created.  \n  \n     For details about creating a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client, see the [How to: Create a Client](../../../../docs/framework/wcf/how-to-create-a-wcf-client.md).  \n  \n2.  Create a class that represents a binding that can communicate with WSE 3.0 Web services.  \n  \n     The following class is part of the [Interoperating with WSE](http://msdn.microsoft.com/en-us/f6816861-96a0-45f9-8736-8e4e82cd3a41) sample.  \n  \n    1.  Create a class that derives from the <xref:System.ServiceModel.Channels.Binding> class.  \n  \n         The following code example creates a class named `WseHttpBinding` that derives from the <xref:System.ServiceModel.Channels.Binding> class.  \n  \n         [!code-csharp[c_WCFClientToWSEService#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#1)]\n         [!code-vb[c_WCFClientToWSEService#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#1)]  \n  \n    2.  Add properties to the class that specify the WSE turnkey assertion, whether derived keys are required, whether secure sessions are used, whether signature confirmations are required, and the message protection settings.  \n  \n         The following code example defines `SecurityAssertion,``RequireDerivedKeys, EstablishSecurityContext, MessageProtectionOrder` properties that specify the WSE turnkey assertion, whether derived keys are required, whether secure sessions are used, whether signature confirmations are required, and the message protection settings, respectively.  \n  \n         [!code-csharp[c_WCFClientToWSEService#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#3)]\n         [!code-vb[c_WCFClientToWSEService#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#3)]  \n  \n    3.  Override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method to set the binding properties.  \n  \n         The following code example specifies the transport, message encoding, and message protection settings by getting the values of the `SecurityAssertion` and `MessageProtectionOrder` properties.  \n  \n         [!code-csharp[c_WCFClientToWSEService#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#2)]\n         [!code-vb[c_WCFClientToWSEService#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#2)]  \n  \n3.  In the client application code, add code to set the binding properties.  \n  \n     The following code example specifies that the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client must use message protection and authentication as defined by the WSE 3.0 `AnonymousForCertificate` turnkey security assertion. Additionally, secure sessions and derived keys are required.  \n  \n     [!code-csharp[c_WCFClientToWSEService#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/client.cs#4)]\n     [!code-vb[c_WCFClientToWSEService#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/client.vb#4)]  \n  \n## Example  \n The following code example defines a custom binding that exposes properties that correspond to the properties of a WSE 3.0 turnkey security assertion. The custom binding, which is named `WseHttpBinding`, is then used to specify the binding properties for a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client.  \n  \n  \n[!code-csharp[c_WCFClientToWSEService#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/client.cs#0)]\n[!code-vb[c_WCFClientToWSEService#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/client.vb#0)]  \n  \n## See Also  \n <xref:System.ServiceModel.Channels.Binding>   \n [Interoperating with WSE](http://msdn.microsoft.com/en-us/f6816861-96a0-45f9-8736-8e4e82cd3a41)","nodes":[{"pos":[4,387],"nodes":[{"content":"How to: Configure a WCF Client to interoperate with WSE3.0 Services | Microsoft Docs","nodes":[{"pos":[0,84],"content":"How to: Configure a WCF Client to interoperate with WSE3.0 Services | Microsoft Docs","nodes":[{"content":"How to: Configure a WCF Client to interoperate with WSE3.0 Services | Microsoft Docs","pos":[0,84]}]}],"pos":[6,93],"yaml":true}],"content":"title: \"How to: Configure a WCF Client to interoperate with WSE3.0 Services | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 3dadd7f1-d207-4ea5-a73b-3e8aa44407f8\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[394,461],"content":"How to: Configure a WCF Client to interoperate with WSE3.0 Services","linkify":"How to: Configure a WCF Client to interoperate with WSE3.0 Services","nodes":[{"content":"How to: Configure a WCF Client to interoperate with WSE3.0 Services","pos":[0,67]}]},{"pos":[462,771],"content":"<ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> clients are wire-level compatible with Web Services Enhancements 3.0 for Microsoft .NET (WSE) services when <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> clients are configured to use the August 2004 version of the WS-Addressing specification.","source":"[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] clients are wire-level compatible with Web Services Enhancements 3.0 for Microsoft .NET (WSE) services when [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients are configured to use the August 2004 version of the WS-Addressing specification."},{"pos":[781,849],"content":"To configure a WCF client to interoperate with a WSE 3.0 Web service","linkify":"To configure a WCF client to interoperate with a WSE 3.0 Web service","nodes":[{"content":"To configure a WCF client to interoperate with a WSE 3.0 Web service","pos":[0,68]}]},{"pos":[859,1103],"content":"Run the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> to create a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client for the WSE 3.0 Web service.","source":"Run the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to create a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client for the WSE 3.0 Web service."},{"pos":[1114,1219],"content":"For a WSE Web service, a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client class is created.","source":"For a WSE Web service, a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client class is created."},{"pos":[1230,1419],"content":"For details about creating a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client, see the <bpt id=\"p1\">[</bpt>How to: Create a Client<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-create-a-wcf-client.md)</ept>.","source":"For details about creating a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client, see the [How to: Create a Client](../../../../docs/framework/wcf/how-to-create-a-wcf-client.md)."},{"content":"Create a class that represents a binding that can communicate with WSE 3.0 Web services.","pos":[1429,1517]},{"pos":[1528,1666],"content":"The following class is part of the <bpt id=\"p1\">[</bpt>Interoperating with WSE<ept id=\"p1\">](http://msdn.microsoft.com/en-us/f6816861-96a0-45f9-8736-8e4e82cd3a41)</ept> sample.","source":"The following class is part of the [Interoperating with WSE](http://msdn.microsoft.com/en-us/f6816861-96a0-45f9-8736-8e4e82cd3a41) sample."},{"content":"Create a class that derives from the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.Binding&gt;</ph> class.","pos":[1680,1767],"source":"Create a class that derives from the <xref:System.ServiceModel.Channels.Binding> class."},{"pos":[1782,1920],"content":"The following code example creates a class named <ph id=\"ph1\">`WseHttpBinding`</ph> that derives from the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.Binding&gt;</ph> class.","source":"The following code example creates a class named `WseHttpBinding` that derives from the <xref:System.ServiceModel.Channels.Binding> class."},{"pos":[1935,2228],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_WCFClientToWSEService#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#1)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_WCFClientToWSEService#1<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#1)</ept><ept id=\"p3\">]</ept>","leadings":["","        "],"source":"[!code-csharp[c_WCFClientToWSEService#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#1)]\n [!code-vb[c_WCFClientToWSEService#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#1)]"},{"content":"Add properties to the class that specify the WSE turnkey assertion, whether derived keys are required, whether secure sessions are used, whether signature confirmations are required, and the message protection settings.","pos":[2242,2461]},{"pos":[2476,2818],"content":"The following code example defines <ph id=\"ph1\">`SecurityAssertion,``RequireDerivedKeys, EstablishSecurityContext, MessageProtectionOrder`</ph> properties that specify the WSE turnkey assertion, whether derived keys are required, whether secure sessions are used, whether signature confirmations are required, and the message protection settings, respectively.","source":"The following code example defines `SecurityAssertion,``RequireDerivedKeys, EstablishSecurityContext, MessageProtectionOrder` properties that specify the WSE turnkey assertion, whether derived keys are required, whether secure sessions are used, whether signature confirmations are required, and the message protection settings, respectively."},{"pos":[2833,3126],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_WCFClientToWSEService#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#3)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_WCFClientToWSEService#3<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#3)</ept><ept id=\"p3\">]</ept>","leadings":["","        "],"source":"[!code-csharp[c_WCFClientToWSEService#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#3)]\n [!code-vb[c_WCFClientToWSEService#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#3)]"},{"content":"Override the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A&gt;</ph> method to set the binding properties.","pos":[3140,3259],"source":"Override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method to set the binding properties."},{"pos":[3274,3465],"content":"The following code example specifies the transport, message encoding, and message protection settings by getting the values of the <ph id=\"ph1\">`SecurityAssertion`</ph> and <ph id=\"ph2\">`MessageProtectionOrder`</ph> properties.","source":"The following code example specifies the transport, message encoding, and message protection settings by getting the values of the `SecurityAssertion` and `MessageProtectionOrder` properties."},{"pos":[3480,3773],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_WCFClientToWSEService#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#2)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_WCFClientToWSEService#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#2)</ept><ept id=\"p3\">]</ept>","leadings":["","        "],"source":"[!code-csharp[c_WCFClientToWSEService#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/wsehttpbinding.cs#2)]\n [!code-vb[c_WCFClientToWSEService#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/wsehttpbinding.vb#2)]"},{"content":"In the client application code, add code to set the binding properties.","pos":[3783,3854]},{"content":"The following code example specifies that the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client must use message protection and authentication as defined by the WSE 3.0 <ph id=\"ph2\">`AnonymousForCertificate`</ph> turnkey security assertion.","pos":[3865,4100],"source":"The following code example specifies that the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client must use message protection and authentication as defined by the WSE 3.0 `AnonymousForCertificate` turnkey security assertion."},{"content":"Additionally, secure sessions and derived keys are required.","pos":[4101,4161]},{"pos":[4172,4445],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_WCFClientToWSEService#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/client.cs#4)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_WCFClientToWSEService#4<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/client.vb#4)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[c_WCFClientToWSEService#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/client.cs#4)]\n [!code-vb[c_WCFClientToWSEService#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/client.vb#4)]"},{"pos":[4454,4461],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example defines a custom binding that exposes properties that correspond to the properties of a WSE 3.0 turnkey security assertion.","pos":[4465,4615]},{"content":"The custom binding, which is named <ph id=\"ph1\">`WseHttpBinding`</ph>, is then used to specify the binding properties for a <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client.","pos":[4616,4785],"source":" The custom binding, which is named `WseHttpBinding`, is then used to specify the binding properties for a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client."},{"pos":[4794,5062],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_WCFClientToWSEService#0<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/client.cs#0)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_WCFClientToWSEService#0<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/client.vb#0)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_WCFClientToWSEService#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_wcfclienttowseservice/cs/client.cs#0)]\n[!code-vb[c_WCFClientToWSEService#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_wcfclienttowseservice/vb/client.vb#0)]"},{"pos":[5071,5079],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.Binding&gt;</ph>","pos":[5083,5126],"source":"<xref:System.ServiceModel.Channels.Binding> "},{"content":"<bpt id=\"p1\">[</bpt>Interoperating with WSE<ept id=\"p1\">](http://msdn.microsoft.com/en-us/f6816861-96a0-45f9-8736-8e4e82cd3a41)</ept>","pos":[5131,5226],"source":"[Interoperating with WSE](http://msdn.microsoft.com/en-us/f6816861-96a0-45f9-8736-8e4e82cd3a41)"}]}