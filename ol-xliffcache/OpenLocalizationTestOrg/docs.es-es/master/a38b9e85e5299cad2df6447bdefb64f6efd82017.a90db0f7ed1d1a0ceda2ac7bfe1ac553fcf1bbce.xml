{"content":"---\ntitle: \"Serialization and Metadata | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 619ecf1c-1ca5-4d66-8934-62fe7aad78c6\ncaps.latest.revision: 7\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Serialization and Metadata\nIf your app serializes and deserializes objects, you may need to add entries to your runtime directives (.rd.xml) file to ensure that the necessary metadata is present at run time. There are two categories of serializers, and each requires different handling in your runtime directives file:  \n  \n-   Reflection-based third-party serializers. These require modifications to your runtime directives file, and are discussed in the next section.  \n  \n-   Non-reflection based serializers found in the .NET Framework class library. These may require modifications to your runtime directives file, and are discussed in the [Microsoft serializers](#Microsoft) section.  \n  \n<a name=\"ThirdParty\"></a>   \n## Third-party serializers  \n Third-part serializers, including Newtonsoft.JSON, typically are reflection-based. Given a binary large object (BLOB) of serialized data, the fields in the data are assigned to a concrete type by looking up the fields of the target type by name. At a minimum, using these libraries causes [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) exceptions for each <xref:System.Type> object that you try to serialize or deserialize in a `List<Type>` collection.  \n  \n The easiest way to address issues caused by missing metadata for these serializers is to collect types that will be used in serialization under a single namespace (such as `App.Models`) and apply a `Serialize` metadata directive to it:  \n  \n```  \n<Namespace Name=\"App.Models\" Serialize=\"Required PublicAndInternal\" />  \n```  \n  \n For information about the syntax used in the example, see [\\<Namespace> Element](../../../docs/framework/net-native/namespace-element-net-native.md).  \n  \n<a name=\"Microsoft\"></a>   \n## Microsoft serializers  \n Although the <xref:System.Runtime.Serialization.DataContractSerializer>, <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>, and <xref:System.Xml.Serialization.XmlSerializer> classes do not rely on reflection, they do require code to be generated based on the object to be serialized or deserialized. The overloaded constructors for each serializer include a <xref:System.Type> parameter that specifies the type to be serialized or deserialized. How you specify that type in your code defines the action you must take, as discussed in the next two sections.  \n  \n### typeof used in the constructor  \n If you call a constructor of these serialization classes and include the C# [typeof](~/docs/csharp/language-reference/keywords/typeof.md) keyword in the method call, **you do not have to do any additional work**. For example, in each of the following calls to a serialization class constructor, the `typeof` keyword is used as part of the expression passed to the constructor.  \n  \n [!code-csharp[ProjectN#5](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#5)]  \n  \n The [!INCLUDE[net_native](../../../includes/net-native-md.md)] compiler will automatically handle this code.  \n  \n### typeof used outside the constructor  \n If you call a constructor of these serialization classes and use the C# [typeof](~/docs/csharp/language-reference/keywords/typeof.md) keyword outside the expression supplied to the constructor’s <xref:System.Type> parameter, as in the following code, the [!INCLUDE[net_native](../../../includes/net-native-md.md)] compiler cannot resolve the type:  \n  \n [!code-csharp[ProjectN#6](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#6)]  \n  \n In this case, you must specify the type in the runtime directives file by adding an entry like this:  \n  \n```  \n<Type Name=\"DataSet\" Browse=\"Required Public\" />  \n```  \n  \n Similarly, if you call a constructor such as <xref:System.Xml.Serialization.XmlSerializer.%23ctor%28System.Type%2CSystem.Type%5B%5D%29?displayProperty=fullName> and provide an array of additional <xref:System.Type> objects to serialize, as in the following code, the [!INCLUDE[net_native](../../../includes/net-native-md.md)] compiler cannot resolve these types.  \n  \n [!code-csharp[ProjectN#7](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#7)]  \n  \n You must add entries such as the following for each type to the runtime directives file:  \n  \n```  \n<Type Name=\"t\" Browse=\"Required Public\" />  \n```  \n  \n For information about the syntax used in the example, see [\\<Type> Element](../../../docs/framework/net-native/type-element-net-native.md).  \n  \n## See Also  \n [Runtime Directives (rd.xml) Configuration File Reference](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)   \n [Runtime Directive Elements](../../../docs/framework/net-native/runtime-directive-elements.md)   \n [\\<Type> Element](../../../docs/framework/net-native/type-element-net-native.md)   \n [\\<Namespace> Element](../../../docs/framework/net-native/namespace-element-net-native.md)","nodes":[{"pos":[4,351],"nodes":[{"content":"Serialization and Metadata | Microsoft Docs","nodes":[{"pos":[0,43],"content":"Serialization and Metadata | Microsoft Docs","nodes":[{"content":"Serialization and Metadata | Microsoft Docs","pos":[0,43]}]}],"pos":[6,52],"yaml":true}],"content":"title: \"Serialization and Metadata | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 619ecf1c-1ca5-4d66-8934-62fe7aad78c6\ncaps.latest.revision: 7\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","yamlblock":true},{"pos":[358,384],"content":"Serialization and Metadata","linkify":"Serialization and Metadata","nodes":[{"content":"Serialization and Metadata","pos":[0,26]}]},{"content":"If your app serializes and deserializes objects, you may need to add entries to your runtime directives (.rd.xml) file to ensure that the necessary metadata is present at run time.","pos":[385,565]},{"content":"There are two categories of serializers, and each requires different handling in your runtime directives file:","pos":[566,676]},{"content":"Reflection-based third-party serializers.","pos":[686,727]},{"content":"These require modifications to your runtime directives file, and are discussed in the next section.","pos":[728,827]},{"content":"Non-reflection based serializers found in the .NET Framework class library.","pos":[837,912]},{"content":"These may require modifications to your runtime directives file, and are discussed in the <bpt id=\"p1\">[</bpt>Microsoft serializers<ept id=\"p1\">](#Microsoft)</ept> section.","pos":[913,1047],"source":" These may require modifications to your runtime directives file, and are discussed in the [Microsoft serializers](#Microsoft) section."},{"pos":[1085,1108],"content":"Third-party serializers","linkify":"Third-party serializers","nodes":[{"content":"Third-party serializers","pos":[0,23]}]},{"content":"Third-part serializers, including Newtonsoft.JSON, typically are reflection-based.","pos":[1112,1194]},{"content":"Given a binary large object (BLOB) of serialized data, the fields in the data are assigned to a concrete type by looking up the fields of the target type by name.","pos":[1195,1357]},{"content":"At a minimum, using these libraries causes <bpt id=\"p1\">[</bpt>MissingMetadataException<ept id=\"p1\">](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md)</ept> exceptions for each <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph> object that you try to serialize or deserialize in a <ph id=\"ph2\">`List&lt;Type&gt;`</ph> collection.","pos":[1358,1625],"source":" At a minimum, using these libraries causes [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) exceptions for each <xref:System.Type> object that you try to serialize or deserialize in a `List<Type>` collection."},{"pos":[1632,1867],"content":"The easiest way to address issues caused by missing metadata for these serializers is to collect types that will be used in serialization under a single namespace (such as <ph id=\"ph1\">`App.Models`</ph>) and apply a <ph id=\"ph2\">`Serialize`</ph> metadata directive to it:","source":"The easiest way to address issues caused by missing metadata for these serializers is to collect types that will be used in serialization under a single namespace (such as `App.Models`) and apply a `Serialize` metadata directive to it:"},{"pos":[1962,2111],"content":"For information about the syntax used in the example, see <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>Namespace&gt; Element<ept id=\"p1\">](../../../docs/framework/net-native/namespace-element-net-native.md)</ept>.","source":"For information about the syntax used in the example, see [\\<Namespace> Element](../../../docs/framework/net-native/namespace-element-net-native.md)."},{"pos":[2148,2169],"content":"Microsoft serializers","linkify":"Microsoft serializers","nodes":[{"content":"Microsoft serializers","pos":[0,21]}]},{"content":"Although the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> classes do not rely on reflection, they do require code to be generated based on the object to be serialized or deserialized.","pos":[2173,2490],"source":"Although the <xref:System.Runtime.Serialization.DataContractSerializer>, <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>, and <xref:System.Xml.Serialization.XmlSerializer> classes do not rely on reflection, they do require code to be generated based on the object to be serialized or deserialized."},{"content":"The overloaded constructors for each serializer include a <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph> parameter that specifies the type to be serialized or deserialized.","pos":[2491,2635],"source":" The overloaded constructors for each serializer include a <xref:System.Type> parameter that specifies the type to be serialized or deserialized."},{"content":"How you specify that type in your code defines the action you must take, as discussed in the next two sections.","pos":[2636,2747]},{"pos":[2757,2787],"content":"typeof used in the constructor","linkify":"typeof used in the constructor","nodes":[{"content":"typeof used in the constructor","pos":[0,30]}]},{"content":"If you call a constructor of these serialization classes and include the C# <bpt id=\"p1\">[</bpt>typeof<ept id=\"p1\">](~/docs/csharp/language-reference/keywords/typeof.md)</ept> keyword in the method call, <bpt id=\"p2\">**</bpt>you do not have to do any additional work<ept id=\"p2\">**</ept>.","pos":[2791,3003],"source":"If you call a constructor of these serialization classes and include the C# [typeof](~/docs/csharp/language-reference/keywords/typeof.md) keyword in the method call, **you do not have to do any additional work**."},{"content":"For example, in each of the following calls to a serialization class constructor, the <ph id=\"ph1\">`typeof`</ph> keyword is used as part of the expression passed to the constructor.","pos":[3004,3167],"source":" For example, in each of the following calls to a serialization class constructor, the `typeof` keyword is used as part of the expression passed to the constructor."},{"pos":[3174,3278],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>ProjectN#5<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#5)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[ProjectN#5](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#5)]"},{"pos":[3285,3393],"content":"The <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> compiler will automatically handle this code.","source":"The [!INCLUDE[net_native](../../../includes/net-native-md.md)] compiler will automatically handle this code."},{"pos":[3403,3438],"content":"typeof used outside the constructor","linkify":"typeof used outside the constructor","nodes":[{"content":"typeof used outside the constructor","pos":[0,35]}]},{"pos":[3442,3789],"content":"If you call a constructor of these serialization classes and use the C# <bpt id=\"p1\">[</bpt>typeof<ept id=\"p1\">](~/docs/csharp/language-reference/keywords/typeof.md)</ept> keyword outside the expression supplied to the constructor’s <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph> parameter, as in the following code, the <ph id=\"ph2\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> compiler cannot resolve the type:","source":"If you call a constructor of these serialization classes and use the C# [typeof](~/docs/csharp/language-reference/keywords/typeof.md) keyword outside the expression supplied to the constructor’s <xref:System.Type> parameter, as in the following code, the [!INCLUDE[net_native](../../../includes/net-native-md.md)] compiler cannot resolve the type:"},{"pos":[3796,3900],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>ProjectN#6<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#6)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[ProjectN#6](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#6)]"},{"content":"In this case, you must specify the type in the runtime directives file by adding an entry like this:","pos":[3907,4007]},{"pos":[4080,4442],"content":"Similarly, if you call a constructor such as <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer.%23ctor%28System.Type%2CSystem.Type%5B%5D%29?displayProperty=fullName&gt;</ph> and provide an array of additional <ph id=\"ph2\">&lt;xref:System.Type&gt;</ph> objects to serialize, as in the following code, the <ph id=\"ph3\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> compiler cannot resolve these types.","source":"Similarly, if you call a constructor such as <xref:System.Xml.Serialization.XmlSerializer.%23ctor%28System.Type%2CSystem.Type%5B%5D%29?displayProperty=fullName> and provide an array of additional <xref:System.Type> objects to serialize, as in the following code, the [!INCLUDE[net_native](../../../includes/net-native-md.md)] compiler cannot resolve these types."},{"pos":[4449,4553],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>ProjectN#7<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#7)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[ProjectN#7](../../../samples/snippets/csharp/VS_Snippets_CLR/projectn/cs/serialize1.cs#7)]"},{"content":"You must add entries such as the following for each type to the runtime directives file:","pos":[4560,4648]},{"pos":[4715,4854],"content":"For information about the syntax used in the example, see <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>Type&gt; Element<ept id=\"p1\">](../../../docs/framework/net-native/type-element-net-native.md)</ept>.","source":"For information about the syntax used in the example, see [\\<Type> Element](../../../docs/framework/net-native/type-element-net-native.md)."},{"pos":[4863,4871],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Runtime Directives (rd.xml) Configuration File Reference<ept id=\"p1\">](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)</ept><ph id=\"ph1\"> </ph>","pos":[4875,5028],"source":"[Runtime Directives (rd.xml) Configuration File Reference](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md) "},{"content":"<bpt id=\"p1\">[</bpt>Runtime Directive Elements<ept id=\"p1\">](../../../docs/framework/net-native/runtime-directive-elements.md)</ept><ph id=\"ph1\"> </ph>","pos":[5032,5127],"source":"[Runtime Directive Elements](../../../docs/framework/net-native/runtime-directive-elements.md) "},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>Type&gt; Element<ept id=\"p1\">](../../../docs/framework/net-native/type-element-net-native.md)</ept><ph id=\"ph2\"> </ph>","pos":[5131,5212],"source":"[\\<Type> Element](../../../docs/framework/net-native/type-element-net-native.md) "},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>Namespace&gt; Element<ept id=\"p1\">](../../../docs/framework/net-native/namespace-element-net-native.md)</ept>","pos":[5216,5306],"source":"[\\<Namespace> Element](../../../docs/framework/net-native/namespace-element-net-native.md)"}]}