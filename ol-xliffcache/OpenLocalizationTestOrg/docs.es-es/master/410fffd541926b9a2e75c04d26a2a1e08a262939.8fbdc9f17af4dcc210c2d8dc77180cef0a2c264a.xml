{"content":"---\ntitle: \"<messageSenderAuthentication> element\"\nms.date: \"03/30/2017\"\nms.assetid: 8d979dfc-a6f9-42ec-96d5-7fbc13a48118\n---\n# \\<messageSenderAuthentication> element\nSpecifies authentication options for peer-to-peer message senders.  \n  \n For more information about peer-to-peer programming, see [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md).  \n  \n \\<system.ServiceModel>  \n\\<behaviors>  \n\\<endpointBehaviors>  \n\\<behavior>  \n\\<clientCredentials>  \n\\<peer>  \n\\<messageSenderAuthentication>  \n  \n## Syntax  \n  \n```xml  \n<messageSenderAuthentication customCertificateValidatorType= \"namespace.typeName, [,AssemblyName] [,Version=version number] [,Culture=culture] [,PublicKeyToken=token]\"\n                             certificateValidationMode = \"ChainTrust/None/PeerTrust/PeerOrChainTrust/Custom\"\n                             revocationMode=\"NoCheck/Online/Offline\"\n                             trustedStoreLocation=\"CurrentUser/LocalMachine\" />\n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|customCertificateValidatorType|A type and assembly used to validate a custom type. This attribute must be set when `certificateValidationMode` is set to `Custom`.|  \n|certifcateValidationMode|Specifies one of three modes used to validate credentials. If set to `Custom`, then a `customCertificateValidator` must also be supplied.|  \n|revocationMode|One of the modes used to check for a revoked certificate lists (CRL).|  \n|trustedStoreLocation|One of the two system store locations: `LocalMachine` or `CurrentUser`. This value is used when a service certificate is negotiated to the client. Validation is performed against the **Trusted People** store in the specified store location.|  \n  \n## customCertificateValidatorType Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|String|Optional. Specifies the type name and assembly and other data used to find the type. At minimum, a namespace and type name are required. Optional information includes: assembly name, version number, culture, and public key token.|  \n  \n## certificateValidationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|Optional. One of the following values: `None`, `PeerTrust`, `ChainTrust`, `PeerOrChainTrust`, `Custom`. The default is `ChainTrust`. The default is `ChainTrust`.<br /><br /> For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## revocationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: `NoCheck`, `Online`, `Offline`. The default is `Online`.<br /><br /> For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## trustedStoreLocation Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: `LocalMachine` or `CurrentUser`. The default is `CurrentUser`. If the client application is running under a system account then the certificate is typically under `LocalMachine`. If the client application is running under a user account then the certificate is typically in `CurrentUser`. The default is `CurrentUser`.|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<peer>](../../../../../docs/framework/configure-apps/file-schema/wcf/peer-of-clientcredentials-element.md)|Specifies a credential used for authenticating the client to a peer service.|  \n  \n## Remarks  \n This element must be configured if message authentication is chosen. For output channels, each message is signed using the certificate provided by [\\<certificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/certificate-element.md). All messages, before delivered to the application, are checked against the message credential using the validator specified by the `customCertificateValidatorType` attribute of this element. The validator can either accept or reject the credential.  \n  \n## Example  \n The following code sets the message sender validation mode to `PeerOrChainTrust`.  \n  \n```xml  \n<behaviors>\n  <endpointBehaviors>\n    <behavior name=\"MyEndpointBehavior\">\n      <clientCredentials>\n        <peer>\n          <certificate findValue=\"www.contoso.com\"\n                       storeLocation=\"LocalMachine\"\n                       x509FindType=\"FindByIssuerName\" />\n          <messageSenderAuthentication certificateValidationMode=\"PeerOrChainTrust\" />\n          <messageSenderAuthentication certificateValidationMode=\"None\" />\n        </peer>\n      </clientCredentials>\n    </behavior>\n  </endpointBehaviors>\n</behaviors>\n```  \n  \n## See also\n\n- <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>\n- <xref:System.ServiceModel.Security.PeerCredential.MessageSenderAuthentication%2A>\n- <xref:System.ServiceModel.Configuration.PeerCredentialElement.MessageSenderAuthentication%2A>\n- <xref:System.ServiceModel.Configuration.X509PeerCertificateAuthenticationElement>\n- [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)\n- [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)\n- [Peer Channel Message Authentication](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/aa967730(v=vs.90))\n- [Peer Channel Custom Authentication](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751447(v=vs.90))\n- [Securing Peer Channel Applications](../../../../../docs/framework/wcf/feature-details/securing-peer-channel-applications.md)\n","nodes":[{"pos":[4,121],"embed":true,"restype":"x-metadata","content":"title: \"<messageSenderAuthentication> element\"\nms.date: \"03/30/2017\"\nms.assetid: 8d979dfc-a6f9-42ec-96d5-7fbc13a48118","nodes":[{"content":"<messageSenderAuthentication> element","nodes":[{"pos":[0,37],"content":"<ph id=\"ph1\">&lt;messageSenderAuthentication&gt;</ph> element","source":"<messageSenderAuthentication> element"}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[128,166],"content":"\\<messageSenderAuthentication> element","linkify":"\\<messageSenderAuthentication> element","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>messageSenderAuthentication&gt; element","pos":[0,38],"source":"\\<messageSenderAuthentication> element"}]},{"content":"Specifies authentication options for peer-to-peer message senders.","pos":[167,233]},{"pos":[240,401],"content":"For more information about peer-to-peer programming, see <bpt id=\"p1\">[</bpt>Peer-to-Peer Networking<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)</ept>.","source":"For more information about peer-to-peer programming, see [Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)."},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[408,430],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behaviors&gt;","pos":[433,445],"source":"\\<behaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>endpointBehaviors&gt;","pos":[448,468],"source":"\\<endpointBehaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behavior&gt;","pos":[471,482],"source":"\\<behavior>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>clientCredentials&gt;","pos":[485,505],"source":"\\<clientCredentials>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>peer&gt;","pos":[508,515],"source":"\\<peer>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>messageSenderAuthentication&gt;","pos":[518,548],"source":"\\<messageSenderAuthentication>"},{"pos":[557,563],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1016,1039],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements","pos":[1043,1122]},{"pos":[1132,1142],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1149,1158]},{"content":"Description","pos":[1159,1170]},{"content":"customCertificateValidatorType","pos":[1213,1243]},{"content":"A type and assembly used to validate a custom type.","pos":[1244,1295]},{"content":"This attribute must be set when <ph id=\"ph1\">`certificateValidationMode`</ph> is set to <ph id=\"ph2\">`Custom`</ph>.","pos":[1296,1375],"source":" This attribute must be set when `certificateValidationMode` is set to `Custom`."},{"content":"certifcateValidationMode","pos":[1380,1404]},{"content":"Specifies one of three modes used to validate credentials.","pos":[1405,1463]},{"content":"If set to <ph id=\"ph1\">`Custom`</ph>, then a <ph id=\"ph2\">`customCertificateValidator`</ph> must also be supplied.","pos":[1464,1542],"source":" If set to `Custom`, then a `customCertificateValidator` must also be supplied."},{"content":"revocationMode","pos":[1547,1561]},{"content":"One of the modes used to check for a revoked certificate lists (CRL).","pos":[1562,1631]},{"content":"trustedStoreLocation","pos":[1636,1656]},{"content":"One of the two system store locations: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[1657,1728],"source":"One of the two system store locations: `LocalMachine` or `CurrentUser`."},{"content":"This value is used when a service certificate is negotiated to the client.","pos":[1729,1803]},{"content":"Validation is performed against the <bpt id=\"p1\">**</bpt>Trusted People<ept id=\"p1\">**</ept> store in the specified store location.","pos":[1804,1897],"source":" Validation is performed against the **Trusted People** store in the specified store location."},{"pos":[1907,1947],"content":"customCertificateValidatorType Attribute","linkify":"customCertificateValidatorType Attribute","nodes":[{"content":"customCertificateValidatorType Attribute","pos":[0,40]}]},{"content":"Value","pos":[1954,1959]},{"content":"Description","pos":[1960,1971]},{"content":"String","pos":[2010,2016]},{"content":"Optional.","pos":[2017,2026]},{"content":"Specifies the type name and assembly and other data used to find the type.","pos":[2027,2101]},{"content":"At minimum, a namespace and type name are required.","pos":[2102,2153]},{"content":"Optional information includes: assembly name, version number, culture, and public key token.","pos":[2154,2246]},{"pos":[2256,2291],"content":"certificateValidationMode Attribute","linkify":"certificateValidationMode Attribute","nodes":[{"content":"certificateValidationMode Attribute","pos":[0,35]}]},{"content":"Value","pos":[2298,2303]},{"content":"Description","pos":[2304,2315]},{"content":"Enumeration","pos":[2354,2365]},{"content":"Optional.","pos":[2366,2375]},{"content":"One of the following values: <ph id=\"ph1\">`None`</ph>, <ph id=\"ph2\">`PeerTrust`</ph>, <ph id=\"ph3\">`ChainTrust`</ph>, <ph id=\"ph4\">`PeerOrChainTrust`</ph>, <ph id=\"ph5\">`Custom`</ph>.","pos":[2376,2469],"source":" One of the following values: `None`, `PeerTrust`, `ChainTrust`, `PeerOrChainTrust`, `Custom`."},{"content":"The default is <ph id=\"ph1\">`ChainTrust`</ph>.","pos":[2470,2498],"source":" The default is `ChainTrust`."},{"content":"The default is <ph id=\"ph1\">`ChainTrust`</ph>.","pos":[2499,2527],"source":" The default is `ChainTrust`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[2540,2674],"source":"For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[2684,2708],"content":"revocationMode Attribute","linkify":"revocationMode Attribute","nodes":[{"content":"revocationMode Attribute","pos":[0,24]}]},{"content":"Value","pos":[2715,2720]},{"content":"Description","pos":[2721,2732]},{"content":"Enumeration","pos":[2771,2782]},{"content":"One of the following values: <ph id=\"ph1\">`NoCheck`</ph>, <ph id=\"ph2\">`Online`</ph>, <ph id=\"ph3\">`Offline`</ph>.","pos":[2783,2843],"source":"One of the following values: `NoCheck`, `Online`, `Offline`."},{"content":"The default is <ph id=\"ph1\">`Online`</ph>.","pos":[2844,2868],"source":" The default is `Online`."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[2881,3015],"source":"For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[3025,3055],"content":"trustedStoreLocation Attribute","linkify":"trustedStoreLocation Attribute","nodes":[{"content":"trustedStoreLocation Attribute","pos":[0,30]}]},{"content":"Value","pos":[3062,3067]},{"content":"Description","pos":[3068,3079]},{"content":"Enumeration","pos":[3118,3129]},{"content":"One of the following values: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[3130,3191],"source":"One of the following values: `LocalMachine` or `CurrentUser`."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3192,3221],"source":" The default is `CurrentUser`."},{"content":"If the client application is running under a system account then the certificate is typically under <ph id=\"ph1\">`LocalMachine`</ph>.","pos":[3222,3337],"source":" If the client application is running under a system account then the certificate is typically under `LocalMachine`."},{"content":"If the client application is running under a user account then the certificate is typically in <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3338,3447],"source":" If the client application is running under a user account then the certificate is typically in `CurrentUser`."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3448,3477],"source":" The default is `CurrentUser`."},{"pos":[3488,3502],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[3506,3511]},{"pos":[3521,3536],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[3543,3550]},{"content":"Description","pos":[3551,3562]},{"pos":[3603,3711],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>peer&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/peer-of-clientcredentials-element.md)</ept>","source":"[\\<peer>](../../../../../docs/framework/configure-apps/file-schema/wcf/peer-of-clientcredentials-element.md)"},{"content":"Specifies a credential used for authenticating the client to a peer service.","pos":[3712,3788]},{"pos":[3798,3805],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This element must be configured if message authentication is chosen.","pos":[3809,3877]},{"content":"For output channels, each message is signed using the certificate provided by <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>certificate&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/certificate-element.md)</ept>.","pos":[3878,4058],"source":" For output channels, each message is signed using the certificate provided by [\\<certificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/certificate-element.md)."},{"content":"All messages, before delivered to the application, are checked against the message credential using the validator specified by the <ph id=\"ph1\">`customCertificateValidatorType`</ph> attribute of this element.","pos":[4059,4249],"source":" All messages, before delivered to the application, are checked against the message credential using the validator specified by the `customCertificateValidatorType` attribute of this element."},{"content":"The validator can either accept or reject the credential.","pos":[4250,4307]},{"pos":[4316,4323],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4327,4408],"content":"The following code sets the message sender validation mode to <ph id=\"ph1\">`PeerOrChainTrust`</ph>.","source":"The following code sets the message sender validation mode to `PeerOrChainTrust`."},{"pos":[4969,4977],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5317,5424],"content":"<bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>","source":"[Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)"},{"pos":[5427,5530],"content":"<bpt id=\"p1\">[</bpt>Peer-to-Peer Networking<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)</ept>","source":"[Peer-to-Peer Networking](../../../../../docs/framework/wcf/feature-details/peer-to-peer-networking.md)"},{"pos":[5533,5658],"content":"<bpt id=\"p1\">[</bpt>Peer Channel Message Authentication<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/aa967730(v=vs.90))</ept>","source":"[Peer Channel Message Authentication](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/aa967730(v=vs.90))"},{"pos":[5661,5785],"content":"<bpt id=\"p1\">[</bpt>Peer Channel Custom Authentication<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751447(v=vs.90))</ept>","source":"[Peer Channel Custom Authentication](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms751447(v=vs.90))"},{"pos":[5788,5913],"content":"<bpt id=\"p1\">[</bpt>Securing Peer Channel Applications<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/securing-peer-channel-applications.md)</ept>","source":"[Securing Peer Channel Applications](../../../../../docs/framework/wcf/feature-details/securing-peer-channel-applications.md)"}]}