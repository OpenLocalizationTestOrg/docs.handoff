{"content":"---\ntitle: \"Self-Host\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Self hosted service\"\n  - \"Self Host Sample [Windows Communication Foundation]\"\nms.assetid: 05e68661-1ddf-4abf-a899-9bb1b8272a5b\n---\n# Self-Host\nThis sample demonstrates how to implement a self-hosted service in a console application. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md). The service configuration file has been renamed from Web.config to App.config and modified to configure a base address, which the host uses. The service source code has been modified to implement a static `Main` function that creates and opens a service host that provides the configured base address. The service implementation has been modified to write output to the console for each operation. The client has been unmodified, except for configuring the correct endpoint address of the service.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The sample implements a static main function to create a <xref:System.ServiceModel.ServiceHost> for the given `CalculatorService` type, as shown in the following sample code.  \n  \n```csharp\n// Host the service within this EXE console application.  \npublic static void Main()  \n{  \n    // Create a ServiceHost for the CalculatorService type.  \n    using (ServiceHost serviceHost =   \n           new ServiceHost(typeof(CalculatorService)))  \n    {  \n        // Open the ServiceHost to create listeners   \n        // and start listening for messages.  \n        serviceHost.Open();  \n  \n        // The service can now be accessed.  \n        Console.WriteLine(\"The service is ready.\");  \n        Console.WriteLine(\"Press <ENTER> to terminate service.\");  \n        Console.WriteLine();  \n        Console.ReadLine();  \n    }  \n}  \n```  \n  \n When a service is hosted in Internet Information Services (IIS) or Windows Process Activation Service (WAS), the base address of the service is provided by the hosting environment. In the self-hosted case, you must specify the base address yourself. This is done using the `add` element, child of [\\<baseAddresses>](../../../../docs/framework/configure-apps/file-schema/wcf/baseaddresses.md), child of [\\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md), child of [\\<service>](../../../../docs/framework/configure-apps/file-schema/wcf/service.md) as demonstrated in the following sample configuration.  \n  \n```xml  \n<service   \n    name=\"Microsoft.ServiceModel.Samples.CalculatorService\"  \n    behaviorConfiguration=\"CalculatorServiceBehavior\">  \n  <host>  \n    <baseAddresses>  \n      <add baseAddress=\"http://localhost:8000/ServiceModelSamples/service\"/>  \n    </baseAddresses>  \n  </host>  \n  ...  \n</service>  \n```  \n  \n When you run the sample, the operation requests and responses are displayed in both the service and client console windows. Press ENTER in each console window to shut down the service and client.  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-computer configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\Hosting\\SelfHost`  \n  \n## See also\n\n- [AppFabric Hosting and Persistence Samples](https://go.microsoft.com/fwlink/?LinkId=193961)\n","nodes":[{"pos":[4,199],"embed":true,"restype":"x-metadata","content":"title: \"Self-Host\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Self hosted service\"\n  - \"Self Host Sample [Windows Communication Foundation]\"\nms.assetid: 05e68661-1ddf-4abf-a899-9bb1b8272a5b","nodes":[{"content":"Self-Host","nodes":[{"pos":[0,9],"content":"Self-Host","nodes":[{"content":"Self-Host","pos":[0,9]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[206,215],"content":"Self-Host","linkify":"Self-Host","nodes":[{"content":"Self-Host","pos":[0,9]}]},{"content":"This sample demonstrates how to implement a self-hosted service in a console application.","pos":[216,305]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>.","pos":[306,418],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md)."},{"content":"The service configuration file has been renamed from Web.config to App.config and modified to configure a base address, which the host uses.","pos":[419,559]},{"content":"The service source code has been modified to implement a static <ph id=\"ph1\">`Main`</ph> function that creates and opens a service host that provides the configured base address.","pos":[560,720],"source":" The service source code has been modified to implement a static `Main` function that creates and opens a service host that provides the configured base address."},{"content":"The service implementation has been modified to write output to the console for each operation.","pos":[721,816]},{"content":"The client has been unmodified, except for configuring the correct endpoint address of the service.","pos":[817,916]},{"pos":[924,1031],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"pos":[1038,1212],"content":"The sample implements a static main function to create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> for the given <ph id=\"ph2\">`CalculatorService`</ph> type, as shown in the following sample code.","source":"The sample implements a static main function to create a <xref:System.ServiceModel.ServiceHost> for the given `CalculatorService` type, as shown in the following sample code."},{"content":"When a service is hosted in Internet Information Services (IIS) or Windows Process Activation Service (WAS), the base address of the service is provided by the hosting environment.","pos":[1872,2052]},{"content":"In the self-hosted case, you must specify the base address yourself.","pos":[2053,2121]},{"content":"This is done using the <ph id=\"ph1\">`add`</ph> element, child of <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>baseAddresses&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/baseaddresses.md)</ept>, child of <bpt id=\"p2\">[</bpt><ph id=\"ph3\">\\&lt;</ph>host&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)</ept>, child of <bpt id=\"p3\">[</bpt><ph id=\"ph4\">\\&lt;</ph>service&gt;<ept id=\"p3\">](../../../../docs/framework/configure-apps/file-schema/wcf/service.md)</ept> as demonstrated in the following sample configuration.","pos":[2122,2498],"source":" This is done using the `add` element, child of [\\<baseAddresses>](../../../../docs/framework/configure-apps/file-schema/wcf/baseaddresses.md), child of [\\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md), child of [\\<service>](../../../../docs/framework/configure-apps/file-schema/wcf/service.md) as demonstrated in the following sample configuration."},{"content":"When you run the sample, the operation requests and responses are displayed in both the service and client console windows.","pos":[2822,2945]},{"content":"Press ENTER in each console window to shut down the service and client.","pos":[2946,3017]},{"pos":[3027,3063],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3073,3272],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3282,3491],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3501,3710],"content":"To run the sample in a single- or cross-computer configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-computer configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[3718,3851],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[14,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[0,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3905,4215],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4216,4266]},{"pos":[4354,4362],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4366,4457],"content":"<bpt id=\"p1\">[</bpt>AppFabric Hosting and Persistence Samples<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=193961)</ept>","source":"[AppFabric Hosting and Persistence Samples](https://go.microsoft.com/fwlink/?LinkId=193961)"}]}