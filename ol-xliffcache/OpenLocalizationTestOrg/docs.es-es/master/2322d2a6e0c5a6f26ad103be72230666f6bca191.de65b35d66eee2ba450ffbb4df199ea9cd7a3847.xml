{"content":"---\ntitle: \"Viewing Message Logs\"\nms.date: \"03/30/2017\"\nms.assetid: 3012fa13-f650-45fb-aaea-c5cca8c7d372\n---\n# Viewing Message Logs\nThis topic describes how you can view message logs.  \n  \n## Viewing Message Logs in the Service Trace Viewer  \n A message will be transformed as it is processed by WCF. Therefore, a message being logged reflects only the message's content at the point it was logged, not the content on the wire.  \n  \n Since the output of message logging has no relationship to the transfer format of the message, message logging always outputs the decoded message. If you have configured message logging properly, any logged message should be in plain text. For example, the format (plain text) of the logged messages is not affected by the usage of a binary message encoder.  \n  \n The output of the XmlWriterTraceListener is a file that contains a sequence of XML fragments. You should be aware that the file is not a valid XML file. It is recommended that you use the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) to view the message log files. For more information on how to use this tool, see [Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting](../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md).  \n  \n In the Service Trace Viewer, messages are listed in the **Message** tab. Messages that have caused, or are related to, a processing error are highlighted in yellow (warning level) or red (error level), depending on the severity of the error. Double-clicking on the message brings up the message trace in the context of the processing request.  \n  \n> [!NOTE]\n>  If a message has no header, no `<header/>` tag is logged.  \n  \n## Viewing Messages Logged by a Client, a Relay, and a Service  \n Your environment may contain a client, which sends a message to a relay, that subsequently forwards the message to the service. When message logging is enabled on all three locations, and all three message logs are viewed in [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) simultaneously, the message log exchanges will be incorrectly rendered. This is because the `CorrelationId` and `ActivityId` in the Message header are not unique for every send-receive pair.  \n  \n You can use either one of the following methods to resolve this problem.  \n  \n-   Only view two of the three message logs in the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) at any time.  \n  \n-   If you must view all three logs in the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) at the same time, you can modify the relay service by creating a new <xref:System.ServiceModel.Channels.Message> instance. This instance should be a copy of the body of the incoming message, plus all the headers except for the `ActivityId` and `Action` headers. The following example code demonstrates how to do this.  \n  \n```csharp\nMessage outgoingMessage = Message.CreateMessage(incomingMessage.Version, incomingMessage.Headers.Action, incomingMessage.GetReaderAtBodyContents());  \n  \nfor (int i = 0; i < incomingMessage.Headers.Count; i++)  \n{  \n   if (incomingMessage.Headers[i].Name.Equals(\"ActivityId\", StringComparison.InvariantCultureIgnoreCase) ||  \nincomingMessage.Headers[i].Name.Equals(\"Action\", StringComparison.InvariantCultureIgnoreCase))  \n   {  \n      continue;  \n    }  \n    outgoingMessage.Headers.CopyHeaderFrom(incomingMessage, i);  \n}  \n```  \n  \n## Exceptional Cases for Inaccurate Message Logging Content  \n Under the following conditions, messages being logged might not be the exact representation of the octet stream present on the wire.  \n  \n-   For BasicHttpBinding, envelope headers are logged for the incoming messages in the /addressing/none namespace.  \n  \n-   White spaces can be mismatched.  \n  \n-   For incoming messages, empty elements can be represented differently. For example, \\<tag>\\</tag> instead of  \\<tag/>  \n  \n-   When known PII logging is disabled either by default or explicit setting enableLoggingKnownPii=\"true\".  \n  \n-   Encoding is enabled for transforming to UTF-8.  \n  \n## See also\n\n- [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)\n- [Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting](../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)\n- [Message Logging](../../../../docs/framework/wcf/diagnostics/message-logging.md)\n","nodes":[{"pos":[4,104],"embed":true,"restype":"x-metadata","content":"title: \"Viewing Message Logs\"\nms.date: \"03/30/2017\"\nms.assetid: 3012fa13-f650-45fb-aaea-c5cca8c7d372","nodes":[{"content":"Viewing Message Logs","nodes":[{"pos":[0,20],"content":"Viewing Message Logs","nodes":[{"content":"Viewing Message Logs","pos":[0,20]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[111,131],"content":"Viewing Message Logs","linkify":"Viewing Message Logs","nodes":[{"content":"Viewing Message Logs","pos":[0,20]}]},{"content":"This topic describes how you can view message logs.","pos":[132,183]},{"pos":[192,240],"content":"Viewing Message Logs in the Service Trace Viewer","linkify":"Viewing Message Logs in the Service Trace Viewer","nodes":[{"content":"Viewing Message Logs in the Service Trace Viewer","pos":[0,48]}]},{"content":"A message will be transformed as it is processed by WCF.","pos":[244,300]},{"content":"Therefore, a message being logged reflects only the message's content at the point it was logged, not the content on the wire.","pos":[301,427]},{"content":"Since the output of message logging has no relationship to the transfer format of the message, message logging always outputs the decoded message.","pos":[434,580]},{"content":"If you have configured message logging properly, any logged message should be in plain text.","pos":[581,673]},{"content":"For example, the format (plain text) of the logged messages is not affected by the usage of a binary message encoder.","pos":[674,791]},{"content":"The output of the XmlWriterTraceListener is a file that contains a sequence of XML fragments.","pos":[798,891]},{"content":"You should be aware that the file is not a valid XML file.","pos":[892,950]},{"content":"It is recommended that you use the <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept> to view the message log files.","pos":[951,1145],"source":" It is recommended that you use the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) to view the message log files."},{"content":"For more information on how to use this tool, see <bpt id=\"p1\">[</bpt>Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)</ept>.","pos":[1146,1407],"source":" For more information on how to use this tool, see [Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting](../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)."},{"content":"In the Service Trace Viewer, messages are listed in the <bpt id=\"p1\">**</bpt>Message<ept id=\"p1\">**</ept> tab. Messages that have caused, or are related to, a processing error are highlighted in yellow (warning level) or red (error level), depending on the severity of the error.","pos":[1414,1655],"source":"In the Service Trace Viewer, messages are listed in the **Message** tab. Messages that have caused, or are related to, a processing error are highlighted in yellow (warning level) or red (error level), depending on the severity of the error."},{"content":"Double-clicking on the message brings up the message trace in the context of the processing request.","pos":[1656,1756]},{"pos":[1764,1832],"content":"[!NOTE]\n If a message has no header, no `<header/>` tag is logged.","leadings":["","> "],"nodes":[{"content":"If a message has no header, no <ph id=\"ph1\">`&lt;header/&gt;`</ph> tag is logged.","pos":[9,66],"source":"If a message has no header, no `<header/>` tag is logged."}]},{"pos":[1841,1900],"content":"Viewing Messages Logged by a Client, a Relay, and a Service","linkify":"Viewing Messages Logged by a Client, a Relay, and a Service","nodes":[{"content":"Viewing Messages Logged by a Client, a Relay, and a Service","pos":[0,59]}]},{"content":"Your environment may contain a client, which sends a message to a relay, that subsequently forwards the message to the service.","pos":[1904,2031]},{"content":"When message logging is enabled on all three locations, and all three message logs are viewed in <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept> simultaneously, the message log exchanges will be incorrectly rendered.","pos":[2032,2329],"source":" When message logging is enabled on all three locations, and all three message logs are viewed in [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) simultaneously, the message log exchanges will be incorrectly rendered."},{"content":"This is because the <ph id=\"ph1\">`CorrelationId`</ph> and <ph id=\"ph2\">`ActivityId`</ph> in the Message header are not unique for every send-receive pair.","pos":[2330,2448],"source":" This is because the `CorrelationId` and `ActivityId` in the Message header are not unique for every send-receive pair."},{"content":"You can use either one of the following methods to resolve this problem.","pos":[2455,2527]},{"pos":[2537,2725],"content":"Only view two of the three message logs in the <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept> at any time.","source":"Only view two of the three message logs in the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) at any time."},{"content":"If you must view all three logs in the <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept> at the same time, you can modify the relay service by creating a new <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.Message&gt;</ph> instance.","pos":[2735,3025],"source":"If you must view all three logs in the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) at the same time, you can modify the relay service by creating a new <xref:System.ServiceModel.Channels.Message> instance."},{"content":"This instance should be a copy of the body of the incoming message, plus all the headers except for the <ph id=\"ph1\">`ActivityId`</ph> and <ph id=\"ph2\">`Action`</ph> headers.","pos":[3026,3164],"source":" This instance should be a copy of the body of the incoming message, plus all the headers except for the `ActivityId` and `Action` headers."},{"content":"The following example code demonstrates how to do this.","pos":[3165,3220]},{"pos":[3774,3830],"content":"Exceptional Cases for Inaccurate Message Logging Content","linkify":"Exceptional Cases for Inaccurate Message Logging Content","nodes":[{"content":"Exceptional Cases for Inaccurate Message Logging Content","pos":[0,56]}]},{"content":"Under the following conditions, messages being logged might not be the exact representation of the octet stream present on the wire.","pos":[3834,3966]},{"content":"For BasicHttpBinding, envelope headers are logged for the incoming messages in the /addressing/none namespace.","pos":[3976,4086]},{"content":"White spaces can be mismatched.","pos":[4096,4127]},{"content":"For incoming messages, empty elements can be represented differently.","pos":[4137,4206]},{"content":"For example, <ph id=\"ph1\">\\&lt;</ph>tag&gt;<ph id=\"ph2\">\\&lt;</ph>/tag&gt; instead of  <ph id=\"ph3\">\\&lt;</ph>tag/&gt;","pos":[4207,4253],"source":" For example, \\<tag>\\</tag> instead of  \\<tag/>"},{"content":"When known PII logging is disabled either by default or explicit setting enableLoggingKnownPii=\"true\".","pos":[4263,4365]},{"content":"Encoding is enabled for transforming to UTF-8.","pos":[4375,4421]},{"pos":[4430,4438],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4442,4570],"content":"<bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept>","source":"[Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)"},{"pos":[4573,4783],"content":"<bpt id=\"p1\">[</bpt>Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)</ept>","source":"[Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting](../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)"},{"pos":[4786,4866],"content":"<bpt id=\"p1\">[</bpt>Message Logging<ept id=\"p1\">](../../../../docs/framework/wcf/diagnostics/message-logging.md)</ept>","source":"[Message Logging](../../../../docs/framework/wcf/diagnostics/message-logging.md)"}]}