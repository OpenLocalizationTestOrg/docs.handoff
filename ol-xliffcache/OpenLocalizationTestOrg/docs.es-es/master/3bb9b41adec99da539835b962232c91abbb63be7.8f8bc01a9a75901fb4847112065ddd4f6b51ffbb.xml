{"content":"---\ntitle: \"&lt;authentication&gt; of &lt;clientCertificate&gt; Element | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 4a55eea2-1826-4026-b911-b7cc9e9c8bfe\ncaps.latest.revision: 16\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# &lt;authentication&gt; of &lt;clientCertificate&gt; Element\nSpecifies authentication behaviors for client certificates used by a service.  \n  \n \\<system.ServiceModel>  \n\\<behaviors>  \n\\<serviceBehaviors>  \n\\<behavior>  \n\\<serviceCredentials>  \n\\<clientCertificate>  \n\\<authentication>  \n  \n## Syntax  \n  \n```  \n  \n<authentication  \ncustomCertificateValidatorType=\"namespace.typeName, [,AssemblyName] [,Version=version number] [,Culture=culture] [,PublicKeyToken=token]\"  \ncertificateValidationMode=\"ChainTrust/None/PeerTrust/PeerOrChainTrust/Custom\"  \nincludeWindowsGroups=\"Boolean\"  \nmapClientCertificateToWindowsAccount=\"Boolean\"  \nrevocationMode=\"NoCheck/Online/Offline\"  \ntrustedStoreLocation=\"CurrentUser/LocalMachine\"   \n/>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|customCertificateValidatorType|Optional string. A type and assembly used to validate a custom type. This attribute must be set when `certificateValidationMode` is set to `Custom`.|  \n|certificateValidationMode|Optional enumeration. Specifies one of the modes used to validate credentials. This attribute is of the <xref:System.Servicemodel.Security.X509CertificateValidation> type. If set to `Custom`, then a `customCertificateValidator` must also be supplied. The default is `ChainTrust`.|  \n|includeWindowsGroups|Optional Boolean. Specifies if Windows groups are included in the security context. Setting this attribute to `true` has a performance impact, as it results in a full group expansion. Set this attribute to `false` if you do not need to establish the list of groups a user belongs to.|  \n|mapClientCertificateToWindowsAcccount|Boolean. Specifies whether the client can be mapped to a Windows identity using the certificate. Active Directory must be enabled to do this.|  \n|revocationMode|Optional enumeration. One of the modes used to check for a revoked certificate lists (RCL). The default is `Online`. This value is ignored when using HTTP transport security.|  \n|trustedStoreLocation|Optional enumeration. One of the two system store locations: `LocalMachine` or `CurrentUser`. This value is used when a service certificate is negotiated to the client. Validation is performed against the **Trusted People** store in the specified store location. The default is `CurrentUser`.|  \n  \n## customCertificateValidatorType Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|String|Specifies the type name and assembly and other data used to find the type.|  \n  \n## certificateValidationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: None, PeerTrust, ChainTrust, PeerOrChainTrust, Custom.<br /><br /> For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## revocationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: NoCheck, Online, Offline. For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md).|  \n  \n## trustedStoreLocation Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Enumeration|One of the following values: `LocalMachine` or `CurrentUser`. The default is `CurrentUser`. If the client application is running under a system account then the certificate is typically under `LocalMachine`. If the client application is running under a user account then the certificate is typically in `CurrentUser`.|  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<clientCertificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials.md)|Defines an X.509 certificate used to authenticate a client to a service.|  \n  \n## Remarks  \n The `<authentication>` element corresponds to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class. It enables you to customize how clients are authenticated. You can set the `certificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`. By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain. This is the most secure mode. You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain. This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority. When deploying a client, use the `ChainTrust` value instead.  \n  \n You can also set the value to `Custom`. When set to the `Custom` value, you must also set the `customCertificateValidatorType` attribute to an assembly and type used to validate the certificate. To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class. For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).  \n  \n## Example  \n The following code specifies an X.509 certificate and a custom validation type in the `<authentication>` element.  \n  \n```  \n<serviceBehaviors>  \n <behavior name=\"myServiceBehavior\">  \n  <clientCertificate>  \n   <certificate   \n         findValue=\"www.cohowinery.com\"   \n         storeLocation=\"CurrentUser\"   \n         storeName=\"TrustedPeople\"  \n         x509FindType=\"FindByIssuerName\" />  \n   <authentication customCertificateValidatorType=\"MyTypes.Coho\"  \n    certificateValidationMode=\"Custom\"   \n    revocationMode=\"Offline\"  \n    includeWindowsGroups=\"false\"   \n    mapClientCertificateToWindowsAccount=\"true\" />  \n  </clientCertificate>  \n </behavior>  \n</serviceBehaviors>  \n```  \n  \n## See Also  \n <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>   \n <xref:System.ServiceModel.Security.X509CertificateValidationMode>   \n <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.Authentication%2A>   \n <xref:System.ServiceModel.Configuration.X509InitiatorCertificateServiceElement.Authentication%2A>   \n <xref:System.ServiceModel.Configuration.X509ClientCertificateAuthenticationElement>   \n [Security Behaviors](../../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md)   \n [How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)   \n [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)","nodes":[{"pos":[4,380],"embed":true,"restype":"x-metadata","content":"title: \"&lt;authentication&gt; of &lt;clientCertificate&gt; Element | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 4a55eea2-1826-4026-b911-b7cc9e9c8bfe\ncaps.latest.revision: 16\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"&lt;authentication&gt; of &lt;clientCertificate&gt; Element | Microsoft Docs","nodes":[{"pos":[0,76],"content":"&lt;authentication&gt; of &lt;clientCertificate&gt; Element | Microsoft Docs","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>authentication<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>clientCertificate<ph id=\"ph4\">&amp;gt;</ph> Element | Microsoft Docs","pos":[0,76],"source":"&lt;authentication&gt; of &lt;clientCertificate&gt; Element | Microsoft Docs"}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[387,446],"content":"&lt;authentication&gt; of &lt;clientCertificate&gt; Element","linkify":"&lt;authentication&gt; of &lt;clientCertificate&gt; Element","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>authentication<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>clientCertificate<ph id=\"ph4\">&amp;gt;</ph> Element","pos":[0,59],"source":"&lt;authentication&gt; of &lt;clientCertificate&gt; Element"}]},{"content":"Specifies authentication behaviors for client certificates used by a service.","pos":[447,524]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[531,553],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behaviors&gt;","pos":[556,568],"source":"\\<behaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceBehaviors&gt;","pos":[571,590],"source":"\\<serviceBehaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behavior&gt;","pos":[593,604],"source":"\\<behavior>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceCredentials&gt;","pos":[607,628],"source":"\\<serviceCredentials>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>clientCertificate&gt;","pos":[631,651],"source":"\\<clientCertificate>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>authentication&gt;","pos":[654,671],"source":"\\<authentication>"},{"pos":[680,686],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1131,1154],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements","pos":[1158,1237]},{"pos":[1247,1257],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1264,1273]},{"content":"Description","pos":[1274,1285]},{"content":"customCertificateValidatorType","pos":[1328,1358]},{"content":"Optional string.","pos":[1359,1375]},{"content":"A type and assembly used to validate a custom type.","pos":[1376,1427]},{"content":"This attribute must be set when <ph id=\"ph1\">`certificateValidationMode`</ph> is set to <ph id=\"ph2\">`Custom`</ph>.","pos":[1428,1507],"source":" This attribute must be set when `certificateValidationMode` is set to `Custom`."},{"content":"certificateValidationMode","pos":[1512,1537]},{"content":"Optional enumeration.","pos":[1538,1559]},{"content":"Specifies one of the modes used to validate credentials.","pos":[1560,1616]},{"content":"This attribute is of the <ph id=\"ph1\">&lt;xref:System.Servicemodel.Security.X509CertificateValidation&gt;</ph> type.","pos":[1617,1709],"source":" This attribute is of the <xref:System.Servicemodel.Security.X509CertificateValidation> type."},{"content":"If set to <ph id=\"ph1\">`Custom`</ph>, then a <ph id=\"ph2\">`customCertificateValidator`</ph> must also be supplied.","pos":[1710,1788],"source":" If set to `Custom`, then a `customCertificateValidator` must also be supplied."},{"content":"The default is <ph id=\"ph1\">`ChainTrust`</ph>.","pos":[1789,1817],"source":" The default is `ChainTrust`."},{"content":"includeWindowsGroups","pos":[1822,1842]},{"content":"Optional Boolean.","pos":[1843,1860]},{"content":"Specifies if Windows groups are included in the security context.","pos":[1861,1926]},{"content":"Setting this attribute to <ph id=\"ph1\">`true`</ph> has a performance impact, as it results in a full group expansion.","pos":[1927,2026],"source":" Setting this attribute to `true` has a performance impact, as it results in a full group expansion."},{"content":"Set this attribute to <ph id=\"ph1\">`false`</ph> if you do not need to establish the list of groups a user belongs to.","pos":[2027,2126],"source":" Set this attribute to `false` if you do not need to establish the list of groups a user belongs to."},{"content":"mapClientCertificateToWindowsAcccount","pos":[2131,2168]},{"content":"Boolean.","pos":[2169,2177]},{"content":"Specifies whether the client can be mapped to a Windows identity using the certificate.","pos":[2178,2265]},{"content":"Active Directory must be enabled to do this.","pos":[2266,2310]},{"content":"revocationMode","pos":[2315,2329]},{"content":"Optional enumeration.","pos":[2330,2351]},{"content":"One of the modes used to check for a revoked certificate lists (RCL).","pos":[2352,2421]},{"content":"The default is <ph id=\"ph1\">`Online`</ph>.","pos":[2422,2446],"source":" The default is `Online`."},{"content":"This value is ignored when using HTTP transport security.","pos":[2447,2504]},{"content":"trustedStoreLocation","pos":[2509,2529]},{"content":"Optional enumeration.","pos":[2530,2551]},{"content":"One of the two system store locations: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[2552,2623],"source":" One of the two system store locations: `LocalMachine` or `CurrentUser`."},{"content":"This value is used when a service certificate is negotiated to the client.","pos":[2624,2698]},{"content":"Validation is performed against the <bpt id=\"p1\">**</bpt>Trusted People<ept id=\"p1\">**</ept> store in the specified store location.","pos":[2699,2792],"source":" Validation is performed against the **Trusted People** store in the specified store location."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[2793,2822],"source":" The default is `CurrentUser`."},{"pos":[2832,2872],"content":"customCertificateValidatorType Attribute","linkify":"customCertificateValidatorType Attribute","nodes":[{"content":"customCertificateValidatorType Attribute","pos":[0,40]}]},{"content":"Value","pos":[2879,2884]},{"content":"Description","pos":[2885,2896]},{"content":"String","pos":[2935,2941]},{"content":"Specifies the type name and assembly and other data used to find the type.","pos":[2942,3016]},{"pos":[3026,3061],"content":"certificateValidationMode Attribute","linkify":"certificateValidationMode Attribute","nodes":[{"content":"certificateValidationMode Attribute","pos":[0,35]}]},{"content":"Value","pos":[3068,3073]},{"content":"Description","pos":[3074,3085]},{"content":"Enumeration","pos":[3124,3135]},{"content":"One of the following values: None, PeerTrust, ChainTrust, PeerOrChainTrust, Custom.","pos":[3136,3219]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[3232,3366],"source":"For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[3376,3400],"content":"revocationMode Attribute","linkify":"revocationMode Attribute","nodes":[{"content":"revocationMode Attribute","pos":[0,24]}]},{"content":"Value","pos":[3407,3412]},{"content":"Description","pos":[3413,3424]},{"content":"Enumeration","pos":[3463,3474]},{"content":"One of the following values: NoCheck, Online, Offline.","pos":[3475,3529]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>.","pos":[3530,3664],"source":" For more information, see [Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)."},{"pos":[3674,3704],"content":"trustedStoreLocation Attribute","linkify":"trustedStoreLocation Attribute","nodes":[{"content":"trustedStoreLocation Attribute","pos":[0,30]}]},{"content":"Value","pos":[3711,3716]},{"content":"Description","pos":[3717,3728]},{"content":"Enumeration","pos":[3767,3778]},{"content":"One of the following values: <ph id=\"ph1\">`LocalMachine`</ph> or <ph id=\"ph2\">`CurrentUser`</ph>.","pos":[3779,3840],"source":"One of the following values: `LocalMachine` or `CurrentUser`."},{"content":"The default is <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3841,3870],"source":" The default is `CurrentUser`."},{"content":"If the client application is running under a system account then the certificate is typically under <ph id=\"ph1\">`LocalMachine`</ph>.","pos":[3871,3986],"source":" If the client application is running under a system account then the certificate is typically under `LocalMachine`."},{"content":"If the client application is running under a user account then the certificate is typically in <ph id=\"ph1\">`CurrentUser`</ph>.","pos":[3987,4096],"source":" If the client application is running under a user account then the certificate is typically in `CurrentUser`."},{"pos":[4107,4121],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[4125,4130]},{"pos":[4140,4155],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[4162,4169]},{"content":"Description","pos":[4170,4181]},{"pos":[4222,4349],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>clientCertificate&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials.md)</ept>","source":"[\\<clientCertificate>](../../../../../docs/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials.md)"},{"content":"Defines an X.509 certificate used to authenticate a client to a service.","pos":[4350,4422]},{"pos":[4432,4439],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`&lt;authentication&gt;`</ph> element corresponds to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication&gt;</ph> class.","pos":[4443,4571],"source":"The `<authentication>` element corresponds to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class."},{"content":"It enables you to customize how clients are authenticated.","pos":[4572,4630]},{"content":"You can set the <ph id=\"ph1\">`certificateValidationMode`</ph> attribute to <ph id=\"ph2\">`None`</ph>, <ph id=\"ph3\">`ChainTrust`</ph>, <ph id=\"ph4\">`PeerOrChainTrust`</ph>, <ph id=\"ph5\">`PeerTrust`</ph>, or <ph id=\"ph6\">`Custom`</ph>.","pos":[4631,4755],"source":" You can set the `certificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`."},{"content":"By default, the level is set to <ph id=\"ph1\">`ChainTrust`</ph>, which specifies that each certificate must be found in a hierarchy of certificates ending in a <bpt id=\"p1\">*</bpt>root authority<ept id=\"p1\">*</ept> at the top of the chain.","pos":[4756,4938],"source":" By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain."},{"content":"This is the most secure mode.","pos":[4939,4968]},{"content":"You can also set the value to <ph id=\"ph1\">`PeerOrChainTrust`</ph>, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain.","pos":[4969,5143],"source":" You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain."},{"content":"This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.","pos":[5144,5294]},{"content":"When deploying a client, use the <ph id=\"ph1\">`ChainTrust`</ph> value instead.","pos":[5295,5355],"source":" When deploying a client, use the `ChainTrust` value instead."},{"content":"You can also set the value to <ph id=\"ph1\">`Custom`</ph>.","pos":[5362,5401],"source":"You can also set the value to `Custom`."},{"content":"When set to the <ph id=\"ph1\">`Custom`</ph> value, you must also set the <ph id=\"ph2\">`customCertificateValidatorType`</ph> attribute to an assembly and type used to validate the certificate.","pos":[5402,5556],"source":" When set to the `Custom` value, you must also set the `customCertificateValidatorType` attribute to an assembly and type used to validate the certificate."},{"content":"To create your own custom validator, you must inherit from the abstract <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.X509CertificateValidator&gt;</ph> class.","pos":[5557,5698],"source":" To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Create a Service that Employs a Custom Certificate Validator<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)</ept>.","pos":[5699,5912],"source":" For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)."},{"pos":[5921,5928],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[5932,6045],"content":"The following code specifies an X.509 certificate and a custom validation type in the <ph id=\"ph1\">`&lt;authentication&gt;`</ph> element.","source":"The following code specifies an X.509 certificate and a custom validation type in the `<authentication>` element."},{"pos":[6629,6637],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Security Behaviors<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md)</ept><ph id=\"ph1\"> </ph>","pos":[7077,7178],"source":"[Security Behaviors](../../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Create a Service that Employs a Custom Certificate Validator<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)</ept><ph id=\"ph1\"> </ph>","pos":[7182,7369],"source":"[How to: Create a Service that Employs a Custom Certificate Validator](../../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md) "},{"content":"<bpt id=\"p1\">[</bpt>Working with Certificates<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>","pos":[7373,7480],"source":"[Working with Certificates](../../../../../docs/framework/wcf/feature-details/working-with-certificates.md)"}]}