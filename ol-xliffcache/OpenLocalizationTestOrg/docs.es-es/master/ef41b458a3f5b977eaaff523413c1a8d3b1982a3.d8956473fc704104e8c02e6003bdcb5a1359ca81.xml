{"content":"---\ntitle: \"Asynchronous Operations (WCF Data Services)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF Data Services, asynchronous operations\"\n  - \"asynchronous operations [WCF Data Services]\"\n  - \"WCF Data Services, client library\"\nms.assetid: 679644c7-e3fc-422c-b14a-b44b683900d0\n---\n# Asynchronous Operations (WCF Data Services)\nWeb applications must accommodate higher latency between client and server than applications that run inside internal networks. To optimize the performance and user experience of your application, we recommend using the asynchronous methods of the <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601> classes when accessing [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] servers over the Web.  \n  \n Although the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] servers process HTTP requests asynchronously, some methods of the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client libraries are synchronous and wait until the entire request-response exchange is completed before continuing execution. The asynchronous methods of the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client libraries do not wait for this exchange to complete and can allow your application to maintain a responsive user interface in the meantime.  \n  \n You can perform asynchronous operations by using a pair of methods on the <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601> classes that start with *Begin* and *End* respectively. The *Begin* methods register a delegate that the service calls when the operation is complete. The *End* methods should be called in the delegate that is registered to handle the callback from the completed operations. When you call the *End* method to complete an asynchronous operation, you must do so from the same <xref:System.Data.Services.Client.DataServiceQuery%601> or <xref:System.Data.Services.Client.DataServiceContext> instance that you used to begin the operation. Each *Begin* method takes a `state` parameter that can pass a state object to the callback. This state object is retrieved from the <xref:System.IAsyncResult> that is supplied with the callback and is used to call the corresponding *End* method to complete the asynchronous operation. For example, when you supply the <xref:System.Data.Services.Client.DataServiceQuery%601> instance as the `state` parameter when you call the <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method on the instance, the same <xref:System.Data.Services.Client.DataServiceQuery%601> instance is returned by the <xref:System.IAsyncResult>. This instance of <xref:System.Data.Services.Client.DataServiceQuery%601> is then used to call the <xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A> method to complete the query operation. For more information, see [How to: Execute Asynchronous Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-asynchronous-data-service-queries-wcf-data-services.md).  \n  \n> [!NOTE]\n>  Only asynchronous operations are supported by the client libraries that are provided in the .NET Framework for Silverlight. For more information, see [WCF Data Services (Silverlight)](https://go.microsoft.com/fwlink/?LinkID=143149).  \n  \n The .NET Framework client libraries support the following asynchronous operations:  \n  \n|Operation|Methods|  \n|---------------|-------------|  \n|Executing a <xref:System.Data.Services.Client.DataServiceQuery%601>.|-   <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A><br />-   <xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A>|  \n|Executing a query from the <xref:System.Data.Services.Client.DataServiceContext>.|-   <xref:System.Data.Services.Client.DataServiceContext.BeginExecute%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndExecute%2A>|  \n|Executing a batch query from the <xref:System.Data.Services.Client.DataServiceContext>.|-   <xref:System.Data.Services.Client.DataServiceContext.BeginExecuteBatch%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndExecuteBatch%2A>|  \n|Loading a related entity into the <xref:System.Data.Services.Client.DataServiceContext>.|-   <xref:System.Data.Services.Client.DataServiceContext.BeginLoadProperty%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndLoadProperty%2A>|  \n|Saving changes to objects in the <xref:System.Data.Services.Client.DataServiceContext>|-   <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A><br />-   <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>|  \n  \n## Threading Considerations for Asynchronous Operations  \n In a multi-threaded application, the delegate that is registered as a callback for the asynchronous operation is not necessarily invoked on the same thread that was used to call the *Begin* method, which creates the initial request. In an application where the callback must be invoked on a specific thread, you must explicitly marshal the execution of the *End* method, which handles the response, to the desired thread. For example, in Windows Presentation Foundation (WPF)-based applications and Silverlight-based applications, the response must be marshaled back to the UI thread by using the <xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A> method on the <xref:System.Windows.Threading.Dispatcher> object. For more information, see [Querying the Data Service (WCF Data Services/Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc903932(v=vs.95)).  \n  \n## See also\n\n- [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)\n","nodes":[{"pos":[4,288],"embed":true,"restype":"x-metadata","content":"title: \"Asynchronous Operations (WCF Data Services)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF Data Services, asynchronous operations\"\n  - \"asynchronous operations [WCF Data Services]\"\n  - \"WCF Data Services, client library\"\nms.assetid: 679644c7-e3fc-422c-b14a-b44b683900d0","nodes":[{"content":"Asynchronous Operations (WCF Data Services)","nodes":[{"pos":[0,43],"content":"Asynchronous Operations (WCF Data Services)","nodes":[{"content":"Asynchronous Operations (WCF Data Services)","pos":[0,43]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[295,338],"content":"Asynchronous Operations (WCF Data Services)","linkify":"Asynchronous Operations (WCF Data Services)","nodes":[{"content":"Asynchronous Operations (WCF Data Services)","pos":[0,43]}]},{"content":"Web applications must accommodate higher latency between client and server than applications that run inside internal networks.","pos":[339,466]},{"content":"To optimize the performance and user experience of your application, we recommend using the asynchronous methods of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> classes when accessing <ph id=\"ph3\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> servers over the Web.","pos":[467,805],"source":" To optimize the performance and user experience of your application, we recommend using the asynchronous methods of the <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601> classes when accessing [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] servers over the Web."},{"content":"Although the <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> servers process HTTP requests asynchronously, some methods of the <ph id=\"ph2\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> client libraries are synchronous and wait until the entire request-response exchange is completed before continuing execution.","pos":[812,1137],"source":"Although the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] servers process HTTP requests asynchronously, some methods of the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client libraries are synchronous and wait until the entire request-response exchange is completed before continuing execution."},{"content":"The asynchronous methods of the <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> client libraries do not wait for this exchange to complete and can allow your application to maintain a responsive user interface in the meantime.","pos":[1138,1376],"source":" The asynchronous methods of the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client libraries do not wait for this exchange to complete and can allow your application to maintain a responsive user interface in the meantime."},{"content":"You can perform asynchronous operations by using a pair of methods on the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> classes that start with <bpt id=\"p1\">*</bpt>Begin<ept id=\"p1\">*</ept> and <bpt id=\"p2\">*</bpt>End<ept id=\"p2\">*</ept> respectively.","pos":[1383,1626],"source":"You can perform asynchronous operations by using a pair of methods on the <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601> classes that start with *Begin* and *End* respectively."},{"content":"The <bpt id=\"p1\">*</bpt>Begin<ept id=\"p1\">*</ept> methods register a delegate that the service calls when the operation is complete.","pos":[1627,1721],"source":" The *Begin* methods register a delegate that the service calls when the operation is complete."},{"content":"The <bpt id=\"p1\">*</bpt>End<ept id=\"p1\">*</ept> methods should be called in the delegate that is registered to handle the callback from the completed operations.","pos":[1722,1845],"source":" The *End* methods should be called in the delegate that is registered to handle the callback from the completed operations."},{"content":"When you call the <bpt id=\"p1\">*</bpt>End<ept id=\"p1\">*</ept> method to complete an asynchronous operation, you must do so from the same <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> instance that you used to begin the operation.","pos":[1846,2104],"source":" When you call the *End* method to complete an asynchronous operation, you must do so from the same <xref:System.Data.Services.Client.DataServiceQuery%601> or <xref:System.Data.Services.Client.DataServiceContext> instance that you used to begin the operation."},{"content":"Each <bpt id=\"p1\">*</bpt>Begin<ept id=\"p1\">*</ept> method takes a <ph id=\"ph1\">`state`</ph> parameter that can pass a state object to the callback.","pos":[2105,2196],"source":" Each *Begin* method takes a `state` parameter that can pass a state object to the callback."},{"content":"This state object is retrieved from the <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> that is supplied with the callback and is used to call the corresponding <bpt id=\"p1\">*</bpt>End<ept id=\"p1\">*</ept> method to complete the asynchronous operation.","pos":[2197,2389],"source":" This state object is retrieved from the <xref:System.IAsyncResult> that is supplied with the callback and is used to call the corresponding *End* method to complete the asynchronous operation."},{"content":"For example, when you supply the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> instance as the <ph id=\"ph2\">`state`</ph> parameter when you call the <ph id=\"ph3\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A&gt;</ph> method on the instance, the same <ph id=\"ph4\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> instance is returned by the <ph id=\"ph5\">&lt;xref:System.IAsyncResult&gt;</ph>.","pos":[2390,2747],"source":" For example, when you supply the <xref:System.Data.Services.Client.DataServiceQuery%601> instance as the `state` parameter when you call the <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method on the instance, the same <xref:System.Data.Services.Client.DataServiceQuery%601> instance is returned by the <xref:System.IAsyncResult>."},{"content":"This instance of <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> is then used to call the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A&gt;</ph> method to complete the query operation.","pos":[2748,2955],"source":" This instance of <xref:System.Data.Services.Client.DataServiceQuery%601> is then used to call the <xref:System.Data.Services.Client.DataServiceQuery%601.EndExecute%2A> method to complete the query operation."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Execute Asynchronous Data Service Queries<ept id=\"p1\">](../../../../docs/framework/data/wcf/how-to-execute-asynchronous-data-service-queries-wcf-data-services.md)</ept>.","pos":[2956,3141],"source":" For more information, see [How to: Execute Asynchronous Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-asynchronous-data-service-queries-wcf-data-services.md)."},{"pos":[3149,3392],"content":"[!NOTE]\n Only asynchronous operations are supported by the client libraries that are provided in the .NET Framework for Silverlight. For more information, see [WCF Data Services (Silverlight)](https://go.microsoft.com/fwlink/?LinkID=143149).","leadings":["","> "],"nodes":[{"content":"Only asynchronous operations are supported by the client libraries that are provided in the .NET Framework for Silverlight. For more information, see [WCF Data Services (Silverlight)](https://go.microsoft.com/fwlink/?LinkID=143149).","pos":[9,241],"nodes":[{"content":"Only asynchronous operations are supported by the client libraries that are provided in the .NET Framework for Silverlight.","pos":[0,123]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>WCF Data Services (Silverlight)<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=143149)</ept>.","pos":[124,232],"source":" For more information, see [WCF Data Services (Silverlight)](https://go.microsoft.com/fwlink/?LinkID=143149)."}]}]},{"content":"The .NET Framework client libraries support the following asynchronous operations:","pos":[3399,3481]},{"content":"Operation","pos":[3488,3497]},{"content":"Methods","pos":[3498,3505]},{"pos":[3544,3612],"content":"Executing a <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph>.","source":"Executing a <xref:System.Data.Services.Client.DataServiceQuery%601>."},{"pos":[3772,3853],"content":"Executing a query from the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","source":"Executing a query from the <xref:System.Data.Services.Client.DataServiceContext>."},{"pos":[4009,4096],"content":"Executing a batch query from the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","source":"Executing a batch query from the <xref:System.Data.Services.Client.DataServiceContext>."},{"pos":[4262,4350],"content":"Loading a related entity into the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","source":"Loading a related entity into the <xref:System.Data.Services.Client.DataServiceContext>."},{"pos":[4516,4602],"content":"Saving changes to objects in the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>","source":"Saving changes to objects in the <xref:System.Data.Services.Client.DataServiceContext>"},{"pos":[4771,4823],"content":"Threading Considerations for Asynchronous Operations","linkify":"Threading Considerations for Asynchronous Operations","nodes":[{"content":"Threading Considerations for Asynchronous Operations","pos":[0,52]}]},{"content":"In a multi-threaded application, the delegate that is registered as a callback for the asynchronous operation is not necessarily invoked on the same thread that was used to call the <bpt id=\"p1\">*</bpt>Begin<ept id=\"p1\">*</ept> method, which creates the initial request.","pos":[4827,5059],"source":"In a multi-threaded application, the delegate that is registered as a callback for the asynchronous operation is not necessarily invoked on the same thread that was used to call the *Begin* method, which creates the initial request."},{"content":"In an application where the callback must be invoked on a specific thread, you must explicitly marshal the execution of the <bpt id=\"p1\">*</bpt>End<ept id=\"p1\">*</ept> method, which handles the response, to the desired thread.","pos":[5060,5248],"source":" In an application where the callback must be invoked on a specific thread, you must explicitly marshal the execution of the *End* method, which handles the response, to the desired thread."},{"content":"For example, in Windows Presentation Foundation (WPF)-based applications and Silverlight-based applications, the response must be marshaled back to the UI thread by using the <ph id=\"ph1\">&lt;xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A&gt;</ph> method on the <ph id=\"ph2\">&lt;xref:System.Windows.Threading.Dispatcher&gt;</ph> object.","pos":[5249,5546],"source":" For example, in Windows Presentation Foundation (WPF)-based applications and Silverlight-based applications, the response must be marshaled back to the UI thread by using the <xref:System.Windows.Threading.Dispatcher.BeginInvoke%2A> method on the <xref:System.Windows.Threading.Dispatcher> object."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Querying the Data Service (WCF Data Services/Silverlight)<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc903932(v=vs.95))</ept>.","pos":[5547,5744],"source":" For more information, see [Querying the Data Service (WCF Data Services/Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc903932(v=vs.95))."},{"pos":[5753,5761],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5765,5872],"content":"<bpt id=\"p1\">[</bpt>WCF Data Services Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</ept>","source":"[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)"}]}