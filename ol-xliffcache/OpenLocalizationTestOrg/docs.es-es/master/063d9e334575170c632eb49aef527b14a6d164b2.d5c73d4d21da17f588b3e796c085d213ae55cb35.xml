{"content":"---\ntitle: \"How to: Examine the Security Context\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"ServiceSecurityContext class\"\n  - \"WCF, security\"\n  - \"Claimset class\"\nms.assetid: 389b5a57-4175-4bc0-ada0-fc750d51149f\n---\n# How to: Examine the Security Context\nWhen programming Windows Communication Foundation (WCF) services, the service security context enables you to determine details about the client credentials and claims used to authenticate with the service. This is done by using the properties of the <xref:System.ServiceModel.ServiceSecurityContext> class.  \n  \n For example, you can retrieve the identity of the current client by using the <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> or the <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> property. To determine whether the client is anonymous, use the <xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A> property.  \n  \n You can also determine what claims are being made on behalf of the client by iterating through the collection of claims in the <xref:System.ServiceModel.ServiceSecurityContext.AuthorizationContext%2A> property.  \n  \n### To get the current security context  \n  \n-   Access the static property <xref:System.ServiceModel.ServiceSecurityContext.Current%2A> to get the current security context. Examine any of the properties of the current context from the reference.  \n  \n### To determine the identity of the caller  \n  \n1.  Print the value of the <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> and <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> properties.  \n  \n### To parse the claims of a caller  \n  \n1.  Return the current <xref:System.IdentityModel.Policy.AuthorizationContext> class. Use the <xref:System.ServiceModel.ServiceSecurityContext.Current%2A> property to return the current service security context, then return the `AuthorizationContext` using the <xref:System.ServiceModel.ServiceSecurityContext.AuthorizationContext%2A> property.  \n  \n2.  Parse the collection of <xref:System.IdentityModel.Claims.ClaimSet> objects returned by the <xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A> property of the <xref:System.IdentityModel.Policy.AuthorizationContext> class.  \n  \n## Example  \n The following example prints the values of the <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> and <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> properties of the current security context and the <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> property, the resource value of the claim, and the <xref:System.IdentityModel.Claims.Claim.Right%2A> property of every claim in the current security context.  \n  \n [!code-csharp[c_PrincipalPermissionAttribute#4](../../../samples/snippets/csharp/VS_Snippets_CFX/c_principalpermissionattribute/cs/source.cs#4)]\n [!code-vb[c_PrincipalPermissionAttribute#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_principalpermissionattribute/vb/source.vb#4)]  \n  \n## Compiling the Code  \n The code uses the following namespaces:  \n  \n-   <xref:System>  \n  \n-   <xref:System.ServiceModel>  \n  \n-   <xref:System.IdentityModel.Policy>  \n  \n-   <xref:System.IdentityModel.Claims>  \n  \n## See also\n\n- [Securing Services](../../../docs/framework/wcf/securing-services.md)\n- [Service Identity and Authentication](../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)\n","nodes":[{"pos":[4,252],"embed":true,"restype":"x-metadata","content":"title: \"How to: Examine the Security Context\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"ServiceSecurityContext class\"\n  - \"WCF, security\"\n  - \"Claimset class\"\nms.assetid: 389b5a57-4175-4bc0-ada0-fc750d51149f","nodes":[{"content":"How to: Examine the Security Context","nodes":[{"pos":[0,36],"content":"How to: Examine the Security Context","nodes":[{"content":"How to: Examine the Security Context","pos":[0,36]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[259,295],"content":"How to: Examine the Security Context","linkify":"How to: Examine the Security Context","nodes":[{"content":"How to: Examine the Security Context","pos":[0,36]}]},{"content":"When programming Windows Communication Foundation (WCF) services, the service security context enables you to determine details about the client credentials and claims used to authenticate with the service.","pos":[296,502]},{"content":"This is done by using the properties of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext&gt;</ph> class.","pos":[503,603],"source":" This is done by using the properties of the <xref:System.ServiceModel.ServiceSecurityContext> class."},{"content":"For example, you can retrieve the identity of the current client by using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A&gt;</ph> or the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A&gt;</ph> property.","pos":[610,842],"source":"For example, you can retrieve the identity of the current client by using the <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> or the <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> property."},{"content":"To determine whether the client is anonymous, use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A&gt;</ph> property.","pos":[843,971],"source":" To determine whether the client is anonymous, use the <xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A> property."},{"pos":[978,1188],"content":"You can also determine what claims are being made on behalf of the client by iterating through the collection of claims in the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.AuthorizationContext%2A&gt;</ph> property.","source":"You can also determine what claims are being made on behalf of the client by iterating through the collection of claims in the <xref:System.ServiceModel.ServiceSecurityContext.AuthorizationContext%2A> property."},{"pos":[1198,1233],"content":"To get the current security context","linkify":"To get the current security context","nodes":[{"content":"To get the current security context","pos":[0,35]}]},{"content":"Access the static property <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.Current%2A&gt;</ph> to get the current security context.","pos":[1243,1367],"source":"Access the static property <xref:System.ServiceModel.ServiceSecurityContext.Current%2A> to get the current security context."},{"content":"Examine any of the properties of the current context from the reference.","pos":[1368,1440]},{"pos":[1450,1489],"content":"To determine the identity of the caller","linkify":"To determine the identity of the caller","nodes":[{"content":"To determine the identity of the caller","pos":[0,39]}]},{"pos":[1499,1675],"content":"Print the value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A&gt;</ph> properties.","source":"Print the value of the <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> and <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> properties."},{"pos":[1685,1716],"content":"To parse the claims of a caller","linkify":"To parse the claims of a caller","nodes":[{"content":"To parse the claims of a caller","pos":[0,31]}]},{"content":"Return the current <ph id=\"ph1\">&lt;xref:System.IdentityModel.Policy.AuthorizationContext&gt;</ph> class.","pos":[1726,1807],"source":"Return the current <xref:System.IdentityModel.Policy.AuthorizationContext> class."},{"content":"Use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.Current%2A&gt;</ph> property to return the current service security context, then return the <ph id=\"ph2\">`AuthorizationContext`</ph> using the <ph id=\"ph3\">&lt;xref:System.ServiceModel.ServiceSecurityContext.AuthorizationContext%2A&gt;</ph> property.","pos":[1808,2066],"source":" Use the <xref:System.ServiceModel.ServiceSecurityContext.Current%2A> property to return the current service security context, then return the `AuthorizationContext` using the <xref:System.ServiceModel.ServiceSecurityContext.AuthorizationContext%2A> property."},{"pos":[2076,2315],"content":"Parse the collection of <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.ClaimSet&gt;</ph> objects returned by the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.IdentityModel.Policy.AuthorizationContext&gt;</ph> class.","source":"Parse the collection of <xref:System.IdentityModel.Claims.ClaimSet> objects returned by the <xref:System.IdentityModel.Policy.AuthorizationContext.ClaimSets%2A> property of the <xref:System.IdentityModel.Policy.AuthorizationContext> class."},{"pos":[2324,2331],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[2335,2786],"content":"The following example prints the values of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A&gt;</ph> properties of the current security context and the <ph id=\"ph3\">&lt;xref:System.IdentityModel.Claims.Claim.ClaimType%2A&gt;</ph> property, the resource value of the claim, and the <ph id=\"ph4\">&lt;xref:System.IdentityModel.Claims.Claim.Right%2A&gt;</ph> property of every claim in the current security context.","source":"The following example prints the values of the <xref:System.ServiceModel.ServiceSecurityContext.WindowsIdentity%2A> and <xref:System.ServiceModel.ServiceSecurityContext.PrimaryIdentity%2A> properties of the current security context and the <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> property, the resource value of the claim, and the <xref:System.IdentityModel.Claims.Claim.Right%2A> property of every claim in the current security context."},{"pos":[3093,3111],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"content":"The code uses the following namespaces:","pos":[3115,3154]},{"pos":[3310,3318],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3322,3391],"content":"<bpt id=\"p1\">[</bpt>Securing Services<ept id=\"p1\">](../../../docs/framework/wcf/securing-services.md)</ept>","source":"[Securing Services](../../../docs/framework/wcf/securing-services.md)"},{"pos":[3394,3515],"content":"<bpt id=\"p1\">[</bpt>Service Identity and Authentication<ept id=\"p1\">](../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)</ept>","source":"[Service Identity and Authentication](../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)"}]}