{"content":"---\ntitle: \"WS Reliable Session\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Reliable session\"\nms.assetid: 86e914f2-060b-432b-bd17-333695317745\n---\n# WS Reliable Session\nThis sample demonstrates the use of reliable sessions. Reliable sessions provide support for reliable messaging and sessions. Reliable messaging retries communication on failure and allows delivery assurances to be specified, such as in-order arrival of messages. Sessions maintain state for clients between calls. The sample implements sessions for maintaining client state and specifies in-order delivery assurances.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Binding\\WS\\wsReliableSession`  \n  \n This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service. The reliable session features are enabled and configured in the application configuration files for the client and service.  \n  \n In this sample, the service is hosted in Internet Information Services (IIS) and the client is a console application (.exe).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The sample uses the `wsHttpBinding`. The binding is specified in the configuration files for both the client and service. The binding type is specified in the endpoint element’s `binding` attribute as shown in the following sample configuration.  \n  \n```xml  \n<endpoint address=\"\"  \n          binding=\"wsHttpBinding\"  \n          bindingConfiguration=\"Binding1\"   \n          contract=\"Microsoft.ServiceModel.Samples.ICalculator\" />  \n```  \n  \n The endpoint contains a `bindingConfiguration` attribute that references a binding configuration named \"Binding1.\" The binding configuration enables reliable sessions by setting the `enabled` attribute of the [\\<reliableSession>](../../../../docs/framework/configure-apps/file-schema/wcf/reliablesession.md) to `true`. Delivery assurances for ordered sessions are controlled by setting the ordered attribute to `true` or `false`. The default is `true`.  \n  \n```xml  \n<bindings>  \n    <wsHttpBinding>  \n        <binding name=\"Binding1\">  \n            <reliableSession enabled=\"true\" />  \n        </binding>  \n    </wsHttpBinding>  \n</bindings>  \n```  \n  \n The service implementation class implements <xref:System.ServiceModel.InstanceContextMode.PerSession> instancing to maintain a separate class instance for each client, as shown in the following sample code.  \n\n```csharp\n[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)] public class CalculatorService : ICalculator  \n{  \n    ...  \n}  \n```\n  \n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Install [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 4.0 using the following command.  \n  \n    ```  \n    %windir%\\Microsoft.NET\\Framework\\v4.0.XXXXX\\aspnet_regiis.exe /i /enable  \n    ```  \n  \n2.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n3.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n4.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n","nodes":[{"pos":[4,148],"embed":true,"restype":"x-metadata","content":"title: \"WS Reliable Session\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Reliable session\"\nms.assetid: 86e914f2-060b-432b-bd17-333695317745","nodes":[{"content":"WS Reliable Session","nodes":[{"pos":[0,19],"content":"WS Reliable Session","nodes":[{"content":"WS Reliable Session","pos":[0,19]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[155,174],"content":"WS Reliable Session","linkify":"WS Reliable Session","nodes":[{"content":"WS Reliable Session","pos":[0,19]}]},{"content":"This sample demonstrates the use of reliable sessions.","pos":[175,229]},{"content":"Reliable sessions provide support for reliable messaging and sessions.","pos":[230,300]},{"content":"Reliable messaging retries communication on failure and allows delivery assurances to be specified, such as in-order arrival of messages.","pos":[301,438]},{"content":"Sessions maintain state for clients between calls.","pos":[439,489]},{"content":"The sample implements sessions for maintaining client state and specifies in-order delivery assurances.","pos":[490,593]},{"pos":[601,733],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[787,1097],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[1098,1148]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept> that implements a calculator service.","pos":[1237,1386],"source":"This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service."},{"content":"The reliable session features are enabled and configured in the application configuration files for the client and service.","pos":[1387,1510]},{"content":"In this sample, the service is hosted in Internet Information Services (IIS) and the client is a console application (.exe).","pos":[1517,1641]},{"pos":[1649,1756],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The sample uses the <ph id=\"ph1\">`wsHttpBinding`</ph>.","pos":[1763,1799],"source":"The sample uses the `wsHttpBinding`."},{"content":"The binding is specified in the configuration files for both the client and service.","pos":[1800,1884]},{"content":"The binding type is specified in the endpoint element’s <ph id=\"ph1\">`binding`</ph> attribute as shown in the following sample configuration.","pos":[1885,2008],"source":" The binding type is specified in the endpoint element’s `binding` attribute as shown in the following sample configuration."},{"content":"The endpoint contains a <ph id=\"ph1\">`bindingConfiguration`</ph> attribute that references a binding configuration named \"Binding1.\"","pos":[2206,2320],"source":"The endpoint contains a `bindingConfiguration` attribute that references a binding configuration named \"Binding1.\""},{"content":"The binding configuration enables reliable sessions by setting the <ph id=\"ph1\">`enabled`</ph> attribute of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>reliableSession&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/reliablesession.md)</ept> to <ph id=\"ph3\">`true`</ph>.","pos":[2321,2524],"source":" The binding configuration enables reliable sessions by setting the `enabled` attribute of the [\\<reliableSession>](../../../../docs/framework/configure-apps/file-schema/wcf/reliablesession.md) to `true`."},{"content":"Delivery assurances for ordered sessions are controlled by setting the ordered attribute to <ph id=\"ph1\">`true`</ph> or <ph id=\"ph2\">`false`</ph>.","pos":[2525,2635],"source":" Delivery assurances for ordered sessions are controlled by setting the ordered attribute to `true` or `false`."},{"content":"The default is <ph id=\"ph1\">`true`</ph>.","pos":[2636,2658],"source":" The default is `true`."},{"pos":[2861,3067],"content":"The service implementation class implements <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode.PerSession&gt;</ph> instancing to maintain a separate class instance for each client, as shown in the following sample code.","source":"The service implementation class implements <xref:System.ServiceModel.InstanceContextMode.PerSession> instancing to maintain a separate class instance for each client, as shown in the following sample code."},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[3224,3329]},{"content":"Press ENTER in the client window to shut down the client.","pos":[3330,3387]},{"pos":[3571,3607],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3617,3715],"content":"Install <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> 4.0 using the following command.","source":"Install [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 4.0 using the following command."},{"pos":[3827,4026],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[4036,4245],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4255,4463],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."}]}