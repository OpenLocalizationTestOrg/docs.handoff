{"content":"---\ntitle: \"How to: Measure PLINQ Query Performance | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"PLINQ queries, how to measure performance\"\nms.assetid: 491ba43b-2c10-473d-9aab-e2cb96446711\ncaps.latest.revision: 7\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# How to: Measure PLINQ Query Performance\nThis example shows how use the <xref:System.Diagnostics.Stopwatch> class to measure the time it takes for a PLINQ query to execute.  \n  \n## Example  \n This example uses an empty `foreach` loop (`For Each` in Visual Basic) to measure the time it takes for the query to execute. In real-world code, the loop typically contains additional processing steps that add to the total query execution time. Notice that the stopwatch is not started until just before the loop, because that is when the query execution begins. If you require more fine-grained measurement, you can use the `ElapsedTicks` property instead of `ElapsedMilliseconds`.  \n  \n [!code-csharp[PLINQ#19](../../../samples/snippets/csharp/VS_Snippets_Misc/plinq/cs/measure2.cs#19)]\n [!code-vb[PLINQ#19](../../../samples/snippets/visualbasic/VS_Snippets_Misc/plinq/vb/measure2.vb#19)]  \n  \n The total execution time is a useful metric when you are experimenting with query implementations, but it does not always tell the whole story. To get a deeper and richer view of the interaction of the query threads with one another and with other running processes, use the Concurrency Visualizer. For more information, see [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer).  \n  \n## See Also  \n [Parallel LINQ (PLINQ)](../../../docs/standard/parallel-programming/parallel-linq-plinq.md)","nodes":[{"pos":[4,422],"embed":true,"restype":"x-metadata","content":"title: \"How to: Measure PLINQ Query Performance | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"PLINQ queries, how to measure performance\"\nms.assetid: 491ba43b-2c10-473d-9aab-e2cb96446711\ncaps.latest.revision: 7\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","nodes":[{"content":"How to: Measure PLINQ Query Performance | Microsoft Docs","nodes":[{"pos":[0,56],"content":"How to: Measure PLINQ Query Performance | Microsoft Docs","nodes":[{"content":"How to: Measure PLINQ Query Performance | Microsoft Docs","pos":[0,56]}]}],"path":["title"]}],"yml":true},{"pos":[429,468],"content":"How to: Measure PLINQ Query Performance","linkify":"How to: Measure PLINQ Query Performance","nodes":[{"content":"How to: Measure PLINQ Query Performance","pos":[0,39]}]},{"content":"This example shows how use the <ph id=\"ph1\">&lt;xref:System.Diagnostics.Stopwatch&gt;</ph> class to measure the time it takes for a PLINQ query to execute.","pos":[469,600],"source":"This example shows how use the <xref:System.Diagnostics.Stopwatch> class to measure the time it takes for a PLINQ query to execute."},{"pos":[609,616],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"This example uses an empty <ph id=\"ph1\">`foreach`</ph> loop (<ph id=\"ph2\">`For Each`</ph> in Visual Basic) to measure the time it takes for the query to execute.","pos":[620,745],"source":"This example uses an empty `foreach` loop (`For Each` in Visual Basic) to measure the time it takes for the query to execute."},{"content":"In real-world code, the loop typically contains additional processing steps that add to the total query execution time.","pos":[746,865]},{"content":"Notice that the stopwatch is not started until just before the loop, because that is when the query execution begins.","pos":[866,983]},{"content":"If you require more fine-grained measurement, you can use the <ph id=\"ph1\">`ElapsedTicks`</ph> property instead of <ph id=\"ph2\">`ElapsedMilliseconds`</ph>.","pos":[984,1103],"source":" If you require more fine-grained measurement, you can use the `ElapsedTicks` property instead of `ElapsedMilliseconds`."},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>PLINQ#19<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_Misc/plinq/cs/measure2.cs#19)</ept><ept id=\"p1\">]</ept>","pos":[1110,1209],"source":"[!code-csharp[PLINQ#19](../../../samples/snippets/csharp/VS_Snippets_Misc/plinq/cs/measure2.cs#19)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>PLINQ#19<ept id=\"p2\">](../../../samples/snippets/visualbasic/VS_Snippets_Misc/plinq/vb/measure2.vb#19)</ept><ept id=\"p1\">]</ept>","pos":[1211,1311],"source":"[!code-vb[PLINQ#19](../../../samples/snippets/visualbasic/VS_Snippets_Misc/plinq/vb/measure2.vb#19)]"},{"content":"The total execution time is a useful metric when you are experimenting with query implementations, but it does not always tell the whole story.","pos":[1318,1461]},{"content":"To get a deeper and richer view of the interaction of the query threads with one another and with other running processes, use the Concurrency Visualizer.","pos":[1462,1616]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Concurrency Visualizer<ept id=\"p1\">](/visualstudio/profiling/concurrency-visualizer)</ept>.","pos":[1617,1716],"source":" For more information, see [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer)."},{"pos":[1725,1733],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[1737,1828],"content":"<bpt id=\"p1\">[</bpt>Parallel LINQ (PLINQ)<ept id=\"p1\">](../../../docs/standard/parallel-programming/parallel-linq-plinq.md)</ept>","source":"[Parallel LINQ (PLINQ)](../../../docs/standard/parallel-programming/parallel-linq-plinq.md)"}]}