{"content":"---\ntitle: \"ICLRPolicyManager::SetActionOnFailure Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICLRPolicyManager.SetActionOnFailure\"\napi_location: \n  - \"mscoree.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICLRPolicyManager::SetActionOnFailure\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"SetActionOnFailure method [.NET Framework hosting]\"\n  - \"ICLRPolicyManager::SetActionOnFailure method [.NET Framework hosting]\"\nms.assetid: 4664033f-db97-4388-b988-2ec470796e58\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 12\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# ICLRPolicyManager::SetActionOnFailure Method\nSpecifies the policy action the common language runtime (CLR) should take when the specified failure occurs.  \n  \n## Syntax  \n  \n```  \nHRESULT SetActionOnFailure (  \n    [in] EClrFailure   failure,  \n    [in] EPolicyAction action  \n);  \n```  \n  \n#### Parameters  \n `failure`  \n [in] One of the [EClrFailure](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) values, indicating the type of failure for which to take action.  \n  \n `action`  \n [in] One of the [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values, indicating the action to be taken when a failure occurs. For a list of supported values, see the Remarks section.  \n  \n## Return Value  \n  \n|HRESULT|Description|  \n|-------------|-----------------|  \n|S_OK|`SetActionOnFailure` returned successfully.|  \n|HOST_E_CLRNOTAVAILABLE|The CLR has not been loaded into a process, or the CLR is in a state in which it cannot run managed code or process the call successfully.|  \n|HOST_E_TIMEOUT|The call timed out.|  \n|HOST_E_NOT_OWNER|The caller does not own the lock.|  \n|HOST_E_ABANDONED|An event was canceled while a blocked thread or fiber was waiting on it.|  \n|E_FAIL|An unknown catastrophic failure occurred. After a method returns E_FAIL, the CLR is no longer usable within the process. Subsequent calls to hosting methods return HOST_E_CLRNOTAVAILABLE.|  \n|E_INVALIDARG|A policy action cannot be set for the specified operation, or an invalid policy action was specified for the operation.|  \n  \n## Remarks  \n By default, the CLR throws an exception when it fails to allocate a resource such as memory. `SetActionOnFailure` allows the host to override this behavior by specifying the policy action to take upon failure. The following table shows the combinations of [EClrFailure](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) and [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values that are supported. (The FAIL_ prefix is omitted from [EClrFailure](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) values.)  \n  \n||NonCriticalResource|CriticalResource|FatalRuntime|OrphanedLock|StackOverflow|AccessViolation|CodeContract|  \n|-|-------------------------|----------------------|------------------|------------------|-------------------|---------------------|------------------|  \n|`eNoAction`|X|X||||N/A||  \n|eThrowException|X|X||||N/A||  \n|`eAbortThread`|X|X||||N/A|X|  \n|`eRudeAbortThread`|X|X||||N/A|X|  \n|`eUnloadAppDomain`|X|X||X||N/A|X|  \n|`eRudeUnloadAppDomain`|X|X||X|X|N/A|X|  \n|`eExitProcess`|X|X||X|X|N/A|X|  \n|eFastExitProcess|X|X||X|X|N/A||  \n|`eRudeExitProcess`|X|X|X|X|X|N/A||  \n|`eDisableRuntime`|X|X|X|X|X|N/A||  \n  \n## Requirements  \n **Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md).  \n  \n **Header:** MSCorEE.h  \n  \n **Library:** Included as a resource in MSCorEE.dll  \n  \n **.NET Framework Versions:** [!INCLUDE[net_current_v20plus](../../../../includes/net-current-v20plus-md.md)]  \n  \n## See Also  \n [EClrFailure Enumeration](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md)   \n [EPolicyAction Enumeration](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)   \n [ICLRControl Interface](../../../../docs/framework/unmanaged-api/hosting/iclrcontrol-interface.md)   \n [ICLRPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)","nodes":[{"pos":[4,741],"embed":true,"restype":"x-metadata","content":"title: \"ICLRPolicyManager::SetActionOnFailure Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICLRPolicyManager.SetActionOnFailure\"\napi_location: \n  - \"mscoree.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICLRPolicyManager::SetActionOnFailure\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"SetActionOnFailure method [.NET Framework hosting]\"\n  - \"ICLRPolicyManager::SetActionOnFailure method [.NET Framework hosting]\"\nms.assetid: 4664033f-db97-4388-b988-2ec470796e58\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 12\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","nodes":[{"content":"ICLRPolicyManager::SetActionOnFailure Method | Microsoft Docs","nodes":[{"pos":[0,61],"content":"ICLRPolicyManager::SetActionOnFailure Method | Microsoft Docs","nodes":[{"content":"ICLRPolicyManager::SetActionOnFailure Method | Microsoft Docs","pos":[0,61]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[748,792],"content":"ICLRPolicyManager::SetActionOnFailure Method","linkify":"ICLRPolicyManager::SetActionOnFailure Method","nodes":[{"content":"ICLRPolicyManager::SetActionOnFailure Method","pos":[0,44]}]},{"content":"Specifies the policy action the common language runtime (CLR) should take when the specified failure occurs.","pos":[793,901]},{"pos":[910,916],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1044,1054],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] One of the <bpt id=\"p1\">[</bpt>EClrFailure<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md)</ept> values, indicating the type of failure for which to take action.","pos":[1071,1242],"source":"[in] One of the [EClrFailure](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) values, indicating the type of failure for which to take action."},{"content":"[in] One of the <bpt id=\"p1\">[</bpt>EPolicyAction<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)</ept> values, indicating the action to be taken when a failure occurs.","pos":[1261,1436],"source":"[in] One of the [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values, indicating the action to be taken when a failure occurs."},{"content":"For a list of supported values, see the Remarks section.","pos":[1437,1493]},{"pos":[1502,1514],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"HRESULT","pos":[1521,1528]},{"content":"Description","pos":[1529,1540]},{"content":"S_OK","pos":[1581,1585]},{"pos":[1586,1629],"content":"<ph id=\"ph1\">`SetActionOnFailure`</ph> returned successfully.","source":"`SetActionOnFailure` returned successfully."},{"content":"HOST_E_CLRNOTAVAILABLE","pos":[1634,1656]},{"content":"The CLR has not been loaded into a process, or the CLR is in a state in which it cannot run managed code or process the call successfully.","pos":[1657,1795]},{"content":"HOST_E_TIMEOUT","pos":[1800,1814]},{"content":"The call timed out.","pos":[1815,1834]},{"content":"HOST_E_NOT_OWNER","pos":[1839,1855]},{"content":"The caller does not own the lock.","pos":[1856,1889]},{"content":"HOST_E_ABANDONED","pos":[1894,1910]},{"content":"An event was canceled while a blocked thread or fiber was waiting on it.","pos":[1911,1983]},{"content":"E_FAIL","pos":[1988,1994]},{"content":"An unknown catastrophic failure occurred.","pos":[1995,2036]},{"content":"After a method returns E_FAIL, the CLR is no longer usable within the process.","pos":[2037,2115]},{"content":"Subsequent calls to hosting methods return HOST_E_CLRNOTAVAILABLE.","pos":[2116,2182]},{"content":"E_INVALIDARG","pos":[2187,2199]},{"content":"A policy action cannot be set for the specified operation, or an invalid policy action was specified for the operation.","pos":[2200,2319]},{"pos":[2329,2336],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"By default, the CLR throws an exception when it fails to allocate a resource such as memory.","pos":[2340,2432]},{"content":"<ph id=\"ph1\">`SetActionOnFailure`</ph> allows the host to override this behavior by specifying the policy action to take upon failure.","pos":[2433,2549],"source":"`SetActionOnFailure` allows the host to override this behavior by specifying the policy action to take upon failure."},{"content":"The following table shows the combinations of <bpt id=\"p1\">[</bpt>EClrFailure<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md)</ept> and <bpt id=\"p2\">[</bpt>EPolicyAction<ept id=\"p2\">](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)</ept> values that are supported.","pos":[2550,2812],"source":" The following table shows the combinations of [EClrFailure](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) and [EPolicyAction](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) values that are supported."},{"content":"(The FAIL_ prefix is omitted from <bpt id=\"p1\">[</bpt>EClrFailure<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md)</ept> values.)","pos":[2813,2946],"source":" (The FAIL_ prefix is omitted from [EClrFailure](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) values.)"},{"content":"NonCriticalResource","pos":[2954,2973]},{"content":"CriticalResource","pos":[2974,2990]},{"content":"FatalRuntime","pos":[2991,3003]},{"content":"OrphanedLock","pos":[3004,3016]},{"content":"StackOverflow","pos":[3017,3030]},{"content":"AccessViolation","pos":[3031,3046]},{"content":"CodeContract","pos":[3047,3059]},{"content":"X","pos":[3230,3231]},{"content":"X","pos":[3232,3233]},{"content":"N/A","pos":[3237,3240]},{"content":"eThrowException","pos":[3246,3261]},{"content":"X","pos":[3262,3263]},{"content":"X","pos":[3264,3265]},{"content":"N/A","pos":[3269,3272]},{"content":"X","pos":[3293,3294]},{"content":"X","pos":[3295,3296]},{"content":"N/A","pos":[3300,3303]},{"content":"X","pos":[3304,3305]},{"content":"X","pos":[3329,3330]},{"content":"X","pos":[3331,3332]},{"content":"N/A","pos":[3336,3339]},{"content":"X","pos":[3340,3341]},{"content":"X","pos":[3365,3366]},{"content":"X","pos":[3367,3368]},{"content":"X","pos":[3370,3371]},{"content":"N/A","pos":[3373,3376]},{"content":"X","pos":[3377,3378]},{"content":"X","pos":[3406,3407]},{"content":"X","pos":[3408,3409]},{"content":"X","pos":[3411,3412]},{"content":"X","pos":[3413,3414]},{"content":"N/A","pos":[3415,3418]},{"content":"X","pos":[3419,3420]},{"content":"X","pos":[3440,3441]},{"content":"X","pos":[3442,3443]},{"content":"X","pos":[3445,3446]},{"content":"X","pos":[3447,3448]},{"content":"N/A","pos":[3449,3452]},{"content":"X","pos":[3453,3454]},{"content":"eFastExitProcess","pos":[3459,3475]},{"content":"X","pos":[3476,3477]},{"content":"X","pos":[3478,3479]},{"content":"X","pos":[3481,3482]},{"content":"X","pos":[3483,3484]},{"content":"N/A","pos":[3485,3488]},{"content":"X","pos":[3513,3514]},{"content":"X","pos":[3515,3516]},{"content":"X","pos":[3517,3518]},{"content":"X","pos":[3519,3520]},{"content":"X","pos":[3521,3522]},{"content":"N/A","pos":[3523,3526]},{"content":"X","pos":[3550,3551]},{"content":"X","pos":[3552,3553]},{"content":"X","pos":[3554,3555]},{"content":"X","pos":[3556,3557]},{"content":"X","pos":[3558,3559]},{"content":"N/A","pos":[3560,3563]},{"pos":[3574,3586],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3590,3694],"content":"<bpt id=\"p1\">**</bpt>Platforms:<ept id=\"p1\">**</ept> See <bpt id=\"p2\">[</bpt>System Requirements<ept id=\"p2\">](../../../../docs/framework/get-started/system-requirements.md)</ept>.","source":"**Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md)."},{"pos":[3701,3722],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> MSCorEE.h","source":"**Header:** MSCorEE.h"},{"pos":[3729,3779],"content":"<bpt id=\"p1\">**</bpt>Library:<ept id=\"p1\">**</ept> Included as a resource in MSCorEE.dll","source":"**Library:** Included as a resource in MSCorEE.dll"},{"pos":[3786,3814],"content":"<bpt id=\"p1\">**</bpt>.NET Framework Versions:<ept id=\"p1\">**</ept>","source":"**.NET Framework Versions:**"},{"pos":[3903,3911],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>EClrFailure Enumeration<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md)</ept><ph id=\"ph1\"> </ph>","pos":[3915,4018],"source":"[EClrFailure Enumeration](../../../../docs/framework/unmanaged-api/hosting/eclrfailure-enumeration.md) "},{"content":"<bpt id=\"p1\">[</bpt>EPolicyAction Enumeration<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md)</ept><ph id=\"ph1\"> </ph>","pos":[4022,4129],"source":"[EPolicyAction Enumeration](../../../../docs/framework/unmanaged-api/hosting/epolicyaction-enumeration.md) "},{"content":"<bpt id=\"p1\">[</bpt>ICLRControl Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrcontrol-interface.md)</ept><ph id=\"ph1\"> </ph>","pos":[4133,4232],"source":"[ICLRControl Interface](../../../../docs/framework/unmanaged-api/hosting/iclrcontrol-interface.md) "},{"content":"<bpt id=\"p1\">[</bpt>ICLRPolicyManager Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)</ept>","pos":[4236,4346],"source":"[ICLRPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)"}]}