{"content":"---\ntitle: \"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration\"\nms.date: \"03/30/2017\"\nms.assetid: b05c1742-8d0a-4673-9d71-725b18a3008e\n---\n# How to: Add an ASP.NET AJAX Endpoint Without Using Configuration\nWindows Communication Foundation (WCF) allows you to create a service that exposes an ASP.NET AJAX-enabled endpoint that can be called from JavaScript on a client Web site. To create such an endpoint, you can either use a configuration file, as with all other WCF endpoints, or use a method that does not require any configuration elements. This topic demonstrates the second approach.  \n  \n To create services with ASP.NET AJAX endpoints without configuration, the services must be hosted by Internet Information Services (IIS). To activate an ASP.NET AJAX endpoint using this approach, specify the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> as the Factory parameter in the [\\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive in the .svc file. This custom factory is the component that automatically configures an ASP.NET AJAX endpoint so that it can be called from JavaScript on a client Web site.  \n  \n For a working example, see the [AJAX Service Without Configuration](../../../../docs/framework/wcf/samples/ajax-service-without-configuration.md).  \n  \n For an outline of how to configure an ASP.NET AJAX endpoint using configuration elements, see [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md).  \n  \n### To create a basic WCF service  \n  \n1.  Define a basic WCF service contract with an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute> attribute. Mark each operation with the <xref:System.ServiceModel.OperationContractAttribute>. Be sure to set the <xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A> property.  \n  \n    ```csharp  \n    [ServiceContract(Namespace = \"MyService\")]]  \n    public interface ICalculator  \n    {  \n        [OperationContract]  \n        // This operation returns the sum of d1 and d2.  \n        double Add(double n1, double n2);  \n  \n        //Other operations omitted…  \n  \n    }  \n    ```  \n  \n2.  Implement the `ICalculator` service contract with a `CalculatorService`.  \n  \n    ```csharp  \n    public class CalculatorService : ICalculator  \n    {  \n        public double Add(double n1, double n2)  \n        {  \n            return n1 + n2;  \n        }  \n  \n    //Other operations omitted…  \n    ```  \n  \n3.  Define a namespace for the `ICalculator` and `CalculatorService` implementations by wrapping them in a namespace block.  \n  \n    ```csharp  \n    Namespace Microsoft.Ajax.Samples  \n    {  \n        //Include the code for ICalculator and Caculator here.  \n    }  \n    ```  \n  \n### To host the service in Internet Information Services without configuration  \n  \n1.  Create a new file named service with a .svc extension in the application. Edit this file by adding the appropriate [\\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive information for the service. Specify that the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> is to be used in the [\\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive to automatically configure an ASP.NET AJAX endpoint.  \n  \n    ```  \n    <%@ServiceHost   \n        language=c#   \n        Debug=\"true\"   \n        Service=\"Microsoft.Ajax.Samples.CalculatorService\"  \n        Factory=System.ServiceModel.Activation.WebScriptServiceHostFactory  \n    %>  \n    ```  \n  \n2.  Build the service and call it from the client. Internet Information Services (IIS) activates the service when called. For more information about hosting in IIS, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).  \n  \n### To call the service  \n  \n1.  The endpoint is configured at an empty address relative to the .svc file, so the service is now available and can be invoked by sending requests to service.svc/\\<operation> - for example, service.svc/Add for the `Add` operation. You can use it by entering the service URL into the Scripts collection of the ASP.NET AJAX Script Manager control. For an example, see the [AJAX Service Without Configuration](../../../../docs/framework/wcf/samples/ajax-service-without-configuration.md).  \n  \n## Example  \n  \n The automatically-configured endpoint is created at an empty address relative to the base URL. A configuration file can also be added and used with this approach. If the configuration file contains endpoint definitions, these endpoints are added to the automatically-configured endpoint.  \n  \n For example, service.svc uses the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> and the service directory contains a Web.config file that defines an endpoint for the same service using the <xref:System.ServiceModel.BasicHttpBinding> at the \"soap\" relative address. In this case, the service contains two endpoints: one at service.svc (which responds to ASP.NET AJAX requests) and another at service.svc/soap (which responds to SOAP requests).  \n  \n If the configuration file defines an endpoint at an empty relative address and the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> is used, an exception is thrown and the service fails to start.  \n  \n You cannot use configuration to modify settings on the automatically-configured endpoint. If any setting (such as a reader quota) must be modified, you must not use the configuration-free approach by removing the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> from the .svc file and creating a configuration entry for the endpoint.  \n  \n If your service requires ASP.NET Compatibility Mode - for example, if it uses the <xref:System.Web.HttpContext> class or ASP.NET authorization mechanisms - a configuration file is still required to turn on this mode. The configuration element required is the [\\<serviceHostingEnvironment>](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) element, which must be added as follows.  \n  \n `<system.serviceModel>`  \n  \n `<serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /> </system.serviceModel>`  \n  \n For more information, see the [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md) topic.  \n  \n The <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> class is a derived class of <xref:System.ServiceModel.Activation.ServiceHostFactory>. For a detailed explanation of the service host factory mechanism, see the [Extending Hosting Using ServiceHostFactory](../../../../docs/framework/wcf/extending/extending-hosting-using-servicehostfactory.md) topic.  \n  \n## See also\n\n- [Creating WCF Services for ASP.NET AJAX](../../../../docs/framework/wcf/feature-details/creating-wcf-services-for-aspnet-ajax.md)\n- [How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF](../../../../docs/framework/wcf/feature-details/how-to-migrate-ajax-enabled-aspnet-web-services-to-wcf.md)\n","nodes":[{"pos":[4,148],"embed":true,"restype":"x-metadata","content":"title: \"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration\"\nms.date: \"03/30/2017\"\nms.assetid: b05c1742-8d0a-4673-9d71-725b18a3008e","nodes":[{"content":"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration","nodes":[{"pos":[0,64],"content":"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration","nodes":[{"content":"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration","pos":[0,64]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[155,219],"content":"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration","linkify":"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration","nodes":[{"content":"How to: Add an ASP.NET AJAX Endpoint Without Using Configuration","pos":[0,64]}]},{"content":"Windows Communication Foundation (WCF) allows you to create a service that exposes an ASP.NET AJAX-enabled endpoint that can be called from JavaScript on a client Web site.","pos":[220,392]},{"content":"To create such an endpoint, you can either use a configuration file, as with all other WCF endpoints, or use a method that does not require any configuration elements.","pos":[393,560]},{"content":"This topic demonstrates the second approach.","pos":[561,605]},{"content":"To create services with ASP.NET AJAX endpoints without configuration, the services must be hosted by Internet Information Services (IIS).","pos":[612,749]},{"content":"To activate an ASP.NET AJAX endpoint using this approach, specify the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph> as the Factory parameter in the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\@</ph>ServiceHost<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept> directive in the .svc file.","pos":[750,1045],"source":" To activate an ASP.NET AJAX endpoint using this approach, specify the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> as the Factory parameter in the [\\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive in the .svc file."},{"content":"This custom factory is the component that automatically configures an ASP.NET AJAX endpoint so that it can be called from JavaScript on a client Web site.","pos":[1046,1200]},{"pos":[1207,1353],"content":"For a working example, see the <bpt id=\"p1\">[</bpt>AJAX Service Without Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/samples/ajax-service-without-configuration.md)</ept>.","source":"For a working example, see the [AJAX Service Without Configuration](../../../../docs/framework/wcf/samples/ajax-service-without-configuration.md)."},{"pos":[1360,1621],"content":"For an outline of how to configure an ASP.NET AJAX endpoint using configuration elements, see <bpt id=\"p1\">[</bpt>How to: Use Configuration to Add an ASP.NET AJAX Endpoint<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)</ept>.","source":"For an outline of how to configure an ASP.NET AJAX endpoint using configuration elements, see [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)."},{"pos":[1631,1660],"content":"To create a basic WCF service","linkify":"To create a basic WCF service","nodes":[{"content":"To create a basic WCF service","pos":[0,29]}]},{"content":"Define a basic WCF service contract with an interface marked with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph> attribute.","pos":[1670,1802],"source":"Define a basic WCF service contract with an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute> attribute."},{"content":"Mark each operation with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationContractAttribute&gt;</ph>.","pos":[1803,1886],"source":" Mark each operation with the <xref:System.ServiceModel.OperationContractAttribute>."},{"content":"Be sure to set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A&gt;</ph> property.","pos":[1887,1980],"source":" Be sure to set the <xref:System.ServiceModel.ServiceContractAttribute.Namespace%2A> property."},{"pos":[2296,2368],"content":"Implement the <ph id=\"ph1\">`ICalculator`</ph> service contract with a <ph id=\"ph2\">`CalculatorService`</ph>.","source":"Implement the `ICalculator` service contract with a `CalculatorService`."},{"pos":[2607,2726],"content":"Define a namespace for the <ph id=\"ph1\">`ICalculator`</ph> and <ph id=\"ph2\">`CalculatorService`</ph> implementations by wrapping them in a namespace block.","source":"Define a namespace for the `ICalculator` and `CalculatorService` implementations by wrapping them in a namespace block."},{"pos":[2885,2959],"content":"To host the service in Internet Information Services without configuration","linkify":"To host the service in Internet Information Services without configuration","nodes":[{"content":"To host the service in Internet Information Services without configuration","pos":[0,74]}]},{"content":"Create a new file named service with a .svc extension in the application.","pos":[2969,3042]},{"content":"Edit this file by adding the appropriate <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\@</ph>ServiceHost<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept> directive information for the service.","pos":[3043,3222],"source":" Edit this file by adding the appropriate [\\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive information for the service."},{"content":"Specify that the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph> is to be used in the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\@</ph>ServiceHost<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept> directive to automatically configure an ASP.NET AJAX endpoint.","pos":[3223,3489],"source":" Specify that the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> is to be used in the [\\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive to automatically configure an ASP.NET AJAX endpoint."},{"content":"Build the service and call it from the client.","pos":[3738,3784]},{"content":"Internet Information Services (IIS) activates the service when called.","pos":[3785,3855]},{"content":"For more information about hosting in IIS, see <bpt id=\"p1\">[</bpt>How to: Host a WCF Service in IIS<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)</ept>.","pos":[3856,4023],"source":" For more information about hosting in IIS, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)."},{"pos":[4033,4052],"content":"To call the service","linkify":"To call the service","nodes":[{"content":"To call the service","pos":[0,19]}]},{"content":"The endpoint is configured at an empty address relative to the .svc file, so the service is now available and can be invoked by sending requests to service.svc/<ph id=\"ph1\">\\&lt;</ph>operation&gt; - for example, service.svc/Add for the <ph id=\"ph2\">`Add`</ph> operation.","pos":[4062,4290],"source":"The endpoint is configured at an empty address relative to the .svc file, so the service is now available and can be invoked by sending requests to service.svc/\\<operation> - for example, service.svc/Add for the `Add` operation."},{"content":"You can use it by entering the service URL into the Scripts collection of the ASP.NET AJAX Script Manager control.","pos":[4291,4405]},{"content":"For an example, see the <bpt id=\"p1\">[</bpt>AJAX Service Without Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/samples/ajax-service-without-configuration.md)</ept>.","pos":[4406,4545],"source":" For an example, see the [AJAX Service Without Configuration](../../../../docs/framework/wcf/samples/ajax-service-without-configuration.md)."},{"pos":[4554,4561],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The automatically-configured endpoint is created at an empty address relative to the base URL.","pos":[4568,4662]},{"content":"A configuration file can also be added and used with this approach.","pos":[4663,4730]},{"content":"If the configuration file contains endpoint definitions, these endpoints are added to the automatically-configured endpoint.","pos":[4731,4855]},{"content":"For example, service.svc uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph> and the service directory contains a Web.config file that defines an endpoint for the same service using the <ph id=\"ph2\">&lt;xref:System.ServiceModel.BasicHttpBinding&gt;</ph> at the \"soap\" relative address.","pos":[4862,5146],"source":"For example, service.svc uses the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> and the service directory contains a Web.config file that defines an endpoint for the same service using the <xref:System.ServiceModel.BasicHttpBinding> at the \"soap\" relative address."},{"content":"In this case, the service contains two endpoints: one at service.svc (which responds to ASP.NET AJAX requests) and another at service.svc/soap (which responds to SOAP requests).","pos":[5147,5324]},{"pos":[5331,5543],"content":"If the configuration file defines an endpoint at an empty relative address and the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph> is used, an exception is thrown and the service fails to start.","source":"If the configuration file defines an endpoint at an empty relative address and the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> is used, an exception is thrown and the service fails to start."},{"content":"You cannot use configuration to modify settings on the automatically-configured endpoint.","pos":[5550,5639]},{"content":"If any setting (such as a reader quota) must be modified, you must not use the configuration-free approach by removing the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph> from the .svc file and creating a configuration entry for the endpoint.","pos":[5640,5900],"source":" If any setting (such as a reader quota) must be modified, you must not use the configuration-free approach by removing the <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> from the .svc file and creating a configuration entry for the endpoint."},{"content":"If your service requires ASP.NET Compatibility Mode - for example, if it uses the <ph id=\"ph1\">&lt;xref:System.Web.HttpContext&gt;</ph> class or ASP.NET authorization mechanisms - a configuration file is still required to turn on this mode.","pos":[5907,6123],"source":"If your service requires ASP.NET Compatibility Mode - for example, if it uses the <xref:System.Web.HttpContext> class or ASP.NET authorization mechanisms - a configuration file is still required to turn on this mode."},{"content":"The configuration element required is the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceHostingEnvironment&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md)</ept> element, which must be added as follows.","pos":[6124,6325],"source":" The configuration element required is the [\\<serviceHostingEnvironment>](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) element, which must be added as follows."},{"pos":[6457,6595],"content":"For more information, see the <bpt id=\"p1\">[</bpt>WCF Services and ASP.NET<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)</ept> topic.","source":"For more information, see the [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md) topic."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph> class is a derived class of <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activation.ServiceHostFactory&gt;</ph>.","pos":[6602,6757],"source":"The <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory> class is a derived class of <xref:System.ServiceModel.Activation.ServiceHostFactory>."},{"content":"For a detailed explanation of the service host factory mechanism, see the <bpt id=\"p1\">[</bpt>Extending Hosting Using ServiceHostFactory<ept id=\"p1\">](../../../../docs/framework/wcf/extending/extending-hosting-using-servicehostfactory.md)</ept> topic.","pos":[6758,6971],"source":" For a detailed explanation of the service host factory mechanism, see the [Extending Hosting Using ServiceHostFactory](../../../../docs/framework/wcf/extending/extending-hosting-using-servicehostfactory.md) topic."},{"pos":[6980,6988],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6992,7121],"content":"<bpt id=\"p1\">[</bpt>Creating WCF Services for ASP.NET AJAX<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/creating-wcf-services-for-aspnet-ajax.md)</ept>","source":"[Creating WCF Services for ASP.NET AJAX](../../../../docs/framework/wcf/feature-details/creating-wcf-services-for-aspnet-ajax.md)"},{"pos":[7124,7288],"content":"<bpt id=\"p1\">[</bpt>How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-migrate-ajax-enabled-aspnet-web-services-to-wcf.md)</ept>","source":"[How to: Migrate AJAX-Enabled ASP.NET Web Services to WCF](../../../../docs/framework/wcf/feature-details/how-to-migrate-ajax-enabled-aspnet-web-services-to-wcf.md)"}]}