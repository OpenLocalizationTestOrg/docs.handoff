{"content":"---\ntitle: \"Object Materialization (WCF Data Services)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF Data Services, client library\"\n  - \"WCF Data Services, querying\"\nms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1\n---\n# Object Materialization (WCF Data Services)\nWhen you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed. For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md). Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes. For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).  \n  \n [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] also enables you to define your own client data service classes rather than using the tool-generated data classes. This enables you to use your own data classes, also known as \"plain-old CLR object\" (POCO) data classes. When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.  \n  \n After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query. The general process for materializing these objects is as follows:  \n  \n1.  The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:  \n  \n    -   When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.  \n  \n    -   When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.  \n  \n    -   When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.  \n  \n    -   When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead. If this delegate returns a null value, a new instance of the queried type is created instead. It may be required to override the default name-based type name mapping to support inheritance scenarios.  \n  \n2.  The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity. Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>. The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.  \n  \n3.  The client library reads properties from the feed entry and set the corresponding properties on the newly created object. When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>. The response might contain property values for which a corresponding property does not occur in the client type. When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>. When this property is set to `true`, the missing property is ignored. Otherwise, an error is raised. Properties are set as follows:  \n  \n    -   Scalar properties are set to the corresponding value in the entry in the response message.  \n  \n    -   Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.  \n  \n    -   Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity. This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>. For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).  \n  \n        > [!NOTE]\n        >  When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead. For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).  \n  \n4.  The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.  \n  \n5.  The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>. The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.  \n  \n## See also\n\n- [Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)\n- [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)\n","nodes":[{"pos":[4,222],"embed":true,"restype":"x-metadata","content":"title: \"Object Materialization (WCF Data Services)\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF Data Services, client library\"\n  - \"WCF Data Services, querying\"\nms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1","nodes":[{"content":"Object Materialization (WCF Data Services)","nodes":[{"pos":[0,42],"content":"Object Materialization (WCF Data Services)","nodes":[{"content":"Object Materialization (WCF Data Services)","pos":[0,42]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[229,271],"content":"Object Materialization (WCF Data Services)","linkify":"Object Materialization (WCF Data Services)","nodes":[{"content":"Object Materialization (WCF Data Services)","pos":[0,42]}]},{"content":"When you use the <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept> dialog to consume an <ph id=\"ph1\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.","pos":[272,548],"source":"When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Generating the Data Service Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md)</ept>.","pos":[549,721],"source":" For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md)."},{"content":"Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.","pos":[722,849]},{"content":"For information about merge options and identity resolution for tracked objects, see <bpt id=\"p1\">[</bpt>Managing the Data Service Context<ept id=\"p1\">](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)</ept>.","pos":[850,1063],"source":" For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)."},{"content":"<ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> also enables you to define your own client data service classes rather than using the tool-generated data classes.","pos":[1070,1244],"source":"[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] also enables you to define your own client data service classes rather than using the tool-generated data classes."},{"content":"This enables you to use your own data classes, also known as \"plain-old CLR object\" (POCO) data classes.","pos":[1245,1349]},{"content":"When using these types of custom data classes, you should attribute the data class with either <ph id=\"ph1\">&lt;xref:System.Data.Services.Common.DataServiceKeyAttribute&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Data.Services.Common.DataServiceEntityAttribute&gt;</ph> and ensure that type names on the client match type names in the data model of the data service.","pos":[1350,1665],"source":" When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service."},{"content":"After the library receives the query response message, it materializes the returned data from the <ph id=\"ph1\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> feed into instances of client data service classes that are of the type of the query.","pos":[1672,1921],"source":"After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query."},{"content":"The general process for materializing these objects is as follows:","pos":[1922,1988]},{"pos":[1998,2185],"content":"The client library reads the serialized type from the <ph id=\"ph1\">`entry`</ph> element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:","source":"The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:"},{"pos":[2199,2398],"content":"When the type declared in the feed has the same name as the type of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph>, a new instance of this type is created by using the empty constructor.","source":"When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor."},{"pos":[2412,2647],"content":"When the type declared in the feed has the same name as a type that is derived from the type of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph>, a new instance of this derived type is created by using the empty constructor.","source":"When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor."},{"pos":[2661,2888],"content":"When the type declared in the feed cannot be matched to the type of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601&gt;</ph> or any derived types, a new instance of the queried type is created by using the empty constructor.","source":"When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor."},{"content":"When the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A&gt;</ph> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <ph id=\"ph2\">&lt;xref:System.Func%602&gt;</ph> is created instead.","pos":[2902,3166],"source":"When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead."},{"content":"If this delegate returns a null value, a new instance of the queried type is created instead.","pos":[3167,3260]},{"content":"It may be required to override the default name-based type name mapping to support inheritance scenarios.","pos":[3261,3366]},{"content":"The client library reads the URI value from the <ph id=\"ph1\">`id`</ph> element of the <ph id=\"ph2\">`entry`</ph>, which is the identity value of the entity.","pos":[3376,3495],"source":"The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity."},{"content":"Unless a <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A&gt;</ph> value of <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.MergeOption.NoTracking&gt;</ph> is used, the identity value is used to track the object in the <ph id=\"ph3\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","pos":[3496,3758],"source":" Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>."},{"content":"The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.","pos":[3759,3920]},{"content":"The client library reads properties from the feed entry and set the corresponding properties on the newly created object.","pos":[3930,4051]},{"content":"When an object that has the same identity value already occurs in the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>, the properties are set based on the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.MergeOption&gt;</ph> setting of the <ph id=\"ph3\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","pos":[4052,4329],"source":" When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>."},{"content":"The response might contain property values for which a corresponding property does not occur in the client type.","pos":[4330,4442]},{"content":"When this occurs, the action depends on the value of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","pos":[4443,4651],"source":" When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>."},{"content":"When this property is set to <ph id=\"ph1\">`true`</ph>, the missing property is ignored.","pos":[4652,4721],"source":" When this property is set to `true`, the missing property is ignored."},{"content":"Otherwise, an error is raised.","pos":[4722,4752]},{"content":"Properties are set as follows:","pos":[4753,4783]},{"content":"Scalar properties are set to the corresponding value in the entry in the response message.","pos":[4797,4887]},{"content":"Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.","pos":[4901,5032]},{"content":"Navigation properties that return a collection of related entities are set to a new or existing instance of <ph id=\"ph1\">&lt;xref:System.Collections.Generic.ICollection%601&gt;</ph>, where <ph id=\"ph2\">`T`</ph> is the type of the related entity.","pos":[5046,5249],"source":"Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity."},{"content":"This collection is empty unless the related objects have been loaded into the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","pos":[5250,5382],"source":" This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Loading Deferred Content<ept id=\"p1\">](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md)</ept>.","pos":[5383,5519],"source":" For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md)."},{"pos":[5535,5873],"content":"[!NOTE]\nWhen the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead. For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).","leadings":["","        >  "],"nodes":[{"content":"When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead. For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).","pos":[8,327],"nodes":[{"content":"When the generated client data classes support data binding, navigation properties return instances of the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceCollection%601&gt;</ph> class instead.","pos":[0,182],"source":"When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Binding Data to Controls<ept id=\"p1\">](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)</ept>.","pos":[183,319],"source":" For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)."}]}]},{"pos":[5883,5971],"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.ReadingEntity&gt;</ph> event is raised.","source":"The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised."},{"content":"The client library attaches the object to the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","pos":[5981,6081],"source":"The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>."},{"content":"The object is not attached when the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.MergeOption&gt;</ph> is <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.MergeOption.NoTracking&gt;</ph>.","pos":[6082,6226],"source":" The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>."},{"pos":[6235,6243],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6247,6358],"content":"<bpt id=\"p1\">[</bpt>Querying the Data Service<ept id=\"p1\">](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)</ept>","source":"[Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)"},{"pos":[6361,6456],"content":"<bpt id=\"p1\">[</bpt>Query Projections<ept id=\"p1\">](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)</ept>","source":"[Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)"}]}