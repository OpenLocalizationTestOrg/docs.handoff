{"content":"---\ntitle: \"<securityTokenHandlerConfiguration>\"\nms.date: \"03/30/2017\"\nms.assetid: 28724cc6-020c-4a06-9a1f-d7594f315019\nauthor: \"BrucePerlerMS\"\n---\n# \\<securityTokenHandlerConfiguration>\nProvides configuration for the collection of token handlers.  \n  \n \\<system.identityModel>  \n\\<identityConfiguration>  \n\\<securityTokenHandlers>  \n\\<securityTokenHandlerConfiguration>  \n  \n## Syntax  \n  \n```xml  \n<system.identityModel>  \n  <identityConfiguration>  \n    <securityTokenHandlers>  \n      <securityTokenHandlerConfiguration saveBootstrapContext=xs:boolean  \n          maximumClockSkew=TimeSpan>  \n      </securityTokenHandlerConfiguration>  \n    </securityTokenHandlers>  \n  </identityConfiguration>  \n</system.identityModel>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|saveBootstrapContext|Specifies whether bootstrap tokens should be included in the session token. The value may also be set on a token handler collection by setting the `saveBootstrapContext` attribute on the [\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element. A value set on the token handler collection overrides the value set on the service.|  \n|maximumClockSkew|A <xref:System.TimeSpan> that specifies the maximum allowed clock skew. Controls the maximum allowed clock skew when performing time-sensitive operations, such as validating the expiration time of a sign-in session. The default is 5 minutes, \"00:05:00\". For more information about how to specify <xref:System.TimeSpan> values, see [Timespan Values](../../../../../docs/framework/configure-apps/file-schema/windows-workflow-foundation/index.md). The maximum clock skew may also be set at the service level by setting the `maximumClockSkew` attribute on the [\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element. A value set on the token handler collection overrides the value set on the service.|  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<audienceUris>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/audienceuris.md)|Specifies the set of URIs that are acceptable identifiers of this relying party. Optional.|  \n|[\\<caches>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/caches.md)|Registers the caches used for session tokens and token replay detection. Can be specified at the service-level or on a security token handler collection. Optional.|  \n|[\\<certificateValidation>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/certificatevalidation.md)|Controls the settings that token handlers use to validate certificates. Can be specified at the service-level or on a security token handler collection. These settings are overridden if a specific handler is configured with its own validator. Optional.|  \n|[\\<issuerNameRegistry>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/issuernameregistry.md)|Configures the issuer name registry that is used by handlers in the token handler collection. Optional.|  \n|[\\<issuerTokenResolver>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/issuertokenresolver.md)|Registers the issuer token resolver that is used by handlers in the token handler collection. The issuer token resolver is used to resolve the signing token on incoming tokens and messages. Optional.|  \n|[\\<serviceTokenResolver>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/servicetokenresolver.md)|Registers the service token resolver that is used by handlers in the token handler collection. The service token resolver is used to resolve the encryption token on incoming tokens and messages. Optional.|  \n|[\\<tokenReplayDetection>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaydetection.md)|Enables token replay detection and specifies the expiration time for tokens. Can be specified at the service-level or on a security token handler collection. Optional.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<securityTokenHandlers>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlers.md)|Specifies a collection of security token handlers that are registered with the endpoint.|  \n  \n## Remarks  \n This section provides property values for a <xref:System.IdentityModel.Tokens.SecurityTokenHandlerConfiguration> object. Settings configured in this section override those configured on the service. Some of these settings can, in turn, be overridden by settings that are specified when a handler is added to the security token handler collection.  \n  \n## Example  \n  \n```xml  \n<system.identityModel>  \n  <identityConfiguration>  \n    <securityTokenHandlers>   \n      <securityTokenHandlerConfiguration>  \n  \n        <audienceUris>  \n          <clear/>  \n          <add value=\"http://www.example.com/myapp/\" />  \n        </audienceUris>  \n  \n        <issuerNameRegistry type=\"System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel\">  \n          <trustedIssuers>  \n            <add thumbprint=\"97249e1a â€¦ 4c9158de\" name=\"contoso.com\" />  \n          </trustedIssuers>  \n        </issuerNameRegistry>  \n  \n        <issuerTokenResolver type=\"MyNamespace.CustomTokenResolver, MyAssembly\" />  \n  \n        <serviceTokenResolver type=\"MyNamespace.CustomTokenResolver, MyAssembly\" />  \n  \n      </securityTokenHandlerConfiguration>  \n    </securityTokenHandlers>  \n  </identityConfiguration>  \n</system.identityModel>  \n```\n","nodes":[{"pos":[4,143],"embed":true,"restype":"x-metadata","content":"title: \"<securityTokenHandlerConfiguration>\"\nms.date: \"03/30/2017\"\nms.assetid: 28724cc6-020c-4a06-9a1f-d7594f315019\nauthor: \"BrucePerlerMS\"","nodes":[{"content":"<securityTokenHandlerConfiguration>","nodes":[],"path":["title"],"nosxs":false}],"yml":true},{"pos":[150,186],"content":"\\<securityTokenHandlerConfiguration>","linkify":"\\<securityTokenHandlerConfiguration>","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>securityTokenHandlerConfiguration&gt;","pos":[0,36],"source":"\\<securityTokenHandlerConfiguration>"}]},{"content":"Provides configuration for the collection of token handlers.","pos":[187,247]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.identityModel&gt;","pos":[254,277],"source":"\\<system.identityModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>identityConfiguration&gt;","pos":[280,304],"source":"\\<identityConfiguration>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>securityTokenHandlers&gt;","pos":[307,331],"source":"\\<securityTokenHandlers>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>securityTokenHandlerConfiguration&gt;","pos":[334,370],"source":"\\<securityTokenHandlerConfiguration>"},{"pos":[379,385],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[740,763],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[767,847]},{"pos":[857,867],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[874,883]},{"content":"Description","pos":[884,895]},{"content":"saveBootstrapContext","pos":[938,958]},{"content":"Specifies whether bootstrap tokens should be included in the session token.","pos":[959,1034]},{"content":"The value may also be set on a token handler collection by setting the <ph id=\"ph1\">`saveBootstrapContext`</ph> attribute on the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>identityConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)</ept> element.","pos":[1035,1292],"source":" The value may also be set on a token handler collection by setting the `saveBootstrapContext` attribute on the [\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element."},{"content":"A value set on the token handler collection overrides the value set on the service.","pos":[1293,1376]},{"content":"maximumClockSkew","pos":[1381,1397]},{"content":"A <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> that specifies the maximum allowed clock skew.","pos":[1398,1469],"source":"A <xref:System.TimeSpan> that specifies the maximum allowed clock skew."},{"content":"Controls the maximum allowed clock skew when performing time-sensitive operations, such as validating the expiration time of a sign-in session.","pos":[1470,1613]},{"content":"The default is 5 minutes, \"00:05:00\".","pos":[1614,1651]},{"content":"For more information about how to specify <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> values, see <bpt id=\"p1\">[</bpt>Timespan Values<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-workflow-foundation/index.md)</ept>.","pos":[1652,1842],"source":" For more information about how to specify <xref:System.TimeSpan> values, see [Timespan Values](../../../../../docs/framework/configure-apps/file-schema/windows-workflow-foundation/index.md)."},{"content":"The maximum clock skew may also be set at the service level by setting the <ph id=\"ph1\">`maximumClockSkew`</ph> attribute on the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>identityConfiguration&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md)</ept> element.","pos":[1843,2100],"source":" The maximum clock skew may also be set at the service level by setting the `maximumClockSkew` attribute on the [\\<identityConfiguration>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/identityconfiguration.md) element."},{"content":"A value set on the token handler collection overrides the value set on the service.","pos":[2101,2184]},{"pos":[2195,2209],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[2216,2223]},{"content":"Description","pos":[2224,2235]},{"pos":[2276,2395],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>audienceUris&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/audienceuris.md)</ept>","source":"[\\<audienceUris>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/audienceuris.md)"},{"content":"Specifies the set of URIs that are acceptable identifiers of this relying party.","pos":[2396,2476]},{"content":"Optional.","pos":[2477,2486]},{"pos":[2491,2598],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>caches&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/caches.md)</ept>","source":"[\\<caches>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/caches.md)"},{"content":"Registers the caches used for session tokens and token replay detection.","pos":[2599,2671]},{"content":"Can be specified at the service-level or on a security token handler collection.","pos":[2672,2752]},{"content":"Optional.","pos":[2753,2762]},{"pos":[2767,2904],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>certificateValidation&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/certificatevalidation.md)</ept>","source":"[\\<certificateValidation>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/certificatevalidation.md)"},{"content":"Controls the settings that token handlers use to validate certificates.","pos":[2905,2976]},{"content":"Can be specified at the service-level or on a security token handler collection.","pos":[2977,3057]},{"content":"These settings are overridden if a specific handler is configured with its own validator.","pos":[3058,3147]},{"content":"Optional.","pos":[3148,3157]},{"pos":[3162,3293],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>issuerNameRegistry&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/issuernameregistry.md)</ept>","source":"[\\<issuerNameRegistry>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/issuernameregistry.md)"},{"content":"Configures the issuer name registry that is used by handlers in the token handler collection.","pos":[3294,3387]},{"content":"Optional.","pos":[3388,3397]},{"pos":[3402,3535],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>issuerTokenResolver&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/issuertokenresolver.md)</ept>","source":"[\\<issuerTokenResolver>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/issuertokenresolver.md)"},{"content":"Registers the issuer token resolver that is used by handlers in the token handler collection.","pos":[3536,3629]},{"content":"The issuer token resolver is used to resolve the signing token on incoming tokens and messages.","pos":[3630,3725]},{"content":"Optional.","pos":[3726,3735]},{"pos":[3740,3875],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceTokenResolver&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/servicetokenresolver.md)</ept>","source":"[\\<serviceTokenResolver>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/servicetokenresolver.md)"},{"content":"Registers the service token resolver that is used by handlers in the token handler collection.","pos":[3876,3970]},{"content":"The service token resolver is used to resolve the encryption token on incoming tokens and messages.","pos":[3971,4070]},{"content":"Optional.","pos":[4071,4080]},{"pos":[4085,4220],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>tokenReplayDetection&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaydetection.md)</ept>","source":"[\\<tokenReplayDetection>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/tokenreplaydetection.md)"},{"content":"Enables token replay detection and specifies the expiration time for tokens.","pos":[4221,4297]},{"content":"Can be specified at the service-level or on a security token handler collection.","pos":[4298,4378]},{"content":"Optional.","pos":[4379,4388]},{"pos":[4399,4414],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[4421,4428]},{"content":"Description","pos":[4429,4440]},{"pos":[4481,4618],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>securityTokenHandlers&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlers.md)</ept>","source":"[\\<securityTokenHandlers>](../../../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/securitytokenhandlers.md)"},{"content":"Specifies a collection of security token handlers that are registered with the endpoint.","pos":[4619,4707]},{"pos":[4717,4724],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"This section provides property values for a <ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.SecurityTokenHandlerConfiguration&gt;</ph> object.","pos":[4728,4848],"source":"This section provides property values for a <xref:System.IdentityModel.Tokens.SecurityTokenHandlerConfiguration> object."},{"content":"Settings configured in this section override those configured on the service.","pos":[4849,4926]},{"content":"Some of these settings can, in turn, be overridden by settings that are specified when a handler is added to the security token handler collection.","pos":[4927,5074]},{"pos":[5083,5090],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]}]}