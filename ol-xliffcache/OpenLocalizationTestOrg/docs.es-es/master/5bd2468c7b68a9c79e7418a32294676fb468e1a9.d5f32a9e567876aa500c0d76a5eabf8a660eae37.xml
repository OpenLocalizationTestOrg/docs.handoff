{"content":"---\ntitle: \"SpinLock\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"synchronization primitives, SpinLock\"\nms.assetid: f9af93bb-7a0d-4ba5-afe8-74f48b6b6958\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# SpinLock\nThe <xref:System.Threading.SpinLock> structure is a low-level, mutual-exclusion synchronization primitive that spins while it waits to acquire a lock. On multicore computers, when wait times are expected to be short and when contention is minimal, <xref:System.Threading.SpinLock> can perform better than other kinds of locks. However, we recommend that you use <xref:System.Threading.SpinLock> only when you determine by profiling that the <xref:System.Threading.Monitor?displayProperty=nameWithType> method or the <xref:System.Threading.Interlocked> methods are significantly slowing the performance of your program.  \n  \n <xref:System.Threading.SpinLock> may yield the time slice of the thread even if it has not yet acquired the lock. It does this to avoid thread-priority inversion, and to enable the garbage collector to make progress. When you use a <xref:System.Threading.SpinLock>, ensure that no thread can hold the lock for more than a very brief time span, and that no thread can block while it holds the lock.  \n  \n Because SpinLock is a value type, you must explicitly pass it by reference if you intend the two copies to refer to the same lock.  \n  \n For more information about how to use this type, see <xref:System.Threading.SpinLock?displayProperty=nameWithType>. For an example, see [How to: Use SpinLock for Low-Level Synchronization](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md).  \n  \n <xref:System.Threading.SpinLock> supports a *thread*-*tracking* mode that you can use during the development phase to help track the thread that is holding the lock at a specific time. Thread-tracking mode is very useful for debugging, but we recommend that you turn it off in the release version of your program because it may slow performance. For more information, see [How to: Enable Thread-Tracking Mode in SpinLock](../../../docs/standard/threading/how-to-enable-thread-tracking-mode-in-spinlock.md).  \n  \n## See also\n\n- [Threading Objects and Features](../../../docs/standard/threading/threading-objects-and-features.md)\n","nodes":[{"pos":[4,228],"embed":true,"restype":"x-metadata","content":"title: \"SpinLock\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"synchronization primitives, SpinLock\"\nms.assetid: f9af93bb-7a0d-4ba5-afe8-74f48b6b6958\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"SpinLock","nodes":[{"pos":[0,8],"content":"SpinLock","nodes":[{"content":"SpinLock","pos":[0,8]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[235,243],"content":"SpinLock","linkify":"SpinLock","nodes":[{"content":"SpinLock","pos":[0,8]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Threading.SpinLock&gt;</ph> structure is a low-level, mutual-exclusion synchronization primitive that spins while it waits to acquire a lock.","pos":[244,394],"source":"The <xref:System.Threading.SpinLock> structure is a low-level, mutual-exclusion synchronization primitive that spins while it waits to acquire a lock."},{"content":"On multicore computers, when wait times are expected to be short and when contention is minimal, <ph id=\"ph1\">&lt;xref:System.Threading.SpinLock&gt;</ph> can perform better than other kinds of locks.","pos":[395,570],"source":" On multicore computers, when wait times are expected to be short and when contention is minimal, <xref:System.Threading.SpinLock> can perform better than other kinds of locks."},{"content":"However, we recommend that you use <ph id=\"ph1\">&lt;xref:System.Threading.SpinLock&gt;</ph> only when you determine by profiling that the <ph id=\"ph2\">&lt;xref:System.Threading.Monitor?displayProperty=nameWithType&gt;</ph> method or the <ph id=\"ph3\">&lt;xref:System.Threading.Interlocked&gt;</ph> methods are significantly slowing the performance of your program.","pos":[571,862],"source":" However, we recommend that you use <xref:System.Threading.SpinLock> only when you determine by profiling that the <xref:System.Threading.Monitor?displayProperty=nameWithType> method or the <xref:System.Threading.Interlocked> methods are significantly slowing the performance of your program."},{"content":"<ph id=\"ph1\">&lt;xref:System.Threading.SpinLock&gt;</ph> may yield the time slice of the thread even if it has not yet acquired the lock.","pos":[869,982],"source":"<xref:System.Threading.SpinLock> may yield the time slice of the thread even if it has not yet acquired the lock."},{"content":"It does this to avoid thread-priority inversion, and to enable the garbage collector to make progress.","pos":[983,1085]},{"content":"When you use a <ph id=\"ph1\">&lt;xref:System.Threading.SpinLock&gt;</ph>, ensure that no thread can hold the lock for more than a very brief time span, and that no thread can block while it holds the lock.","pos":[1086,1266],"source":" When you use a <xref:System.Threading.SpinLock>, ensure that no thread can hold the lock for more than a very brief time span, and that no thread can block while it holds the lock."},{"content":"Because SpinLock is a value type, you must explicitly pass it by reference if you intend the two copies to refer to the same lock.","pos":[1273,1403]},{"content":"For more information about how to use this type, see <ph id=\"ph1\">&lt;xref:System.Threading.SpinLock?displayProperty=nameWithType&gt;</ph>.","pos":[1410,1525],"source":"For more information about how to use this type, see <xref:System.Threading.SpinLock?displayProperty=nameWithType>."},{"content":"For an example, see <bpt id=\"p1\">[</bpt>How to: Use SpinLock for Low-Level Synchronization<ept id=\"p1\">](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md)</ept>.","pos":[1526,1686],"source":" For an example, see [How to: Use SpinLock for Low-Level Synchronization](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md)."},{"content":"<ph id=\"ph1\">&lt;xref:System.Threading.SpinLock&gt;</ph> supports a <bpt id=\"p1\">*</bpt>thread<ept id=\"p1\">*</ept><ph id=\"ph2\">-</ph><bpt id=\"p2\">*</bpt>tracking<ept id=\"p2\">*</ept> mode that you can use during the development phase to help track the thread that is holding the lock at a specific time.","pos":[1693,1877],"source":"<xref:System.Threading.SpinLock> supports a *thread*-*tracking* mode that you can use during the development phase to help track the thread that is holding the lock at a specific time."},{"content":"Thread-tracking mode is very useful for debugging, but we recommend that you turn it off in the release version of your program because it may slow performance.","pos":[1878,2038]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Enable Thread-Tracking Mode in SpinLock<ept id=\"p1\">](../../../docs/standard/threading/how-to-enable-thread-tracking-mode-in-spinlock.md)</ept>.","pos":[2039,2199],"source":" For more information, see [How to: Enable Thread-Tracking Mode in SpinLock](../../../docs/standard/threading/how-to-enable-thread-tracking-mode-in-spinlock.md)."},{"pos":[2208,2216],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2220,2320],"content":"<bpt id=\"p1\">[</bpt>Threading Objects and Features<ept id=\"p1\">](../../../docs/standard/threading/threading-objects-and-features.md)</ept>","source":"[Threading Objects and Features](../../../docs/standard/threading/threading-objects-and-features.md)"}]}