{"content":"---\ntitle: \"Tracking Using a Text File | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 56a82682-73c2-4b91-a206-4d8bb12c561b\ncaps.latest.revision: 13\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Tracking Using a Text File\nThis sample demonstrates how to extend tracking in [!INCLUDE[wf](../../../../includes/wf-md.md)] by creating a custom tracking participant. Tracking participants are .NET Framework classes that receive tracking records from the runtime as they are emitted. You can create a tracking participant to transport the tracking events to whichever destination is required for your scenario. For example, ETW (Event Tracing for Windows) Tracking Participant is provided as part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]. The tracking participant in this sample writes the records in XML format to a text file.  \n  \n## Sample details  \n To optimize the usefulness and robustness of your tracking participant, some additional steps must be completed to properly wire the tracking participant to the runtime. The following table describes the classes used in this sample to create a tracking participant that complies with best practices.  \n  \n|Class|Description|  \n|-----------|-----------------|  \n|`TextFileTrackingExtensionElement`|A <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> is used to define the configuration section used to configure the text file tracking participant. This allows users to specify the destination of the log file using standard .NET Framework configuration files.|  \n|`TextFileTrackingBehavior`|Behaviors in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] allow users to inject extensions into the runtime. This behavior adds the tracking participant to the service when the service starts.|  \n|`TextFileTrackingParticipant`|The tracking participant that receives tracking participants at runtime and stores them to a log file as XML.|  \n  \n## Behavior Extension Elements Configuration  \n One more step is required to make use of the behavior extension element previously described using .NET Framework configuration files. The following configuration must be placed in configuration files where the extension is to be used.  \n  \n```  \n<system.serviceModel>  \n    <extensions>  \n      <behaviorExtensions>  \n        <add name=\"textFileTracking\" type=\"Microsoft.Samples.TextFileTracking.TextFileTrackingExtensionElement, WFStockPriceApplication, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\" />  \n      </behaviorExtensions>  \n    </extensions>  \n…  \n  </system.serviceModel>  \n  \n```  \n  \n> [!NOTE]\n>  See the Web.config file in the sample for a complete example usage of behavior extension elements configuration.  \n  \n## Custom Tracking Records  \n The GetStockPrices.cs file demonstrates how to create custom tracking records from within a <xref:System.Activities.CodeActivity>. Look for this record when running the sample.  \n  \n#### To use this sample  \n  \n1.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the WFStockPriceApplication.sln solution file.  \n  \n2.  To build the solution, press CTRL+SHIFT+B.  \n  \n3.  To run the solution, press CTRL+F5.  \n  \n     The browser window opens and shows the directory listing for the application.  \n  \n4.  In the browser, click StockPriceService.xamlx.  \n  \n5.  The browser displays the **StockPriceService** page, which contains the local service wsdl address. Copy this address.  \n  \n     An example of the local service wsdl address is http://localhost:53797/StockPriceService.xamlx?wsdl.  \n  \n6.  Using [!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)], go to your [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] folder (the default installation folder is %SystemDrive%\\Program Files\\Microsoft Visual Studio 10.0). Then locate the Common7\\IDE\\ subfolder.  \n  \n7.  Double-click the WcfTestClient.exe file to launch the WCF Test Client.  \n  \n8.  In the WCF Test Client, select **Add Service…** from the **File** menu.  \n  \n9. Paste the URL you just copied into the text box.  \n  \n10. Click **OK** to close the dialog.  \n  \n11. Test the service using the WCF Test Client.  \n  \n    1.  In the WCF Test Client, double-click **GetStockPrice()** under the **IStockPriceService** node.  \n  \n         The **GetStockPrice()** method appears in the right pane, with one parameter.  \n  \n    2.  Type in Contoso as the value for the parameter.  \n  \n    3.  Click **Invoke**.  \n  \n12. See the tracked events in the log file located in your application data directory at %APPDATA%\\trackingRecords.log.  \n  \n    > [!NOTE]\n    >  The %APPDATA% is an environment variable that resolves to %SystemDrive%\\Users\\\\<username\\>\\AppData\\Roaming in [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], or Windows Server 2008.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Tracking\\TextFileTracking`  \n  \n## See Also  \n [AppFabric Monitoring Samples](http://go.microsoft.com/fwlink/?LinkId=193959)","nodes":[{"pos":[12,55],"content":"Tracking Using a Text File | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Tracking Using a Text File | Microsoft Docs","pos":[0,43]}]},{"pos":[321,347],"content":"Tracking Using a Text File","linkify":"Tracking Using a Text File","nodes":[{"content":"Tracking Using a Text File","pos":[0,26]}]},{"content":"This sample demonstrates how to extend tracking in <ph id=\"ph1\">[!INCLUDE[wf](../../../../includes/wf-md.md)]</ph> by creating a custom tracking participant.","pos":[348,487],"source":"This sample demonstrates how to extend tracking in [!INCLUDE[wf](../../../../includes/wf-md.md)] by creating a custom tracking participant."},{"content":"Tracking participants are .NET Framework classes that receive tracking records from the runtime as they are emitted.","pos":[488,604]},{"content":"You can create a tracking participant to transport the tracking events to whichever destination is required for your scenario.","pos":[605,731]},{"content":"For example, ETW (Event Tracing for Windows) Tracking Participant is provided as part of the <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph>.","pos":[732,889],"source":" For example, ETW (Event Tracing for Windows) Tracking Participant is provided as part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]."},{"content":"The tracking participant in this sample writes the records in XML format to a text file.","pos":[890,978]},{"pos":[987,1001],"content":"Sample details","linkify":"Sample details","nodes":[{"content":"Sample details","pos":[0,14]}]},{"content":"To optimize the usefulness and robustness of your tracking participant, some additional steps must be completed to properly wire the tracking participant to the runtime.","pos":[1005,1174]},{"content":"The following table describes the classes used in this sample to create a tracking participant that complies with best practices.","pos":[1175,1304]},{"content":"Class","pos":[1311,1316]},{"content":"Description","pos":[1317,1328]},{"content":"A <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.BehaviorExtensionElement&gt;</ph> is used to define the configuration section used to configure the text file tracking participant.","pos":[1402,1567],"source":"A <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> is used to define the configuration section used to configure the text file tracking participant."},{"content":"This allows users to specify the destination of the log file using standard .NET Framework configuration files.","pos":[1568,1679]},{"content":"Behaviors in <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> allow users to inject extensions into the runtime.","pos":[1711,1830],"source":"Behaviors in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] allow users to inject extensions into the runtime."},{"content":"This behavior adds the tracking participant to the service when the service starts.","pos":[1831,1914]},{"content":"The tracking participant that receives tracking participants at runtime and stores them to a log file as XML.","pos":[1949,2058]},{"pos":[2068,2109],"content":"Behavior Extension Elements Configuration","linkify":"Behavior Extension Elements Configuration","nodes":[{"content":"Behavior Extension Elements Configuration","pos":[0,41]}]},{"content":"One more step is required to make use of the behavior extension element previously described using .NET Framework configuration files.","pos":[2113,2247]},{"content":"The following configuration must be placed in configuration files where the extension is to be used.","pos":[2248,2348]},{"pos":[2724,2847],"content":"[!NOTE]\n See the Web.config file in the sample for a complete example usage of behavior extension elements configuration.","leadings":["","> "],"nodes":[{"content":"See the Web.config file in the sample for a complete example usage of behavior extension elements configuration.","pos":[9,121]}]},{"pos":[2856,2879],"content":"Custom Tracking Records","linkify":"Custom Tracking Records","nodes":[{"content":"Custom Tracking Records","pos":[0,23]}]},{"content":"The GetStockPrices.cs file demonstrates how to create custom tracking records from within a <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivity&gt;</ph>.","pos":[2883,3013],"source":"The GetStockPrices.cs file demonstrates how to create custom tracking records from within a <xref:System.Activities.CodeActivity>."},{"content":"Look for this record when running the sample.","pos":[3014,3059]},{"pos":[3070,3088],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[3098,3210],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the WFStockPriceApplication.sln solution file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the WFStockPriceApplication.sln solution file."},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[3220,3262]},{"content":"To run the solution, press CTRL+F5.","pos":[3272,3307]},{"content":"The browser window opens and shows the directory listing for the application.","pos":[3318,3395]},{"content":"In the browser, click StockPriceService.xamlx.","pos":[3405,3451]},{"content":"The browser displays the <bpt id=\"p1\">**</bpt>StockPriceService<ept id=\"p1\">**</ept> page, which contains the local service wsdl address.","pos":[3461,3560],"source":"The browser displays the **StockPriceService** page, which contains the local service wsdl address."},{"content":"Copy this address.","pos":[3561,3579]},{"content":"An example of the local service wsdl address is http://localhost:53797/StockPriceService.xamlx?wsdl.","pos":[3590,3690]},{"content":"Using <ph id=\"ph1\">[!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)]</ph>, go to your <ph id=\"ph2\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> folder (the default installation folder is %SystemDrive%\\Program Files\\Microsoft Visual Studio 10.0).","pos":[3700,3939],"source":"Using [!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)], go to your [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] folder (the default installation folder is %SystemDrive%\\Program Files\\Microsoft Visual Studio 10.0)."},{"content":"Then locate the Common7\\IDE\\ subfolder.","pos":[3940,3979]},{"content":"Double-click the WcfTestClient.exe file to launch the WCF Test Client.","pos":[3989,4059]},{"content":"In the WCF Test Client, select <bpt id=\"p1\">**</bpt>Add Service…<ept id=\"p1\">**</ept>","pos":[4069,4116],"source":"In the WCF Test Client, select **Add Service…**"},{"content":"from the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu.","pos":[4117,4140],"source":" from the **File** menu."},{"content":"Paste the URL you just copied into the text box.","pos":[4149,4197]},{"pos":[4207,4240],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the dialog.","source":"Click **OK** to close the dialog."},{"content":"Test the service using the WCF Test Client.","pos":[4250,4293]},{"pos":[4307,4402],"content":"In the WCF Test Client, double-click <bpt id=\"p1\">**</bpt>GetStockPrice()<ept id=\"p1\">**</ept> under the <bpt id=\"p2\">**</bpt>IStockPriceService<ept id=\"p2\">**</ept> node.","source":"In the WCF Test Client, double-click **GetStockPrice()** under the **IStockPriceService** node."},{"pos":[4417,4494],"content":"The <bpt id=\"p1\">**</bpt>GetStockPrice()<ept id=\"p1\">**</ept> method appears in the right pane, with one parameter.","source":"The **GetStockPrice()** method appears in the right pane, with one parameter."},{"content":"Type in Contoso as the value for the parameter.","pos":[4508,4555]},{"pos":[4569,4586],"content":"Click <bpt id=\"p1\">**</bpt>Invoke<ept id=\"p1\">**</ept>.","source":"Click **Invoke**."},{"content":"See the tracked events in the log file located in your application data directory at %APPDATA%\\trackingRecords.log.","pos":[4596,4711]},{"pos":[4723,4975],"content":"[!NOTE]\nThe %APPDATA% is an environment variable that resolves to %SystemDrive%\\Users\\\\<username\\>\\AppData\\Roaming in [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], or Windows Server 2008.","leadings":["","    >  "],"nodes":[{"content":"The %APPDATA% is an environment variable that resolves to %SystemDrive%\\Users<ph id=\"ph1\">\\\\</ph>&lt;username<ph id=\"ph2\">\\&gt;</ph>\\AppData\\Roaming in <ph id=\"ph3\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>, <ph id=\"ph4\">[!INCLUDE[lserver](../../../../includes/lserver-md.md)]</ph>, or Windows Server 2008.","pos":[8,245],"source":"The %APPDATA% is an environment variable that resolves to %SystemDrive%\\Users\\\\<username\\>\\AppData\\Roaming in [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], or Windows Server 2008."}]},{"pos":[4983,5116],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing.","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5170,5496],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5497,5547]},{"pos":[5634,5642],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[5646,5723],"content":"<bpt id=\"p1\">[</bpt>AppFabric Monitoring Samples<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=193959)</ept>","source":"[AppFabric Monitoring Samples](http://go.microsoft.com/fwlink/?LinkId=193959)"}]}