{"content":"---\ntitle: \"How to: Host a WCF Service in IIS\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: b044b1c9-c1e5-4c9f-84d8-0f02f4537f8b\n---\n# How to: Host a WCF Service in IIS\nThis topic outlines the basic steps required to create a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS). This topic assumes you are familiar with IIS and understand how to use the IIS management tool to create and manage IIS applications. For more information about IIS see [Internet Information Services](https://go.microsoft.com/fwlink/?LinkId=132449). A WCF service that runs in the IIS environment takes full advantage of IIS features, such as process recycling, idle shutdown, process health monitoring, and message-based activation. This hosting option requires that IIS be properly configured, but it does not require that any hosting code be written as part of the application. You can use IIS hosting only with an HTTP transport.  \n  \n For more information about how WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] interact, see [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md). For more information about configuring security, see [Security](../../../../docs/framework/wcf/feature-details/security.md).  \n  \n For the source copy of this example, see [IIS Hosting Using Inline Code](../../../../docs/framework/wcf/samples/iis-hosting-using-inline-code.md).  \n  \n### To create a service hosted by IIS  \n  \n1.  Confirm that IIS is installed and running on your computer. For more information about installing and configuring IIS see [Installing and Configuring IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=132128)  \n  \n2.  Create a new folder for your application files called \"IISHostedCalcService\", ensure that [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] has access to the contents of the folder, and use the IIS management tool to create a new IIS application that is physically located in this application directory. When creating an alias for the application directory use \"IISHostedCalc\".  \n  \n3.  Create a new file named \"service.svc\" in the application directory. Edit this file by adding the following @ServiceHost element.  \n  \n    ```  \n    <%@ServiceHost language=c# Debug=\"true\" Service=\"Microsoft.ServiceModel.Samples.CalculatorService\"%>  \n    ```  \n  \n4.  Create an App_Code subdirectory within the application directory.  \n  \n5.  Create a code file named Service.cs in the App_Code subdirectory.  \n  \n6.  Add the following using statements to the top of the Service.cs file.  \n  \n    ```csharp  \n    using System;  \n    using System.ServiceModel;  \n    ```  \n  \n7.  Add the following namespace declaration after the using statements.  \n  \n    ```csharp  \n    namespace Microsoft.ServiceModel.Samples  \n    {  \n    }  \n    ```  \n  \n8.  Define the service contract inside the namespace declaration as shown in the following code.  \n  \n     [!code-csharp[c_HowTo_HostInIIS#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/cs/source.cs#11)]\n     [!code-vb[c_HowTo_HostInIIS#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howto_hostiniis/vb/source.vb#11)]  \n  \n9. Implement the service contract after the service contract definition as shown in the following code.  \n  \n     [!code-csharp[c_HowTo_HostInIIS#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/cs/source.cs#12)]\n     [!code-vb[c_HowTo_HostInIIS#12](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howto_hostiniis/vb/source.vb#12)]  \n  \n10. Create a file named \"Web.config\" in the application directory and add the following configuration code into the file. At runtime, the WCF infrastructure uses the information to construct an endpoint that client applications can communicate with.  \n  \n     [!code-xml[c_HowTo_HostInIIS#100](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/common/web.config#100)]      \n  \n     This example explicitly specifies endpoints in the configuration file. If you do not add any endpoints to the service, the runtime adds default endpoints for you. For more information about default endpoints, bindings, and behaviors see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).  \n  \n11. To make sure the service is hosted correctly, open an instance of Internet Explorer and browse to the service's URL: `http://localhost/IISHostedCalc/Service.svc`  \n  \n## Example  \n The following is a complete listing of the code for the IIS hosted calculator service.  \n  \n [!code-csharp[C_HowTo_HostInIIS#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/cs/source.cs#1)] \n [!code-vb[C_HowTo_HostInIIS#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howto_hostiniis/vb/source.vb#1)] \n [!code-xml[c_HowTo_HostInIIS#100](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/common/web.config#100)]  \n  \n## See also\n\n- [Hosting in Internet Information Services](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)\n- [Hosting Services](../../../../docs/framework/wcf/hosting-services.md)\n- [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)\n- [Security](../../../../docs/framework/wcf/feature-details/security.md)\n- [Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkId=201276)\n","nodes":[{"pos":[4,151],"embed":true,"restype":"x-metadata","content":"title: \"How to: Host a WCF Service in IIS\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: b044b1c9-c1e5-4c9f-84d8-0f02f4537f8b","nodes":[{"content":"How to: Host a WCF Service in IIS","nodes":[{"pos":[0,33],"content":"How to: Host a WCF Service in IIS","nodes":[{"content":"How to: Host a WCF Service in IIS","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[158,191],"content":"How to: Host a WCF Service in IIS","linkify":"How to: Host a WCF Service in IIS","nodes":[{"content":"How to: Host a WCF Service in IIS","pos":[0,33]}]},{"content":"This topic outlines the basic steps required to create a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS).","pos":[192,350]},{"content":"This topic assumes you are familiar with IIS and understand how to use the IIS management tool to create and manage IIS applications.","pos":[351,484]},{"content":"For more information about IIS see <bpt id=\"p1\">[</bpt>Internet Information Services<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=132449)</ept>.","pos":[485,600],"source":" For more information about IIS see [Internet Information Services](https://go.microsoft.com/fwlink/?LinkId=132449)."},{"content":"A WCF service that runs in the IIS environment takes full advantage of IIS features, such as process recycling, idle shutdown, process health monitoring, and message-based activation.","pos":[601,784]},{"content":"This hosting option requires that IIS be properly configured, but it does not require that any hosting code be written as part of the application.","pos":[785,931]},{"content":"You can use IIS hosting only with an HTTP transport.","pos":[932,984]},{"content":"For more information about how WCF and <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> interact, see <bpt id=\"p1\">[</bpt>WCF Services and ASP.NET<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)</ept>.","pos":[991,1204],"source":"For more information about how WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] interact, see [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)."},{"content":"For more information about configuring security, see <bpt id=\"p1\">[</bpt>Security<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/security.md)</ept>.","pos":[1205,1329],"source":" For more information about configuring security, see [Security](../../../../docs/framework/wcf/feature-details/security.md)."},{"pos":[1336,1482],"content":"For the source copy of this example, see <bpt id=\"p1\">[</bpt>IIS Hosting Using Inline Code<ept id=\"p1\">](../../../../docs/framework/wcf/samples/iis-hosting-using-inline-code.md)</ept>.","source":"For the source copy of this example, see [IIS Hosting Using Inline Code](../../../../docs/framework/wcf/samples/iis-hosting-using-inline-code.md)."},{"pos":[1492,1525],"content":"To create a service hosted by IIS","linkify":"To create a service hosted by IIS","nodes":[{"content":"To create a service hosted by IIS","pos":[0,33]}]},{"content":"Confirm that IIS is installed and running on your computer.","pos":[1535,1594]},{"content":"For more information about installing and configuring IIS see <bpt id=\"p1\">[</bpt>Installing and Configuring IIS 7.0<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=132128)</ept>","pos":[1595,1741],"source":" For more information about installing and configuring IIS see [Installing and Configuring IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=132128)"},{"content":"Create a new folder for your application files called \"IISHostedCalcService\", ensure that <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> has access to the contents of the folder, and use the IIS management tool to create a new IIS application that is physically located in this application directory.","pos":[1751,2062],"source":"Create a new folder for your application files called \"IISHostedCalcService\", ensure that [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] has access to the contents of the folder, and use the IIS management tool to create a new IIS application that is physically located in this application directory."},{"content":"When creating an alias for the application directory use \"IISHostedCalc\".","pos":[2063,2136]},{"content":"Create a new file named \"service.svc\" in the application directory.","pos":[2146,2213]},{"content":"Edit this file by adding the following <ph id=\"ph1\">@ServiceHost</ph> element.","pos":[2214,2274],"source":" Edit this file by adding the following @ServiceHost element."},{"content":"Create an App_Code subdirectory within the application directory.","pos":[2414,2479]},{"content":"Create a code file named Service.cs in the App_Code subdirectory.","pos":[2489,2554]},{"content":"Add the following using statements to the top of the Service.cs file.","pos":[2564,2633]},{"content":"Add the following namespace declaration after the using statements.","pos":[2725,2792]},{"content":"Define the service contract inside the namespace declaration as shown in the following code.","pos":[2894,2986]},{"pos":[2997,3250],"content":"[!code-csharp[c_HowTo_HostInIIS#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/cs/source.cs#11)]\n [!code-vb[c_HowTo_HostInIIS#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howto_hostiniis/vb/source.vb#11)]","leadings":["","    "],"nodes":[]},{"content":"Implement the service contract after the service contract definition as shown in the following code.","pos":[3259,3359]},{"pos":[3370,3623],"content":"[!code-csharp[c_HowTo_HostInIIS#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_hostiniis/cs/source.cs#12)]\n  [!code-vb[c_HowTo_HostInIIS#12](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_howto_hostiniis/vb/source.vb#12)]","leadings":["","   "],"nodes":[]},{"content":"Create a file named \"Web.config\" in the application directory and add the following configuration code into the file.","pos":[3633,3750]},{"content":"At runtime, the WCF infrastructure uses the information to construct an endpoint that client applications can communicate with.","pos":[3751,3878]},{"content":"This example explicitly specifies endpoints in the configuration file.","pos":[4031,4101]},{"content":"If you do not add any endpoints to the service, the runtime adds default endpoints for you.","pos":[4102,4193]},{"content":"For more information about default endpoints, bindings, and behaviors see <bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept> and <bpt id=\"p2\">[</bpt>Simplified Configuration for WCF Services<ept id=\"p2\">](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)</ept>.","pos":[4194,4488],"source":" For more information about default endpoints, bindings, and behaviors see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)."},{"pos":[4498,4659],"content":"To make sure the service is hosted correctly, open an instance of Internet Explorer and browse to the service's URL: <ph id=\"ph1\">`http://localhost/IISHostedCalc/Service.svc`</ph>","source":"To make sure the service is hosted correctly, open an instance of Internet Explorer and browse to the service's URL: `http://localhost/IISHostedCalc/Service.svc`"},{"pos":[4668,4675],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following is a complete listing of the code for the IIS hosted calculator service.","pos":[4679,4765]},{"pos":[5157,5165],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5169,5303],"content":"<bpt id=\"p1\">[</bpt>Hosting in Internet Information Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)</ept>","source":"[Hosting in Internet Information Services](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)"},{"pos":[5306,5376],"content":"<bpt id=\"p1\">[</bpt>Hosting Services<ept id=\"p1\">](../../../../docs/framework/wcf/hosting-services.md)</ept>","source":"[Hosting Services](../../../../docs/framework/wcf/hosting-services.md)"},{"pos":[5379,5480],"content":"<bpt id=\"p1\">[</bpt>WCF Services and ASP.NET<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)</ept>","source":"[WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)"},{"pos":[5483,5553],"content":"<bpt id=\"p1\">[</bpt>Security<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/security.md)</ept>","source":"[Security](../../../../docs/framework/wcf/feature-details/security.md)"},{"pos":[5556,5648],"content":"<bpt id=\"p1\">[</bpt>Windows Server App Fabric Hosting Features<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=201276)</ept>","source":"[Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkId=201276)"}]}