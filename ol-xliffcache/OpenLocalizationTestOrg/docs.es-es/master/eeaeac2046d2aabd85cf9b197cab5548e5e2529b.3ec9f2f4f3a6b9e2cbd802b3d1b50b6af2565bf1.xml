{"content":"---\ntitle: \"Building the Windows Communication Foundation Samples | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198\ncaps.latest.revision: 33\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Building the Windows Communication Foundation Samples\nThe [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] samples can be built using Visual Studio 2010 or using the **msbuild** command from the command line. Both procedures are described in this topic.  \n  \n> [!NOTE]\n>  Before building or running any of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] samples, ensure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n### To build the sample using a command prompt  \n  \n1.  Open the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] command prompt with administrator privileges and navigate to the language-specific subdirectory under the directory location where you installed the sample.  \n  \n2.  Type `msbuild` at the command line. The client program files are built to client\\bin and the service program files are built to service\\bin. If the service is hosted by Internet Information Services (IIS), the service program files are also copied to the servicemodelsamples directory and its \\bin subdirectory.  \n  \n> [!NOTE]\n>  You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running. Otherwise some post build events fail. Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.  \n  \n### To build the sample using Visual Studio  \n  \n1.  If you are using [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], Windows 7, or Windows Server 2008 R2, and running [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] with elevated permission. To do so, right-click the icon on the Start menu and then click **Run as administrator**.  \n  \n2.  From the **File** menu in [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], click **Open**, then click **Project/Solution**. Navigate to the language-specific subdirectory under the directory in which you installed the sample, and double-click the .sln file icon to open the solution in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].  \n  \n3.  In the **Build** menu, select **Rebuild Solution**. The client program files are built to client\\bin and the service program files are built to service\\bin. If the service is hosted in IIS, the service program files are also copied to the servicemodelsamples directory and its \\bin subdirectory.  \n  \n> [!NOTE]\n>  You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running. Otherwise some post build events fail. Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator. Some Visual Studio actions (such as attaching a debugger to the ASP.Net worker process) also require administrative privileges.  \n  \n## Setup Batch Files and Scripts  \n Setup.exe and Cleanup.exe batch files and scripts should be run from a Visual Studio command prompt. Several set up and clean up files perform tasks that require administrative privileges and should be launched with administrator privileges.  \n  \n## Important Security Information about Metadata Endpoints  \n To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services disables metadata publishing. This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration. To make experimenting with the samples easier, almost all samples expose an unsecured metadata publishing endpoint. Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] publishing service metadata, see the [Metadata Publishing Behavior](../../../../docs/framework/wcf/samples/metadata-publishing-behavior.md) sample. See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample securing a metadata endpoint.  \n  \n## Exception Handling  \n Generally speaking these samples do not include exception handling to keep the code focused on the subject of the sample. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] exception handling, see the [Expected Exceptions](../../../../docs/framework/wcf/samples/expected-exceptions.md) sample.  \n  \n## Regenerating Clients and Configuration with Svcutil  \n You can use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to regenerate client code and configuration for most of the samples. Some samples require manually edited configuration. For example, if you use Svcutil.exe to regenerate the configuration for a sample that uses client certificate credentials, you must manually specify the credentials previously configured. Some samples use specific Svcutil.exe options to affect the generated code, these options are specified in the specific sample topics.  \n  \n#### To regenerate the client and configuration files  \n  \n1.  Open an SDK command prompt and navigate to the language-specific subdirectory under the directory location where you installed the sample.  \n  \n2.  If the service is a Web-hosted type, use the following command.  \n  \n    ```  \n    svcutil.exe /n:\"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples\" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs  \n    ```  \n  \n     If the service is a self-hosted type the following command.  \n  \n    ```  \n    svcutil.exe /n:\"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples\" http://localhost:8000/servicemodelsamples/service.svc/mex /out:generatedClient.cs  \n    ```  \n  \n     Replace http://localhost:8000/ServiceModelSamples/service.svc/mex with the address of the self-hosted service's mex endpoint.  \n  \n     To generate the client in a Visual Basic type, use the following command.  \n  \n    ```  \n    svcutil.exe /n:\"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples\" http://localhost/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb  \n  \n    ```  \n  \n     If the service is a self-hosted type, use the following command.  \n  \n    ```  \n    svcutil.exe /n:\"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples\" http://localhost:8000/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb  \n    ```  \n  \n    > [!NOTE]\n    >  To skip the generation of client configuration add the **/noConfig** option.  \n  \n## See Also  \n [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)   \n [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)","nodes":[{"pos":[4,374],"nodes":[{"content":"Building the Windows Communication Foundation Samples | Microsoft Docs","nodes":[{"pos":[0,70],"content":"Building the Windows Communication Foundation Samples | Microsoft Docs","nodes":[{"content":"Building the Windows Communication Foundation Samples | Microsoft Docs","pos":[0,70]}]}],"pos":[6,79],"yaml":true}],"content":"title: \"Building the Windows Communication Foundation Samples | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198\ncaps.latest.revision: 33\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[381,434],"content":"Building the Windows Communication Foundation Samples","linkify":"Building the Windows Communication Foundation Samples","nodes":[{"content":"Building the Windows Communication Foundation Samples","pos":[0,53]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> samples can be built using Visual Studio 2010 or using the <bpt id=\"p1\">**</bpt>msbuild<ept id=\"p1\">**</ept> command from the command line.","pos":[435,596],"source":"The [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] samples can be built using Visual Studio 2010 or using the **msbuild** command from the command line."},{"content":"Both procedures are described in this topic.","pos":[597,641]},{"pos":[649,957],"content":"[!NOTE]\n Before building or running any of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] samples, ensure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).","leadings":["","> "],"nodes":[{"content":"Before building or running any of the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> samples, ensure you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","pos":[9,306],"source":"Before building or running any of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] samples, ensure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."}]},{"pos":[967,1009],"content":"To build the sample using a command prompt","linkify":"To build the sample using a command prompt","nodes":[{"content":"To build the sample using a command prompt","pos":[0,42]}]},{"pos":[1019,1256],"content":"Open the <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph> command prompt with administrator privileges and navigate to the language-specific subdirectory under the directory location where you installed the sample.","source":"Open the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] command prompt with administrator privileges and navigate to the language-specific subdirectory under the directory location where you installed the sample."},{"content":"Type <ph id=\"ph1\">`msbuild`</ph> at the command line.","pos":[1266,1301],"source":"Type `msbuild` at the command line."},{"content":"The client program files are built to client\\bin and the service program files are built to service\\bin.","pos":[1302,1406]},{"content":"If the service is hosted by Internet Information Services (IIS), the service program files are also copied to the servicemodelsamples directory and its \\bin subdirectory.","pos":[1407,1577]},{"pos":[1585,1860],"content":"[!NOTE]\n You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running. Otherwise some post build events fail. Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.","leadings":["","> "],"nodes":[{"content":"You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running. Otherwise some post build events fail. Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.","pos":[9,273],"nodes":[{"content":"You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running.","pos":[0,126]},{"content":"Otherwise some post build events fail.","pos":[127,165]},{"content":"Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.","pos":[166,264]}]}]},{"pos":[1870,1909],"content":"To build the sample using Visual Studio","linkify":"To build the sample using Visual Studio","nodes":[{"content":"To build the sample using Visual Studio","pos":[0,39]}]},{"content":"If you are using <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>, <ph id=\"ph2\">[!INCLUDE[lserver](../../../../includes/lserver-md.md)]</ph>, Windows 7, or Windows Server 2008 R2, and running <ph id=\"ph3\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>, you must run <ph id=\"ph4\">[!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]</ph> with elevated permission.","pos":[1919,2255],"source":"If you are using [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], Windows 7, or Windows Server 2008 R2, and running [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] with elevated permission."},{"content":"To do so, right-click the icon on the Start menu and then click <bpt id=\"p1\">**</bpt>Run as administrator<ept id=\"p1\">**</ept>.","pos":[2256,2345],"source":" To do so, right-click the icon on the Start menu and then click **Run as administrator**."},{"content":"From the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu in <ph id=\"ph1\">[!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)]</ph>, click <bpt id=\"p2\">**</bpt>Open<ept id=\"p2\">**</ept>, then click <bpt id=\"p3\">**</bpt>Project/Solution<ept id=\"p3\">**</ept>.","pos":[2355,2504],"source":"From the **File** menu in [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], click **Open**, then click **Project/Solution**."},{"content":"Navigate to the language-specific subdirectory under the directory in which you installed the sample, and double-click the .sln file icon to open the solution in <ph id=\"ph1\">[!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]</ph>.","pos":[2505,2721],"source":" Navigate to the language-specific subdirectory under the directory in which you installed the sample, and double-click the .sln file icon to open the solution in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]."},{"content":"In the <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Rebuild Solution<ept id=\"p2\">**</ept>.","pos":[2731,2782],"source":"In the **Build** menu, select **Rebuild Solution**."},{"content":"The client program files are built to client\\bin and the service program files are built to service\\bin.","pos":[2783,2887]},{"content":"If the service is hosted in IIS, the service program files are also copied to the servicemodelsamples directory and its \\bin subdirectory.","pos":[2888,3026]},{"pos":[3034,3454],"content":"[!NOTE]\n You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running. Otherwise some post build events fail. Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator. Some Visual Studio actions (such as attaching a debugger to the ASP.Net worker process) also require administrative privileges.","leadings":["","> "],"nodes":[{"content":"You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running. Otherwise some post build events fail. Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator. Some Visual Studio actions (such as attaching a debugger to the ASP.Net worker process) also require administrative privileges.","pos":[9,418],"nodes":[{"content":"You must set the ACLs on %systemdrive%\\inetpub\\wwwroot to grant modify permissions to the account under which you are running.","pos":[0,126]},{"content":"Otherwise some post build events fail.","pos":[127,165]},{"content":"Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator.","pos":[166,281]},{"content":"Some Visual Studio actions (such as attaching a debugger to the ASP.Net worker process) also require administrative privileges.","pos":[282,409]}]}]},{"pos":[3463,3492],"content":"Setup Batch Files and Scripts","linkify":"Setup Batch Files and Scripts","nodes":[{"content":"Setup Batch Files and Scripts","pos":[0,29]}]},{"content":"Setup.exe and Cleanup.exe batch files and scripts should be run from a Visual Studio command prompt.","pos":[3496,3596]},{"content":"Several set up and clean up files perform tasks that require administrative privileges and should be launched with administrator privileges.","pos":[3597,3737]},{"pos":[3746,3801],"content":"Important Security Information about Metadata Endpoints","linkify":"Important Security Information about Metadata Endpoints","nodes":[{"content":"Important Security Information about Metadata Endpoints","pos":[0,55]}]},{"content":"To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> services disables metadata publishing.","pos":[3805,4008],"source":"To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services disables metadata publishing."},{"content":"This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration.","pos":[4009,4271]},{"content":"To make experimenting with the samples easier, almost all samples expose an unsecured metadata publishing endpoint.","pos":[4272,4387]},{"content":"Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate.","pos":[4388,4594]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> publishing service metadata, see the <bpt id=\"p1\">[</bpt>Metadata Publishing Behavior<ept id=\"p1\">](../../../../docs/framework/wcf/samples/metadata-publishing-behavior.md)</ept> sample.","pos":[4595,4798],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] publishing service metadata, see the [Metadata Publishing Behavior](../../../../docs/framework/wcf/samples/metadata-publishing-behavior.md) sample."},{"content":"See the <bpt id=\"p1\">[</bpt>Custom Secure Metadata Endpoint<ept id=\"p1\">](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md)</ept> sample for a sample securing a metadata endpoint.","pos":[4799,4965],"source":" See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample securing a metadata endpoint."},{"pos":[4974,4992],"content":"Exception Handling","linkify":"Exception Handling","nodes":[{"content":"Exception Handling","pos":[0,18]}]},{"content":"Generally speaking these samples do not include exception handling to keep the code focused on the subject of the sample.","pos":[4996,5117]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> exception handling, see the <bpt id=\"p1\">[</bpt>Expected Exceptions<ept id=\"p1\">](../../../../docs/framework/wcf/samples/expected-exceptions.md)</ept> sample.","pos":[5118,5294],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] exception handling, see the [Expected Exceptions](../../../../docs/framework/wcf/samples/expected-exceptions.md) sample."},{"pos":[5303,5354],"content":"Regenerating Clients and Configuration with Svcutil","linkify":"Regenerating Clients and Configuration with Svcutil","nodes":[{"content":"Regenerating Clients and Configuration with Svcutil","pos":[0,51]}]},{"content":"You can use the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> to regenerate client code and configuration for most of the samples.","pos":[5358,5575],"source":"You can use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to regenerate client code and configuration for most of the samples."},{"content":"Some samples require manually edited configuration.","pos":[5576,5627]},{"content":"For example, if you use Svcutil.exe to regenerate the configuration for a sample that uses client certificate credentials, you must manually specify the credentials previously configured.","pos":[5628,5815]},{"content":"Some samples use specific Svcutil.exe options to affect the generated code, these options are specified in the specific sample topics.","pos":[5816,5950]},{"pos":[5961,6009],"content":"To regenerate the client and configuration files","linkify":"To regenerate the client and configuration files","nodes":[{"content":"To regenerate the client and configuration files","pos":[0,48]}]},{"content":"Open an SDK command prompt and navigate to the language-specific subdirectory under the directory location where you installed the sample.","pos":[6019,6157]},{"content":"If the service is a Web-hosted type, use the following command.","pos":[6167,6230]},{"content":"If the service is a self-hosted type the following command.","pos":[6433,6492]},{"content":"Replace http://localhost:8000/ServiceModelSamples/service.svc/mex with the address of the self-hosted service's mex endpoint.","pos":[6700,6825]},{"content":"To generate the client in a Visual Basic type, use the following command.","pos":[6836,6909]},{"content":"If the service is a self-hosted type, use the following command.","pos":[7121,7185]},{"pos":[7400,7491],"content":"[!NOTE]\nTo skip the generation of client configuration add the **/noConfig** option.","leadings":["","    >  "],"nodes":[{"content":"To skip the generation of client configuration add the <bpt id=\"p1\">**</bpt>/noConfig<ept id=\"p1\">**</ept> option.","pos":[8,84],"source":"To skip the generation of client configuration add the **/noConfig** option."}]},{"pos":[7500,7508],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept><ph id=\"ph1\"> </ph>","pos":[7512,7630],"source":"[Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md) "},{"content":"<bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept>","pos":[7634,7766],"source":"[ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)"}]}