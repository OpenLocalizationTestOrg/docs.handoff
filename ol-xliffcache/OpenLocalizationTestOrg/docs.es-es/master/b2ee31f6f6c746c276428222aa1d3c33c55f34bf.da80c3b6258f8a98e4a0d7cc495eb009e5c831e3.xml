{"content":"---\ntitle: \"How to: Publish Events that Conform to .NET Framework Guidelines - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"events [C#], implementation guidelines\"\nms.assetid: 9310ae16-8627-44a2-b08c-05e5976202b1\n---\n# How to: Publish Events that Conform to .NET Framework Guidelines (C# Programming Guide)\nThe following procedure demonstrates how to add events that follow the standard [!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)] pattern to your classes and structs. All events in the [!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)] class library are based on the <xref:System.EventHandler> delegate, which is defined as follows:  \n  \n```csharp  \npublic delegate void EventHandler(object sender, EventArgs e);  \n```  \n  \n> [!NOTE]\n>  The [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] introduces a generic version of this delegate, <xref:System.EventHandler%601>. The following examples show how to use both versions.  \n  \n Although events in classes that you define can be based on any valid delegate type, even delegates that return a value, it is generally recommended that you base your events on the [!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)] pattern by using <xref:System.EventHandler>, as shown in the following example.  \n  \n### To publish events based on the EventHandler pattern  \n  \n1.  (Skip this step and go to Step 3a if you do not have to send custom data with your event.) Declare the class for your custom data at a scope that is visible to both your publisher and subscriber classes. Then add the required members to hold your custom event data. In this example, a simple string is returned.  \n  \n    ```csharp  \n    public class CustomEventArgs : EventArgs  \n    {  \n        public CustomEventArgs(string s)  \n        {  \n            msg = s;  \n        }  \n        private string msg;  \n        public string Message  \n        {  \n            get { return msg; }  \n        }   \n    }  \n    ```  \n  \n2.  (Skip this step if you are using the generic version of <xref:System.EventHandler%601> .) Declare a delegate in your publishing class. Give it a name that ends with *EventHandler*. The second parameter specifies your custom EventArgs type.  \n  \n    ```csharp  \n    public delegate void CustomEventHandler(object sender, CustomEventArgs a);  \n    ```  \n  \n3.  Declare the event in your publishing class by using one of the following steps.  \n  \n    1.  If you have no custom EventArgs class, your Event type will be the non-generic EventHandler delegate. You do not have to declare the delegate because it is already declared in the <xref:System> namespace that is included when you create your C# project. Add the following code to your publisher class.  \n  \n        ```csharp  \n        public event EventHandler RaiseCustomEvent;  \n        ```  \n  \n    2.  If you are using the non-generic version of <xref:System.EventHandler> and you have a custom class derived from <xref:System.EventArgs>, declare your event inside your publishing class and use your delegate from step 2 as the type.  \n  \n        ```csharp  \n        public event CustomEventHandler RaiseCustomEvent;  \n        ```  \n  \n    3.  If you are using the generic version, you do not need a custom delegate. Instead, in your publishing class, you specify your event type as `EventHandler<CustomEventArgs>`, substituting the name of your own class between the angle brackets.  \n  \n        ```csharp  \n        public event EventHandler<CustomEventArgs> RaiseCustomEvent;  \n        ```  \n  \n## Example  \n The following example demonstrates the previous steps by using a custom EventArgs class and <xref:System.EventHandler%601> as the event type.  \n  \n [!code-csharp[csProgGuideEvents#2](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideEvents/CS/Events.cs#2)]  \n  \n## See also\n\n- <xref:System.Delegate>\n- [C# Programming Guide](../../../csharp/programming-guide/index.md)\n- [Events](../../../csharp/programming-guide/events/index.md)\n- [Delegates](../../../csharp/programming-guide/delegates/index.md)\n","nodes":[{"pos":[4,256],"embed":true,"restype":"x-metadata","content":"title: \"How to: Publish Events that Conform to .NET Framework Guidelines - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"events [C#], implementation guidelines\"\nms.assetid: 9310ae16-8627-44a2-b08c-05e5976202b1","nodes":[{"content":"How to: Publish Events that Conform to .NET Framework Guidelines - C# Programming Guide","nodes":[{"pos":[0,87],"content":"How to: Publish Events that Conform to .NET Framework Guidelines - C# Programming Guide","nodes":[{"content":"How to: Publish Events that Conform to .NET Framework Guidelines - C# Programming Guide","pos":[0,87]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[263,350],"content":"How to: Publish Events that Conform to .NET Framework Guidelines (C# Programming Guide)","linkify":"How to: Publish Events that Conform to .NET Framework Guidelines (C# Programming Guide)","nodes":[{"content":"How to: Publish Events that Conform to .NET Framework Guidelines (C# Programming Guide)","pos":[0,87]}]},{"content":"The following procedure demonstrates how to add events that follow the standard <ph id=\"ph1\">[!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)]</ph> pattern to your classes and structs.","pos":[351,521],"source":"The following procedure demonstrates how to add events that follow the standard [!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)] pattern to your classes and structs."},{"content":"All events in the <ph id=\"ph1\">[!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)]</ph> class library are based on the <ph id=\"ph2\">&lt;xref:System.EventHandler&gt;</ph> delegate, which is defined as follows:","pos":[522,690],"source":" All events in the [!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)] class library are based on the <xref:System.EventHandler> delegate, which is defined as follows:"},{"pos":[784,983],"content":"[!NOTE]\n The [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] introduces a generic version of this delegate, <xref:System.EventHandler%601>. The following examples show how to use both versions.","leadings":["","> "],"nodes":[{"content":"The [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] introduces a generic version of this delegate, <xref:System.EventHandler%601>. The following examples show how to use both versions.","pos":[9,197],"nodes":[{"content":"The <ph id=\"ph1\">[!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)]</ph> introduces a generic version of this delegate, <ph id=\"ph2\">&lt;xref:System.EventHandler%601&gt;</ph>.","pos":[0,134],"source":"The [!INCLUDE[dnprdnlong](~/includes/dnprdnlong-md.md)] introduces a generic version of this delegate, <xref:System.EventHandler%601>."},{"content":"The following examples show how to use both versions.","pos":[135,188]}]}]},{"pos":[990,1304],"content":"Although events in classes that you define can be based on any valid delegate type, even delegates that return a value, it is generally recommended that you base your events on the <ph id=\"ph1\">[!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)]</ph> pattern by using <ph id=\"ph2\">&lt;xref:System.EventHandler&gt;</ph>, as shown in the following example.","source":"Although events in classes that you define can be based on any valid delegate type, even delegates that return a value, it is generally recommended that you base your events on the [!INCLUDE[dnprdnshort](~/includes/dnprdnshort-md.md)] pattern by using <xref:System.EventHandler>, as shown in the following example."},{"pos":[1314,1365],"content":"To publish events based on the EventHandler pattern","linkify":"To publish events based on the EventHandler pattern","nodes":[{"content":"To publish events based on the EventHandler pattern","pos":[0,51]}]},{"content":"(Skip this step and go to Step 3a if you do not have to send custom data with your event.) Declare the class for your custom data at a scope that is visible to both your publisher and subscriber classes.","pos":[1375,1578]},{"content":"Then add the required members to hold your custom event data.","pos":[1579,1640]},{"content":"In this example, a simple string is returned.","pos":[1641,1686]},{"content":"(Skip this step if you are using the generic version of <ph id=\"ph1\">&lt;xref:System.EventHandler%601&gt;</ph> .) Declare a delegate in your publishing class.","pos":[1999,2133],"source":"(Skip this step if you are using the generic version of <xref:System.EventHandler%601> .) Declare a delegate in your publishing class."},{"content":"Give it a name that ends with <bpt id=\"p1\">*</bpt>EventHandler<ept id=\"p1\">*</ept>.","pos":[2134,2179],"source":" Give it a name that ends with *EventHandler*."},{"content":"The second parameter specifies your custom EventArgs type.","pos":[2180,2238]},{"content":"Declare the event in your publishing class by using one of the following steps.","pos":[2358,2437]},{"content":"If you have no custom EventArgs class, your Event type will be the non-generic EventHandler delegate.","pos":[2451,2552]},{"content":"You do not have to declare the delegate because it is already declared in the <ph id=\"ph1\">&lt;xref:System&gt;</ph> namespace that is included when you create your C# project.","pos":[2553,2704],"source":" You do not have to declare the delegate because it is already declared in the <xref:System> namespace that is included when you create your C# project."},{"content":"Add the following code to your publisher class.","pos":[2705,2752]},{"pos":[2857,3088],"content":"If you are using the non-generic version of <ph id=\"ph1\">&lt;xref:System.EventHandler&gt;</ph> and you have a custom class derived from <ph id=\"ph2\">&lt;xref:System.EventArgs&gt;</ph>, declare your event inside your publishing class and use your delegate from step 2 as the type.","source":"If you are using the non-generic version of <xref:System.EventHandler> and you have a custom class derived from <xref:System.EventArgs>, declare your event inside your publishing class and use your delegate from step 2 as the type."},{"content":"If you are using the generic version, you do not need a custom delegate.","pos":[3199,3271]},{"content":"Instead, in your publishing class, you specify your event type as <ph id=\"ph1\">`EventHandler&lt;CustomEventArgs&gt;`</ph>, substituting the name of your own class between the angle brackets.","pos":[3272,3438],"source":" Instead, in your publishing class, you specify your event type as `EventHandler<CustomEventArgs>`, substituting the name of your own class between the angle brackets."},{"pos":[3555,3562],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[3566,3707],"content":"The following example demonstrates the previous steps by using a custom EventArgs class and <ph id=\"ph1\">&lt;xref:System.EventHandler%601&gt;</ph> as the event type.","source":"The following example demonstrates the previous steps by using a custom EventArgs class and <xref:System.EventHandler%601> as the event type."},{"pos":[3839,3847],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3876,3942],"content":"<bpt id=\"p1\">[</bpt>C# Programming Guide<ept id=\"p1\">](../../../csharp/programming-guide/index.md)</ept>","source":"[C# Programming Guide](../../../csharp/programming-guide/index.md)"},{"pos":[3945,4004],"content":"<bpt id=\"p1\">[</bpt>Events<ept id=\"p1\">](../../../csharp/programming-guide/events/index.md)</ept>","source":"[Events](../../../csharp/programming-guide/events/index.md)"},{"pos":[4007,4072],"content":"<bpt id=\"p1\">[</bpt>Delegates<ept id=\"p1\">](../../../csharp/programming-guide/delegates/index.md)</ept>","source":"[Delegates](../../../csharp/programming-guide/delegates/index.md)"}]}