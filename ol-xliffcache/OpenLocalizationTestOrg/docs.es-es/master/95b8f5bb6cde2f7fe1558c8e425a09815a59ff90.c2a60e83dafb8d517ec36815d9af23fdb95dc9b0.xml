{"content":"---\ntitle: \"ServiceModel Transaction Configuration | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"transactions [WCF], ServiceModel configuration\"\nms.assetid: 5636067a-7fbd-4485-aaa2-8141c502acf3\ncaps.latest.revision: 8\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# ServiceModel Transaction Configuration\n[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] provides three attributes for configuring transactions for a service: `transactionFlow`, `transactionProtocol`, and `transactionTimeout`.  \n  \n## Configuring transactionFlow  \n Most of the predefined bindings [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides contain the `transactionFlow` and `transactionProtocol` attributes, so that you can configure the binding to accept incoming transactions for a specific endpoint using a specific transaction flow protocol. In addition, you can use the `transactionFlow` element and its `transactionProtocol` attribute to build your own custom binding. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] setting the configuration elements, see [\\<binding>](../../../../docs/framework/misc/binding.md) and [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md).  \n  \n The `transactionFlow` attribute specifies whether transaction flow is enabled for service endpoints that use the binding.  \n  \n## Configuring transactionProtocol  \n The `transactionProtocol` attribute specifies the transaction protocol to use with service endpoints that use the binding.  \n  \n The following is an example of a configuration section that configures the specified binding to support transaction flow, as well as a use the WS-AtomicTransaction protocol.  \n  \n```  \n<netNamedPipeBinding>  \n   <binding name=\"test\"  \n      closeTimeout=\"00:00:10\"  \n      openTimeout=\"00:00:20\"   \n      receiveTimeout=\"00:00:30\"  \n      sendTimeout=\"00:00:40\"  \n      transactionFlow=\"true\"  \n      transactionProtocol=\"WSAtomicTransactionOctober2004\"  \n      hostNameComparisonMode=\"WeakWildcard\"  \n      maxBufferSize=\"1001\"  \n      maxConnections=\"123\"   \n      maxReceivedMessageSize=\"1000\">  \n   </binding>  \n</netNamedPipeBinding>  \n```  \n  \n## Configuring transactionTimeout  \n You can configure the `transactionTimeout` attribute for your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service in the `behavior` element of the configuration file. The following code demonstrates how to do this.  \n  \n```  \n<configuration>  \n   <system.serviceModel>  \n      <behaviors>  \n         <behavior name=\"NewBehavior\" transactionTimeout=\"00:01:00\" /> <!-- 1 minute timeout -->  \n      </behaviors>  \n   </system.serviceModel>  \n</configuration>  \n```  \n  \n The `transactionTimeout` attribute specifies the time period within which a new transaction created at the service must complete. It is used as the <xref:System.Transactions.TransactionScope> time-out for any operation that establishes a new transaction, and if <xref:System.ServiceModel.OperationBehaviorAttribute> is applied, the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`.  \n  \n The time-out specifies the duration of time from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.  \n  \n If this attribute is set within a `service` configuration section, you should apply at least one method of the corresponding service with <xref:System.ServiceModel.OperationBehaviorAttribute>, in which the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`.  \n  \n Note that the time-out value used is the smaller value between this `transactionTimeout` configuration setting and any <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property.  \n  \n## See Also  \n [\\<binding>](../../../../docs/framework/misc/binding.md)   \n [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)","nodes":[{"pos":[12,67],"content":"ServiceModel Transaction Configuration | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"ServiceModel Transaction Configuration | Microsoft Docs","pos":[0,55]}]},{"pos":[440,478],"content":"ServiceModel Transaction Configuration","linkify":"ServiceModel Transaction Configuration","nodes":[{"content":"ServiceModel Transaction Configuration","pos":[0,38]}]},{"pos":[479,672],"content":"<ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> provides three attributes for configuring transactions for a service: <ph id=\"ph2\">`transactionFlow`</ph>, <ph id=\"ph3\">`transactionProtocol`</ph>, and <ph id=\"ph4\">`transactionTimeout`</ph>.","source":"[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] provides three attributes for configuring transactions for a service: `transactionFlow`, `transactionProtocol`, and `transactionTimeout`."},{"pos":[681,708],"content":"Configuring transactionFlow","linkify":"Configuring transactionFlow","nodes":[{"content":"Configuring transactionFlow","pos":[0,27]}]},{"content":"Most of the predefined bindings <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> provides contain the <ph id=\"ph2\">`transactionFlow`</ph> and <ph id=\"ph3\">`transactionProtocol`</ph> attributes, so that you can configure the binding to accept incoming transactions for a specific endpoint using a specific transaction flow protocol.","pos":[712,1014],"source":"Most of the predefined bindings [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides contain the `transactionFlow` and `transactionProtocol` attributes, so that you can configure the binding to accept incoming transactions for a specific endpoint using a specific transaction flow protocol."},{"content":"In addition, you can use the <ph id=\"ph1\">`transactionFlow`</ph> element and its <ph id=\"ph2\">`transactionProtocol`</ph> attribute to build your own custom binding.","pos":[1015,1143],"source":" In addition, you can use the `transactionFlow` element and its `transactionProtocol` attribute to build your own custom binding."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> setting the configuration elements, see <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept> and <bpt id=\"p2\">[</bpt>WCF Configuration Schema<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)</ept>.","pos":[1144,1396],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] setting the configuration elements, see [\\<binding>](../../../../docs/framework/misc/binding.md) and [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)."},{"pos":[1403,1524],"content":"The <ph id=\"ph1\">`transactionFlow`</ph> attribute specifies whether transaction flow is enabled for service endpoints that use the binding.","source":"The `transactionFlow` attribute specifies whether transaction flow is enabled for service endpoints that use the binding."},{"pos":[1533,1564],"content":"Configuring transactionProtocol","linkify":"Configuring transactionProtocol","nodes":[{"content":"Configuring transactionProtocol","pos":[0,31]}]},{"pos":[1568,1690],"content":"The <ph id=\"ph1\">`transactionProtocol`</ph> attribute specifies the transaction protocol to use with service endpoints that use the binding.","source":"The `transactionProtocol` attribute specifies the transaction protocol to use with service endpoints that use the binding."},{"content":"The following is an example of a configuration section that configures the specified binding to support transaction flow, as well as a use the WS-AtomicTransaction protocol.","pos":[1697,1870]},{"pos":[2350,2380],"content":"Configuring transactionTimeout","linkify":"Configuring transactionTimeout","nodes":[{"content":"Configuring transactionTimeout","pos":[0,30]}]},{"content":"You can configure the <ph id=\"ph1\">`transactionTimeout`</ph> attribute for your <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service in the <ph id=\"ph3\">`behavior`</ph> element of the configuration file.","pos":[2384,2562],"source":"You can configure the `transactionTimeout` attribute for your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service in the `behavior` element of the configuration file."},{"content":"The following code demonstrates how to do this.","pos":[2563,2610]},{"content":"The <ph id=\"ph1\">`transactionTimeout`</ph> attribute specifies the time period within which a new transaction created at the service must complete.","pos":[2864,2993],"source":"The `transactionTimeout` attribute specifies the time period within which a new transaction created at the service must complete."},{"content":"It is used as the <ph id=\"ph1\">&lt;xref:System.Transactions.TransactionScope&gt;</ph> time-out for any operation that establishes a new transaction, and if <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph> is applied, the <ph id=\"ph3\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A&gt;</ph> property is set to <ph id=\"ph4\">`true`</ph>.","pos":[2994,3304],"source":" It is used as the <xref:System.Transactions.TransactionScope> time-out for any operation that establishes a new transaction, and if <xref:System.ServiceModel.OperationBehaviorAttribute> is applied, the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`."},{"content":"The time-out specifies the duration of time from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.","pos":[3311,3454]},{"pos":[3461,3775],"content":"If this attribute is set within a <ph id=\"ph1\">`service`</ph> configuration section, you should apply at least one method of the corresponding service with <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph>, in which the <ph id=\"ph3\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A&gt;</ph> property is set to <ph id=\"ph4\">`true`</ph>.","source":"If this attribute is set within a `service` configuration section, you should apply at least one method of the corresponding service with <xref:System.ServiceModel.OperationBehaviorAttribute>, in which the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`."},{"pos":[3782,3984],"content":"Note that the time-out value used is the smaller value between this <ph id=\"ph1\">`transactionTimeout`</ph> configuration setting and any <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A&gt;</ph> property.","source":"Note that the time-out value used is the smaller value between this `transactionTimeout` configuration setting and any <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property."},{"pos":[3993,4001],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept><ph id=\"ph2\"> </ph>","pos":[4005,4062],"source":"[\\<binding>](../../../../docs/framework/misc/binding.md) "},{"content":"<bpt id=\"p1\"> [</bpt>WCF Configuration Schema<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)</ept>","pos":[4065,4160],"source":" [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)"}]}