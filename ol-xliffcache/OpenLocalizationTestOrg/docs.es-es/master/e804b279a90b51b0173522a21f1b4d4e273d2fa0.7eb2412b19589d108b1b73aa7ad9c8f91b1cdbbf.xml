{"content":"---\ntitle: \"Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"certificates [WCF], validation differences\"\nms.assetid: 953a219f-4745-4019-9894-c70704f352e6\ncaps.latest.revision: 14\nauthor: \"BrucePerlerMS\"\nms.author: \"bruceper\"\nmanager: \"mbaldwin\"\n---\n# Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security\nYou can use certificates in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] with message-layer (SOAP) security in addition to transport-layer security (TLS) over HTTP (HTTPS) or TCP. This topic describes differences in the way such certificates are validated.  \n  \n## Validation of HTTPS Client Certificates  \n When using HTTPS to communicate between a client and a service, the certificate that the client uses to authenticate to the service must support chain trust. That is, it must chain to a trusted root certificate authority. If not, the HTTP layer raises a <xref:System.Net.WebException> with the message \"The remote server returned an error: (403) Forbidden.\" [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] surfaces this exception as a <xref:System.ServiceModel.Security.MessageSecurityException>.  \n  \n## Validation of HTTPS Service Certificates  \n When using HTTPS to communicate between a client and a service, the certificate that the server authenticates with must support chain trust by default. That is, it must chain to a trusted root certificate authority. No online check is performed to see whether the certificate has been revoked. You can override this behavior by registering a <xref:System.Net.Security.RemoteCertificateValidationCallback> callback, as shown in the following code.  \n  \n [!code-csharp[c_CertificateValidationDifferences#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#1)] \n [!code-vb[c_CertificateValidationDifferences#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#1)]   \n  \n where the signature for `ValidateServerCertificate` is as follows:  \n  \n [!code-csharp[c_CertificateValidationDifferences#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#2)]\n [!code-vb[c_CertificateValidationDifferences#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#2)]  \n  \n Implementing `ValidateServerCertificate` can perform any checks that the client application developer deems necessary to validate the service certificate.  \n  \n## Validation of Client Certificates in SSL over TCP or SOAP Security  \n When using Secure Sockets Layer (SSL) over TCP or message (SOAP) security, client certificates are validated according to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class. The property is set to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> values. Revocation checking is performed according to the values of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.RevocationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class. The property is set to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> values.  \n  \n [!code-csharp[c_CertificateValidationDifferences#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#3)]\n [!code-vb[c_CertificateValidationDifferences#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#3)]  \n  \n## Validation of Service Certificate in SSL over TCP and SOAP Security  \n When using SSL over TCP or (SOAP) message security, service certificates are validated according to the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> class. The property is set to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> values.  \n  \n Revocation checking is performed according to the values of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.RevocationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> class. The property is set to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> values.  \n  \n [!code-csharp[c_CertificateValidationDifferences#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#4)]\n [!code-vb[c_CertificateValidationDifferences#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#4)]  \n  \n## See Also  \n <xref:System.Net.Security.RemoteCertificateValidationCallback>   \n [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)","nodes":[{"pos":[12,110],"content":"Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security | Microsoft Docs","pos":[0,98]}]},{"pos":[491,572],"content":"Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security","linkify":"Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security","nodes":[{"content":"Certificate Validation Differences Between HTTPS, SSL over TCP, and SOAP Security","pos":[0,81]}]},{"content":"You can use certificates in <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> with message-layer (SOAP) security in addition to transport-layer security (TLS) over HTTP (HTTPS) or TCP.","pos":[573,763],"source":"You can use certificates in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] with message-layer (SOAP) security in addition to transport-layer security (TLS) over HTTP (HTTPS) or TCP."},{"content":"This topic describes differences in the way such certificates are validated.","pos":[764,840]},{"pos":[849,888],"content":"Validation of HTTPS Client Certificates","linkify":"Validation of HTTPS Client Certificates","nodes":[{"content":"Validation of HTTPS Client Certificates","pos":[0,39]}]},{"content":"When using HTTPS to communicate between a client and a service, the certificate that the client uses to authenticate to the service must support chain trust.","pos":[892,1049]},{"content":"That is, it must chain to a trusted root certificate authority.","pos":[1050,1113]},{"content":"If not, the HTTP layer raises a <ph id=\"ph1\">&lt;xref:System.Net.WebException&gt;</ph> with the message \"The remote server returned an error: (403) Forbidden.\"","pos":[1114,1249],"source":" If not, the HTTP layer raises a <xref:System.Net.WebException> with the message \"The remote server returned an error: (403) Forbidden.\""},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> surfaces this exception as a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.MessageSecurityException&gt;</ph>.","pos":[1250,1396],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] surfaces this exception as a <xref:System.ServiceModel.Security.MessageSecurityException>."},{"pos":[1405,1445],"content":"Validation of HTTPS Service Certificates","linkify":"Validation of HTTPS Service Certificates","nodes":[{"content":"Validation of HTTPS Service Certificates","pos":[0,40]}]},{"content":"When using HTTPS to communicate between a client and a service, the certificate that the server authenticates with must support chain trust by default.","pos":[1449,1600]},{"content":"That is, it must chain to a trusted root certificate authority.","pos":[1601,1664]},{"content":"No online check is performed to see whether the certificate has been revoked.","pos":[1665,1742]},{"content":"You can override this behavior by registering a <ph id=\"ph1\">&lt;xref:System.Net.Security.RemoteCertificateValidationCallback&gt;</ph> callback, as shown in the following code.","pos":[1743,1895],"source":" You can override this behavior by registering a <xref:System.Net.Security.RemoteCertificateValidationCallback> callback, as shown in the following code."},{"pos":[1902,2216],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CertificateValidationDifferences#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_CertificateValidationDifferences#1<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_CertificateValidationDifferences#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#1)] \n [!code-vb[c_CertificateValidationDifferences#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#1)]"},{"pos":[2224,2290],"content":"where the signature for <ph id=\"ph1\">`ValidateServerCertificate`</ph> is as follows:","source":"where the signature for `ValidateServerCertificate` is as follows:"},{"pos":[2297,2610],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CertificateValidationDifferences#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#2)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_CertificateValidationDifferences#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#2)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_CertificateValidationDifferences#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#2)]\n [!code-vb[c_CertificateValidationDifferences#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#2)]"},{"pos":[2617,2771],"content":"Implementing <ph id=\"ph1\">`ValidateServerCertificate`</ph> can perform any checks that the client application developer deems necessary to validate the service certificate.","source":"Implementing `ValidateServerCertificate` can perform any checks that the client application developer deems necessary to validate the service certificate."},{"pos":[2780,2846],"content":"Validation of Client Certificates in SSL over TCP or SOAP Security","linkify":"Validation of Client Certificates in SSL over TCP or SOAP Security","nodes":[{"content":"Validation of Client Certificates in SSL over TCP or SOAP Security","pos":[0,66]}]},{"content":"When using Secure Sockets Layer (SSL) over TCP or message (SOAP) security, client certificates are validated according to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A&gt;</ph> property value of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication&gt;</ph> class.","pos":[2850,3177],"source":"When using Secure Sockets Layer (SSL) over TCP or message (SOAP) security, client certificates are validated according to the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class."},{"content":"The property is set to one of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode&gt;</ph> values.","pos":[3178,3285],"source":" The property is set to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> values."},{"content":"Revocation checking is performed according to the values of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.RevocationMode%2A&gt;</ph> property value of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication&gt;</ph> class.","pos":[3286,3540],"source":" Revocation checking is performed according to the values of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.RevocationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class."},{"content":"The property is set to one of the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.X509Certificates.X509RevocationMode&gt;</ph> values.","pos":[3541,3654],"source":" The property is set to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> values."},{"pos":[3661,3974],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CertificateValidationDifferences#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#3)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_CertificateValidationDifferences#3<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#3)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_CertificateValidationDifferences#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#3)]\n [!code-vb[c_CertificateValidationDifferences#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#3)]"},{"pos":[3983,4050],"content":"Validation of Service Certificate in SSL over TCP and SOAP Security","linkify":"Validation of Service Certificate in SSL over TCP and SOAP Security","nodes":[{"content":"Validation of Service Certificate in SSL over TCP and SOAP Security","pos":[0,67]}]},{"content":"When using SSL over TCP or (SOAP) message security, service certificates are validated according to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A&gt;</ph> property value of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication&gt;</ph> class.","pos":[4054,4361],"source":"When using SSL over TCP or (SOAP) message security, service certificates are validated according to the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> class."},{"content":"The property is set to one of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode&gt;</ph> values.","pos":[4362,4469],"source":" The property is set to one of the <xref:System.ServiceModel.Security.X509CertificateValidationMode> values."},{"content":"Revocation checking is performed according to the values of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.RevocationMode%2A&gt;</ph> property value of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication&gt;</ph> class.","pos":[4476,4732],"source":"Revocation checking is performed according to the values of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.RevocationMode%2A> property value of the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> class."},{"content":"The property is set to one of the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.X509Certificates.X509RevocationMode&gt;</ph> values.","pos":[4733,4846],"source":" The property is set to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> values."},{"pos":[4853,5166],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CertificateValidationDifferences#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#4)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_CertificateValidationDifferences#4<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#4)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_CertificateValidationDifferences#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_certificatevalidationdifferences/cs/source.cs#4)]\n [!code-vb[c_CertificateValidationDifferences#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_certificatevalidationdifferences/vb/source.vb#4)]"},{"pos":[5175,5183],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\"> [</bpt>Working with Certificates<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)</ept>","pos":[5253,5358],"source":" [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)"}]}