{"content":"---\ntitle: \"Fault Handling in a Flowchart Activity Using TryCatch | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 50922964-bfe0-4ba8-9422-0e7220d514fd\ncaps.latest.revision: 12\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Fault Handling in a Flowchart Activity Using TryCatch\nThis sample shows how the <xref:System.Activities.Statements.TryCatch> activity can be used within a complex control flow activity.  \n  \n In this sample, a promotion code and number of children are passed as variables to a <xref:System.Activities.Statements.Flowchart> activity that calculates a discount based on formulae that correspond to the promotion code. The sample includes imperative code and workflow designer versions of the sample.  \n  \n The following table details the variables for the `CreateFlowchartWithFaults` activity.  \n  \n|Parameters|Description|  \n|----------------|-----------------|  \n|promoCode|The promotion code. Type: String<br /><br /> The possible values with description in parentheses:<br /><br /> -   Single (Single)<br />-   MNK (Married with no kids.)<br />-   MWK (Married with kids.)|  \n|numKids|The number of children. Type: int|  \n  \n The `CreateFlowchartWithFaults` activity uses a <xref:System.Activities.Statements.FlowSwitch%601> activity that switches on the `promoCode` argument and calculates the discount using the following formula.  \n  \n|Value of `promoCode`|Discount (%)|  \n|--------------------------|--------------------|  \n|Single|10|  \n|MNK|15|  \n|MWK|15 + (1 – 1/`numberOfKids`)\\*10 **Note:**  Potentially, this calculation can throw a <xref:System.DivideByZeroException>. So, the discount calculation is wrapped in a <xref:System.Activities.Statements.TryCatch> activity that catches the <xref:System.DivideByZeroException> exception and sets the discount to zero.|  \n  \n#### To use this sample  \n  \n1.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the FlowchartWithFaultHandling.sln solution file.  \n  \n2.  To build the solution, press CTRL+SHIFT+B.  \n  \n3.  To run the solution, press F5.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Built-InActivities\\FlowChartWithFaultHandling`  \n  \n## See Also  \n [Flowchart Workflows](../../../../docs/framework/windows-workflow-foundation/flowchart-workflows.md)   \n [Exceptions](../../../../docs/framework/windows-workflow-foundation/exceptions.md)","nodes":[{"pos":[12,82],"content":"Fault Handling in a Flowchart Activity Using TryCatch | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Fault Handling in a Flowchart Activity Using TryCatch | Microsoft Docs","pos":[0,70]}]},{"pos":[348,401],"content":"Fault Handling in a Flowchart Activity Using TryCatch","linkify":"Fault Handling in a Flowchart Activity Using TryCatch","nodes":[{"content":"Fault Handling in a Flowchart Activity Using TryCatch","pos":[0,53]}]},{"content":"This sample shows how the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> activity can be used within a complex control flow activity.","pos":[402,533],"source":"This sample shows how the <xref:System.Activities.Statements.TryCatch> activity can be used within a complex control flow activity."},{"content":"In this sample, a promotion code and number of children are passed as variables to a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Flowchart&gt;</ph> activity that calculates a discount based on formulae that correspond to the promotion code.","pos":[540,763],"source":"In this sample, a promotion code and number of children are passed as variables to a <xref:System.Activities.Statements.Flowchart> activity that calculates a discount based on formulae that correspond to the promotion code."},{"content":"The sample includes imperative code and workflow designer versions of the sample.","pos":[764,845]},{"pos":[852,939],"content":"The following table details the variables for the <ph id=\"ph1\">`CreateFlowchartWithFaults`</ph> activity.","source":"The following table details the variables for the `CreateFlowchartWithFaults` activity."},{"content":"Parameters","pos":[946,956]},{"content":"Description","pos":[957,968]},{"content":"promoCode","pos":[1012,1021]},{"content":"The promotion code.","pos":[1022,1041]},{"content":"Type: String","pos":[1042,1054]},{"content":"The possible values with description in parentheses:","pos":[1067,1119]},{"content":"-   Single (Single)","pos":[1132,1151]},{"content":"-   MNK (Married with no kids.)","pos":[1157,1188]},{"content":"-   MWK (Married with kids.)","pos":[1194,1222]},{"content":"numKids","pos":[1227,1234]},{"content":"The number of children.","pos":[1235,1258]},{"content":"Type: int","pos":[1259,1268]},{"pos":[1276,1482],"content":"The <ph id=\"ph1\">`CreateFlowchartWithFaults`</ph> activity uses a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.FlowSwitch%601&gt;</ph> activity that switches on the <ph id=\"ph3\">`promoCode`</ph> argument and calculates the discount using the following formula.","source":"The `CreateFlowchartWithFaults` activity uses a <xref:System.Activities.Statements.FlowSwitch%601> activity that switches on the `promoCode` argument and calculates the discount using the following formula."},{"pos":[1489,1509],"content":"Value of <ph id=\"ph1\">`promoCode`</ph>","source":"Value of `promoCode`"},{"content":"Discount (%)","pos":[1510,1522]},{"content":"Single","pos":[1579,1585]},{"content":"10","pos":[1586,1588]},{"content":"MNK","pos":[1593,1596]},{"content":"15","pos":[1597,1599]},{"content":"MWK","pos":[1604,1607]},{"content":"15 + (1 – 1/<ph id=\"ph1\">`numberOfKids`</ph>)<ph id=\"ph2\">\\*</ph>10 <bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  Potentially, this calculation can throw a <ph id=\"ph3\">&lt;xref:System.DivideByZeroException&gt;</ph>.","pos":[1608,1729],"source":"15 + (1 – 1/`numberOfKids`)\\*10 **Note:**  Potentially, this calculation can throw a <xref:System.DivideByZeroException>."},{"content":"So, the discount calculation is wrapped in a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> activity that catches the <ph id=\"ph2\">&lt;xref:System.DivideByZeroException&gt;</ph> exception and sets the discount to zero.","pos":[1730,1922],"source":" So, the discount calculation is wrapped in a <xref:System.Activities.Statements.TryCatch> activity that catches the <xref:System.DivideByZeroException> exception and sets the discount to zero."},{"pos":[1934,1952],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[1962,2077],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the FlowchartWithFaultHandling.sln solution file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the FlowchartWithFaultHandling.sln solution file."},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[2087,2129]},{"content":"To run the solution, press F5.","pos":[2139,2169]},{"pos":[2177,2310],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing.","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2364,2690],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[2691,2741]},{"pos":[2848,2856],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Flowchart Workflows<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/flowchart-workflows.md)</ept><ph id=\"ph1\"> </ph>","pos":[2860,2961],"source":"[Flowchart Workflows](../../../../docs/framework/windows-workflow-foundation/flowchart-workflows.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Exceptions<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/exceptions.md)</ept>","pos":[2964,3047],"source":" [Exceptions](../../../../docs/framework/windows-workflow-foundation/exceptions.md)"}]}