{"content":"---\ntitle: \"How to: Create a Service that Employs a Custom Certificate Validator | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF, authentication\"\nms.assetid: bb0190ff-0738-4e54-8d22-c97d343708bf\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Create a Service that Employs a Custom Certificate Validator\nThis topic shows how to implement a custom certificate validator and how to configure client or service credentials to replace the default certificate validation logic with the custom certificate validator.  \n  \n If the X.509 certificate is used to authenticate a client or service, [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] by default uses the Windows certificate store and Crypto API to validate the certificate and to ensure that it is trusted. Sometimes the built-in certificate validation functionality is not enough and must be changed. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides an easy way to change the validation logic by allowing users to add a custom certificate validator. If a custom certificate validator is specified, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not use the built-in certificate validation logic but relies on the custom validator instead.  \n  \n## Procedures  \n  \n#### To create a custom certificate validator  \n  \n1.  Define a new class derived from <xref:System.IdentityModel.Selectors.X509CertificateValidator>.  \n  \n2.  Implement the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> method. The certificate that must be validated is passed as an argument to the method. If the passed certificate is not valid according to the validation logic, this method throws a <xref:System.IdentityModel.Tokens.SecurityTokenValidationException>. If the certificate is valid, the method returns to the caller.  \n  \n    > [!NOTE]\n    >  To return authentication errors back to the client, throw a <xref:System.ServiceModel.FaultException> in the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method.  \n  \n [!code-csharp[c_CustomCertificateValidator#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#2)]\n [!code-vb[c_CustomCertificateValidator#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#2)]  \n  \n#### To specify a custom certificate validator in service configuration  \n  \n1.  Add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element and a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element.  \n  \n2.  Add a [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-endpointbehaviors.md) and set the `name` attribute to an appropriate value.  \n  \n3.  Add a [\\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) to the `<behavior>` element.  \n  \n4.  Add a `<clientCertificate>` element to the `<serviceCredentials>` element.  \n  \n5.  Add an [\\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) to the `<clientCertificate>` element.  \n  \n6.  Set the `customCertificateValidatorType` attribute to the validator type. The following example sets the attribute to the namespace and name of the type.  \n  \n7.  Set the `certificateValidationMode` attribute to `Custom`.  \n  \n    ```  \n    <configuration>  \n     <system.serviceModel>  \n      <behaviors>  \n       <serviceBehaviors>  \n        <behavior name=\"ServiceBehavior\">  \n         <serviceCredentials>  \n          <clientCertificate>  \n          <authentication certificateValidationMode=\"Custom\" customCertificateValidatorType=\"Samples.MyValidator, service\" />  \n          </clientCertificate>  \n         </serviceCredentials>  \n        </behavior>  \n       </serviceBehaviors>  \n      </behaviors>  \n    </system.serviceModel>  \n    </configuration>  \n    ```  \n  \n#### To specify a custom certificate validator using configuration on the client  \n  \n1.  Add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element and a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element.  \n  \n2.  Add an [\\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) element.  \n  \n3.  Add a `<behavior>` element and set the `name` attribute to an appropriate value.  \n  \n4.  Add a [\\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) element.  \n  \n5.  Add a [\\<serviceCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md).  \n  \n6.  Add an [\\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) as shown on the following example.  \n  \n7.  Set the `customCertificateValidatorType` attribute to the validator type.  \n  \n8.  Set the `certificateValidationMode` attribute to `Custom`. The following example sets the attribute to the namespace and name of the type.  \n  \n    ```  \n    <configuration>  \n     <system.serviceModel>  \n      <behaviors>  \n       <endpointBehaviors>  \n        <behavior name=\"clientBehavior\">  \n         <clientCredentials>  \n          <serviceCertificate>  \n           <authentication certificateValidationMode=\"Custom\"   \n                  customCertificateValidatorType=  \n             \"Samples.CustomX509CertificateValidator, client\"/>  \n          </serviceCertificate>  \n         </clientCredentials>  \n        </behavior>  \n       </endpointBehaviors>  \n      </behaviors>  \n     </system.serviceModel>  \n    </configuration>  \n    ```  \n  \n#### To specify a custom certificate validator using code on the service  \n  \n1.  Specify the custom certificate validator on the <xref:System.ServiceModel.Description.ServiceCredentials.ClientCertificate%2A> property. You can access the service credentials using the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.  \n  \n2.  Set the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A> property to <xref:System.ServiceModel.Security.X509CertificateValidationMode>.  \n  \n [!code-csharp[c_CustomCertificateValidator#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#1)]\n [!code-vb[c_CustomCertificateValidator#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#1)]  \n  \n#### To specify a custom certificate validator using code on the client  \n  \n1.  Specify the custom certificate validator using the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CustomCertificateValidator%2A> property. You can access the client credentials using the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property. (The client class generated by [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) always derives from the <xref:System.ServiceModel.ClientBase%601> class.)  \n  \n2.  Set the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> property to <xref:System.ServiceModel.Security.X509CertificateValidationMode>.  \n  \n## Example  \n  \n### Description  \n The following sample shows an implementation of a custom certificate validator and its usage on the service.  \n  \n### Code  \n [!code-csharp[c_CustomCertificateValidator#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#3)]\n [!code-vb[c_CustomCertificateValidator#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#3)]  \n  \n## See Also  \n <xref:System.IdentityModel.Selectors.X509CertificateValidator>","nodes":[{"pos":[4,437],"embed":true,"restype":"x-metadata","content":"title: \"How to: Create a Service that Employs a Custom Certificate Validator | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF, authentication\"\nms.assetid: bb0190ff-0738-4e54-8d22-c97d343708bf\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"How to: Create a Service that Employs a Custom Certificate Validator | Microsoft Docs","nodes":[{"pos":[0,85],"content":"How to: Create a Service that Employs a Custom Certificate Validator | Microsoft Docs","nodes":[{"content":"How to: Create a Service that Employs a Custom Certificate Validator | Microsoft Docs","pos":[0,85]}]}],"path":["title"]}],"yml":true},{"pos":[444,512],"content":"How to: Create a Service that Employs a Custom Certificate Validator","linkify":"How to: Create a Service that Employs a Custom Certificate Validator","nodes":[{"content":"How to: Create a Service that Employs a Custom Certificate Validator","pos":[0,68]}]},{"content":"This topic shows how to implement a custom certificate validator and how to configure client or service credentials to replace the default certificate validation logic with the custom certificate validator.","pos":[513,719]},{"content":"If the X.509 certificate is used to authenticate a client or service, <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> by default uses the Windows certificate store and Crypto API to validate the certificate and to ensure that it is trusted.","pos":[726,974],"source":"If the X.509 certificate is used to authenticate a client or service, [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] by default uses the Windows certificate store and Crypto API to validate the certificate and to ensure that it is trusted."},{"content":"Sometimes the built-in certificate validation functionality is not enough and must be changed.","pos":[975,1069]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> provides an easy way to change the validation logic by allowing users to add a custom certificate validator.","pos":[1070,1234],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides an easy way to change the validation logic by allowing users to add a custom certificate validator."},{"content":"If a custom certificate validator is specified, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> does not use the built-in certificate validation logic but relies on the custom validator instead.","pos":[1235,1437],"source":" If a custom certificate validator is specified, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not use the built-in certificate validation logic but relies on the custom validator instead."},{"pos":[1446,1456],"content":"Procedures","linkify":"Procedures","nodes":[{"content":"Procedures","pos":[0,10]}]},{"pos":[1467,1507],"content":"To create a custom certificate validator","linkify":"To create a custom certificate validator","nodes":[{"content":"To create a custom certificate validator","pos":[0,40]}]},{"content":"Define a new class derived from <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.X509CertificateValidator&gt;</ph>.","pos":[1517,1612],"source":"Define a new class derived from <xref:System.IdentityModel.Selectors.X509CertificateValidator>."},{"content":"Implement the abstract <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A&gt;</ph> method.","pos":[1622,1727],"source":"Implement the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> method."},{"content":"The certificate that must be validated is passed as an argument to the method.","pos":[1728,1806]},{"content":"If the passed certificate is not valid according to the validation logic, this method throws a <ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.SecurityTokenValidationException&gt;</ph>.","pos":[1807,1970],"source":" If the passed certificate is not valid according to the validation logic, this method throws a <xref:System.IdentityModel.Tokens.SecurityTokenValidationException>."},{"content":"If the certificate is valid, the method returns to the caller.","pos":[1971,2033]},{"pos":[2045,2252],"content":"[!NOTE]\nTo return authentication errors back to the client, throw a <xref:System.ServiceModel.FaultException> in the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method.","leadings":["","    >  "],"nodes":[{"content":"To return authentication errors back to the client, throw a <ph id=\"ph1\">&lt;xref:System.ServiceModel.FaultException&gt;</ph> in the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A&gt;</ph> method.","pos":[8,200],"source":"To return authentication errors back to the client, throw a <xref:System.ServiceModel.FaultException> in the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method."}]},{"pos":[2259,2548],"content":"[!code-csharp[c_CustomCertificateValidator#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#2)]\n[!code-vb[c_CustomCertificateValidator#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#2)]","leadings":[""," "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CustomCertificateValidator#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#2)</ept><ept id=\"p1\">]</ept>","pos":[0,143],"source":"[!code-csharp[c_CustomCertificateValidator#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#2)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>c_CustomCertificateValidator#2<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#2)</ept><ept id=\"p1\">]</ept>","pos":[144,288],"source":"[!code-vb[c_CustomCertificateValidator#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#2)]"}]},{"pos":[2559,2625],"content":"To specify a custom certificate validator in service configuration","linkify":"To specify a custom certificate validator in service configuration","nodes":[{"content":"To specify a custom certificate validator in service configuration","pos":[0,66]}]},{"pos":[2635,2965],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behaviors&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md)</ept> element and a <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>serviceBehaviors&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)</ept> to the <bpt id=\"p3\">[</bpt><ph id=\"ph3\">\\&lt;</ph>system.serviceModel&gt;<ept id=\"p3\">](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md)</ept> element.","source":"Add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element and a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element."},{"pos":[2975,3140],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behavior&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-endpointbehaviors.md)</ept> and set the <ph id=\"ph2\">`name`</ph> attribute to an appropriate value.","source":"Add a [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-endpointbehaviors.md) and set the `name` attribute to an appropriate value."},{"pos":[3150,3289],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceCredentials&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)</ept> to the <ph id=\"ph2\">`&lt;behavior&gt;`</ph> element.","source":"Add a [\\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) to the `<behavior>` element."},{"pos":[3299,3373],"content":"Add a <ph id=\"ph1\">`&lt;clientCertificate&gt;`</ph> element to the <ph id=\"ph2\">`&lt;serviceCredentials&gt;`</ph> element.","source":"Add a `<clientCertificate>` element to the `<serviceCredentials>` element."},{"pos":[3383,3553],"content":"Add an <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>authentication&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md)</ept> to the <ph id=\"ph2\">`&lt;clientCertificate&gt;`</ph> element.","source":"Add an [\\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) to the `<clientCertificate>` element."},{"content":"Set the <ph id=\"ph1\">`customCertificateValidatorType`</ph> attribute to the validator type.","pos":[3563,3636],"source":"Set the `customCertificateValidatorType` attribute to the validator type."},{"content":"The following example sets the attribute to the namespace and name of the type.","pos":[3637,3716]},{"pos":[3726,3784],"content":"Set the <ph id=\"ph1\">`certificateValidationMode`</ph> attribute to <ph id=\"ph2\">`Custom`</ph>.","source":"Set the `certificateValidationMode` attribute to `Custom`."},{"pos":[4343,4418],"content":"To specify a custom certificate validator using configuration on the client","linkify":"To specify a custom certificate validator using configuration on the client","nodes":[{"content":"To specify a custom certificate validator using configuration on the client","pos":[0,75]}]},{"pos":[4428,4758],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behaviors&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md)</ept> element and a <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>serviceBehaviors&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)</ept> to the <bpt id=\"p3\">[</bpt><ph id=\"ph3\">\\&lt;</ph>system.serviceModel&gt;<ept id=\"p3\">](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md)</ept> element.","source":"Add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element and a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element."},{"pos":[4768,4886],"content":"Add an <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>endpointBehaviors&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)</ept> element.","source":"Add an [\\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) element."},{"pos":[4896,4976],"content":"Add a <ph id=\"ph1\">`&lt;behavior&gt;`</ph> element and set the <ph id=\"ph2\">`name`</ph> attribute to an appropriate value.","source":"Add a `<behavior>` element and set the `name` attribute to an appropriate value."},{"pos":[4986,5103],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>clientCredentials&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md)</ept> element.","source":"Add a [\\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) element."},{"pos":[5113,5253],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceCertificate&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md)</ept>.","source":"Add a [\\<serviceCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecertificate-of-clientcredentials-element.md)."},{"pos":[5263,5431],"content":"Add an <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>authentication&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)</ept> as shown on the following example.","source":"Add an [\\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) as shown on the following example."},{"pos":[5441,5514],"content":"Set the <ph id=\"ph1\">`customCertificateValidatorType`</ph> attribute to the validator type.","source":"Set the `customCertificateValidatorType` attribute to the validator type."},{"content":"Set the <ph id=\"ph1\">`certificateValidationMode`</ph> attribute to <ph id=\"ph2\">`Custom`</ph>.","pos":[5524,5582],"source":"Set the `certificateValidationMode` attribute to `Custom`."},{"content":"The following example sets the attribute to the namespace and name of the type.","pos":[5583,5662]},{"pos":[6278,6345],"content":"To specify a custom certificate validator using code on the service","linkify":"To specify a custom certificate validator using code on the service","nodes":[{"content":"To specify a custom certificate validator using code on the service","pos":[0,67]}]},{"content":"Specify the custom certificate validator on the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceCredentials.ClientCertificate%2A&gt;</ph> property.","pos":[6355,6491],"source":"Specify the custom certificate validator on the <xref:System.ServiceModel.Description.ServiceCredentials.ClientCertificate%2A> property."},{"content":"You can access the service credentials using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHostBase.Credentials%2A&gt;</ph> property.","pos":[6492,6608],"source":" You can access the service credentials using the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode&gt;</ph>.","pos":[6618,6805],"source":"Set the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A> property to <xref:System.ServiceModel.Security.X509CertificateValidationMode>."},{"pos":[6812,7101],"content":"[!code-csharp[c_CustomCertificateValidator#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#1)]\n[!code-vb[c_CustomCertificateValidator#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#1)]","leadings":[""," "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CustomCertificateValidator#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#1)</ept><ept id=\"p1\">]</ept>","pos":[0,143],"source":"[!code-csharp[c_CustomCertificateValidator#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#1)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>c_CustomCertificateValidator#1<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#1)</ept><ept id=\"p1\">]</ept>","pos":[144,288],"source":"[!code-vb[c_CustomCertificateValidator#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#1)]"}]},{"pos":[7112,7178],"content":"To specify a custom certificate validator using code on the client","linkify":"To specify a custom certificate validator using code on the client","nodes":[{"content":"To specify a custom certificate validator using code on the client","pos":[0,66]}]},{"content":"Specify the custom certificate validator using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CustomCertificateValidator%2A&gt;</ph> property.","pos":[7188,7351],"source":"Specify the custom certificate validator using the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CustomCertificateValidator%2A> property."},{"content":"You can access the client credentials using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHostBase.Credentials%2A&gt;</ph> property.","pos":[7352,7467],"source":" You can access the client credentials using the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property."},{"content":"(The client class generated by <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> always derives from the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ClientBase%601&gt;</ph> class.)","pos":[7468,7705],"source":" (The client class generated by [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) always derives from the <xref:System.ServiceModel.ClientBase%601> class.)"},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509CertificateValidationMode&gt;</ph>.","pos":[7715,7903],"source":"Set the <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A> property to <xref:System.ServiceModel.Security.X509CertificateValidationMode>."},{"pos":[7912,7919],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[7929,7940],"content":"Description","linkify":"Description","nodes":[{"content":"Description","pos":[0,11]}]},{"content":"The following sample shows an implementation of a custom certificate validator and its usage on the service.","pos":[7944,8052]},{"pos":[8062,8066],"content":"Code","linkify":"Code","nodes":[{"content":"Code","pos":[0,4]}]},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_CustomCertificateValidator#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#3)</ept><ept id=\"p1\">]</ept>","pos":[8070,8213],"source":"[!code-csharp[c_CustomCertificateValidator#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customcertificatevalidator/cs/source.cs#3)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>c_CustomCertificateValidator#3<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#3)</ept><ept id=\"p1\">]</ept>","pos":[8215,8359],"source":"[!code-vb[c_CustomCertificateValidator#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customcertificatevalidator/vb/source.vb#3)]"},{"pos":[8368,8376],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}