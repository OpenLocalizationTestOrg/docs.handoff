{"content":"---\ntitle: \"Animation Tips and Tricks\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"troubleshooting [WPF], animation\"\n  - \"animations [WPF], FillBehavior property\"\n  - \"troubleshooting animation [WPF]\"\n  - \"animating objects [WPF], troubleshooting\"\n  - \"animation tips and tricks [WPF]\"\n  - \"tips and tricks [WPF], animation\"\n  - \"performance troubleshooting [WPF], animation\"\n  - \"animations [WPF], use of system resources\"\nms.assetid: e467796b-d5d4-45a6-a108-8c5d7ff69a0f\n---\n# Animation Tips and Tricks\nWhen working with animations in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], there are a number of tips and tricks that can make your animations perform better and save you frustration.  \n  \n<a name=\"generalissuessection\"></a>   \n## General Issues  \n  \n### Animating the Position of a Scroll Bar or Slider Freezes It  \n If you animate the position of a scroll bar or slider using an animation that has a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> (the default value), the user will no longer be able to move the scroll bar or slider. That's because, even though the animation ended, it's still overriding the target property's base value. To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>. For more information and an example, see [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md).  \n  \n### Animating the Output of an Animation Has No Effect  \n You can't animate an object that is the output of another animation. For example, if you use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> to animate the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle> from a <xref:System.Windows.Media.RadialGradientBrush> to a <xref:System.Windows.Media.SolidColorBrush>, you can't animate any properties of the <xref:System.Windows.Media.RadialGradientBrush> or <xref:System.Windows.Media.SolidColorBrush>.  \n  \n### Can't Change the Value of a Property after Animating it  \n In some cases, it might appear that you can't change the value of a property after it's been animated, even after the animation has ended. That's because, even though the animation ended, it's still overriding the property's base value. To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>. For more information and an example, see [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md).  \n  \n### Changing a Timeline Has No Effect  \n Although most <xref:System.Windows.Media.Animation.Timeline> properties are animatable and can be data bound, changing the property values of an active <xref:System.Windows.Media.Animation.Timeline> seems to have no effect. That's because, when a <xref:System.Windows.Media.Animation.Timeline> is begun, the timing system makes a copy of the <xref:System.Windows.Media.Animation.Timeline> and uses it to create a <xref:System.Windows.Media.Animation.Clock> object. Modifying the original has no effect on the system's copy.  \n  \n For a <xref:System.Windows.Media.Animation.Timeline> to reflect changes, its clock must be regenerated and used to replace the previously created clock. Clocks are not regenerated for you automatically. The following are several ways to apply timeline changes:  \n  \n-   If the timeline is or belongs to a <xref:System.Windows.Media.Animation.Storyboard>, you can make it reflect changes by reapplying its storyboard using a <xref:System.Windows.Media.Animation.BeginStoryboard> or the <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> method. This has the side effect of also restarting the animation. In code, you can use the <xref:System.Windows.Media.Animation.Storyboard.Seek%2A> method to advance the storyboard back to its previous position.  \n  \n-   If you applied an animation directly to a property using the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method, call the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method again and pass it the animation that has been modified.  \n  \n-   If you are working directly at the clock level, create and apply a new set of clocks and use them to replace the previous set of generated clocks.  \n  \n For more information about timelines and clocks, see [Animation and Timing System Overview](animation-and-timing-system-overview.md).  \n  \n### FillBehavior.Stop Doesn't Work as Expected  \n There are times when setting the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property to <xref:System.Windows.Media.Animation.FillBehavior.Stop> seems to have no effect, such as when one animation \"hands off\" to another because it has a <xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A> setting of <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace>.  \n  \n The following example creates a <xref:System.Windows.Controls.Canvas>, a <xref:System.Windows.Shapes.Rectangle> and a <xref:System.Windows.Media.TranslateTransform>. The <xref:System.Windows.Media.TranslateTransform> will be animated to move the <xref:System.Windows.Shapes.Rectangle> around the <xref:System.Windows.Controls.Canvas>.  \n  \n [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipAnimatedObject](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipanimatedobject)]  \n  \n The examples in this section use the preceding objects to demonstrate several cases where the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property doesn't behave as you might expect it to.  \n  \n#### FillBehavior=\"Stop\" and HandoffBehavior with Multiple Animations  \n Sometimes it seems as though an animation ignores its <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property when it is replaced by a second animation. Take the following example, which creates two <xref:System.Windows.Media.Animation.Storyboard> objects and uses them to animate the same <xref:System.Windows.Media.TranslateTransform> shown in the preceding example.  \n  \n The first <xref:System.Windows.Media.Animation.Storyboard>, `B1`, animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350, which moves the rectangle 350 pixels to the right. When the animation reaches the end of its duration and stops playing, the <xref:System.Windows.Media.TranslateTransform.X%2A> property reverts to its original value, 0. As a result, the rectangle moves to the right 350 pixels and then jumps back to its original position.  \n  \n [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardB1Button](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardb1button)]  \n  \n The second <xref:System.Windows.Media.Animation.Storyboard>, `B2`, also animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the same <xref:System.Windows.Media.TranslateTransform>. Because only the <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> property of the animation in this <xref:System.Windows.Media.Animation.Storyboard> is set, the animation uses the current value of the property it animates as its starting value.  \n  \n [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardB2Button](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardb2button)]  \n  \n If you click the second button while the first <xref:System.Windows.Media.Animation.Storyboard> is playing, you might expect the following behavior:  \n  \n1.  The first storyboard ends and sends the rectangle back to its original position, because the animation has a <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>.  \n  \n2.  The second storyboard takes effect and animates from the current position, which is now 0, to 500.  \n  \n **But that's not what happens.** Instead, the rectangle does not jump back; it continues moving to the right. That's because the second animation uses the current value of the first animation as its starting value and animates from that value to 500. When the second animation replaces the first because the <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace><xref:System.Windows.Media.Animation.HandoffBehavior> is used, the <xref:System.Windows.Media.Animation.FillBehavior> of the first animation does not matter.  \n  \n#### FillBehavior and the Completed Event  \n The next examples demonstrate another scenario in which the <xref:System.Windows.Media.Animation.FillBehavior.Stop><xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> seems to have no effect. Again, the example uses a Storyboard to animate the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350. However, this time the example registers for the <xref:System.Windows.Media.Animation.Timeline.Completed> event.  \n  \n [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardCButton](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipstoryboardcbutton)]  \n  \n The <xref:System.Windows.Media.Animation.Timeline.Completed> event handler starts another <xref:System.Windows.Media.Animation.Storyboard> that animates the same property from its current value to 500.  \n  \n [!code-csharp[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardC1CompletedHandler](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml.cs#fillbehaviortipstoryboardc1completedhandler)]\n [!code-vb[AnimationTipsAndTricksSample_snip#FillBehaviorTipStoryboardC1CompletedHandler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/VisualBasic/FillBehaviorTip.xaml.vb#fillbehaviortipstoryboardc1completedhandler)]  \n  \n The following is the markup that defines the second <xref:System.Windows.Media.Animation.Storyboard> as a resource.  \n  \n [!code-xaml[AnimationTipsAndTricksSample_snip#FillBehaviorTipResources](~/samples/snippets/csharp/VS_Snippets_Wpf/AnimationTipsAndTricksSample_snip/CSharp/FillBehaviorTip.xaml#fillbehaviortipresources)]  \n  \n When you run the <xref:System.Windows.Media.Animation.Storyboard>, you might expect the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> to animate from 0 to 350, then revert to 0 after it completes (because it has a <xref:System.Windows.Media.Animation.FillBehavior> setting of <xref:System.Windows.Media.Animation.FillBehavior.Stop>), and then animate from 0 to 500. Instead, the <xref:System.Windows.Media.TranslateTransform> animates from 0 to 350 and then to 500.  \n  \n That's because of the order in which [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] raises events and because property values are cached and are not recalculated unless the property is invalidated. The <xref:System.Windows.Media.Animation.Timeline.Completed> event is processed first because it was triggered by the root timeline (the first <xref:System.Windows.Media.Animation.Storyboard>). At this time, the <xref:System.Windows.Media.TranslateTransform.X%2A> property still returns its animated value because it hasn't been invalidated yet. The second <xref:System.Windows.Media.Animation.Storyboard> uses the cached value as its starting value and begins animating.  \n  \n<a name=\"performancesection\"></a>   \n## Performance  \n  \n### Animations Continue to Run After Navigating Away from a Page  \n When you navigate away from a <xref:System.Windows.Controls.Page> that contains running animations, those animations will continue to play until the <xref:System.Windows.Controls.Page> is garbage collected. Depending on the navigation system you're using, a page that you navigate away from might stay in memory for an indefinite amount of time, all the while consuming resources with its animations. This is most noticeable when a page contains constantly running (\"ambient\") animations.  \n  \n For this reason, it's a good idea to use the <xref:System.Windows.FrameworkElement.Unloaded> event to remove animations when you navigate away from a page.  \n  \n There are different ways to remove an animation. The following techniques can be used to remove animations that belong to a <xref:System.Windows.Media.Animation.Storyboard>.  \n  \n-   To remove a <xref:System.Windows.Media.Animation.Storyboard> you started with an event trigger, see [How to: Remove a Storyboard](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms749412(v=vs.90)).  \n  \n-   To use code to remove a <xref:System.Windows.Media.Animation.Storyboard>, see the <xref:System.Windows.Media.Animation.Storyboard.Remove%2A> method.  \n  \n The next technique may be used regardless of how the animation was started.  \n  \n-   To remove animations from a specific property, use the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method. Specify the property being animated as the first parameter, and `null` as the second. This will remove all animation clocks from the property.  \n  \n For more information about the different ways to animate properties, see [Property Animation Techniques Overview](property-animation-techniques-overview.md).  \n  \n### Using the Compose HandoffBehavior Consumes System Resources  \n When you apply a <xref:System.Windows.Media.Animation.Storyboard>, <xref:System.Windows.Media.Animation.AnimationTimeline>, or <xref:System.Windows.Media.Animation.AnimationClock> to a property using the <xref:System.Windows.Media.Animation.HandoffBehavior.Compose><xref:System.Windows.Media.Animation.HandoffBehavior>, any <xref:System.Windows.Media.Animation.Clock> objects previously associated with that property continue to consume system resources; the timing system will not remove these clocks automatically.  \n  \n To avoid performance issues when you apply a large number of clocks using <xref:System.Windows.Media.Animation.HandoffBehavior.Compose>, you should remove composing clocks from the animated property after they complete. There are several ways to remove a clock.  \n  \n-   To remove all clocks from a property, use the <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29> or <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method of the animated object. Specify the property being animated as the first parameter, and `null` as the second. This will remove all animation clocks from the property.  \n  \n-   To remove a specific <xref:System.Windows.Media.Animation.AnimationClock> from a list of clocks, use the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of the <xref:System.Windows.Media.Animation.AnimationClock> to retrieve a <xref:System.Windows.Media.Animation.ClockController>, then call the <xref:System.Windows.Media.Animation.ClockController.Remove%2A> method of the <xref:System.Windows.Media.Animation.ClockController>. This is typically done in the <xref:System.Windows.Media.Animation.Clock.Completed> event handler for a clock. Note that only root clocks can be controlled by a <xref:System.Windows.Media.Animation.ClockController>; the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of a child clock will return `null`. Note also that the <xref:System.Windows.Media.Animation.Clock.Completed> event will not be called if the effective duration of the clock is forever.  In that case, the user will need to determine when to call <xref:System.Windows.Media.Animation.ClockController.Remove%2A>.  \n  \n This is primarily an issue for animations on objects that have a long lifetime.  When an object is garbage collected, its clocks will also be disconnected and garbage collected.  \n  \n For more information about clock objects, see [Animation and Timing System Overview](animation-and-timing-system-overview.md).  \n  \n## See also\n\n- [Animation Overview](animation-overview.md)\n","nodes":[{"pos":[4,511],"embed":true,"restype":"x-metadata","content":"title: \"Animation Tips and Tricks\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"troubleshooting [WPF], animation\"\n  - \"animations [WPF], FillBehavior property\"\n  - \"troubleshooting animation [WPF]\"\n  - \"animating objects [WPF], troubleshooting\"\n  - \"animation tips and tricks [WPF]\"\n  - \"tips and tricks [WPF], animation\"\n  - \"performance troubleshooting [WPF], animation\"\n  - \"animations [WPF], use of system resources\"\nms.assetid: e467796b-d5d4-45a6-a108-8c5d7ff69a0f","nodes":[{"content":"Animation Tips and Tricks","nodes":[{"pos":[0,25],"content":"Animation Tips and Tricks","nodes":[{"content":"Animation Tips and Tricks","pos":[0,25]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[518,543],"content":"Animation Tips and Tricks","linkify":"Animation Tips and Tricks","nodes":[{"content":"Animation Tips and Tricks","pos":[0,25]}]},{"pos":[544,755],"content":"When working with animations in <ph id=\"ph1\">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]</ph>, there are a number of tips and tricks that can make your animations perform better and save you frustration.","source":"When working with animations in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], there are a number of tips and tricks that can make your animations perform better and save you frustration."},{"pos":[803,817],"content":"General Issues","linkify":"General Issues","nodes":[{"content":"General Issues","pos":[0,14]}]},{"pos":[827,886],"content":"Animating the Position of a Scroll Bar or Slider Freezes It","linkify":"Animating the Position of a Scroll Bar or Slider Freezes It","nodes":[{"content":"Animating the Position of a Scroll Bar or Slider Freezes It","pos":[0,59]}]},{"content":"If you animate the position of a scroll bar or slider using an animation that has a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.FillBehavior&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.FillBehavior.HoldEnd&gt;</ph> (the default value), the user will no longer be able to move the scroll bar or slider.","pos":[890,1173],"source":"If you animate the position of a scroll bar or slider using an animation that has a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> (the default value), the user will no longer be able to move the scroll bar or slider."},{"content":"That's because, even though the animation ended, it's still overriding the target property's base value.","pos":[1174,1278]},{"content":"To stop the animation from overriding the property's current value, remove it, or give it a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.FillBehavior&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.FillBehavior.Stop&gt;</ph>.","pos":[1279,1481],"source":" To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>."},{"content":"For more information and an example, see <bpt id=\"p1\">[</bpt>Set a Property After Animating It with a Storyboard<ept id=\"p1\">](how-to-set-a-property-after-animating-it-with-a-storyboard.md)</ept>.","pos":[1482,1640],"source":" For more information and an example, see [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md)."},{"pos":[1650,1700],"content":"Animating the Output of an Animation Has No Effect","linkify":"Animating the Output of an Animation Has No Effect","nodes":[{"content":"Animating the Output of an Animation Has No Effect","pos":[0,50]}]},{"content":"You can't animate an object that is the output of another animation.","pos":[1704,1772]},{"content":"For example, if you use an <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames&gt;</ph> to animate the <ph id=\"ph2\">&lt;xref:System.Windows.Shapes.Shape.Fill%2A&gt;</ph> of a <ph id=\"ph3\">&lt;xref:System.Windows.Shapes.Rectangle&gt;</ph> from a <ph id=\"ph4\">&lt;xref:System.Windows.Media.RadialGradientBrush&gt;</ph> to a <ph id=\"ph5\">&lt;xref:System.Windows.Media.SolidColorBrush&gt;</ph>, you can't animate any properties of the <ph id=\"ph6\">&lt;xref:System.Windows.Media.RadialGradientBrush&gt;</ph> or <ph id=\"ph7\">&lt;xref:System.Windows.Media.SolidColorBrush&gt;</ph>.","pos":[1773,2210],"source":" For example, if you use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> to animate the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle> from a <xref:System.Windows.Media.RadialGradientBrush> to a <xref:System.Windows.Media.SolidColorBrush>, you can't animate any properties of the <xref:System.Windows.Media.RadialGradientBrush> or <xref:System.Windows.Media.SolidColorBrush>."},{"pos":[2220,2275],"content":"Can't Change the Value of a Property after Animating it","linkify":"Can't Change the Value of a Property after Animating it","nodes":[{"content":"Can't Change the Value of a Property after Animating it","pos":[0,55]}]},{"content":"In some cases, it might appear that you can't change the value of a property after it's been animated, even after the animation has ended.","pos":[2279,2417]},{"content":"That's because, even though the animation ended, it's still overriding the property's base value.","pos":[2418,2515]},{"content":"To stop the animation from overriding the property's current value, remove it, or give it a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.FillBehavior&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.FillBehavior.Stop&gt;</ph>.","pos":[2516,2718],"source":" To stop the animation from overriding the property's current value, remove it, or give it a <xref:System.Windows.Media.Animation.FillBehavior> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>."},{"content":"For more information and an example, see <bpt id=\"p1\">[</bpt>Set a Property After Animating It with a Storyboard<ept id=\"p1\">](how-to-set-a-property-after-animating-it-with-a-storyboard.md)</ept>.","pos":[2719,2877],"source":" For more information and an example, see [Set a Property After Animating It with a Storyboard](how-to-set-a-property-after-animating-it-with-a-storyboard.md)."},{"pos":[2887,2920],"content":"Changing a Timeline Has No Effect","linkify":"Changing a Timeline Has No Effect","nodes":[{"content":"Changing a Timeline Has No Effect","pos":[0,33]}]},{"content":"Although most <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph> properties are animatable and can be data bound, changing the property values of an active <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph> seems to have no effect.","pos":[2924,3147],"source":"Although most <xref:System.Windows.Media.Animation.Timeline> properties are animatable and can be data bound, changing the property values of an active <xref:System.Windows.Media.Animation.Timeline> seems to have no effect."},{"content":"That's because, when a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph> is begun, the timing system makes a copy of the <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph> and uses it to create a <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.Clock&gt;</ph> object.","pos":[3148,3388],"source":" That's because, when a <xref:System.Windows.Media.Animation.Timeline> is begun, the timing system makes a copy of the <xref:System.Windows.Media.Animation.Timeline> and uses it to create a <xref:System.Windows.Media.Animation.Clock> object."},{"content":"Modifying the original has no effect on the system's copy.","pos":[3389,3447]},{"content":"For a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline&gt;</ph> to reflect changes, its clock must be regenerated and used to replace the previously created clock.","pos":[3454,3606],"source":"For a <xref:System.Windows.Media.Animation.Timeline> to reflect changes, its clock must be regenerated and used to replace the previously created clock."},{"content":"Clocks are not regenerated for you automatically.","pos":[3607,3656]},{"content":"The following are several ways to apply timeline changes:","pos":[3657,3714]},{"content":"If the timeline is or belongs to a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>, you can make it reflect changes by reapplying its storyboard using a <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.BeginStoryboard&gt;</ph> or the <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.Storyboard.Begin%2A&gt;</ph> method.","pos":[3724,4004],"source":"If the timeline is or belongs to a <xref:System.Windows.Media.Animation.Storyboard>, you can make it reflect changes by reapplying its storyboard using a <xref:System.Windows.Media.Animation.BeginStoryboard> or the <xref:System.Windows.Media.Animation.Storyboard.Begin%2A> method."},{"content":"This has the side effect of also restarting the animation.","pos":[4005,4063]},{"content":"In code, you can use the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard.Seek%2A&gt;</ph> method to advance the storyboard back to its previous position.","pos":[4064,4209],"source":" In code, you can use the <xref:System.Windows.Media.Animation.Storyboard.Seek%2A> method to advance the storyboard back to its previous position."},{"pos":[4219,4493],"content":"If you applied an animation directly to a property using the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A&gt;</ph> method, call the <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A&gt;</ph> method again and pass it the animation that has been modified.","source":"If you applied an animation directly to a property using the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method, call the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%2A> method again and pass it the animation that has been modified."},{"content":"If you are working directly at the clock level, create and apply a new set of clocks and use them to replace the previous set of generated clocks.","pos":[4503,4649]},{"pos":[4656,4789],"content":"For more information about timelines and clocks, see <bpt id=\"p1\">[</bpt>Animation and Timing System Overview<ept id=\"p1\">](animation-and-timing-system-overview.md)</ept>.","source":"For more information about timelines and clocks, see [Animation and Timing System Overview](animation-and-timing-system-overview.md)."},{"pos":[4799,4841],"content":"FillBehavior.Stop Doesn't Work as Expected","linkify":"FillBehavior.Stop Doesn't Work as Expected","nodes":[{"content":"FillBehavior.Stop Doesn't Work as Expected","pos":[0,42]}]},{"pos":[4845,5258],"content":"There are times when setting the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.FillBehavior.Stop&gt;</ph> seems to have no effect, such as when one animation \"hands off\" to another because it has a <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A&gt;</ph> setting of <ph id=\"ph4\">&lt;xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace&gt;</ph>.","source":"There are times when setting the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property to <xref:System.Windows.Media.Animation.FillBehavior.Stop> seems to have no effect, such as when one animation \"hands off\" to another because it has a <xref:System.Windows.Media.Animation.BeginStoryboard.HandoffBehavior%2A> setting of <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace>."},{"content":"The following example creates a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Canvas&gt;</ph>, a <ph id=\"ph2\">&lt;xref:System.Windows.Shapes.Rectangle&gt;</ph> and a <ph id=\"ph3\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph>.","pos":[5265,5430],"source":"The following example creates a <xref:System.Windows.Controls.Canvas>, a <xref:System.Windows.Shapes.Rectangle> and a <xref:System.Windows.Media.TranslateTransform>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph> will be animated to move the <ph id=\"ph2\">&lt;xref:System.Windows.Shapes.Rectangle&gt;</ph> around the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Canvas&gt;</ph>.","pos":[5431,5599],"source":" The <xref:System.Windows.Media.TranslateTransform> will be animated to move the <xref:System.Windows.Shapes.Rectangle> around the <xref:System.Windows.Controls.Canvas>."},{"pos":[5825,6032],"content":"The examples in this section use the preceding objects to demonstrate several cases where the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A&gt;</ph> property doesn't behave as you might expect it to.","source":"The examples in this section use the preceding objects to demonstrate several cases where the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property doesn't behave as you might expect it to."},{"pos":[6043,6107],"content":"FillBehavior=\"Stop\" and HandoffBehavior with Multiple Animations","linkify":"FillBehavior=\"Stop\" and HandoffBehavior with Multiple Animations","nodes":[{"content":"FillBehavior=\"Stop\" and HandoffBehavior with Multiple Animations","pos":[0,64]}]},{"content":"Sometimes it seems as though an animation ignores its <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A&gt;</ph> property when it is replaced by a second animation.","pos":[6111,6279],"source":"Sometimes it seems as though an animation ignores its <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property when it is replaced by a second animation."},{"content":"Take the following example, which creates two <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> objects and uses them to animate the same <ph id=\"ph2\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph> shown in the preceding example.","pos":[6280,6495],"source":" Take the following example, which creates two <xref:System.Windows.Media.Animation.Storyboard> objects and uses them to animate the same <xref:System.Windows.Media.TranslateTransform> shown in the preceding example."},{"content":"The first <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>, <ph id=\"ph2\">`B1`</ph>, animates the <ph id=\"ph3\">&lt;xref:System.Windows.Media.TranslateTransform.X%2A&gt;</ph> property of the <ph id=\"ph4\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph> from 0 to 350, which moves the rectangle 350 pixels to the right.","pos":[6502,6761],"source":"The first <xref:System.Windows.Media.Animation.Storyboard>, `B1`, animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350, which moves the rectangle 350 pixels to the right."},{"content":"When the animation reaches the end of its duration and stops playing, the <ph id=\"ph1\">&lt;xref:System.Windows.Media.TranslateTransform.X%2A&gt;</ph> property reverts to its original value, 0.","pos":[6762,6930],"source":" When the animation reaches the end of its duration and stops playing, the <xref:System.Windows.Media.TranslateTransform.X%2A> property reverts to its original value, 0."},{"content":"As a result, the rectangle moves to the right 350 pixels and then jumps back to its original position.","pos":[6931,7033]},{"content":"The second <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>, <ph id=\"ph2\">`B2`</ph>, also animates the <ph id=\"ph3\">&lt;xref:System.Windows.Media.TranslateTransform.X%2A&gt;</ph> property of the same <ph id=\"ph4\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph>.","pos":[7267,7472],"source":"The second <xref:System.Windows.Media.Animation.Storyboard>, `B2`, also animates the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the same <xref:System.Windows.Media.TranslateTransform>."},{"content":"Because only the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.DoubleAnimation.To%2A&gt;</ph> property of the animation in this <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> is set, the animation uses the current value of the property it animates as its starting value.","pos":[7473,7728],"source":" Because only the <xref:System.Windows.Media.Animation.DoubleAnimation.To%2A> property of the animation in this <xref:System.Windows.Media.Animation.Storyboard> is set, the animation uses the current value of the property it animates as its starting value."},{"pos":[7962,8110],"content":"If you click the second button while the first <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> is playing, you might expect the following behavior:","source":"If you click the second button while the first <xref:System.Windows.Media.Animation.Storyboard> is playing, you might expect the following behavior:"},{"pos":[8120,8351],"content":"The first storyboard ends and sends the rectangle back to its original position, because the animation has a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.FillBehavior.Stop&gt;</ph>.","source":"The first storyboard ends and sends the rectangle back to its original position, because the animation has a <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> of <xref:System.Windows.Media.Animation.FillBehavior.Stop>."},{"content":"The second storyboard takes effect and animates from the current position, which is now 0, to 500.","pos":[8361,8459]},{"content":"<bpt id=\"p1\">**</bpt>But that's not what happens.<ept id=\"p1\">**</ept>","pos":[8466,8498],"source":"**But that's not what happens.**"},{"content":"Instead, the rectangle does not jump back; it continues moving to the right.","pos":[8499,8575]},{"content":"That's because the second animation uses the current value of the first animation as its starting value and animates from that value to 500.","pos":[8576,8716]},{"content":"When the second animation replaces the first because the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace&gt;</ph><ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.HandoffBehavior&gt;</ph> is used, the <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.FillBehavior&gt;</ph> of the first animation does not matter.","pos":[8717,9003],"source":" When the second animation replaces the first because the <xref:System.Windows.Media.Animation.HandoffBehavior.SnapshotAndReplace><xref:System.Windows.Media.Animation.HandoffBehavior> is used, the <xref:System.Windows.Media.Animation.FillBehavior> of the first animation does not matter."},{"pos":[9014,9050],"content":"FillBehavior and the Completed Event","linkify":"FillBehavior and the Completed Event","nodes":[{"content":"FillBehavior and the Completed Event","pos":[0,36]}]},{"content":"The next examples demonstrate another scenario in which the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.FillBehavior.Stop&gt;</ph><ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A&gt;</ph> seems to have no effect.","pos":[9054,9256],"source":"The next examples demonstrate another scenario in which the <xref:System.Windows.Media.Animation.FillBehavior.Stop><xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> seems to have no effect."},{"content":"Again, the example uses a Storyboard to animate the <ph id=\"ph1\">&lt;xref:System.Windows.Media.TranslateTransform.X%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph> from 0 to 350.","pos":[9257,9438],"source":" Again, the example uses a Storyboard to animate the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> from 0 to 350."},{"content":"However, this time the example registers for the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.Completed&gt;</ph> event.","pos":[9439,9551],"source":" However, this time the example registers for the <xref:System.Windows.Media.Animation.Timeline.Completed> event."},{"pos":[9783,9984],"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.Completed&gt;</ph> event handler starts another <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> that animates the same property from its current value to 500.","source":"The <xref:System.Windows.Media.Animation.Timeline.Completed> event handler starts another <xref:System.Windows.Media.Animation.Storyboard> that animates the same property from its current value to 500."},{"pos":[10496,10611],"content":"The following is the markup that defines the second <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> as a resource.","source":"The following is the markup that defines the second <xref:System.Windows.Media.Animation.Storyboard> as a resource."},{"content":"When you run the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>, you might expect the <ph id=\"ph2\">&lt;xref:System.Windows.Media.TranslateTransform.X%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph> to animate from 0 to 350, then revert to 0 after it completes (because it has a <ph id=\"ph4\">&lt;xref:System.Windows.Media.Animation.FillBehavior&gt;</ph> setting of <ph id=\"ph5\">&lt;xref:System.Windows.Media.Animation.FillBehavior.Stop&gt;</ph>), and then animate from 0 to 500.","pos":[10827,11261],"source":"When you run the <xref:System.Windows.Media.Animation.Storyboard>, you might expect the <xref:System.Windows.Media.TranslateTransform.X%2A> property of the <xref:System.Windows.Media.TranslateTransform> to animate from 0 to 350, then revert to 0 after it completes (because it has a <xref:System.Windows.Media.Animation.FillBehavior> setting of <xref:System.Windows.Media.Animation.FillBehavior.Stop>), and then animate from 0 to 500."},{"content":"Instead, the <ph id=\"ph1\">&lt;xref:System.Windows.Media.TranslateTransform&gt;</ph> animates from 0 to 350 and then to 500.","pos":[11262,11361],"source":" Instead, the <xref:System.Windows.Media.TranslateTransform> animates from 0 to 350 and then to 500."},{"content":"That's because of the order in which <ph id=\"ph1\">[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]</ph> raises events and because property values are cached and are not recalculated unless the property is invalidated.","pos":[11368,11588],"source":"That's because of the order in which [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] raises events and because property values are cached and are not recalculated unless the property is invalidated."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Timeline.Completed&gt;</ph> event is processed first because it was triggered by the root timeline (the first <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>).","pos":[11589,11782],"source":" The <xref:System.Windows.Media.Animation.Timeline.Completed> event is processed first because it was triggered by the root timeline (the first <xref:System.Windows.Media.Animation.Storyboard>)."},{"content":"At this time, the <ph id=\"ph1\">&lt;xref:System.Windows.Media.TranslateTransform.X%2A&gt;</ph> property still returns its animated value because it hasn't been invalidated yet.","pos":[11783,11934],"source":" At this time, the <xref:System.Windows.Media.TranslateTransform.X%2A> property still returns its animated value because it hasn't been invalidated yet."},{"content":"The second <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> uses the cached value as its starting value and begins animating.","pos":[11935,12060],"source":" The second <xref:System.Windows.Media.Animation.Storyboard> uses the cached value as its starting value and begins animating."},{"pos":[12106,12117],"content":"Performance","linkify":"Performance","nodes":[{"content":"Performance","pos":[0,11]}]},{"pos":[12127,12187],"content":"Animations Continue to Run After Navigating Away from a Page","linkify":"Animations Continue to Run After Navigating Away from a Page","nodes":[{"content":"Animations Continue to Run After Navigating Away from a Page","pos":[0,60]}]},{"content":"When you navigate away from a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Page&gt;</ph> that contains running animations, those animations will continue to play until the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Page&gt;</ph> is garbage collected.","pos":[12191,12397],"source":"When you navigate away from a <xref:System.Windows.Controls.Page> that contains running animations, those animations will continue to play until the <xref:System.Windows.Controls.Page> is garbage collected."},{"content":"Depending on the navigation system you're using, a page that you navigate away from might stay in memory for an indefinite amount of time, all the while consuming resources with its animations.","pos":[12398,12591]},{"content":"This is most noticeable when a page contains constantly running (\"ambient\") animations.","pos":[12592,12679]},{"pos":[12686,12841],"content":"For this reason, it's a good idea to use the <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.Unloaded&gt;</ph> event to remove animations when you navigate away from a page.","source":"For this reason, it's a good idea to use the <xref:System.Windows.FrameworkElement.Unloaded> event to remove animations when you navigate away from a page."},{"content":"There are different ways to remove an animation.","pos":[12848,12896]},{"content":"The following techniques can be used to remove animations that belong to a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>.","pos":[12897,13021],"source":" The following techniques can be used to remove animations that belong to a <xref:System.Windows.Media.Animation.Storyboard>."},{"pos":[13031,13249],"content":"To remove a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> you started with an event trigger, see <bpt id=\"p1\">[</bpt>How to: Remove a Storyboard<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms749412(v=vs.90))</ept>.","source":"To remove a <xref:System.Windows.Media.Animation.Storyboard> you started with an event trigger, see [How to: Remove a Storyboard](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms749412(v=vs.90))."},{"pos":[13259,13407],"content":"To use code to remove a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>, see the <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard.Remove%2A&gt;</ph> method.","source":"To use code to remove a <xref:System.Windows.Media.Animation.Storyboard>, see the <xref:System.Windows.Media.Animation.Storyboard.Remove%2A> method."},{"content":"The next technique may be used regardless of how the animation was started.","pos":[13414,13489]},{"content":"To remove animations from a specific property, use the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29&gt;</ph> method.","pos":[13499,13715],"source":"To remove animations from a specific property, use the <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method."},{"content":"Specify the property being animated as the first parameter, and <ph id=\"ph1\">`null`</ph> as the second.","pos":[13716,13801],"source":" Specify the property being animated as the first parameter, and `null` as the second."},{"content":"This will remove all animation clocks from the property.","pos":[13802,13858]},{"pos":[13865,14022],"content":"For more information about the different ways to animate properties, see <bpt id=\"p1\">[</bpt>Property Animation Techniques Overview<ept id=\"p1\">](property-animation-techniques-overview.md)</ept>.","source":"For more information about the different ways to animate properties, see [Property Animation Techniques Overview](property-animation-techniques-overview.md)."},{"pos":[14032,14091],"content":"Using the Compose HandoffBehavior Consumes System Resources","linkify":"Using the Compose HandoffBehavior Consumes System Resources","nodes":[{"content":"Using the Compose HandoffBehavior Consumes System Resources","pos":[0,59]}]},{"pos":[14095,14611],"content":"When you apply a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.AnimationTimeline&gt;</ph>, or <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.AnimationClock&gt;</ph> to a property using the <ph id=\"ph4\">&lt;xref:System.Windows.Media.Animation.HandoffBehavior.Compose&gt;</ph><ph id=\"ph5\">&lt;xref:System.Windows.Media.Animation.HandoffBehavior&gt;</ph>, any <ph id=\"ph6\">&lt;xref:System.Windows.Media.Animation.Clock&gt;</ph> objects previously associated with that property continue to consume system resources; the timing system will not remove these clocks automatically.","source":"When you apply a <xref:System.Windows.Media.Animation.Storyboard>, <xref:System.Windows.Media.Animation.AnimationTimeline>, or <xref:System.Windows.Media.Animation.AnimationClock> to a property using the <xref:System.Windows.Media.Animation.HandoffBehavior.Compose><xref:System.Windows.Media.Animation.HandoffBehavior>, any <xref:System.Windows.Media.Animation.Clock> objects previously associated with that property continue to consume system resources; the timing system will not remove these clocks automatically."},{"content":"To avoid performance issues when you apply a large number of clocks using <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.HandoffBehavior.Compose&gt;</ph>, you should remove composing clocks from the animated property after they complete.","pos":[14618,14837],"source":"To avoid performance issues when you apply a large number of clocks using <xref:System.Windows.Media.Animation.HandoffBehavior.Compose>, you should remove composing clocks from the animated property after they complete."},{"content":"There are several ways to remove a clock.","pos":[14838,14879]},{"content":"To remove all clocks from a property, use the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29&gt;</ph> method of the animated object.","pos":[14889,15278],"source":"To remove all clocks from a property, use the <xref:System.Windows.Media.Animation.Animatable.ApplyAnimationClock%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationClock%29> or <xref:System.Windows.Media.Animation.Animatable.BeginAnimation%28System.Windows.DependencyProperty%2CSystem.Windows.Media.Animation.AnimationTimeline%29> method of the animated object."},{"content":"Specify the property being animated as the first parameter, and <ph id=\"ph1\">`null`</ph> as the second.","pos":[15279,15364],"source":" Specify the property being animated as the first parameter, and `null` as the second."},{"content":"This will remove all animation clocks from the property.","pos":[15365,15421]},{"content":"To remove a specific <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.AnimationClock&gt;</ph> from a list of clocks, use the <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Clock.Controller%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Media.Animation.AnimationClock&gt;</ph> to retrieve a <ph id=\"ph4\">&lt;xref:System.Windows.Media.Animation.ClockController&gt;</ph>, then call the <ph id=\"ph5\">&lt;xref:System.Windows.Media.Animation.ClockController.Remove%2A&gt;</ph> method of the <ph id=\"ph6\">&lt;xref:System.Windows.Media.Animation.ClockController&gt;</ph>.","pos":[15431,15878],"source":"To remove a specific <xref:System.Windows.Media.Animation.AnimationClock> from a list of clocks, use the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of the <xref:System.Windows.Media.Animation.AnimationClock> to retrieve a <xref:System.Windows.Media.Animation.ClockController>, then call the <xref:System.Windows.Media.Animation.ClockController.Remove%2A> method of the <xref:System.Windows.Media.Animation.ClockController>."},{"content":"This is typically done in the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Clock.Completed&gt;</ph> event handler for a clock.","pos":[15879,15989],"source":" This is typically done in the <xref:System.Windows.Media.Animation.Clock.Completed> event handler for a clock."},{"content":"Note that only root clocks can be controlled by a <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.ClockController&gt;</ph>; the <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Clock.Controller%2A&gt;</ph> property of a child clock will return <ph id=\"ph3\">`null`</ph>.","pos":[15990,16202],"source":" Note that only root clocks can be controlled by a <xref:System.Windows.Media.Animation.ClockController>; the <xref:System.Windows.Media.Animation.Clock.Controller%2A> property of a child clock will return `null`."},{"content":"Note also that the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Clock.Completed&gt;</ph> event will not be called if the effective duration of the clock is forever.","pos":[16203,16351],"source":" Note also that the <xref:System.Windows.Media.Animation.Clock.Completed> event will not be called if the effective duration of the clock is forever."},{"content":"In that case, the user will need to determine when to call <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.ClockController.Remove%2A&gt;</ph>.","pos":[16353,16476],"source":"  In that case, the user will need to determine when to call <xref:System.Windows.Media.Animation.ClockController.Remove%2A>."},{"content":"This is primarily an issue for animations on objects that have a long lifetime.","pos":[16483,16562]},{"content":"When an object is garbage collected, its clocks will also be disconnected and garbage collected.","pos":[16564,16660]},{"pos":[16667,16793],"content":"For more information about clock objects, see <bpt id=\"p1\">[</bpt>Animation and Timing System Overview<ept id=\"p1\">](animation-and-timing-system-overview.md)</ept>.","source":"For more information about clock objects, see [Animation and Timing System Overview](animation-and-timing-system-overview.md)."},{"pos":[16802,16810],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[16814,16857],"content":"<bpt id=\"p1\">[</bpt>Animation Overview<ept id=\"p1\">](animation-overview.md)</ept>","source":"[Animation Overview](animation-overview.md)"}]}