{"content":"---\ntitle: \"How to: Modify Keyboard Input to a Standard Control | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-winforms\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"keyboard input, modifying\"\n  - \"modifying keyboard input\"\n  - \"Windows Forms, modifying keyboard input\"\n  - \"keyboards, keyboard input\"\nms.assetid: 626d3712-d866-4988-bcda-a2d5b36ec0ba\ncaps.latest.revision: 14\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# How to: Modify Keyboard Input to a Standard Control\nWindows Forms provides the ability to consume and modify keyboard input. Consuming a key refers to handling a key within a method or event handler so that other methods and events further down the message queue do not receive the key value. Modifying a key refers to modifying the value of a key so that methods and event handlers further down the message queue receive a different key value. This topic shows how to accomplish these tasks.  \n  \n### To consume a key  \n  \n-   In a <xref:System.Windows.Forms.Control.KeyPress> event handler, set the <xref:System.Windows.Forms.KeyPressEventArgs.Handled%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> class to `true`.  \n  \n     -or-  \n  \n     In a <xref:System.Windows.Forms.Control.KeyDown> event handler, set the <xref:System.Windows.Forms.KeyEventArgs.Handled%2A> property of the <xref:System.Windows.Forms.KeyEventArgs> class to `true`.  \n  \n    > [!NOTE]\n    >  Setting the <xref:System.Windows.Forms.KeyEventArgs.Handled%2A> property in the <xref:System.Windows.Forms.Control.KeyDown> event handler does not prevent the <xref:System.Windows.Forms.Control.KeyPress> and <xref:System.Windows.Forms.Control.KeyUp> events from being raised for the current keystroke. Use the <xref:System.Windows.Forms.KeyEventArgs.SuppressKeyPress%2A> property for this purpose.  \n  \n     The following example is an excerpt from a `switch` statement that examines the <xref:System.Windows.Forms.KeyPressEventArgs.KeyChar%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> received by a <xref:System.Windows.Forms.Control.KeyPress> event handler. This code consumes the 'A' and 'a' character keys.  \n  \n     [!code-csharp[System.Windows.Forms.KeyBoardInput#6](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#6)]\n     [!code-vb[System.Windows.Forms.KeyBoardInput#6](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#6)]  \n  \n### To modify a standard character key  \n  \n-   In a <xref:System.Windows.Forms.Control.KeyPress> event handler, set the <xref:System.Windows.Forms.KeyPressEventArgs.KeyChar%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> class to the value of the new character key.  \n  \n     The following example is an excerpt from a `switch` statement that modifies 'B' to 'A' and 'b' to 'a'. Note that the <xref:System.Windows.Forms.KeyPressEventArgs.Handled%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> parameter is set to `false`, so that the new key value is propagated to other methods and events in the message queue.  \n  \n     [!code-csharp[System.Windows.Forms.KeyBoardInput#7](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#7)]\n     [!code-vb[System.Windows.Forms.KeyBoardInput#7](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#7)]  \n  \n### To modify a noncharacter key  \n  \n-   Override a <xref:System.Windows.Forms.Control> method that processes Windows messages, detect the WM_KEYDOWN or WM_SYSKEYDOWN message, and set the <xref:System.Windows.Forms.Message.WParam%2A> property of the <xref:System.Windows.Forms.Message> parameter to the <xref:System.Windows.Forms.Keys> value that represents the new noncharacter key.  \n  \n     The following code example demonstrates how to override the <xref:System.Windows.Forms.Control.PreProcessMessage%2A> method of a control to detect keys F1 through F9 and modify any F3 key press to F1. For more information on <xref:System.Windows.Forms.Control> methods that you can override to intercept keyboard messages, see [User Input in a Windows Forms Application](../../../docs/framework/winforms/user-input-in-a-windows-forms-application.md) and [How Keyboard Input Works](../../../docs/framework/winforms/how-keyboard-input-works.md).  \n  \n     [!code-csharp[System.Windows.Forms.KeyBoardInput#12](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#12)]\n     [!code-vb[System.Windows.Forms.KeyBoardInput#12](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#12)]  \n  \n## Example  \n The following code example is the complete application for the code examples in the previous sections. The application uses a custom control derived from the <xref:System.Windows.Forms.TextBox> class to consume and modify keyboard input.  \n  \n [!code-csharp[System.Windows.Forms.KeyBoardInput#0](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#0)]\n [!code-vb[System.Windows.Forms.KeyBoardInput#0](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#0)]  \n  \n## Compiling the Code  \n This example requires:  \n  \n-   References to the System, System.Drawing and System.Windows.Forms assemblies.  \n  \n For information about building this example from the command line for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] or [!INCLUDE[csprcs](../../../includes/csprcs-md.md)], see [Building from the Command Line](~/docs/visual-basic/reference/command-line-compiler/building-from-the-command-line.md) or [Command-line Building With csc.exe](~/docs/csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md). You can also build this example in [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] by pasting the code into a new project.  Also see [How to: Compile and Run a Complete Windows Forms Code Example Using Visual Studio](http://msdn.microsoft.com/library/Bb129228\\(v=vs.110\\)).  \n  \n## See Also  \n [Keyboard Input in a Windows Forms Application](../../../docs/framework/winforms/keyboard-input-in-a-windows-forms-application.md)   \n [User Input in a Windows Forms Application](../../../docs/framework/winforms/user-input-in-a-windows-forms-application.md)   \n [How Keyboard Input Works](../../../docs/framework/winforms/how-keyboard-input-works.md)","nodes":[{"pos":[4,574],"embed":true,"restype":"x-metadata","content":"title: \"How to: Modify Keyboard Input to a Standard Control | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-winforms\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"keyboard input, modifying\"\n  - \"modifying keyboard input\"\n  - \"Windows Forms, modifying keyboard input\"\n  - \"keyboards, keyboard input\"\nms.assetid: 626d3712-d866-4988-bcda-a2d5b36ec0ba\ncaps.latest.revision: 14\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"","nodes":[{"content":"How to: Modify Keyboard Input to a Standard Control | Microsoft Docs","nodes":[{"pos":[0,68],"content":"How to: Modify Keyboard Input to a Standard Control | Microsoft Docs","nodes":[{"content":"How to: Modify Keyboard Input to a Standard Control | Microsoft Docs","pos":[0,68]}]}],"path":["title"]}],"yml":true},{"pos":[581,632],"content":"How to: Modify Keyboard Input to a Standard Control","linkify":"How to: Modify Keyboard Input to a Standard Control","nodes":[{"content":"How to: Modify Keyboard Input to a Standard Control","pos":[0,51]}]},{"content":"Windows Forms provides the ability to consume and modify keyboard input.","pos":[633,705]},{"content":"Consuming a key refers to handling a key within a method or event handler so that other methods and events further down the message queue do not receive the key value.","pos":[706,873]},{"content":"Modifying a key refers to modifying the value of a key so that methods and event handlers further down the message queue receive a different key value.","pos":[874,1025]},{"content":"This topic shows how to accomplish these tasks.","pos":[1026,1073]},{"pos":[1083,1099],"content":"To consume a key","linkify":"To consume a key","nodes":[{"content":"To consume a key","pos":[0,16]}]},{"pos":[1109,1317],"content":"In a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.KeyPress&gt;</ph> event handler, set the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.KeyPressEventArgs.Handled%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.KeyPressEventArgs&gt;</ph> class to <ph id=\"ph4\">`true`</ph>.","source":"In a <xref:System.Windows.Forms.Control.KeyPress> event handler, set the <xref:System.Windows.Forms.KeyPressEventArgs.Handled%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> class to `true`."},{"content":"-or-","pos":[1328,1332]},{"pos":[1343,1540],"content":"In a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.KeyDown&gt;</ph> event handler, set the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.KeyEventArgs.Handled%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.KeyEventArgs&gt;</ph> class to <ph id=\"ph4\">`true`</ph>.","source":"In a <xref:System.Windows.Forms.Control.KeyDown> event handler, set the <xref:System.Windows.Forms.KeyEventArgs.Handled%2A> property of the <xref:System.Windows.Forms.KeyEventArgs> class to `true`."},{"pos":[1552,1964],"content":"[!NOTE]\nSetting the <xref:System.Windows.Forms.KeyEventArgs.Handled%2A> property in the <xref:System.Windows.Forms.Control.KeyDown> event handler does not prevent the <xref:System.Windows.Forms.Control.KeyPress> and <xref:System.Windows.Forms.Control.KeyUp> events from being raised for the current keystroke. Use the <xref:System.Windows.Forms.KeyEventArgs.SuppressKeyPress%2A> property for this purpose.","leadings":["","    >  "],"nodes":[{"content":"Setting the <xref:System.Windows.Forms.KeyEventArgs.Handled%2A> property in the <xref:System.Windows.Forms.Control.KeyDown> event handler does not prevent the <xref:System.Windows.Forms.Control.KeyPress> and <xref:System.Windows.Forms.Control.KeyUp> events from being raised for the current keystroke. Use the <xref:System.Windows.Forms.KeyEventArgs.SuppressKeyPress%2A> property for this purpose.","pos":[8,405],"nodes":[{"content":"Setting the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.KeyEventArgs.Handled%2A&gt;</ph> property in the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Control.KeyDown&gt;</ph> event handler does not prevent the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.Control.KeyPress&gt;</ph> and <ph id=\"ph4\">&lt;xref:System.Windows.Forms.Control.KeyUp&gt;</ph> events from being raised for the current keystroke.","pos":[0,301],"source":"Setting the <xref:System.Windows.Forms.KeyEventArgs.Handled%2A> property in the <xref:System.Windows.Forms.Control.KeyDown> event handler does not prevent the <xref:System.Windows.Forms.Control.KeyPress> and <xref:System.Windows.Forms.Control.KeyUp> events from being raised for the current keystroke."},{"content":"Use the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.KeyEventArgs.SuppressKeyPress%2A&gt;</ph> property for this purpose.","pos":[302,397],"source":" Use the <xref:System.Windows.Forms.KeyEventArgs.SuppressKeyPress%2A> property for this purpose."}]}]},{"content":"The following example is an excerpt from a <ph id=\"ph1\">`switch`</ph> statement that examines the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.KeyPressEventArgs.KeyChar%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.KeyPressEventArgs&gt;</ph> received by a <ph id=\"ph4\">&lt;xref:System.Windows.Forms.Control.KeyPress&gt;</ph> event handler.","pos":[1975,2247],"source":"The following example is an excerpt from a `switch` statement that examines the <xref:System.Windows.Forms.KeyPressEventArgs.KeyChar%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> received by a <xref:System.Windows.Forms.Control.KeyPress> event handler."},{"content":"This code consumes the 'A' and 'a' character keys.","pos":[2248,2298]},{"pos":[2309,2628],"content":"[!code-csharp[System.Windows.Forms.KeyBoardInput#6](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#6)]\n [!code-vb[System.Windows.Forms.KeyBoardInput#6](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#6)]","leadings":["","    "],"nodes":[]},{"pos":[2638,2672],"content":"To modify a standard character key","linkify":"To modify a standard character key","nodes":[{"content":"To modify a standard character key","pos":[0,34]}]},{"content":"In a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.KeyPress&gt;</ph> event handler, set the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.KeyPressEventArgs.KeyChar%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.KeyPressEventArgs&gt;</ph> class to the value of the new character key.","pos":[2682,2918],"source":"In a <xref:System.Windows.Forms.Control.KeyPress> event handler, set the <xref:System.Windows.Forms.KeyPressEventArgs.KeyChar%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> class to the value of the new character key."},{"content":"The following example is an excerpt from a <ph id=\"ph1\">`switch`</ph> statement that modifies 'B' to 'A' and 'b' to 'a'.","pos":[2929,3031],"source":"The following example is an excerpt from a `switch` statement that modifies 'B' to 'A' and 'b' to 'a'."},{"content":"Note that the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.KeyPressEventArgs.Handled%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.KeyPressEventArgs&gt;</ph> parameter is set to <ph id=\"ph3\">`false`</ph>, so that the new key value is propagated to other methods and events in the message queue.","pos":[3032,3283],"source":" Note that the <xref:System.Windows.Forms.KeyPressEventArgs.Handled%2A> property of the <xref:System.Windows.Forms.KeyPressEventArgs> parameter is set to `false`, so that the new key value is propagated to other methods and events in the message queue."},{"pos":[3294,3613],"content":"[!code-csharp[System.Windows.Forms.KeyBoardInput#7](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#7)]\n [!code-vb[System.Windows.Forms.KeyBoardInput#7](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#7)]","leadings":["","    "],"nodes":[]},{"pos":[3623,3651],"content":"To modify a noncharacter key","linkify":"To modify a noncharacter key","nodes":[{"content":"To modify a noncharacter key","pos":[0,28]}]},{"content":"Override a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control&gt;</ph> method that processes Windows messages, detect the WM_KEYDOWN or WM_SYSKEYDOWN message, and set the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Message.WParam%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.Message&gt;</ph> parameter to the <ph id=\"ph4\">&lt;xref:System.Windows.Forms.Keys&gt;</ph> value that represents the new noncharacter key.","pos":[3661,4003],"source":"Override a <xref:System.Windows.Forms.Control> method that processes Windows messages, detect the WM_KEYDOWN or WM_SYSKEYDOWN message, and set the <xref:System.Windows.Forms.Message.WParam%2A> property of the <xref:System.Windows.Forms.Message> parameter to the <xref:System.Windows.Forms.Keys> value that represents the new noncharacter key."},{"content":"The following code example demonstrates how to override the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.PreProcessMessage%2A&gt;</ph> method of a control to detect keys F1 through F9 and modify any F3 key press to F1.","pos":[4014,4214],"source":"The following code example demonstrates how to override the <xref:System.Windows.Forms.Control.PreProcessMessage%2A> method of a control to detect keys F1 through F9 and modify any F3 key press to F1."},{"content":"For more information on <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control&gt;</ph> methods that you can override to intercept keyboard messages, see <bpt id=\"p1\">[</bpt>User Input in a Windows Forms Application<ept id=\"p1\">](../../../docs/framework/winforms/user-input-in-a-windows-forms-application.md)</ept> and <bpt id=\"p2\">[</bpt>How Keyboard Input Works<ept id=\"p2\">](../../../docs/framework/winforms/how-keyboard-input-works.md)</ept>.","pos":[4215,4557],"source":" For more information on <xref:System.Windows.Forms.Control> methods that you can override to intercept keyboard messages, see [User Input in a Windows Forms Application](../../../docs/framework/winforms/user-input-in-a-windows-forms-application.md) and [How Keyboard Input Works](../../../docs/framework/winforms/how-keyboard-input-works.md)."},{"pos":[4568,4891],"content":"[!code-csharp[System.Windows.Forms.KeyBoardInput#12](../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/CS/form1.cs#12)]\n [!code-vb[System.Windows.Forms.KeyBoardInput#12](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.KeyboardInput/VB/form1.vb#12)]","leadings":["","    "],"nodes":[]},{"pos":[4900,4907],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example is the complete application for the code examples in the previous sections.","pos":[4911,5013]},{"content":"The application uses a custom control derived from the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.TextBox&gt;</ph> class to consume and modify keyboard input.","pos":[5014,5148],"source":" The application uses a custom control derived from the <xref:System.Windows.Forms.TextBox> class to consume and modify keyboard input."},{"pos":[5479,5497],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"content":"This example requires:","pos":[5501,5523]},{"content":"References to the System, System.Drawing and System.Windows.Forms assemblies.","pos":[5533,5610]},{"content":"For information about building this example from the command line for <ph id=\"ph1\">[!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]</ph> or <ph id=\"ph2\">[!INCLUDE[csprcs](../../../includes/csprcs-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>Building from the Command Line<ept id=\"p1\">](~/docs/visual-basic/reference/command-line-compiler/building-from-the-command-line.md)</ept> or <bpt id=\"p2\">[</bpt>Command-line Building With csc.exe<ept id=\"p2\">](~/docs/csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md)</ept>.","pos":[5617,6046],"source":"For information about building this example from the command line for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] or [!INCLUDE[csprcs](../../../includes/csprcs-md.md)], see [Building from the Command Line](~/docs/visual-basic/reference/command-line-compiler/building-from-the-command-line.md) or [Command-line Building With csc.exe](~/docs/csharp/language-reference/compiler-options/command-line-building-with-csc-exe.md)."},{"content":"You can also build this example in <ph id=\"ph1\">[!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)]</ph> by pasting the code into a new project.","pos":[6047,6172],"source":" You can also build this example in [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] by pasting the code into a new project."},{"content":"Also see <bpt id=\"p1\">[</bpt>How to: Compile and Run a Complete Windows Forms Code Example Using Visual Studio<ept id=\"p1\">](http://msdn.microsoft.com/library/Bb129228\\(v=vs.110\\))</ept>.","pos":[6174,6323],"source":"  Also see [How to: Compile and Run a Complete Windows Forms Code Example Using Visual Studio](http://msdn.microsoft.com/library/Bb129228\\(v=vs.110\\))."},{"pos":[6332,6340],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Keyboard Input in a Windows Forms Application<ept id=\"p1\">](../../../docs/framework/winforms/keyboard-input-in-a-windows-forms-application.md)</ept><ph id=\"ph1\"> </ph>","pos":[6344,6475],"source":"[Keyboard Input in a Windows Forms Application](../../../docs/framework/winforms/keyboard-input-in-a-windows-forms-application.md) "},{"content":"<bpt id=\"p1\">[</bpt>User Input in a Windows Forms Application<ept id=\"p1\">](../../../docs/framework/winforms/user-input-in-a-windows-forms-application.md)</ept><ph id=\"ph1\"> </ph>","pos":[6479,6602],"source":"[User Input in a Windows Forms Application](../../../docs/framework/winforms/user-input-in-a-windows-forms-application.md) "},{"content":"<bpt id=\"p1\">[</bpt>How Keyboard Input Works<ept id=\"p1\">](../../../docs/framework/winforms/how-keyboard-input-works.md)</ept>","pos":[6606,6694],"source":"[How Keyboard Input Works](../../../docs/framework/winforms/how-keyboard-input-works.md)"}]}