{"content":"---\ntitle: \"How to: Programmatically Add Discoverability to a WCF Service and Client\"\nms.date: \"03/30/2017\"\nms.assetid: 4f7ae7ab-6fc8-4769-9730-c14d43f7b9b1\n---\n# How to: Programmatically Add Discoverability to a WCF Service and Client\nThis topic explains how to make a Windows Communication Foundation (WCF) service discoverable. It is based on the [Self-Host](https://go.microsoft.com/fwlink/?LinkId=145523) sample.  \n  \n### To configure the existing Self-Host service sample for Discovery  \n  \n1.  Open the Self-Host solution in Visual Studio 2012. The sample is located in the TechnologySamples\\Basic\\Service\\Hosting\\SelfHost directory.  \n  \n2.  Add a reference to `System.ServiceModel.Discovery.dll` to the service project. You may see an error message saying \"System. ServiceModel.Discovery.dll or one of its dependencies requires a later version of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] than the one specified in the project …\" If you see this message, right-click the project in the Solution Explorer and choose **Properties**. In the **Project Properties** window, make sure that the **Target Framework** is [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)].  \n  \n3.  Open the Service.cs file and add the following `using` statement.  \n  \n    ```csharp  \n    using System.ServiceModel.Discovery;  \n    ```  \n  \n4.  In the `Main()` method, inside the `using` statement, add a <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> instance to the service host.  \n  \n    ```csharp  \n    public static void Main()  \n    {  \n        // Create a ServiceHost for the CalculatorService type.  \n        using (ServiceHost serviceHost = new ServiceHost(typeof(CalculatorService)))  \n        {  \n            // Add a ServiceDiscoveryBehavior  \n            serviceHost.Description.Behaviors.Add(new ServiceDiscoveryBehavior());                  \n  \n            // ...  \n        }  \n    }  \n    ```  \n  \n     The <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> specifies that the service it is applied to is discoverable.  \n  \n5.  Add a <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> to the service host right after the code that adds the <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior>.  \n  \n    ```csharp  \n    // Add ServiceDiscoveryBehavior  \n    serviceHost.Description.Behaviors.Add(new ServiceDiscoveryBehavior());  \n  \n    // Add a UdpDiscoveryEndpoint  \n    serviceHost.AddServiceEndpoint(new UdpDiscoveryEndpoint());  \n    ```  \n  \n     This code specifies that discovery messages should be sent to the standard UDP discovery endpoint.  \n  \n### To create a client application that uses discovery to call the service  \n  \n1.  Add a new console application to the solution called `DiscoveryClientApp`.  \n  \n2.  Add a reference to `System.ServiceModel.dll` and `System.ServiceModel.Discovery.dll`  \n  \n3.  Copy the GeneratedClient.cs and App.config files from the existing client project to the new DiscoveryClientApp project. To do this, right-click the files in the **Solution Explorer**, select **Copy**, and then select the **DiscoveryClientApp** project, right-click and select **Paste**.  \n  \n4.  Open Program.cs.  \n  \n5.  Add the following `using` statements.  \n  \n    ```csharp  \n    using System.ServiceModel;  \n    using System.ServiceModel.Discovery;  \n    using Microsoft.ServiceModel.Samples;  \n    ```  \n  \n6.  Add a static method called `FindCalculatorServiceAddress()` to the `Program` class.  \n  \n    ```csharp  \n    static EndpointAddress FindCalculatorServiceAddress()  \n    {  \n    }  \n    ```  \n  \n     This method uses discovery to search for the `CalculatorService` service.  \n  \n7.  Inside the `FindCalculatorServiceAddress` method, create a new <xref:System.ServiceModel.Discovery.DiscoveryClient> instance, passing in a <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> to the constructor.  \n  \n    ```csharp  \n    static EndpointAddress FindCalculatorServiceAddress()  \n    {  \n        // Create DiscoveryClient  \n        DiscoveryClient discoveryClient = new DiscoveryClient(new UdpDiscoveryEndpoint());  \n    }  \n    ```  \n  \n     This tells WCF that the <xref:System.ServiceModel.Discovery.DiscoveryClient> class should use the standard UDP discovery endpoint to send and receive discovery messages.  \n  \n8.  On the next line, call the <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> method and specify a <xref:System.ServiceModel.Discovery.FindCriteria> instance that contains the service contract you want to search for. In this case, specify `ICalculator`.  \n  \n    ```csharp  \n    // Find ICalculatorService endpoints              \n    FindResponse findResponse = discoveryClient.Find(new FindCriteria(typeof(ICalculator)));  \n    ```  \n  \n9. After the call to <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A>, check to see if there is at least one matching service and return the <xref:System.ServiceModel.EndpointAddress> of the first matching service. Otherwise return `null`.  \n  \n    ```csharp  \n    if (findResponse.Endpoints.Count > 0)  \n    {  \n        return findResponse.Endpoints[0].Address;  \n    }  \n    else  \n    {  \n        return null;  \n    }  \n    ```  \n  \n10. Add a static method named `InvokeCalculatorService` to the `Program` class.  \n  \n    ```csharp  \n    static void InvokeCalculatorService(EndpointAddress endpointAddress)  \n    {  \n    }  \n    ```  \n  \n     This method uses the endpoint address returned from `FindCalculatorServiceAddress` to call the calculator service.  \n  \n11. Inside the `InvokeCalculatorService` method, create an instance of the `CalculatorServiceClient` class. This class is defined by the [Self-Host](https://go.microsoft.com/fwlink/?LinkId=145523) sample. It was generated using Svcutil.exe.  \n  \n    ```csharp  \n    // Create a client  \n    CalculatorClient client = new CalculatorClient();  \n    ```  \n  \n12. On the next line, set the endpoint address of the client to the endpoint address returned from `FindCalculatorServiceAddress()`.  \n  \n    ```csharp  \n    // Connect to the discovered service endpoint  \n    client.Endpoint.Address = endpointAddress;  \n    ```  \n  \n13. Immediately after the code for the previous step, call the methods exposed by the calculator service.  \n  \n    ```csharp  \n    Console.WriteLine(\"Invoking CalculatorService at {0}\", endpointAddress);  \n  \n    double value1 = 100.00D;  \n    double value2 = 15.99D;  \n  \n    // Call the Add service operation.  \n    double result = client.Add(value1, value2);  \n    Console.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result);  \n  \n    // Call the Subtract service operation.  \n    result = client.Subtract(value1, value2);  \n    Console.WriteLine(\"Subtract({0},{1}) = {2}\", value1, value2, result);  \n  \n    // Call the Multiply service operation.  \n    result = client.Multiply(value1, value2);  \n    Console.WriteLine(\"Multiply({0},{1}) = {2}\", value1, value2, result);  \n  \n    // Call the Divide service operation.  \n    result = client.Divide(value1, value2);  \n    Console.WriteLine(\"Divide({0},{1}) = {2}\", value1, value2, result);  \n    Console.WriteLine();  \n  \n    //Closing the client gracefully closes the connection and cleans up resources  \n    client.Close();  \n    ```  \n  \n14. Add code to the `Main()` method in the `Program` class to call `FindCalculatorServiceAddress`.  \n  \n    ```csharp  \n    public static void Main()  \n    {  \n        EndpointAddress endpointAddress = FindCalculatorServiceAddress();  \n    }  \n    ```  \n  \n15. On the next line, call the `InvokeCalculatorService()` and pass in the endpoint address returned from `FindCalculatorServiceAddress()`.  \n  \n    ```csharp  \n    if (endpointAddress != null)  \n    {  \n        InvokeCalculatorService(endpointAddress);  \n    }  \n  \n    Console.WriteLine(\"Press <ENTER> to exit.\");  \n    Console.ReadLine();  \n    ```  \n  \n### To test the application  \n  \n1.  Open an elevated command prompt and run Service.exe.  \n  \n2.  Open a command prompt and run Discoveryclientapp.exe.  \n  \n3.  The output from service.exe should look like the following output.  \n  \n    ```Output  \n    Received Add(100,15.99)  \n    Return: 115.99  \n    Received Subtract(100,15.99)  \n    Return: 84.01  \n    Received Multiply(100,15.99)  \n    Return: 1599  \n    Received Divide(100,15.99)  \n    Return: 6.25390869293308  \n    ```  \n  \n4.  The output from Discoveryclientapp.exe should look like the following output.  \n  \n    ```Output  \n    Invoking CalculatorService at http://localhost:8000/ServiceModelSamples/service  \n    Add(100,15.99) = 115.99  \n    Subtract(100,15.99) = 84.01  \n    Multiply(100,15.99) = 1599  \n    Divide(100,15.99) = 6.25390869293308  \n  \n    Press <ENTER> to exit.  \n    ```  \n  \n## Example  \n The following is a listing of the code for this sample. Because this code is based on the [Self-Host](https://go.microsoft.com/fwlink/?LinkId=145523) sample, only those files that are changed are listed. For more information about the Self-Host sample, see [Setup Instructions](https://go.microsoft.com/fwlink/?LinkId=145522).  \n  \n```csharp  \n// Service.cs  \nusing System;  \nusing System.Configuration;  \nusing System.ServiceModel;  \nusing System.ServiceModel.Discovery;  \n  \nnamespace Microsoft.ServiceModel.Samples  \n{  \n    // See SelfHost sample for service contract and implementation  \n    // ...  \n  \n        // Host the service within this EXE console application.  \n        public static void Main()  \n        {  \n            // Create a ServiceHost for the CalculatorService type.  \n            using (ServiceHost serviceHost = new ServiceHost(typeof(CalculatorService)))  \n            {  \n                // Add the ServiceDiscoveryBehavior to make the service discoverable  \n                serviceHost.Description.Behaviors.Add(new ServiceDiscoveryBehavior());  \n                serviceHost.AddServiceEndpoint(new UdpDiscoveryEndpoint());  \n  \n                // Open the ServiceHost to create listeners and start listening for messages.  \n                serviceHost.Open();  \n  \n                // The service can now be accessed.  \n                Console.WriteLine(\"The service is ready.\");  \n                Console.WriteLine(\"Press <ENTER> to terminate service.\");  \n                Console.WriteLine();  \n                Console.ReadLine();  \n            }  \n        }  \n    }  \n}  \n```  \n  \n```csharp  \n// Program.cs  \nusing System;  \nusing System.Collections.Generic;  \nusing System.Linq;  \nusing System.ServiceModel;  \nusing System.ServiceModel.Discovery;  \nusing Microsoft.ServiceModel.Samples;  \nusing System.Text;  \n  \nnamespace DiscoveryClientApp  \n{  \n    class Program  \n    {  \n        static EndpointAddress FindCalculatorServiceAddress()  \n        {  \n            // Create DiscoveryClient  \n            DiscoveryClient discoveryClient = new DiscoveryClient(new UdpDiscoveryEndpoint());  \n  \n            // Find ICalculatorService endpoints              \n            FindResponse findResponse = discoveryClient.Find(new FindCriteria(typeof(ICalculator)));  \n  \n            if (findResponse.Endpoints.Count > 0)  \n            {  \n                return findResponse.Endpoints[0].Address;  \n            }  \n            else  \n            {  \n                return null;  \n            }  \n        }  \n  \n        static void InvokeCalculatorService(EndpointAddress endpointAddress)  \n        {  \n            // Create a client  \n            CalculatorClient client = new CalculatorClient();  \n  \n            // Connect to the discovered service endpoint  \n            client.Endpoint.Address = endpointAddress;  \n  \n            Console.WriteLine(\"Invoking CalculatorService at {0}\", endpointAddress);  \n  \n            double value1 = 100.00D;  \n            double value2 = 15.99D;  \n  \n            // Call the Add service operation.  \n            double result = client.Add(value1, value2);  \n            Console.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result);  \n  \n            // Call the Subtract service operation.  \n            result = client.Subtract(value1, value2);  \n            Console.WriteLine(\"Subtract({0},{1}) = {2}\", value1, value2, result);  \n  \n            // Call the Multiply service operation.  \n            result = client.Multiply(value1, value2);  \n            Console.WriteLine(\"Multiply({0},{1}) = {2}\", value1, value2, result);  \n  \n            // Call the Divide service operation.  \n            result = client.Divide(value1, value2);  \n            Console.WriteLine(\"Divide({0},{1}) = {2}\", value1, value2, result);  \n            Console.WriteLine();  \n  \n            //Closing the client gracefully closes the connection and cleans up resources  \n            client.Close();  \n        }  \n        static void Main(string[] args)  \n        {  \n            EndpointAddress endpointAddress = FindCalculatorServiceAddress();  \n  \n            if (endpointAddress != null)  \n            {  \n                InvokeCalculatorService(endpointAddress);  \n            }  \n  \n            Console.WriteLine(\"Press <ENTER> to exit.\");  \n            Console.ReadLine();  \n  \n        }  \n    }  \n}  \n```  \n\n## See also\n\n- [WCF Discovery Overview](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)\n- [WCF Discovery Object Model](../../../../docs/framework/wcf/feature-details/wcf-discovery-object-model.md)\n","nodes":[{"pos":[4,156],"embed":true,"restype":"x-metadata","content":"title: \"How to: Programmatically Add Discoverability to a WCF Service and Client\"\nms.date: \"03/30/2017\"\nms.assetid: 4f7ae7ab-6fc8-4769-9730-c14d43f7b9b1","nodes":[{"content":"How to: Programmatically Add Discoverability to a WCF Service and Client","nodes":[{"pos":[0,72],"content":"How to: Programmatically Add Discoverability to a WCF Service and Client","nodes":[{"content":"How to: Programmatically Add Discoverability to a WCF Service and Client","pos":[0,72]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[163,235],"content":"How to: Programmatically Add Discoverability to a WCF Service and Client","linkify":"How to: Programmatically Add Discoverability to a WCF Service and Client","nodes":[{"content":"How to: Programmatically Add Discoverability to a WCF Service and Client","pos":[0,72]}]},{"content":"This topic explains how to make a Windows Communication Foundation (WCF) service discoverable.","pos":[236,330]},{"content":"It is based on the <bpt id=\"p1\">[</bpt>Self-Host<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=145523)</ept> sample.","pos":[331,417],"source":" It is based on the [Self-Host](https://go.microsoft.com/fwlink/?LinkId=145523) sample."},{"pos":[427,491],"content":"To configure the existing Self-Host service sample for Discovery","linkify":"To configure the existing Self-Host service sample for Discovery","nodes":[{"content":"To configure the existing Self-Host service sample for Discovery","pos":[0,64]}]},{"content":"Open the Self-Host solution in Visual Studio 2012.","pos":[501,551]},{"content":"The sample is located in the TechnologySamples\\Basic\\Service\\Hosting\\SelfHost directory.","pos":[552,640]},{"content":"Add a reference to <ph id=\"ph1\">`System.ServiceModel.Discovery.dll`</ph> to the service project.","pos":[650,728],"source":"Add a reference to `System.ServiceModel.Discovery.dll` to the service project."},{"content":"You may see an error message saying \"System.","pos":[729,773]},{"content":"ServiceModel.Discovery.dll or one of its dependencies requires a later version of the <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> than the one specified in the project …\" If you see this message, right-click the project in the Solution Explorer and choose <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","pos":[774,1065],"source":" ServiceModel.Discovery.dll or one of its dependencies requires a later version of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] than the one specified in the project …\" If you see this message, right-click the project in the Solution Explorer and choose **Properties**."},{"content":"In the <bpt id=\"p1\">**</bpt>Project Properties<ept id=\"p1\">**</ept> window, make sure that the <bpt id=\"p2\">**</bpt>Target Framework<ept id=\"p2\">**</ept> is <ph id=\"ph1\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph>.","pos":[1066,1225],"source":" In the **Project Properties** window, make sure that the **Target Framework** is [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]."},{"pos":[1235,1300],"content":"Open the Service.cs file and add the following <ph id=\"ph1\">`using`</ph> statement.","source":"Open the Service.cs file and add the following `using` statement."},{"pos":[1382,1533],"content":"In the <ph id=\"ph1\">`Main()`</ph> method, inside the <ph id=\"ph2\">`using`</ph> statement, add a <ph id=\"ph3\">&lt;xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior&gt;</ph> instance to the service host.","source":"In the `Main()` method, inside the `using` statement, add a <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> instance to the service host."},{"pos":[1971,2097],"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior&gt;</ph> specifies that the service it is applied to is discoverable.","source":"The <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior> specifies that the service it is applied to is discoverable."},{"pos":[2107,2288],"content":"Add a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint&gt;</ph> to the service host right after the code that adds the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior&gt;</ph>.","source":"Add a <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> to the service host right after the code that adds the <xref:System.ServiceModel.Discovery.ServiceDiscoveryBehavior>."},{"content":"This code specifies that discovery messages should be sent to the standard UDP discovery endpoint.","pos":[2548,2646]},{"pos":[2656,2726],"content":"To create a client application that uses discovery to call the service","linkify":"To create a client application that uses discovery to call the service","nodes":[{"content":"To create a client application that uses discovery to call the service","pos":[0,70]}]},{"pos":[2736,2810],"content":"Add a new console application to the solution called <ph id=\"ph1\">`DiscoveryClientApp`</ph>.","source":"Add a new console application to the solution called `DiscoveryClientApp`."},{"pos":[2820,2904],"content":"Add a reference to <ph id=\"ph1\">`System.ServiceModel.dll`</ph> and <ph id=\"ph2\">`System.ServiceModel.Discovery.dll`</ph>","source":"Add a reference to `System.ServiceModel.dll` and `System.ServiceModel.Discovery.dll`"},{"content":"Copy the GeneratedClient.cs and App.config files from the existing client project to the new DiscoveryClientApp project.","pos":[2914,3034]},{"content":"To do this, right-click the files in the <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Copy<ept id=\"p2\">**</ept>, and then select the <bpt id=\"p3\">**</bpt>DiscoveryClientApp<ept id=\"p3\">**</ept> project, right-click and select <bpt id=\"p4\">**</bpt>Paste<ept id=\"p4\">**</ept>.","pos":[3035,3201],"source":" To do this, right-click the files in the **Solution Explorer**, select **Copy**, and then select the **DiscoveryClientApp** project, right-click and select **Paste**."},{"content":"Open Program.cs.","pos":[3211,3227]},{"pos":[3237,3274],"content":"Add the following <ph id=\"ph1\">`using`</ph> statements.","source":"Add the following `using` statements."},{"pos":[3433,3516],"content":"Add a static method called <ph id=\"ph1\">`FindCalculatorServiceAddress()`</ph> to the <ph id=\"ph2\">`Program`</ph> class.","source":"Add a static method called `FindCalculatorServiceAddress()` to the `Program` class."},{"pos":[3632,3705],"content":"This method uses discovery to search for the <ph id=\"ph1\">`CalculatorService`</ph> service.","source":"This method uses discovery to search for the `CalculatorService` service."},{"pos":[3715,3931],"content":"Inside the <ph id=\"ph1\">`FindCalculatorServiceAddress`</ph> method, create a new <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClient&gt;</ph> instance, passing in a <ph id=\"ph3\">&lt;xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint&gt;</ph> to the constructor.","source":"Inside the `FindCalculatorServiceAddress` method, create a new <xref:System.ServiceModel.Discovery.DiscoveryClient> instance, passing in a <xref:System.ServiceModel.Discovery.UdpDiscoveryEndpoint> to the constructor."},{"pos":[4176,4345],"content":"This tells WCF that the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClient&gt;</ph> class should use the standard UDP discovery endpoint to send and receive discovery messages.","source":"This tells WCF that the <xref:System.ServiceModel.Discovery.DiscoveryClient> class should use the standard UDP discovery endpoint to send and receive discovery messages."},{"content":"On the next line, call the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A&gt;</ph> method and specify a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.FindCriteria&gt;</ph> instance that contains the service contract you want to search for.","pos":[4355,4581],"source":"On the next line, call the <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A> method and specify a <xref:System.ServiceModel.Discovery.FindCriteria> instance that contains the service contract you want to search for."},{"content":"In this case, specify <ph id=\"ph1\">`ICalculator`</ph>.","pos":[4582,4618],"source":" In this case, specify `ICalculator`."},{"content":"After the call to <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A&gt;</ph>, check to see if there is at least one matching service and return the <ph id=\"ph2\">&lt;xref:System.ServiceModel.EndpointAddress&gt;</ph> of the first matching service.","pos":[4806,5029],"source":"After the call to <xref:System.ServiceModel.Discovery.DiscoveryClient.Find%2A>, check to see if there is at least one matching service and return the <xref:System.ServiceModel.EndpointAddress> of the first matching service."},{"content":"Otherwise return <ph id=\"ph1\">`null`</ph>.","pos":[5030,5054],"source":" Otherwise return `null`."},{"pos":[5255,5330],"content":"Add a static method named <ph id=\"ph1\">`InvokeCalculatorService`</ph> to the <ph id=\"ph2\">`Program`</ph> class.","source":"Add a static method named `InvokeCalculatorService` to the `Program` class."},{"pos":[5461,5575],"content":"This method uses the endpoint address returned from <ph id=\"ph1\">`FindCalculatorServiceAddress`</ph> to call the calculator service.","source":"This method uses the endpoint address returned from `FindCalculatorServiceAddress` to call the calculator service."},{"content":"Inside the <ph id=\"ph1\">`InvokeCalculatorService`</ph> method, create an instance of the <ph id=\"ph2\">`CalculatorServiceClient`</ph> class.","pos":[5585,5688],"source":"Inside the `InvokeCalculatorService` method, create an instance of the `CalculatorServiceClient` class."},{"content":"This class is defined by the <bpt id=\"p1\">[</bpt>Self-Host<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=145523)</ept> sample.","pos":[5689,5785],"source":" This class is defined by the [Self-Host](https://go.microsoft.com/fwlink/?LinkId=145523) sample."},{"content":"It was generated using Svcutil.exe.","pos":[5786,5821]},{"pos":[5941,6069],"content":"On the next line, set the endpoint address of the client to the endpoint address returned from <ph id=\"ph1\">`FindCalculatorServiceAddress()`</ph>.","source":"On the next line, set the endpoint address of the client to the endpoint address returned from `FindCalculatorServiceAddress()`."},{"content":"Immediately after the code for the previous step, call the methods exposed by the calculator service.","pos":[6209,6310]},{"pos":[7306,7400],"content":"Add code to the <ph id=\"ph1\">`Main()`</ph> method in the <ph id=\"ph2\">`Program`</ph> class to call <ph id=\"ph3\">`FindCalculatorServiceAddress`</ph>.","source":"Add code to the `Main()` method in the `Program` class to call `FindCalculatorServiceAddress`."},{"pos":[7563,7698],"content":"On the next line, call the <ph id=\"ph1\">`InvokeCalculatorService()`</ph> and pass in the endpoint address returned from <ph id=\"ph2\">`FindCalculatorServiceAddress()`</ph>.","source":"On the next line, call the `InvokeCalculatorService()` and pass in the endpoint address returned from `FindCalculatorServiceAddress()`."},{"pos":[7920,7943],"content":"To test the application","linkify":"To test the application","nodes":[{"content":"To test the application","pos":[0,23]}]},{"content":"Open an elevated command prompt and run Service.exe.","pos":[7953,8005]},{"content":"Open a command prompt and run Discoveryclientapp.exe.","pos":[8015,8068]},{"content":"The output from service.exe should look like the following output.","pos":[8078,8144]},{"content":"The output from Discoveryclientapp.exe should look like the following output.","pos":[8407,8484]},{"pos":[8780,8787],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following is a listing of the code for this sample.","pos":[8791,8846]},{"content":"Because this code is based on the <bpt id=\"p1\">[</bpt>Self-Host<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=145523)</ept> sample, only those files that are changed are listed.","pos":[8847,8994],"source":" Because this code is based on the [Self-Host](https://go.microsoft.com/fwlink/?LinkId=145523) sample, only those files that are changed are listed."},{"content":"For more information about the Self-Host sample, see <bpt id=\"p1\">[</bpt>Setup Instructions<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=145522)</ept>.","pos":[8995,9117],"source":" For more information about the Self-Host sample, see [Setup Instructions](https://go.microsoft.com/fwlink/?LinkId=145522)."},{"pos":[13155,13163],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[13167,13265],"content":"<bpt id=\"p1\">[</bpt>WCF Discovery Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)</ept>","source":"[WCF Discovery Overview](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)"},{"pos":[13268,13374],"content":"<bpt id=\"p1\">[</bpt>WCF Discovery Object Model<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-discovery-object-model.md)</ept>","source":"[WCF Discovery Object Model](../../../../docs/framework/wcf/feature-details/wcf-discovery-object-model.md)"}]}