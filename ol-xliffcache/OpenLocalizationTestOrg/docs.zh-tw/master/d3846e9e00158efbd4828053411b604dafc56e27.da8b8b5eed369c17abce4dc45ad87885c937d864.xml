{"content":"---\ntitle: \"Controlling .NET Framework Logging\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"CLR ETW events, logging\"\nms.assetid: ce13088e-3095-4f0e-9f6b-fad30bbd3d41\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# Controlling .NET Framework Logging\nYou can use event tracing for Windows (ETW) to record common language runtime (CLR) events. You can create and view traces by using the following tools:  \n  \n-   The [Logman](/windows-server/administration/windows-commands/logman) and [Tracerpt](/windows-server/administration/windows-commands/tracerpt_1) command-line tools, which are included with the Windows operating system.  \n  \n-   The [Xperf](/windows-hardware/test/wpt/xperf-command-line-reference) tools in the [Windows Performance Toolkit](/windows-hardware/test/wpt/). For more information about Xperf, see the [Windows Performance blog](https://go.microsoft.com/fwlink/?LinkId=179509).  \n  \n To capture CLR event information, the CLR provider must be installed on your computer. To confirm that the provider is installed, type `logman query providers` at the command prompt. A list of providers is displayed. This list should contain an entry for the CLR provider, as follows.  \n  \n```  \nProvider                                 GUID  \n-------------------------------------------------------------------------------  \n.NET Common Language Runtime    {E13C0D23-CCBC-4E12-931B-D9CC2EEE27E4}.  \n```  \n  \n If the CLR provider is not listed, you can install it on Windows Vista and later operating systems by using the Windows [Wevtutil](/windows-server/administration/windows-commands/wevtutil) command-line tool. Open the Command Prompt window as an administrator. Change the prompt directory to the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] folder (%WINDIR%\\Microsoft.NET\\Framework[64]\\v4.\\<.NET version>\\ ). This folder contains the CLR-ETW.man file. At the command prompt, type the following command to install the CLR provider:  \n  \n `wevtutil im CLR-ETW.man`  \n  \n## Capturing CLR ETW Events  \n You can use the [Logman](/windows-server/administration/windows-commands/logman) and [Xperf](/windows-hardware/test/wpt/xperf-command-line-reference) command-line tools to capture ETW events, and the [Tracerpt](/windows-server/administration/windows-commands/tracerpt_1) and [Xperf](/windows-hardware/test/wpt/xperf-command-line-reference) tools to decode the trace events.  \n  \n To turn on logging, a user must specify three things:  \n  \n-   The provider to communicate to.  \n  \n-   A 64-bit number that represents a set of keywords. Each keyword represents a set of events that the provider can turn on. The number represents a combined set of keywords to turn on.  \n  \n-   A small number representing the level (verbosity) to log at. Level 1 is the least verbose, and level 5 is the most verbose. Level 0 is a default whose meaning is provider-specific.  \n  \n#### To capture CLR ETW events using Logman  \n  \n1.  At the command prompt, type:  \n  \n     `logman start clrevents -p {e13c0d23-ccbc-4e12-931b-d9cc2eee27e4} 0x1CCBD 0x5 -ets -ct perf`  \n  \n     where:  \n  \n    -   The `-p` parameter identifies the provider GUID.  \n  \n    -   `0x1CCBD` specifies the categories of events that will be raised.  \n  \n    -   `0x5` sets the level of logging (in this case, verbose (5)).  \n  \n    -   The `-ets` parameter instructs Logman to send commands to event tracing sessions.  \n  \n    -   The `-ct perf` parameter specifies that the `QueryPerformanceCounter` function will be used to log the time stamp for each event.  \n  \n2.  To stop logging the events, type:  \n  \n     `logman stop clrevents -ets`  \n  \n     This command creates a binary trace file named clrevents.etl.  \n  \n#### To capture CLR ETW events using Xperf  \n  \n1.  At the command prompt, type:  \n  \n     `xperf -start clr -on e13c0d23-ccbc-4e12-931b-d9cc2eee27e4:0x1CCBD:5 -f clrevents.etl`  \n  \n     where the GUID is the CLR ETW provider GUID, and `0x1CCBD:5` traces everything at and below level 5 (verbose).  \n  \n2.  To stop tracing, type:  \n  \n     `Xperf -stop clr`  \n  \n     This command creates a trace file named clrevents.etl.  \n  \n## Viewing CLR ETW Events  \n Use the commands listed below to view the CLR ETW events. For a description of the events, see [CLR ETW Events](../../../docs/framework/performance/clr-etw-events.md).  \n  \n#### To view CLR ETW events using Tracerpt  \n  \n-   At the command prompt, type:  \n  \n     `tracerpt clrevents.etl`  \n  \n     This command creates two files: dumpfile.xml and summary.txt. The dumpfile.xml file lists all the events, and summary.txt provides a summary of the events.  \n  \n#### To view CLR ETW events using Xperf  \n  \n-   At the command prompt, type:  \n  \n     `xperf clrevents.etl`  \n  \n     This command opens the Xperf ETL file viewer. In this viewer, the CLR events show up in the **Generic Events** view. To display a data grid of events categorized by type, select a region of time in this view, and then right-click and select **Summary**.  \n  \n#### To convert the .etl file to a comma-separated value file  \n  \n-   At the command prompt, type:  \n  \n     `xperf -i clrevents.etl -f clrevents.csv`  \n  \n     This command causes XPerf to dump the events as a comma separated value (CSV) file that you can view. Because different events have different fields, this CSV file is contains more than one header line before the data. The first field of every line is the event type, which indicates which header should be used to determine the rest of the fields.  \n  \n## See also\n\n- [Windows Performance Toolkit](/windows-hardware/test/wpt/)\n- [ETW Events in the Common Language Runtime](../../../docs/framework/performance/etw-events-in-the-common-language-runtime.md)\n","nodes":[{"pos":[4,207],"embed":true,"restype":"x-metadata","content":"title: \"Controlling .NET Framework Logging\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"CLR ETW events, logging\"\nms.assetid: ce13088e-3095-4f0e-9f6b-fad30bbd3d41\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"Controlling .NET Framework Logging","nodes":[{"pos":[0,34],"content":"Controlling .NET Framework Logging","nodes":[{"content":"Controlling .NET Framework Logging","pos":[0,34]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[214,248],"content":"Controlling .NET Framework Logging","linkify":"Controlling .NET Framework Logging","nodes":[{"content":"Controlling .NET Framework Logging","pos":[0,34]}]},{"content":"You can use event tracing for Windows (ETW) to record common language runtime (CLR) events.","pos":[249,340]},{"content":"You can create and view traces by using the following tools:","pos":[341,401]},{"pos":[411,628],"content":"The <bpt id=\"p1\">[</bpt>Logman<ept id=\"p1\">](/windows-server/administration/windows-commands/logman)</ept> and <bpt id=\"p2\">[</bpt>Tracerpt<ept id=\"p2\">](/windows-server/administration/windows-commands/tracerpt_1)</ept> command-line tools, which are included with the Windows operating system.","source":"The [Logman](/windows-server/administration/windows-commands/logman) and [Tracerpt](/windows-server/administration/windows-commands/tracerpt_1) command-line tools, which are included with the Windows operating system."},{"content":"The <bpt id=\"p1\">[</bpt>Xperf<ept id=\"p1\">](/windows-hardware/test/wpt/xperf-command-line-reference)</ept> tools in the <bpt id=\"p2\">[</bpt>Windows Performance Toolkit<ept id=\"p2\">](/windows-hardware/test/wpt/)</ept>.","pos":[638,779],"source":"The [Xperf](/windows-hardware/test/wpt/xperf-command-line-reference) tools in the [Windows Performance Toolkit](/windows-hardware/test/wpt/)."},{"content":"For more information about Xperf, see the <bpt id=\"p1\">[</bpt>Windows Performance blog<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=179509)</ept>.","pos":[780,897],"source":" For more information about Xperf, see the [Windows Performance blog](https://go.microsoft.com/fwlink/?LinkId=179509)."},{"content":"To capture CLR event information, the CLR provider must be installed on your computer.","pos":[904,990]},{"content":"To confirm that the provider is installed, type <ph id=\"ph1\">`logman query providers`</ph> at the command prompt.","pos":[991,1086],"source":" To confirm that the provider is installed, type `logman query providers` at the command prompt."},{"content":"A list of providers is displayed.","pos":[1087,1120]},{"content":"This list should contain an entry for the CLR provider, as follows.","pos":[1121,1188]},{"content":"If the CLR provider is not listed, you can install it on Windows Vista and later operating systems by using the Windows <bpt id=\"p1\">[</bpt>Wevtutil<ept id=\"p1\">](/windows-server/administration/windows-commands/wevtutil)</ept> command-line tool.","pos":[1414,1621],"source":"If the CLR provider is not listed, you can install it on Windows Vista and later operating systems by using the Windows [Wevtutil](/windows-server/administration/windows-commands/wevtutil) command-line tool."},{"content":"Open the Command Prompt window as an administrator.","pos":[1622,1673]},{"content":"Change the prompt directory to the <ph id=\"ph1\">[!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)]</ph> folder (%WINDIR%\\Microsoft.NET\\Framework[64]\\v4.<ph id=\"ph2\">\\&lt;</ph>.NET version&gt;\\ ).","pos":[1674,1839],"source":" Change the prompt directory to the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] folder (%WINDIR%\\Microsoft.NET\\Framework[64]\\v4.\\<.NET version>\\ )."},{"content":"This folder contains the CLR-ETW.man file.","pos":[1840,1882]},{"content":"At the command prompt, type the following command to install the CLR provider:","pos":[1883,1961]},{"pos":[2002,2026],"content":"Capturing CLR ETW Events","linkify":"Capturing CLR ETW Events","nodes":[{"content":"Capturing CLR ETW Events","pos":[0,24]}]},{"pos":[2030,2403],"content":"You can use the <bpt id=\"p1\">[</bpt>Logman<ept id=\"p1\">](/windows-server/administration/windows-commands/logman)</ept> and <bpt id=\"p2\">[</bpt>Xperf<ept id=\"p2\">](/windows-hardware/test/wpt/xperf-command-line-reference)</ept> command-line tools to capture ETW events, and the <bpt id=\"p3\">[</bpt>Tracerpt<ept id=\"p3\">](/windows-server/administration/windows-commands/tracerpt_1)</ept> and <bpt id=\"p4\">[</bpt>Xperf<ept id=\"p4\">](/windows-hardware/test/wpt/xperf-command-line-reference)</ept> tools to decode the trace events.","source":"You can use the [Logman](/windows-server/administration/windows-commands/logman) and [Xperf](/windows-hardware/test/wpt/xperf-command-line-reference) command-line tools to capture ETW events, and the [Tracerpt](/windows-server/administration/windows-commands/tracerpt_1) and [Xperf](/windows-hardware/test/wpt/xperf-command-line-reference) tools to decode the trace events."},{"content":"To turn on logging, a user must specify three things:","pos":[2410,2463]},{"content":"The provider to communicate to.","pos":[2473,2504]},{"content":"A 64-bit number that represents a set of keywords.","pos":[2514,2564]},{"content":"Each keyword represents a set of events that the provider can turn on.","pos":[2565,2635]},{"content":"The number represents a combined set of keywords to turn on.","pos":[2636,2696]},{"content":"A small number representing the level (verbosity) to log at.","pos":[2706,2766]},{"content":"Level 1 is the least verbose, and level 5 is the most verbose.","pos":[2767,2829]},{"content":"Level 0 is a default whose meaning is provider-specific.","pos":[2830,2886]},{"pos":[2897,2935],"content":"To capture CLR ETW events using Logman","linkify":"To capture CLR ETW events using Logman","nodes":[{"content":"To capture CLR ETW events using Logman","pos":[0,38]}]},{"content":"At the command prompt, type:","pos":[2945,2973]},{"content":"where:","pos":[3087,3093]},{"pos":[3107,3155],"content":"The <ph id=\"ph1\">`-p`</ph> parameter identifies the provider GUID.","source":"The `-p` parameter identifies the provider GUID."},{"pos":[3169,3234],"content":"<ph id=\"ph1\">`0x1CCBD`</ph> specifies the categories of events that will be raised.","source":"`0x1CCBD` specifies the categories of events that will be raised."},{"pos":[3248,3308],"content":"<ph id=\"ph1\">`0x5`</ph> sets the level of logging (in this case, verbose (5)).","source":"`0x5` sets the level of logging (in this case, verbose (5))."},{"pos":[3322,3403],"content":"The <ph id=\"ph1\">`-ets`</ph> parameter instructs Logman to send commands to event tracing sessions.","source":"The `-ets` parameter instructs Logman to send commands to event tracing sessions."},{"pos":[3417,3546],"content":"The <ph id=\"ph1\">`-ct perf`</ph> parameter specifies that the <ph id=\"ph2\">`QueryPerformanceCounter`</ph> function will be used to log the time stamp for each event.","source":"The `-ct perf` parameter specifies that the `QueryPerformanceCounter` function will be used to log the time stamp for each event."},{"content":"To stop logging the events, type:","pos":[3556,3589]},{"content":"This command creates a binary trace file named clrevents.etl.","pos":[3639,3700]},{"pos":[3711,3748],"content":"To capture CLR ETW events using Xperf","linkify":"To capture CLR ETW events using Xperf","nodes":[{"content":"To capture CLR ETW events using Xperf","pos":[0,37]}]},{"content":"At the command prompt, type:","pos":[3758,3786]},{"pos":[3894,4004],"content":"where the GUID is the CLR ETW provider GUID, and <ph id=\"ph1\">`0x1CCBD:5`</ph> traces everything at and below level 5 (verbose).","source":"where the GUID is the CLR ETW provider GUID, and `0x1CCBD:5` traces everything at and below level 5 (verbose)."},{"content":"To stop tracing, type:","pos":[4014,4036]},{"content":"This command creates a trace file named clrevents.etl.","pos":[4075,4129]},{"pos":[4138,4160],"content":"Viewing CLR ETW Events","linkify":"Viewing CLR ETW Events","nodes":[{"content":"Viewing CLR ETW Events","pos":[0,22]}]},{"content":"Use the commands listed below to view the CLR ETW events.","pos":[4164,4221]},{"content":"For a description of the events, see <bpt id=\"p1\">[</bpt>CLR ETW Events<ept id=\"p1\">](../../../docs/framework/performance/clr-etw-events.md)</ept>.","pos":[4222,4331],"source":" For a description of the events, see [CLR ETW Events](../../../docs/framework/performance/clr-etw-events.md)."},{"pos":[4342,4379],"content":"To view CLR ETW events using Tracerpt","linkify":"To view CLR ETW events using Tracerpt","nodes":[{"content":"To view CLR ETW events using Tracerpt","pos":[0,37]}]},{"content":"At the command prompt, type:","pos":[4389,4417]},{"content":"This command creates two files: dumpfile.xml and summary.txt.","pos":[4463,4524]},{"content":"The dumpfile.xml file lists all the events, and summary.txt provides a summary of the events.","pos":[4525,4618]},{"pos":[4629,4663],"content":"To view CLR ETW events using Xperf","linkify":"To view CLR ETW events using Xperf","nodes":[{"content":"To view CLR ETW events using Xperf","pos":[0,34]}]},{"content":"At the command prompt, type:","pos":[4673,4701]},{"content":"This command opens the Xperf ETL file viewer.","pos":[4744,4789]},{"content":"In this viewer, the CLR events show up in the <bpt id=\"p1\">**</bpt>Generic Events<ept id=\"p1\">**</ept> view.","pos":[4790,4860],"source":" In this viewer, the CLR events show up in the **Generic Events** view."},{"content":"To display a data grid of events categorized by type, select a region of time in this view, and then right-click and select <bpt id=\"p1\">**</bpt>Summary<ept id=\"p1\">**</ept>.","pos":[4861,4997],"source":" To display a data grid of events categorized by type, select a region of time in this view, and then right-click and select **Summary**."},{"pos":[5008,5064],"content":"To convert the .etl file to a comma-separated value file","linkify":"To convert the .etl file to a comma-separated value file","nodes":[{"content":"To convert the .etl file to a comma-separated value file","pos":[0,56]}]},{"content":"At the command prompt, type:","pos":[5074,5102]},{"content":"This command causes XPerf to dump the events as a comma separated value (CSV) file that you can view.","pos":[5165,5266]},{"content":"Because different events have different fields, this CSV file is contains more than one header line before the data.","pos":[5267,5383]},{"content":"The first field of every line is the event type, which indicates which header should be used to determine the rest of the fields.","pos":[5384,5513]},{"pos":[5522,5530],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5534,5592],"content":"<bpt id=\"p1\">[</bpt>Windows Performance Toolkit<ept id=\"p1\">](/windows-hardware/test/wpt/)</ept>","source":"[Windows Performance Toolkit](/windows-hardware/test/wpt/)"},{"pos":[5595,5720],"content":"<bpt id=\"p1\">[</bpt>ETW Events in the Common Language Runtime<ept id=\"p1\">](../../../docs/framework/performance/etw-events-in-the-common-language-runtime.md)</ept>","source":"[ETW Events in the Common Language Runtime](../../../docs/framework/performance/etw-events-in-the-common-language-runtime.md)"}]}