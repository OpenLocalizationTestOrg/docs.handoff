{"content":"---\ntitle: \"Using a Custom Binding with the Discovery Client Channel\"\nms.date: \"03/30/2017\"\nms.assetid: 36f95e75-04f7-44f3-a995-a0d623624d7f\n---\n# Using a Custom Binding with the Discovery Client Channel\nWhen using a custom binding with the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, you must define a <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> that creates <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances.  \n  \n## Creating a DiscoveryEndpointProvider  \n The <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> is responsible for creating <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances on demand. To define a discovery endpoint provider, derive a class from <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> and override the <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider.GetDiscoveryEndpoint%2A> method and return a new discovery endpoint. The following example shows how to create a discovery endpoint provider.  \n  \n```  \n// Extend DiscoveryEndpointProvider class to change the default DiscoveryEndpoint  \n// to the DiscoveryClientBindingElement. The Discovery ClientChannel   \n// uses this endpoint to send Probe message.  \npublic class UdpDiscoveryEndpointProvider : DiscoveryEndpointProvider  \n{  \n   public override DiscoveryEndpoint GetDiscoveryEndpoint()  \n   {  \n      return new UdpDiscoveryEndpoint(DiscoveryVersion.WSDiscoveryApril2005);  \n   }  \n}  \n```  \n  \n Once you have defined the discovery endpoint provider you can create a custom binding and add the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, which references the discovery endpoint provider as shown in the following example.  \n  \n```  \nDiscoveryClientBindingElement discoveryBindingElement = new DiscoveryClientBindingElement();  \n  \n// Provide the search criteria and the endpoint over which the probe is sent.  \ndiscoveryBindingElement.FindCriteria = new FindCriteria(typeof(ICalculatorService));  \ndiscoveryBindingElement.DiscoveryEndpointProvider = new UdpDiscoveryEndpointProvider();  \n  \nCustomBinding customBinding = new CustomBinding(new NetTcpBinding());  \n// Insert DiscoveryClientBindingElement at the top of the BindingElement stack.  \n// An exception is thrown if this binding element is not at the top.  \ncustomBinding.Elements.Insert(0, discoveryBindingElement);  \n```  \n  \n For more information about using the discovery client channel, see [Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md). \n  \n## See also\n\n- [WCF Discovery Overview](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)\n- [Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)\n","nodes":[{"pos":[4,140],"embed":true,"restype":"x-metadata","content":"title: \"Using a Custom Binding with the Discovery Client Channel\"\nms.date: \"03/30/2017\"\nms.assetid: 36f95e75-04f7-44f3-a995-a0d623624d7f","nodes":[{"content":"Using a Custom Binding with the Discovery Client Channel","nodes":[{"pos":[0,56],"content":"Using a Custom Binding with the Discovery Client Channel","nodes":[{"content":"Using a Custom Binding with the Discovery Client Channel","pos":[0,56]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[147,203],"content":"Using a Custom Binding with the Discovery Client Channel","linkify":"Using a Custom Binding with the Discovery Client Channel","nodes":[{"content":"Using a Custom Binding with the Discovery Client Channel","pos":[0,56]}]},{"pos":[204,468],"content":"When using a custom binding with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement&gt;</ph>, you must define a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider&gt;</ph> that creates <ph id=\"ph3\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpoint&gt;</ph> instances.","source":"When using a custom binding with the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, you must define a <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> that creates <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances."},{"pos":[477,513],"content":"Creating a DiscoveryEndpointProvider","linkify":"Creating a DiscoveryEndpointProvider","nodes":[{"content":"Creating a DiscoveryEndpointProvider","pos":[0,36]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider&gt;</ph> is responsible for creating <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpoint&gt;</ph> instances on demand.","pos":[517,687],"source":"The <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> is responsible for creating <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances on demand."},{"content":"To define a discovery endpoint provider, derive a class from <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider&gt;</ph> and override the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider.GetDiscoveryEndpoint%2A&gt;</ph> method and return a new discovery endpoint.","pos":[688,959],"source":" To define a discovery endpoint provider, derive a class from <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> and override the <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider.GetDiscoveryEndpoint%2A> method and return a new discovery endpoint."},{"content":"The following example shows how to create a discovery endpoint provider.","pos":[960,1032]},{"pos":[1493,1742],"content":"Once you have defined the discovery endpoint provider you can create a custom binding and add the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement&gt;</ph>, which references the discovery endpoint provider as shown in the following example.","source":"Once you have defined the discovery endpoint provider you can create a custom binding and add the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, which references the discovery endpoint provider as shown in the following example."},{"pos":[2408,2598],"content":"For more information about using the discovery client channel, see <bpt id=\"p1\">[</bpt>Using the Discovery Client Channel<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)</ept>.","source":"For more information about using the discovery client channel, see [Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)."},{"pos":[2606,2614],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2618,2716],"content":"<bpt id=\"p1\">[</bpt>WCF Discovery Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)</ept>","source":"[WCF Discovery Overview](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)"},{"pos":[2719,2841],"content":"<bpt id=\"p1\">[</bpt>Using the Discovery Client Channel<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)</ept>","source":"[Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)"}]}