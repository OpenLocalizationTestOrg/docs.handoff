{"content":"---\ntitle: \"Blittable and Non-Blittable Types\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"interop marshaling, blittable types\"\n  - \"blittable types, interop marshaling\"\nms.assetid: d03b050e-2916-49a0-99ba-f19316e5c1b3\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Blittable and Non-Blittable Types\nMost data types have a common representation in both managed and unmanaged memory and do not require special handling by the interop marshaler. These types are called *blittable types* because they do not require conversion when they are passed between managed and unmanaged code.  \n  \n Structures that are returned from platform invoke calls must be blittable types. Platform invoke does not support non-blittable structures as return types.  \n  \n The following types from the <xref:System> namespace are blittable types:  \n  \n-   <xref:System.Byte?displayProperty=nameWithType>  \n  \n-   <xref:System.SByte?displayProperty=nameWithType>  \n  \n-   <xref:System.Int16?displayProperty=nameWithType>  \n  \n-   <xref:System.UInt16?displayProperty=nameWithType>  \n  \n-   <xref:System.Int32?displayProperty=nameWithType>  \n  \n-   <xref:System.UInt32?displayProperty=nameWithType>  \n  \n-   <xref:System.Int64?displayProperty=nameWithType>  \n  \n-   <xref:System.UInt64?displayProperty=nameWithType>  \n  \n-   <xref:System.IntPtr?displayProperty=nameWithType>  \n  \n-   <xref:System.UIntPtr?displayProperty=nameWithType>  \n  \n-   <xref:System.Single?displayProperty=nameWithType>  \n  \n-   <xref:System.Double?displayProperty=nameWithType>  \n  \n The following complex types are also blittable types:  \n  \n-   One-dimensional arrays of blittable types, such as an array of integers. However, a type that contains a variable array of blittable types is not itself blittable.  \n  \n-   Formatted value types that contain only blittable types (and classes if they are marshaled as formatted types). For more information about formatted value types, see [Default marshaling for value types](default-marshaling-behavior.md#default-marshaling-for-value-types).  \n  \n Object references are not blittable. This includes an array of references to objects that are blittable by themselves. For example, you can define a structure that is blittable, but you cannot define a blittable type that contains an array of references to those structures.  \n  \n As an optimization, arrays of blittable types and classes that contain only blittable members are [pinned](../../../docs/framework/interop/copying-and-pinning.md) instead of copied during marshaling. These types can appear to be marshaled as In/Out parameters when the caller and callee are in the same apartment. However, these types are actually marshaled as In parameters, and you must apply the <xref:System.Runtime.InteropServices.InAttribute> and <xref:System.Runtime.InteropServices.OutAttribute> attributes if you want to marshal the argument as an In/Out parameter.  \n  \n Some managed data types require a different representation in an unmanaged environment. These non-blittable data types must be converted into a form that can be marshaled. For example, managed strings are non-blittable types because they must be converted into string objects before they can be marshaled.  \n  \n The following table lists non-blittable types from the <xref:System> namespace. [Delegates](default-marshaling-behavior.md#default-marshaling-for-delegates), which are data structures that refer to a static method or to a class instance, are also non-blittable.  \n  \n|Non-blittable type|Description|  \n|-------------------------|-----------------|  \n|[System.Array](../../../docs/framework/interop/default-marshaling-for-arrays.md)|Converts to a C-style array or a `SAFEARRAY`.|  \n|[System.Boolean](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/t2t3725f(v=vs.100))|Converts to a 1, 2, or 4-byte value with `true` as 1 or -1.|  \n|[System.Char](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/6tyybbf2(v=vs.100))|Converts to a Unicode or ANSI character.|  \n|[System.Class](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/s0968xy8(v=vs.100))|Converts to a class interface.|  \n|[System.Object](../../../docs/framework/interop/default-marshaling-for-objects.md)|Converts to a variant or an interface.|  \n|[System.Mdarray](../../../docs/framework/interop/default-marshaling-for-arrays.md)|Converts to a C-style array or a `SAFEARRAY`.|  \n|[System.String](../../../docs/framework/interop/default-marshaling-for-strings.md)|Converts to a string terminating in a null reference or to a BSTR.|  \n|[System.Valuetype](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/0t2cwe11(v=vs.100))|Converts to a structure with a fixed memory layout.|  \n|[System.Szarray](../../../docs/framework/interop/default-marshaling-for-arrays.md)|Converts to a C-style array or a `SAFEARRAY`.|  \n  \n Class and object types are supported only by COM interop. For corresponding types in [!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)], C#, and C++, see the [Class Library Overview](../../../docs/standard/class-library-overview.md).  \n  \n## See also\n\n- [Default Marshaling Behavior](../../../docs/framework/interop/default-marshaling-behavior.md)\n","nodes":[{"pos":[4,263],"embed":true,"restype":"x-metadata","content":"title: \"Blittable and Non-Blittable Types\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"interop marshaling, blittable types\"\n  - \"blittable types, interop marshaling\"\nms.assetid: d03b050e-2916-49a0-99ba-f19316e5c1b3\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Blittable and Non-Blittable Types","nodes":[{"pos":[0,33],"content":"Blittable and Non-Blittable Types","nodes":[{"content":"Blittable and Non-Blittable Types","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[270,303],"content":"Blittable and Non-Blittable Types","linkify":"Blittable and Non-Blittable Types","nodes":[{"content":"Blittable and Non-Blittable Types","pos":[0,33]}]},{"content":"Most data types have a common representation in both managed and unmanaged memory and do not require special handling by the interop marshaler.","pos":[304,447]},{"content":"These types are called <bpt id=\"p1\">*</bpt>blittable types<ept id=\"p1\">*</ept> because they do not require conversion when they are passed between managed and unmanaged code.","pos":[448,584],"source":" These types are called *blittable types* because they do not require conversion when they are passed between managed and unmanaged code."},{"content":"Structures that are returned from platform invoke calls must be blittable types.","pos":[591,671]},{"content":"Platform invoke does not support non-blittable structures as return types.","pos":[672,746]},{"pos":[753,826],"content":"The following types from the <ph id=\"ph1\">&lt;xref:System&gt;</ph> namespace are blittable types:","source":"The following types from the <xref:System> namespace are blittable types:"},{"content":"The following complex types are also blittable types:","pos":[1536,1589]},{"content":"One-dimensional arrays of blittable types, such as an array of integers.","pos":[1599,1671]},{"content":"However, a type that contains a variable array of blittable types is not itself blittable.","pos":[1672,1762]},{"content":"Formatted value types that contain only blittable types (and classes if they are marshaled as formatted types).","pos":[1772,1883]},{"content":"For more information about formatted value types, see <bpt id=\"p1\">[</bpt>Default marshaling for value types<ept id=\"p1\">](default-marshaling-behavior.md#default-marshaling-for-value-types)</ept>.","pos":[1884,2042],"source":" For more information about formatted value types, see [Default marshaling for value types](default-marshaling-behavior.md#default-marshaling-for-value-types)."},{"content":"Object references are not blittable.","pos":[2049,2085]},{"content":"This includes an array of references to objects that are blittable by themselves.","pos":[2086,2167]},{"content":"For example, you can define a structure that is blittable, but you cannot define a blittable type that contains an array of references to those structures.","pos":[2168,2323]},{"content":"As an optimization, arrays of blittable types and classes that contain only blittable members are <bpt id=\"p1\">[</bpt>pinned<ept id=\"p1\">](../../../docs/framework/interop/copying-and-pinning.md)</ept> instead of copied during marshaling.","pos":[2330,2529],"source":"As an optimization, arrays of blittable types and classes that contain only blittable members are [pinned](../../../docs/framework/interop/copying-and-pinning.md) instead of copied during marshaling."},{"content":"These types can appear to be marshaled as In/Out parameters when the caller and callee are in the same apartment.","pos":[2530,2643]},{"content":"However, these types are actually marshaled as In parameters, and you must apply the <ph id=\"ph1\">&lt;xref:System.Runtime.InteropServices.InAttribute&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Runtime.InteropServices.OutAttribute&gt;</ph> attributes if you want to marshal the argument as an In/Out parameter.","pos":[2644,2904],"source":" However, these types are actually marshaled as In parameters, and you must apply the <xref:System.Runtime.InteropServices.InAttribute> and <xref:System.Runtime.InteropServices.OutAttribute> attributes if you want to marshal the argument as an In/Out parameter."},{"content":"Some managed data types require a different representation in an unmanaged environment.","pos":[2911,2998]},{"content":"These non-blittable data types must be converted into a form that can be marshaled.","pos":[2999,3082]},{"content":"For example, managed strings are non-blittable types because they must be converted into string objects before they can be marshaled.","pos":[3083,3216]},{"content":"The following table lists non-blittable types from the <ph id=\"ph1\">&lt;xref:System&gt;</ph> namespace.","pos":[3223,3302],"source":"The following table lists non-blittable types from the <xref:System> namespace."},{"content":"<bpt id=\"p1\">[</bpt>Delegates<ept id=\"p1\">](default-marshaling-behavior.md#default-marshaling-for-delegates)</ept>, which are data structures that refer to a static method or to a class instance, are also non-blittable.","pos":[3303,3484],"source":"[Delegates](default-marshaling-behavior.md#default-marshaling-for-delegates), which are data structures that refer to a static method or to a class instance, are also non-blittable."},{"content":"Non-blittable type","pos":[3491,3509]},{"content":"Description","pos":[3510,3521]},{"pos":[3574,3654],"content":"<bpt id=\"p1\">[</bpt>System.Array<ept id=\"p1\">](../../../docs/framework/interop/default-marshaling-for-arrays.md)</ept>","source":"[System.Array](../../../docs/framework/interop/default-marshaling-for-arrays.md)"},{"pos":[3655,3700],"content":"Converts to a C-style array or a <ph id=\"ph1\">`SAFEARRAY`</ph>.","source":"Converts to a C-style array or a `SAFEARRAY`."},{"pos":[3705,3810],"content":"<bpt id=\"p1\">[</bpt>System.Boolean<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/t2t3725f(v=vs.100))</ept>","source":"[System.Boolean](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/t2t3725f(v=vs.100))"},{"pos":[3811,3870],"content":"Converts to a 1, 2, or 4-byte value with <ph id=\"ph1\">`true`</ph> as 1 or -1.","source":"Converts to a 1, 2, or 4-byte value with `true` as 1 or -1."},{"pos":[3875,3977],"content":"<bpt id=\"p1\">[</bpt>System.Char<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/6tyybbf2(v=vs.100))</ept>","source":"[System.Char](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/6tyybbf2(v=vs.100))"},{"content":"Converts to a Unicode or ANSI character.","pos":[3978,4018]},{"pos":[4023,4126],"content":"<bpt id=\"p1\">[</bpt>System.Class<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/s0968xy8(v=vs.100))</ept>","source":"[System.Class](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/s0968xy8(v=vs.100))"},{"content":"Converts to a class interface.","pos":[4127,4157]},{"pos":[4162,4244],"content":"<bpt id=\"p1\">[</bpt>System.Object<ept id=\"p1\">](../../../docs/framework/interop/default-marshaling-for-objects.md)</ept>","source":"[System.Object](../../../docs/framework/interop/default-marshaling-for-objects.md)"},{"content":"Converts to a variant or an interface.","pos":[4245,4283]},{"pos":[4288,4370],"content":"<bpt id=\"p1\">[</bpt>System.Mdarray<ept id=\"p1\">](../../../docs/framework/interop/default-marshaling-for-arrays.md)</ept>","source":"[System.Mdarray](../../../docs/framework/interop/default-marshaling-for-arrays.md)"},{"pos":[4371,4416],"content":"Converts to a C-style array or a <ph id=\"ph1\">`SAFEARRAY`</ph>.","source":"Converts to a C-style array or a `SAFEARRAY`."},{"pos":[4421,4503],"content":"<bpt id=\"p1\">[</bpt>System.String<ept id=\"p1\">](../../../docs/framework/interop/default-marshaling-for-strings.md)</ept>","source":"[System.String](../../../docs/framework/interop/default-marshaling-for-strings.md)"},{"content":"Converts to a string terminating in a null reference or to a BSTR.","pos":[4504,4570]},{"pos":[4575,4682],"content":"<bpt id=\"p1\">[</bpt>System.Valuetype<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/0t2cwe11(v=vs.100))</ept>","source":"[System.Valuetype](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/0t2cwe11(v=vs.100))"},{"content":"Converts to a structure with a fixed memory layout.","pos":[4683,4734]},{"pos":[4739,4821],"content":"<bpt id=\"p1\">[</bpt>System.Szarray<ept id=\"p1\">](../../../docs/framework/interop/default-marshaling-for-arrays.md)</ept>","source":"[System.Szarray](../../../docs/framework/interop/default-marshaling-for-arrays.md)"},{"pos":[4822,4867],"content":"Converts to a C-style array or a <ph id=\"ph1\">`SAFEARRAY`</ph>.","source":"Converts to a C-style array or a `SAFEARRAY`."},{"content":"Class and object types are supported only by COM interop.","pos":[4875,4932]},{"content":"For corresponding types in <ph id=\"ph1\">[!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)]</ph>, C#, and C++, see the <bpt id=\"p1\">[</bpt>Class Library Overview<ept id=\"p1\">](../../../docs/standard/class-library-overview.md)</ept>.","pos":[4933,5116],"source":" For corresponding types in [!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)], C#, and C++, see the [Class Library Overview](../../../docs/standard/class-library-overview.md)."},{"pos":[5125,5133],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5137,5230],"content":"<bpt id=\"p1\">[</bpt>Default Marshaling Behavior<ept id=\"p1\">](../../../docs/framework/interop/default-marshaling-behavior.md)</ept>","source":"[Default Marshaling Behavior](../../../docs/framework/interop/default-marshaling-behavior.md)"}]}