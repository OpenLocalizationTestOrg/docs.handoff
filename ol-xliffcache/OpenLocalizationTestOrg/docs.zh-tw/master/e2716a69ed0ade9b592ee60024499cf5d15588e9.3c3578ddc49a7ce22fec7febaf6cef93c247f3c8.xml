{"content":"---\ntitle: \"How to: Use Named Pipes for Network Interprocess Communication | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"message-based communication [.NET Framework], named pipes\"\n  - \"named pipes [.NET Framework]\"\n  - \"pipes [.NET Framework]\"\n  - \"multiple connections via named pipes\"\n  - \"network communications [.NET Framework], named pipes\"\n  - \"impersonation [.NET Framework], named pipes\"\n  - \"full duplex communcation [.NET Framework], named pipes\"\nms.assetid: 4e4d7e64-9f1b-4026-98f7-20488ac7b42b\ncaps.latest.revision: 16\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# How to: Use Named Pipes for Network Interprocess Communication\nNamed pipes provide interprocess communication between a pipe server and one or more pipe clients. They offer more functionality than anonymous pipes, which provide interprocess communication on a local computer. Named pipes support full duplex communication over a network and multiple server instances, message-based communication, and client impersonation, which enables connecting processes to use their own set of permissions on remote servers.  \n  \n To implement name pipes, use the <xref:System.IO.Pipes.NamedPipeServerStream> and <xref:System.IO.Pipes.NamedPipeClientStream> classes.  \n  \n## Example  \n The following example demonstrates how to create a named pipe by using the <xref:System.IO.Pipes.NamedPipeServerStream> class. In this example, the server process creates four threads. Each thread can accept a client connection. The connected client process then supplies the server with a file name. If the client has sufficient permissions, the server process opens the file and sends its contents back to the client.  \n  \n [!code-cpp[System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01](../../../samples/snippets/cpp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/cpp/program.cpp#01)]\n [!code-csharp[System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/cs/Program.cs#01)]\n [!code-vb[System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/vb/program.vb#01)]  \n  \n## Example  \n The following example shows the client process, which uses the <xref:System.IO.Pipes.NamedPipeClientStream> class. The client connects to the server process and sends a file name to the server. The example uses impersonation, so the identity that is running the client application must have permission to access the file. The server then sends the contents of the file back to the client. The file contents are then displayed to the console.  \n  \n [!code-csharp[System.IO.Pipes.NamedPipeClientStream_ImpersonationSample1#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeClientStream_ImpersonationSample1/cs/Program.cs#01)]\n [!code-vb[System.IO.Pipes.NamedPipeClientStream_ImpersonationSample1#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeClientStream_ImpersonationSample1/vb/program.vb#01)]  \n  \n## Robust Programming  \n The client and server processes in this example are intended to run on the same computer, so the server name provided to the <xref:System.IO.Pipes.NamedPipeClientStream> object is `\".\"`. If the client and server processes were on separate computers, `\".\"` would be replaced with the network name of the computer that runs the server process.  \n  \n## See Also  \n <xref:System.Security.Principal.TokenImpersonationLevel>   \n <xref:System.IO.Pipes.NamedPipeServerStream.GetImpersonationUserName%2A>   \n [Pipes](../../../docs/standard/io/pipe-operations.md)   \n [How to: Use Anonymous Pipes for Local Interprocess Communication](../../../docs/standard/io/how-to-use-anonymous-pipes-for-local-interprocess-communication.md)","nodes":[{"pos":[4,736],"nodes":[{"content":"How to: Use Named Pipes for Network Interprocess Communication | Microsoft Docs","nodes":[{"pos":[0,79],"content":"How to: Use Named Pipes for Network Interprocess Communication | Microsoft Docs","nodes":[{"content":"How to: Use Named Pipes for Network Interprocess Communication | Microsoft Docs","pos":[0,79]}]}],"pos":[6,88],"yaml":true}],"content":"title: \"How to: Use Named Pipes for Network Interprocess Communication | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"message-based communication [.NET Framework], named pipes\"\n  - \"named pipes [.NET Framework]\"\n  - \"pipes [.NET Framework]\"\n  - \"multiple connections via named pipes\"\n  - \"network communications [.NET Framework], named pipes\"\n  - \"impersonation [.NET Framework], named pipes\"\n  - \"full duplex communcation [.NET Framework], named pipes\"\nms.assetid: 4e4d7e64-9f1b-4026-98f7-20488ac7b42b\ncaps.latest.revision: 16\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"","yamlblock":true},{"pos":[743,805],"content":"How to: Use Named Pipes for Network Interprocess Communication","linkify":"How to: Use Named Pipes for Network Interprocess Communication","nodes":[{"content":"How to: Use Named Pipes for Network Interprocess Communication","pos":[0,62]}]},{"content":"Named pipes provide interprocess communication between a pipe server and one or more pipe clients.","pos":[806,904]},{"content":"They offer more functionality than anonymous pipes, which provide interprocess communication on a local computer.","pos":[905,1018]},{"content":"Named pipes support full duplex communication over a network and multiple server instances, message-based communication, and client impersonation, which enables connecting processes to use their own set of permissions on remote servers.","pos":[1019,1255]},{"content":"To implement name pipes, use the <ph id=\"ph1\">&lt;xref:System.IO.Pipes.NamedPipeServerStream&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.IO.Pipes.NamedPipeClientStream&gt;</ph> classes.","pos":[1262,1397],"source":"To implement name pipes, use the <xref:System.IO.Pipes.NamedPipeServerStream> and <xref:System.IO.Pipes.NamedPipeClientStream> classes."},{"pos":[1406,1413],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example demonstrates how to create a named pipe by using the <ph id=\"ph1\">&lt;xref:System.IO.Pipes.NamedPipeServerStream&gt;</ph> class.","pos":[1417,1543],"source":"The following example demonstrates how to create a named pipe by using the <xref:System.IO.Pipes.NamedPipeServerStream> class."},{"content":"In this example, the server process creates four threads.","pos":[1544,1601]},{"content":"Each thread can accept a client connection.","pos":[1602,1645]},{"content":"The connected client process then supplies the server with a file name.","pos":[1646,1717]},{"content":"If the client has sufficient permissions, the server process opens the file and sends its contents back to the client.","pos":[1718,1836]},{"pos":[1843,2474],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01<ept id=\"p2\">](../../../samples/snippets/cpp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/cpp/program.cpp#01)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-csharp</bpt><bpt id=\"p4\">[</bpt>System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01<ept id=\"p4\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/cs/Program.cs#01)</ept><ept id=\"p3\">]</ept> <bpt id=\"p5\">[!code-vb</bpt><bpt id=\"p6\">[</bpt>System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01<ept id=\"p6\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/vb/program.vb#01)</ept><ept id=\"p5\">]</ept>","source":"[!code-cpp[System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01](../../../samples/snippets/cpp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/cpp/program.cpp#01)]\n [!code-csharp[System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/cs/Program.cs#01)]\n [!code-vb[System.IO.Pipes.NamedPipeServerStream_ImpersonationSample1#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeServerStream_ImpersonationSample1/vb/program.vb#01)]"},{"pos":[2483,2490],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows the client process, which uses the <ph id=\"ph1\">&lt;xref:System.IO.Pipes.NamedPipeClientStream&gt;</ph> class.","pos":[2494,2608],"source":"The following example shows the client process, which uses the <xref:System.IO.Pipes.NamedPipeClientStream> class."},{"content":"The client connects to the server process and sends a file name to the server.","pos":[2609,2687]},{"content":"The example uses impersonation, so the identity that is running the client application must have permission to access the file.","pos":[2688,2815]},{"content":"The server then sends the contents of the file back to the client.","pos":[2816,2882]},{"content":"The file contents are then displayed to the console.","pos":[2883,2935]},{"pos":[2942,3365],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.IO.Pipes.NamedPipeClientStream_ImpersonationSample1#01<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeClientStream_ImpersonationSample1/cs/Program.cs#01)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.IO.Pipes.NamedPipeClientStream_ImpersonationSample1#01<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeClientStream_ImpersonationSample1/vb/program.vb#01)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[System.IO.Pipes.NamedPipeClientStream_ImpersonationSample1#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeClientStream_ImpersonationSample1/cs/Program.cs#01)]\n [!code-vb[System.IO.Pipes.NamedPipeClientStream_ImpersonationSample1#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.IO.Pipes.NamedPipeClientStream_ImpersonationSample1/vb/program.vb#01)]"},{"pos":[3374,3392],"content":"Robust Programming","linkify":"Robust Programming","nodes":[{"content":"Robust Programming","pos":[0,18]}]},{"content":"The client and server processes in this example are intended to run on the same computer, so the server name provided to the <ph id=\"ph1\">&lt;xref:System.IO.Pipes.NamedPipeClientStream&gt;</ph> object is <ph id=\"ph2\">`\".\"`</ph>.","pos":[3396,3582],"source":"The client and server processes in this example are intended to run on the same computer, so the server name provided to the <xref:System.IO.Pipes.NamedPipeClientStream> object is `\".\"`."},{"content":"If the client and server processes were on separate computers, <ph id=\"ph1\">`\".\"`</ph> would be replaced with the network name of the computer that runs the server process.","pos":[3583,3737],"source":" If the client and server processes were on separate computers, `\".\"` would be replaced with the network name of the computer that runs the server process."},{"pos":[3746,3754],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Security.Principal.TokenImpersonationLevel&gt;</ph>","pos":[3758,3814],"source":"<xref:System.Security.Principal.TokenImpersonationLevel> "},{"content":"<ph id=\"ph1\">&lt;xref:System.IO.Pipes.NamedPipeServerStream.GetImpersonationUserName%2A&gt;</ph>","pos":[3819,3891],"source":"<xref:System.IO.Pipes.NamedPipeServerStream.GetImpersonationUserName%2A> "},{"content":"<bpt id=\"p1\">[</bpt>Pipes<ept id=\"p1\">](../../../docs/standard/io/pipe-operations.md)</ept><ph id=\"ph1\"> </ph>","pos":[3896,3950],"source":"[Pipes](../../../docs/standard/io/pipe-operations.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Use Anonymous Pipes for Local Interprocess Communication<ept id=\"p1\">](../../../docs/standard/io/how-to-use-anonymous-pipes-for-local-interprocess-communication.md)</ept>","pos":[3954,4114],"source":"[How to: Use Anonymous Pipes for Local Interprocess Communication](../../../docs/standard/io/how-to-use-anonymous-pipes-for-local-interprocess-communication.md)"}]}