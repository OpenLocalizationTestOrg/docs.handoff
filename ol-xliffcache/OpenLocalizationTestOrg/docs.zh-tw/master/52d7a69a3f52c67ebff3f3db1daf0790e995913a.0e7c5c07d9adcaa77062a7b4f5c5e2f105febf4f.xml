{"content":"---\ntitle: \"Dependency Properties\"\nms.date: \"10/22/2008\"\nms.technology: dotnet-standard\nms.assetid: 212cfb1e-cec4-4047-94a6-47209b387f6f\nauthor: \"KrzysztofCwalina\"\n---\n# Dependency Properties\nA dependency property (DP) is a regular property that stores its value in a property store instead of storing it in a type variable (field), for example.  \n  \n An attached dependency property is a kind of dependency property modeled as static Get and Set methods representing \"properties\" describing relationships between objects and their containers (e.g., the position of a `Button` object on a `Panel` container).  \n  \n **✓ DO** provide the dependency properties, if you need the properties to support WPF features such as styling, triggers, data binding, animations, dynamic resources, and inheritance.  \n  \n## Dependency Property Design  \n **✓ DO** inherit from <xref:System.Windows.DependencyObject>, or one of its subtypes, when implementing dependency properties. The type provides a very efficient implementation of a property store and automatically supports WPF data binding.  \n  \n **✓ DO** provide a regular CLR property and public static read-only field storing an instance of <xref:System.Windows.DependencyProperty?displayProperty=nameWithType> for each dependency property.  \n  \n **✓ DO** implement dependency properties by calling instance methods <xref:System.Windows.DependencyObject.GetValue%2A?displayProperty=nameWithType> and <xref:System.Windows.DependencyObject.SetValue%2A?displayProperty=nameWithType>.  \n  \n **✓ DO** name the dependency property static field by suffixing the name of the property with \"Property.\"  \n  \n **X DO NOT** set default values of dependency properties explicitly in code; set them in metadata instead.  \n  \n If you set a property default explicitly, you might prevent that property from being set by some implicit means, such as a styling.  \n  \n **X DO NOT** put code in the property accessors other than the standard code to access the static field.  \n  \n That code won’t execute if the property is set by implicit means, such as a styling, because styling uses the static field directly.  \n  \n **X DO NOT** use dependency properties to store secure data. Even private dependency properties can be accessed publicly.  \n  \n## Attached Dependency Property Design  \n Dependency properties described in the preceding section represent intrinsic properties of the declaring type; for example, the `Text` property is a property of `TextButton`, which declares it. A special kind of dependency property is the attached dependency property.  \n  \n A classic example of an attached property is the <xref:System.Windows.Controls.Grid.Column%2A?displayProperty=nameWithType> property. The property represents Button’s (not Grid’s) column position, but it is only relevant if the Button is contained in a Grid, and so it's \"attached\" to Buttons by Grids.  \n  \n```xaml\n<Grid>  \n    <Grid.ColumnDefinitions>  \n        <ColumnDefinition />  \n        <ColumnDefinition />  \n    </Grid.ColumnDefinitions>  \n  \n    <Button Grid.Column=\"0\">Click</Button>  \n    <Button Grid.Column=\"1\">Clack</Button>  \n</Grid>  \n```  \n  \n The definition of an attached property looks mostly like that of a regular dependency property, except that the accessors are represented by static Get and Set methods:  \n  \n```csharp\npublic class Grid {  \n  \n    public static int GetColumn(DependencyObject obj) {  \n        return (int)obj.GetValue(ColumnProperty);  \n    }  \n  \n    public static void SetColumn(DependencyObject obj, int value) {  \n        obj.SetValue(ColumnProperty,value);  \n    }  \n  \n    public static readonly DependencyProperty ColumnProperty =  \n        DependencyProperty.RegisterAttached(  \n            \"Column\",  \n            typeof(int),  \n            typeof(Grid)  \n    );  \n}  \n```  \n  \n## Dependency Property Validation  \n Properties often implement what is called validation. Validation logic executes when an attempt is made to change the value of a property.  \n  \n Unfortunately dependency property accessors cannot contain arbitrary validation code. Instead, dependency property validation logic needs to be specified during property registration.  \n  \n **X DO NOT** put dependency property validation logic in the property’s accessors. Instead, pass a validation callback to `DependencyProperty.Register` method.  \n  \n## Dependency Property Change Notifications  \n **X DO NOT** implement change notification logic in dependency property accessors. Dependency properties have a built-in change notifications feature that must be used by supplying a change notification callback to the <xref:System.Windows.PropertyMetadata>.  \n  \n## Dependency Property Value Coercion  \n Property coercion takes place when the value given to a property setter is modified by the setter before the property store is actually modified.  \n  \n **X DO NOT** implement coercion logic in dependency property accessors.  \n  \n Dependency properties have a built-in coercion feature, and it can be used by supplying a coercion callback to the `PropertyMetadata`.  \n  \n *Portions © 2005, 2009 Microsoft Corporation. All rights reserved.*  \n  \n *Reprinted by permission of Pearson Education, Inc. from [Framework Design Guidelines: Conventions, Idioms, and Patterns for Reusable .NET Libraries, 2nd Edition](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) by Krzysztof Cwalina and Brad Abrams, published Oct 22, 2008 by Addison-Wesley Professional as part of the Microsoft Windows Development Series.*  \n  \n## See also\n\n- [Framework Design Guidelines](../../../docs/standard/design-guidelines/index.md)\n- [Common Design Patterns](../../../docs/standard/design-guidelines/common-design-patterns.md)\n","nodes":[{"pos":[4,163],"embed":true,"restype":"x-metadata","content":"title: \"Dependency Properties\"\nms.date: \"10/22/2008\"\nms.technology: dotnet-standard\nms.assetid: 212cfb1e-cec4-4047-94a6-47209b387f6f\nauthor: \"KrzysztofCwalina\"","nodes":[{"content":"Dependency Properties","nodes":[{"pos":[0,21],"content":"Dependency Properties","nodes":[{"content":"Dependency Properties","pos":[0,21]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[170,191],"content":"Dependency Properties","linkify":"Dependency Properties","nodes":[{"content":"Dependency Properties","pos":[0,21]}]},{"content":"A dependency property (DP) is a regular property that stores its value in a property store instead of storing it in a type variable (field), for example.","pos":[192,345]},{"pos":[352,608],"content":"An attached dependency property is a kind of dependency property modeled as static Get and Set methods representing \"properties\" describing relationships between objects and their containers (e.g., the position of a <ph id=\"ph1\">`Button`</ph> object on a <ph id=\"ph2\">`Panel`</ph> container).","source":"An attached dependency property is a kind of dependency property modeled as static Get and Set methods representing \"properties\" describing relationships between objects and their containers (e.g., the position of a `Button` object on a `Panel` container)."},{"pos":[615,798],"content":"<bpt id=\"p1\">**</bpt>✓ DO<ept id=\"p1\">**</ept> provide the dependency properties, if you need the properties to support WPF features such as styling, triggers, data binding, animations, dynamic resources, and inheritance.","source":"**✓ DO** provide the dependency properties, if you need the properties to support WPF features such as styling, triggers, data binding, animations, dynamic resources, and inheritance."},{"pos":[807,833],"content":"Dependency Property Design","linkify":"Dependency Property Design","nodes":[{"content":"Dependency Property Design","pos":[0,26]}]},{"content":"<bpt id=\"p1\">**</bpt>✓ DO<ept id=\"p1\">**</ept> inherit from <ph id=\"ph1\">&lt;xref:System.Windows.DependencyObject&gt;</ph>, or one of its subtypes, when implementing dependency properties.","pos":[837,963],"source":"**✓ DO** inherit from <xref:System.Windows.DependencyObject>, or one of its subtypes, when implementing dependency properties."},{"content":"The type provides a very efficient implementation of a property store and automatically supports WPF data binding.","pos":[964,1078]},{"pos":[1085,1281],"content":"<bpt id=\"p1\">**</bpt>✓ DO<ept id=\"p1\">**</ept> provide a regular CLR property and public static read-only field storing an instance of <ph id=\"ph1\">&lt;xref:System.Windows.DependencyProperty?displayProperty=nameWithType&gt;</ph> for each dependency property.","source":"**✓ DO** provide a regular CLR property and public static read-only field storing an instance of <xref:System.Windows.DependencyProperty?displayProperty=nameWithType> for each dependency property."},{"pos":[1288,1521],"content":"<bpt id=\"p1\">**</bpt>✓ DO<ept id=\"p1\">**</ept> implement dependency properties by calling instance methods <ph id=\"ph1\">&lt;xref:System.Windows.DependencyObject.GetValue%2A?displayProperty=nameWithType&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Windows.DependencyObject.SetValue%2A?displayProperty=nameWithType&gt;</ph>.","source":"**✓ DO** implement dependency properties by calling instance methods <xref:System.Windows.DependencyObject.GetValue%2A?displayProperty=nameWithType> and <xref:System.Windows.DependencyObject.SetValue%2A?displayProperty=nameWithType>."},{"pos":[1528,1633],"content":"<bpt id=\"p1\">**</bpt>✓ DO<ept id=\"p1\">**</ept> name the dependency property static field by suffixing the name of the property with \"Property.\"","source":"**✓ DO** name the dependency property static field by suffixing the name of the property with \"Property.\""},{"pos":[1640,1746],"content":"<bpt id=\"p1\">**</bpt>X DO NOT<ept id=\"p1\">**</ept> set default values of dependency properties explicitly in code; set them in metadata instead.","source":"**X DO NOT** set default values of dependency properties explicitly in code; set them in metadata instead."},{"content":"If you set a property default explicitly, you might prevent that property from being set by some implicit means, such as a styling.","pos":[1753,1884]},{"pos":[1891,1995],"content":"<bpt id=\"p1\">**</bpt>X DO NOT<ept id=\"p1\">**</ept> put code in the property accessors other than the standard code to access the static field.","source":"**X DO NOT** put code in the property accessors other than the standard code to access the static field."},{"content":"That code won’t execute if the property is set by implicit means, such as a styling, because styling uses the static field directly.","pos":[2002,2134]},{"content":"<bpt id=\"p1\">**</bpt>X DO NOT<ept id=\"p1\">**</ept> use dependency properties to store secure data.","pos":[2141,2201],"source":"**X DO NOT** use dependency properties to store secure data."},{"content":"Even private dependency properties can be accessed publicly.","pos":[2202,2262]},{"pos":[2271,2306],"content":"Attached Dependency Property Design","linkify":"Attached Dependency Property Design","nodes":[{"content":"Attached Dependency Property Design","pos":[0,35]}]},{"content":"Dependency properties described in the preceding section represent intrinsic properties of the declaring type; for example, the <ph id=\"ph1\">`Text`</ph> property is a property of <ph id=\"ph2\">`TextButton`</ph>, which declares it.","pos":[2310,2503],"source":"Dependency properties described in the preceding section represent intrinsic properties of the declaring type; for example, the `Text` property is a property of `TextButton`, which declares it."},{"content":"A special kind of dependency property is the attached dependency property.","pos":[2504,2578]},{"content":"A classic example of an attached property is the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Grid.Column%2A?displayProperty=nameWithType&gt;</ph> property.","pos":[2585,2718],"source":"A classic example of an attached property is the <xref:System.Windows.Controls.Grid.Column%2A?displayProperty=nameWithType> property."},{"content":"The property represents Button’s (not Grid’s) column position, but it is only relevant if the Button is contained in a Grid, and so it's \"attached\" to Buttons by Grids.","pos":[2719,2887]},{"content":"The definition of an attached property looks mostly like that of a regular dependency property, except that the accessors are represented by static Get and Set methods:","pos":[3148,3316]},{"pos":[3820,3850],"content":"Dependency Property Validation","linkify":"Dependency Property Validation","nodes":[{"content":"Dependency Property Validation","pos":[0,30]}]},{"content":"Properties often implement what is called validation.","pos":[3854,3907]},{"content":"Validation logic executes when an attempt is made to change the value of a property.","pos":[3908,3992]},{"content":"Unfortunately dependency property accessors cannot contain arbitrary validation code.","pos":[3999,4084]},{"content":"Instead, dependency property validation logic needs to be specified during property registration.","pos":[4085,4182]},{"content":"<bpt id=\"p1\">**</bpt>X DO NOT<ept id=\"p1\">**</ept> put dependency property validation logic in the property’s accessors.","pos":[4189,4271],"source":"**X DO NOT** put dependency property validation logic in the property’s accessors."},{"content":"Instead, pass a validation callback to <ph id=\"ph1\">`DependencyProperty.Register`</ph> method.","pos":[4272,4348],"source":" Instead, pass a validation callback to `DependencyProperty.Register` method."},{"pos":[4357,4397],"content":"Dependency Property Change Notifications","linkify":"Dependency Property Change Notifications","nodes":[{"content":"Dependency Property Change Notifications","pos":[0,40]}]},{"content":"<bpt id=\"p1\">**</bpt>X DO NOT<ept id=\"p1\">**</ept> implement change notification logic in dependency property accessors.","pos":[4401,4483],"source":"**X DO NOT** implement change notification logic in dependency property accessors."},{"content":"Dependency properties have a built-in change notifications feature that must be used by supplying a change notification callback to the <ph id=\"ph1\">&lt;xref:System.Windows.PropertyMetadata&gt;</ph>.","pos":[4484,4659],"source":" Dependency properties have a built-in change notifications feature that must be used by supplying a change notification callback to the <xref:System.Windows.PropertyMetadata>."},{"pos":[4668,4702],"content":"Dependency Property Value Coercion","linkify":"Dependency Property Value Coercion","nodes":[{"content":"Dependency Property Value Coercion","pos":[0,34]}]},{"content":"Property coercion takes place when the value given to a property setter is modified by the setter before the property store is actually modified.","pos":[4706,4851]},{"pos":[4858,4929],"content":"<bpt id=\"p1\">**</bpt>X DO NOT<ept id=\"p1\">**</ept> implement coercion logic in dependency property accessors.","source":"**X DO NOT** implement coercion logic in dependency property accessors."},{"pos":[4936,5070],"content":"Dependency properties have a built-in coercion feature, and it can be used by supplying a coercion callback to the <ph id=\"ph1\">`PropertyMetadata`</ph>.","source":"Dependency properties have a built-in coercion feature, and it can be used by supplying a coercion callback to the `PropertyMetadata`."},{"pos":[5077,5144],"content":"<bpt id=\"p1\">*</bpt>Portions © 2005, 2009 Microsoft Corporation. All rights reserved.<ept id=\"p1\">*</ept>","source":"*Portions © 2005, 2009 Microsoft Corporation. All rights reserved.*"},{"pos":[5151,5556],"content":"<bpt id=\"p1\">*</bpt>Reprinted by permission of Pearson Education, Inc. from <bpt id=\"p2\">[</bpt>Framework Design Guidelines: Conventions, Idioms, and Patterns for Reusable .NET Libraries, 2nd Edition<ept id=\"p2\">](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619)</ept> by Krzysztof Cwalina and Brad Abrams, published Oct 22, 2008 by Addison-Wesley Professional as part of the Microsoft Windows Development Series.<ept id=\"p1\">*</ept>","source":"*Reprinted by permission of Pearson Education, Inc. from [Framework Design Guidelines: Conventions, Idioms, and Patterns for Reusable .NET Libraries, 2nd Edition](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) by Krzysztof Cwalina and Brad Abrams, published Oct 22, 2008 by Addison-Wesley Professional as part of the Microsoft Windows Development Series.*"},{"pos":[5565,5573],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5577,5657],"content":"<bpt id=\"p1\">[</bpt>Framework Design Guidelines<ept id=\"p1\">](../../../docs/standard/design-guidelines/index.md)</ept>","source":"[Framework Design Guidelines](../../../docs/standard/design-guidelines/index.md)"},{"pos":[5660,5752],"content":"<bpt id=\"p1\">[</bpt>Common Design Patterns<ept id=\"p1\">](../../../docs/standard/design-guidelines/common-design-patterns.md)</ept>","source":"[Common Design Patterns](../../../docs/standard/design-guidelines/common-design-patterns.md)"}]}