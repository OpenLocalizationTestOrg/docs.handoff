{"content":"---\ntitle: \"How to: Use a Custom User Name and Password Validator\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"WCF, username and password\"\nms.assetid: 8e08b74b-fa44-4018-b63d-0d0805f85e3f\n---\n# How to: Use a Custom User Name and Password Validator\nBy default, when a user name and password is used for authentication, Windows Communication Foundation (WCF) uses Windows to validate the user name and password. However, WCF allows for custom user name and password authentication schemes, also known as *validators*. To incorporate a custom user name and password validator, create a class that derives from <xref:System.IdentityModel.Selectors.UserNamePasswordValidator> and then configure it.  \n  \n For a sample application, see [User Name Password Validator](../../../../docs/framework/wcf/samples/user-name-password-validator.md).  \n  \n### To create a custom user name and password validator  \n  \n1.  Create a class that derives from <xref:System.IdentityModel.Selectors.UserNamePasswordValidator>.  \n  \n     [!code-csharp[C_CustomUsernameAndPasswordValidator#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customusernameandpasswordvalidator/cs/service.cs#3)]\n     [!code-vb[C_CustomUsernameAndPasswordValidator#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customusernameandpasswordvalidator/vb/service.vb#3)]  \n  \n2.  Implement the custom authentication scheme by overriding the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method.  \n  \n     Do not use the code in the following example that overrides the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method in a production environment. Replace the code with your custom user name and password validation scheme, which might involve retrieving user name and password pairs from a database.  \n  \n     To return authentication errors back to the client, throw a <xref:System.ServiceModel.FaultException> in the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method.  \n  \n     [!code-csharp[C_CustomUsernameAndPasswordValidator#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customusernameandpasswordvalidator/cs/service.cs#4)]\n     [!code-vb[C_CustomUsernameAndPasswordValidator#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customusernameandpasswordvalidator/vb/service.vb#4)]  \n  \n### To configure a service to use a custom user name and password validator  \n  \n1.  Configure a binding that uses message security over any transport or transport-level security over HTTP(S).  \n  \n     When using message security, add one of the system-provided bindings, such as a  [\\<wsHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md), or a [\\<customBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md) that supports message security and the `UserName` credential type.  \n  \n     When using transport-level security over HTTP(S), add either the [\\<wsHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md) or [\\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md), a [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md) or a [\\<customBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md) that uses HTTP(S) and the `Basic` authentication scheme.  \n  \n    > [!NOTE]\n    >  When [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later is used, you can use a custom username and password validator with message and transport security. With [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], a custom username and password validator can only be used with message security.  \n  \n    > [!TIP]\n    >  For more information on using \\<netTcpBinding> in this context, see [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-nettcpbinding.md)  \n  \n    1.  In the configuration file, under the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element, add a [\\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element.  \n  \n    2.  Add a [\\<wsHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md) or [\\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element to the bindings section. For more information about creating an WCF binding element, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).  \n  \n    3.  Set the `mode` attribute of the [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-wshttpbinding.md) or [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-basichttpbinding.md) to `Message`, `Transport`, or `TransportWithMessageCredential`.  \n  \n    4.  Set the `clientCredentialType` attribute of the [\\<message>](../../../../docs/framework/configure-apps/file-schema/wcf/message-of-wshttpbinding.md) or [\\<transport>](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-wshttpbinding.md).  \n  \n         When using message security, set the `clientCredentialType` attribute of the [\\<message>](../../../../docs/framework/configure-apps/file-schema/wcf/message-of-wshttpbinding.md) to `UserName`.  \n  \n         When using transport-level security over HTTP(S), set the `clientCredentialType` attribute of the [\\<transport>](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-wshttpbinding.md) or [\\<transport>](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-basichttpbinding.md) to `Basic`.  \n  \n        > [!NOTE]\n        >  When a WCF service is hosted in Internet Information Services (IIS) using transport-level security and the <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.UserNamePasswordValidationMode%2A> property is set to <xref:System.ServiceModel.Security.UserNamePasswordValidationMode.Custom>, the custom authentication scheme uses a subset of Windows authentication. That is because in this scenario, IIS performs Windows authentication prior to WCF invoking the custom authenticator.  \n  \n     For more information about creating an WCF binding element, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).  \n  \n     The following example shows the configuration code for the binding.  \n  \n    ```xml  \n    <system.serviceModel>   \n      <bindings>  \n      <wsHttpBinding>  \n          <binding name=\"Binding1\">  \n            <security mode=\"Message\">  \n              <message clientCredentialType=\"UserName\" />  \n            </security>  \n          </binding>          \n        </wsHttpBinding>  \n      </bindings>  \n    </system.serviceModel>  \n    ```  \n  \n2.  Configure a behavior that specifies that a custom user name and password validator is used to validate user name and password pairs for incoming <xref:System.IdentityModel.Tokens.UserNameSecurityToken> security tokens.  \n  \n    1.  As a child to the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element, add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element.  \n  \n    2.  Add a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element.  \n  \n    3.  Add a [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element and set the `name` attribute to an appropriate value.  \n  \n    4.  Add a [\\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) to the [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element.  \n  \n    5.  Add a [\\<userNameAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/usernameauthentication.md) to the [\\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).  \n  \n    6.  Set the `userNamePasswordValidationMode` to `Custom`.  \n  \n        > [!IMPORTANT]\n        >  If the `userNamePasswordValidationMode` value is not set, WCF uses Windows authentication instead of the custom user name and password validator.  \n  \n    7.  Set the `customUserNamePasswordValidatorType` to the type that represents your custom user name and password validator.  \n  \n     The following example shows the `<serviceCredentials>` fragment to this point.  \n  \n    ```xml  \n    <serviceCredentials>  \n      <userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"Microsoft.ServiceModel.Samples.CalculatorService.CustomUserNameValidator, service\" />  \n    </serviceCredentials>  \n    ```  \n  \n## Example  \n The following code example demonstrates how to create a custom user name and password validator. Do not use the code that overrides the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method in a production environment. Replace the code with your custom user name and password validation scheme, which might involve retrieving user name and password pairs from a database.  \n  \n [!code-csharp[C_CustomUsernameAndPasswordValidator#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customusernameandpasswordvalidator/cs/service.cs#1)]\n [!code-vb[C_CustomUsernameAndPasswordValidator#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customusernameandpasswordvalidator/vb/service.vb#1)]  \n[!code-csharp[C_CustomUsernameAndPasswordValidator#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customusernameandpasswordvalidator/cs/service.cs#2)]\n[!code-vb[C_CustomUsernameAndPasswordValidator#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customusernameandpasswordvalidator/vb/service.vb#2)]  \n  \n## See also\n\n- <xref:System.IdentityModel.Selectors.UserNamePasswordValidator>\n- [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)\n- [Authentication](../../../../docs/framework/wcf/feature-details/authentication-in-wcf.md)\n","nodes":[{"pos":[4,226],"embed":true,"restype":"x-metadata","content":"title: \"How to: Use a Custom User Name and Password Validator\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"WCF, username and password\"\nms.assetid: 8e08b74b-fa44-4018-b63d-0d0805f85e3f","nodes":[{"content":"How to: Use a Custom User Name and Password Validator","nodes":[{"pos":[0,53],"content":"How to: Use a Custom User Name and Password Validator","nodes":[{"content":"How to: Use a Custom User Name and Password Validator","pos":[0,53]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[233,286],"content":"How to: Use a Custom User Name and Password Validator","linkify":"How to: Use a Custom User Name and Password Validator","nodes":[{"content":"How to: Use a Custom User Name and Password Validator","pos":[0,53]}]},{"content":"By default, when a user name and password is used for authentication, Windows Communication Foundation (WCF) uses Windows to validate the user name and password.","pos":[287,448]},{"content":"However, WCF allows for custom user name and password authentication schemes, also known as <bpt id=\"p1\">*</bpt>validators<ept id=\"p1\">*</ept>.","pos":[449,554],"source":" However, WCF allows for custom user name and password authentication schemes, also known as *validators*."},{"content":"To incorporate a custom user name and password validator, create a class that derives from <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator&gt;</ph> and then configure it.","pos":[555,732],"source":" To incorporate a custom user name and password validator, create a class that derives from <xref:System.IdentityModel.Selectors.UserNamePasswordValidator> and then configure it."},{"pos":[739,872],"content":"For a sample application, see <bpt id=\"p1\">[</bpt>User Name Password Validator<ept id=\"p1\">](../../../../docs/framework/wcf/samples/user-name-password-validator.md)</ept>.","source":"For a sample application, see [User Name Password Validator](../../../../docs/framework/wcf/samples/user-name-password-validator.md)."},{"pos":[882,933],"content":"To create a custom user name and password validator","linkify":"To create a custom user name and password validator","nodes":[{"content":"To create a custom user name and password validator","pos":[0,51]}]},{"pos":[943,1040],"content":"Create a class that derives from <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator&gt;</ph>.","source":"Create a class that derives from <xref:System.IdentityModel.Selectors.UserNamePasswordValidator>."},{"pos":[1051,1378],"content":"[!code-csharp[C_CustomUsernameAndPasswordValidator#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customusernameandpasswordvalidator/cs/service.cs#3)]\n [!code-vb[C_CustomUsernameAndPasswordValidator#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customusernameandpasswordvalidator/vb/service.vb#3)]","leadings":["","    "],"nodes":[]},{"pos":[1388,1532],"content":"Implement the custom authentication scheme by overriding the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A&gt;</ph> method.","source":"Implement the custom authentication scheme by overriding the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method."},{"content":"Do not use the code in the following example that overrides the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A&gt;</ph> method in a production environment.","pos":[1543,1718],"source":"Do not use the code in the following example that overrides the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method in a production environment."},{"content":"Replace the code with your custom user name and password validation scheme, which might involve retrieving user name and password pairs from a database.","pos":[1719,1871]},{"pos":[1882,2074],"content":"To return authentication errors back to the client, throw a <ph id=\"ph1\">&lt;xref:System.ServiceModel.FaultException&gt;</ph> in the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A&gt;</ph> method.","source":"To return authentication errors back to the client, throw a <xref:System.ServiceModel.FaultException> in the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method."},{"pos":[2085,2412],"content":"[!code-csharp[C_CustomUsernameAndPasswordValidator#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customusernameandpasswordvalidator/cs/service.cs#4)]\n [!code-vb[C_CustomUsernameAndPasswordValidator#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customusernameandpasswordvalidator/vb/service.vb#4)]","leadings":["","    "],"nodes":[]},{"pos":[2422,2493],"content":"To configure a service to use a custom user name and password validator","linkify":"To configure a service to use a custom user name and password validator","nodes":[{"content":"To configure a service to use a custom user name and password validator","pos":[0,71]}]},{"content":"Configure a binding that uses message security over any transport or transport-level security over HTTP(S).","pos":[2503,2610]},{"pos":[2621,2964],"content":"When using message security, add one of the system-provided bindings, such as a  <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>wsHttpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md)</ept>, or a <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>customBinding&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)</ept> that supports message security and the <ph id=\"ph3\">`UserName`</ph> credential type.","source":"When using message security, add one of the system-provided bindings, such as a  [\\<wsHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md), or a [\\<customBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md) that supports message security and the `UserName` credential type."},{"pos":[2975,3493],"content":"When using transport-level security over HTTP(S), add either the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>wsHttpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md)</ept> or <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>basicHttpBinding&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)</ept>, a <bpt id=\"p3\">[</bpt><ph id=\"ph3\">\\&lt;</ph>netTcpBinding&gt;<ept id=\"p3\">](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md)</ept> or a <bpt id=\"p4\">[</bpt><ph id=\"ph4\">\\&lt;</ph>customBinding&gt;<ept id=\"p4\">](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)</ept> that uses HTTP(S) and the <ph id=\"ph5\">`Basic`</ph> authentication scheme.","source":"When using transport-level security over HTTP(S), add either the [\\<wsHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md) or [\\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md), a [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md) or a [\\<customBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md) that uses HTTP(S) and the `Basic` authentication scheme."},{"pos":[3505,3847],"content":"[!NOTE]\nWhen [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later is used, you can use a custom username and password validator with message and transport security. With [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], a custom username and password validator can only be used with message security.","leadings":["","    >  "],"nodes":[{"content":"When [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later is used, you can use a custom username and password validator with message and transport security. With [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], a custom username and password validator can only be used with message security.","pos":[8,335],"nodes":[{"content":"When <ph id=\"ph1\">[!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)]</ph> or later is used, you can use a custom username and password validator with message and transport security.","pos":[0,178],"source":"When [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later is used, you can use a custom username and password validator with message and transport security."},{"content":"With <ph id=\"ph1\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph>, a custom username and password validator can only be used with message security.","pos":[179,327],"source":" With [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], a custom username and password validator can only be used with message security."}]}]},{"pos":[3859,4042],"content":"[!TIP]\nFor more information on using \\<netTcpBinding> in this context, see [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-nettcpbinding.md)","leadings":["","    >  "],"nodes":[{"content":"For more information on using <ph id=\"ph1\">\\&lt;</ph>netTcpBinding&gt; in this context, see <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>security&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-nettcpbinding.md)</ept>","pos":[7,176],"source":"For more information on using \\<netTcpBinding> in this context, see [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-nettcpbinding.md)"}]},{"pos":[4056,4308],"content":"In the configuration file, under the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>system.serviceModel&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md)</ept> element, add a <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>bindings&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md)</ept> element.","source":"In the configuration file, under the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element, add a [\\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element."},{"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>wsHttpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md)</ept> or <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>basicHttpBinding&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md)</ept> element to the bindings section.","pos":[4322,4559],"source":"Add a [\\<wsHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wshttpbinding.md) or [\\<basicHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element to the bindings section."},{"content":"For more information about creating an WCF binding element, see <bpt id=\"p1\">[</bpt>How to: Specify a Service Binding in Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)</ept>.","pos":[4560,4762],"source":" For more information about creating an WCF binding element, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)."},{"pos":[4776,5081],"content":"Set the <ph id=\"ph1\">`mode`</ph> attribute of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>security&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-wshttpbinding.md)</ept> or <bpt id=\"p2\">[</bpt><ph id=\"ph3\">\\&lt;</ph>security&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-basichttpbinding.md)</ept> to <ph id=\"ph4\">`Message`</ph>, <ph id=\"ph5\">`Transport`</ph>, or <ph id=\"ph6\">`TransportWithMessageCredential`</ph>.","source":"Set the `mode` attribute of the [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-wshttpbinding.md) or [\\<security>](../../../../docs/framework/configure-apps/file-schema/wcf/security-of-basichttpbinding.md) to `Message`, `Transport`, or `TransportWithMessageCredential`."},{"pos":[5095,5350],"content":"Set the <ph id=\"ph1\">`clientCredentialType`</ph> attribute of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>message&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/message-of-wshttpbinding.md)</ept> or <bpt id=\"p2\">[</bpt><ph id=\"ph3\">\\&lt;</ph>transport&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-wshttpbinding.md)</ept>.","source":"Set the `clientCredentialType` attribute of the [\\<message>](../../../../docs/framework/configure-apps/file-schema/wcf/message-of-wshttpbinding.md) or [\\<transport>](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-wshttpbinding.md)."},{"pos":[5365,5556],"content":"When using message security, set the <ph id=\"ph1\">`clientCredentialType`</ph> attribute of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>message&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/message-of-wshttpbinding.md)</ept> to <ph id=\"ph3\">`UserName`</ph>.","source":"When using message security, set the `clientCredentialType` attribute of the [\\<message>](../../../../docs/framework/configure-apps/file-schema/wcf/message-of-wshttpbinding.md) to `UserName`."},{"pos":[5571,5894],"content":"When using transport-level security over HTTP(S), set the <ph id=\"ph1\">`clientCredentialType`</ph> attribute of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>transport&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-wshttpbinding.md)</ept> or <bpt id=\"p2\">[</bpt><ph id=\"ph3\">\\&lt;</ph>transport&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-basichttpbinding.md)</ept> to <ph id=\"ph4\">`Basic`</ph>.","source":"When using transport-level security over HTTP(S), set the `clientCredentialType` attribute of the [\\<transport>](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-wshttpbinding.md) or [\\<transport>](../../../../docs/framework/configure-apps/file-schema/wcf/transport-of-basichttpbinding.md) to `Basic`."},{"pos":[5910,6425],"content":"[!NOTE]\nWhen a WCF service is hosted in Internet Information Services (IIS) using transport-level security and the <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.UserNamePasswordValidationMode%2A> property is set to <xref:System.ServiceModel.Security.UserNamePasswordValidationMode.Custom>, the custom authentication scheme uses a subset of Windows authentication. That is because in this scenario, IIS performs Windows authentication prior to WCF invoking the custom authenticator.","leadings":["","        >  "],"nodes":[{"content":"When a WCF service is hosted in Internet Information Services (IIS) using transport-level security and the <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.UserNamePasswordValidationMode%2A> property is set to <xref:System.ServiceModel.Security.UserNamePasswordValidationMode.Custom>, the custom authentication scheme uses a subset of Windows authentication. That is because in this scenario, IIS performs Windows authentication prior to WCF invoking the custom authenticator.","pos":[8,504],"nodes":[{"content":"When a WCF service is hosted in Internet Information Services (IIS) using transport-level security and the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.UserNamePasswordValidationMode%2A&gt;</ph> property is set to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.UserNamePasswordValidationMode.Custom&gt;</ph>, the custom authentication scheme uses a subset of Windows authentication.","pos":[0,378],"source":"When a WCF service is hosted in Internet Information Services (IIS) using transport-level security and the <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.UserNamePasswordValidationMode%2A> property is set to <xref:System.ServiceModel.Security.UserNamePasswordValidationMode.Custom>, the custom authentication scheme uses a subset of Windows authentication."},{"content":"That is because in this scenario, IIS performs Windows authentication prior to WCF invoking the custom authenticator.","pos":[379,496]}]}]},{"pos":[6436,6638],"content":"For more information about creating an WCF binding element, see <bpt id=\"p1\">[</bpt>How to: Specify a Service Binding in Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)</ept>.","source":"For more information about creating an WCF binding element, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)."},{"content":"The following example shows the configuration code for the binding.","pos":[6649,6716]},{"pos":[7095,7313],"content":"Configure a behavior that specifies that a custom user name and password validator is used to validate user name and password pairs for incoming <ph id=\"ph1\">&lt;xref:System.IdentityModel.Tokens.UserNameSecurityToken&gt;</ph> security tokens.","source":"Configure a behavior that specifies that a custom user name and password validator is used to validate user name and password pairs for incoming <xref:System.IdentityModel.Tokens.UserNameSecurityToken> security tokens."},{"pos":[7327,7562],"content":"As a child to the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>system.serviceModel&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md)</ept> element, add a <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>behaviors&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md)</ept> element.","source":"As a child to the [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element, add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element."},{"pos":[7576,7785],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceBehaviors&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)</ept> to the <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>behaviors&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md)</ept> element.","source":"Add a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element."},{"pos":[7799,7971],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behavior&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md)</ept> element and set the <ph id=\"ph2\">`name`</ph> attribute to an appropriate value.","source":"Add a [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element and set the `name` attribute to an appropriate value."},{"pos":[7985,8216],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceCredentials&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)</ept> to the <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>behavior&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md)</ept> element.","source":"Add a [\\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) to the [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element."},{"pos":[8230,8461],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>userNameAuthentication&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/usernameauthentication.md)</ept> to the <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>serviceCredentials&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)</ept>.","source":"Add a [\\<userNameAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/usernameauthentication.md) to the [\\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)."},{"pos":[8475,8528],"content":"Set the <ph id=\"ph1\">`userNamePasswordValidationMode`</ph> to <ph id=\"ph2\">`Custom`</ph>.","source":"Set the `userNamePasswordValidationMode` to `Custom`."},{"pos":[8544,8713],"content":"[!IMPORTANT]\nIf the `userNamePasswordValidationMode` value is not set, WCF uses Windows authentication instead of the custom user name and password validator.","leadings":["","        >  "],"nodes":[{"content":"If the <ph id=\"ph1\">`userNamePasswordValidationMode`</ph> value is not set, WCF uses Windows authentication instead of the custom user name and password validator.","pos":[13,158],"source":"If the `userNamePasswordValidationMode` value is not set, WCF uses Windows authentication instead of the custom user name and password validator."}]},{"pos":[8727,8846],"content":"Set the <ph id=\"ph1\">`customUserNamePasswordValidatorType`</ph> to the type that represents your custom user name and password validator.","source":"Set the `customUserNamePasswordValidatorType` to the type that represents your custom user name and password validator."},{"pos":[8857,8935],"content":"The following example shows the <ph id=\"ph1\">`&lt;serviceCredentials&gt;`</ph> fragment to this point.","source":"The following example shows the `<serviceCredentials>` fragment to this point."},{"pos":[9220,9227],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example demonstrates how to create a custom user name and password validator.","pos":[9231,9327]},{"content":"Do not use the code that overrides the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A&gt;</ph> method in a production environment.","pos":[9328,9478],"source":" Do not use the code that overrides the <xref:System.IdentityModel.Selectors.UserNamePasswordValidator.Validate%2A> method in a production environment."},{"content":"Replace the code with your custom user name and password validation scheme, which might involve retrieving user name and password pairs from a database.","pos":[9479,9631]},{"pos":[10295,10303],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10373,10511],"content":"<bpt id=\"p1\">[</bpt>How to: Use the ASP.NET Membership Provider<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)</ept>","source":"[How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)"},{"pos":[10514,10603],"content":"<bpt id=\"p1\">[</bpt>Authentication<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/authentication-in-wcf.md)</ept>","source":"[Authentication](../../../../docs/framework/wcf/feature-details/authentication-in-wcf.md)"}]}