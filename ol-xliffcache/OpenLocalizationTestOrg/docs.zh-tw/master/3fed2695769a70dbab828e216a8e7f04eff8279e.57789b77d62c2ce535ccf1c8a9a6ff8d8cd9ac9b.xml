{"content":"---\ntitle: \"How to: Access Hardware Encryption Devices | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"encryption\"\n  - \"key card\"\n  - \"cryptography\"\n  - \"hardware encryption\"\n  - \"CspParameters\"\nms.assetid: b0e734df-6eb4-4b16-b48c-6f0fe82d5f17\ncaps.latest.revision: 9\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# How to: Access Hardware Encryption Devices\nYou can use the <xref:System.Security.Cryptography.CspParameters> class to access hardware encryption devices. For example, you can use this class to integrate your application with a smart card, a hardware random number generator, or a hardware implementation of a particular cryptographic algorithm.  \n  \n The <xref:System.Security.Cryptography.CspParameters> class creates a cryptographic service provider (CSP) that accesses a properly installed hardware encryption device.  You can verify the availability of a CSP by inspecting the following registry key using the Registry Editor (Regedit.exe):  HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Cryptography\\Defaults\\Provider.  \n  \n### To sign data using a key card  \n  \n1.  Create a new instance of the <xref:System.Security.Cryptography.CspParameters> class, passing the integer provider type and the provider name to the constructor.  \n  \n2.  Pass the appropriate flags to the <xref:System.Security.Cryptography.CspParameters.Flags%2A> property of the newly created <xref:System.Security.Cryptography.CspParameters> object.  For example, pass the <xref:System.Security.Cryptography.CspProviderFlags> flag.  \n  \n3.  Create a new instance of an <xref:System.Security.Cryptography.AsymmetricAlgorithm> class (for example, the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class), passing the <xref:System.Security.Cryptography.CspParameters> object to the constructor.  \n  \n4.  Sign your data using one of the `Sign` methods and verify your data using one of the `Verify` methods.  \n  \n### To generate a random number using a hardware random number generator  \n  \n1.  Create a new instance of the <xref:System.Security.Cryptography.CspParameters> class, passing the integer provider type and the provider name to the constructor.  \n  \n2.  Create a new instance of the <xref:System.Security.Cryptography.RNGCryptoServiceProvider>, passing the <xref:System.Security.Cryptography.CspParameters> object to the constructor.  \n  \n3.  Create a random value using the <xref:System.Security.Cryptography.RNGCryptoServiceProvider.GetBytes%2A> or <xref:System.Security.Cryptography.RNGCryptoServiceProvider.GetNonZeroBytes%2A> method.  \n  \n## Example  \n The following code example demonstrates how to sign data using a smart card.  The code example creates a <xref:System.Security.Cryptography.CspParameters> object that exposes a smart card, and then initializes an <xref:System.Security.Cryptography.RSACryptoServiceProvider> object using the CSP.  The code example then signs and verifies some data.  \n  \n [!code-cpp[Cryptography.SmartCardCSP#1](../../../samples/snippets/cpp/VS_Snippets_CLR/Cryptography.SmartCardCSP/CPP/Cryptography.SmartCardCSP.cpp#1)]\n [!code-csharp[Cryptography.SmartCardCSP#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Cryptography.SmartCardCSP/CS/example.cs#1)]\n [!code-vb[Cryptography.SmartCardCSP#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Cryptography.SmartCardCSP/VB/example.vb#1)]  \n  \n## Compiling the Code  \n  \n-   Include the <xref:System> and <xref:System.Security.Cryptography> namespaces.  \n  \n-   You must have a smart card reader and drivers installed on your computer.  \n  \n-   You must initialize the <xref:System.Security.Cryptography.CspParameters> object using information specific to your card reader.  For more information, see the documentation of your card reader.","nodes":[{"pos":[12,71],"content":"How to: Access Hardware Encryption Devices | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Access Hardware Encryption Devices | Microsoft Docs","pos":[0,59]}]},{"pos":[535,577],"content":"How to: Access Hardware Encryption Devices","linkify":"How to: Access Hardware Encryption Devices","nodes":[{"content":"How to: Access Hardware Encryption Devices","pos":[0,42]}]},{"content":"You can use the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> class to access hardware encryption devices.","pos":[578,688],"source":"You can use the <xref:System.Security.Cryptography.CspParameters> class to access hardware encryption devices."},{"content":"For example, you can use this class to integrate your application with a smart card, a hardware random number generator, or a hardware implementation of a particular cryptographic algorithm.","pos":[689,879]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> class creates a cryptographic service provider (CSP) that accesses a properly installed hardware encryption device.","pos":[886,1055],"source":"The <xref:System.Security.Cryptography.CspParameters> class creates a cryptographic service provider (CSP) that accesses a properly installed hardware encryption device."},{"content":"You can verify the availability of a CSP by inspecting the following registry key using the Registry Editor (Regedit.exe):  HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Cryptography\\Defaults\\Provider.","pos":[1057,1250]},{"pos":[1260,1289],"content":"To sign data using a key card","linkify":"To sign data using a key card","nodes":[{"content":"To sign data using a key card","pos":[0,29]}]},{"content":"Create a new instance of the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> class, passing the integer provider type and the provider name to the constructor.","pos":[1299,1460],"source":"Create a new instance of the <xref:System.Security.Cryptography.CspParameters> class, passing the integer provider type and the provider name to the constructor."},{"content":"Pass the appropriate flags to the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters.Flags%2A&gt;</ph> property of the newly created <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object.","pos":[1470,1650],"source":"Pass the appropriate flags to the <xref:System.Security.Cryptography.CspParameters.Flags%2A> property of the newly created <xref:System.Security.Cryptography.CspParameters> object."},{"content":"For example, pass the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspProviderFlags&gt;</ph> flag.","pos":[1652,1732],"source":"  For example, pass the <xref:System.Security.Cryptography.CspProviderFlags> flag."},{"content":"Create a new instance of an <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.AsymmetricAlgorithm&gt;</ph> class (for example, the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RSACryptoServiceProvider&gt;</ph> class), passing the <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object to the constructor.","pos":[1742,2007],"source":"Create a new instance of an <xref:System.Security.Cryptography.AsymmetricAlgorithm> class (for example, the <xref:System.Security.Cryptography.RSACryptoServiceProvider> class), passing the <xref:System.Security.Cryptography.CspParameters> object to the constructor."},{"pos":[2017,2119],"content":"Sign your data using one of the <ph id=\"ph1\">`Sign`</ph> methods and verify your data using one of the <ph id=\"ph2\">`Verify`</ph> methods.","source":"Sign your data using one of the `Sign` methods and verify your data using one of the `Verify` methods."},{"pos":[2129,2197],"content":"To generate a random number using a hardware random number generator","linkify":"To generate a random number using a hardware random number generator","nodes":[{"content":"To generate a random number using a hardware random number generator","pos":[0,68]}]},{"content":"Create a new instance of the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> class, passing the integer provider type and the provider name to the constructor.","pos":[2207,2368],"source":"Create a new instance of the <xref:System.Security.Cryptography.CspParameters> class, passing the integer provider type and the provider name to the constructor."},{"content":"Create a new instance of the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.RNGCryptoServiceProvider&gt;</ph>, passing the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object to the constructor.","pos":[2378,2557],"source":"Create a new instance of the <xref:System.Security.Cryptography.RNGCryptoServiceProvider>, passing the <xref:System.Security.Cryptography.CspParameters> object to the constructor."},{"content":"Create a random value using the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.RNGCryptoServiceProvider.GetBytes%2A&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RNGCryptoServiceProvider.GetNonZeroBytes%2A&gt;</ph> method.","pos":[2567,2762],"source":"Create a random value using the <xref:System.Security.Cryptography.RNGCryptoServiceProvider.GetBytes%2A> or <xref:System.Security.Cryptography.RNGCryptoServiceProvider.GetNonZeroBytes%2A> method."},{"pos":[2771,2778],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example demonstrates how to sign data using a smart card.","pos":[2782,2858]},{"content":"The code example creates a <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object that exposes a smart card, and then initializes an <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RSACryptoServiceProvider&gt;</ph> object using the CSP.","pos":[2860,3077],"source":"  The code example creates a <xref:System.Security.Cryptography.CspParameters> object that exposes a smart card, and then initializes an <xref:System.Security.Cryptography.RSACryptoServiceProvider> object using the CSP."},{"content":"The code example then signs and verifies some data.","pos":[3079,3130]},{"pos":[3137,3561],"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>Cryptography.SmartCardCSP#1<ept id=\"p2\">](../../../samples/snippets/cpp/VS_Snippets_CLR/Cryptography.SmartCardCSP/CPP/Cryptography.SmartCardCSP.cpp#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-csharp</bpt><bpt id=\"p4\">[</bpt>Cryptography.SmartCardCSP#1<ept id=\"p4\">](../../../samples/snippets/csharp/VS_Snippets_CLR/Cryptography.SmartCardCSP/CS/example.cs#1)</ept><ept id=\"p3\">]</ept> <bpt id=\"p5\">[!code-vb</bpt><bpt id=\"p6\">[</bpt>Cryptography.SmartCardCSP#1<ept id=\"p6\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Cryptography.SmartCardCSP/VB/example.vb#1)</ept><ept id=\"p5\">]</ept>","source":"[!code-cpp[Cryptography.SmartCardCSP#1](../../../samples/snippets/cpp/VS_Snippets_CLR/Cryptography.SmartCardCSP/CPP/Cryptography.SmartCardCSP.cpp#1)]\n [!code-csharp[Cryptography.SmartCardCSP#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Cryptography.SmartCardCSP/CS/example.cs#1)]\n [!code-vb[Cryptography.SmartCardCSP#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Cryptography.SmartCardCSP/VB/example.vb#1)]"},{"pos":[3570,3588],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"content":"Include the <ph id=\"ph1\">&lt;xref:System&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Security.Cryptography&gt;</ph> namespaces.","pos":[3598,3675],"source":"Include the <xref:System> and <xref:System.Security.Cryptography> namespaces."},{"content":"You must have a smart card reader and drivers installed on your computer.","pos":[3685,3758]},{"content":"You must initialize the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CspParameters&gt;</ph> object using information specific to your card reader.","pos":[3768,3896],"source":"You must initialize the <xref:System.Security.Cryptography.CspParameters> object using information specific to your card reader."},{"content":"For more information, see the documentation of your card reader.","pos":[3898,3962]}]}