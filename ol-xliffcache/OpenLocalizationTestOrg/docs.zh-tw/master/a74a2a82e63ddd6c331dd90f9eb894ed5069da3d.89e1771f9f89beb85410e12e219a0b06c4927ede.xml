{"content":"---\ntitle: \"Flowing Transactions into and out of Workflow Services\"\nms.date: \"03/30/2017\"\nms.assetid: 03ced70e-b540-4dd9-86c8-87f7bd61f609\n---\n# Flowing Transactions into and out of Workflow Services\nWorkflow services and clients can participate in transactions.  For a service operation to become part of an ambient transaction, place a <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity. Any calls made by a <xref:System.ServiceModel.Activities.Send> or a <xref:System.ServiceModel.Activities.SendReply> activity within the <xref:System.ServiceModel.Activities.TransactedReceiveScope> will also be made within the ambient transaction. A workflow client application can create an ambient transaction by using the <xref:System.Activities.Statements.TransactionScope> activity and call service operations using the ambient transaction. This topic walks you through creating a workflow service and workflow client that participate in transactions.  \n  \n> [!WARNING]\n>  If a workflow service instance is loaded within a transaction and the workflow contains a <xref:System.Activities.Statements.Persist> activity, the workflow instance will hang until the transaction times out.  \n  \n> [!IMPORTANT]\n>  Whenever you use a <xref:System.ServiceModel.Activities.TransactedReceiveScope> it is recommended to place all Receives in the workflow within <xref:System.ServiceModel.Activities.TransactedReceiveScope> activities.  \n  \n> [!IMPORTANT]\n>  When using <xref:System.ServiceModel.Activities.TransactedReceiveScope> and messages arrive in the incorrect order, the workflow will be aborted when trying to deliver the first out of order message. You must make sure your workflow is always at a consistent stopping point when the workflow idles. This will allow you to restart the workflow from a previous persistence point should the workflow be aborted.  \n  \n### Create a shared library  \n  \n1.  Create a new empty Visual Studio Solution.  \n  \n2.  Add a new class library project called `Common`. Add references to the following assemblies:  \n  \n    -   System.Activities.dll  \n  \n    -   System.ServiceModel.dll  \n  \n    -   System.ServiceModel.Activities.dll  \n  \n    -   System.Transactions.dll  \n  \n3.  Add a new class called `PrintTransactionInfo` to the `Common` project. This class is derived from <xref:System.Activities.NativeActivity> and overloads the <xref:System.Activities.NativeActivity.Execute%2A> method.  \n  \n    ```  \n    using System;  \n    using System;  \n    using System.Activities;  \n    using System.Transactions;  \n  \n    namespace Common  \n    {  \n        public class PrintTransactionInfo : NativeActivity  \n        {  \n            protected override void Execute(NativeActivityContext context)  \n            {  \n                RuntimeTransactionHandle rth = context.Properties.Find(typeof(RuntimeTransactionHandle).FullName) as RuntimeTransactionHandle;  \n  \n                if (rth == null)  \n                {  \n                    Console.WriteLine(\"There is no ambient RuntimeTransactionHandle\");  \n                }  \n  \n                Transaction t = rth.GetCurrentTransaction(context);  \n  \n                if (t == null)  \n                {  \n                    Console.WriteLine(\"There is no ambient transaction\");  \n                }  \n                else  \n                {  \n                    Console.WriteLine(\"Transaction: {0} is {1}\", t.TransactionInformation.DistributedIdentifier, t.TransactionInformation.Status);  \n                }  \n            }  \n        }  \n  \n    }  \n    ```  \n  \n     This is a native activity that displays information about the ambient transaction and is used in both the service and client workflows used in this topic. Build the solution to make this activity available in the **Common** section of the **Toolbox**.  \n  \n### Implement the workflow service  \n  \n1.  Add a new WCF Workflow Service, called `WorkflowService` to the `Common` project. To do this right click the `Common` project, select **Add**, **New Item ...**, Select **Workflow** under **Installed Templates** and select **WCF Workflow Service**.  \n  \n     ![Adding a Workflow Service](./media/flowing-transactions-into-and-out-of-workflow-services/add-workflow-service.jpg)  \n  \n2.  Delete the default `ReceiveRequest` and `SendResponse` activities.  \n  \n3.  Drag and drop a <xref:System.Activities.Statements.WriteLine> activity into the `Sequential Service` activity. Set the text property to `\"Workflow Service starting ...\"` as shown in the following example.  \n  \n     ![Adding a WriteLine activity to the Sequential Service activity(./media/flowing-transactions-into-and-out-of-workflow-services/add-writeline-sequential-service.jpg)  \n  \n4.  Drag and drop a <xref:System.ServiceModel.Activities.TransactedReceiveScope> after the <xref:System.Activities.Statements.WriteLine> activity. The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity can be found in the **Messaging** section of the **Toolbox**. The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity is composed of two sections **Request** and **Body**. The **Request** section contains the <xref:System.ServiceModel.Activities.Receive> activity. The **Body** section contains the activities to execute within a transaction after a message has been received.  \n  \n     ![Adding a TransactedReceiveScope activity](./media/flowing-transactions-into-and-out-of-workflow-services/transactedreceivescope-activity.jpg)  \n  \n5.  Select the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity and click the **Variables** button. Add the following variables.  \n  \n     ![Adding variables to the TransactedReceiveScope](./media/flowing-transactions-into-and-out-of-workflow-services/add-transactedreceivescope-variables.jpg)  \n  \n    > [!NOTE]\n    >  You can delete the data variable that is there by default. You can also use the existing handle variable.  \n  \n6.  Drag and drop a <xref:System.ServiceModel.Activities.Receive> activity within the **Request** section of the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity. Set the following properties:  \n  \n    |Property|Value|  \n    |--------------|-----------|  \n    |CanCreateInstance|True (check the checkbox)|  \n    |OperationName|StartSample|  \n    |ServiceContractName|ITransactionSample|  \n  \n     The workflow should look like this:  \n  \n     ![Adding a Receive activity](./media/flowing-transactions-into-and-out-of-workflow-services/add-receive-activity.jpg)  \n  \n7.  Click the **Define...** link in the <xref:System.ServiceModel.Activities.Receive> activity and make the following settings:  \n  \n     ![Setting message settings for the Receive activity](./media/flowing-transactions-into-and-out-of-workflow-services/receive-message-settings.jpg)  \n  \n8.  Drag and drop a <xref:System.Activities.Statements.Sequence> activity into the Body section of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>. Within the <xref:System.Activities.Statements.Sequence> activity drag and drop two <xref:System.Activities.Statements.WriteLine> activities and set the <xref:System.Activities.Statements.WriteLine.Text%2A> properties as shown in the following table.  \n  \n    |Activity|Value|  \n    |--------------|-----------|  \n    |1st WriteLine|\"Service: Receive Completed\"|  \n    |2nd WriteLine|\"Service: Received = \" + requestMessage|  \n  \n     The workflow should now look like this:  \n  \n     ![Sequence after adding WriteLine activities](./media/flowing-transactions-into-and-out-of-workflow-services/after-adding-writelines.jpg)  \n  \n9. Drag and drop the `PrintTransactionInfo` activity after the second <xref:System.Activities.Statements.WriteLine> activity in the **Body** in the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.  \n  \n     ![Sequence after adding PrintTransactionInfo](./media/flowing-transactions-into-and-out-of-workflow-services/after-adding-printtransactioninfo.jpg )  \n  \n10. Drag and drop an <xref:System.Activities.Statements.Assign> activity after the `PrintTransactionInfo` activity and set its properties according to the following table.  \n  \n    |Property|Value|  \n    |--------------|-----------|  \n    |To|replyMessage|  \n    |Value|\"Service: Sending reply.\"|  \n  \n11. Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the <xref:System.Activities.Statements.Assign> activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Service: Begin reply.\"  \n  \n     The workflow should now look like this:  \n  \n     ![After adding Assign and WriteLine](./media/flowing-transactions-into-and-out-of-workflow-services/after-adding-sbr-writeline.jpg)  \n  \n12. Right click the <xref:System.ServiceModel.Activities.Receive> activity and select **Create SendReply** and paste it after the last <xref:System.Activities.Statements.WriteLine> activity. Click the **Define...** link in the `SendReplyToReceive` activity and make the following settings.  \n  \n     ![Reply message settings](./media/flowing-transactions-into-and-out-of-workflow-services/reply-message-settings.jpg)  \n  \n13. Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the `SendReplyToReceive` activity and set it’s <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Service: Reply sent.\"  \n  \n14. Drag and drop a <xref:System.Activities.Statements.WriteLine> activity at the bottom of the workflow and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Service: Workflow ends, press ENTER to exit.\"  \n  \n     The completed service workflow should look like this:  \n  \n     ![Complete Service Workflow](./media/flowing-transactions-into-and-out-of-workflow-services/service-complete-workflow.jpg)  \n  \n### Implement the workflow client  \n  \n1.  Add a new WCF Workflow application, called `WorkflowClient` to the `Common` project. To do this right click the `Common` project, select **Add**, **New Item ...**, Select **Workflow** under **Installed Templates** and select **Activity**.  \n  \n     ![Add an Activity project](./media/flowing-transactions-into-and-out-of-workflow-services/add-activity-project.jpg)  \n  \n2.  Drag and drop a <xref:System.Activities.Statements.Sequence> activity onto the design surface.  \n  \n3.  Within the <xref:System.Activities.Statements.Sequence> activity drag and drop a <xref:System.Activities.Statements.WriteLine> activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to `\"Client: Workflow starting\"`. The workflow should now look like this:  \n  \n     ![Add a WriteLine activity](./media/flowing-transactions-into-and-out-of-workflow-services/add-writeline-activity.jpg)  \n  \n4.  Drag and drop a <xref:System.Activities.Statements.TransactionScope> activity after the <xref:System.Activities.Statements.WriteLine> activity.  Select the <xref:System.Activities.Statements.TransactionScope> activity, click the Variables button and add the following variables.  \n  \n     ![Add variables to the TransactionScope](./media/flowing-transactions-into-and-out-of-workflow-services/transactionscope-variables.jpg)  \n  \n5.  Drag and drop a <xref:System.Activities.Statements.Sequence> activity into the body of the <xref:System.Activities.Statements.TransactionScope> activity.  \n  \n6.  Drag and drop a `PrintTransactionInfo` activity within the <xref:System.Activities.Statements.Sequence>  \n  \n7.  Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the `PrintTransactionInfo` activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client: Beginning Send\". The workflow should now look like this:  \n  \n     ![Adding Client: Beginning Send activities](./media/flowing-transactions-into-and-out-of-workflow-services/client-add-cbs-writeline.jpg)  \n  \n8.  Drag and drop a <xref:System.ServiceModel.Activities.Send> activity after the <xref:System.Activities.Statements.Assign> activity and set the following properties:  \n  \n    |Property|Value|  \n    |--------------|-----------|  \n    |EndpointConfigurationName|workflowServiceEndpoint|  \n    |OperationName|StartSample|  \n    |ServiceContractName|ITransactionSample|  \n  \n     The workflow should now look like this:  \n  \n     ![Setting the Send activity properties](./media/flowing-transactions-into-and-out-of-workflow-services/client-send-activity-settings.jpg)  \n  \n9. Click the **Define...** link and make the following settings:  \n  \n     ![Send activity message settings](./media/flowing-transactions-into-and-out-of-workflow-services/send-message-settings.jpg)  \n  \n10. Right click the <xref:System.ServiceModel.Activities.Send> activity and select **Create ReceiveReply**. The <xref:System.ServiceModel.Activities.ReceiveReply> activity will be automatically placed after the <xref:System.ServiceModel.Activities.Send> activity.  \n  \n11. Click the Define... link on the ReceiveReplyForSend activity and make the following settings:  \n  \n     ![Setting the ReceiveForSend message settings](./media/flowing-transactions-into-and-out-of-workflow-services/client-reply-message-settings.jpg)  \n  \n12. Drag and drop a <xref:System.Activities.Statements.WriteLine> activity between the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client: Send complete.\"  \n  \n13. Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the <xref:System.ServiceModel.Activities.ReceiveReply> activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client side: Reply received = \" + replyMessage  \n  \n14. Drag and drop a `PrintTransactionInfo` activity after the <xref:System.Activities.Statements.WriteLine> activity.  \n  \n15. Drag and drop a <xref:System.Activities.Statements.WriteLine> activity at the end of the workflow and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client workflow ends.\" The completed client workflow should look like the following diagram.  \n  \n     ![The completed client workflow](./media/flowing-transactions-into-and-out-of-workflow-services/client-complete-workflow.jpg)  \n  \n16. Build the solution.  \n  \n### Create the Service application  \n  \n1.  Add a new Console Application project called `Service` to the solution. Add references to the following assemblies:  \n  \n    1.  System.Activities.dll  \n  \n    2.  System.ServiceModel.dll  \n  \n    3.  System.ServiceModel.Activities.dll  \n  \n2.  Open the generated Program.cs file and the following code:  \n  \n    ```  \n    static void Main()  \n          {  \n              Console.WriteLine(\"Building the server.\");  \n              using (WorkflowServiceHost host = new WorkflowServiceHost(new DeclarativeServiceWorkflow(), new Uri(\"net.tcp://localhost:8000/TransactedReceiveService/Declarative\")))  \n              {                \n                  //Start the server  \n                  host.Open();  \n                  Console.WriteLine(\"Service started.\");  \n  \n                  Console.WriteLine();  \n                  Console.ReadLine();  \n                  //Shutdown  \n                  host.Close();  \n              };         \n          }  \n    ```  \n  \n3.  Add the following app.config file to the project.  \n  \n    ```xml  \n    <?xml version=\"1.0\" encoding=\"utf-8\" ?>  \n    <!-- Copyright © Microsoft Corporation.  All rights reserved. -->  \n    <configuration>  \n        <system.serviceModel>  \n            <bindings>  \n                <netTcpBinding>  \n                    <binding transactionFlow=\"true\" />  \n                </netTcpBinding>  \n            </bindings>  \n        </system.serviceModel>  \n    </configuration>  \n    ```  \n  \n### Create the client application  \n  \n1.  Add a new Console Application project called `Client` to the solution. Add a reference to System.Activities.dll.  \n  \n2.  Open the program.cs file and add the following code.  \n  \n    ```  \n    class Program  \n        {  \n  \n            private static AutoResetEvent syncEvent = new AutoResetEvent(false);  \n  \n            static void Main(string[] args)  \n            {  \n                //Build client  \n                Console.WriteLine(\"Building the client.\");  \n                WorkflowApplication client = new WorkflowApplication(new DeclarativeClientWorkflow());  \n                client.Completed = Program.Completed;  \n                client.Aborted = Program.Aborted;  \n                client.OnUnhandledException = Program.OnUnhandledException;  \n  \n                //Wait for service to start  \n                Console.WriteLine(\"Press ENTER once service is started.\");  \n                Console.ReadLine();  \n  \n                //Start the client              \n                Console.WriteLine(\"Starting the client.\");  \n                client.Run();  \n                syncEvent.WaitOne();  \n  \n                //Sample complete  \n                Console.WriteLine();  \n                Console.WriteLine(\"Client complete. Press ENTER to exit.\");  \n                Console.ReadLine();  \n            }  \n  \n            private static void Completed(WorkflowApplicationCompletedEventArgs e)  \n            {  \n                Program.syncEvent.Set();  \n            }  \n  \n            private static void Aborted(WorkflowApplicationAbortedEventArgs e)  \n            {  \n                Console.WriteLine(\"Client Aborted: {0}\", e.Reason);  \n                Program.syncEvent.Set();  \n            }  \n  \n            private static UnhandledExceptionAction OnUnhandledException(WorkflowApplicationUnhandledExceptionEventArgs e)  \n            {  \n                Console.WriteLine(\"Client had an unhandled exception: {0}\", e.UnhandledException);  \n                return UnhandledExceptionAction.Cancel;  \n            }  \n        }  \n    ```  \n  \n## See also\n\n- [Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)\n- [Windows Communication Foundation Transactions Overview](../../../../docs/framework/wcf/feature-details/transactions-overview.md)\n","nodes":[{"pos":[4,138],"embed":true,"restype":"x-metadata","content":"title: \"Flowing Transactions into and out of Workflow Services\"\nms.date: \"03/30/2017\"\nms.assetid: 03ced70e-b540-4dd9-86c8-87f7bd61f609","nodes":[{"content":"Flowing Transactions into and out of Workflow Services","nodes":[{"pos":[0,54],"content":"Flowing Transactions into and out of Workflow Services","nodes":[{"content":"Flowing Transactions into and out of Workflow Services","pos":[0,54]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[145,199],"content":"Flowing Transactions into and out of Workflow Services","linkify":"Flowing Transactions into and out of Workflow Services","nodes":[{"content":"Flowing Transactions into and out of Workflow Services","pos":[0,54]}]},{"content":"Workflow services and clients can participate in transactions.","pos":[200,262]},{"content":"For a service operation to become part of an ambient transaction, place a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity within a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity.","pos":[264,472],"source":"  For a service operation to become part of an ambient transaction, place a <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity."},{"content":"Any calls made by a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> or a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> activity within the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> will also be made within the ambient transaction.","pos":[473,719],"source":" Any calls made by a <xref:System.ServiceModel.Activities.Send> or a <xref:System.ServiceModel.Activities.SendReply> activity within the <xref:System.ServiceModel.Activities.TransactedReceiveScope> will also be made within the ambient transaction."},{"content":"A workflow client application can create an ambient transaction by using the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity and call service operations using the ambient transaction.","pos":[720,917],"source":" A workflow client application can create an ambient transaction by using the <xref:System.Activities.Statements.TransactionScope> activity and call service operations using the ambient transaction."},{"content":"This topic walks you through creating a workflow service and workflow client that participate in transactions.","pos":[918,1028]},{"pos":[1036,1258],"content":"[!WARNING]\n If a workflow service instance is loaded within a transaction and the workflow contains a <xref:System.Activities.Statements.Persist> activity, the workflow instance will hang until the transaction times out.","leadings":["","> "],"nodes":[{"content":"If a workflow service instance is loaded within a transaction and the workflow contains a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Persist&gt;</ph> activity, the workflow instance will hang until the transaction times out.","pos":[12,220],"source":"If a workflow service instance is loaded within a transaction and the workflow contains a <xref:System.Activities.Statements.Persist> activity, the workflow instance will hang until the transaction times out."}]},{"pos":[1266,1497],"content":"[!IMPORTANT]\n Whenever you use a <xref:System.ServiceModel.Activities.TransactedReceiveScope> it is recommended to place all Receives in the workflow within <xref:System.ServiceModel.Activities.TransactedReceiveScope> activities.","leadings":["","> "],"nodes":[{"content":"Whenever you use a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> it is recommended to place all Receives in the workflow within <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activities.","pos":[14,229],"source":"Whenever you use a <xref:System.ServiceModel.Activities.TransactedReceiveScope> it is recommended to place all Receives in the workflow within <xref:System.ServiceModel.Activities.TransactedReceiveScope> activities."}]},{"pos":[1505,1929],"content":"[!IMPORTANT]\n When using <xref:System.ServiceModel.Activities.TransactedReceiveScope> and messages arrive in the incorrect order, the workflow will be aborted when trying to deliver the first out of order message. You must make sure your workflow is always at a consistent stopping point when the workflow idles. This will allow you to restart the workflow from a previous persistence point should the workflow be aborted.","leadings":["","> "],"nodes":[{"content":"When using <xref:System.ServiceModel.Activities.TransactedReceiveScope> and messages arrive in the incorrect order, the workflow will be aborted when trying to deliver the first out of order message. You must make sure your workflow is always at a consistent stopping point when the workflow idles. This will allow you to restart the workflow from a previous persistence point should the workflow be aborted.","pos":[14,422],"nodes":[{"content":"When using <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> and messages arrive in the incorrect order, the workflow will be aborted when trying to deliver the first out of order message.","pos":[0,199],"source":"When using <xref:System.ServiceModel.Activities.TransactedReceiveScope> and messages arrive in the incorrect order, the workflow will be aborted when trying to deliver the first out of order message."},{"content":"You must make sure your workflow is always at a consistent stopping point when the workflow idles.","pos":[200,298]},{"content":"This will allow you to restart the workflow from a previous persistence point should the workflow be aborted.","pos":[299,408]}]}]},{"pos":[1939,1962],"content":"Create a shared library","linkify":"Create a shared library","nodes":[{"content":"Create a shared library","pos":[0,23]}]},{"content":"Create a new empty Visual Studio Solution.","pos":[1972,2014]},{"content":"Add a new class library project called <ph id=\"ph1\">`Common`</ph>.","pos":[2024,2072],"source":"Add a new class library project called `Common`."},{"content":"Add references to the following assemblies:","pos":[2073,2116]},{"content":"System.Activities.dll","pos":[2130,2151]},{"content":"System.ServiceModel.dll","pos":[2165,2188]},{"content":"System.ServiceModel.Activities.dll","pos":[2202,2236]},{"content":"System.Transactions.dll","pos":[2250,2273]},{"content":"Add a new class called <ph id=\"ph1\">`PrintTransactionInfo`</ph> to the <ph id=\"ph2\">`Common`</ph> project.","pos":[2283,2353],"source":"Add a new class called `PrintTransactionInfo` to the `Common` project."},{"content":"This class is derived from <ph id=\"ph1\">&lt;xref:System.Activities.NativeActivity&gt;</ph> and overloads the <ph id=\"ph2\">&lt;xref:System.Activities.NativeActivity.Execute%2A&gt;</ph> method.","pos":[2354,2497],"source":" This class is derived from <xref:System.Activities.NativeActivity> and overloads the <xref:System.Activities.NativeActivity.Execute%2A> method."},{"content":"This is a native activity that displays information about the ambient transaction and is used in both the service and client workflows used in this topic.","pos":[3623,3777]},{"content":"Build the solution to make this activity available in the <bpt id=\"p1\">**</bpt>Common<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Toolbox<ept id=\"p2\">**</ept>.","pos":[3778,3874],"source":" Build the solution to make this activity available in the **Common** section of the **Toolbox**."},{"pos":[3884,3914],"content":"Implement the workflow service","linkify":"Implement the workflow service","nodes":[{"content":"Implement the workflow service","pos":[0,30]}]},{"content":"Add a new WCF Workflow Service, called <ph id=\"ph1\">`WorkflowService`</ph> to the <ph id=\"ph2\">`Common`</ph> project.","pos":[3924,4005],"source":"Add a new WCF Workflow Service, called `WorkflowService` to the `Common` project."},{"content":"To do this right click the <ph id=\"ph1\">`Common`</ph> project, select <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>New Item ...<ept id=\"p2\">**</ept>, Select <bpt id=\"p3\">**</bpt>Workflow<ept id=\"p3\">**</ept> under <bpt id=\"p4\">**</bpt>Installed Templates<ept id=\"p4\">**</ept> and select <bpt id=\"p5\">**</bpt>WCF Workflow Service<ept id=\"p5\">**</ept>.","pos":[4006,4171],"source":" To do this right click the `Common` project, select **Add**, **New Item ...**, Select **Workflow** under **Installed Templates** and select **WCF Workflow Service**."},{"content":"Adding a Workflow Service","pos":[4184,4209]},{"pos":[4309,4375],"content":"Delete the default <ph id=\"ph1\">`ReceiveRequest`</ph> and <ph id=\"ph2\">`SendResponse`</ph> activities.","source":"Delete the default `ReceiveRequest` and `SendResponse` activities."},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity into the <ph id=\"ph2\">`Sequential Service`</ph> activity.","pos":[4385,4495],"source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity into the `Sequential Service` activity."},{"content":"Set the text property to <ph id=\"ph1\">`\"Workflow Service starting ...\"`</ph> as shown in the following example.","pos":[4496,4589],"source":" Set the text property to `\"Workflow Service starting ...\"` as shown in the following example."},{"content":"![Adding a WriteLine activity to the Sequential Service activity(./media/flowing-transactions-into-and-out-of-workflow-services/add-writeline-sequential-service.jpg)","pos":[4600,4765]},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> after the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity.","pos":[4775,4917],"source":"Drag and drop a <xref:System.ServiceModel.Activities.TransactedReceiveScope> after the <xref:System.Activities.Statements.WriteLine> activity."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity can be found in the <bpt id=\"p1\">**</bpt>Messaging<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Toolbox<ept id=\"p2\">**</ept>.","pos":[4918,5053],"source":" The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity can be found in the **Messaging** section of the **Toolbox**."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity is composed of two sections <bpt id=\"p1\">**</bpt>Request<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Body<ept id=\"p2\">**</ept>.","pos":[5054,5181],"source":" The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity is composed of two sections **Request** and **Body**."},{"content":"The <bpt id=\"p1\">**</bpt>Request<ept id=\"p1\">**</ept> section contains the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity.","pos":[5182,5274],"source":" The **Request** section contains the <xref:System.ServiceModel.Activities.Receive> activity."},{"content":"The <bpt id=\"p1\">**</bpt>Body<ept id=\"p1\">**</ept> section contains the activities to execute within a transaction after a message has been received.","pos":[5275,5386],"source":" The **Body** section contains the activities to execute within a transaction after a message has been received."},{"content":"Adding a TransactedReceiveScope activity","pos":[5399,5439]},{"content":"Select the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity and click the <bpt id=\"p1\">**</bpt>Variables<ept id=\"p1\">**</ept> button.","pos":[5550,5666],"source":"Select the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity and click the **Variables** button."},{"content":"Add the following variables.","pos":[5667,5695]},{"content":"Adding variables to the TransactedReceiveScope","pos":[5708,5754]},{"pos":[5872,5992],"content":"[!NOTE]\nYou can delete the data variable that is there by default. You can also use the existing handle variable.","leadings":["","    >  "],"nodes":[{"content":"You can delete the data variable that is there by default. You can also use the existing handle variable.","pos":[8,113],"nodes":[{"content":"You can delete the data variable that is there by default.","pos":[0,58]},{"content":"You can also use the existing handle variable.","pos":[59,105]}]}]},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity within the <bpt id=\"p1\">**</bpt>Request<ept id=\"p1\">**</ept> section of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity.","pos":[6002,6181],"source":"Drag and drop a <xref:System.ServiceModel.Activities.Receive> activity within the **Request** section of the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity."},{"content":"Set the following properties:","pos":[6182,6211]},{"content":"Property","pos":[6222,6230]},{"content":"Value","pos":[6231,6236]},{"content":"CanCreateInstance","pos":[6280,6297]},{"content":"True (check the checkbox)","pos":[6298,6323]},{"content":"OperationName","pos":[6332,6345]},{"content":"StartSample","pos":[6346,6357]},{"content":"ServiceContractName","pos":[6366,6385]},{"content":"ITransactionSample","pos":[6386,6404]},{"content":"The workflow should look like this:","pos":[6416,6451]},{"content":"Adding a Receive activity","pos":[6464,6489]},{"pos":[6589,6712],"content":"Click the <bpt id=\"p1\">**</bpt>Define...<ept id=\"p1\">**</ept> link in the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity and make the following settings:","source":"Click the **Define...** link in the <xref:System.ServiceModel.Activities.Receive> activity and make the following settings:"},{"content":"Setting message settings for the Receive activity","pos":[6725,6774]},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> activity into the Body section of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph>.","pos":[6878,7038],"source":"Drag and drop a <xref:System.Activities.Statements.Sequence> activity into the Body section of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>."},{"content":"Within the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> activity drag and drop two <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activities and set the <ph id=\"ph3\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> properties as shown in the following table.","pos":[7039,7288],"source":" Within the <xref:System.Activities.Statements.Sequence> activity drag and drop two <xref:System.Activities.Statements.WriteLine> activities and set the <xref:System.Activities.Statements.WriteLine.Text%2A> properties as shown in the following table."},{"content":"Activity","pos":[7299,7307]},{"content":"Value","pos":[7308,7313]},{"content":"1st WriteLine","pos":[7357,7370]},{"content":"\"Service: Receive Completed\"","pos":[7371,7399]},{"content":"2nd WriteLine","pos":[7408,7421]},{"content":"\"Service: Received = \" + requestMessage","pos":[7422,7461]},{"content":"The workflow should now look like this:","pos":[7473,7512]},{"content":"Sequence after adding WriteLine activities","pos":[7525,7567]},{"pos":[7669,7884],"content":"Drag and drop the <ph id=\"ph1\">`PrintTransactionInfo`</ph> activity after the second <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity in the <bpt id=\"p1\">**</bpt>Body<ept id=\"p1\">**</ept> in the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.TransactedReceiveScope&gt;</ph> activity.","source":"Drag and drop the `PrintTransactionInfo` activity after the second <xref:System.Activities.Statements.WriteLine> activity in the **Body** in the <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity."},{"content":"Sequence after adding PrintTransactionInfo","pos":[7897,7939]},{"pos":[8053,8220],"content":"Drag and drop an <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Assign&gt;</ph> activity after the <ph id=\"ph2\">`PrintTransactionInfo`</ph> activity and set its properties according to the following table.","source":"Drag and drop an <xref:System.Activities.Statements.Assign> activity after the `PrintTransactionInfo` activity and set its properties according to the following table."},{"content":"Property","pos":[8231,8239]},{"content":"Value","pos":[8240,8245]},{"content":"To","pos":[8289,8291]},{"content":"replyMessage","pos":[8292,8304]},{"content":"Value","pos":[8313,8318]},{"content":"\"Service: Sending reply.\"","pos":[8319,8344]},{"pos":[8355,8589],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity after the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Assign&gt;</ph> activity and set its <ph id=\"ph3\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Service: Begin reply.\"","source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the <xref:System.Activities.Statements.Assign> activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Service: Begin reply.\""},{"content":"The workflow should now look like this:","pos":[8600,8639]},{"content":"After adding Assign and WriteLine","pos":[8652,8685]},{"content":"Right click the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity and select <bpt id=\"p1\">**</bpt>Create SendReply<ept id=\"p1\">**</ept> and paste it after the last <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity.","pos":[8791,8977],"source":"Right click the <xref:System.ServiceModel.Activities.Receive> activity and select **Create SendReply** and paste it after the last <xref:System.Activities.Statements.WriteLine> activity."},{"content":"Click the <bpt id=\"p1\">**</bpt>Define...<ept id=\"p1\">**</ept> link in the <ph id=\"ph1\">`SendReplyToReceive`</ph> activity and make the following settings.","pos":[8978,9076],"source":" Click the **Define...** link in the `SendReplyToReceive` activity and make the following settings."},{"content":"Reply message settings","pos":[9089,9111]},{"pos":[9213,9425],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity after the <ph id=\"ph2\">`SendReplyToReceive`</ph> activity and set it’s <ph id=\"ph3\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Service: Reply sent.\"","source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the `SendReplyToReceive` activity and set it’s <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Service: Reply sent.\""},{"pos":[9435,9660],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity at the bottom of the workflow and set its <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Service: Workflow ends, press ENTER to exit.\"","source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity at the bottom of the workflow and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Service: Workflow ends, press ENTER to exit.\""},{"content":"The completed service workflow should look like this:","pos":[9671,9724]},{"content":"Complete Service Workflow","pos":[9737,9762]},{"pos":[9867,9896],"content":"Implement the workflow client","linkify":"Implement the workflow client","nodes":[{"content":"Implement the workflow client","pos":[0,29]}]},{"content":"Add a new WCF Workflow application, called <ph id=\"ph1\">`WorkflowClient`</ph> to the <ph id=\"ph2\">`Common`</ph> project.","pos":[9906,9990],"source":"Add a new WCF Workflow application, called `WorkflowClient` to the `Common` project."},{"content":"To do this right click the <ph id=\"ph1\">`Common`</ph> project, select <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>New Item ...<ept id=\"p2\">**</ept>, Select <bpt id=\"p3\">**</bpt>Workflow<ept id=\"p3\">**</ept> under <bpt id=\"p4\">**</bpt>Installed Templates<ept id=\"p4\">**</ept> and select <bpt id=\"p5\">**</bpt>Activity<ept id=\"p5\">**</ept>.","pos":[9991,10144],"source":" To do this right click the `Common` project, select **Add**, **New Item ...**, Select **Workflow** under **Installed Templates** and select **Activity**."},{"content":"Add an Activity project","pos":[10157,10180]},{"pos":[10280,10374],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> activity onto the design surface.","source":"Drag and drop a <xref:System.Activities.Statements.Sequence> activity onto the design surface."},{"content":"Within the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> activity drag and drop a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity and set its <ph id=\"ph3\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to <ph id=\"ph4\">`\"Client: Workflow starting\"`</ph>.","pos":[10384,10628],"source":"Within the <xref:System.Activities.Statements.Sequence> activity drag and drop a <xref:System.Activities.Statements.WriteLine> activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to `\"Client: Workflow starting\"`."},{"content":"The workflow should now look like this:","pos":[10629,10668]},{"content":"Add a WriteLine activity","pos":[10681,10705]},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity after the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity.","pos":[10807,10950],"source":"Drag and drop a <xref:System.Activities.Statements.TransactionScope> activity after the <xref:System.Activities.Statements.WriteLine> activity."},{"content":"Select the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity, click the Variables button and add the following variables.","pos":[10952,11085],"source":"  Select the <xref:System.Activities.Statements.TransactionScope> activity, click the Variables button and add the following variables."},{"content":"Add variables to the TransactionScope","pos":[11098,11135]},{"pos":[11241,11394],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> activity into the body of the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.TransactionScope&gt;</ph> activity.","source":"Drag and drop a <xref:System.Activities.Statements.Sequence> activity into the body of the <xref:System.Activities.Statements.TransactionScope> activity."},{"pos":[11404,11507],"content":"Drag and drop a <ph id=\"ph1\">`PrintTransactionInfo`</ph> activity within the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph>","source":"Drag and drop a `PrintTransactionInfo` activity within the <xref:System.Activities.Statements.Sequence>"},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity after the <ph id=\"ph2\">`PrintTransactionInfo`</ph> activity and set its <ph id=\"ph3\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Client: Beginning Send\".","pos":[11517,11733],"source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the `PrintTransactionInfo` activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client: Beginning Send\"."},{"content":"The workflow should now look like this:","pos":[11734,11773]},{"content":"Adding Client: Beginning Send activities","pos":[11786,11826]},{"pos":[11930,12093],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> activity after the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Assign&gt;</ph> activity and set the following properties:","source":"Drag and drop a <xref:System.ServiceModel.Activities.Send> activity after the <xref:System.Activities.Statements.Assign> activity and set the following properties:"},{"content":"Property","pos":[12104,12112]},{"content":"Value","pos":[12113,12118]},{"content":"EndpointConfigurationName","pos":[12162,12187]},{"content":"workflowServiceEndpoint","pos":[12188,12211]},{"content":"OperationName","pos":[12220,12233]},{"content":"StartSample","pos":[12234,12245]},{"content":"ServiceContractName","pos":[12254,12273]},{"content":"ITransactionSample","pos":[12274,12292]},{"content":"The workflow should now look like this:","pos":[12304,12343]},{"content":"Setting the Send activity properties","pos":[12356,12392]},{"pos":[12500,12561],"content":"Click the <bpt id=\"p1\">**</bpt>Define...<ept id=\"p1\">**</ept> link and make the following settings:","source":"Click the **Define...** link and make the following settings:"},{"content":"Send activity message settings","pos":[12574,12604]},{"content":"Right click the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> activity and select <bpt id=\"p1\">**</bpt>Create ReceiveReply<ept id=\"p1\">**</ept>.","pos":[12705,12808],"source":"Right click the <xref:System.ServiceModel.Activities.Send> activity and select **Create ReceiveReply**."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph> activity will be automatically placed after the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> activity.","pos":[12809,12964],"source":" The <xref:System.ServiceModel.Activities.ReceiveReply> activity will be automatically placed after the <xref:System.ServiceModel.Activities.Send> activity."},{"content":"Click the Define... link on the ReceiveReplyForSend activity and make the following settings:","pos":[12974,13067]},{"content":"Setting the ReceiveForSend message settings","pos":[13080,13123]},{"pos":[13232,13526],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity between the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph> activities and set its <ph id=\"ph4\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Client: Send complete.\"","source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity between the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client: Send complete.\""},{"pos":[13536,13802],"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity after the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph> activity and set its <ph id=\"ph3\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Client side: Reply received = \" + replyMessage","source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity after the <xref:System.ServiceModel.Activities.ReceiveReply> activity and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client side: Reply received = \" + replyMessage"},{"pos":[13812,13925],"content":"Drag and drop a <ph id=\"ph1\">`PrintTransactionInfo`</ph> activity after the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity.","source":"Drag and drop a `PrintTransactionInfo` activity after the <xref:System.Activities.Statements.WriteLine> activity."},{"content":"Drag and drop a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine&gt;</ph> activity at the end of the workflow and set its <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine.Text%2A&gt;</ph> property to \"Client workflow ends.\"","pos":[13935,14134],"source":"Drag and drop a <xref:System.Activities.Statements.WriteLine> activity at the end of the workflow and set its <xref:System.Activities.Statements.WriteLine.Text%2A> property to \"Client workflow ends.\""},{"content":"The completed client workflow should look like the following diagram.","pos":[14135,14204]},{"content":"The completed client workflow","pos":[14217,14246]},{"content":"Build the solution.","pos":[14350,14369]},{"pos":[14379,14409],"content":"Create the Service application","linkify":"Create the Service application","nodes":[{"content":"Create the Service application","pos":[0,30]}]},{"content":"Add a new Console Application project called <ph id=\"ph1\">`Service`</ph> to the solution.","pos":[14419,14490],"source":"Add a new Console Application project called `Service` to the solution."},{"content":"Add references to the following assemblies:","pos":[14491,14534]},{"content":"System.Activities.dll","pos":[14548,14569]},{"content":"System.ServiceModel.dll","pos":[14583,14606]},{"content":"System.ServiceModel.Activities.dll","pos":[14620,14654]},{"content":"Open the generated Program.cs file and the following code:","pos":[14664,14722]},{"content":"Add the following app.config file to the project.","pos":[15388,15437]},{"pos":[15878,15907],"content":"Create the client application","linkify":"Create the client application","nodes":[{"content":"Create the client application","pos":[0,29]}]},{"content":"Add a new Console Application project called <ph id=\"ph1\">`Client`</ph> to the solution.","pos":[15917,15987],"source":"Add a new Console Application project called `Client` to the solution."},{"content":"Add a reference to System.Activities.dll.","pos":[15988,16029]},{"content":"Open the program.cs file and add the following code.","pos":[16039,16091]},{"pos":[17972,17980],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[17984,18072],"content":"<bpt id=\"p1\">[</bpt>Workflow Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-services.md)</ept>","source":"[Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)"},{"pos":[18075,18204],"content":"<bpt id=\"p1\">[</bpt>Windows Communication Foundation Transactions Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/transactions-overview.md)</ept>","source":"[Windows Communication Foundation Transactions Overview](../../../../docs/framework/wcf/feature-details/transactions-overview.md)"}]}