{"content":"---\ntitle: \"Basic AJAX Service\"\nms.date: \"03/30/2017\"\nms.assetid: d66d0c91-0109-45a0-a901-f3e4667c2465\n---\n# Basic AJAX Service\nThis sample demonstrates how to use Windows Communication Foundation (WCF) to create a basic ASP.NET Asynchronous JavaScript and XML (AJAX) service (a service that you can access using JavaScript code from a Web browser client). The service uses the <xref:System.ServiceModel.Web.WebGetAttribute> attribute to ensure that the service responds to HTTP GET requests and is configured to use the JavaScript Object Notation (JSON) data format for responses.  \n  \n AJAX support in WCF is optimized for use with ASP.NET AJAX through the `ScriptManager` control. For an example of using WCF with ASP.NET AJAX, see the [AJAX Samples](ajax.md).  \n  \n> [!NOTE]\n>  The set-up procedure and build instructions for this sample are located at the end of this topic.  \n  \n In the following code, the <xref:System.ServiceModel.Web.WebGetAttribute> attribute is applied to the `Add` operation to ensure that the service responds to HTTP GET requests. The code uses GET for simplicity (you can construct an HTTP GET request from any Web browser). You can also use GET to enable caching. HTTP POST is the default in the absence of the `WebGetAttribute` attribute.  \n\n```csharp\n[ServiceContract(Namespace = \"SimpleAjaxService\")]\npublic interface ICalculator\n{\n    [WebGet]\n    double Add(double n1, double n2);\n    //Other operations omitted…\n}\n```\n\n The sample .svc file uses <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory>, which adds a <xref:System.ServiceModel.Description.WebScriptEndpoint> standard endpoint to the service. The endpoint is configured at an empty address relative to the .svc file. This means that the address of the service is `http://localhost/ServiceModelSamples/service.svc`, with no additional suffixes other than the operation name.  \n\n```svc\n<%@ServiceHost language=\"C#\" Debug=\"true\" Service=\"Microsoft.Samples.SimpleAjaxService.CalculatorService\" Factory=\"System.ServiceModel.Activation.WebScriptServiceHostFactory\" %>\n```\n\n The <xref:System.ServiceModel.Description.WebScriptEndpoint> is pre-configured to make the service accessible from an ASP.NET AJAX client page. The following section in Web.config can be used to make additional configuration changes to the endpoint. It can be removed if no extra changes are required.  \n  \n```xml  \n<system.serviceModel>  \n  <standardEndpoints>  \n    <webScriptEndpoint>  \n      <!-- Use this element to configure the endpoint -->  \n      <standardEndpoint name=\"\"  />  \n    </webScriptEndpoint>  \n  </standardEndpoints>  \n</system.serviceModel>  \n```  \n  \n The <xref:System.ServiceModel.Description.WebScriptEndpoint> sets the default data format for the service to JSON instead of XML. To invoke the service, navigate to `http://localhost/ServiceModelSamples/service.svc/Add?n1=100&n2=200` after completing the set up and build steps shown later in this topic. This testing functionality is enabled by the use of a HTTP GET request.  \n  \n The client Web page SimpleAjaxClientPage.aspx contains ASP.NET code to invoke the service whenever the user clicks one of the operation buttons on the page. The `ScriptManager` control is used to make a proxy to the service accessible through JavaScript.  \n\n```aspx-csharp\n<asp:ScriptManager ID=\"ScriptManager\" runat=\"server\">  \n    <Services>  \n        <asp:ServiceReference Path=\"service.svc\" />  \n    </Services>  \n</asp:ScriptManager>  \n```\n\n The local proxy is instantiated and operations are invoked using the following JavaScript code.  \n\n```javascript\n// Code for extracting arguments n1 and n2 omitted…  \n// Instantiate a service proxy  \nvar proxy = new SimpleAjaxService.ICalculator();  \n// Code for selecting operation omitted…  \nproxy.Add(parseFloat(n1), parseFloat(n2), onSuccess, onFail, null);  \n```\n\n If the service call succeeds, the code invokes the `onSuccess` handler and the result of the operation is displayed in a text box.  \n\n```javascript\nfunction onSuccess(mathResult){  \n     document.getElementById(\"result\").value = mathResult;  \n}\n```\n\n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Ajax\\SimpleAjaxService`  \n","nodes":[{"pos":[4,102],"embed":true,"restype":"x-metadata","content":"title: \"Basic AJAX Service\"\nms.date: \"03/30/2017\"\nms.assetid: d66d0c91-0109-45a0-a901-f3e4667c2465","nodes":[{"content":"Basic AJAX Service","nodes":[{"pos":[0,18],"content":"Basic AJAX Service","nodes":[{"content":"Basic AJAX Service","pos":[0,18]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[109,127],"content":"Basic AJAX Service","linkify":"Basic AJAX Service","nodes":[{"content":"Basic AJAX Service","pos":[0,18]}]},{"content":"This sample demonstrates how to use Windows Communication Foundation (WCF) to create a basic ASP.NET Asynchronous JavaScript and XML (AJAX) service (a service that you can access using JavaScript code from a Web browser client).","pos":[128,356]},{"content":"The service uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebGetAttribute&gt;</ph> attribute to ensure that the service responds to HTTP GET requests and is configured to use the JavaScript Object Notation (JSON) data format for responses.","pos":[357,581],"source":" The service uses the <xref:System.ServiceModel.Web.WebGetAttribute> attribute to ensure that the service responds to HTTP GET requests and is configured to use the JavaScript Object Notation (JSON) data format for responses."},{"content":"AJAX support in WCF is optimized for use with ASP.NET AJAX through the <ph id=\"ph1\">`ScriptManager`</ph> control.","pos":[588,683],"source":"AJAX support in WCF is optimized for use with ASP.NET AJAX through the `ScriptManager` control."},{"content":"For an example of using WCF with ASP.NET AJAX, see the <bpt id=\"p1\">[</bpt>AJAX Samples<ept id=\"p1\">](ajax.md)</ept>.","pos":[684,763],"source":" For an example of using WCF with ASP.NET AJAX, see the [AJAX Samples](ajax.md)."},{"pos":[771,879],"content":"[!NOTE]\n The set-up procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The set-up procedure and build instructions for this sample are located at the end of this topic.","pos":[9,106]}]},{"content":"In the following code, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebGetAttribute&gt;</ph> attribute is applied to the <ph id=\"ph2\">`Add`</ph> operation to ensure that the service responds to HTTP GET requests.","pos":[886,1061],"source":"In the following code, the <xref:System.ServiceModel.Web.WebGetAttribute> attribute is applied to the `Add` operation to ensure that the service responds to HTTP GET requests."},{"content":"The code uses GET for simplicity (you can construct an HTTP GET request from any Web browser).","pos":[1062,1156]},{"content":"You can also use GET to enable caching.","pos":[1157,1196]},{"content":"HTTP POST is the default in the absence of the <ph id=\"ph1\">`WebGetAttribute`</ph> attribute.","pos":[1197,1272],"source":" HTTP POST is the default in the absence of the `WebGetAttribute` attribute."},{"content":"The sample .svc file uses <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.WebScriptServiceHostFactory&gt;</ph>, which adds a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.WebScriptEndpoint&gt;</ph> standard endpoint to the service.","pos":[1459,1655],"source":"The sample .svc file uses <xref:System.ServiceModel.Activation.WebScriptServiceHostFactory>, which adds a <xref:System.ServiceModel.Description.WebScriptEndpoint> standard endpoint to the service."},{"content":"The endpoint is configured at an empty address relative to the .svc file.","pos":[1656,1729]},{"content":"This means that the address of the service is <ph id=\"ph1\">`http://localhost/ServiceModelSamples/service.svc`</ph>, with no additional suffixes other than the operation name.","pos":[1730,1886],"source":" This means that the address of the service is `http://localhost/ServiceModelSamples/service.svc`, with no additional suffixes other than the operation name."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.WebScriptEndpoint&gt;</ph> is pre-configured to make the service accessible from an ASP.NET AJAX client page.","pos":[2081,2224],"source":"The <xref:System.ServiceModel.Description.WebScriptEndpoint> is pre-configured to make the service accessible from an ASP.NET AJAX client page."},{"content":"The following section in Web.config can be used to make additional configuration changes to the endpoint.","pos":[2225,2330]},{"content":"It can be removed if no extra changes are required.","pos":[2331,2382]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.WebScriptEndpoint&gt;</ph> sets the default data format for the service to JSON instead of XML.","pos":[2656,2785],"source":"The <xref:System.ServiceModel.Description.WebScriptEndpoint> sets the default data format for the service to JSON instead of XML."},{"content":"To invoke the service, navigate to <ph id=\"ph1\">`http://localhost/ServiceModelSamples/service.svc/Add?n1=100&amp;n2=200`</ph> after completing the set up and build steps shown later in this topic.","pos":[2786,2960],"source":" To invoke the service, navigate to `http://localhost/ServiceModelSamples/service.svc/Add?n1=100&n2=200` after completing the set up and build steps shown later in this topic."},{"content":"This testing functionality is enabled by the use of a HTTP GET request.","pos":[2961,3032]},{"content":"The client Web page SimpleAjaxClientPage.aspx contains ASP.NET code to invoke the service whenever the user clicks one of the operation buttons on the page.","pos":[3039,3195]},{"content":"The <ph id=\"ph1\">`ScriptManager`</ph> control is used to make a proxy to the service accessible through JavaScript.","pos":[3196,3293],"source":" The `ScriptManager` control is used to make a proxy to the service accessible through JavaScript."},{"content":"The local proxy is instantiated and operations are invoked using the following JavaScript code.","pos":[3486,3581]},{"pos":[3856,3986],"content":"If the service call succeeds, the code invokes the <ph id=\"ph1\">`onSuccess`</ph> handler and the result of the operation is displayed in a text box.","source":"If the service call succeeds, the code invokes the `onSuccess` handler and the result of the operation is displayed in a text box."},{"pos":[4108,4240],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[4294,4604],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4605,4655]}]}