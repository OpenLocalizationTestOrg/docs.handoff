{"content":"---\ntitle: \"ServiceModel Registration Tool (ServiceModelReg.exe)\"\nms.date: \"03/30/2017\"\nms.assetid: 396ec5ae-e34f-4c64-a164-fcf50e86b6ac\n---\n# ServiceModel Registration Tool (ServiceModelReg.exe)\nThis command-line tool provides the ability to manage the registration of WCF and WF components on a single machine. Under normal circumstances you should not need to use this tool as WCF and WF components are configured when installed. But if you are experiencing problems with service activation, you can try to register the components using this tool.  \n  \n## Syntax  \n  \n```  \nServiceModelReg.exe[(-ia|-ua|-r)|((-i|-u) -c:<command>)] [-v|-q] [-nologo] [-?]  \n```  \n  \n## Remarks  \n The tool can be found in the following location:  \n  \n %SystemRoot%\\Microsoft.Net\\Framework\\v3.0\\Windows Communication Foundation\\  \n  \n> [!NOTE]\n>  When the ServiceModel Registration Tool is run on [!INCLUDE[wv](../../../includes/wv-md.md)], the **Windows Features** dialog may not reflect that the **Windows Communication Foundation HTTP Activation** option under **Microsoft .NET Framework 3.0** is turned on. The **Windows Features** dialog can be accessed by clicking **Start**, then click **Run** and then typing **OptionalFeatures**.  \n  \n The following tables describe the options that can be used with ServiceModelReg.exe.  \n  \n|Option|Description|  \n|------------|-----------------|  \n|`-ia`|Installs all WCF and WF components.|  \n|`-ua`|Uninstalls all WCF and WF components.|  \n|`-r`|Repairs all WCF and WF components.|  \n|`-i`|Installs WCF and WF components specified with –c.|  \n|`-u`|Uninstalls WCF and WF components specified with –c.|  \n|`-c`|Installs or uninstalls a component:<br /><br /> -   httpnamespace – HTTP Namespace Reservation<br />-   tcpportsharing – TCP port sharing service<br />-   tcpactivation – TCP activation service (unsupported on .NET 4 Client Profile)<br />-   namedpipeactivation – Named pipe activation service (unsupported on .NET 4 Client Profile<br />-   msmqactivation – MSMQ activation service (unsupported on .NET 4 Client Profile<br />-   etw – ETW event tracing manifests (Windows Vista or later)|  \n|`-q`|Quiet mode (only display error logging)|  \n|`-v`|Verbose mode.|  \n|`-nologo`|Suppresses the copyright and banner message.|  \n|`-?`|Displays help text|  \n  \n## Fixing the FileLoadException Error  \n If you installed previous versions of WCF on your machine, you may get a `FileLoadFoundException` error when you run the ServiceModelReg tool to register a new installation. This can happen even if you have manually removed files from the previous install, but left the machine.config settings intact.  \n  \n The error message is similar to the following.  \n  \n```  \nError: System.IO.FileLoadException: Could not load file or assembly 'System.ServiceModel, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)  \nFile name: 'System.ServiceModel, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'  \n```  \n  \n You should note from the error message that the System.ServiceModel Version 2.0.0.0 assembly was installed by an early Customer Technology Preview (CTP) release. The current version of the System.ServiceModel assembly released is 3.0.0.0 instead. Therefore, this issue is encountered when you want to install the official WCF release on a machine where an early CTP release of WCF was installed, but not completely uninstalled.  \n  \n ServiceModelReg.exe cannot clean up prior version entries, nor can it register the new version's entries. The only workaround is to manually edit machine.config. You can locate this file at the following location.  \n  \n```  \n%windir%\\Microsoft.NET\\Framework\\v2.0.50727\\config\\machine.config   \n```  \n  \n If you are running WCF on a 64-bit machine, you should also edit the same file at this location.  \n  \n```  \n%windir%\\Microsoft.NET\\Framework64\\v2.0.50727\\config\\machine.config   \n```  \n  \n Locate any XML nodes in this file that refer to \"System.ServiceModel, Version=2.0.0.0\", delete them and any child nodes. Save the file and re-run ServiceModelReg.exe resolves this problem.  \n  \n## Examples  \n The following examples show how to use the most common options of the ServiceModelReg.exe tool.  \n  \n```  \nServiceModelReg.exe -ia  \n  Installs all components  \nServiceModelReg.exe -i -c:httpnamespace -c:etw  \n  Installs HTTP namespace reservation and ETW manifests  \nServiceModelReg.exe -u -c:etw  \n  Uninstalls ETW manifests  \nServiceModelReg.exe -r  \n  Repairs an extended install  \n```\n","nodes":[{"pos":[4,136],"embed":true,"restype":"x-metadata","content":"title: \"ServiceModel Registration Tool (ServiceModelReg.exe)\"\nms.date: \"03/30/2017\"\nms.assetid: 396ec5ae-e34f-4c64-a164-fcf50e86b6ac","nodes":[{"content":"ServiceModel Registration Tool (ServiceModelReg.exe)","nodes":[{"pos":[0,52],"content":"ServiceModel Registration Tool (ServiceModelReg.exe)","nodes":[{"content":"ServiceModel Registration Tool (ServiceModelReg.exe)","pos":[0,52]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[143,195],"content":"ServiceModel Registration Tool (ServiceModelReg.exe)","linkify":"ServiceModel Registration Tool (ServiceModelReg.exe)","nodes":[{"content":"ServiceModel Registration Tool (ServiceModelReg.exe)","pos":[0,52]}]},{"content":"This command-line tool provides the ability to manage the registration of WCF and WF components on a single machine.","pos":[196,312]},{"content":"Under normal circumstances you should not need to use this tool as WCF and WF components are configured when installed.","pos":[313,432]},{"content":"But if you are experiencing problems with service activation, you can try to register the components using this tool.","pos":[433,550]},{"pos":[559,565],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[671,678],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The tool can be found in the following location:","pos":[682,730]},{"content":"%SystemRoot%\\Microsoft.Net\\Framework\\v3.0\\Windows Communication Foundation\\","pos":[737,812]},{"pos":[820,1222],"content":"[!NOTE]\n When the ServiceModel Registration Tool is run on [!INCLUDE[wv](../../../includes/wv-md.md)], the **Windows Features** dialog may not reflect that the **Windows Communication Foundation HTTP Activation** option under **Microsoft .NET Framework 3.0** is turned on. The **Windows Features** dialog can be accessed by clicking **Start**, then click **Run** and then typing **OptionalFeatures**.","leadings":["","> "],"nodes":[{"content":"When the ServiceModel Registration Tool is run on [!INCLUDE[wv](../../../includes/wv-md.md)], the **Windows Features** dialog may not reflect that the **Windows Communication Foundation HTTP Activation** option under **Microsoft .NET Framework 3.0** is turned on. The **Windows Features** dialog can be accessed by clicking **Start**, then click **Run** and then typing **OptionalFeatures**.","pos":[9,400],"nodes":[{"content":"When the ServiceModel Registration Tool is run on <ph id=\"ph1\">[!INCLUDE[wv](../../../includes/wv-md.md)]</ph>, the <bpt id=\"p1\">**</bpt>Windows Features<ept id=\"p1\">**</ept> dialog may not reflect that the <bpt id=\"p2\">**</bpt>Windows Communication Foundation HTTP Activation<ept id=\"p2\">**</ept> option under <bpt id=\"p3\">**</bpt>Microsoft .NET Framework 3.0<ept id=\"p3\">**</ept> is turned on.","pos":[0,263],"source":"When the ServiceModel Registration Tool is run on [!INCLUDE[wv](../../../includes/wv-md.md)], the **Windows Features** dialog may not reflect that the **Windows Communication Foundation HTTP Activation** option under **Microsoft .NET Framework 3.0** is turned on."},{"content":"The <bpt id=\"p1\">**</bpt>Windows Features<ept id=\"p1\">**</ept> dialog can be accessed by clicking <bpt id=\"p2\">**</bpt>Start<ept id=\"p2\">**</ept>, then click <bpt id=\"p3\">**</bpt>Run<ept id=\"p3\">**</ept> and then typing <bpt id=\"p4\">**</bpt>OptionalFeatures<ept id=\"p4\">**</ept>.","pos":[264,391],"source":" The **Windows Features** dialog can be accessed by clicking **Start**, then click **Run** and then typing **OptionalFeatures**."}]}]},{"content":"The following tables describe the options that can be used with ServiceModelReg.exe.","pos":[1229,1313]},{"content":"Option","pos":[1320,1326]},{"content":"Description","pos":[1327,1338]},{"content":"Installs all WCF and WF components.","pos":[1384,1419]},{"content":"Uninstalls all WCF and WF components.","pos":[1430,1467]},{"content":"Repairs all WCF and WF components.","pos":[1477,1511]},{"content":"Installs WCF and WF components specified with –c.","pos":[1521,1570]},{"content":"Uninstalls WCF and WF components specified with –c.","pos":[1580,1631]},{"content":"Installs or uninstalls a component:","pos":[1641,1676]},{"content":"-   httpnamespace – HTTP Namespace Reservation","pos":[1689,1735]},{"content":"-   tcpportsharing – TCP port sharing service","pos":[1741,1786]},{"content":"-   tcpactivation – TCP activation service (unsupported on .NET 4 Client Profile)","pos":[1792,1873]},{"content":"-   namedpipeactivation – Named pipe activation service (unsupported on .NET 4 Client Profile","pos":[1879,1972]},{"content":"-   msmqactivation – MSMQ activation service (unsupported on .NET 4 Client Profile","pos":[1978,2060]},{"content":"-   etw – ETW event tracing manifests (Windows Vista or later)","pos":[2066,2128]},{"content":"Quiet mode (only display error logging)","pos":[2138,2177]},{"content":"Verbose mode.","pos":[2187,2200]},{"content":"Suppresses the copyright and banner message.","pos":[2215,2259]},{"content":"Displays help text","pos":[2269,2287]},{"pos":[2297,2331],"content":"Fixing the FileLoadException Error","linkify":"Fixing the FileLoadException Error","nodes":[{"content":"Fixing the FileLoadException Error","pos":[0,34]}]},{"content":"If you installed previous versions of WCF on your machine, you may get a <ph id=\"ph1\">`FileLoadFoundException`</ph> error when you run the ServiceModelReg tool to register a new installation.","pos":[2335,2508],"source":"If you installed previous versions of WCF on your machine, you may get a `FileLoadFoundException` error when you run the ServiceModelReg tool to register a new installation."},{"content":"This can happen even if you have manually removed files from the previous install, but left the machine.config settings intact.","pos":[2509,2636]},{"content":"The error message is similar to the following.","pos":[2643,2689]},{"content":"You should note from the error message that the System.ServiceModel Version 2.0.0.0 assembly was installed by an early Customer Technology Preview (CTP) release.","pos":[3119,3280]},{"content":"The current version of the System.ServiceModel assembly released is 3.0.0.0 instead.","pos":[3281,3365]},{"content":"Therefore, this issue is encountered when you want to install the official WCF release on a machine where an early CTP release of WCF was installed, but not completely uninstalled.","pos":[3366,3546]},{"content":"ServiceModelReg.exe cannot clean up prior version entries, nor can it register the new version's entries.","pos":[3553,3658]},{"content":"The only workaround is to manually edit machine.config. You can locate this file at the following location.","pos":[3659,3766]},{"content":"If you are running WCF on a 64-bit machine, you should also edit the same file at this location.","pos":[3857,3953]},{"content":"Locate any XML nodes in this file that refer to \"System.ServiceModel, Version=2.0.0.0\", delete them and any child nodes.","pos":[4046,4166]},{"content":"Save the file and re-run ServiceModelReg.exe resolves this problem.","pos":[4167,4234]},{"pos":[4243,4251],"content":"Examples","linkify":"Examples","nodes":[{"content":"Examples","pos":[0,8]}]},{"content":"The following examples show how to use the most common options of the ServiceModelReg.exe tool.","pos":[4255,4350]}]}