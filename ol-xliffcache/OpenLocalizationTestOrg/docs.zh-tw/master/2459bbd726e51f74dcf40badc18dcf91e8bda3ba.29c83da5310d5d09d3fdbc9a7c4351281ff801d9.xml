{"content":"---\ntitle: \"Customizing the Appearance of an Existing Control by Creating a ControlTemplate | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-wpf\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"control contract [WPF]\"\n  - \"controls [WPF], visual structure changes\"\n  - \"ControlTemplate [WPF], customizing for existing controls\"\n  - \"skinning controls [WPF]\"\n  - \"controls [WPF], appearance specified by state\"\n  - \"templates [WPF], custom for existing controls\"\nms.assetid: 678dd116-43a2-4b8c-82b5-6b826f126e31\ncaps.latest.revision: 12\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# Customizing the Appearance of an Existing Control by Creating a ControlTemplate\n<a name=\"introduction\"></a> A<xref:System.Windows.Controls.ControlTemplate> specifies the visual structure and visual behavior of a control. You can customize the appearance of a control by giving it a new <xref:System.Windows.Controls.ControlTemplate>. When you create a <xref:System.Windows.Controls.ControlTemplate>, you replace the appearance of an existing control without changing its functionality. For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.  \n  \n This topic explains the various parts of a <xref:System.Windows.Controls.ControlTemplate>, demonstrates creating a simple <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>, and explains how to understand the control contract of a control so that you can customize its appearance. Because you create a <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you can change a control's appearance without writing any code. You can also use a designer, such as Microsoft Expression Blend, to create custom control templates. This topic shows examples in the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that customize the appearance of a <xref:System.Windows.Controls.Button> and lists the complete example at the end of the topic. For more information about using Expression Blend, see [Styling a control that supports templates](http://go.microsoft.com/fwlink/?LinkId=161153).  \n  \n The following illustrations show a <xref:System.Windows.Controls.Button> that uses the <xref:System.Windows.Controls.ControlTemplate> that is created in this topic.  \n  \n ![A button with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png \"NDP_ButtonNormal\")  \nA button that uses a custom control template  \n  \n ![A button with a red border.](../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png \"NDP_ButtonMouseOver\")  \nA button that uses a custom control template and has the mouse pointer over it  \n  \n  \n<a name=\"prerequisites\"></a>   \n## Prerequisites  \n This topic assumes that you understand how to create and use controls and styles as discussed in [Controls](../../../../docs/framework/wpf/controls/index.md). The concepts discussed in this topic apply to elements that inherit from the <xref:System.Windows.Controls.Control> class, except for the <xref:System.Windows.Controls.UserControl>. You cannot apply a <xref:System.Windows.Controls.ControlTemplate> to a <xref:System.Windows.Controls.UserControl>.  \n  \n<a name=\"when_you_should_create_a_controltemplate\"></a>   \n## When You Should Create a ControlTemplate  \n Controls have many properties, such as <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontFamily%2A>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited. For example, you can set the <xref:System.Windows.Controls.Control.Foreground%2A> property to blue and <xref:System.Windows.Controls.Control.FontStyle%2A> to italic on a <xref:System.Windows.Controls.CheckBox>.  \n  \n Without the ability to create a new <xref:System.Windows.Controls.ControlTemplate> for controls, all controls in every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel. By default, every <xref:System.Windows.Controls.CheckBox> has similar characteristics. For example, the content of the <xref:System.Windows.Controls.CheckBox> is always to the right of the selection indicator, and the check mark is always used to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.  \n  \n You create a <xref:System.Windows.Controls.ControlTemplate> when you want to customize the control's appearance beyond what setting the other properties on the control will do. In the example of the <xref:System.Windows.Controls.CheckBox>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <xref:System.Windows.Controls.CheckBox> is selected. You specify these changes in the <xref:System.Windows.Controls.ControlTemplate> of the <xref:System.Windows.Controls.CheckBox>.  \n  \n The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a default <xref:System.Windows.Controls.ControlTemplate>.  \n  \n ![A checkbox with the default control template.](../../../../docs/framework/wpf/controls/media/ndp-checkboxdefault.png \"NDP_CheckBoxDefault\")  \nA CheckBox that uses the default control template  \n  \n The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a custom <xref:System.Windows.Controls.ControlTemplate> to place the content of the <xref:System.Windows.Controls.CheckBox> above the selection indicator and displays an X when the <xref:System.Windows.Controls.CheckBox> is selected.  \n  \n ![A checkbox with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-checkboxcustom.png \"NDP_CheckBoxCustom\")  \nA CheckBox that uses a custom control template  \n  \n The<xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.CheckBox> in this sample is relatively complex, so this topic uses a simpler example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>.  \n  \n<a name=\"changing_the_visual_structure_of_a_control\"></a>   \n## Changing the Visual Structure of a Control  \n In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a control is often a composite <xref:System.Windows.FrameworkElement> objects. When you create a <xref:System.Windows.Controls.ControlTemplate>, you combine <xref:System.Windows.FrameworkElement> objects to build a single control. A <xref:System.Windows.Controls.ControlTemplate> must have only one <xref:System.Windows.FrameworkElement> as its root element. The root element usually contains other <xref:System.Windows.FrameworkElement> objects. The combination of objects makes up the control's visual structure.  \n  \n The following example creates a custom <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.Button>. The <xref:System.Windows.Controls.ControlTemplate> creates the visual structure of the <xref:System.Windows.Controls.Button>. This example does not change the button's appearance when you move the mouse pointer over it or click it. Changing the button's appearance when it is in a different state is discussed later in this topic.  \n  \n In this example, the visual structure consists of the following parts:  \n  \n-   A <xref:System.Windows.Controls.Border> named `RootElement` that serves as the template's root <xref:System.Windows.FrameworkElement>.  \n  \n-   A <xref:System.Windows.Controls.Grid> that is a child of `RootElement`.  \n  \n-   A <xref:System.Windows.Controls.ContentPresenter> that displays the button's content. The <xref:System.Windows.Controls.ContentPresenter> enables any type of object to be displayed.  \n  \n [!code-xml[VSMButtonTemplate#BasicTemplate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)]  \n  \n### Preserving the Functionality of a Control's Properties by Using TemplateBinding  \n When you create a new <xref:System.Windows.Controls.ControlTemplate>, you still might want to use the public properties to change the control's appearance. The [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension binds a property of an element that is in the <xref:System.Windows.Controls.ControlTemplate> to a public property that is defined by the control. When you use [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md), you enable properties on the control to act as parameters to the template. That is, when a property on a control is set, that value is passed on to the element that has the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) on it.  \n  \n The following example repeats the part of the preceding example that uses the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the button.  \n  \n [!code-xml[VSMButtonTemplate#TemplateBinding](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)]  \n  \n In this example, the <xref:System.Windows.Controls.Grid> has its <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=fullName> property template bound to <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName>. Because <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=fullName> is template bound, you can create multiple buttons that use the same <xref:System.Windows.Controls.ControlTemplate> and set the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName> to different values on each button. If <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName> was not template bound to a property of an element in the <xref:System.Windows.Controls.ControlTemplate>, setting the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName> of a button would have no impact on the button's appearance.  \n  \n Note that the names of the two properties do not need to be identical. In the preceding example, the <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=fullName> property of the <xref:System.Windows.Controls.Button> is template bound to the <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=fullName> property of the <xref:System.Windows.Controls.ContentPresenter>. This enables the content of the button to be positioned horizontally. <xref:System.Windows.Controls.ContentPresenter> does not have a property named `HorizontalContentAlignment`, but <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=fullName> can be bound to <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=fullName>. When you template bind a property, be sure that the target and source properties are the same type.  \n  \n The <xref:System.Windows.Controls.Control> class defines several properties that must be used by the control template to have an effect on the control when they are set. How the <xref:System.Windows.Controls.ControlTemplate> uses the property depends on the property. The <xref:System.Windows.Controls.ControlTemplate> must use the property in one of the following ways:  \n  \n-   An element in the <xref:System.Windows.Controls.ControlTemplate> template binds to the property.  \n  \n-   An element in the <xref:System.Windows.Controls.ControlTemplate> inherits the property from a parent <xref:System.Windows.FrameworkElement>.  \n  \n The following table lists the visual properties inherited by a control from the <xref:System.Windows.Controls.Control> class. It also indicates whether the default control template of a control uses the inherited property value or if it must be template bound.  \n  \n|Property|Usage method|  \n|--------------|------------------|  \n|<xref:System.Windows.Controls.Control.Background%2A>|Template binding|  \n|<xref:System.Windows.Controls.Control.BorderThickness%2A>|Template binding|  \n|<xref:System.Windows.Controls.Control.BorderBrush%2A>|Template binding|  \n|<xref:System.Windows.Controls.Control.FontFamily%2A>|Property inheritance or template binding|  \n|<xref:System.Windows.Controls.Control.FontSize%2A>|Property inheritance or template binding|  \n|<xref:System.Windows.Controls.Control.FontStretch%2A>|Property inheritance or template binding|  \n|<xref:System.Windows.Controls.Control.FontWeight%2A>|Property inheritance or template binding|  \n|<xref:System.Windows.Controls.Control.Foreground%2A>|Property inheritance or template binding|  \n|<xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A>|Template binding|  \n|<xref:System.Windows.Controls.Control.Padding%2A>|Template binding|  \n|<xref:System.Windows.Controls.Control.VerticalContentAlignment%2A>|Template binding|  \n  \n The table lists only the visual properties inherited from the <xref:System.Windows.Controls.Control> class. Apart from the properties listed in the table, a control may also inherit the <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, and <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> properties from the parent framework element.  \n  \n Also, if the <xref:System.Windows.Controls.ContentPresenter> is in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties. Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.ItemsPresenter> properties.  \n  \n The following example creates two buttons that use the <xref:System.Windows.Controls.ControlTemplate> defined in the preceding example. The example sets the <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontSize%2A> properties on each button. Setting the <xref:System.Windows.Controls.Control.Background%2A> property has an effect because it is template bound in the <xref:System.Windows.Controls.ControlTemplate>. Even though the <xref:System.Windows.Controls.Control.Foreground%2A> and <xref:System.Windows.Controls.Control.FontSize%2A> properties are not template bound, setting them has an effect because their values are inherited.  \n  \n [!code-xml[VSMButtonTemplate#ButtonDeclaration](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)]  \n  \n The preceding example produces output that is similar to the following illustration.  \n  \n ![Two buttons, one blue and one purple.](../../../../docs/framework/wpf/controls/media/ndp-buttontwo.png \"NDP_ButtonTwo\")  \nTwo buttons with different background colors  \n  \n<a name=\"changing_the_appearance_of_a_control_depending_on_its_state\"></a>   \n## Changing the Appearance of a Control Depending on Its State  \n The difference between a button with its default appearance and the button in the preceding example is that the default button subtly changes when it is in different states. For example, the default button's appearance changes when the button is pressed, or when the mouse pointer is over the button. Although the <xref:System.Windows.Controls.ControlTemplate> does not change the functionality of a control, it does change the control's visual behavior. A visual behavior describes the control appearance when it is in a certain state. To understand the difference between the functionality and visual behavior of a control, consider the button example. The button's functionality is to raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed.  \n  \n You use <xref:System.Windows.VisualState> objects to specify the appearance of a control when it is in a certain state. A <xref:System.Windows.VisualState> contains a <xref:System.Windows.Media.Animation.Storyboard> that changes the appearance of the elements that are in the <xref:System.Windows.Controls.ControlTemplate>. You do not have to write any code to make this occur because the control's logic changes state by using the <xref:System.Windows.VisualStateManager>. When the control enters the state that is specified by the <xref:System.Windows.VisualState.Name%2A?displayProperty=fullName> property, the <xref:System.Windows.Media.Animation.Storyboard> begins. When the control exits the state, the <xref:System.Windows.Media.Animation.Storyboard> stops.  \n  \n The following example shows the <xref:System.Windows.VisualState> that changes the appearance of a <xref:System.Windows.Controls.Button> when the mouse pointer is over it. The <xref:System.Windows.Media.Animation.Storyboard> changes the button's border color by changing the color of the `BorderBrush`. If you refer to the <xref:System.Windows.Controls.ControlTemplate> example at the beginning of this topic, you will recall that `BorderBrush` is the name of the <xref:System.Windows.Media.SolidColorBrush> that is assigned to the <xref:System.Windows.Controls.Border.Background%2A> of the <xref:System.Windows.Controls.Border>.  \n  \n [!code-xml[VSMButtonTemplate#4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)]  \n  \n The control is responsible for defining the states as part of its control contract, which is discussed in detail in [Customizing Other Controls by Understanding the Control Contract](#customizing_other_controls_by_understanding_the_control_contract) later in this topic. The following table lists the states that are specified for the <xref:System.Windows.Controls.Button>.  \n  \n|VisualState Name|VisualStateGroup Name|Description|  \n|----------------------|---------------------------|-----------------|  \n|Normal|CommonStates|The default state.|  \n|MouseOver|CommonStates|The mouse pointer is positioned over the control.|  \n|Pressed|CommonStates|The control is pressed.|  \n|Disabled|CommonStates|The control is disabled.|  \n|Focused|FocusStates|The control has focus.|  \n|Unfocused|FocusStates|The control does not have focus.|  \n  \n The <xref:System.Windows.Controls.Button> defines two state groups: the `CommonStates` group contains the `Normal`, `MouseOver`, `Pressed`, and `Disabled` states. The `FocusStates` group contains the `Focused` and `Unfocused` states. States in the same state group are mutually exclusive. The control is always in exactly one state per group. For example, a <xref:System.Windows.Controls.Button> can have focus even when the mouse pointer is not over it, so a <xref:System.Windows.Controls.Button> in the `Focused` state can be in the `MouseOver`, `Pressed`, or `Normal` state.  \n  \n You add <xref:System.Windows.VisualState> objects to <xref:System.Windows.VisualStateGroup> objects. You add <xref:System.Windows.VisualStateGroup> objects to the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName> attached property. The following example defines the <xref:System.Windows.VisualState> objects for the `Normal`, `MouseOver`, and `Pressed` states, which are all in the `CommonStates` group. The <xref:System.Windows.VisualState.Name%2A> of each <xref:System.Windows.VisualState> matches the name in the preceding table. The `Disabled` state and the states in the `FocusStates` group are omitted to keep the example short, but they are included in the entire example at the end of this topic.  \n  \n> [!NOTE]\n>  Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>.  \n  \n [!code-xml[VSMButtonTemplate#VisualStates](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)]  \n  \n The preceding example produces output that is similar to the following illustrations.  \n  \n ![A button with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png \"NDP_ButtonNormal\")  \nA button that uses a custom control template in the normal state  \n  \n ![A button with a red border.](../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png \"NDP_ButtonMouseOver\")  \nA button that uses a custom control template in the mouse over state  \n  \n ![The border is transparent on a pressed button.](../../../../docs/framework/wpf/controls/media/ndp-buttonpressed.png \"NDP_ButtonPressed\")  \nA button that uses a custom control template in the pressed state  \n  \n To find the visual states for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](../../../../docs/framework/wpf/controls/control-styles-and-templates.md).  \n  \n<a name=\"specifying_the_behavior_of_a_control_when_it_transitions_between_states\"></a>   \n## Specifying the Behavior of a Control When It Transitions Between States  \n In the preceding example, the appearance of the button also changes when the user clicks it, but unless the button is pressed for a full second, the user does not see the effect. By default, the animation takes one second to occur. Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <xref:System.Windows.Controls.ControlTemplate> in its default state.  \n  \n You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <xref:System.Windows.VisualTransition> objects to the <xref:System.Windows.Controls.ControlTemplate>. When you create a <xref:System.Windows.VisualTransition>, you specify one or more of the following:  \n  \n-   The time it takes for a transition between states to occur.  \n  \n-   Additional changes in the control's appearance that occur at the time of the transition.  \n  \n-   Which states the <xref:System.Windows.VisualTransition> is applied to.  \n  \n### Specifying the Duration of a Transition  \n You can specify how long a transition takes by setting the <xref:System.Windows.VisualTransition.GeneratedDuration%2A> property. The preceding example has a <xref:System.Windows.VisualState> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released. You can use a <xref:System.Windows.VisualTransition> to specify the amount of time it takes the control to transition into the pressed state. The following example specifies that the control takes one hundredth of a second to go into the pressed state.  \n  \n [!code-xml[VSMButtonTemplate#PressedTransition](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)]  \n  \n### Specifying Changes to the Control's Appearance During a Transition  \n The <xref:System.Windows.VisualTransition> contains a <xref:System.Windows.Media.Animation.Storyboard> that begins when the control transitions between states. For example, you can specify that a certain animation occurs when the control transitions from the `MouseOver` state to the `Normal` State. The following example creates a <xref:System.Windows.VisualTransition> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds.  \n  \n [!code-xml[VSMButtonTemplate#8](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)]  \n  \n### Specifying When a VisualTransition Is Applied  \n A <xref:System.Windows.VisualTransition> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states. In the preceding example, the <xref:System.Windows.VisualTransition> is applied when the control goes from the `MouseOver` state to the `Normal` state; in the example before that, the <xref:System.Windows.VisualTransition> is applied when the control goes into the `Pressed` state. You restrict when a <xref:System.Windows.VisualTransition> is applied by setting the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties. The following table describes the levels of restriction from most restrictive to least restrictive.  \n  \n|Type of restriction|Value of From|Value of To|  \n|-------------------------|-------------------|-----------------|  \n|From a specified state to another specified state|The name of a <xref:System.Windows.VisualState>|The name of a <xref:System.Windows.VisualState>|  \n|From any state to a specified state|Not set|The name of a <xref:System.Windows.VisualState>|  \n|From a specified state to any state|The name of a <xref:System.Windows.VisualState>|Not set|  \n|From any state to any other state|Not set|Not set|  \n  \n You can have multiple <xref:System.Windows.VisualTransition> objects in a <xref:System.Windows.VisualStateGroup> that refer to the same state, but they will be used in the order that the previous table specifies. In the following example, there are two <xref:System.Windows.VisualTransition> objects. When the control transitions from the `Pressed` state to the `MouseOver` state, the <xref:System.Windows.VisualTransition> that has both <xref:System.Windows.VisualTransition.From%2A> and <xref:System.Windows.VisualTransition.To%2A> set is used. When the control transitions from a state that is not `Pressed` to the `MouseOver` state, the other state is used.  \n  \n [!code-xml[VSMButtonTemplate#7](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)]  \n  \n The <xref:System.Windows.VisualStateGroup> has a <xref:System.Windows.VisualStateGroup.Transitions%2A> property that contains the <xref:System.Windows.VisualTransition> objects that apply to the <xref:System.Windows.VisualState> objects in the <xref:System.Windows.VisualStateGroup>. As the <xref:System.Windows.Controls.ControlTemplate> author, you are free to include any <xref:System.Windows.VisualTransition> you want. However, if the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties are set to state names that are not in the <xref:System.Windows.VisualStateGroup>, the <xref:System.Windows.VisualTransition> is ignored.  \n  \n The following example shows the <xref:System.Windows.VisualStateGroup> for the `CommonStates`. The example defines a <xref:System.Windows.VisualTransition> for each of the button's following transitions.  \n  \n-   To the `Pressed` state.  \n  \n-   To the `MouseOver` state.  \n  \n-   From the `Pressed` state to the `MouseOver` state.  \n  \n-   From the `MouseOver` state to the `Normal` state.  \n  \n [!code-xml[VSMButtonTemplate#VisualTransitions](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)]  \n  \n<a name=\"customizing_other_controls_by_understanding_the_control_contract\"></a>   \n## Customizing Other Controls by Understanding the Control Contract  \n A control that uses a <xref:System.Windows.Controls.ControlTemplate> to specify its visual structure (by using <xref:System.Windows.FrameworkElement> objects) and visual behavior (by using <xref:System.Windows.VisualState> objects) uses the parts control model. Many of the controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 use this model. The parts that a <xref:System.Windows.Controls.ControlTemplate> author needs to be aware of are communicated through the control contract. When you understand the parts of a control contract, you can customize the appearance of any control that uses the parts control model.  \n  \n A control contract has three elements:  \n  \n-   The visual elements that the control's logic uses.  \n  \n-   The states of the control and the group each state belongs to.  \n  \n-   The public properties that visually affect the control.  \n  \n### Visual Elements in the Control Contract  \n Sometimes a control's logic interacts with a <xref:System.Windows.FrameworkElement> that is in the <xref:System.Windows.Controls.ControlTemplate>. For example, the control might handle an event of one of its elements. When a control expects to find a particular <xref:System.Windows.FrameworkElement> in the <xref:System.Windows.Controls.ControlTemplate>, it must convey that information to the <xref:System.Windows.Controls.ControlTemplate> author. The control uses the <xref:System.Windows.TemplatePartAttribute> to convey the type of element that is expected, and what the name of the element should be. The <xref:System.Windows.Controls.Button> does not have <xref:System.Windows.FrameworkElement> parts in its control contract, but other controls, such as the <xref:System.Windows.Controls.ComboBox>, do.  \n  \n The following example shows the <xref:System.Windows.TemplatePartAttribute> objects that are specified on the <xref:System.Windows.Controls.ComboBox> class. The logic of <xref:System.Windows.Controls.ComboBox> expects to find a <xref:System.Windows.Controls.TextBox> named `PART_EditableTextBox` and a <xref:System.Windows.Controls.Primitives.Popup> named `PART_Popup` in its <xref:System.Windows.Controls.ControlTemplate>.  \n  \n [!code-csharp[VSMButtonTemplate#ComboBoxContract](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)]\n [!code-vb[VSMButtonTemplate#ComboBoxContract](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)]  \n  \n The following example shows a simplified <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.ComboBox> that includes the elements that are specified by the <xref:System.Windows.TemplatePartAttribute> objects on the <xref:System.Windows.Controls.ComboBox> class.  \n  \n [!code-xml[VSMButtonTemplate#ComboBoxTemplate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)]  \n  \n### States in the Control Contract  \n The states of a control are also a part of the control contract. The example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button> shows how to specify the appearance of a <xref:System.Windows.Controls.Button> depending on its states. You create a <xref:System.Windows.VisualState> for each specified state and put all <xref:System.Windows.VisualState> objects that share a <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in a <xref:System.Windows.VisualStateGroup>, as described in [Changing the Appearance of a Control Depending on Its State](#changing_the_appearance_of_a_control_depending_on_its_state) earlier in this topic. Third-party controls should specify states by using the <xref:System.Windows.TemplateVisualStateAttribute>, which enables designer tools, such as Expression Blend, to expose the control's states for authoring control templates.  \n  \n To find the control contract for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](../../../../docs/framework/wpf/controls/control-styles-and-templates.md).  \n  \n### Properties in the Control Contract  \n The public properties that visually affect the control are also included in the control contract. You can set these properties to change the appearance of the control without creating a new <xref:System.Windows.Controls.ControlTemplate>. You can also use the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the <xref:System.Windows.Controls.Button>.  \n  \n The following example shows the control contract for the button.  \n  \n [!code-csharp[VSMButtonTemplate#ButtonContract](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)]\n [!code-vb[VSMButtonTemplate#ButtonContract](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)]  \n  \n When creating a <xref:System.Windows.Controls.ControlTemplate>, it is often easiest to begin with an existing <xref:System.Windows.Controls.ControlTemplate> and make changes to it. You can do one of the following to change an existing <xref:System.Windows.Controls.ControlTemplate>:  \n  \n-   Use a designer, such as Expression Blend, which provides a graphical user interface for creating control templates. For more information, see [Styling a control that supports templates](http://go.microsoft.com/fwlink/?LinkId=161153).  \n  \n-   Get the default <xref:System.Windows.Controls.ControlTemplate> and edit it. To find the default control templates that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Default WPF Themes](http://go.microsoft.com/fwlink/?LinkID=158252).  \n  \n<a name=\"complete_example\"></a>   \n## Complete Example  \n The following example shows the complete <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.ControlTemplate> that is discussed in this topic.  \n  \n [!code-xml[VSMButtonTemplate#3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)]  \n  \n## See Also  \n [Styling and Templating](../../../../docs/framework/wpf/controls/styling-and-templating.md)","nodes":[{"pos":[4,704],"embed":true,"restype":"x-metadata","content":"title: \"Customizing the Appearance of an Existing Control by Creating a ControlTemplate | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-wpf\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"control contract [WPF]\"\n  - \"controls [WPF], visual structure changes\"\n  - \"ControlTemplate [WPF], customizing for existing controls\"\n  - \"skinning controls [WPF]\"\n  - \"controls [WPF], appearance specified by state\"\n  - \"templates [WPF], custom for existing controls\"\nms.assetid: 678dd116-43a2-4b8c-82b5-6b826f126e31\ncaps.latest.revision: 12\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"","nodes":[{"content":"Customizing the Appearance of an Existing Control by Creating a ControlTemplate | Microsoft Docs","nodes":[{"pos":[0,96],"content":"Customizing the Appearance of an Existing Control by Creating a ControlTemplate | Microsoft Docs","nodes":[{"content":"Customizing the Appearance of an Existing Control by Creating a ControlTemplate | Microsoft Docs","pos":[0,96]}]}],"path":["title"]}],"yml":true},{"pos":[711,790],"content":"Customizing the Appearance of an Existing Control by Creating a ControlTemplate","linkify":"Customizing the Appearance of an Existing Control by Creating a ControlTemplate","nodes":[{"content":"Customizing the Appearance of an Existing Control by Creating a ControlTemplate","pos":[0,79]}]},{"content":"<bpt id=\"p1\">&lt;a name=\"introduction\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept> A<ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> specifies the visual structure and visual behavior of a control.","pos":[791,931],"source":"<a name=\"introduction\"></a> A<xref:System.Windows.Controls.ControlTemplate> specifies the visual structure and visual behavior of a control."},{"content":"You can customize the appearance of a control by giving it a new <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[932,1044],"source":" You can customize the appearance of a control by giving it a new <xref:System.Windows.Controls.ControlTemplate>."},{"content":"When you create a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, you replace the appearance of an existing control without changing its functionality.","pos":[1045,1196],"source":" When you create a <xref:System.Windows.Controls.ControlTemplate>, you replace the appearance of an existing control without changing its functionality."},{"content":"For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.ButtonBase.Click&gt;</ph> event.","pos":[1197,1399],"source":" For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event."},{"content":"This topic explains the various parts of a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, demonstrates creating a simple <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Button&gt;</ph>, and explains how to understand the control contract of a control so that you can customize its appearance.","pos":[1406,1726],"source":"This topic explains the various parts of a <xref:System.Windows.Controls.ControlTemplate>, demonstrates creating a simple <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>, and explains how to understand the control contract of a control so that you can customize its appearance."},{"content":"Because you create a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> in <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph>, you can change a control's appearance without writing any code.","pos":[1727,1934],"source":" Because you create a <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you can change a control's appearance without writing any code."},{"content":"You can also use a designer, such as Microsoft Expression Blend, to create custom control templates.","pos":[1935,2035]},{"content":"This topic shows examples in the <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> that customize the appearance of a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph> and lists the complete example at the end of the topic.","pos":[2036,2269],"source":" This topic shows examples in the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that customize the appearance of a <xref:System.Windows.Controls.Button> and lists the complete example at the end of the topic."},{"content":"For more information about using Expression Blend, see <bpt id=\"p1\">[</bpt>Styling a control that supports templates<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=161153)</ept>.","pos":[2270,2416],"source":" For more information about using Expression Blend, see [Styling a control that supports templates](http://go.microsoft.com/fwlink/?LinkId=161153)."},{"content":"The following illustrations show a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph> that uses the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> that is created in this topic.","pos":[2423,2587],"source":"The following illustrations show a <xref:System.Windows.Controls.Button> that uses the <xref:System.Windows.Controls.ControlTemplate> that is created in this topic."},{"content":"<bpt id=\"p1\">![</bpt>A button with a custom control template.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png \"</bpt>NDP_ButtonNormal<ept id=\"p2\">\")</ept>","pos":[2594,2724],"source":"![A button with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png \"NDP_ButtonNormal\")"},{"content":"A button that uses a custom control template","pos":[2727,2771]},{"content":"<bpt id=\"p1\">![</bpt>A button with a red border.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png \"</bpt>NDP_ButtonMouseOver<ept id=\"p2\">\")</ept>","pos":[2778,2901],"source":"![A button with a red border.](../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png \"NDP_ButtonMouseOver\")"},{"content":"A button that uses a custom control template and has the mouse pointer over it","pos":[2904,2982]},{"pos":[3026,3039],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"This topic assumes that you understand how to create and use controls and styles as discussed in <bpt id=\"p1\">[</bpt>Controls<ept id=\"p1\">](../../../../docs/framework/wpf/controls/index.md)</ept>.","pos":[3043,3201],"source":"This topic assumes that you understand how to create and use controls and styles as discussed in [Controls](../../../../docs/framework/wpf/controls/index.md)."},{"content":"The concepts discussed in this topic apply to elements that inherit from the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control&gt;</ph> class, except for the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.UserControl&gt;</ph>.","pos":[3202,3383],"source":" The concepts discussed in this topic apply to elements that inherit from the <xref:System.Windows.Controls.Control> class, except for the <xref:System.Windows.Controls.UserControl>."},{"content":"You cannot apply a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> to a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.UserControl&gt;</ph>.","pos":[3384,3498],"source":" You cannot apply a <xref:System.Windows.Controls.ControlTemplate> to a <xref:System.Windows.Controls.UserControl>."},{"pos":[3566,3606],"content":"When You Should Create a ControlTemplate","linkify":"When You Should Create a ControlTemplate","nodes":[{"content":"When You Should Create a ControlTemplate","pos":[0,40]}]},{"content":"Controls have many properties, such as <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Border.Background%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Control.Foreground%2A&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.FontFamily%2A&gt;</ph>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited.","pos":[3610,3963],"source":"Controls have many properties, such as <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontFamily%2A>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited."},{"content":"For example, you can set the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.Foreground%2A&gt;</ph> property to blue and <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Control.FontStyle%2A&gt;</ph> to italic on a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph>.","pos":[3964,4174],"source":" For example, you can set the <xref:System.Windows.Controls.Control.Foreground%2A> property to blue and <xref:System.Windows.Controls.Control.FontStyle%2A> to italic on a <xref:System.Windows.Controls.CheckBox>."},{"content":"Without the ability to create a new <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for controls, all controls in every <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel.","pos":[4181,4523],"source":"Without the ability to create a new <xref:System.Windows.Controls.ControlTemplate> for controls, all controls in every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel."},{"content":"By default, every <ph id=\"ph1\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> has similar characteristics.","pos":[4524,4610],"source":" By default, every <xref:System.Windows.Controls.CheckBox> has similar characteristics."},{"content":"For example, the content of the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> is always to the right of the selection indicator, and the check mark is always used to indicate that the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> is selected.","pos":[4611,4841],"source":" For example, the content of the <xref:System.Windows.Controls.CheckBox> is always to the right of the selection indicator, and the check mark is always used to indicate that the <xref:System.Windows.Controls.CheckBox> is selected."},{"content":"You create a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> when you want to customize the control's appearance beyond what setting the other properties on the control will do.","pos":[4848,5024],"source":"You create a <xref:System.Windows.Controls.ControlTemplate> when you want to customize the control's appearance beyond what setting the other properties on the control will do."},{"content":"In the example of the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> is selected.","pos":[5025,5266],"source":" In the example of the <xref:System.Windows.Controls.CheckBox>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <xref:System.Windows.Controls.CheckBox> is selected."},{"content":"You specify these changes in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> of the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph>.","pos":[5267,5394],"source":" You specify these changes in the <xref:System.Windows.Controls.ControlTemplate> of the <xref:System.Windows.Controls.CheckBox>."},{"content":"The following illustration shows a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> that uses a default <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[5401,5543],"source":"The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a default <xref:System.Windows.Controls.ControlTemplate>."},{"content":"<bpt id=\"p1\">![</bpt>A checkbox with the default control template.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-checkboxdefault.png \"</bpt>NDP_CheckBoxDefault<ept id=\"p2\">\")</ept>","pos":[5550,5691],"source":"![A checkbox with the default control template.](../../../../docs/framework/wpf/controls/media/ndp-checkboxdefault.png \"NDP_CheckBoxDefault\")"},{"content":"A CheckBox that uses the default control template","pos":[5694,5743]},{"content":"The following illustration shows a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> that uses a custom <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> to place the content of the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> above the selection indicator and displays an X when the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> is selected.","pos":[5750,6068],"source":"The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a custom <xref:System.Windows.Controls.ControlTemplate> to place the content of the <xref:System.Windows.Controls.CheckBox> above the selection indicator and displays an X when the <xref:System.Windows.Controls.CheckBox> is selected."},{"content":"<bpt id=\"p1\">![</bpt>A checkbox with a custom control template.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-checkboxcustom.png \"</bpt>NDP_CheckBoxCustom<ept id=\"p2\">\")</ept>","pos":[6075,6211],"source":"![A checkbox with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-checkboxcustom.png \"NDP_CheckBoxCustom\")"},{"content":"A CheckBox that uses a custom control template","pos":[6214,6260]},{"content":"The<ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.CheckBox&gt;</ph> in this sample is relatively complex, so this topic uses a simpler example of creating a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for a <ph id=\"ph4\">&lt;xref:System.Windows.Controls.Button&gt;</ph>.","pos":[6267,6545],"source":"The<xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.CheckBox> in this sample is relatively complex, so this topic uses a simpler example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>."},{"pos":[6615,6657],"content":"Changing the Visual Structure of a Control","linkify":"Changing the Visual Structure of a Control","nodes":[{"content":"Changing the Visual Structure of a Control","pos":[0,42]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, a control is often a composite <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> objects.","pos":[6661,6825],"source":"In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a control is often a composite <xref:System.Windows.FrameworkElement> objects."},{"content":"When you create a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, you combine <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> objects to build a single control.","pos":[6826,6977],"source":" When you create a <xref:System.Windows.Controls.ControlTemplate>, you combine <xref:System.Windows.FrameworkElement> objects to build a single control."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> must have only one <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> as its root element.","pos":[6978,7105],"source":" A <xref:System.Windows.Controls.ControlTemplate> must have only one <xref:System.Windows.FrameworkElement> as its root element."},{"content":"The root element usually contains other <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> objects.","pos":[7106,7193],"source":" The root element usually contains other <xref:System.Windows.FrameworkElement> objects."},{"content":"The combination of objects makes up the control's visual structure.","pos":[7194,7261]},{"content":"The following example creates a custom <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph>.","pos":[7268,7400],"source":"The following example creates a custom <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.Button>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> creates the visual structure of the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph>.","pos":[7401,7526],"source":" The <xref:System.Windows.Controls.ControlTemplate> creates the visual structure of the <xref:System.Windows.Controls.Button>."},{"content":"This example does not change the button's appearance when you move the mouse pointer over it or click it.","pos":[7527,7632]},{"content":"Changing the button's appearance when it is in a different state is discussed later in this topic.","pos":[7633,7731]},{"content":"In this example, the visual structure consists of the following parts:","pos":[7738,7808]},{"pos":[7818,7952],"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Border&gt;</ph> named <ph id=\"ph2\">`RootElement`</ph> that serves as the template's root <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkElement&gt;</ph>.","source":"A <xref:System.Windows.Controls.Border> named `RootElement` that serves as the template's root <xref:System.Windows.FrameworkElement>."},{"pos":[7962,8033],"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Grid&gt;</ph> that is a child of <ph id=\"ph2\">`RootElement`</ph>.","source":"A <xref:System.Windows.Controls.Grid> that is a child of `RootElement`."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph> that displays the button's content.","pos":[8043,8128],"source":"A <xref:System.Windows.Controls.ContentPresenter> that displays the button's content."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph> enables any type of object to be displayed.","pos":[8129,8224],"source":" The <xref:System.Windows.Controls.ContentPresenter> enables any type of object to be displayed."},{"pos":[8231,8385],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#BasicTemplate<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#BasicTemplate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)]"},{"pos":[8395,8474],"content":"Preserving the Functionality of a Control's Properties by Using TemplateBinding","linkify":"Preserving the Functionality of a Control's Properties by Using TemplateBinding","nodes":[{"content":"Preserving the Functionality of a Control's Properties by Using TemplateBinding","pos":[0,79]}]},{"content":"When you create a new <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, you still might want to use the public properties to change the control's appearance.","pos":[8478,8633],"source":"When you create a new <xref:System.Windows.Controls.ControlTemplate>, you still might want to use the public properties to change the control's appearance."},{"content":"The <bpt id=\"p1\">[</bpt>TemplateBinding<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md)</ept> markup extension binds a property of an element that is in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> to a public property that is defined by the control.","pos":[8634,8895],"source":" The [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension binds a property of an element that is in the <xref:System.Windows.Controls.ControlTemplate> to a public property that is defined by the control."},{"content":"When you use <bpt id=\"p1\">[</bpt>TemplateBinding<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md)</ept>, you enable properties on the control to act as parameters to the template.","pos":[8896,9079],"source":" When you use [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md), you enable properties on the control to act as parameters to the template."},{"content":"That is, when a property on a control is set, that value is passed on to the element that has the <bpt id=\"p1\">[</bpt>TemplateBinding<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md)</ept> on it.","pos":[9080,9279],"source":" That is, when a property on a control is set, that value is passed on to the element that has the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) on it."},{"pos":[9286,9622],"content":"The following example repeats the part of the preceding example that uses the <bpt id=\"p1\">[</bpt>TemplateBinding<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md)</ept> markup extension to bind properties of elements that are in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> to public properties that are defined by the button.","source":"The following example repeats the part of the preceding example that uses the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the button."},{"pos":[9629,9787],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#TemplateBinding<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#TemplateBinding](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)]"},{"content":"In this example, the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Grid&gt;</ph> has its <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Panel.Background%2A?displayProperty=fullName&gt;</ph> property template bound to <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName&gt;</ph>.","pos":[9794,10040],"source":"In this example, the <xref:System.Windows.Controls.Grid> has its <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=fullName> property template bound to <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName>."},{"content":"Because <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Panel.Background%2A?displayProperty=fullName&gt;</ph> is template bound, you can create multiple buttons that use the same <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> and set the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName&gt;</ph> to different values on each button.","pos":[10041,10366],"source":" Because <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=fullName> is template bound, you can create multiple buttons that use the same <xref:System.Windows.Controls.ControlTemplate> and set the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName> to different values on each button."},{"content":"If <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName&gt;</ph> was not template bound to a property of an element in the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, setting the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName&gt;</ph> of a button would have no impact on the button's appearance.","pos":[10367,10704],"source":" If <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName> was not template bound to a property of an element in the <xref:System.Windows.Controls.ControlTemplate>, setting the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=fullName> of a button would have no impact on the button's appearance."},{"content":"Note that the names of the two properties do not need to be identical.","pos":[10711,10781]},{"content":"In the preceding example, the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=fullName&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph> is template bound to the <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=fullName&gt;</ph> property of the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph>.","pos":[10782,11136],"source":" In the preceding example, the <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=fullName> property of the <xref:System.Windows.Controls.Button> is template bound to the <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=fullName> property of the <xref:System.Windows.Controls.ContentPresenter>."},{"content":"This enables the content of the button to be positioned horizontally.","pos":[11137,11206]},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph> does not have a property named <ph id=\"ph2\">`HorizontalContentAlignment`</ph>, but <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=fullName&gt;</ph> can be bound to <ph id=\"ph4\">&lt;xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=fullName&gt;</ph>.","pos":[11207,11517],"source":" <xref:System.Windows.Controls.ContentPresenter> does not have a property named `HorizontalContentAlignment`, but <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=fullName> can be bound to <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=fullName>."},{"content":"When you template bind a property, be sure that the target and source properties are the same type.","pos":[11518,11617]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control&gt;</ph> class defines several properties that must be used by the control template to have an effect on the control when they are set.","pos":[11624,11793],"source":"The <xref:System.Windows.Controls.Control> class defines several properties that must be used by the control template to have an effect on the control when they are set."},{"content":"How the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> uses the property depends on the property.","pos":[11794,11891],"source":" How the <xref:System.Windows.Controls.ControlTemplate> uses the property depends on the property."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> must use the property in one of the following ways:","pos":[11892,11994],"source":" The <xref:System.Windows.Controls.ControlTemplate> must use the property in one of the following ways:"},{"content":"An element in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> template binds to the property.","pos":[12004,12100],"source":"An element in the <xref:System.Windows.Controls.ControlTemplate> template binds to the property."},{"content":"An element in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> inherits the property from a parent <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph>.","pos":[12110,12250],"source":"An element in the <xref:System.Windows.Controls.ControlTemplate> inherits the property from a parent <xref:System.Windows.FrameworkElement>."},{"content":"The following table lists the visual properties inherited by a control from the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control&gt;</ph> class.","pos":[12257,12382],"source":"The following table lists the visual properties inherited by a control from the <xref:System.Windows.Controls.Control> class."},{"content":"It also indicates whether the default control template of a control uses the inherited property value or if it must be template bound.","pos":[12383,12517]},{"content":"Property","pos":[12524,12532]},{"content":"Usage method","pos":[12533,12545]},{"content":"Template binding","pos":[12641,12657]},{"content":"Template binding","pos":[12720,12736]},{"content":"Template binding","pos":[12795,12811]},{"content":"Property inheritance or template binding","pos":[12869,12909]},{"content":"Property inheritance or template binding","pos":[12965,13005]},{"content":"Property inheritance or template binding","pos":[13064,13104]},{"content":"Property inheritance or template binding","pos":[13162,13202]},{"content":"Property inheritance or template binding","pos":[13260,13300]},{"content":"Template binding","pos":[13374,13390]},{"content":"Template binding","pos":[13445,13461]},{"content":"Template binding","pos":[13533,13549]},{"content":"The table lists only the visual properties inherited from the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control&gt;</ph> class.","pos":[13557,13664],"source":"The table lists only the visual properties inherited from the <xref:System.Windows.Controls.Control> class."},{"content":"Apart from the properties listed in the table, a control may also inherit the <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.DataContext%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement.Language%2A&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Windows.Controls.TextBlock.TextDecorations%2A&gt;</ph> properties from the parent framework element.","pos":[13665,13959],"source":" Apart from the properties listed in the table, a control may also inherit the <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, and <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> properties from the parent framework element."},{"content":"Also, if the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph> is in the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> of a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ContentControl&gt;</ph>, the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph> will automatically bind to the <ph id=\"ph5\">&lt;xref:System.Windows.Controls.ContentControl.ContentTemplate%2A&gt;</ph> and <ph id=\"ph6\">&lt;xref:System.Windows.Controls.ContentControl.Content%2A&gt;</ph> properties.","pos":[13966,14356],"source":"Also, if the <xref:System.Windows.Controls.ContentPresenter> is in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties."},{"content":"Likewise, an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsPresenter&gt;</ph> that is in the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> of an <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> will automatically bind to the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ItemsControl.Items%2A&gt;</ph> and <ph id=\"ph5\">&lt;xref:System.Windows.Controls.ItemsPresenter&gt;</ph> properties.","pos":[14357,14673],"source":" Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.ItemsPresenter> properties."},{"content":"The following example creates two buttons that use the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> defined in the preceding example.","pos":[14680,14815],"source":"The following example creates two buttons that use the <xref:System.Windows.Controls.ControlTemplate> defined in the preceding example."},{"content":"The example sets the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.Background%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Control.Foreground%2A&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.FontSize%2A&gt;</ph> properties on each button.","pos":[14816,15026],"source":" The example sets the <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontSize%2A> properties on each button."},{"content":"Setting the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.Background%2A&gt;</ph> property has an effect because it is template bound in the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[15027,15198],"source":" Setting the <xref:System.Windows.Controls.Control.Background%2A> property has an effect because it is template bound in the <xref:System.Windows.Controls.ControlTemplate>."},{"content":"Even though the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.Foreground%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Control.FontSize%2A&gt;</ph> properties are not template bound, setting them has an effect because their values are inherited.","pos":[15199,15420],"source":" Even though the <xref:System.Windows.Controls.Control.Foreground%2A> and <xref:System.Windows.Controls.Control.FontSize%2A> properties are not template bound, setting them has an effect because their values are inherited."},{"pos":[15427,15589],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#ButtonDeclaration<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#ButtonDeclaration](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)]"},{"content":"The preceding example produces output that is similar to the following illustration.","pos":[15596,15680]},{"content":"<bpt id=\"p1\">![</bpt>Two buttons, one blue and one purple.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-buttontwo.png \"</bpt>NDP_ButtonTwo<ept id=\"p2\">\")</ept>","pos":[15687,15808],"source":"![Two buttons, one blue and one purple.](../../../../docs/framework/wpf/controls/media/ndp-buttontwo.png \"NDP_ButtonTwo\")"},{"content":"Two buttons with different background colors","pos":[15811,15855]},{"pos":[15942,16001],"content":"Changing the Appearance of a Control Depending on Its State","linkify":"Changing the Appearance of a Control Depending on Its State","nodes":[{"content":"Changing the Appearance of a Control Depending on Its State","pos":[0,59]}]},{"content":"The difference between a button with its default appearance and the button in the preceding example is that the default button subtly changes when it is in different states.","pos":[16005,16178]},{"content":"For example, the default button's appearance changes when the button is pressed, or when the mouse pointer is over the button.","pos":[16179,16305]},{"content":"Although the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> does not change the functionality of a control, it does change the control's visual behavior.","pos":[16306,16459],"source":" Although the <xref:System.Windows.Controls.ControlTemplate> does not change the functionality of a control, it does change the control's visual behavior."},{"content":"A visual behavior describes the control appearance when it is in a certain state.","pos":[16460,16541]},{"content":"To understand the difference between the functionality and visual behavior of a control, consider the button example.","pos":[16542,16659]},{"content":"The button's functionality is to raise the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Primitives.ButtonBase.Click&gt;</ph> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed.","pos":[16660,16882],"source":" The button's functionality is to raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed."},{"content":"You use <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> objects to specify the appearance of a control when it is in a certain state.","pos":[16889,17008],"source":"You use <xref:System.Windows.VisualState> objects to specify the appearance of a control when it is in a certain state."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> contains a <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> that changes the appearance of the elements that are in the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[17009,17212],"source":" A <xref:System.Windows.VisualState> contains a <xref:System.Windows.Media.Animation.Storyboard> that changes the appearance of the elements that are in the <xref:System.Windows.Controls.ControlTemplate>."},{"content":"You do not have to write any code to make this occur because the control's logic changes state by using the <ph id=\"ph1\">&lt;xref:System.Windows.VisualStateManager&gt;</ph>.","pos":[17213,17362],"source":" You do not have to write any code to make this occur because the control's logic changes state by using the <xref:System.Windows.VisualStateManager>."},{"content":"When the control enters the state that is specified by the <ph id=\"ph1\">&lt;xref:System.Windows.VisualState.Name%2A?displayProperty=fullName&gt;</ph> property, the <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> begins.","pos":[17363,17559],"source":" When the control enters the state that is specified by the <xref:System.Windows.VisualState.Name%2A?displayProperty=fullName> property, the <xref:System.Windows.Media.Animation.Storyboard> begins."},{"content":"When the control exits the state, the <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> stops.","pos":[17560,17653],"source":" When the control exits the state, the <xref:System.Windows.Media.Animation.Storyboard> stops."},{"content":"The following example shows the <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> that changes the appearance of a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph> when the mouse pointer is over it.","pos":[17660,17831],"source":"The following example shows the <xref:System.Windows.VisualState> that changes the appearance of a <xref:System.Windows.Controls.Button> when the mouse pointer is over it."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> changes the button's border color by changing the color of the <ph id=\"ph2\">`BorderBrush`</ph>.","pos":[17832,17962],"source":" The <xref:System.Windows.Media.Animation.Storyboard> changes the button's border color by changing the color of the `BorderBrush`."},{"content":"If you refer to the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> example at the beginning of this topic, you will recall that <ph id=\"ph2\">`BorderBrush`</ph> is the name of the <ph id=\"ph3\">&lt;xref:System.Windows.Media.SolidColorBrush&gt;</ph> that is assigned to the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.Border.Background%2A&gt;</ph> of the <ph id=\"ph5\">&lt;xref:System.Windows.Controls.Border&gt;</ph>.","pos":[17963,18289],"source":" If you refer to the <xref:System.Windows.Controls.ControlTemplate> example at the beginning of this topic, you will recall that `BorderBrush` is the name of the <xref:System.Windows.Media.SolidColorBrush> that is assigned to the <xref:System.Windows.Controls.Border.Background%2A> of the <xref:System.Windows.Controls.Border>."},{"pos":[18296,18427],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)]"},{"content":"The control is responsible for defining the states as part of its control contract, which is discussed in detail in <bpt id=\"p1\">[</bpt>Customizing Other Controls by Understanding the Control Contract<ept id=\"p1\">](#customizing_other_controls_by_understanding_the_control_contract)</ept> later in this topic.","pos":[18434,18704],"source":"The control is responsible for defining the states as part of its control contract, which is discussed in detail in [Customizing Other Controls by Understanding the Control Contract](#customizing_other_controls_by_understanding_the_control_contract) later in this topic."},{"content":"The following table lists the states that are specified for the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph>.","pos":[18705,18807],"source":" The following table lists the states that are specified for the <xref:System.Windows.Controls.Button>."},{"content":"VisualState Name","pos":[18814,18830]},{"content":"VisualStateGroup Name","pos":[18831,18852]},{"content":"Description","pos":[18853,18864]},{"content":"Normal","pos":[18942,18948]},{"content":"CommonStates","pos":[18949,18961]},{"content":"The default state.","pos":[18962,18980]},{"content":"MouseOver","pos":[18985,18994]},{"content":"CommonStates","pos":[18995,19007]},{"content":"The mouse pointer is positioned over the control.","pos":[19008,19057]},{"content":"Pressed","pos":[19062,19069]},{"content":"CommonStates","pos":[19070,19082]},{"content":"The control is pressed.","pos":[19083,19106]},{"content":"Disabled","pos":[19111,19119]},{"content":"CommonStates","pos":[19120,19132]},{"content":"The control is disabled.","pos":[19133,19157]},{"content":"Focused","pos":[19162,19169]},{"content":"FocusStates","pos":[19170,19181]},{"content":"The control has focus.","pos":[19182,19204]},{"content":"Unfocused","pos":[19209,19218]},{"content":"FocusStates","pos":[19219,19230]},{"content":"The control does not have focus.","pos":[19231,19263]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph> defines two state groups: the <ph id=\"ph2\">`CommonStates`</ph> group contains the <ph id=\"ph3\">`Normal`</ph>, <ph id=\"ph4\">`MouseOver`</ph>, <ph id=\"ph5\">`Pressed`</ph>, and <ph id=\"ph6\">`Disabled`</ph> states.","pos":[19271,19433],"source":"The <xref:System.Windows.Controls.Button> defines two state groups: the `CommonStates` group contains the `Normal`, `MouseOver`, `Pressed`, and `Disabled` states."},{"content":"The <ph id=\"ph1\">`FocusStates`</ph> group contains the <ph id=\"ph2\">`Focused`</ph> and <ph id=\"ph3\">`Unfocused`</ph> states.","pos":[19434,19504],"source":" The `FocusStates` group contains the `Focused` and `Unfocused` states."},{"content":"States in the same state group are mutually exclusive.","pos":[19505,19559]},{"content":"The control is always in exactly one state per group.","pos":[19560,19613]},{"content":"For example, a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph> can have focus even when the mouse pointer is not over it, so a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph> in the <ph id=\"ph3\">`Focused`</ph> state can be in the <ph id=\"ph4\">`MouseOver`</ph>, <ph id=\"ph5\">`Pressed`</ph>, or <ph id=\"ph6\">`Normal`</ph> state.","pos":[19614,19848],"source":" For example, a <xref:System.Windows.Controls.Button> can have focus even when the mouse pointer is not over it, so a <xref:System.Windows.Controls.Button> in the `Focused` state can be in the `MouseOver`, `Pressed`, or `Normal` state."},{"content":"You add <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> objects to <ph id=\"ph2\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph> objects.","pos":[19855,19955],"source":"You add <xref:System.Windows.VisualState> objects to <xref:System.Windows.VisualStateGroup> objects."},{"content":"You add <ph id=\"ph1\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph> objects to the <ph id=\"ph2\">&lt;xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName&gt;</ph> attached property.","pos":[19956,20123],"source":" You add <xref:System.Windows.VisualStateGroup> objects to the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName> attached property."},{"content":"The following example defines the <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> objects for the <ph id=\"ph2\">`Normal`</ph>, <ph id=\"ph3\">`MouseOver`</ph>, and <ph id=\"ph4\">`Pressed`</ph> states, which are all in the <ph id=\"ph5\">`CommonStates`</ph> group.","pos":[20124,20295],"source":" The following example defines the <xref:System.Windows.VisualState> objects for the `Normal`, `MouseOver`, and `Pressed` states, which are all in the `CommonStates` group."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.VisualState.Name%2A&gt;</ph> of each <ph id=\"ph2\">&lt;xref:System.Windows.VisualState&gt;</ph> matches the name in the preceding table.","pos":[20296,20424],"source":" The <xref:System.Windows.VisualState.Name%2A> of each <xref:System.Windows.VisualState> matches the name in the preceding table."},{"content":"The <ph id=\"ph1\">`Disabled`</ph> state and the states in the <ph id=\"ph2\">`FocusStates`</ph> group are omitted to keep the example short, but they are included in the entire example at the end of this topic.","pos":[20425,20596],"source":" The `Disabled` state and the states in the `FocusStates` group are omitted to keep the example short, but they are included in the entire example at the end of this topic."},{"pos":[20604,20844],"content":"[!NOTE]\n Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>.","leadings":["","> "],"nodes":[{"content":"Be sure to set the <ph id=\"ph1\">&lt;xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName&gt;</ph> attached property on the root <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> of the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[9,238],"source":"Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=fullName> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>."}]},{"pos":[20851,21003],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#VisualStates<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#VisualStates](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)]"},{"content":"The preceding example produces output that is similar to the following illustrations.","pos":[21010,21095]},{"content":"<bpt id=\"p1\">![</bpt>A button with a custom control template.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png \"</bpt>NDP_ButtonNormal<ept id=\"p2\">\")</ept>","pos":[21102,21232],"source":"![A button with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png \"NDP_ButtonNormal\")"},{"content":"A button that uses a custom control template in the normal state","pos":[21235,21299]},{"content":"<bpt id=\"p1\">![</bpt>A button with a red border.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png \"</bpt>NDP_ButtonMouseOver<ept id=\"p2\">\")</ept>","pos":[21306,21429],"source":"![A button with a red border.](../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png \"NDP_ButtonMouseOver\")"},{"content":"A button that uses a custom control template in the mouse over state","pos":[21432,21500]},{"content":"<bpt id=\"p1\">![</bpt>The border is transparent on a pressed button.<ept id=\"p1\">]</ept><bpt id=\"p2\">(../../../../docs/framework/wpf/controls/media/ndp-buttonpressed.png \"</bpt>NDP_ButtonPressed<ept id=\"p2\">\")</ept>","pos":[21507,21645],"source":"![The border is transparent on a pressed button.](../../../../docs/framework/wpf/controls/media/ndp-buttonpressed.png \"NDP_ButtonPressed\")"},{"content":"A button that uses a custom control template in the pressed state","pos":[21648,21713]},{"pos":[21720,21973],"content":"To find the visual states for controls that are included with <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>Control Styles and Templates<ept id=\"p1\">](../../../../docs/framework/wpf/controls/control-styles-and-templates.md)</ept>.","source":"To find the visual states for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](../../../../docs/framework/wpf/controls/control-styles-and-templates.md)."},{"pos":[22072,22143],"content":"Specifying the Behavior of a Control When It Transitions Between States","linkify":"Specifying the Behavior of a Control When It Transitions Between States","nodes":[{"content":"Specifying the Behavior of a Control When It Transitions Between States","pos":[0,71]}]},{"content":"In the preceding example, the appearance of the button also changes when the user clicks it, but unless the button is pressed for a full second, the user does not see the effect.","pos":[22147,22325]},{"content":"By default, the animation takes one second to occur.","pos":[22326,22378]},{"content":"Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> in its default state.","pos":[22379,22580],"source":" Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <xref:System.Windows.Controls.ControlTemplate> in its default state."},{"content":"You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> objects to the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[22587,22828],"source":"You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <xref:System.Windows.VisualTransition> objects to the <xref:System.Windows.Controls.ControlTemplate>."},{"content":"When you create a <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph>, you specify one or more of the following:","pos":[22829,22928],"source":" When you create a <xref:System.Windows.VisualTransition>, you specify one or more of the following:"},{"content":"The time it takes for a transition between states to occur.","pos":[22938,22997]},{"content":"Additional changes in the control's appearance that occur at the time of the transition.","pos":[23007,23095]},{"content":"Which states the <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> is applied to.","pos":[23105,23175],"source":"Which states the <xref:System.Windows.VisualTransition> is applied to."},{"pos":[23185,23224],"content":"Specifying the Duration of a Transition","linkify":"Specifying the Duration of a Transition","nodes":[{"content":"Specifying the Duration of a Transition","pos":[0,39]}]},{"content":"You can specify how long a transition takes by setting the <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition.GeneratedDuration%2A&gt;</ph> property.","pos":[23228,23356],"source":"You can specify how long a transition takes by setting the <xref:System.Windows.VisualTransition.GeneratedDuration%2A> property."},{"content":"The preceding example has a <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released.","pos":[23357,23603],"source":" The preceding example has a <xref:System.Windows.VisualState> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released."},{"content":"You can use a <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> to specify the amount of time it takes the control to transition into the pressed state.","pos":[23604,23745],"source":" You can use a <xref:System.Windows.VisualTransition> to specify the amount of time it takes the control to transition into the pressed state."},{"content":"The following example specifies that the control takes one hundredth of a second to go into the pressed state.","pos":[23746,23856]},{"pos":[23863,24026],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#PressedTransition<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#PressedTransition](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)]"},{"pos":[24036,24102],"content":"Specifying Changes to the Control's Appearance During a Transition","linkify":"Specifying Changes to the Control's Appearance During a Transition","nodes":[{"content":"Specifying Changes to the Control's Appearance During a Transition","pos":[0,66]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> contains a <ph id=\"ph2\">&lt;xref:System.Windows.Media.Animation.Storyboard&gt;</ph> that begins when the control transitions between states.","pos":[24106,24265],"source":"The <xref:System.Windows.VisualTransition> contains a <xref:System.Windows.Media.Animation.Storyboard> that begins when the control transitions between states."},{"content":"For example, you can specify that a certain animation occurs when the control transitions from the <ph id=\"ph1\">`MouseOver`</ph> state to the <ph id=\"ph2\">`Normal`</ph> State.","pos":[24266,24405],"source":" For example, you can specify that a certain animation occurs when the control transitions from the `MouseOver` state to the `Normal` State."},{"content":"The following example creates a <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds.","pos":[24406,24639],"source":" The following example creates a <xref:System.Windows.VisualTransition> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds."},{"pos":[24646,24777],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#8<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#8](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)]"},{"pos":[24787,24832],"content":"Specifying When a VisualTransition Is Applied","linkify":"Specifying When a VisualTransition Is Applied","nodes":[{"content":"Specifying When a VisualTransition Is Applied","pos":[0,45]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states.","pos":[24836,24997],"source":"A <xref:System.Windows.VisualTransition> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states."},{"content":"In the preceding example, the <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> is applied when the control goes from the <ph id=\"ph2\">`MouseOver`</ph> state to the <ph id=\"ph3\">`Normal`</ph> state; in the example before that, the <ph id=\"ph4\">&lt;xref:System.Windows.VisualTransition&gt;</ph> is applied when the control goes into the <ph id=\"ph5\">`Pressed`</ph> state.","pos":[24998,25279],"source":" In the preceding example, the <xref:System.Windows.VisualTransition> is applied when the control goes from the `MouseOver` state to the `Normal` state; in the example before that, the <xref:System.Windows.VisualTransition> is applied when the control goes into the `Pressed` state."},{"content":"You restrict when a <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> is applied by setting the <ph id=\"ph2\">&lt;xref:System.Windows.VisualTransition.To%2A&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.Windows.VisualTransition.From%2A&gt;</ph> properties.","pos":[25280,25472],"source":" You restrict when a <xref:System.Windows.VisualTransition> is applied by setting the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties."},{"content":"The following table describes the levels of restriction from most restrictive to least restrictive.","pos":[25473,25572]},{"content":"Type of restriction","pos":[25579,25598]},{"content":"Value of From","pos":[25599,25612]},{"content":"Value of To","pos":[25613,25624]},{"content":"From a specified state to another specified state","pos":[25697,25746]},{"content":"The name of a <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph>","pos":[25747,25794],"source":"The name of a <xref:System.Windows.VisualState>"},{"content":"The name of a <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph>","pos":[25795,25842],"source":"The name of a <xref:System.Windows.VisualState>"},{"content":"From any state to a specified state","pos":[25847,25882]},{"content":"Not set","pos":[25883,25890]},{"content":"The name of a <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph>","pos":[25891,25938],"source":"The name of a <xref:System.Windows.VisualState>"},{"content":"From a specified state to any state","pos":[25943,25978]},{"content":"The name of a <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph>","pos":[25979,26026],"source":"The name of a <xref:System.Windows.VisualState>"},{"content":"Not set","pos":[26027,26034]},{"content":"From any state to any other state","pos":[26039,26072]},{"content":"Not set","pos":[26073,26080]},{"content":"Not set","pos":[26081,26088]},{"content":"You can have multiple <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> objects in a <ph id=\"ph2\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph> that refer to the same state, but they will be used in the order that the previous table specifies.","pos":[26096,26308],"source":"You can have multiple <xref:System.Windows.VisualTransition> objects in a <xref:System.Windows.VisualStateGroup> that refer to the same state, but they will be used in the order that the previous table specifies."},{"content":"In the following example, there are two <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> objects.","pos":[26309,26396],"source":" In the following example, there are two <xref:System.Windows.VisualTransition> objects."},{"content":"When the control transitions from the <ph id=\"ph1\">`Pressed`</ph> state to the <ph id=\"ph2\">`MouseOver`</ph> state, the <ph id=\"ph3\">&lt;xref:System.Windows.VisualTransition&gt;</ph> that has both <ph id=\"ph4\">&lt;xref:System.Windows.VisualTransition.From%2A&gt;</ph> and <ph id=\"ph5\">&lt;xref:System.Windows.VisualTransition.To%2A&gt;</ph> set is used.","pos":[26397,26642],"source":" When the control transitions from the `Pressed` state to the `MouseOver` state, the <xref:System.Windows.VisualTransition> that has both <xref:System.Windows.VisualTransition.From%2A> and <xref:System.Windows.VisualTransition.To%2A> set is used."},{"content":"When the control transitions from a state that is not <ph id=\"ph1\">`Pressed`</ph> to the <ph id=\"ph2\">`MouseOver`</ph> state, the other state is used.","pos":[26643,26757],"source":" When the control transitions from a state that is not `Pressed` to the `MouseOver` state, the other state is used."},{"pos":[26764,26895],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#7<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#7](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)]"},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph> has a <ph id=\"ph2\">&lt;xref:System.Windows.VisualStateGroup.Transitions%2A&gt;</ph> property that contains the <ph id=\"ph3\">&lt;xref:System.Windows.VisualTransition&gt;</ph> objects that apply to the <ph id=\"ph4\">&lt;xref:System.Windows.VisualState&gt;</ph> objects in the <ph id=\"ph5\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph>.","pos":[26902,27185],"source":"The <xref:System.Windows.VisualStateGroup> has a <xref:System.Windows.VisualStateGroup.Transitions%2A> property that contains the <xref:System.Windows.VisualTransition> objects that apply to the <xref:System.Windows.VisualState> objects in the <xref:System.Windows.VisualStateGroup>."},{"content":"As the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> author, you are free to include any <ph id=\"ph2\">&lt;xref:System.Windows.VisualTransition&gt;</ph> you want.","pos":[27186,27324],"source":" As the <xref:System.Windows.Controls.ControlTemplate> author, you are free to include any <xref:System.Windows.VisualTransition> you want."},{"content":"However, if the <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition.To%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Windows.VisualTransition.From%2A&gt;</ph> properties are set to state names that are not in the <ph id=\"ph3\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph>, the <ph id=\"ph4\">&lt;xref:System.Windows.VisualTransition&gt;</ph> is ignored.","pos":[27325,27585],"source":" However, if the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties are set to state names that are not in the <xref:System.Windows.VisualStateGroup>, the <xref:System.Windows.VisualTransition> is ignored."},{"content":"The following example shows the <ph id=\"ph1\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph> for the <ph id=\"ph2\">`CommonStates`</ph>.","pos":[27592,27686],"source":"The following example shows the <xref:System.Windows.VisualStateGroup> for the `CommonStates`."},{"content":"The example defines a <ph id=\"ph1\">&lt;xref:System.Windows.VisualTransition&gt;</ph> for each of the button's following transitions.","pos":[27687,27795],"source":" The example defines a <xref:System.Windows.VisualTransition> for each of the button's following transitions."},{"pos":[27805,27828],"content":"To the <ph id=\"ph1\">`Pressed`</ph> state.","source":"To the `Pressed` state."},{"pos":[27838,27863],"content":"To the <ph id=\"ph1\">`MouseOver`</ph> state.","source":"To the `MouseOver` state."},{"pos":[27873,27923],"content":"From the <ph id=\"ph1\">`Pressed`</ph> state to the <ph id=\"ph2\">`MouseOver`</ph> state.","source":"From the `Pressed` state to the `MouseOver` state."},{"pos":[27933,27982],"content":"From the <ph id=\"ph1\">`MouseOver`</ph> state to the <ph id=\"ph2\">`Normal`</ph> state.","source":"From the `MouseOver` state to the `Normal` state."},{"pos":[27989,28151],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#VisualTransitions<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#VisualTransitions](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)]"},{"pos":[28243,28307],"content":"Customizing Other Controls by Understanding the Control Contract","linkify":"Customizing Other Controls by Understanding the Control Contract","nodes":[{"content":"Customizing Other Controls by Understanding the Control Contract","pos":[0,64]}]},{"content":"A control that uses a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> to specify its visual structure (by using <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> objects) and visual behavior (by using <ph id=\"ph3\">&lt;xref:System.Windows.VisualState&gt;</ph> objects) uses the parts control model.","pos":[28311,28572],"source":"A control that uses a <xref:System.Windows.Controls.ControlTemplate> to specify its visual structure (by using <xref:System.Windows.FrameworkElement> objects) and visual behavior (by using <xref:System.Windows.VisualState> objects) uses the parts control model."},{"content":"Many of the controls that are included with <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> 4 use this model.","pos":[28573,28716],"source":" Many of the controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 use this model."},{"content":"The parts that a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> author needs to be aware of are communicated through the control contract.","pos":[28717,28855],"source":" The parts that a <xref:System.Windows.Controls.ControlTemplate> author needs to be aware of are communicated through the control contract."},{"content":"When you understand the parts of a control contract, you can customize the appearance of any control that uses the parts control model.","pos":[28856,28991]},{"content":"A control contract has three elements:","pos":[28998,29036]},{"content":"The visual elements that the control's logic uses.","pos":[29046,29096]},{"content":"The states of the control and the group each state belongs to.","pos":[29106,29168]},{"content":"The public properties that visually affect the control.","pos":[29178,29233]},{"pos":[29243,29282],"content":"Visual Elements in the Control Contract","linkify":"Visual Elements in the Control Contract","nodes":[{"content":"Visual Elements in the Control Contract","pos":[0,39]}]},{"content":"Sometimes a control's logic interacts with a <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> that is in the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[29286,29432],"source":"Sometimes a control's logic interacts with a <xref:System.Windows.FrameworkElement> that is in the <xref:System.Windows.Controls.ControlTemplate>."},{"content":"For example, the control might handle an event of one of its elements.","pos":[29433,29503]},{"content":"When a control expects to find a particular <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> in the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, it must convey that information to the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> author.","pos":[29504,29735],"source":" When a control expects to find a particular <xref:System.Windows.FrameworkElement> in the <xref:System.Windows.Controls.ControlTemplate>, it must convey that information to the <xref:System.Windows.Controls.ControlTemplate> author."},{"content":"The control uses the <ph id=\"ph1\">&lt;xref:System.Windows.TemplatePartAttribute&gt;</ph> to convey the type of element that is expected, and what the name of the element should be.","pos":[29736,29892],"source":" The control uses the <xref:System.Windows.TemplatePartAttribute> to convey the type of element that is expected, and what the name of the element should be."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph> does not have <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> parts in its control contract, but other controls, such as the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph>, do.","pos":[29893,30095],"source":" The <xref:System.Windows.Controls.Button> does not have <xref:System.Windows.FrameworkElement> parts in its control contract, but other controls, such as the <xref:System.Windows.Controls.ComboBox>, do."},{"content":"The following example shows the <ph id=\"ph1\">&lt;xref:System.Windows.TemplatePartAttribute&gt;</ph> objects that are specified on the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph> class.","pos":[30102,30258],"source":"The following example shows the <xref:System.Windows.TemplatePartAttribute> objects that are specified on the <xref:System.Windows.Controls.ComboBox> class."},{"content":"The logic of <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph> expects to find a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.TextBox&gt;</ph> named <ph id=\"ph3\">`PART_EditableTextBox`</ph> and a <ph id=\"ph4\">&lt;xref:System.Windows.Controls.Primitives.Popup&gt;</ph> named <ph id=\"ph5\">`PART_Popup`</ph> in its <ph id=\"ph6\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[30259,30525],"source":" The logic of <xref:System.Windows.Controls.ComboBox> expects to find a <xref:System.Windows.Controls.TextBox> named `PART_EditableTextBox` and a <xref:System.Windows.Controls.Primitives.Popup> named `PART_Popup` in its <xref:System.Windows.Controls.ControlTemplate>."},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#ComboBoxContract<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)</ept><ept id=\"p1\">]</ept>","pos":[30532,30697],"source":"[!code-csharp[VSMButtonTemplate#ComboBoxContract](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#ComboBoxContract<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)</ept><ept id=\"p1\">]</ept>","pos":[30699,30866],"source":"[!code-vb[VSMButtonTemplate#ComboBoxContract](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)]"},{"content":"The following example shows a simplified <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph> that includes the elements that are specified by the <ph id=\"ph3\">&lt;xref:System.Windows.TemplatePartAttribute&gt;</ph> objects on the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph> class.","pos":[30873,31167],"source":"The following example shows a simplified <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.ComboBox> that includes the elements that are specified by the <xref:System.Windows.TemplatePartAttribute> objects on the <xref:System.Windows.Controls.ComboBox> class."},{"pos":[31174,31329],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#ComboBoxTemplate<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#ComboBoxTemplate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)]"},{"pos":[31339,31369],"content":"States in the Control Contract","linkify":"States in the Control Contract","nodes":[{"content":"States in the Control Contract","pos":[0,30]}]},{"content":"The states of a control are also a part of the control contract.","pos":[31373,31437]},{"content":"The example of creating a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> for a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph> shows how to specify the appearance of a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Button&gt;</ph> depending on its states.","pos":[31438,31658],"source":" The example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button> shows how to specify the appearance of a <xref:System.Windows.Controls.Button> depending on its states."},{"content":"You create a <ph id=\"ph1\">&lt;xref:System.Windows.VisualState&gt;</ph> for each specified state and put all <ph id=\"ph2\">&lt;xref:System.Windows.VisualState&gt;</ph> objects that share a <ph id=\"ph3\">&lt;xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A&gt;</ph> in a <ph id=\"ph4\">&lt;xref:System.Windows.VisualStateGroup&gt;</ph>, as described in <bpt id=\"p1\">[</bpt>Changing the Appearance of a Control Depending on Its State<ept id=\"p1\">](#changing_the_appearance_of_a_control_depending_on_its_state)</ept> earlier in this topic.","pos":[31659,32069],"source":" You create a <xref:System.Windows.VisualState> for each specified state and put all <xref:System.Windows.VisualState> objects that share a <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in a <xref:System.Windows.VisualStateGroup>, as described in [Changing the Appearance of a Control Depending on Its State](#changing_the_appearance_of_a_control_depending_on_its_state) earlier in this topic."},{"content":"Third-party controls should specify states by using the <ph id=\"ph1\">&lt;xref:System.Windows.TemplateVisualStateAttribute&gt;</ph>, which enables designer tools, such as Expression Blend, to expose the control's states for authoring control templates.","pos":[32070,32297],"source":" Third-party controls should specify states by using the <xref:System.Windows.TemplateVisualStateAttribute>, which enables designer tools, such as Expression Blend, to expose the control's states for authoring control templates."},{"pos":[32304,32560],"content":"To find the control contract for controls that are included with <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>Control Styles and Templates<ept id=\"p1\">](../../../../docs/framework/wpf/controls/control-styles-and-templates.md)</ept>.","source":"To find the control contract for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](../../../../docs/framework/wpf/controls/control-styles-and-templates.md)."},{"pos":[32570,32604],"content":"Properties in the Control Contract","linkify":"Properties in the Control Contract","nodes":[{"content":"Properties in the Control Contract","pos":[0,34]}]},{"content":"The public properties that visually affect the control are also included in the control contract.","pos":[32608,32705]},{"content":"You can set these properties to change the appearance of the control without creating a new <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>.","pos":[32706,32845],"source":" You can set these properties to change the appearance of the control without creating a new <xref:System.Windows.Controls.ControlTemplate>."},{"content":"You can also use the <bpt id=\"p1\">[</bpt>TemplateBinding<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md)</ept> markup extension to bind properties of elements that are in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> to public properties that are defined by the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph>.","pos":[32846,33156],"source":" You can also use the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the <xref:System.Windows.Controls.Button>."},{"content":"The following example shows the control contract for the button.","pos":[33163,33227]},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#ButtonContract<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)</ept><ept id=\"p1\">]</ept>","pos":[33234,33395],"source":"[!code-csharp[VSMButtonTemplate#ButtonContract](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#ButtonContract<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)</ept><ept id=\"p1\">]</ept>","pos":[33397,33560],"source":"[!code-vb[VSMButtonTemplate#ButtonContract](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)]"},{"content":"When creating a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>, it is often easiest to begin with an existing <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> and make changes to it.","pos":[33567,33747],"source":"When creating a <xref:System.Windows.Controls.ControlTemplate>, it is often easiest to begin with an existing <xref:System.Windows.Controls.ControlTemplate> and make changes to it."},{"content":"You can do one of the following to change an existing <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph>:","pos":[33748,33849],"source":" You can do one of the following to change an existing <xref:System.Windows.Controls.ControlTemplate>:"},{"content":"Use a designer, such as Expression Blend, which provides a graphical user interface for creating control templates.","pos":[33859,33974]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Styling a control that supports templates<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=161153)</ept>.","pos":[33975,34092],"source":" For more information, see [Styling a control that supports templates](http://go.microsoft.com/fwlink/?LinkId=161153)."},{"content":"Get the default <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> and edit it.","pos":[34102,34177],"source":"Get the default <xref:System.Windows.Controls.ControlTemplate> and edit it."},{"content":"To find the default control templates that are included with <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>Default WPF Themes<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkID=158252)</ept>.","pos":[34178,34394],"source":" To find the default control templates that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Default WPF Themes](http://go.microsoft.com/fwlink/?LinkID=158252)."},{"pos":[34438,34454],"content":"Complete Example","linkify":"Complete Example","nodes":[{"content":"Complete Example","pos":[0,16]}]},{"content":"The following example shows the complete <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph><ph id=\"ph2\">&lt;xref:System.Windows.Controls.ControlTemplate&gt;</ph> that is discussed in this topic.","pos":[34458,34615],"source":"The following example shows the complete <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.ControlTemplate> that is discussed in this topic."},{"pos":[34622,34753],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>VSMButtonTemplate#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[VSMButtonTemplate#3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)]"},{"pos":[34762,34770],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[34774,34865],"content":"<bpt id=\"p1\">[</bpt>Styling and Templating<ept id=\"p1\">](../../../../docs/framework/wpf/controls/styling-and-templating.md)</ept>","source":"[Styling and Templating](../../../../docs/framework/wpf/controls/styling-and-templating.md)"}]}