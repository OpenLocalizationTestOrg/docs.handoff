{"content":"---\ntitle: \"moduloObjectHashcode MDA\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"managed debugging assistants (MDAs), hashcode modulus\"\n  - \"Modulo object hash code\"\n  - \"moduloObjectHashcode MDA\"\n  - \"hashcode modulus\"\n  - \"MDAs (managed debugging assistants), hashcode modulus\"\n  - \"GetHashCode method\"\n  - \"modulus of hashcodes\"\nms.assetid: b45366ff-2a7a-4b8e-ab01-537b72e9de68\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# moduloObjectHashcode MDA\nThe `moduloObjectHashcode` managed debugging assistant (MDA) changes the behavior of the <xref:System.Object> class to perform a modulo operation on the hash code returned by the <xref:System.Object.GetHashCode%2A> method. The default modulus for this MDA is 1, which causes <xref:System.Object.GetHashCode%2A> to return 0 for all objects.  \n  \n## Symptoms  \n After moving to a new version of the common language runtime (CLR), a program no longer executes properly:  \n  \n-   The program is getting the wrong object from a <xref:System.Collections.Hashtable>.  \n  \n-   The order of enumeration from a <xref:System.Collections.Hashtable> has a change that breaks the program.  \n  \n-   Two objects that used to be equal are no longer equal.  \n  \n-   Two objects that used to not be equal are now equal.  \n  \n## Cause  \n Your program may be getting the wrong object from a <xref:System.Collections.Hashtable> because the implementation of the <xref:System.Object.Equals%2A> method on the class for the key into the <xref:System.Collections.Hashtable> tests for equality of objects by comparing the results of the call to the <xref:System.Object.GetHashCode%2A> method. Hash codes should not be used to test for object equality because two objects may have the same hash code even if their respective fields have different values. These hash code collisions, although rare in practice, do occur. The effect this has on a <xref:System.Collections.Hashtable> lookup is that two keys which are not equal appear to be equal, and the wrong object is returned from the <xref:System.Collections.Hashtable>. For performance reasons, the implementation of <xref:System.Object.GetHashCode%2A> can change between runtime versions, so collisions that might not occur on one version might occur on subsequent versions. Enable this MDA to test whether your code has bugs when hash codes collide. When enabled, this MDA causes the <xref:System.Object.GetHashCode%2A> method to return 0, resulting in all hash codes colliding. The only effect enabling this MDA should have on your program is that your program runs slower.  \n  \n The order of enumeration from a <xref:System.Collections.Hashtable> may change from one version of the runtime to another if the algorithm used to compute the hash codes for the key change. To test whether your program has taken a dependency on the order of enumeration of keys or values out of a hash table, you can enable this MDA.  \n  \n## Resolution  \n Never use hash codes as a substitute for object identity. Implement the override of the <xref:System.Object.Equals%2A?displayProperty=nameWithType> method to not compare hash codes.  \n  \n Do not create dependencies on the order of enumerations of keys or values in hash tables.  \n  \n## Effect on the Runtime  \n Applications run more slowly when this MDA is enabled. This MDA simply takes the hash code that would have been returned and instead returns the remainder when divided by a modulus.  \n  \n## Output  \n There is no output for this MDA.  \n  \n## Configuration  \n The `modulus` attribute specifies the modulus used on the hash code. The default value is 1.  \n  \n```xml  \n<mdaConfig>  \n  <assistants>  \n    <moduloObjectHashcode modulus=\"1\" />  \n  </assistants>  \n</mdaConfig>  \n```  \n  \n## See also\n\n- <xref:System.Object.GetHashCode%2A?displayProperty=nameWithType>\n- <xref:System.Object.Equals%2A?displayProperty=nameWithType>\n- [Diagnosing Errors with Managed Debugging Assistants](../../../docs/framework/debug-trace-profile/diagnosing-errors-with-managed-debugging-assistants.md)\n","nodes":[{"pos":[4,423],"embed":true,"restype":"x-metadata","content":"title: \"moduloObjectHashcode MDA\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"managed debugging assistants (MDAs), hashcode modulus\"\n  - \"Modulo object hash code\"\n  - \"moduloObjectHashcode MDA\"\n  - \"hashcode modulus\"\n  - \"MDAs (managed debugging assistants), hashcode modulus\"\n  - \"GetHashCode method\"\n  - \"modulus of hashcodes\"\nms.assetid: b45366ff-2a7a-4b8e-ab01-537b72e9de68\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"moduloObjectHashcode MDA","nodes":[{"pos":[0,24],"content":"moduloObjectHashcode MDA","nodes":[{"content":"moduloObjectHashcode MDA","pos":[0,24]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[430,454],"content":"moduloObjectHashcode MDA","linkify":"moduloObjectHashcode MDA","nodes":[{"content":"moduloObjectHashcode MDA","pos":[0,24]}]},{"content":"The <ph id=\"ph1\">`moduloObjectHashcode`</ph> managed debugging assistant (MDA) changes the behavior of the <ph id=\"ph2\">&lt;xref:System.Object&gt;</ph> class to perform a modulo operation on the hash code returned by the <ph id=\"ph3\">&lt;xref:System.Object.GetHashCode%2A&gt;</ph> method.","pos":[455,677],"source":"The `moduloObjectHashcode` managed debugging assistant (MDA) changes the behavior of the <xref:System.Object> class to perform a modulo operation on the hash code returned by the <xref:System.Object.GetHashCode%2A> method."},{"content":"The default modulus for this MDA is 1, which causes <ph id=\"ph1\">&lt;xref:System.Object.GetHashCode%2A&gt;</ph> to return 0 for all objects.","pos":[678,794],"source":" The default modulus for this MDA is 1, which causes <xref:System.Object.GetHashCode%2A> to return 0 for all objects."},{"pos":[803,811],"content":"Symptoms","linkify":"Symptoms","nodes":[{"content":"Symptoms","pos":[0,8]}]},{"content":"After moving to a new version of the common language runtime (CLR), a program no longer executes properly:","pos":[815,921]},{"pos":[931,1014],"content":"The program is getting the wrong object from a <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph>.","source":"The program is getting the wrong object from a <xref:System.Collections.Hashtable>."},{"pos":[1024,1129],"content":"The order of enumeration from a <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph> has a change that breaks the program.","source":"The order of enumeration from a <xref:System.Collections.Hashtable> has a change that breaks the program."},{"content":"Two objects that used to be equal are no longer equal.","pos":[1139,1193]},{"content":"Two objects that used to not be equal are now equal.","pos":[1203,1255]},{"pos":[1264,1269],"content":"Cause","linkify":"Cause","nodes":[{"content":"Cause","pos":[0,5]}]},{"content":"Your program may be getting the wrong object from a <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph> because the implementation of the <ph id=\"ph2\">&lt;xref:System.Object.Equals%2A&gt;</ph> method on the class for the key into the <ph id=\"ph3\">&lt;xref:System.Collections.Hashtable&gt;</ph> tests for equality of objects by comparing the results of the call to the <ph id=\"ph4\">&lt;xref:System.Object.GetHashCode%2A&gt;</ph> method.","pos":[1273,1620],"source":"Your program may be getting the wrong object from a <xref:System.Collections.Hashtable> because the implementation of the <xref:System.Object.Equals%2A> method on the class for the key into the <xref:System.Collections.Hashtable> tests for equality of objects by comparing the results of the call to the <xref:System.Object.GetHashCode%2A> method."},{"content":"Hash codes should not be used to test for object equality because two objects may have the same hash code even if their respective fields have different values.","pos":[1621,1781]},{"content":"These hash code collisions, although rare in practice, do occur.","pos":[1782,1846]},{"content":"The effect this has on a <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph> lookup is that two keys which are not equal appear to be equal, and the wrong object is returned from the <ph id=\"ph2\">&lt;xref:System.Collections.Hashtable&gt;</ph>.","pos":[1847,2050],"source":" The effect this has on a <xref:System.Collections.Hashtable> lookup is that two keys which are not equal appear to be equal, and the wrong object is returned from the <xref:System.Collections.Hashtable>."},{"content":"For performance reasons, the implementation of <ph id=\"ph1\">&lt;xref:System.Object.GetHashCode%2A&gt;</ph> can change between runtime versions, so collisions that might not occur on one version might occur on subsequent versions.","pos":[2051,2256],"source":" For performance reasons, the implementation of <xref:System.Object.GetHashCode%2A> can change between runtime versions, so collisions that might not occur on one version might occur on subsequent versions."},{"content":"Enable this MDA to test whether your code has bugs when hash codes collide.","pos":[2257,2332]},{"content":"When enabled, this MDA causes the <ph id=\"ph1\">&lt;xref:System.Object.GetHashCode%2A&gt;</ph> method to return 0, resulting in all hash codes colliding.","pos":[2333,2461],"source":" When enabled, this MDA causes the <xref:System.Object.GetHashCode%2A> method to return 0, resulting in all hash codes colliding."},{"content":"The only effect enabling this MDA should have on your program is that your program runs slower.","pos":[2462,2557]},{"content":"The order of enumeration from a <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph> may change from one version of the runtime to another if the algorithm used to compute the hash codes for the key change.","pos":[2564,2753],"source":"The order of enumeration from a <xref:System.Collections.Hashtable> may change from one version of the runtime to another if the algorithm used to compute the hash codes for the key change."},{"content":"To test whether your program has taken a dependency on the order of enumeration of keys or values out of a hash table, you can enable this MDA.","pos":[2754,2897]},{"pos":[2906,2916],"content":"Resolution","linkify":"Resolution","nodes":[{"content":"Resolution","pos":[0,10]}]},{"content":"Never use hash codes as a substitute for object identity.","pos":[2920,2977]},{"content":"Implement the override of the <ph id=\"ph1\">&lt;xref:System.Object.Equals%2A?displayProperty=nameWithType&gt;</ph> method to not compare hash codes.","pos":[2978,3101],"source":" Implement the override of the <xref:System.Object.Equals%2A?displayProperty=nameWithType> method to not compare hash codes."},{"content":"Do not create dependencies on the order of enumerations of keys or values in hash tables.","pos":[3108,3197]},{"pos":[3206,3227],"content":"Effect on the Runtime","linkify":"Effect on the Runtime","nodes":[{"content":"Effect on the Runtime","pos":[0,21]}]},{"content":"Applications run more slowly when this MDA is enabled.","pos":[3231,3285]},{"content":"This MDA simply takes the hash code that would have been returned and instead returns the remainder when divided by a modulus.","pos":[3286,3412]},{"pos":[3421,3427],"content":"Output","linkify":"Output","nodes":[{"content":"Output","pos":[0,6]}]},{"content":"There is no output for this MDA.","pos":[3431,3463]},{"pos":[3472,3485],"content":"Configuration","linkify":"Configuration","nodes":[{"content":"Configuration","pos":[0,13]}]},{"content":"The <ph id=\"ph1\">`modulus`</ph> attribute specifies the modulus used on the hash code.","pos":[3489,3557],"source":"The `modulus` attribute specifies the modulus used on the hash code."},{"content":"The default value is 1.","pos":[3558,3581]},{"pos":[3715,3723],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3856,4009],"content":"<bpt id=\"p1\">[</bpt>Diagnosing Errors with Managed Debugging Assistants<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/diagnosing-errors-with-managed-debugging-assistants.md)</ept>","source":"[Diagnosing Errors with Managed Debugging Assistants](../../../docs/framework/debug-trace-profile/diagnosing-errors-with-managed-debugging-assistants.md)"}]}