{"content":"---\ntitle: \"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 62210fd8-a372-4d55-ab9b-c99827d1885e\ncaps.latest.revision: 18\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Exchange Messages with WCF Endpoints and Message Queuing Applications\nYou can integrate existing Message Queuing (MSMQ) applications with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] applications by using the MSMQ integration binding to convert MSMQ messages to and from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] messages. This allows you to call into MSMQ receiver applications from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients as well as call into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services from MSMQ sender applications.  \n  \n In this section, we explain how to use <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> for queued communication between (1) a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client and an MSMQ application service written using System.Messaging and (2) an MSMQ application client and a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.  \n  \n For a complete sample that demonstrates how to call a MSMQ receiver application from a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client, see the [Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md) sample.  \n  \n For a complete sample that demonstrates how to call a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service from a MSMQ client, see the [Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md) sample.  \n  \n### To create a WCF service that receives messages from a MSMQ client  \n  \n1.  Define an interface that defines the service contract for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that receives queued messages from a MSMQ sender application, as shown in the following example code.  \n  \n     [!code-csharp[S_MsmqToWcf#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#1)]\n     [!code-vb[S_MsmqToWcf#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#1)]  \n  \n2.  Implement the interface and apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to the class, as shown in the following example code.  \n  \n     [!code-csharp[S_MsmqToWcf#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#2)]\n     [!code-vb[S_MsmqToWcf#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#2)]  \n  \n3.  Create a configuration file that specifies the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.  \n  \n  \n  \n4.  Instantiate a <xref:System.ServiceModel.ServiceHost> object that uses the configured binding.  \n  \n  \n  \n### To create a WCF client that sends messages to a MSMQ receiver application  \n  \n1.  Define an interface that defines the service contract for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client that sends queued messages to the MSMQ receiver, as shown in the following example code.  \n  \n     [!code-csharp[S_WcfToMsmq#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/proxy.cs#6)]\n     [!code-vb[S_WcfToMsmq#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/proxy.vb#6)]  \n  \n2.  Define a client class that the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client uses to call the MSMQ receiver.  \n  \n     [!code-csharp[S_WcfToMsmq#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#2)]\n     [!code-vb[S_WcfToMsmq#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#2)]  \n  \n3.  Create a configuration that specifies use of the MsmqIntegrationBinding binding.  \n  \n     [!code-csharp[S_WcfToMsmq#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#3)]\n     [!code-vb[S_WcfToMsmq#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#3)]  \n  \n4.  Create an instance of the client class and call the method defined by the message receiving service.  \n  \n     [!code-csharp[S_WcfToMsmq#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/client.cs#4)]  \n  \n## See Also  \n [Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md)   \n [How to: Exchange Queued Messages with WCF Endpoints](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)   \n [Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)   \n [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)   \n [Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)   \n [Message Security over Message Queuing](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)","nodes":[{"pos":[4,398],"nodes":[{"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications | Microsoft Docs","nodes":[{"pos":[0,94],"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications | Microsoft Docs","nodes":[{"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications | Microsoft Docs","pos":[0,94]}]}],"pos":[6,103],"yaml":true}],"content":"title: \"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 62210fd8-a372-4d55-ab9b-c99827d1885e\ncaps.latest.revision: 18\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[405,482],"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","linkify":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","nodes":[{"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","pos":[0,77]}]},{"content":"You can integrate existing Message Queuing (MSMQ) applications with <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> applications by using the MSMQ integration binding to convert MSMQ messages to and from <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> messages.","pos":[483,760],"source":"You can integrate existing Message Queuing (MSMQ) applications with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] applications by using the MSMQ integration binding to convert MSMQ messages to and from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] messages."},{"content":"This allows you to call into MSMQ receiver applications from <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> clients as well as call into <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services from MSMQ sender applications.","pos":[761,1002],"source":" This allows you to call into MSMQ receiver applications from [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients as well as call into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services from MSMQ sender applications."},{"pos":[1009,1384],"content":"In this section, we explain how to use <ph id=\"ph1\">&lt;xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding&gt;</ph> for queued communication between (1) a <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client and an MSMQ application service written using System.Messaging and (2) an MSMQ application client and a <ph id=\"ph3\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service.","source":"In this section, we explain how to use <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> for queued communication between (1) a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client and an MSMQ application service written using System.Messaging and (2) an MSMQ application client and a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service."},{"pos":[1391,1677],"content":"For a complete sample that demonstrates how to call a MSMQ receiver application from a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client, see the <bpt id=\"p1\">[</bpt>Windows Communication Foundation to Message Queuing<ept id=\"p1\">](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)</ept> sample.","source":"For a complete sample that demonstrates how to call a MSMQ receiver application from a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client, see the [Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md) sample."},{"pos":[1684,1957],"content":"For a complete sample that demonstrates how to call a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service from a MSMQ client, see the <bpt id=\"p1\">[</bpt>Message Queuing to Windows Communication Foundation<ept id=\"p1\">](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)</ept> sample.","source":"For a complete sample that demonstrates how to call a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service from a MSMQ client, see the [Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md) sample."},{"pos":[1967,2032],"content":"To create a WCF service that receives messages from a MSMQ client","linkify":"To create a WCF service that receives messages from a MSMQ client","nodes":[{"content":"To create a WCF service that receives messages from a MSMQ client","pos":[0,65]}]},{"pos":[2042,2269],"content":"Define an interface that defines the service contract for the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service that receives queued messages from a MSMQ sender application, as shown in the following example code.","source":"Define an interface that defines the service contract for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that receives queued messages from a MSMQ sender application, as shown in the following example code."},{"pos":[2280,2507],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>S_MsmqToWcf#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#1)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>S_MsmqToWcf#1<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#1)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[S_MsmqToWcf#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#1)]\n [!code-vb[S_MsmqToWcf#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#1)]"},{"content":"Implement the interface and apply the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute to the class, as shown in the following example code.","pos":[2517,2670],"source":"Implement the interface and apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to the class, as shown in the following example code."},{"pos":[2681,2908],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>S_MsmqToWcf#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#2)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>S_MsmqToWcf#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#2)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[S_MsmqToWcf#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#2)]\n [!code-vb[S_MsmqToWcf#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#2)]"},{"content":"Create a configuration file that specifies the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding&gt;</ph>.","pos":[2918,3031],"source":"Create a configuration file that specifies the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>."},{"content":"Instantiate a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> object that uses the configured binding.","pos":[3047,3140],"source":"Instantiate a <xref:System.ServiceModel.ServiceHost> object that uses the configured binding."},{"pos":[3156,3229],"content":"To create a WCF client that sends messages to a MSMQ receiver application","linkify":"To create a WCF client that sends messages to a MSMQ receiver application","nodes":[{"content":"To create a WCF client that sends messages to a MSMQ receiver application","pos":[0,73]}]},{"pos":[3239,3452],"content":"Define an interface that defines the service contract for the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client that sends queued messages to the MSMQ receiver, as shown in the following example code.","source":"Define an interface that defines the service contract for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client that sends queued messages to the MSMQ receiver, as shown in the following example code."},{"pos":[3463,3686],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>S_WcfToMsmq#6<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/proxy.cs#6)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>S_WcfToMsmq#6<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/proxy.vb#6)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[S_WcfToMsmq#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/proxy.cs#6)]\n [!code-vb[S_WcfToMsmq#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/proxy.vb#6)]"},{"pos":[3696,3821],"content":"Define a client class that the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client uses to call the MSMQ receiver.","source":"Define a client class that the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client uses to call the MSMQ receiver."},{"pos":[3832,4061],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>S_WcfToMsmq#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#2)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>S_WcfToMsmq#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#2)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[S_WcfToMsmq#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#2)]\n [!code-vb[S_WcfToMsmq#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#2)]"},{"content":"Create a configuration that specifies use of the MsmqIntegrationBinding binding.","pos":[4071,4151]},{"pos":[4162,4391],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>S_WcfToMsmq#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#3)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>S_WcfToMsmq#3<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#3)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[S_WcfToMsmq#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#3)]\n [!code-vb[S_WcfToMsmq#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#3)]"},{"content":"Create an instance of the client class and call the method defined by the message receiving service.","pos":[4401,4501]},{"pos":[4512,4621],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>S_WcfToMsmq#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/client.cs#4)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[S_WcfToMsmq#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/client.cs#4)]"},{"pos":[4630,4638],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Queues Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/queues-overview.md)</ept><ph id=\"ph1\"> </ph>","pos":[4642,4727],"source":"[Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Exchange Queued Messages with WCF Endpoints<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)</ept><ph id=\"ph1\"> </ph>","pos":[4731,4887],"source":"[How to: Exchange Queued Messages with WCF Endpoints](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md) "},{"content":"<bpt id=\"p1\">[</bpt>Windows Communication Foundation to Message Queuing<ept id=\"p1\">](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)</ept><ph id=\"ph1\"> </ph>","pos":[4891,5011],"source":"[Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md) "},{"content":"<bpt id=\"p1\">[</bpt>Installing Message Queuing (MSMQ)<ept id=\"p1\">](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)</ept><ph id=\"ph1\"> </ph>","pos":[5015,5126],"source":"[Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md) "},{"content":"<bpt id=\"p1\">[</bpt>Message Queuing to Windows Communication Foundation<ept id=\"p1\">](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)</ept><ph id=\"ph1\"> </ph>","pos":[5130,5250],"source":"[Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md) "},{"content":"<bpt id=\"p1\">[</bpt>Message Security over Message Queuing<ept id=\"p1\">](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)</ept>","pos":[5254,5374],"source":"[Message Security over Message Queuing](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)"}]}