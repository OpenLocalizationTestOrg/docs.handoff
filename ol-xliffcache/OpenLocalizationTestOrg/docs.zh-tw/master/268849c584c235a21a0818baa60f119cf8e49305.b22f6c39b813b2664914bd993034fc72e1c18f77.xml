{"content":"---\ntitle: \"Using Editing Scope\"\nms.date: \"03/30/2017\"\nms.assetid: 79306f9e-318b-4687-9863-8b93d1841716\n---\n# Using Editing Scope\nThis sample demonstrates how to batch a set of changes so that they can be undone in a single atomic unit. By default, the actions taken by an activity designer author are automatically integrated into the Undo/Redo system.  \n  \n## Demonstrates  \n Editing scope and Undo and Redo.  \n  \n## Discussion  \n This sample demonstrates how to batch a set of changes to the <xref:System.Activities.Presentation.Model.ModelItem> tree within a single unit of work. Note that when binding to <xref:System.Activities.Presentation.Model.ModelItem> values directly from a WPF designer, changes are applied automatically. This sample demonstrates what must be done when multiple changes to be batched are being made through imperative code, rather than a single change.  \n  \n In this sample, three activities are added. When editing begins, <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> is called on an instance of <xref:System.Activities.Presentation.Model.ModelItem>. Changes made to the <xref:System.Activities.Presentation.Model.ModelItem> tree within this editing scope are batched. The <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> command returns an <xref:System.Activities.Presentation.Model.EditingScope>, which can be used to control this instance. Either <xref:System.Activities.Presentation.Model.EditingScope.OnComplete%2A> or <xref:System.Activities.Presentation.Model.EditingScope.OnRevert%2A> can be called to either commit or revert the editing scope.  \n  \n You can also nest <xref:System.Activities.Presentation.Model.EditingScope> objects, which allows for multiple sets of changes to be tracked as part of a larger editing scope and can be controlled individually. A scenario that may use this feature would be when changes from multiple dialogs must be committed or reverted separately, with all changes being treated as a single atomic operation. In this sample, the editing scopes are stacked using an <xref:System.Collections.ObjectModel.ObservableCollection%601> of type <xref:System.Activities.Presentation.Model.ModelEditingScope>. The <xref:System.Collections.ObjectModel.ObservableCollection%601> is used so that the depth of the nesting can be observed on the designer surface.  \n  \n## To set up, build, and run the sample  \n  \n1.  Build and run the sample, and then use the buttons on the left to modify the workflow.  \n  \n2.  Click **Open Editing Scope**.  \n  \n    1.  This command calls <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> that creates an editing scope and pushes it onto the editing stack.  \n  \n    2.  Three activities are then added to the selected <xref:System.Activities.Presentation.Model.ModelItem>. Note that if the editing scope had not been opened with <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A>, three new activities would appear on the designer canvas. Because this operation is still pending within the <xref:System.Activities.Presentation.Model.EditingScope>, the designer is not yet updated.  \n  \n3.  Press **Close Editing Scope** to commit the editing scope. Three activities appear in the designer.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\CustomActivities\\CustomActivityDesigners\\UsingEditingScope`\n","nodes":[{"pos":[4,103],"embed":true,"restype":"x-metadata","content":"title: \"Using Editing Scope\"\nms.date: \"03/30/2017\"\nms.assetid: 79306f9e-318b-4687-9863-8b93d1841716","nodes":[{"content":"Using Editing Scope","nodes":[{"pos":[0,19],"content":"Using Editing Scope","nodes":[{"content":"Using Editing Scope","pos":[0,19]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[110,129],"content":"Using Editing Scope","linkify":"Using Editing Scope","nodes":[{"content":"Using Editing Scope","pos":[0,19]}]},{"content":"This sample demonstrates how to batch a set of changes so that they can be undone in a single atomic unit.","pos":[130,236]},{"content":"By default, the actions taken by an activity designer author are automatically integrated into the Undo/Redo system.","pos":[237,353]},{"pos":[362,374],"content":"Demonstrates","linkify":"Demonstrates","nodes":[{"content":"Demonstrates","pos":[0,12]}]},{"content":"Editing scope and Undo and Redo.","pos":[378,410]},{"pos":[419,429],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"This sample demonstrates how to batch a set of changes to the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree within a single unit of work.","pos":[433,583],"source":"This sample demonstrates how to batch a set of changes to the <xref:System.Activities.Presentation.Model.ModelItem> tree within a single unit of work."},{"content":"Note that when binding to <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> values directly from a WPF designer, changes are applied automatically.","pos":[584,735],"source":" Note that when binding to <xref:System.Activities.Presentation.Model.ModelItem> values directly from a WPF designer, changes are applied automatically."},{"content":"This sample demonstrates what must be done when multiple changes to be batched are being made through imperative code, rather than a single change.","pos":[736,883]},{"content":"In this sample, three activities are added.","pos":[890,933]},{"content":"When editing begins, <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A&gt;</ph> is called on an instance of <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph>.","pos":[934,1104],"source":" When editing begins, <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> is called on an instance of <xref:System.Activities.Presentation.Model.ModelItem>."},{"content":"Changes made to the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree within this editing scope are batched.","pos":[1105,1222],"source":" Changes made to the <xref:System.Activities.Presentation.Model.ModelItem> tree within this editing scope are batched."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A&gt;</ph> command returns an <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.EditingScope&gt;</ph>, which can be used to control this instance.","pos":[1223,1414],"source":" The <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> command returns an <xref:System.Activities.Presentation.Model.EditingScope>, which can be used to control this instance."},{"content":"Either <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.EditingScope.OnComplete%2A&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.EditingScope.OnRevert%2A&gt;</ph> can be called to either commit or revert the editing scope.","pos":[1415,1624],"source":" Either <xref:System.Activities.Presentation.Model.EditingScope.OnComplete%2A> or <xref:System.Activities.Presentation.Model.EditingScope.OnRevert%2A> can be called to either commit or revert the editing scope."},{"content":"You can also nest <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.EditingScope&gt;</ph> objects, which allows for multiple sets of changes to be tracked as part of a larger editing scope and can be controlled individually.","pos":[1631,1840],"source":"You can also nest <xref:System.Activities.Presentation.Model.EditingScope> objects, which allows for multiple sets of changes to be tracked as part of a larger editing scope and can be controlled individually."},{"content":"A scenario that may use this feature would be when changes from multiple dialogs must be committed or reverted separately, with all changes being treated as a single atomic operation.","pos":[1841,2024]},{"content":"In this sample, the editing scopes are stacked using an <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph> of type <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelEditingScope&gt;</ph>.","pos":[2025,2214],"source":" In this sample, the editing scopes are stacked using an <xref:System.Collections.ObjectModel.ObservableCollection%601> of type <xref:System.Activities.Presentation.Model.ModelEditingScope>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph> is used so that the depth of the nesting can be observed on the designer surface.","pos":[2215,2363],"source":" The <xref:System.Collections.ObjectModel.ObservableCollection%601> is used so that the depth of the nesting can be observed on the designer surface."},{"pos":[2372,2408],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"content":"Build and run the sample, and then use the buttons on the left to modify the workflow.","pos":[2418,2504]},{"pos":[2514,2543],"content":"Click <bpt id=\"p1\">**</bpt>Open Editing Scope<ept id=\"p1\">**</ept>.","source":"Click **Open Editing Scope**."},{"pos":[2557,2710],"content":"This command calls <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A&gt;</ph> that creates an editing scope and pushes it onto the editing stack.","source":"This command calls <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A> that creates an editing scope and pushes it onto the editing stack."},{"content":"Three activities are then added to the selected <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph>.","pos":[2724,2826],"source":"Three activities are then added to the selected <xref:System.Activities.Presentation.Model.ModelItem>."},{"content":"Note that if the editing scope had not been opened with <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A&gt;</ph>, three new activities would appear on the designer canvas.","pos":[2827,3008],"source":" Note that if the editing scope had not been opened with <xref:System.Activities.Presentation.Model.ModelItem.BeginEdit%2A>, three new activities would appear on the designer canvas."},{"content":"Because this operation is still pending within the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.EditingScope&gt;</ph>, the designer is not yet updated.","pos":[3009,3150],"source":" Because this operation is still pending within the <xref:System.Activities.Presentation.Model.EditingScope>, the designer is not yet updated."},{"content":"Press <bpt id=\"p1\">**</bpt>Close Editing Scope<ept id=\"p1\">**</ept> to commit the editing scope.","pos":[3160,3218],"source":"Press **Close Editing Scope** to commit the editing scope."},{"content":"Three activities appear in the designer.","pos":[3219,3259]},{"pos":[3267,3399],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3453,3763],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3764,3814]}]}