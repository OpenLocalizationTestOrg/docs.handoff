{"content":"---\ntitle: \"Transactions and Concurrency\"\nms.date: \"03/30/2017\"\nms.assetid: f46570de-9e50-4fe6-8710-a8c31fa8569b\n---\n# Transactions and Concurrency\nA transaction consists of a single command or a group of commands that execute as a package. Transactions allow you to combine multiple operations into a single unit of work. If a failure occurs at one point in the transaction, all of the updates can be rolled back to their pre-transaction state.  \n  \n A transaction must conform to the ACID properties—atomicity, consistency, isolation, and durability—in order to guarantee data consistency. Most relational database systems, such as Microsoft SQL Server, support transactions by providing locking, logging, and transaction management facilities whenever a client application performs an update, insert, or delete operation.  \n  \n> [!NOTE]\n>  Transactions that involve multiple resources can lower concurrency if locks are held too long. Therefore, keep transactions as short as possible.  \n  \n If a transaction involves multiple tables in the same database or server, then explicit transactions in stored procedures often perform better. You can create transactions in SQL Server stored procedures by using the Transact-SQL `BEGIN TRANSACTION`, `COMMIT TRANSACTION`, and `ROLLBACK TRANSACTION` statements. For more information, see SQL Server Books Online.  \n  \n Transactions involving different resource managers, such as a transaction between SQL Server and Oracle, require a distributed transaction.  \n  \n## In This Section  \n [Local Transactions](../../../../docs/framework/data/adonet/local-transactions.md)  \n Demonstrates how to perform transactions against a database.  \n  \n [Distributed Transactions](../../../../docs/framework/data/adonet/distributed-transactions.md)  \n Describes how to perform distributed transactions in ADO.NET.  \n  \n [System.Transactions Integration with SQL Server](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md)  \n Describes <xref:System.Transactions> integration with SQL Server for working with distributed transactions.  \n  \n [Optimistic Concurrency](../../../../docs/framework/data/adonet/optimistic-concurrency.md)  \n Describes optimistic and pessimistic concurrency, and how you can test for concurrency violations.  \n  \n## See also\n\n- [Transaction Fundamentals](../../../../docs/framework/data/transactions/transaction-fundamentals.md)\n- [Connecting to a Data Source](../../../../docs/framework/data/adonet/connecting-to-a-data-source.md)\n- [Commands and Parameters](../../../../docs/framework/data/adonet/commands-and-parameters.md)\n- [DataAdapters and DataReaders](../../../../docs/framework/data/adonet/dataadapters-and-datareaders.md)\n- [DbProviderFactories](../../../../docs/framework/data/adonet/dbproviderfactories.md)\n- [ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)\n","nodes":[{"pos":[4,112],"embed":true,"restype":"x-metadata","content":"title: \"Transactions and Concurrency\"\nms.date: \"03/30/2017\"\nms.assetid: f46570de-9e50-4fe6-8710-a8c31fa8569b","nodes":[{"content":"Transactions and Concurrency","nodes":[{"pos":[0,28],"content":"Transactions and Concurrency","nodes":[{"content":"Transactions and Concurrency","pos":[0,28]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[119,147],"content":"Transactions and Concurrency","linkify":"Transactions and Concurrency","nodes":[{"content":"Transactions and Concurrency","pos":[0,28]}]},{"content":"A transaction consists of a single command or a group of commands that execute as a package.","pos":[148,240]},{"content":"Transactions allow you to combine multiple operations into a single unit of work.","pos":[241,322]},{"content":"If a failure occurs at one point in the transaction, all of the updates can be rolled back to their pre-transaction state.","pos":[323,445]},{"content":"A transaction must conform to the ACID properties—atomicity, consistency, isolation, and durability—in order to guarantee data consistency.","pos":[452,591]},{"content":"Most relational database systems, such as Microsoft SQL Server, support transactions by providing locking, logging, and transaction management facilities whenever a client application performs an update, insert, or delete operation.","pos":[592,824]},{"pos":[832,988],"content":"[!NOTE]\n Transactions that involve multiple resources can lower concurrency if locks are held too long. Therefore, keep transactions as short as possible.","leadings":["","> "],"nodes":[{"content":"Transactions that involve multiple resources can lower concurrency if locks are held too long. Therefore, keep transactions as short as possible.","pos":[9,154],"nodes":[{"content":"Transactions that involve multiple resources can lower concurrency if locks are held too long.","pos":[0,94]},{"content":"Therefore, keep transactions as short as possible.","pos":[95,145]}]}]},{"content":"If a transaction involves multiple tables in the same database or server, then explicit transactions in stored procedures often perform better.","pos":[995,1138]},{"content":"You can create transactions in SQL Server stored procedures by using the Transact-SQL <ph id=\"ph1\">`BEGIN TRANSACTION`</ph>, <ph id=\"ph2\">`COMMIT TRANSACTION`</ph>, and <ph id=\"ph3\">`ROLLBACK TRANSACTION`</ph> statements.","pos":[1139,1306],"source":" You can create transactions in SQL Server stored procedures by using the Transact-SQL `BEGIN TRANSACTION`, `COMMIT TRANSACTION`, and `ROLLBACK TRANSACTION` statements."},{"content":"For more information, see SQL Server Books Online.","pos":[1307,1357]},{"content":"Transactions involving different resource managers, such as a transaction between SQL Server and Oracle, require a distributed transaction.","pos":[1364,1503]},{"pos":[1512,1527],"content":"In This Section","linkify":"In This Section","nodes":[{"content":"In This Section","pos":[0,15]}]},{"content":"<bpt id=\"p1\">[</bpt>Local Transactions<ept id=\"p1\">](../../../../docs/framework/data/adonet/local-transactions.md)</ept>","pos":[1531,1613],"source":"[Local Transactions](../../../../docs/framework/data/adonet/local-transactions.md)"},{"content":"Demonstrates how to perform transactions against a database.","pos":[1617,1677]},{"content":"<bpt id=\"p1\">[</bpt>Distributed Transactions<ept id=\"p1\">](../../../../docs/framework/data/adonet/distributed-transactions.md)</ept>","pos":[1684,1778],"source":"[Distributed Transactions](../../../../docs/framework/data/adonet/distributed-transactions.md)"},{"content":"Describes how to perform distributed transactions in ADO.NET.","pos":[1782,1843]},{"content":"<bpt id=\"p1\">[</bpt>System.Transactions Integration with SQL Server<ept id=\"p1\">](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md)</ept>","pos":[1850,1990],"source":"[System.Transactions Integration with SQL Server](../../../../docs/framework/data/adonet/system-transactions-integration-with-sql-server.md)"},{"content":"Describes <ph id=\"ph1\">&lt;xref:System.Transactions&gt;</ph> integration with SQL Server for working with distributed transactions.","pos":[1994,2101],"source":"Describes <xref:System.Transactions> integration with SQL Server for working with distributed transactions."},{"content":"<bpt id=\"p1\">[</bpt>Optimistic Concurrency<ept id=\"p1\">](../../../../docs/framework/data/adonet/optimistic-concurrency.md)</ept>","pos":[2108,2198],"source":"[Optimistic Concurrency](../../../../docs/framework/data/adonet/optimistic-concurrency.md)"},{"content":"Describes optimistic and pessimistic concurrency, and how you can test for concurrency violations.","pos":[2202,2300]},{"pos":[2309,2317],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2321,2421],"content":"<bpt id=\"p1\">[</bpt>Transaction Fundamentals<ept id=\"p1\">](../../../../docs/framework/data/transactions/transaction-fundamentals.md)</ept>","source":"[Transaction Fundamentals](../../../../docs/framework/data/transactions/transaction-fundamentals.md)"},{"pos":[2424,2524],"content":"<bpt id=\"p1\">[</bpt>Connecting to a Data Source<ept id=\"p1\">](../../../../docs/framework/data/adonet/connecting-to-a-data-source.md)</ept>","source":"[Connecting to a Data Source](../../../../docs/framework/data/adonet/connecting-to-a-data-source.md)"},{"pos":[2527,2619],"content":"<bpt id=\"p1\">[</bpt>Commands and Parameters<ept id=\"p1\">](../../../../docs/framework/data/adonet/commands-and-parameters.md)</ept>","source":"[Commands and Parameters](../../../../docs/framework/data/adonet/commands-and-parameters.md)"},{"pos":[2622,2724],"content":"<bpt id=\"p1\">[</bpt>DataAdapters and DataReaders<ept id=\"p1\">](../../../../docs/framework/data/adonet/dataadapters-and-datareaders.md)</ept>","source":"[DataAdapters and DataReaders](../../../../docs/framework/data/adonet/dataadapters-and-datareaders.md)"},{"pos":[2727,2811],"content":"<bpt id=\"p1\">[</bpt>DbProviderFactories<ept id=\"p1\">](../../../../docs/framework/data/adonet/dbproviderfactories.md)</ept>","source":"[DbProviderFactories](../../../../docs/framework/data/adonet/dbproviderfactories.md)"},{"pos":[2814,2918],"content":"<bpt id=\"p1\">[</bpt>ADO.NET Managed Providers and DataSet Developer Center<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=217917)</ept>","source":"[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)"}]}