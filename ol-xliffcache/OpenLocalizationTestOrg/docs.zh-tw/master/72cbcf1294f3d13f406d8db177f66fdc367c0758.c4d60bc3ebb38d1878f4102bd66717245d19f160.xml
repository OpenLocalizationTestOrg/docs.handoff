{"content":"---\ntitle: \"Modify XML Data using XPathNavigator\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\n  - \"cpp\"\nms.assetid: 03a7c5a1-b296-4af4-b209-043c958dc0a5\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# Modify XML Data using XPathNavigator\nThe <xref:System.Xml.XPath.XPathNavigator> class provides a set of methods used to modify nodes and values in an XML document. In order to use these methods, the <xref:System.Xml.XPath.XPathNavigator> object must be editable, that is, its <xref:System.Xml.XPath.XPathNavigator.CanEdit%2A> property must be `true`.  \n  \n <xref:System.Xml.XPath.XPathNavigator> objects that can edit an XML document are created by the <xref:System.Xml.XmlDocument.CreateNavigator%2A> method of the <xref:System.Xml.XmlDocument> class. <xref:System.Xml.XPath.XPathNavigator> objects created by the <xref:System.Xml.XPath.XPathDocument> class are read-only and any attempt to use the editing methods of an <xref:System.Xml.XPath.XPathNavigator> object created by an <xref:System.Xml.XPath.XPathDocument> object result in a <xref:System.NotSupportedException>.  \n  \n For more information about creating editable <xref:System.Xml.XPath.XPathNavigator> objects, see [Reading XML Data using XPathDocument and XmlDocument](../../../../docs/standard/data/xml/reading-xml-data-using-xpathdocument-and-xmldocument.md).  \n  \n## Modifying Nodes  \n A simple technique for changing the value of a node is to use the <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> and <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> methods of the <xref:System.Xml.XPath.XPathNavigator> class.  \n  \n The following table lists the effects of these methods on different node types.  \n  \n|<xref:System.Xml.XPath.XPathNodeType>|Data Changed|  \n|---------------------------------------------------------------------------------------------------------------------------------------------|------------------|  \n|<xref:System.Xml.XPath.XPathNodeType.Root>|Not supported.|  \n|<xref:System.Xml.XPath.XPathNodeType.Element>|The content of the element.|  \n|<xref:System.Xml.XPath.XPathNodeType.Attribute>|The value of the attribute.|  \n|<xref:System.Xml.XPath.XPathNodeType.Text>|The text content.|  \n|<xref:System.Xml.XPath.XPathNodeType.ProcessingInstruction>|The content, excluding the target.|  \n|<xref:System.Xml.XPath.XPathNodeType.Comment>|The content of the comment.|  \n|<xref:System.Xml.XPath.XPathNodeType.Namespace>|Not Supported.|  \n  \n> [!NOTE]\n>  Editing <xref:System.Xml.XPath.XPathNodeType.Namespace> nodes or the <xref:System.Xml.XPath.XPathNodeType.Root> node is not supported.  \n  \n The <xref:System.Xml.XPath.XPathNavigator> class also provides a set of methods used to insert and remove nodes. For more information about inserting and removing nodes from an XML document, see the [Insert XML Data using XPathNavigator](../../../../docs/standard/data/xml/insert-xml-data-using-xpathnavigator.md) and [Remove XML Data using XPathNavigator](../../../../docs/standard/data/xml/remove-xml-data-using-xpathnavigator.md) topics.  \n  \n### Modifying Untyped Values  \n The <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> method simply inserts the untyped `string` value passed as a parameter as the value of the node the <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on. The value is inserted without any type or without verifying that the new value is valid according to the type of the node if schema information is available.  \n  \n In the following example, the <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> method is used to update all `price` elements in the `contosoBooks.xml` file.  \n  \n [!code-cpp[XPathNavigatorMethods#47](../../../../samples/snippets/cpp/VS_Snippets_Data/XPathNavigatorMethods/CPP/xpathnavigatormethods.cpp#47)]\n [!code-csharp[XPathNavigatorMethods#47](../../../../samples/snippets/csharp/VS_Snippets_Data/XPathNavigatorMethods/CS/xpathnavigatormethods.cs#47)]\n [!code-vb[XPathNavigatorMethods#47](../../../../samples/snippets/visualbasic/VS_Snippets_Data/XPathNavigatorMethods/VB/xpathnavigatormethods.vb#47)]  \n  \n The example takes the `contosoBooks.xml` file as an input.  \n  \n [!code-xml[XPathXMLExamples#2](../../../../samples/snippets/xml/VS_Snippets_Data/XPathXMLExamples/XML/contosoBooks.xml#2)]  \n  \n### Modifying Typed Values  \n When the type of a node is a W3C XML Schema simple type, the new value inserted by the <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> method is checked against the facets of the simple type before the value is set. If the new value is not valid according to the type of the node (for example, setting a value of `-1` on an element whose type is `xs:positiveInteger`), it results in an exception.  \n  \n The following example attempts to change the value of the `price` element of the first `book` element in the `contosoBooks.xml` file to a <xref:System.DateTime> value. Because the XML Schema type of the `price` element is defined as `xs:decimal` in the `contosoBooks.xsd` files, this results in an exception.  \n  \n```vb  \nDim settings As XmlReaderSettings = New XmlReaderSettings()  \nsettings.Schemas.Add(\"http://www.contoso.com/books\", \"contosoBooks.xsd\")  \nsettings.ValidationType = ValidationType.Schema  \n  \nDim reader As XmlReader = XmlReader.Create(\"contosoBooks.xml\", settings)  \n  \nDim document As XmlDocument = New XmlDocument()  \ndocument.Load(reader)  \nDim navigator As XPathNavigator = document.CreateNavigator()  \n  \nnavigator.MoveToChild(\"bookstore\", \"http://www.contoso.com/books\")  \nnavigator.MoveToChild(\"book\", \"http://www.contoso.com/books\")  \nnavigator.MoveToChild(\"price\", \"http://www.contoso.com/books\")  \n  \nnavigator.SetTypedValue(DateTime.Now)  \n```  \n  \n```csharp  \nXmlReaderSettings settings = new XmlReaderSettings();  \nsettings.Schemas.Add(\"http://www.contoso.com/books\", \"contosoBooks.xsd\");  \nsettings.ValidationType = ValidationType.Schema;  \n  \nXmlReader reader = XmlReader.Create(\"contosoBooks.xml\", settings);  \n  \nXmlDocument document = new XmlDocument();  \ndocument.Load(reader);  \nXPathNavigator navigator = document.CreateNavigator();  \n  \nnavigator.MoveToChild(\"bookstore\", \"http://www.contoso.com/books\");  \nnavigator.MoveToChild(\"book\", \"http://www.contoso.com/books\");  \nnavigator.MoveToChild(\"price\", \"http://www.contoso.com/books\");  \n  \nnavigator.SetTypedValue(DateTime.Now);  \n```  \n  \n The example takes the `contosoBooks.xml` file as an input.  \n  \n [!code-xml[XPathXMLExamples#2](../../../../samples/snippets/xml/VS_Snippets_Data/XPathXMLExamples/XML/contosoBooks.xml#2)]  \n  \n The example also takes the `contosoBooks.xsd` as an input.  \n  \n [!code-xml[XPathXMLExamples#3](../../../../samples/snippets/xml/VS_Snippets_Data/XPathXMLExamples/XML/contosoBooks.xsd#3)]  \n  \n#### The Effects of Editing Strongly Typed XML Data  \n The <xref:System.Xml.XPath.XPathNavigator> class uses the W3C XML Schema as a basis for describing strongly-typed XML. Elements and attributes can be annotated with type information based on validation against a W3C XML Schema document. Elements that can contain other elements or attributes are called complex types, while those that can only contain textual content are called simple types.  \n  \n> [!NOTE]\n>  Attributes can only have simple types.  \n  \n An element or attribute can be considered to be schema-valid if it conforms to all the rules specific to its type definition. An element that has the simple type `xs:int` has to contain a numeric value between -2147483648 and 2147483647 to be schema-valid. For complex types, the schema-validity of the element is dependent on the schema-validity of its child elements and attributes. Thus if an element is valid against its complex type definition, all its child elements and attributes are valid against their type definitions. Similarly, if even one of the child elements or attributes of an element is invalid against its type definition, or has an unknown validity, the element is also either invalid or of unknown validity.  \n  \n Given that the validity of an element is dependent on the validity of its child elements and attributes, modifications to either result in altering the validity of the element if it was previously valid. Specifically, if the child elements or attributes of an element are inserted, updated, or deleted, then the validity of the element becomes unknown. This is represented by the <xref:System.Xml.Schema.IXmlSchemaInfo.Validity%2A> property of the element's <xref:System.Xml.XPath.XPathNavigator.SchemaInfo%2A> property being set to <xref:System.Xml.Schema.XmlSchemaValidity.NotKnown>. Furthermore, this effect cascades upwards recursively across the XML document, because the validity of the element's parent element (and its parent element, and so on) also becomes unknown.  \n  \n For more information about schema validation and the <xref:System.Xml.XPath.XPathNavigator> class, see [Schema Validation using XPathNavigator](../../../../docs/standard/data/xml/schema-validation-using-xpathnavigator.md).  \n  \n### Modifying Attributes  \n The <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> and <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> methods can be used to modify untyped and typed attribute nodes as well as the other node types listed in the \"Modifying Nodes\" section.  \n  \n The following example changes the value of the `genre` attribute of the first `book` element in the `books.xml` file.  \n  \n```vb  \nDim document As XmlDocument = New XmlDocument()  \ndocument.Load(\"books.xml\")  \nDim navigator As XPathNavigator = document.CreateNavigator()  \n  \nnavigator.MoveToChild(\"bookstore\", String.Empty)  \nnavigator.MoveToChild(\"book\", String.Empty)  \nnavigator.MoveToAttribute(\"genre\", String.Empty)  \n  \nnavigator.SetValue(\"non-fiction\")  \n  \nnavigator.MoveToRoot()  \nConsole.WriteLine(navigator.OuterXml)  \n```  \n  \n```csharp  \nXmlDocument document = new XmlDocument();  \ndocument.Load(\"books.xml\");  \nXPathNavigator navigator = document.CreateNavigator();  \n  \nnavigator.MoveToChild(\"bookstore\", String.Empty);  \nnavigator.MoveToChild(\"book\", String.Empty);  \nnavigator.MoveToAttribute(\"genre\", String.Empty);  \n  \nnavigator.SetValue(\"non-fiction\");  \n  \nnavigator.MoveToRoot();  \nConsole.WriteLine(navigator.OuterXml);  \n```  \n  \n For more information about the <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> and <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> methods, see the \"Modifying Untyped Values\" and \"Modifying Typed Values\" sections.  \n  \n## InnerXml and OuterXml Properties  \n The <xref:System.Xml.XPath.XPathNavigator.InnerXml%2A> and <xref:System.Xml.XPath.XPathNavigator.OuterXml%2A> properties of the <xref:System.Xml.XPath.XPathNavigator> class change the XML markup of the nodes an <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on.  \n  \n The <xref:System.Xml.XPath.XPathNavigator.InnerXml%2A> property changes the XML markup of the child nodes an <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on with the parsed contents of the given XML `string`. Similarly, the <xref:System.Xml.XPath.XPathNavigator.OuterXml%2A> property changes the XML markup of the child nodes an <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on as well as the current node itself.  \n  \n The following example uses the <xref:System.Xml.XPath.XPathNavigator.OuterXml%2A> property to modify the value of the `price` element and insert a new `discount` attribute on the first `book` element in the `contosoBooks.xml` file.  \n  \n```vb  \nDim document As XmlDocument = New XmlDocument()  \ndocument.Load(\"contosoBooks.xml\");  \nDim navigator As XPathNavigator = document.CreateNavigator()  \n  \nnavigator.MoveToChild(\"bookstore\", \"http://www.contoso.com/books\")  \nnavigator.MoveToChild(\"book\", \"http://www.contoso.com/books\")  \nnavigator.MoveToChild(\"price\", \"http://www.contoso.com/books\")  \n  \nnavigator.OuterXml = \"<price discount=\\\"0\\\">10.99</price>\"  \n  \nnavigator.MoveToRoot()  \nConsole.WriteLine(navigator.OuterXml)  \n```  \n  \n```csharp  \nXmlDocument document = new XmlDocument();  \ndocument.Load(\"contosoBooks.xml\");  \nXPathNavigator navigator = document.CreateNavigator();  \n  \nnavigator.MoveToChild(\"bookstore\", \"http://www.contoso.com/books\");  \nnavigator.MoveToChild(\"book\", \"http://www.contoso.com/books\");  \nnavigator.MoveToChild(\"price\", \"http://www.contoso.com/books\");  \n  \nnavigator.OuterXml = \"<price discount=\\\"0\\\">10.99</price>\";  \n  \nnavigator.MoveToRoot();  \nConsole.WriteLine(navigator.OuterXml);  \n```  \n  \n The example takes the `contosoBooks.xml` file as an input.  \n  \n [!code-xml[XPathXMLExamples#2](../../../../samples/snippets/xml/VS_Snippets_Data/XPathXMLExamples/XML/contosoBooks.xml#2)]  \n  \n## Modifying Namespace Nodes  \n In the Document Object Model (DOM), namespace declarations are treated as if they are regular attributes that can be inserted, updated and deleted. The <xref:System.Xml.XPath.XPathNavigator> class does not allow such operations on namespace nodes because altering the value of a namespace node can change the identity of the elements and attributes within the scope of the namespace node as illustrated in the following example.  \n  \n```xml  \n<root xmlns=\"http://www.contoso.com\">  \n    <child />  \n</root>  \n```  \n  \n If the XML example above is changed in the following way, this effectively renames every element in the document because the value of each element's namespace URI is changed.  \n  \n```xml  \n<root xmlns=\"urn:contoso.com\">  \n    <child />  \n</root>  \n```  \n  \n Inserting namespace nodes that do not conflict with namespace declarations at the scope that they are inserted in is allowed by the <xref:System.Xml.XPath.XPathNavigator> class. In this case, the namespace declarations are not declared at lower scopes in the XML document and does not result in renaming as illustrated in the following example.  \n  \n```xml  \n<root xmlns:a=\"http://www.contoso.com\">  \n    <parent>  \n        <a:child />  \n    </parent>  \n</root>  \n```  \n  \n If the XML example above is changed in the following way, the namespace declarations are correctly propagated across the XML document below the scope of the other namespace declaration.  \n  \n```xml  \n<root xmlns:a=\"http://www.contoso.com\">  \n    <parent a:parent-id=\"1234\" xmlns:a=\"http://www.contoso.com/parent-id\">  \n        <a:child xmlns:a=\"http://www.contoso.com/\">  \n    </parent>  \n</root>  \n```  \n  \n In the XML example above, the attribute `a:parent-id` is inserted on the `parent` element in the `http://www.contoso.com/parent-id` namespace. The <xref:System.Xml.XPath.XPathNavigator.CreateAttribute%2A> method is used to insert the attribute while positioned on the `parent` element. The `http://www.contoso.com` namespace declaration is automatically inserted by the <xref:System.Xml.XPath.XPathNavigator> class to preserve the consistency of the rest of the XML document.  \n  \n## Modifying Entity Reference Nodes  \n Entity reference nodes in an <xref:System.Xml.XmlDocument> object are read-only and cannot be edited using either the <xref:System.Xml.XPath.XPathNavigator> or <xref:System.Xml.XmlNode> classes. Any attempt to modify an entity reference node results in an <xref:System.InvalidOperationException>.  \n  \n## Modifying xsi:nil Nodes  \n The W3C XML Schema recommendation introduces the concept of an element being nillable. When an element is nillable, it is possible for the element to have no content and still be valid. The concept of an element being nillable is similar to the concept of an object being `null`. The main difference is that a `null` object cannot be accessed in any way, while an `xsi:nil` element still has properties such as attributes that can be accessed, but has no content (child elements or text). The existence of the `xsi:nil` attribute with a value of `true` on an element in an XML document is used to indicate that an element has no content.  \n  \n If an <xref:System.Xml.XPath.XPathNavigator> object is used to add content to a valid element with an `xsi:nil` attribute with a value of `true`, the value of its `xsi:nil` attribute is set to `false`.  \n  \n> [!NOTE]\n>  If the content of an element with an `xsi:nil` attribute set to `false` is deleted, the value of the attribute is not changed to `true`.  \n  \n## Saving an XML Document  \n Saving changes made to an <xref:System.Xml.XmlDocument> object as the result of the editing methods described in this topic is performed using the methods of the <xref:System.Xml.XmlDocument> class. For more information about saving changes made to an <xref:System.Xml.XmlDocument> object, see [Saving and Writing a Document](../../../../docs/standard/data/xml/saving-and-writing-a-document.md).  \n  \n## See also\n\n- <xref:System.Xml.XmlDocument>\n- <xref:System.Xml.XPath.XPathDocument>\n- <xref:System.Xml.XPath.XPathNavigator>\n- [Process XML Data Using the XPath Data Model](../../../../docs/standard/data/xml/process-xml-data-using-the-xpath-data-model.md)\n- [Insert XML Data using XPathNavigator](../../../../docs/standard/data/xml/insert-xml-data-using-xpathnavigator.md)\n- [Remove XML Data using XPathNavigator](../../../../docs/standard/data/xml/remove-xml-data-using-xpathnavigator.md)\n","nodes":[{"pos":[4,232],"embed":true,"restype":"x-metadata","content":"title: \"Modify XML Data using XPathNavigator\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\n  - \"cpp\"\nms.assetid: 03a7c5a1-b296-4af4-b209-043c958dc0a5\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"Modify XML Data using XPathNavigator","nodes":[{"pos":[0,36],"content":"Modify XML Data using XPathNavigator","nodes":[{"content":"Modify XML Data using XPathNavigator","pos":[0,36]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[239,275],"content":"Modify XML Data using XPathNavigator","linkify":"Modify XML Data using XPathNavigator","nodes":[{"content":"Modify XML Data using XPathNavigator","pos":[0,36]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class provides a set of methods used to modify nodes and values in an XML document.","pos":[276,402],"source":"The <xref:System.Xml.XPath.XPathNavigator> class provides a set of methods used to modify nodes and values in an XML document."},{"content":"In order to use these methods, the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object must be editable, that is, its <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator.CanEdit%2A&gt;</ph> property must be <ph id=\"ph3\">`true`</ph>.","pos":[403,589],"source":" In order to use these methods, the <xref:System.Xml.XPath.XPathNavigator> object must be editable, that is, its <xref:System.Xml.XPath.XPathNavigator.CanEdit%2A> property must be `true`."},{"content":"<ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> objects that can edit an XML document are created by the <ph id=\"ph2\">&lt;xref:System.Xml.XmlDocument.CreateNavigator%2A&gt;</ph> method of the <ph id=\"ph3\">&lt;xref:System.Xml.XmlDocument&gt;</ph> class.","pos":[596,791],"source":"<xref:System.Xml.XPath.XPathNavigator> objects that can edit an XML document are created by the <xref:System.Xml.XmlDocument.CreateNavigator%2A> method of the <xref:System.Xml.XmlDocument> class."},{"content":"<ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> objects created by the <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathDocument&gt;</ph> class are read-only and any attempt to use the editing methods of an <ph id=\"ph3\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object created by an <ph id=\"ph4\">&lt;xref:System.Xml.XPath.XPathDocument&gt;</ph> object result in a <ph id=\"ph5\">&lt;xref:System.NotSupportedException&gt;</ph>.","pos":[792,1114],"source":"<xref:System.Xml.XPath.XPathNavigator> objects created by the <xref:System.Xml.XPath.XPathDocument> class are read-only and any attempt to use the editing methods of an <xref:System.Xml.XPath.XPathNavigator> object created by an <xref:System.Xml.XPath.XPathDocument> object result in a <xref:System.NotSupportedException>."},{"pos":[1121,1365],"content":"For more information about creating editable <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> objects, see <bpt id=\"p1\">[</bpt>Reading XML Data using XPathDocument and XmlDocument<ept id=\"p1\">](../../../../docs/standard/data/xml/reading-xml-data-using-xpathdocument-and-xmldocument.md)</ept>.","source":"For more information about creating editable <xref:System.Xml.XPath.XPathNavigator> objects, see [Reading XML Data using XPathDocument and XmlDocument](../../../../docs/standard/data/xml/reading-xml-data-using-xpathdocument-and-xmldocument.md)."},{"pos":[1374,1389],"content":"Modifying Nodes","linkify":"Modifying Nodes","nodes":[{"content":"Modifying Nodes","pos":[0,15]}]},{"pos":[1393,1630],"content":"A simple technique for changing the value of a node is to use the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.SetValue%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A&gt;</ph> methods of the <ph id=\"ph3\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class.","source":"A simple technique for changing the value of a node is to use the <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> and <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> methods of the <xref:System.Xml.XPath.XPathNavigator> class."},{"content":"The following table lists the effects of these methods on different node types.","pos":[1637,1716]},{"content":"Data Changed","pos":[1761,1773]},{"content":"Not supported.","pos":[1986,2000]},{"content":"The content of the element.","pos":[2051,2078]},{"content":"The value of the attribute.","pos":[2131,2158]},{"content":"The text content.","pos":[2206,2223]},{"content":"The content, excluding the target.","pos":[2288,2322]},{"content":"The content of the comment.","pos":[2373,2400]},{"content":"Not Supported.","pos":[2453,2467]},{"pos":[2476,2621],"content":"[!NOTE]\n Editing <xref:System.Xml.XPath.XPathNodeType.Namespace> nodes or the <xref:System.Xml.XPath.XPathNodeType.Root> node is not supported.","leadings":["","> "],"nodes":[{"content":"Editing <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNodeType.Namespace&gt;</ph> nodes or the <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNodeType.Root&gt;</ph> node is not supported.","pos":[9,143],"source":"Editing <xref:System.Xml.XPath.XPathNodeType.Namespace> nodes or the <xref:System.Xml.XPath.XPathNodeType.Root> node is not supported."}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class also provides a set of methods used to insert and remove nodes.","pos":[2628,2740],"source":"The <xref:System.Xml.XPath.XPathNavigator> class also provides a set of methods used to insert and remove nodes."},{"content":"For more information about inserting and removing nodes from an XML document, see the <bpt id=\"p1\">[</bpt>Insert XML Data using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/insert-xml-data-using-xpathnavigator.md)</ept> and <bpt id=\"p2\">[</bpt>Remove XML Data using XPathNavigator<ept id=\"p2\">](../../../../docs/standard/data/xml/remove-xml-data-using-xpathnavigator.md)</ept> topics.","pos":[2741,3068],"source":" For more information about inserting and removing nodes from an XML document, see the [Insert XML Data using XPathNavigator](../../../../docs/standard/data/xml/insert-xml-data-using-xpathnavigator.md) and [Remove XML Data using XPathNavigator](../../../../docs/standard/data/xml/remove-xml-data-using-xpathnavigator.md) topics."},{"pos":[3078,3102],"content":"Modifying Untyped Values","linkify":"Modifying Untyped Values","nodes":[{"content":"Modifying Untyped Values","pos":[0,24]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.SetValue%2A&gt;</ph> method simply inserts the untyped <ph id=\"ph2\">`string`</ph> value passed as a parameter as the value of the node the <ph id=\"ph3\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object is currently positioned on.","pos":[3106,3334],"source":"The <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> method simply inserts the untyped `string` value passed as a parameter as the value of the node the <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on."},{"content":"The value is inserted without any type or without verifying that the new value is valid according to the type of the node if schema information is available.","pos":[3335,3492]},{"pos":[3499,3657],"content":"In the following example, the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.SetValue%2A&gt;</ph> method is used to update all <ph id=\"ph2\">`price`</ph> elements in the <ph id=\"ph3\">`contosoBooks.xml`</ph> file.","source":"In the following example, the <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> method is used to update all `price` elements in the `contosoBooks.xml` file."},{"pos":[4113,4171],"content":"The example takes the <ph id=\"ph1\">`contosoBooks.xml`</ph> file as an input.","source":"The example takes the `contosoBooks.xml` file as an input."},{"pos":[4310,4332],"content":"Modifying Typed Values","linkify":"Modifying Typed Values","nodes":[{"content":"Modifying Typed Values","pos":[0,22]}]},{"content":"When the type of a node is a W3C XML Schema simple type, the new value inserted by the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A&gt;</ph> method is checked against the facets of the simple type before the value is set.","pos":[4336,4559],"source":"When the type of a node is a W3C XML Schema simple type, the new value inserted by the <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> method is checked against the facets of the simple type before the value is set."},{"content":"If the new value is not valid according to the type of the node (for example, setting a value of <ph id=\"ph1\">`-1`</ph> on an element whose type is <ph id=\"ph2\">`xs:positiveInteger`</ph>), it results in an exception.","pos":[4560,4740],"source":" If the new value is not valid according to the type of the node (for example, setting a value of `-1` on an element whose type is `xs:positiveInteger`), it results in an exception."},{"content":"The following example attempts to change the value of the <ph id=\"ph1\">`price`</ph> element of the first <ph id=\"ph2\">`book`</ph> element in the <ph id=\"ph3\">`contosoBooks.xml`</ph> file to a <ph id=\"ph4\">&lt;xref:System.DateTime&gt;</ph> value.","pos":[4747,4914],"source":"The following example attempts to change the value of the `price` element of the first `book` element in the `contosoBooks.xml` file to a <xref:System.DateTime> value."},{"content":"Because the XML Schema type of the <ph id=\"ph1\">`price`</ph> element is defined as <ph id=\"ph2\">`xs:decimal`</ph> in the <ph id=\"ph3\">`contosoBooks.xsd`</ph> files, this results in an exception.","pos":[4915,5055],"source":" Because the XML Schema type of the `price` element is defined as `xs:decimal` in the `contosoBooks.xsd` files, this results in an exception."},{"pos":[6381,6439],"content":"The example takes the <ph id=\"ph1\">`contosoBooks.xml`</ph> file as an input.","source":"The example takes the `contosoBooks.xml` file as an input."},{"pos":[6575,6633],"content":"The example also takes the <ph id=\"ph1\">`contosoBooks.xsd`</ph> as an input.","source":"The example also takes the `contosoBooks.xsd` as an input."},{"pos":[6773,6819],"content":"The Effects of Editing Strongly Typed XML Data","linkify":"The Effects of Editing Strongly Typed XML Data","nodes":[{"content":"The Effects of Editing Strongly Typed XML Data","pos":[0,46]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class uses the W3C XML Schema as a basis for describing strongly-typed XML.","pos":[6823,6941],"source":"The <xref:System.Xml.XPath.XPathNavigator> class uses the W3C XML Schema as a basis for describing strongly-typed XML."},{"content":"Elements and attributes can be annotated with type information based on validation against a W3C XML Schema document.","pos":[6942,7059]},{"content":"Elements that can contain other elements or attributes are called complex types, while those that can only contain textual content are called simple types.","pos":[7060,7215]},{"pos":[7223,7272],"content":"[!NOTE]\n Attributes can only have simple types.","leadings":["","> "],"nodes":[{"content":"Attributes can only have simple types.","pos":[9,47]}]},{"content":"An element or attribute can be considered to be schema-valid if it conforms to all the rules specific to its type definition.","pos":[7279,7404]},{"content":"An element that has the simple type <ph id=\"ph1\">`xs:int`</ph> has to contain a numeric value between -2147483648 and 2147483647 to be schema-valid.","pos":[7405,7535],"source":" An element that has the simple type `xs:int` has to contain a numeric value between -2147483648 and 2147483647 to be schema-valid."},{"content":"For complex types, the schema-validity of the element is dependent on the schema-validity of its child elements and attributes.","pos":[7536,7663]},{"content":"Thus if an element is valid against its complex type definition, all its child elements and attributes are valid against their type definitions.","pos":[7664,7808]},{"content":"Similarly, if even one of the child elements or attributes of an element is invalid against its type definition, or has an unknown validity, the element is also either invalid or of unknown validity.","pos":[7809,8008]},{"content":"Given that the validity of an element is dependent on the validity of its child elements and attributes, modifications to either result in altering the validity of the element if it was previously valid.","pos":[8015,8218]},{"content":"Specifically, if the child elements or attributes of an element are inserted, updated, or deleted, then the validity of the element becomes unknown.","pos":[8219,8367]},{"content":"This is represented by the <ph id=\"ph1\">&lt;xref:System.Xml.Schema.IXmlSchemaInfo.Validity%2A&gt;</ph> property of the element's <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator.SchemaInfo%2A&gt;</ph> property being set to <ph id=\"ph3\">&lt;xref:System.Xml.Schema.XmlSchemaValidity.NotKnown&gt;</ph>.","pos":[8368,8600],"source":" This is represented by the <xref:System.Xml.Schema.IXmlSchemaInfo.Validity%2A> property of the element's <xref:System.Xml.XPath.XPathNavigator.SchemaInfo%2A> property being set to <xref:System.Xml.Schema.XmlSchemaValidity.NotKnown>."},{"content":"Furthermore, this effect cascades upwards recursively across the XML document, because the validity of the element's parent element (and its parent element, and so on) also becomes unknown.","pos":[8601,8790]},{"pos":[8797,9019],"content":"For more information about schema validation and the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class, see <bpt id=\"p1\">[</bpt>Schema Validation using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/schema-validation-using-xpathnavigator.md)</ept>.","source":"For more information about schema validation and the <xref:System.Xml.XPath.XPathNavigator> class, see [Schema Validation using XPathNavigator](../../../../docs/standard/data/xml/schema-validation-using-xpathnavigator.md)."},{"pos":[9029,9049],"content":"Modifying Attributes","linkify":"Modifying Attributes","nodes":[{"content":"Modifying Attributes","pos":[0,20]}]},{"pos":[9053,9304],"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.SetValue%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A&gt;</ph> methods can be used to modify untyped and typed attribute nodes as well as the other node types listed in the \"Modifying Nodes\" section.","source":"The <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> and <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> methods can be used to modify untyped and typed attribute nodes as well as the other node types listed in the \"Modifying Nodes\" section."},{"pos":[9311,9428],"content":"The following example changes the value of the <ph id=\"ph1\">`genre`</ph> attribute of the first <ph id=\"ph2\">`book`</ph> element in the <ph id=\"ph3\">`books.xml`</ph> file.","source":"The following example changes the value of the `genre` attribute of the first `book` element in the `books.xml` file."},{"pos":[10268,10492],"content":"For more information about the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.SetValue%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A&gt;</ph> methods, see the \"Modifying Untyped Values\" and \"Modifying Typed Values\" sections.","source":"For more information about the <xref:System.Xml.XPath.XPathNavigator.SetValue%2A> and <xref:System.Xml.XPath.XPathNavigator.SetTypedValue%2A> methods, see the \"Modifying Untyped Values\" and \"Modifying Typed Values\" sections."},{"pos":[10501,10533],"content":"InnerXml and OuterXml Properties","linkify":"InnerXml and OuterXml Properties","nodes":[{"content":"InnerXml and OuterXml Properties","pos":[0,32]}]},{"pos":[10537,10821],"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.InnerXml%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator.OuterXml%2A&gt;</ph> properties of the <ph id=\"ph3\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class change the XML markup of the nodes an <ph id=\"ph4\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object is currently positioned on.","source":"The <xref:System.Xml.XPath.XPathNavigator.InnerXml%2A> and <xref:System.Xml.XPath.XPathNavigator.OuterXml%2A> properties of the <xref:System.Xml.XPath.XPathNavigator> class change the XML markup of the nodes an <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.InnerXml%2A&gt;</ph> property changes the XML markup of the child nodes an <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object is currently positioned on with the parsed contents of the given XML <ph id=\"ph3\">`string`</ph>.","pos":[10828,11061],"source":"The <xref:System.Xml.XPath.XPathNavigator.InnerXml%2A> property changes the XML markup of the child nodes an <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on with the parsed contents of the given XML `string`."},{"content":"Similarly, the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.OuterXml%2A&gt;</ph> property changes the XML markup of the child nodes an <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object is currently positioned on as well as the current node itself.","pos":[11062,11290],"source":" Similarly, the <xref:System.Xml.XPath.XPathNavigator.OuterXml%2A> property changes the XML markup of the child nodes an <xref:System.Xml.XPath.XPathNavigator> object is currently positioned on as well as the current node itself."},{"pos":[11297,11528],"content":"The following example uses the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.OuterXml%2A&gt;</ph> property to modify the value of the <ph id=\"ph2\">`price`</ph> element and insert a new <ph id=\"ph3\">`discount`</ph> attribute on the first <ph id=\"ph4\">`book`</ph> element in the <ph id=\"ph5\">`contosoBooks.xml`</ph> file.","source":"The following example uses the <xref:System.Xml.XPath.XPathNavigator.OuterXml%2A> property to modify the value of the `price` element and insert a new `discount` attribute on the first `book` element in the `contosoBooks.xml` file."},{"pos":[12533,12591],"content":"The example takes the <ph id=\"ph1\">`contosoBooks.xml`</ph> file as an input.","source":"The example takes the `contosoBooks.xml` file as an input."},{"pos":[12729,12754],"content":"Modifying Namespace Nodes","linkify":"Modifying Namespace Nodes","nodes":[{"content":"Modifying Namespace Nodes","pos":[0,25]}]},{"content":"In the Document Object Model (DOM), namespace declarations are treated as if they are regular attributes that can be inserted, updated and deleted.","pos":[12758,12905]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class does not allow such operations on namespace nodes because altering the value of a namespace node can change the identity of the elements and attributes within the scope of the namespace node as illustrated in the following example.","pos":[12906,13186],"source":" The <xref:System.Xml.XPath.XPathNavigator> class does not allow such operations on namespace nodes because altering the value of a namespace node can change the identity of the elements and attributes within the scope of the namespace node as illustrated in the following example."},{"content":"If the XML example above is changed in the following way, this effectively renames every element in the document because the value of each element's namespace URI is changed.","pos":[13277,13451]},{"content":"Inserting namespace nodes that do not conflict with namespace declarations at the scope that they are inserted in is allowed by the <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class.","pos":[13535,13712],"source":"Inserting namespace nodes that do not conflict with namespace declarations at the scope that they are inserted in is allowed by the <xref:System.Xml.XPath.XPathNavigator> class."},{"content":"In this case, the namespace declarations are not declared at lower scopes in the XML document and does not result in renaming as illustrated in the following example.","pos":[13713,13879]},{"content":"If the XML example above is changed in the following way, the namespace declarations are correctly propagated across the XML document below the scope of the other namespace declaration.","pos":[14009,14194]},{"content":"In the XML example above, the attribute <ph id=\"ph1\">`a:parent-id`</ph> is inserted on the <ph id=\"ph2\">`parent`</ph> element in the <ph id=\"ph3\">`http://www.contoso.com/parent-id`</ph> namespace.","pos":[14418,14560],"source":"In the XML example above, the attribute `a:parent-id` is inserted on the `parent` element in the `http://www.contoso.com/parent-id` namespace."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator.CreateAttribute%2A&gt;</ph> method is used to insert the attribute while positioned on the <ph id=\"ph2\">`parent`</ph> element.","pos":[14561,14703],"source":" The <xref:System.Xml.XPath.XPathNavigator.CreateAttribute%2A> method is used to insert the attribute while positioned on the `parent` element."},{"content":"The <ph id=\"ph1\">`http://www.contoso.com`</ph> namespace declaration is automatically inserted by the <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> class to preserve the consistency of the rest of the XML document.","pos":[14704,14893],"source":" The `http://www.contoso.com` namespace declaration is automatically inserted by the <xref:System.Xml.XPath.XPathNavigator> class to preserve the consistency of the rest of the XML document."},{"pos":[14902,14934],"content":"Modifying Entity Reference Nodes","linkify":"Modifying Entity Reference Nodes","nodes":[{"content":"Modifying Entity Reference Nodes","pos":[0,32]}]},{"content":"Entity reference nodes in an <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object are read-only and cannot be edited using either the <ph id=\"ph2\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Xml.XmlNode&gt;</ph> classes.","pos":[14938,15132],"source":"Entity reference nodes in an <xref:System.Xml.XmlDocument> object are read-only and cannot be edited using either the <xref:System.Xml.XPath.XPathNavigator> or <xref:System.Xml.XmlNode> classes."},{"content":"Any attempt to modify an entity reference node results in an <ph id=\"ph1\">&lt;xref:System.InvalidOperationException&gt;</ph>.","pos":[15133,15234],"source":" Any attempt to modify an entity reference node results in an <xref:System.InvalidOperationException>."},{"pos":[15243,15266],"content":"Modifying xsi:nil Nodes","linkify":"Modifying xsi:nil Nodes","nodes":[{"content":"Modifying xsi:nil Nodes","pos":[0,23]}]},{"content":"The W3C XML Schema recommendation introduces the concept of an element being nillable.","pos":[15270,15356]},{"content":"When an element is nillable, it is possible for the element to have no content and still be valid.","pos":[15357,15455]},{"content":"The concept of an element being nillable is similar to the concept of an object being <ph id=\"ph1\">`null`</ph>.","pos":[15456,15549],"source":" The concept of an element being nillable is similar to the concept of an object being `null`."},{"content":"The main difference is that a <ph id=\"ph1\">`null`</ph> object cannot be accessed in any way, while an <ph id=\"ph2\">`xsi:nil`</ph> element still has properties such as attributes that can be accessed, but has no content (child elements or text).","pos":[15550,15758],"source":" The main difference is that a `null` object cannot be accessed in any way, while an `xsi:nil` element still has properties such as attributes that can be accessed, but has no content (child elements or text)."},{"content":"The existence of the <ph id=\"ph1\">`xsi:nil`</ph> attribute with a value of <ph id=\"ph2\">`true`</ph> on an element in an XML document is used to indicate that an element has no content.","pos":[15759,15907],"source":" The existence of the `xsi:nil` attribute with a value of `true` on an element in an XML document is used to indicate that an element has no content."},{"pos":[15914,16115],"content":"If an <ph id=\"ph1\">&lt;xref:System.Xml.XPath.XPathNavigator&gt;</ph> object is used to add content to a valid element with an <ph id=\"ph2\">`xsi:nil`</ph> attribute with a value of <ph id=\"ph3\">`true`</ph>, the value of its <ph id=\"ph4\">`xsi:nil`</ph> attribute is set to <ph id=\"ph5\">`false`</ph>.","source":"If an <xref:System.Xml.XPath.XPathNavigator> object is used to add content to a valid element with an `xsi:nil` attribute with a value of `true`, the value of its `xsi:nil` attribute is set to `false`."},{"pos":[16123,16270],"content":"[!NOTE]\n If the content of an element with an `xsi:nil` attribute set to `false` is deleted, the value of the attribute is not changed to `true`.","leadings":["","> "],"nodes":[{"content":"If the content of an element with an <ph id=\"ph1\">`xsi:nil`</ph> attribute set to <ph id=\"ph2\">`false`</ph> is deleted, the value of the attribute is not changed to <ph id=\"ph3\">`true`</ph>.","pos":[9,145],"source":"If the content of an element with an `xsi:nil` attribute set to `false` is deleted, the value of the attribute is not changed to `true`."}]},{"pos":[16279,16301],"content":"Saving an XML Document","linkify":"Saving an XML Document","nodes":[{"content":"Saving an XML Document","pos":[0,22]}]},{"content":"Saving changes made to an <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object as the result of the editing methods described in this topic is performed using the methods of the <ph id=\"ph2\">&lt;xref:System.Xml.XmlDocument&gt;</ph> class.","pos":[16305,16503],"source":"Saving changes made to an <xref:System.Xml.XmlDocument> object as the result of the editing methods described in this topic is performed using the methods of the <xref:System.Xml.XmlDocument> class."},{"content":"For more information about saving changes made to an <ph id=\"ph1\">&lt;xref:System.Xml.XmlDocument&gt;</ph> object, see <bpt id=\"p1\">[</bpt>Saving and Writing a Document<ept id=\"p1\">](../../../../docs/standard/data/xml/saving-and-writing-a-document.md)</ept>.","pos":[16504,16700],"source":" For more information about saving changes made to an <xref:System.Xml.XmlDocument> object, see [Saving and Writing a Document](../../../../docs/standard/data/xml/saving-and-writing-a-document.md)."},{"pos":[16709,16717],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[16834,16962],"content":"<bpt id=\"p1\">[</bpt>Process XML Data Using the XPath Data Model<ept id=\"p1\">](../../../../docs/standard/data/xml/process-xml-data-using-the-xpath-data-model.md)</ept>","source":"[Process XML Data Using the XPath Data Model](../../../../docs/standard/data/xml/process-xml-data-using-the-xpath-data-model.md)"},{"pos":[16965,17079],"content":"<bpt id=\"p1\">[</bpt>Insert XML Data using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/insert-xml-data-using-xpathnavigator.md)</ept>","source":"[Insert XML Data using XPathNavigator](../../../../docs/standard/data/xml/insert-xml-data-using-xpathnavigator.md)"},{"pos":[17082,17196],"content":"<bpt id=\"p1\">[</bpt>Remove XML Data using XPathNavigator<ept id=\"p1\">](../../../../docs/standard/data/xml/remove-xml-data-using-xpathnavigator.md)</ept>","source":"[Remove XML Data using XPathNavigator](../../../../docs/standard/data/xml/remove-xml-data-using-xpathnavigator.md)"}]}