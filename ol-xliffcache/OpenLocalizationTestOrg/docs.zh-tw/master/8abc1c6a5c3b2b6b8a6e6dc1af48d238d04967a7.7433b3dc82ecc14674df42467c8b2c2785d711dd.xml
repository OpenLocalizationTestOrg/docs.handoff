{"content":"---\ntitle: \"How to: Override Encoded SOAP XML Serialization | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"overriding XML serialization\"\n  - \"SOAP, overriding encoded XML serialization\"\nms.assetid: d0791df8-04e3-46b4-a6be-fe0ed09267e8\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Override Encoded SOAP XML Serialization\n[Code Example](#tskhowtooverrideencodedsoapxmlserializationanchor1)  \n  \n The process for overriding XML serialization of objects as SOAP messages is similar to the process for overriding standard XML serialization. For information about overriding standard XML serialization, see [How to: Specify an Alternate Element Name for an XML Stream](../../../docs/framework/serialization/how-to-specify-an-alternate-element-name-for-an-xml-stream.md).  \n  \n### To override serialization of objects as SOAP messages  \n  \n1.  Create an instance of the <xref:System.Xml.Serialization.SoapAttributeOverrides> class.  \n  \n2.  Create a `SoapAttributes` for each class member that is being serialized.  \n  \n3.  Create an instance of one or more of the attributes that affect XML serialization, as appropriate, to the member being serialized. For more information, see \"Attributes That Control Encoded SOAP Serialization\".  \n  \n4.  Set the appropriate property of `SoapAttributes` to the attribute created in step 3.  \n  \n5.  Add `SoapAttributes` to `SoapAttributeOverrides`.  \n  \n6.  Create an `XmlTypeMapping` using the `SoapAttributeOverrides`. Use the `SoapReflectionImporter.ImportTypeMapping` method.  \n  \n7.  Create an `XmlSerializer` using `XmlTypeMapping`.  \n  \n8.  Serialize or deserialize the object.  \n  \n## Example  \n The following code example serializes a file in two ways: first, without overriding the `XmlSerializer` class's behavior, and second, by overriding the behavior. The example contains a class named `Group` with several members. Various attributes, such as the `SoapElementAttribute`, have been applied to class members. When the class is serialized with the `SerializeOriginal` method, the attributes control the SOAP message content. When the `SerializeOverride` method is called, the behavior of the `XmlSerializer` is overridden by creating various attributes and setting the properties of a `SoapAttributes` to those attributes (as appropriate).  \n  \n```csharp  \nusing System;  \nusing System.IO;  \nusing System.Xml;  \nusing System.Xml.Serialization;  \nusing System.Xml.Schema;  \n  \npublic class Group  \n{  \n    [SoapAttribute (Namespace = \"http://www.cpandl.com\")]  \n    public string GroupName;  \n  \n    [SoapAttribute(DataType = \"base64Binary\")]  \n    public Byte [] GroupNumber;  \n  \n    [SoapAttribute(DataType = \"date\", AttributeName = \"CreationDate\")]  \n    public DateTime Today;  \n    [SoapElement(DataType = \"nonNegativeInteger\", ElementName = \"PosInt\")]  \n    public string PostitiveInt;  \n    // This is ignored when serialized unless it is overridden.  \n    [SoapIgnore]   \n    public bool IgnoreThis;  \n  \n    public GroupType Grouptype;  \n  \n    [SoapInclude(typeof(Car))]  \n    public Vehicle myCar(string licNumber)  \n    {  \n        Vehicle v;  \n        if(licNumber == \"\")  \n            {  \n                v = new Car();  \n            v.licenseNumber = \"!!!!!!\";  \n        }  \n        else  \n        {  \n            v = new Car();  \n            v.licenseNumber = licNumber;  \n        }  \n        return v;  \n    }  \n}  \n  \npublic abstract class Vehicle  \n{  \n    public string licenseNumber;  \n    public DateTime makeDate;  \n}  \n  \npublic class Car: Vehicle  \n{  \n}  \n  \npublic enum GroupType  \n{  \n    // These enums can be overridden.  \n    small,  \n    large  \n}  \n  \npublic class Run  \n{  \n    public static void Main()  \n    {  \n        Run test = new Run();  \n        test.SerializeOriginal(\"SoapOriginal.xml\");  \n        test.SerializeOverride(\"SoapOverrides.xml\");  \n        test.DeserializeOriginal(\"SoapOriginal.xml\");  \n        test.DeserializeOverride(\"SoapOverrides.xml\");  \n  \n    }  \n    public void SerializeOriginal(string filename)  \n    {  \n        // Creates an instance of the XmlSerializer class.  \n        XmlTypeMapping myMapping =   \n        (new SoapReflectionImporter().ImportTypeMapping(  \n        typeof(Group)));  \n        XmlSerializer mySerializer =    \n        new XmlSerializer(myMapping);  \n  \n        // Writing the file requires a TextWriter.  \n        TextWriter writer = new StreamWriter(filename);  \n  \n        // Creates an instance of the class that will be serialized.  \n        Group myGroup = new Group();  \n  \n        // Sets the object properties.  \n        myGroup.GroupName = \".NET\";  \n  \n        Byte [] hexByte = new Byte[2]{Convert.ToByte(100),  \n        Convert.ToByte(50)};  \n        myGroup.GroupNumber = hexByte;  \n  \n        DateTime myDate = new DateTime(2002,5,2);  \n        myGroup.Today = myDate;  \n  \n        myGroup.PostitiveInt= \"10000\";  \n        myGroup.IgnoreThis=true;  \n        myGroup.Grouptype= GroupType.small;  \n        Car thisCar =(Car)  myGroup.myCar(\"1234566\");  \n  \n        // Prints the license number just to prove the car was created.  \n        Console.WriteLine(\"License#: \" + thisCar.licenseNumber + \"\\n\");  \n  \n        // Serializes the class and closes the TextWriter.  \n        mySerializer.Serialize(writer, myGroup);  \n        writer.Close();  \n    }  \n  \n    public void SerializeOverride(string filename)  \n    {  \n        // Creates an instance of the XmlSerializer class  \n        // that overrides the serialization.  \n        XmlSerializer overRideSerializer = CreateOverrideSerializer();  \n  \n        // Writing the file requires a TextWriter.  \n        TextWriter writer = new StreamWriter(filename);  \n  \n        // Creates an instance of the class that will be serialized.  \n        Group myGroup = new Group();  \n  \n        // Sets the object properties.  \n        myGroup.GroupName = \".NET\";  \n  \n        Byte [] hexByte = new Byte[2]{Convert.ToByte(100),  \n        Convert.ToByte(50)};  \n        myGroup.GroupNumber = hexByte;  \n  \n        DateTime myDate = new DateTime(2002,5,2);  \n        myGroup.Today = myDate;  \n  \n        myGroup.PostitiveInt= \"10000\";  \n        myGroup.IgnoreThis=true;  \n        myGroup.Grouptype= GroupType.small;  \n        Car thisCar =(Car)  myGroup.myCar(\"1234566\");  \n  \n        // Serializes the class and closes the TextWriter.  \n        overRideSerializer.Serialize(writer, myGroup);  \n         writer.Close();  \n    }  \n  \n    public void DeserializeOriginal(string filename)  \n    {  \n        // Creates an instance of the XmlSerializer class.  \n        XmlTypeMapping myMapping =   \n        (new SoapReflectionImporter().ImportTypeMapping(  \n        typeof(Group)));  \n        XmlSerializer mySerializer =    \n        new XmlSerializer(myMapping);  \n  \n        TextReader reader = new StreamReader(filename);  \n  \n        // Deserializes and casts the object.  \n        Group myGroup;   \n        myGroup = (Group) mySerializer.Deserialize(reader);  \n  \n        Console.WriteLine(myGroup.GroupName);  \n        Console.WriteLine(myGroup.GroupNumber[0]);  \n        Console.WriteLine(myGroup.GroupNumber[1]);  \n        Console.WriteLine(myGroup.Today);  \n        Console.WriteLine(myGroup.PostitiveInt);  \n        Console.WriteLine(myGroup.IgnoreThis);  \n        Console.WriteLine();  \n    }  \n  \n    public void DeserializeOverride(string filename)  \n    {  \n        // Creates an instance of the XmlSerializer class.  \n        XmlSerializer overRideSerializer = CreateOverrideSerializer();  \n        // Reading the file requires a TextReader.  \n        TextReader reader = new StreamReader(filename);  \n  \n        // Deserializes and casts the object.  \n        Group myGroup;   \n        myGroup = (Group) overRideSerializer.Deserialize(reader);  \n  \n        Console.WriteLine(myGroup.GroupName);  \n        Console.WriteLine(myGroup.GroupNumber[0]);  \n        Console.WriteLine(myGroup.GroupNumber[1]);  \n        Console.WriteLine(myGroup.Today);  \n        Console.WriteLine(myGroup.PostitiveInt);  \n        Console.WriteLine(myGroup.IgnoreThis);  \n    }  \n  \n    private XmlSerializer CreateOverrideSerializer()  \n    {  \n        SoapAttributeOverrides mySoapAttributeOverrides =   \n        new SoapAttributeOverrides();  \n        SoapAttributes soapAtts = new SoapAttributes();  \n  \n        SoapElementAttribute mySoapElement = new SoapElementAttribute();  \n        mySoapElement.ElementName = \"xxxx\";  \n        soapAtts.SoapElement = mySoapElement;  \n        mySoapAttributeOverrides.Add(typeof(Group), \"PostitiveInt\",   \n        soapAtts);  \n  \n        // Overrides the IgnoreThis property.  \n        SoapIgnoreAttribute myIgnore = new SoapIgnoreAttribute();  \n        soapAtts = new SoapAttributes();  \n        soapAtts.SoapIgnore = false;        \n        mySoapAttributeOverrides.Add(typeof(Group), \"IgnoreThis\",   \n        soapAtts);  \n  \n        // Overrides the GroupType enumeration.  \n        soapAtts = new SoapAttributes();  \n        SoapEnumAttribute xSoapEnum = new SoapEnumAttribute();  \n        xSoapEnum.Name = \"Over1000\";  \n        soapAtts.SoapEnum = xSoapEnum;  \n  \n        // Adds the SoapAttributes to the   \n        // mySoapAttributeOverridesrides.  \n        mySoapAttributeOverrides.Add(typeof(GroupType), \"large\",   \n        soapAtts);  \n  \n        // Creates a second enumeration and adds it.  \n        soapAtts = new SoapAttributes();  \n        xSoapEnum = new SoapEnumAttribute();  \n        xSoapEnum.Name = \"ZeroTo1000\";  \n        soapAtts.SoapEnum = xSoapEnum;  \n        mySoapAttributeOverrides.Add(typeof(GroupType), \"small\",   \n        soapAtts);  \n  \n        // Overrides the Group type.  \n        soapAtts = new SoapAttributes();  \n        SoapTypeAttribute soapType = new SoapTypeAttribute();  \n        soapType.TypeName = \"Team\";  \n        soapAtts.SoapType = soapType;  \n        mySoapAttributeOverrides.Add(typeof(Group),soapAtts);  \n  \n        // Creates an XmlTypeMapping that is used to create an instance   \n        // of the XmlSerializer class. Then returns the XmlSerializer.  \n        XmlTypeMapping myMapping = (new SoapReflectionImporter(  \n        mySoapAttributeOverrides)).ImportTypeMapping(typeof(Group));  \n  \n        XmlSerializer ser = new XmlSerializer(myMapping);  \n        return ser;  \n    }  \n}  \n```  \n  \n## See Also  \n [XML and SOAP Serialization](../../../docs/framework/serialization/xml-and-soap-serialization.md)   \n [Attributes That Control Encoded SOAP Serialization](../../../docs/framework/serialization/attributes-that-control-encoded-soap-serialization.md)   \n [XML Serialization with XML Web Services](../../../docs/framework/serialization/xml-serialization-with-xml-web-services.md)   \n [How to: Serialize an Object](../../../docs/framework/serialization/how-to-serialize-an-object.md)   \n [How to: Deserialize an Object](../../../docs/framework/serialization/how-to-deserialize-an-object.md)   \n [How to: Serialize an Object as a SOAP-Encoded XML Stream](../../../docs/framework/serialization/how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md)","nodes":[{"pos":[4,497],"nodes":[{"content":"How to: Override Encoded SOAP XML Serialization | Microsoft Docs","nodes":[{"pos":[0,64],"content":"How to: Override Encoded SOAP XML Serialization | Microsoft Docs","nodes":[{"content":"How to: Override Encoded SOAP XML Serialization | Microsoft Docs","pos":[0,64]}]}],"pos":[6,73],"yaml":true}],"content":"title: \"How to: Override Encoded SOAP XML Serialization | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"overriding XML serialization\"\n  - \"SOAP, overriding encoded XML serialization\"\nms.assetid: d0791df8-04e3-46b4-a6be-fe0ed09267e8\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[504,551],"content":"How to: Override Encoded SOAP XML Serialization","linkify":"How to: Override Encoded SOAP XML Serialization","nodes":[{"content":"How to: Override Encoded SOAP XML Serialization","pos":[0,47]}]},{"pos":[552,619],"content":"<bpt id=\"p1\">[</bpt>Code Example<ept id=\"p1\">](#tskhowtooverrideencodedsoapxmlserializationanchor1)</ept>","source":"[Code Example](#tskhowtooverrideencodedsoapxmlserializationanchor1)"},{"content":"The process for overriding XML serialization of objects as SOAP messages is similar to the process for overriding standard XML serialization.","pos":[626,767]},{"content":"For information about overriding standard XML serialization, see <bpt id=\"p1\">[</bpt>How to: Specify an Alternate Element Name for an XML Stream<ept id=\"p1\">](../../../docs/framework/serialization/how-to-specify-an-alternate-element-name-for-an-xml-stream.md)</ept>.","pos":[768,996],"source":" For information about overriding standard XML serialization, see [How to: Specify an Alternate Element Name for an XML Stream](../../../docs/framework/serialization/how-to-specify-an-alternate-element-name-for-an-xml-stream.md)."},{"pos":[1006,1059],"content":"To override serialization of objects as SOAP messages","linkify":"To override serialization of objects as SOAP messages","nodes":[{"content":"To override serialization of objects as SOAP messages","pos":[0,53]}]},{"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.SoapAttributeOverrides&gt;</ph> class.","pos":[1069,1156],"source":"Create an instance of the <xref:System.Xml.Serialization.SoapAttributeOverrides> class."},{"pos":[1166,1239],"content":"Create a <ph id=\"ph1\">`SoapAttributes`</ph> for each class member that is being serialized.","source":"Create a `SoapAttributes` for each class member that is being serialized."},{"content":"Create an instance of one or more of the attributes that affect XML serialization, as appropriate, to the member being serialized.","pos":[1249,1379]},{"content":"For more information, see \"Attributes That Control Encoded SOAP Serialization\".","pos":[1380,1459]},{"pos":[1469,1553],"content":"Set the appropriate property of <ph id=\"ph1\">`SoapAttributes`</ph> to the attribute created in step 3.","source":"Set the appropriate property of `SoapAttributes` to the attribute created in step 3."},{"pos":[1563,1612],"content":"Add <ph id=\"ph1\">`SoapAttributes`</ph> to <ph id=\"ph2\">`SoapAttributeOverrides`</ph>.","source":"Add `SoapAttributes` to `SoapAttributeOverrides`."},{"content":"Create an <ph id=\"ph1\">`XmlTypeMapping`</ph> using the <ph id=\"ph2\">`SoapAttributeOverrides`</ph>.","pos":[1622,1684],"source":"Create an `XmlTypeMapping` using the `SoapAttributeOverrides`."},{"content":"Use the <ph id=\"ph1\">`SoapReflectionImporter.ImportTypeMapping`</ph> method.","pos":[1685,1743],"source":" Use the `SoapReflectionImporter.ImportTypeMapping` method."},{"pos":[1753,1802],"content":"Create an <ph id=\"ph1\">`XmlSerializer`</ph> using <ph id=\"ph2\">`XmlTypeMapping`</ph>.","source":"Create an `XmlSerializer` using `XmlTypeMapping`."},{"content":"Serialize or deserialize the object.","pos":[1812,1848]},{"pos":[1857,1864],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example serializes a file in two ways: first, without overriding the <ph id=\"ph1\">`XmlSerializer`</ph> class's behavior, and second, by overriding the behavior.","pos":[1868,2029],"source":"The following code example serializes a file in two ways: first, without overriding the `XmlSerializer` class's behavior, and second, by overriding the behavior."},{"content":"The example contains a class named <ph id=\"ph1\">`Group`</ph> with several members.","pos":[2030,2094],"source":" The example contains a class named `Group` with several members."},{"content":"Various attributes, such as the <ph id=\"ph1\">`SoapElementAttribute`</ph>, have been applied to class members.","pos":[2095,2186],"source":" Various attributes, such as the `SoapElementAttribute`, have been applied to class members."},{"content":"When the class is serialized with the <ph id=\"ph1\">`SerializeOriginal`</ph> method, the attributes control the SOAP message content.","pos":[2187,2301],"source":" When the class is serialized with the `SerializeOriginal` method, the attributes control the SOAP message content."},{"content":"When the <ph id=\"ph1\">`SerializeOverride`</ph> method is called, the behavior of the <ph id=\"ph2\">`XmlSerializer`</ph> is overridden by creating various attributes and setting the properties of a <ph id=\"ph3\">`SoapAttributes`</ph> to those attributes (as appropriate).","pos":[2302,2516],"source":" When the `SerializeOverride` method is called, the behavior of the `XmlSerializer` is overridden by creating various attributes and setting the properties of a `SoapAttributes` to those attributes (as appropriate)."},{"pos":[10499,10507],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>XML and SOAP Serialization<ept id=\"p1\">](../../../docs/framework/serialization/xml-and-soap-serialization.md)</ept><ph id=\"ph1\"> </ph>","pos":[10511,10609],"source":"[XML and SOAP Serialization](../../../docs/framework/serialization/xml-and-soap-serialization.md) "},{"content":"<bpt id=\"p1\">[</bpt>Attributes That Control Encoded SOAP Serialization<ept id=\"p1\">](../../../docs/framework/serialization/attributes-that-control-encoded-soap-serialization.md)</ept><ph id=\"ph1\"> </ph>","pos":[10613,10759],"source":"[Attributes That Control Encoded SOAP Serialization](../../../docs/framework/serialization/attributes-that-control-encoded-soap-serialization.md) "},{"content":"<bpt id=\"p1\">[</bpt>XML Serialization with XML Web Services<ept id=\"p1\">](../../../docs/framework/serialization/xml-serialization-with-xml-web-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[10763,10887],"source":"[XML Serialization with XML Web Services](../../../docs/framework/serialization/xml-serialization-with-xml-web-services.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Serialize an Object<ept id=\"p1\">](../../../docs/framework/serialization/how-to-serialize-an-object.md)</ept><ph id=\"ph1\"> </ph>","pos":[10891,10990],"source":"[How to: Serialize an Object](../../../docs/framework/serialization/how-to-serialize-an-object.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Deserialize an Object<ept id=\"p1\">](../../../docs/framework/serialization/how-to-deserialize-an-object.md)</ept><ph id=\"ph1\"> </ph>","pos":[10994,11097],"source":"[How to: Deserialize an Object](../../../docs/framework/serialization/how-to-deserialize-an-object.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Serialize an Object as a SOAP-Encoded XML Stream<ept id=\"p1\">](../../../docs/framework/serialization/how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md)</ept>","pos":[11101,11257],"source":"[How to: Serialize an Object as a SOAP-Encoded XML Stream](../../../docs/framework/serialization/how-to-serialize-an-object-as-a-soap-encoded-xml-stream.md)"}]}