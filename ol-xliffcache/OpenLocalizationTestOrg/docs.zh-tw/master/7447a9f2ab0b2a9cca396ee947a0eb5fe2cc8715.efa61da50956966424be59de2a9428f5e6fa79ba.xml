{"content":"---\ntitle: \"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords:\n  - \"WCF Data Services, LINQ to SQL\"\n  - \"WCF Data Services, providers\"\nms.assetid: 3b01c2fd-8c6e-4bf5-b38f-9e61bdc3c328\n---\n# How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)\n\nWCF Data Services exposes entity data as a data service. The reflection provider enables you to define a data model that is based on any class that exposes members that return an <xref:System.Linq.IQueryable%601> implementation. To be able to make updates to data in the data source, these classes must also implement the <xref:System.Data.Services.IUpdatable> interface. For more information, see [Data Services Providers](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md). This topic shows you how to create LINQ to SQL classes that access the Northwind sample database by using the reflection provider, as well as how to create the data service that is based on these data classes.\n\n## To add LINQ to SQL classes to a project\n\n1. From within a Visual Basic or C# application, on the **Project** menu, click **Add** > **New Item**.\n\n2. Click the **LINQ to SQL Classes** template.\n\n3. Change the name to **Northwind.dbml**.\n\n4. Click **Add**.\n\n     The Northwind.dbml file is added to the project and the Object Relational Designer (O/R Designer) opens.\n\n5. In **Server**/**Database Explorer**, under Northwind, expand **Tables** and drag the `Customers` table onto the Object Relational Designer (O/R Designer).\n\n     A `Customer` entity class is created and appears on the design surface.\n\n6. Repeat step 6 for the `Orders`, `Order_Details`, and `Products` tables.\n\n7. Right-click the new .dbml file that represents the LINQ to SQL classes and click **View Code**.\n\n     This creates a new code-behind page named Northwind.cs that contains a partial class definition for the class that inherits from the <xref:System.Data.Linq.DataContext> class, which in this case is `NorthwindDataContext`.\n\n8. Replace the contents of the Northwind.cs code file with the following code. This code implements the reflection provider by extending the <xref:System.Data.Linq.DataContext> and data classes generated by LINQ to SQL:\n\n     [!code-csharp[Astoria Linq Provider#Linq2SqlProvider](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria linq provider/cs/northwind.cs#linq2sqlprovider)]\n     [!code-vb[Astoria Linq Provider#Linq2SqlProvider](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria linq provider/vb/northwind.vb#linq2sqlprovider)]\n\n### To create a data service by using a LINQ to SQL-based data model\n\n1. In **Solution Explorer**, right-click the name of your ASP.NET project, and then click **Add** > **New Item**.\n\n2. In the **Add New Item** dialog box, select the **WCF Data Service** template from the **Web** category.\n\n   ![WCF Data Service item template in Visual Studio 2015](media/wcf-data-service-item-template.png)\n\n   > [!NOTE]\n   > The **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017.\n\n3. Supply a name for the service, and then click **OK**.\n\n     Visual Studio creates the XML markup and code files for the new service. By default, the code-editor window opens.\n\n4. In the code for the data service, replace the comment `/* TODO: put your data source class name here */` in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is `NorthwindDataContext`.\n\n5. In the code for the data service, replace the placeholder code in the `InitializeService` function with the following:\n\n     [!code-csharp[Astoria Linq Provider#EnableAccess](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria linq provider/cs/northwind.svc.cs#enableaccess)]\n     [!code-vb[Astoria Linq Provider#EnableAccess](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria linq provider/vb/northwind.svc.vb#enableaccess)]\n\n     This enables authorized clients to access resources for the three specified entity sets.\n\n6. To test the Northwind.svc data service by using a Web browser, follow the instructions in the topic [Accessing the Service from a Web Browser](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).\n\n## See also\n\n- [How to: Create a Data Service Using an ADO.NET Entity Framework Data Source](../../../../docs/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf.md)\n- [How to: Create a Data Service Using the Reflection Provider](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md)\n- [Data Services Providers](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)","nodes":[{"pos":[4,291],"embed":true,"restype":"x-metadata","content":"title: \"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords:\n  - \"WCF Data Services, LINQ to SQL\"\n  - \"WCF Data Services, providers\"\nms.assetid: 3b01c2fd-8c6e-4bf5-b38f-9e61bdc3c328","nodes":[{"content":"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)","nodes":[{"pos":[0,81],"content":"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)","nodes":[{"content":"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)","pos":[0,81]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[298,379],"content":"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)","linkify":"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)","nodes":[{"content":"How to: Create a Data Service Using a LINQ to SQL Data Source (WCF Data Services)","pos":[0,81]}]},{"content":"WCF Data Services exposes entity data as a data service.","pos":[381,437]},{"content":"The reflection provider enables you to define a data model that is based on any class that exposes members that return an <ph id=\"ph1\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> implementation.","pos":[438,609],"source":" The reflection provider enables you to define a data model that is based on any class that exposes members that return an <xref:System.Linq.IQueryable%601> implementation."},{"content":"To be able to make updates to data in the data source, these classes must also implement the <ph id=\"ph1\">&lt;xref:System.Data.Services.IUpdatable&gt;</ph> interface.","pos":[610,752],"source":" To be able to make updates to data in the data source, these classes must also implement the <xref:System.Data.Services.IUpdatable> interface."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Data Services Providers<ept id=\"p1\">](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)</ept>.","pos":[753,887],"source":" For more information, see [Data Services Providers](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)."},{"content":"This topic shows you how to create LINQ to SQL classes that access the Northwind sample database by using the reflection provider, as well as how to create the data service that is based on these data classes.","pos":[888,1097]},{"pos":[1102,1141],"content":"To add LINQ to SQL classes to a project","linkify":"To add LINQ to SQL classes to a project","nodes":[{"content":"To add LINQ to SQL classes to a project","pos":[0,39]}]},{"pos":[1146,1246],"content":"From within a Visual Basic or C# application, on the <bpt id=\"p1\">**</bpt>Project<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"From within a Visual Basic or C# application, on the **Project** menu, click **Add** > **New Item**."},{"pos":[1251,1294],"content":"Click the <bpt id=\"p1\">**</bpt>LINQ to SQL Classes<ept id=\"p1\">**</ept> template.","source":"Click the **LINQ to SQL Classes** template."},{"pos":[1299,1337],"content":"Change the name to <bpt id=\"p1\">**</bpt>Northwind.dbml<ept id=\"p1\">**</ept>.","source":"Change the name to **Northwind.dbml**."},{"pos":[1342,1356],"content":"Click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.","source":"Click **Add**."},{"content":"The Northwind.dbml file is added to the project and the Object Relational Designer (O/R Designer) opens.","pos":[1363,1467]},{"pos":[1472,1626],"content":"In <bpt id=\"p1\">**</bpt>Server<ept id=\"p1\">**</ept><ph id=\"ph1\">/</ph><bpt id=\"p2\">**</bpt>Database Explorer<ept id=\"p2\">**</ept>, under Northwind, expand <bpt id=\"p3\">**</bpt>Tables<ept id=\"p3\">**</ept> and drag the <ph id=\"ph2\">`Customers`</ph> table onto the Object Relational Designer (O/R Designer).","source":"In **Server**/**Database Explorer**, under Northwind, expand **Tables** and drag the `Customers` table onto the Object Relational Designer (O/R Designer)."},{"pos":[1633,1704],"content":"A <ph id=\"ph1\">`Customer`</ph> entity class is created and appears on the design surface.","source":"A `Customer` entity class is created and appears on the design surface."},{"pos":[1709,1780],"content":"Repeat step 6 for the <ph id=\"ph1\">`Orders`</ph>, <ph id=\"ph2\">`Order_Details`</ph>, and <ph id=\"ph3\">`Products`</ph> tables.","source":"Repeat step 6 for the `Orders`, `Order_Details`, and `Products` tables."},{"pos":[1785,1880],"content":"Right-click the new .dbml file that represents the LINQ to SQL classes and click <bpt id=\"p1\">**</bpt>View Code<ept id=\"p1\">**</ept>.","source":"Right-click the new .dbml file that represents the LINQ to SQL classes and click **View Code**."},{"pos":[1887,2108],"content":"This creates a new code-behind page named Northwind.cs that contains a partial class definition for the class that inherits from the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> class, which in this case is <ph id=\"ph2\">`NorthwindDataContext`</ph>.","source":"This creates a new code-behind page named Northwind.cs that contains a partial class definition for the class that inherits from the <xref:System.Data.Linq.DataContext> class, which in this case is `NorthwindDataContext`."},{"content":"Replace the contents of the Northwind.cs code file with the following code.","pos":[2113,2188]},{"content":"This code implements the reflection provider by extending the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> and data classes generated by LINQ to SQL:","pos":[2189,2329],"source":" This code implements the reflection provider by extending the <xref:System.Data.Linq.DataContext> and data classes generated by LINQ to SQL:"},{"pos":[2336,2669],"content":"[!code-csharp[Astoria Linq Provider#Linq2SqlProvider](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria linq provider/cs/northwind.cs#linq2sqlprovider)]\n  [!code-vb[Astoria Linq Provider#Linq2SqlProvider](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria linq provider/vb/northwind.vb#linq2sqlprovider)]","leadings":["","   "],"nodes":[]},{"pos":[2675,2739],"content":"To create a data service by using a LINQ to SQL-based data model","linkify":"To create a data service by using a LINQ to SQL-based data model","nodes":[{"content":"To create a data service by using a LINQ to SQL-based data model","pos":[0,64]}]},{"pos":[2744,2854],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the name of your ASP.NET project, and then click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"In **Solution Explorer**, right-click the name of your ASP.NET project, and then click **Add** > **New Item**."},{"pos":[2859,2962],"content":"In the <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>WCF Data Service<ept id=\"p2\">**</ept> template from the <bpt id=\"p3\">**</bpt>Web<ept id=\"p3\">**</ept> category.","source":"In the **Add New Item** dialog box, select the **WCF Data Service** template from the **Web** category."},{"content":"WCF Data Service item template in Visual Studio 2015","pos":[2969,3021]},{"pos":[3071,3184],"content":"[!NOTE]\nThe **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017.","leadings":["","   > "],"nodes":[{"content":"The <bpt id=\"p1\">**</bpt>WCF Data Service<ept id=\"p1\">**</ept> template is available in Visual Studio 2015, but not in Visual Studio 2017.","pos":[8,108],"source":"The **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017."}]},{"pos":[3189,3242],"content":"Supply a name for the service, and then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Supply a name for the service, and then click **OK**."},{"content":"Visual Studio creates the XML markup and code files for the new service.","pos":[3249,3321]},{"content":"By default, the code-editor window opens.","pos":[3322,3363]},{"pos":[3368,3641],"content":"In the code for the data service, replace the comment <ph id=\"ph1\">`/* TODO: put your data source class name here */`</ph> in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is <ph id=\"ph2\">`NorthwindDataContext`</ph>.","source":"In the code for the data service, replace the comment `/* TODO: put your data source class name here */` in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is `NorthwindDataContext`."},{"pos":[3646,3764],"content":"In the code for the data service, replace the placeholder code in the <ph id=\"ph1\">`InitializeService`</ph> function with the following:","source":"In the code for the data service, replace the placeholder code in the `InitializeService` function with the following:"},{"pos":[3771,4096],"content":"[!code-csharp[Astoria Linq Provider#EnableAccess](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria linq provider/cs/northwind.svc.cs#enableaccess)]\n  [!code-vb[Astoria Linq Provider#EnableAccess](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria linq provider/vb/northwind.svc.vb#enableaccess)]","leadings":["","   "],"nodes":[]},{"content":"This enables authorized clients to access resources for the three specified entity sets.","pos":[4103,4191]},{"pos":[4196,4449],"content":"To test the Northwind.svc data service by using a Web browser, follow the instructions in the topic <bpt id=\"p1\">[</bpt>Accessing the Service from a Web Browser<ept id=\"p1\">](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)</ept>.","source":"To test the Northwind.svc data service by using a Web browser, follow the instructions in the topic [Accessing the Service from a Web Browser](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)."},{"pos":[4454,4462],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4466,4633],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Data Service Using an ADO.NET Entity Framework Data Source<ept id=\"p1\">](../../../../docs/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf.md)</ept>","source":"[How to: Create a Data Service Using an ADO.NET Entity Framework Data Source](../../../../docs/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf.md)"},{"pos":[4636,4786],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Data Service Using the Reflection Provider<ept id=\"p1\">](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md)</ept>","source":"[How to: Create a Data Service Using the Reflection Provider](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md)"},{"pos":[4789,4896],"content":"<bpt id=\"p1\">[</bpt>Data Services Providers<ept id=\"p1\">](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)</ept>","source":"[Data Services Providers](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)"}]}