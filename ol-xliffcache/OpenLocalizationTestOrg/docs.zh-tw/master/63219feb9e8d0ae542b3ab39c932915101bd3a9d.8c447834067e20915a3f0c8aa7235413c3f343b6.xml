{"content":"---\ntitle: \"Session\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Sessions\"\nms.assetid: 36e1db50-008c-4b32-8d09-b56e790b8417\n---\n# Session\nThe Session sample demonstrates how to implement a contract that requires a session. A session provides context for performing multiple operations. This allows a service to associate state with a given session, such that subsequent operations can use the state of a previous operation. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which implements a calculator service. The `ICalculator` contract has been modified to allow a set of arithmetic operations to be performed, while keeping a running result. This functionality is defined by the `ICalculatorSession` contract. The service maintains the state for a client as multiple service operations are called to perform a calculation. The client can retrieve the current result by calling `Result()` and clear the result to zero by calling `Clear()`.  \n  \n In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n Setting the <xref:System.ServiceModel.SessionMode> of the contract to `Required` ensures that when the contract is exposed over a particular binding, the binding supports sessions. If the binding does not support sessions an exception is thrown. The `ICalculatorSession` interface is defined such that one or more operations can be called, which modifies a running result, as shown in the following sample code.  \n  \n```csharp\n[ServiceContract(Namespace=\"http://Microsoft.ServiceModel.Samples\", SessionMode=SessionMode.Required)]  \npublic interface ICalculatorSession  \n{  \n    [OperationContract(IsOneWay=true)]  \n    void Clear();  \n    [OperationContract(IsOneWay = true)]  \n    void AddTo(double n);  \n    [OperationContract(IsOneWay = true)]  \n    void SubtractFrom(double n);  \n    [OperationContract(IsOneWay = true)]  \n    void MultiplyBy(double n);  \n    [OperationContract(IsOneWay = true)]  \n    void DivideBy(double n);  \n    [OperationContract]  \n    double Result();  \n}  \n```  \n  \n The service uses a <xref:System.ServiceModel.InstanceContextMode> of <xref:System.ServiceModel.InstanceContextMode.PerSession> to bind a given service instance context to each incoming session. This allows the service to maintain the running result for each session in a local member variable.  \n  \n```csharp\n[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]  \npublic class CalculatorService : ICalculatorSession  \n{  \n    double result = 0.0D;  \n  \n    public void Clear()  \n    {  result = 0.0D; }  \n  \n    public void AddTo(double n)  \n    {  result += n;   }  \n  \n    public void SubtractFrom(double n)  \n    {  result -= n;   }  \n  \n    public void MultiplyBy(double n)  \n    {  result *= n;   }  \n  \n    public void DivideBy(double n)  \n    {  result /= n;   }  \n  \n    public double Result()  \n    {  return result; }  \n}  \n```  \n  \n When you run the sample, the client makes several requests to the server and requests the result, which it then displays in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```console  \n(((0 + 100) - 50) * 17.65) / 2 = 441.25  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Contract\\Service\\Session`  \n","nodes":[{"pos":[4,128],"embed":true,"restype":"x-metadata","content":"title: \"Session\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Sessions\"\nms.assetid: 36e1db50-008c-4b32-8d09-b56e790b8417","nodes":[{"content":"Session","nodes":[{"pos":[0,7],"content":"Session","nodes":[{"content":"Session","pos":[0,7]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[135,142],"content":"Session","linkify":"Session","nodes":[{"content":"Session","pos":[0,7]}]},{"content":"The Session sample demonstrates how to implement a contract that requires a session.","pos":[143,227]},{"content":"A session provides context for performing multiple operations.","pos":[228,290]},{"content":"This allows a service to associate state with a given session, such that subsequent operations can use the state of a previous operation.","pos":[291,428]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>, which implements a calculator service.","pos":[429,580],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which implements a calculator service."},{"content":"The <ph id=\"ph1\">`ICalculator`</ph> contract has been modified to allow a set of arithmetic operations to be performed, while keeping a running result.","pos":[581,714],"source":" The `ICalculator` contract has been modified to allow a set of arithmetic operations to be performed, while keeping a running result."},{"content":"This functionality is defined by the <ph id=\"ph1\">`ICalculatorSession`</ph> contract.","pos":[715,782],"source":" This functionality is defined by the `ICalculatorSession` contract."},{"content":"The service maintains the state for a client as multiple service operations are called to perform a calculation.","pos":[783,895]},{"content":"The client can retrieve the current result by calling <ph id=\"ph1\">`Result()`</ph> and clear the result to zero by calling <ph id=\"ph2\">`Clear()`</ph>.","pos":[896,1011],"source":" The client can retrieve the current result by calling `Result()` and clear the result to zero by calling `Clear()`."},{"content":"In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).","pos":[1018,1142]},{"pos":[1150,1257],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"Setting the <ph id=\"ph1\">&lt;xref:System.ServiceModel.SessionMode&gt;</ph> of the contract to <ph id=\"ph2\">`Required`</ph> ensures that when the contract is exposed over a particular binding, the binding supports sessions.","pos":[1264,1444],"source":"Setting the <xref:System.ServiceModel.SessionMode> of the contract to `Required` ensures that when the contract is exposed over a particular binding, the binding supports sessions."},{"content":"If the binding does not support sessions an exception is thrown.","pos":[1445,1509]},{"content":"The <ph id=\"ph1\">`ICalculatorSession`</ph> interface is defined such that one or more operations can be called, which modifies a running result, as shown in the following sample code.","pos":[1510,1675],"source":" The `ICalculatorSession` interface is defined such that one or more operations can be called, which modifies a running result, as shown in the following sample code."},{"content":"The service uses a <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.ServiceModel.InstanceContextMode.PerSession&gt;</ph> to bind a given service instance context to each incoming session.","pos":[2261,2454],"source":"The service uses a <xref:System.ServiceModel.InstanceContextMode> of <xref:System.ServiceModel.InstanceContextMode.PerSession> to bind a given service instance context to each incoming session."},{"content":"This allows the service to maintain the running result for each session in a local member variable.","pos":[2455,2554]},{"content":"When you run the sample, the client makes several requests to the server and requests the result, which it then displays in the client console window.","pos":[3122,3272]},{"content":"Press ENTER in the client window to shut down the client.","pos":[3273,3330]},{"pos":[3441,3477],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3487,3686],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3696,3905],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3915,4123],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[4131,4263],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[4317,4627],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4628,4678]}]}