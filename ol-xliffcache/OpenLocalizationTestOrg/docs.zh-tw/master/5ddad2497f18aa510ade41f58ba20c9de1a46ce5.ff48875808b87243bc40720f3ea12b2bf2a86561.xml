{"content":"---\ntitle: \"ICorProfilerInfo4::RequestReJIT Method\"\nms.date: \"03/30/2017\"\napi_name: \n  - \"ICorProfilerInfo4.RequestReJIT\"\napi_location: \n  - \"mscorwks.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICorProfilerInfo4::RequestReJIT\"\nhelpviewer_keywords: \n  - \"RequestReJIT method, ICorProfilerInfo4 interface [.NET Framework profiling]\"\n  - \"ICorProfilerInfo4::RequestReJIT method [.NET Framework profiling]\"\nms.assetid: 781ed736-f30c-4816-920e-3552e36542c6\ntopic_type: \n  - \"apiref\"\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# ICorProfilerInfo4::RequestReJIT Method\nRequests a JIT recompilation of all instances of the specified functions.  \n  \n## Syntax  \n  \n```  \nHRESULT RequestReJIT (  \n   [in] ULONG    cFunctions,  \n   [in, size_is(cFunctions)]  ModuleID    moduleIds[],  \n   [in, size_is(cFunctions)]  mdMethodDef methodIds[]);  \n```  \n  \n## Parameters  \n `cFunctions`  \n [in] The number of functions to recompile.  \n  \n `moduleIds`  \n [in] Specifies the `moduleId` portion of the (`module`, `methodDef`) pairs that identify the functions to be recompiled.  \n  \n `methodIds`  \n [in] Specifies the `methodId` portion of the (`module`, `methodDef`) pairs that identify the functions to be recompiled.  \n  \n## Return Value  \n This method returns the following specific HRESULTs as well as HRESULT errors that indicate method failure.  \n  \n|HRESULT|Description|  \n|-------------|-----------------|  \n|S_OK|An attempt was made to mark all the methods for JIT recompilation. The profiler must implement the [ICorProfilerCallback4::ReJITError](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-rejiterror-method.md) method to determine which methods were successfully marked for JIT recompilation.|  \n|CORPROF_E_CALLBACK4_REQUIRED|The profiler must implement the [ICorProfilerCallback4](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md) interface for this call to be supported.|  \n|CORPROF_E_REJIT_NOT_ENABLED|JIT recompilation has not been enabled. You must enable JIT recompilation during initialization by using the [ICorProfilerInfo::SetEventMask](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md) method to set the `COR_PRF_ENABLE_REJIT` flag.|  \n|E_INVALIDARG|`cFunctions` is 0, or `moduleIds` or `methodIds` is `NULL`.|  \n|||  \n|E_OUTOFMEMORY|The CLR was unable to complete the request because it ran out of memory.|  \n  \n## Remarks  \n Call `RequestReJIT` to have the runtime recompile a specified set of functions. A code profiler can then use the [ICorProfilerFunctionControl](../../../../docs/framework/unmanaged-api/profiling/icorprofilerfunctioncontrol-interface.md) interface to adjust the code that is generated when the functions are recompiled. This does not affect currently executing functions, only future function invocations. If any of the specified functions has previously been JIT-recompiled, requesting a recompilation is equivalent to reverting and recompiling the function. To preserve reversibility, when the JIT compiler compiles the original version of a function, it considers only the original versions of its callees for inlining decisions. When the JIT compiler recompiles a function, it considers the current versions (recompiled or original) of its callees for inlining.  \n  \n A profiler typically calls `RequestReJIT` in response to user input requesting that the profiler instrument one or more methods. `RequestReJIT` typically suspends the runtime in order to do some of its work, and can potentially trigger a garbage collection. As such, the profiler should call `RequestReJIT` from a thread it previously created, and not from a CLR-created thread that is currently executing a profiler callback.  \n  \n## Requirements  \n **Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md).  \n  \n **Header:** CorProf.idl, CorProf.h  \n  \n **Library:** CorGuids.lib  \n  \n **.NET Framework Versions:** [!INCLUDE[net_current_v45plus](../../../../includes/net-current-v45plus-md.md)]  \n  \n## See also\n\n- [ICorProfilerInfo4 Interface](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo4-interface.md)\n- [Profiling Interfaces](../../../../docs/framework/unmanaged-api/profiling/profiling-interfaces.md)\n- [Profiling](../../../../docs/framework/unmanaged-api/profiling/index.md)\n","nodes":[{"pos":[4,516],"embed":true,"restype":"x-metadata","content":"title: \"ICorProfilerInfo4::RequestReJIT Method\"\nms.date: \"03/30/2017\"\napi_name: \n  - \"ICorProfilerInfo4.RequestReJIT\"\napi_location: \n  - \"mscorwks.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICorProfilerInfo4::RequestReJIT\"\nhelpviewer_keywords: \n  - \"RequestReJIT method, ICorProfilerInfo4 interface [.NET Framework profiling]\"\n  - \"ICorProfilerInfo4::RequestReJIT method [.NET Framework profiling]\"\nms.assetid: 781ed736-f30c-4816-920e-3552e36542c6\ntopic_type: \n  - \"apiref\"\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"ICorProfilerInfo4::RequestReJIT Method","nodes":[{"pos":[0,38],"content":"ICorProfilerInfo4::RequestReJIT Method","nodes":[{"content":"ICorProfilerInfo4::RequestReJIT Method","pos":[0,38]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[523,561],"content":"ICorProfilerInfo4::RequestReJIT Method","linkify":"ICorProfilerInfo4::RequestReJIT Method","nodes":[{"content":"ICorProfilerInfo4::RequestReJIT Method","pos":[0,38]}]},{"content":"Requests a JIT recompilation of all instances of the specified functions.","pos":[562,635]},{"pos":[644,650],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[845,855],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] The number of functions to recompile.","pos":[875,917]},{"content":"[in] Specifies the <ph id=\"ph1\">`moduleId`</ph> portion of the (<ph id=\"ph2\">`module`</ph>, <ph id=\"ph3\">`methodDef`</ph>) pairs that identify the functions to be recompiled.","pos":[939,1059],"source":"[in] Specifies the `moduleId` portion of the (`module`, `methodDef`) pairs that identify the functions to be recompiled."},{"content":"[in] Specifies the <ph id=\"ph1\">`methodId`</ph> portion of the (<ph id=\"ph2\">`module`</ph>, <ph id=\"ph3\">`methodDef`</ph>) pairs that identify the functions to be recompiled.","pos":[1081,1201],"source":"[in] Specifies the `methodId` portion of the (`module`, `methodDef`) pairs that identify the functions to be recompiled."},{"pos":[1210,1222],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"This method returns the following specific HRESULTs as well as HRESULT errors that indicate method failure.","pos":[1226,1333]},{"content":"HRESULT","pos":[1340,1347]},{"content":"Description","pos":[1348,1359]},{"content":"S_OK","pos":[1400,1404]},{"content":"An attempt was made to mark all the methods for JIT recompilation.","pos":[1405,1471]},{"content":"The profiler must implement the <bpt id=\"p1\">[</bpt>ICorProfilerCallback4::ReJITError<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-rejiterror-method.md)</ept> method to determine which methods were successfully marked for JIT recompilation.","pos":[1472,1716],"source":" The profiler must implement the [ICorProfilerCallback4::ReJITError](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-rejiterror-method.md) method to determine which methods were successfully marked for JIT recompilation."},{"content":"CORPROF_E_CALLBACK4_REQUIRED","pos":[1721,1749]},{"pos":[1750,1933],"content":"The profiler must implement the <bpt id=\"p1\">[</bpt>ICorProfilerCallback4<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md)</ept> interface for this call to be supported.","source":"The profiler must implement the [ICorProfilerCallback4](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback4-interface.md) interface for this call to be supported."},{"content":"CORPROF_E_REJIT_NOT_ENABLED","pos":[1938,1965]},{"content":"JIT recompilation has not been enabled.","pos":[1966,2005]},{"content":"You must enable JIT recompilation during initialization by using the <bpt id=\"p1\">[</bpt>ICorProfilerInfo::SetEventMask<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md)</ept> method to set the <ph id=\"ph1\">`COR_PRF_ENABLE_REJIT`</ph> flag.","pos":[2006,2246],"source":" You must enable JIT recompilation during initialization by using the [ICorProfilerInfo::SetEventMask](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md) method to set the `COR_PRF_ENABLE_REJIT` flag."},{"content":"E_INVALIDARG","pos":[2251,2263]},{"pos":[2264,2323],"content":"<ph id=\"ph1\">`cFunctions`</ph> is 0, or <ph id=\"ph2\">`moduleIds`</ph> or <ph id=\"ph3\">`methodIds`</ph> is <ph id=\"ph4\">`NULL`</ph>.","source":"`cFunctions` is 0, or `moduleIds` or `methodIds` is `NULL`."},{"content":"E_OUTOFMEMORY","pos":[2334,2347]},{"content":"The CLR was unable to complete the request because it ran out of memory.","pos":[2348,2420]},{"pos":[2430,2437],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"Call <ph id=\"ph1\">`RequestReJIT`</ph> to have the runtime recompile a specified set of functions.","pos":[2441,2520],"source":"Call `RequestReJIT` to have the runtime recompile a specified set of functions."},{"content":"A code profiler can then use the <bpt id=\"p1\">[</bpt>ICorProfilerFunctionControl<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/icorprofilerfunctioncontrol-interface.md)</ept> interface to adjust the code that is generated when the functions are recompiled.","pos":[2521,2758],"source":" A code profiler can then use the [ICorProfilerFunctionControl](../../../../docs/framework/unmanaged-api/profiling/icorprofilerfunctioncontrol-interface.md) interface to adjust the code that is generated when the functions are recompiled."},{"content":"This does not affect currently executing functions, only future function invocations.","pos":[2759,2844]},{"content":"If any of the specified functions has previously been JIT-recompiled, requesting a recompilation is equivalent to reverting and recompiling the function.","pos":[2845,2998]},{"content":"To preserve reversibility, when the JIT compiler compiles the original version of a function, it considers only the original versions of its callees for inlining decisions.","pos":[2999,3171]},{"content":"When the JIT compiler recompiles a function, it considers the current versions (recompiled or original) of its callees for inlining.","pos":[3172,3304]},{"content":"A profiler typically calls <ph id=\"ph1\">`RequestReJIT`</ph> in response to user input requesting that the profiler instrument one or more methods.","pos":[3311,3439],"source":"A profiler typically calls `RequestReJIT` in response to user input requesting that the profiler instrument one or more methods."},{"content":"<ph id=\"ph1\">`RequestReJIT`</ph> typically suspends the runtime in order to do some of its work, and can potentially trigger a garbage collection.","pos":[3440,3568],"source":"`RequestReJIT` typically suspends the runtime in order to do some of its work, and can potentially trigger a garbage collection."},{"content":"As such, the profiler should call <ph id=\"ph1\">`RequestReJIT`</ph> from a thread it previously created, and not from a CLR-created thread that is currently executing a profiler callback.","pos":[3569,3737],"source":" As such, the profiler should call `RequestReJIT` from a thread it previously created, and not from a CLR-created thread that is currently executing a profiler callback."},{"pos":[3746,3758],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3762,3866],"content":"<bpt id=\"p1\">**</bpt>Platforms:<ept id=\"p1\">**</ept> See <bpt id=\"p2\">[</bpt>System Requirements<ept id=\"p2\">](../../../../docs/framework/get-started/system-requirements.md)</ept>.","source":"**Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md)."},{"pos":[3873,3907],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> CorProf.idl, CorProf.h","source":"**Header:** CorProf.idl, CorProf.h"},{"pos":[3914,3939],"content":"<bpt id=\"p1\">**</bpt>Library:<ept id=\"p1\">**</ept> CorGuids.lib","source":"**Library:** CorGuids.lib"},{"pos":[3946,4054],"content":"<bpt id=\"p1\">**</bpt>.NET Framework Versions:<ept id=\"p1\">**</ept> <ph id=\"ph1\">[!INCLUDE[net_current_v45plus](../../../../includes/net-current-v45plus-md.md)]</ph>","source":"**.NET Framework Versions:** [!INCLUDE[net_current_v45plus](../../../../includes/net-current-v45plus-md.md)]"},{"pos":[4063,4071],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4075,4187],"content":"<bpt id=\"p1\">[</bpt>ICorProfilerInfo4 Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo4-interface.md)</ept>","source":"[ICorProfilerInfo4 Interface](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo4-interface.md)"},{"pos":[4190,4288],"content":"<bpt id=\"p1\">[</bpt>Profiling Interfaces<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/profiling-interfaces.md)</ept>","source":"[Profiling Interfaces](../../../../docs/framework/unmanaged-api/profiling/profiling-interfaces.md)"},{"pos":[4291,4363],"content":"<bpt id=\"p1\">[</bpt>Profiling<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/profiling/index.md)</ept>","source":"[Profiling](../../../../docs/framework/unmanaged-api/profiling/index.md)"}]}