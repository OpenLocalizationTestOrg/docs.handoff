{"content":"---\ntitle: \"WorkflowApplication ReadLine Host | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: f7b362be-cb42-40d7-b9ef-cfc4aed2455b\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# WorkflowApplication ReadLine Host\nThis sample is a generic ReadLine host. You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings). Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window. When an instance is idle, the available bookmarks for that instance appear in a combo box. Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow. You can also cancel, abort, or terminate a selected workflow. Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database. Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level.  \n  \n## Sample Details  \n There are two layers to this host: the view and the instance manager. The view consists of the `HostView` and `WorkflowApplicationInfo` classes. The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent. The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes. The `HostView` calls control operations on the `WorkflowApplicationManager`. These calls are typically asynchronous to maintain a responsive user interface. When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`). The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread. Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class. The user interface is not the only thing generating events. The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example. The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host.  \n  \n The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class. It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition.  \n  \n The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects.  \n  \n#### To set up, build, and run the sample  \n  \n1.  This sample requires SQL Express to be installed. SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n2.  Open a Visual Studio 2010 command prompt.  \n  \n3.  Navigate to the sample directory (\\WF\\Basic\\Execution\\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.  \n  \n4.  The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express. If you want to install the database on a different instance, modify the script to do so.  \n  \n5.  Compile the WorkflowApplicationReadLineHost project and run it from the command line.  \n  \n6.  Once running, you can optionally turn persistence off or on. Further, you can optionally turn detailed activity tracking on or off.  \n  \n7.  Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file  \n  \n     Two samples can be found under the SampleWorkflows folder. The parallel1.xaml example goes idle.  \n  \n8.  Once an example is selected, press the **Run** button.  \n  \n9. If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks.  \n  \n10. The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow. You can also shut down the host and restart it. If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.  \n  \n     To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**.  \n  \n#### To remove the instance store database  \n  \n1.  Open a Visual Studio 2010 command prompt.  \n  \n2.  Navigate to the sample directory (\\WF\\Basic\\Execution\\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Execution\\ControllingWorkflowApplications`  \n  \n## See Also","nodes":[{"pos":[12,62],"content":"WorkflowApplication ReadLine Host | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"WorkflowApplication ReadLine Host | Microsoft Docs","pos":[0,50]}]},{"pos":[328,361],"content":"WorkflowApplication ReadLine Host","linkify":"WorkflowApplication ReadLine Host","nodes":[{"content":"WorkflowApplication ReadLine Host","pos":[0,33]}]},{"content":"This sample is a generic ReadLine host.","pos":[362,401]},{"content":"You can load and run any workflow using the included <ph id=\"ph1\">`ReadLine`</ph> activity (or other activities like it that get data from bookmarks resumed with strings).","pos":[402,555],"source":" You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings)."},{"content":"Output from the <ph id=\"ph1\">`WriteLine`</ph> activity or anything writing to the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.WriteLine.TextWriter%2A&gt;</ph> extension is directed to the host window.","pos":[556,721],"source":" Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window."},{"content":"When an instance is idle, the available bookmarks for that instance appear in a combo box.","pos":[722,812]},{"content":"Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow.","pos":[813,935]},{"content":"You can also cancel, abort, or terminate a selected workflow.","pos":[936,997]},{"content":"Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database.","pos":[998,1152]},{"content":"Tracking is used to output <ph id=\"ph1\">&lt;xref:System.Activities.WorkflowApplication&gt;</ph>-level events to the host with the option to add detailed tracking at the activity level.","pos":[1153,1313],"source":" Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level."},{"pos":[1322,1336],"content":"Sample Details","linkify":"Sample Details","nodes":[{"content":"Sample Details","pos":[0,14]}]},{"content":"There are two layers to this host: the view and the instance manager.","pos":[1340,1409]},{"content":"The view consists of the <ph id=\"ph1\">`HostView`</ph> and <ph id=\"ph2\">`WorkflowApplicationInfo`</ph> classes.","pos":[1410,1484],"source":" The view consists of the `HostView` and `WorkflowApplicationInfo` classes."},{"content":"The general pattern for this host is for the <ph id=\"ph1\">`HostView`</ph> class to display available options to the user based on <ph id=\"ph2\">`WorkflowApplicationInfo`</ph> objects that are kept reasonably in synchronization with the instances they represent.","pos":[1485,1709],"source":" The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent."},{"content":"The instance manager layer consists of the <ph id=\"ph1\">`WorkflowApplicationManager`</ph> class, which is the core of all host communications, and the <ph id=\"ph2\">`WorkflowDefinitionExtension`</ph> class, which persists the relationship between an instance and the program definition it was started with and a few other classes.","pos":[1710,2003],"source":" The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes."},{"content":"The <ph id=\"ph1\">`HostView`</ph> calls control operations on the <ph id=\"ph2\">`WorkflowApplicationManager`</ph>.","pos":[2004,2080],"source":" The `HostView` calls control operations on the `WorkflowApplicationManager`."},{"content":"These calls are typically asynchronous to maintain a responsive user interface.","pos":[2081,2160]},{"content":"When the asynchronous calls complete, the <ph id=\"ph1\">`WorkflowApplicationManager`</ph> makes calls back into the view layer through a well-defined interface (<ph id=\"ph2\">`IHostView`</ph>).","pos":[2161,2316],"source":" When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`)."},{"content":"The <ph id=\"ph1\">`HostView`</ph> class most often dispatches these calls from the <ph id=\"ph2\">`WorkflowApplicationManager`</ph> class to the user interface thread.","pos":[2317,2445],"source":" The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread."},{"content":"Text writing is done to thread-safe <ph id=\"ph1\">&lt;xref:System.Activities.Statements.WriteLine.TextWriter%2A&gt;</ph> objects provided by the <ph id=\"ph2\">`HostView`</ph> class.","pos":[2446,2583],"source":" Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class."},{"content":"The user interface is not the only thing generating events.","pos":[2584,2643]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.WorkflowApplication&gt;</ph> objects also signal the <ph id=\"ph2\">`WorkflowApplicationManager`</ph> when they go <ph id=\"ph3\">`Idle`</ph>, <ph id=\"ph4\">`Complete`</ph>, or are <ph id=\"ph5\">`Aborted`</ph>, for example.","pos":[2644,2809],"source":" The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example."},{"content":"The <ph id=\"ph1\">`WorkflowApplicationManager`</ph> class gets off the event thread by dispatching clean up or updating work to the host.","pos":[2810,2928],"source":" The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host."},{"content":"The recording of the file used to launch a <ph id=\"ph1\">&lt;xref:System.Activities.WorkflowApplication&gt;</ph> is facilitated by the <ph id=\"ph2\">`WorkflowDefinitionExtension`</ph> class.","pos":[2935,3081],"source":"The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class."},{"content":"It implements the <ph id=\"ph1\">&lt;xref:System.Activities.Persistence.PersistenceIOParticipant&gt;</ph> interface to participate in persistence and persist the path to the workflow definition.","pos":[3082,3250],"source":" It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition."},{"pos":[3257,3445],"content":"The <ph id=\"ph1\">`WorkflowApplicationManager.Load`</ph> method uses the stored path to instantiate the workflow programs required for loading unfinished <ph id=\"ph2\">&lt;xref:System.Activities.WorkflowApplication&gt;</ph> objects.","source":"The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects."},{"pos":[3456,3492],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"content":"This sample requires SQL Express to be installed.","pos":[3502,3551]},{"content":"SQL Express comes with <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","pos":[3552,3629],"source":" SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"content":"Open a Visual Studio 2010 command prompt.","pos":[3639,3680]},{"content":"Navigate to the sample directory (\\WF\\Basic\\Execution\\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.","pos":[3690,3809]},{"content":"The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.","pos":[3819,3937]},{"content":"If you want to install the database on a different instance, modify the script to do so.","pos":[3938,4026]},{"content":"Compile the WorkflowApplicationReadLineHost project and run it from the command line.","pos":[4036,4121]},{"content":"Once running, you can optionally turn persistence off or on.","pos":[4131,4191]},{"content":"Further, you can optionally turn detailed activity tracking on or off.","pos":[4192,4262]},{"pos":[4272,4372],"content":"Press the ellipsis button next to the <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept> button to browse for a workflow defined in a XAML file","source":"Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file"},{"content":"Two samples can be found under the SampleWorkflows folder.","pos":[4383,4441]},{"content":"The parallel1.xaml example goes idle.","pos":[4442,4479]},{"pos":[4489,4543],"content":"Once an example is selected, press the <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept> button.","source":"Once an example is selected, press the **Run** button."},{"pos":[4552,4653],"content":"If or when the workflow goes idle, the <bpt id=\"p1\">**</bpt>Bookmarks<ept id=\"p1\">**</ept> combo box is populated with available bookmarks.","source":"If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks."},{"content":"The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow.","pos":[4663,4756]},{"content":"You can also shut down the host and restart it.","pos":[4757,4804]},{"content":"If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.","pos":[4805,4896]},{"pos":[4907,5042],"content":"To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press <bpt id=\"p1\">**</bpt>Resume Bookmark<ept id=\"p1\">**</ept>.","source":"To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**."},{"pos":[5053,5090],"content":"To remove the instance store database","linkify":"To remove the instance store database","nodes":[{"content":"To remove the instance store database","pos":[0,37]}]},{"content":"Open a Visual Studio 2010 command prompt.","pos":[5100,5141]},{"content":"Navigate to the sample directory (\\WF\\Basic\\Execution\\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.","pos":[5151,5270]},{"pos":[5278,5410],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5464,5790],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5791,5841]},{"pos":[5944,5952],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}