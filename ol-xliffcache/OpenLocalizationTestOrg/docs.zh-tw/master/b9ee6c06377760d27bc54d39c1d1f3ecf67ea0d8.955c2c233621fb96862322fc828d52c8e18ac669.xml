{"content":"---\ntitle: \"Pick Activity\"\nms.date: \"03/30/2017\"\nms.assetid: b3e49b7f-0285-4720-8c09-11ae18f0d53e\n---\n# Pick Activity\nThe <xref:System.Activities.Statements.Pick> activity simplifies the modeling of a set of event triggers followed by their corresponding handlers.  A <xref:System.Activities.Statements.Pick> activity contains a collection of <xref:System.Activities.Statements.PickBranch> activities, where each <xref:System.Activities.Statements.PickBranch> is a pairing between a <xref:System.Activities.Statements.PickBranch.Trigger%2A> activity and an <xref:System.Activities.Statements.PickBranch.Action%2A> activity.  At execution time, the triggers for all branches are executed in parallel.  When one trigger completes, then its corresponding action is executed, and all other triggers are canceled.  The behavior of the [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)]<xref:System.Activities.Statements.Pick> activity is similar to the [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)]<xref:System.Workflow.Activities.ListenActivity> activity.  \n  \n The following screenshot from the [Using the Pick Activity](./samples/using-the-pick-activity.md) SDK sample shows a Pick activity with two branches.  One branch has a trigger called **Read input**, a custom activity that reads input from the command line. The second branch has a <xref:System.Activities.Statements.Delay> activity trigger. If the **Read input** activity receives data before the <xref:System.Activities.Statements.Delay> activity finishes, <xref:System.Activities.Statements.Delay> Delay will be canceled and a greeting will be written to the console.  Otherwise, if the **Read input** activity does not receive data in the allotted time, then it will be canceled and a timeout message will be written to the console.  This is a common pattern used to add a timeout to any action.  \n  \n ![Pick Activity](./media/pick-activity/pick-activity-two-branches.jpg)  \n  \n## Best practices  \n When using Pick, the branch that executes is the branch whose trigger completes first.  Conceptually, all triggers execute in parallel, and one trigger may have executed the majority of its logic before it is canceled by the completion of another trigger.  With this in mind, a general guideline to follow when using the Pick activity is to treat the trigger as representing a single event, and to put as little logic as possible into it.  Ideally, the trigger should contain just enough logic to receive an event, and all the processing of that event should go into the action of the branch.  This method minimizes the amount of overlap between the execution of the triggers.  For example, consider a <xref:System.Activities.Statements.Pick> with two triggers, where each trigger contains a <xref:System.ServiceModel.Activities.Receive> activity followed by additional logic.  If the additional logic introduces an idle point, then there is the possibility of both <xref:System.ServiceModel.Activities.Receive> activities completing successfully.  One trigger will fully complete, while another will partially complete.  In some scenarios, accepting a message, and then partially completing the processing of it is unacceptable.  Therefore, when using WF built-in messaging activities such as <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>, while <xref:System.ServiceModel.Activities.Receive> is commonly used in the trigger, <xref:System.ServiceModel.Activities.SendReply> and other logic should be put in the action whenever possible.  \n  \n## Using the Pick activity in the designer  \n To use Pick in the designer, find **Pick** and **PickBranch** in the toolbox.  Drag and drop **Pick** onto the canvas.  By default, a new **Pick** Activity in the designer will contain two branches.  To add additional branches, drag the **PickBranch** activity and drop it next to existing branches. Activities can be dropped onto the **Pick** Activity into either the **Trigger** area or the **Action** area of any **PickBranch**.  \n  \n## Using the Pick Activity in code  \n The <xref:System.Activities.Statements.Pick> activity is used by populating its <xref:System.Activities.Statements.Pick.Branches%2A> collection with <xref:System.Activities.Statements.PickBranch> activities. The <xref:System.Activities.Statements.PickBranch> activities each have a <xref:System.Activities.Statements.PickBranch.Trigger%2A> property of type <xref:System.Activities.Activity>. When the specified activity completes execution, the <xref:System.Activities.Statements.PickBranch.Action%2A> executes.  \n  \n The following code example demonstrates how to use a <xref:System.Activities.Statements.Pick> activity to implement a timeout for an activity that reads a line from the console.  \n  \n```csharp  \nSequence body = new Sequence()  \n{  \n    Variables = { name },  \n    Activities =   \n   {  \n       new System.Activities.Statements.Pick  \n        {  \n           Branches =   \n           {  \n               new PickBranch  \n               {  \n                   Trigger = new ReadLine  \n                   {  \n                      Result = name,  \n                      BookmarkName = \"name\"  \n                   },  \n                   Action = new WriteLine   \n                   {   \n                       Text = ExpressionServices.Convert<string>(ctx => \"Hello \" +   \n                           name.Get(ctx))   \n                   }  \n               },  \n               new PickBranch  \n               {  \n                   Trigger = new Delay  \n                   {  \n                      Duration = new TimeSpan(0, 0, 5)  \n                   },  \n                   Action = new WriteLine  \n                   {  \n                      Text = \"Time is up.\"  \n                   }  \n               }  \n           }  \n       }  \n   }  \n};  \n```  \n  \n```xaml  \n<Sequence xmlns=\"http://schemas.microsoft.com/netfx/2009/xaml/activities\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\">  \n  <Sequence.Variables>  \n    <Variable x:TypeArguments=\"x:String\" Name=\"username\" />  \n  </Sequence.Variables>  \n  <Pick>  \n    <PickBranch>  \n      <PickBranch.Trigger>  \n        <ReadLine BookmarkName=\"name\" Result=\"username\" />  \n      </PickBranch.Trigger>  \n      <WriteLine>[String.Concat(\"Hello \", username)]</WriteLine>  \n    </PickBranch>  \n    <PickBranch>  \n      <PickBranch.Trigger>  \n        <Delay>00:00:05</Delay>  \n      </PickBranch.Trigger>  \n      <WriteLine>Time is up.</WriteLine>  \n    </PickBranch>  \n  </Pick>  \n</Sequence>  \n```\n","nodes":[{"pos":[4,97],"embed":true,"restype":"x-metadata","content":"title: \"Pick Activity\"\nms.date: \"03/30/2017\"\nms.assetid: b3e49b7f-0285-4720-8c09-11ae18f0d53e","nodes":[{"content":"Pick Activity","nodes":[{"pos":[0,13],"content":"Pick Activity","nodes":[{"content":"Pick Activity","pos":[0,13]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[104,117],"content":"Pick Activity","linkify":"Pick Activity","nodes":[{"content":"Pick Activity","pos":[0,13]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity simplifies the modeling of a set of event triggers followed by their corresponding handlers.","pos":[118,264],"source":"The <xref:System.Activities.Statements.Pick> activity simplifies the modeling of a set of event triggers followed by their corresponding handlers."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity contains a collection of <ph id=\"ph2\">&lt;xref:System.Activities.Statements.PickBranch&gt;</ph> activities, where each <ph id=\"ph3\">&lt;xref:System.Activities.Statements.PickBranch&gt;</ph> is a pairing between a <ph id=\"ph4\">&lt;xref:System.Activities.Statements.PickBranch.Trigger%2A&gt;</ph> activity and an <ph id=\"ph5\">&lt;xref:System.Activities.Statements.PickBranch.Action%2A&gt;</ph> activity.","pos":[266,623],"source":"  A <xref:System.Activities.Statements.Pick> activity contains a collection of <xref:System.Activities.Statements.PickBranch> activities, where each <xref:System.Activities.Statements.PickBranch> is a pairing between a <xref:System.Activities.Statements.PickBranch.Trigger%2A> activity and an <xref:System.Activities.Statements.PickBranch.Action%2A> activity."},{"content":"At execution time, the triggers for all branches are executed in parallel.","pos":[625,699]},{"content":"When one trigger completes, then its corresponding action is executed, and all other triggers are canceled.","pos":[701,808]},{"content":"The behavior of the <ph id=\"ph1\">[!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)]</ph><ph id=\"ph2\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity is similar to the <ph id=\"ph3\">[!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)]</ph><ph id=\"ph4\">&lt;xref:System.Workflow.Activities.ListenActivity&gt;</ph> activity.","pos":[810,1096],"source":"  The behavior of the [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)]<xref:System.Activities.Statements.Pick> activity is similar to the [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)]<xref:System.Workflow.Activities.ListenActivity> activity."},{"content":"The following screenshot from the <bpt id=\"p1\">[</bpt>Using the Pick Activity<ept id=\"p1\">](./samples/using-the-pick-activity.md)</ept> SDK sample shows a Pick activity with two branches.","pos":[1103,1252],"source":"The following screenshot from the [Using the Pick Activity](./samples/using-the-pick-activity.md) SDK sample shows a Pick activity with two branches."},{"content":"One branch has a trigger called <bpt id=\"p1\">**</bpt>Read input<ept id=\"p1\">**</ept>, a custom activity that reads input from the command line.","pos":[1254,1359],"source":"  One branch has a trigger called **Read input**, a custom activity that reads input from the command line."},{"content":"The second branch has a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Delay&gt;</ph> activity trigger.","pos":[1360,1443],"source":" The second branch has a <xref:System.Activities.Statements.Delay> activity trigger."},{"content":"If the <bpt id=\"p1\">**</bpt>Read input<ept id=\"p1\">**</ept> activity receives data before the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Delay&gt;</ph> activity finishes, <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Delay&gt;</ph> Delay will be canceled and a greeting will be written to the console.","pos":[1444,1672],"source":" If the **Read input** activity receives data before the <xref:System.Activities.Statements.Delay> activity finishes, <xref:System.Activities.Statements.Delay> Delay will be canceled and a greeting will be written to the console."},{"content":"Otherwise, if the <bpt id=\"p1\">**</bpt>Read input<ept id=\"p1\">**</ept> activity does not receive data in the allotted time, then it will be canceled and a timeout message will be written to the console.","pos":[1674,1838],"source":"  Otherwise, if the **Read input** activity does not receive data in the allotted time, then it will be canceled and a timeout message will be written to the console."},{"content":"This is a common pattern used to add a timeout to any action.","pos":[1840,1901]},{"content":"Pick Activity","pos":[1910,1923]},{"pos":[1987,2001],"content":"Best practices","linkify":"Best practices","nodes":[{"content":"Best practices","pos":[0,14]}]},{"content":"When using Pick, the branch that executes is the branch whose trigger completes first.","pos":[2005,2091]},{"content":"Conceptually, all triggers execute in parallel, and one trigger may have executed the majority of its logic before it is canceled by the completion of another trigger.","pos":[2093,2260]},{"content":"With this in mind, a general guideline to follow when using the Pick activity is to treat the trigger as representing a single event, and to put as little logic as possible into it.","pos":[2262,2443]},{"content":"Ideally, the trigger should contain just enough logic to receive an event, and all the processing of that event should go into the action of the branch.","pos":[2445,2597]},{"content":"This method minimizes the amount of overlap between the execution of the triggers.","pos":[2599,2681]},{"content":"For example, consider a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> with two triggers, where each trigger contains a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity followed by additional logic.","pos":[2683,2881],"source":"  For example, consider a <xref:System.Activities.Statements.Pick> with two triggers, where each trigger contains a <xref:System.ServiceModel.Activities.Receive> activity followed by additional logic."},{"content":"If the additional logic introduces an idle point, then there is the possibility of both <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activities completing successfully.","pos":[2883,3052],"source":"  If the additional logic introduces an idle point, then there is the possibility of both <xref:System.ServiceModel.Activities.Receive> activities completing successfully."},{"content":"One trigger will fully complete, while another will partially complete.","pos":[3054,3125]},{"content":"In some scenarios, accepting a message, and then partially completing the processing of it is unacceptable.","pos":[3127,3234]},{"content":"Therefore, when using WF built-in messaging activities such as <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph>, while <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> is commonly used in the trigger, <ph id=\"ph4\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> and other logic should be put in the action whenever possible.","pos":[3236,3593],"source":"  Therefore, when using WF built-in messaging activities such as <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>, while <xref:System.ServiceModel.Activities.Receive> is commonly used in the trigger, <xref:System.ServiceModel.Activities.SendReply> and other logic should be put in the action whenever possible."},{"pos":[3602,3641],"content":"Using the Pick activity in the designer","linkify":"Using the Pick activity in the designer","nodes":[{"content":"Using the Pick activity in the designer","pos":[0,39]}]},{"content":"To use Pick in the designer, find <bpt id=\"p1\">**</bpt>Pick<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>PickBranch<ept id=\"p2\">**</ept> in the toolbox.","pos":[3645,3722],"source":"To use Pick in the designer, find **Pick** and **PickBranch** in the toolbox."},{"content":"Drag and drop <bpt id=\"p1\">**</bpt>Pick<ept id=\"p1\">**</ept> onto the canvas.","pos":[3724,3763],"source":"  Drag and drop **Pick** onto the canvas."},{"content":"By default, a new <bpt id=\"p1\">**</bpt>Pick<ept id=\"p1\">**</ept> Activity in the designer will contain two branches.","pos":[3765,3843],"source":"  By default, a new **Pick** Activity in the designer will contain two branches."},{"content":"To add additional branches, drag the <bpt id=\"p1\">**</bpt>PickBranch<ept id=\"p1\">**</ept> activity and drop it next to existing branches.","pos":[3845,3944],"source":"  To add additional branches, drag the **PickBranch** activity and drop it next to existing branches."},{"content":"Activities can be dropped onto the <bpt id=\"p1\">**</bpt>Pick<ept id=\"p1\">**</ept> Activity into either the <bpt id=\"p2\">**</bpt>Trigger<ept id=\"p2\">**</ept> area or the <bpt id=\"p3\">**</bpt>Action<ept id=\"p3\">**</ept> area of any <bpt id=\"p4\">**</bpt>PickBranch<ept id=\"p4\">**</ept>.","pos":[3945,4076],"source":" Activities can be dropped onto the **Pick** Activity into either the **Trigger** area or the **Action** area of any **PickBranch**."},{"pos":[4085,4116],"content":"Using the Pick Activity in code","linkify":"Using the Pick Activity in code","nodes":[{"content":"Using the Pick Activity in code","pos":[0,31]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity is used by populating its <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Pick.Branches%2A&gt;</ph> collection with <ph id=\"ph3\">&lt;xref:System.Activities.Statements.PickBranch&gt;</ph> activities.","pos":[4120,4327],"source":"The <xref:System.Activities.Statements.Pick> activity is used by populating its <xref:System.Activities.Statements.Pick.Branches%2A> collection with <xref:System.Activities.Statements.PickBranch> activities."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Statements.PickBranch&gt;</ph> activities each have a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.PickBranch.Trigger%2A&gt;</ph> property of type <ph id=\"ph3\">&lt;xref:System.Activities.Activity&gt;</ph>.","pos":[4328,4511],"source":" The <xref:System.Activities.Statements.PickBranch> activities each have a <xref:System.Activities.Statements.PickBranch.Trigger%2A> property of type <xref:System.Activities.Activity>."},{"content":"When the specified activity completes execution, the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.PickBranch.Action%2A&gt;</ph> executes.","pos":[4512,4631],"source":" When the specified activity completes execution, the <xref:System.Activities.Statements.PickBranch.Action%2A> executes."},{"pos":[4638,4815],"content":"The following code example demonstrates how to use a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity to implement a timeout for an activity that reads a line from the console.","source":"The following code example demonstrates how to use a <xref:System.Activities.Statements.Pick> activity to implement a timeout for an activity that reads a line from the console."}]}