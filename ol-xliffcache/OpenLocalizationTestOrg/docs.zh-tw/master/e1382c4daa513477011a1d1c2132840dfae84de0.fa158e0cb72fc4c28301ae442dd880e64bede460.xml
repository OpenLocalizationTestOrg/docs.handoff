{"content":"---\ntitle: \"TREAT (Entity SQL)\"\nms.date: \"03/30/2017\"\nms.assetid: 5b77f156-55de-4cb4-8154-87f707d4c635\n---\n# TREAT (Entity SQL)\nTreats an object of a particular base type as an object of the specified derived type.  \n  \n## Syntax  \n  \n```  \nTREAT ( expression as type)  \n```  \n  \n## Arguments  \n `expression`  \n Any valid query expression that returns an entity.  \n  \n> [!NOTE]\n>  The type of the specified expression must be a subtype of the specified data type, or the data type must be a subtype of the type of expression.  \n  \n `type`  \n An entity type. The type must be qualified by a namespace.  \n  \n> [!NOTE]\n>  The specified expression must be a subtype of the specified data type, or the data type must be a subtype of the expression.  \n  \n## Return Value  \n A value of the specified data type.  \n  \n## Remarks  \n TREAT is used to perform upcasting between related classes. For example, if `Employee` derives from `Person` and p is of type `Person`, `TREAT(p AS NamespaceName.Employee)` upcasts a generic `Person` instance to `Employee`; that is, it allows you to treat p as `Employee`.  \n  \n TREAT is used in inheritance scenarios where you can do a query like the following:  \n  \n```  \nSELECT TREAT(p AS NamespaceName.Employee)  \nFROM ContainerName.Person AS p  \nWHERE p IS OF (NamespaceName.Employee)   \n```  \n  \n This query upcasts `Person` entities to the `Employee` type. If the value of p is not actually of type `Employee`, the expression yields the value `null`.  \n  \n> [!NOTE]\n>  The specified expression `Employee` must be a subtype of the specified data type `Person`, or the data type must be a subtype of the expression. Otherwise, the expression will result in a compile-time error.  \n  \n The following table shows the behavior of treat over some typical patterns and some less common patterns. All exceptions are thrown from the client side before the provider gets invoked:  \n  \n|Pattern|Behavior|  \n|-------------|--------------|  \n|`TREAT (null AS EntityType)`|Returns `DbNull`.|  \n|`TREAT (null AS ComplexType)`|Throws an exception.|  \n|`TREAT (null AS RowType)`|Throws an exception/|  \n|`TREAT (EntityType AS EntityType)`|Returns `EntityType` or `null`.|  \n|`TREAT (ComplexType AS ComplexType)`|Throws an exception.|  \n|`TREAT (RowType AS RowType)`|Throws an exception.|  \n  \n## Example  \n The following [!INCLUDE[esql](../../../../../../includes/esql-md.md)] query uses the TREAT operator to convert an object of the type Course to a collection of objects of the type OnsiteCourse. The query is based on the [School Model](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896300(v=vs.100)).  \n  \n [!code-csharp[DP EntityServices Concepts 2#TREAT_ISOF](../../../../../../samples/snippets/csharp/VS_Snippets_Data/dp entityservices concepts 2/cs/entitysql.cs#treat_isof)]  \n  \n## See also\n\n- [Entity SQL Reference](../../../../../../docs/framework/data/adonet/ef/language-reference/entity-sql-reference.md)\n- [Nullable Structured Types](../../../../../../docs/framework/data/adonet/ef/language-reference/nullable-structured-types-entity-sql.md)\n","nodes":[{"pos":[4,102],"embed":true,"restype":"x-metadata","content":"title: \"TREAT (Entity SQL)\"\nms.date: \"03/30/2017\"\nms.assetid: 5b77f156-55de-4cb4-8154-87f707d4c635","nodes":[{"content":"TREAT (Entity SQL)","nodes":[{"pos":[0,18],"content":"TREAT (Entity SQL)","nodes":[{"content":"TREAT (Entity SQL)","pos":[0,18]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[109,127],"content":"TREAT (Entity SQL)","linkify":"TREAT (Entity SQL)","nodes":[{"content":"TREAT (Entity SQL)","pos":[0,18]}]},{"content":"Treats an object of a particular base type as an object of the specified derived type.","pos":[128,214]},{"pos":[223,229],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[283,292],"content":"Arguments","linkify":"Arguments","nodes":[{"content":"Arguments","pos":[0,9]}]},{"content":"Any valid query expression that returns an entity.","pos":[312,362]},{"pos":[370,525],"content":"[!NOTE]\n The type of the specified expression must be a subtype of the specified data type, or the data type must be a subtype of the type of expression.","leadings":["","> "],"nodes":[{"content":"The type of the specified expression must be a subtype of the specified data type, or the data type must be a subtype of the type of expression.","pos":[9,153]}]},{"content":"An entity type.","pos":[542,557]},{"content":"The type must be qualified by a namespace.","pos":[558,600]},{"pos":[608,743],"content":"[!NOTE]\n The specified expression must be a subtype of the specified data type, or the data type must be a subtype of the expression.","leadings":["","> "],"nodes":[{"content":"The specified expression must be a subtype of the specified data type, or the data type must be a subtype of the expression.","pos":[9,133]}]},{"pos":[752,764],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"A value of the specified data type.","pos":[768,803]},{"pos":[812,819],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"TREAT is used to perform upcasting between related classes.","pos":[823,882]},{"content":"For example, if <ph id=\"ph1\">`Employee`</ph> derives from <ph id=\"ph2\">`Person`</ph> and p is of type <ph id=\"ph3\">`Person`</ph>, <ph id=\"ph4\">`TREAT(p AS NamespaceName.Employee)`</ph> upcasts a generic <ph id=\"ph5\">`Person`</ph> instance to <ph id=\"ph6\">`Employee`</ph>; that is, it allows you to treat p as <ph id=\"ph7\">`Employee`</ph>.","pos":[883,1095],"source":" For example, if `Employee` derives from `Person` and p is of type `Person`, `TREAT(p AS NamespaceName.Employee)` upcasts a generic `Person` instance to `Employee`; that is, it allows you to treat p as `Employee`."},{"content":"TREAT is used in inheritance scenarios where you can do a query like the following:","pos":[1102,1185]},{"content":"This query upcasts <ph id=\"ph1\">`Person`</ph> entities to the <ph id=\"ph2\">`Employee`</ph> type.","pos":[1326,1386],"source":"This query upcasts `Person` entities to the `Employee` type."},{"content":"If the value of p is not actually of type <ph id=\"ph1\">`Employee`</ph>, the expression yields the value <ph id=\"ph2\">`null`</ph>.","pos":[1387,1480],"source":" If the value of p is not actually of type `Employee`, the expression yields the value `null`."},{"pos":[1488,1706],"content":"[!NOTE]\n The specified expression `Employee` must be a subtype of the specified data type `Person`, or the data type must be a subtype of the expression. Otherwise, the expression will result in a compile-time error.","leadings":["","> "],"nodes":[{"content":"The specified expression `Employee` must be a subtype of the specified data type `Person`, or the data type must be a subtype of the expression. Otherwise, the expression will result in a compile-time error.","pos":[9,216],"nodes":[{"content":"The specified expression <ph id=\"ph1\">`Employee`</ph> must be a subtype of the specified data type <ph id=\"ph2\">`Person`</ph>, or the data type must be a subtype of the expression.","pos":[0,144],"source":"The specified expression `Employee` must be a subtype of the specified data type `Person`, or the data type must be a subtype of the expression."},{"content":"Otherwise, the expression will result in a compile-time error.","pos":[145,207]}]}]},{"content":"The following table shows the behavior of treat over some typical patterns and some less common patterns.","pos":[1713,1818]},{"content":"All exceptions are thrown from the client side before the provider gets invoked:","pos":[1819,1899]},{"content":"Pattern","pos":[1906,1913]},{"content":"Behavior","pos":[1914,1922]},{"pos":[1989,2006],"content":"Returns <ph id=\"ph1\">`DbNull`</ph>.","source":"Returns `DbNull`."},{"content":"Throws an exception.","pos":[2041,2061]},{"content":"Throws an exception/","pos":[2092,2112]},{"pos":[2152,2183],"content":"Returns <ph id=\"ph1\">`EntityType`</ph> or <ph id=\"ph2\">`null`</ph>.","source":"Returns `EntityType` or `null`."},{"content":"Throws an exception.","pos":[2225,2245]},{"content":"Throws an exception.","pos":[2279,2299]},{"pos":[2309,2316],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following <ph id=\"ph1\">[!INCLUDE[esql](../../../../../../includes/esql-md.md)]</ph> query uses the TREAT operator to convert an object of the type Course to a collection of objects of the type OnsiteCourse.","pos":[2320,2512],"source":"The following [!INCLUDE[esql](../../../../../../includes/esql-md.md)] query uses the TREAT operator to convert an object of the type Course to a collection of objects of the type OnsiteCourse."},{"content":"The query is based on the <bpt id=\"p1\">[</bpt>School Model<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896300(v=vs.100))</ept>.","pos":[2513,2643],"source":" The query is based on the [School Model](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896300(v=vs.100))."},{"pos":[2830,2838],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2842,2956],"content":"<bpt id=\"p1\">[</bpt>Entity SQL Reference<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/ef/language-reference/entity-sql-reference.md)</ept>","source":"[Entity SQL Reference](../../../../../../docs/framework/data/adonet/ef/language-reference/entity-sql-reference.md)"},{"pos":[2959,3094],"content":"<bpt id=\"p1\">[</bpt>Nullable Structured Types<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/ef/language-reference/nullable-structured-types-entity-sql.md)</ept>","source":"[Nullable Structured Types](../../../../../../docs/framework/data/adonet/ef/language-reference/nullable-structured-types-entity-sql.md)"}]}