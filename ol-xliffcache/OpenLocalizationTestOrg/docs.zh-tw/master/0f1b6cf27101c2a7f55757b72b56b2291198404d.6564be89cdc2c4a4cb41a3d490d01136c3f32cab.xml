{"content":"---\ntitle: \"Object Identity\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: c788f2f9-65cc-4455-9907-e8388a268e00\n---\n# Object Identity\nObjects in the runtime have unique identities. Two variables that refer to the same object actually refer to the same instance of the object. Because of this fact, changes that you make by way of a path through one variable are immediately visible through the other.  \n  \n Rows in a relational database table do not have unique identities. Because each row has a unique primary key, no two rows share the same key value. However, this fact constrains only the contents of the database table.  \n  \n In reality, data is most often brought out of the database and into a different tier, where an application works with it. This is the model that [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] supports. When data is brought out of the database as rows, you have no expectation that two rows that represent the same data actually correspond to the same row instances. If you query for a specific customer two times, you get two rows of data. Each row contains the same information.  \n  \n With objects you expect something very different. You expect that if you ask the <xref:System.Data.Linq.DataContext> for the same information repeatedly, it will in fact give you the same object instance. You expect this behavior because objects have special meaning for your application and you expect them to behave like objects. You designed them as hierarchies or graphs. You expect to retrieve them as such and not to receive multitudes of replicated instances just because you asked for the same thing more than one time.  \n  \n In [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], the <xref:System.Data.Linq.DataContext> manages object identity. Whenever you retrieve a new row from the database, the row is logged in an identity table by its primary key, and a new object is created. Whenever you retrieve that same row, the original object instance is handed back to the application. In this manner the <xref:System.Data.Linq.DataContext> translates the concept of identity as seen by the database (that is, primary keys) into the concept of identity seen by the language (that is, instances). The application only sees the object in the state that it was first retrieved. The new data, if different, is discarded. For more information, see [Retrieving Objects from the Identity Cache](../../../../../../docs/framework/data/adonet/sql/linq/retrieving-objects-from-the-identity-cache.md).  \n  \n [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] uses this approach to manage the integrity of local objects in order to support optimistic updates. Because the only changes that occur after the object is at first created are those made by the application, the intent of the application is clear. If changes by an outside party have occurred in the interim, they are identified at the time `SubmitChanges()` is called.  \n  \n> [!NOTE]\n>  If the object requested by the query is easily identifiable as one already retrieved, no query is executed. The identity table acts as a cache of all previously retrieved objects.  \n  \n## Examples  \n  \n### Object Caching Example 1  \n In this example, if you execute the same query two times, you receive a reference to the same object in memory every time.  \n  \n [!code-csharp[DLinqObjectIdentity#1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqObjectIdentity/cs/Program.cs#1)]\n [!code-vb[DLinqObjectIdentity#1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqObjectIdentity/vb/Module1.vb#1)]  \n  \n### Object Caching Example 2  \n In this example, if you execute different queries that return the same row from the database, you receive a reference to the same object in memory every time.  \n  \n [!code-csharp[DLinqObjectIdentity#2](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqObjectIdentity/cs/Program.cs#2)]\n [!code-vb[DLinqObjectIdentity#2](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqObjectIdentity/vb/Module1.vb#2)]  \n  \n## See also\n\n- [Background Information](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)\n","nodes":[{"pos":[4,133],"embed":true,"restype":"x-metadata","content":"title: \"Object Identity\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: c788f2f9-65cc-4455-9907-e8388a268e00","nodes":[{"content":"Object Identity","nodes":[{"pos":[0,15],"content":"Object Identity","nodes":[{"content":"Object Identity","pos":[0,15]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[140,155],"content":"Object Identity","linkify":"Object Identity","nodes":[{"content":"Object Identity","pos":[0,15]}]},{"content":"Objects in the runtime have unique identities.","pos":[156,202]},{"content":"Two variables that refer to the same object actually refer to the same instance of the object.","pos":[203,297]},{"content":"Because of this fact, changes that you make by way of a path through one variable are immediately visible through the other.","pos":[298,422]},{"content":"Rows in a relational database table do not have unique identities.","pos":[429,495]},{"content":"Because each row has a unique primary key, no two rows share the same key value.","pos":[496,576]},{"content":"However, this fact constrains only the contents of the database table.","pos":[577,647]},{"content":"In reality, data is most often brought out of the database and into a different tier, where an application works with it.","pos":[654,775]},{"content":"This is the model that <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> supports.","pos":[776,876],"source":" This is the model that [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] supports."},{"content":"When data is brought out of the database as rows, you have no expectation that two rows that represent the same data actually correspond to the same row instances.","pos":[877,1040]},{"content":"If you query for a specific customer two times, you get two rows of data.","pos":[1041,1114]},{"content":"Each row contains the same information.","pos":[1115,1154]},{"content":"With objects you expect something very different.","pos":[1161,1210]},{"content":"You expect that if you ask the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> for the same information repeatedly, it will in fact give you the same object instance.","pos":[1211,1365],"source":" You expect that if you ask the <xref:System.Data.Linq.DataContext> for the same information repeatedly, it will in fact give you the same object instance."},{"content":"You expect this behavior because objects have special meaning for your application and you expect them to behave like objects.","pos":[1366,1492]},{"content":"You designed them as hierarchies or graphs.","pos":[1493,1536]},{"content":"You expect to retrieve them as such and not to receive multitudes of replicated instances just because you asked for the same thing more than one time.","pos":[1537,1688]},{"content":"In <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph>, the <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> manages object identity.","pos":[1695,1831],"source":"In [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)], the <xref:System.Data.Linq.DataContext> manages object identity."},{"content":"Whenever you retrieve a new row from the database, the row is logged in an identity table by its primary key, and a new object is created.","pos":[1832,1970]},{"content":"Whenever you retrieve that same row, the original object instance is handed back to the application.","pos":[1971,2071]},{"content":"In this manner the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> translates the concept of identity as seen by the database (that is, primary keys) into the concept of identity seen by the language (that is, instances).","pos":[2072,2281],"source":" In this manner the <xref:System.Data.Linq.DataContext> translates the concept of identity as seen by the database (that is, primary keys) into the concept of identity seen by the language (that is, instances)."},{"content":"The application only sees the object in the state that it was first retrieved.","pos":[2282,2360]},{"content":"The new data, if different, is discarded.","pos":[2361,2402]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Retrieving Objects from the Identity Cache<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/retrieving-objects-from-the-identity-cache.md)</ept>.","pos":[2403,2575],"source":" For more information, see [Retrieving Objects from the Identity Cache](../../../../../../docs/framework/data/adonet/sql/linq/retrieving-objects-from-the-identity-cache.md)."},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> uses this approach to manage the integrity of local objects in order to support optimistic updates.","pos":[2582,2749],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] uses this approach to manage the integrity of local objects in order to support optimistic updates."},{"content":"Because the only changes that occur after the object is at first created are those made by the application, the intent of the application is clear.","pos":[2750,2897]},{"content":"If changes by an outside party have occurred in the interim, they are identified at the time <ph id=\"ph1\">`SubmitChanges()`</ph> is called.","pos":[2898,3019],"source":" If changes by an outside party have occurred in the interim, they are identified at the time `SubmitChanges()` is called."},{"pos":[3027,3217],"content":"[!NOTE]\n If the object requested by the query is easily identifiable as one already retrieved, no query is executed. The identity table acts as a cache of all previously retrieved objects.","leadings":["","> "],"nodes":[{"content":"If the object requested by the query is easily identifiable as one already retrieved, no query is executed. The identity table acts as a cache of all previously retrieved objects.","pos":[9,188],"nodes":[{"content":"If the object requested by the query is easily identifiable as one already retrieved, no query is executed.","pos":[0,107]},{"content":"The identity table acts as a cache of all previously retrieved objects.","pos":[108,179]}]}]},{"pos":[3226,3234],"content":"Examples","linkify":"Examples","nodes":[{"content":"Examples","pos":[0,8]}]},{"pos":[3244,3268],"content":"Object Caching Example 1","linkify":"Object Caching Example 1","nodes":[{"content":"Object Caching Example 1","pos":[0,24]}]},{"content":"In this example, if you execute the same query two times, you receive a reference to the same object in memory every time.","pos":[3272,3394]},{"pos":[3680,3704],"content":"Object Caching Example 2","linkify":"Object Caching Example 2","nodes":[{"content":"Object Caching Example 2","pos":[0,24]}]},{"content":"In this example, if you execute different queries that return the same row from the database, you receive a reference to the same object in memory every time.","pos":[3708,3866]},{"pos":[4151,4159],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4163,4268],"content":"<bpt id=\"p1\">[</bpt>Background Information<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)</ept>","source":"[Background Information](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)"}]}