{"content":"---\ntitle: \"Technology Regions Overview\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"window regions [WPF]\"\n  - \"Win32 code [WPF], WPF interoperation\"\n  - \"Win32 code [WPF], airspace\"\n  - \"airspace [WPF]\"\n  - \"interoperability [WPF], airspace\"\n  - \"Win32 code [WPF], window regions\"\nms.assetid: b7cc350f-b9e2-48b1-be14-60f3d853222e\n---\n# Technology Regions Overview\nIf multiple presentation technologies are used in an application, such as WPF, Win32, or DirectX, they must share the rendering areas within a common top-level window. This topic describes issues that might influence the presentation and input for your WPF interoperation application.  \n  \n## Regions  \n Within a top-level window, you can conceptualize that each HWND that comprises one of the technologies of an interoperation application has its own region (also called \"airspace\"). Each pixel within the window belongs to exactly one HWND, which constitutes the region of that HWND. (Strictly speaking, there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] region if there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] HWND, but for purposes of this discussion, you can assume there is only one). The region implies that all layers or other windows that attempt to render above that pixel during application lifetime must be part of the same render-level technology. Attempting to render [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pixels over [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] leads to undesirable results, and is disallowed as much as possible through the interoperation [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)].  \n  \n### Region Examples  \n The following illustration shows an application that mixes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)], and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Each technology uses its own separate, non-overlapping set of pixels, and there are no region issues.  \n  \n ![A window that does not have airspace issues](./media/migrationinteroparchitectarticle01.png \"MigrationInteropArchitectArticle01\")  \n  \n Suppose that this application uses the mouse pointer position to create an animation that attempts to render over any of these three regions. No matter which technology was responsible for the animation itself, that technology would violate the region of the other two. The following illustration shows an attempt to render a WPF circle over a Win32 region.  \n  \n ![Interop diagram](./media/migrationinteroparchitectarticle02.png \"MigrationInteropArchitectArticle02\")  \n  \n Another violation is if you try to use transparency/alpha blending between different technologies.  In the following illustration, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box violates the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] regions. Because pixels in that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box are semi-transparent, they would have to be owned jointly by both [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], which is not possible.  So this is another violation and cannot be built.  \n  \n ![Interop diagram](./media/migrationinteroparchitectarticle03.png \"MigrationInteropArchitectArticle03\")  \n  \n The previous three examples used rectangular regions, but different shapes are possible.  For example, a region can have a hole. The following illustration shows a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region with a rectangular hole this is the size of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] regions combined.  \n  \n ![Interop diagram](./media/migrationinteroparchitectarticle04.png \"MigrationInteropArchitectArticle04\")  \n  \n Regions can also be completely nonrectangular, or any shape describable by a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HRGN (region).  \n  \n ![Interop diagram](./media/migrationinteroparchitectarticle05.png \"MigrationInteropArchitectArticle05\")  \n  \n## Transparency and Top-Level Windows  \n The window manager in Windows only really processes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HWNDs. Therefore, every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> is an HWND. The <xref:System.Windows.Window> HWND must abide by the general rules for any HWND. Within that HWND, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] code can do whatever the overall [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] support. But for interactions with other HWNDs on the desktop, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] must abide by [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] processing and rendering rules.  [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports non-rectangular windows by using [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]—HRGNs for non-rectangular windows, and layered windows for a per-pixel alpha.  \n  \n Constant alpha and color keys are not supported.  [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] layered window capabilities vary by platform.  \n  \n Layered windows can make the entire window translucent (semi-transparent) by specifying an alpha value to apply to every pixel in the window.  ([!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] in fact supports per-pixel alpha, but this is very difficult to use in practical programs because in this mode you would need to draw any child HWND yourself, including dialogs and dropdowns).  \n  \n [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports HRGNs; however, there are no managed [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] for this functionality. You can use platform invoke and <xref:System.Windows.Interop.HwndSource> to call the relevant [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]. For more information, see [Calling Native Functions from Managed Code](/cpp/dotnet/calling-native-functions-from-managed-code).  \n  \n [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows have different capabilities on different operating systems. This is because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] to render, and layered windows were primarily designed for [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] rendering, not [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] rendering.  \n  \n-   [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports hardware accelerated layered windows on [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] and later. Hardware accelerated layered windows on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] require support from [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)], so the capabilities will depend on the version of [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)] on that machine.  \n  \n-   [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] does not support transparency color keys, because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] cannot guarantee to render the exact color you requested, particularly when rendering is hardware-accelerated.  \n  \n-   If your application is running on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)], layered windows on top of [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] surfaces flicker when the [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] application renders.  (The actual rendering sequence is that [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] hides the layered window, then [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] draws, and then [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] puts the layered window back).  Non-[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows also have this limitation.  \n  \n## See also\n\n- [WPF and Win32 Interoperation](wpf-and-win32-interoperation.md)\n- [Walkthrough: Hosting a WPF Clock in Win32](walkthrough-hosting-a-wpf-clock-in-win32.md)\n- [Hosting Win32 Content in WPF](hosting-win32-content-in-wpf.md)\n","nodes":[{"pos":[4,335],"embed":true,"restype":"x-metadata","content":"title: \"Technology Regions Overview\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"window regions [WPF]\"\n  - \"Win32 code [WPF], WPF interoperation\"\n  - \"Win32 code [WPF], airspace\"\n  - \"airspace [WPF]\"\n  - \"interoperability [WPF], airspace\"\n  - \"Win32 code [WPF], window regions\"\nms.assetid: b7cc350f-b9e2-48b1-be14-60f3d853222e","nodes":[{"content":"Technology Regions Overview","nodes":[{"pos":[0,27],"content":"Technology Regions Overview","nodes":[{"content":"Technology Regions Overview","pos":[0,27]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[342,369],"content":"Technology Regions Overview","linkify":"Technology Regions Overview","nodes":[{"content":"Technology Regions Overview","pos":[0,27]}]},{"content":"If multiple presentation technologies are used in an application, such as WPF, Win32, or DirectX, they must share the rendering areas within a common top-level window.","pos":[370,537]},{"content":"This topic describes issues that might influence the presentation and input for your WPF interoperation application.","pos":[538,654]},{"pos":[663,670],"content":"Regions","linkify":"Regions","nodes":[{"content":"Regions","pos":[0,7]}]},{"content":"Within a top-level window, you can conceptualize that each HWND that comprises one of the technologies of an interoperation application has its own region (also called \"airspace\").","pos":[674,854]},{"content":"Each pixel within the window belongs to exactly one HWND, which constitutes the region of that HWND.","pos":[855,955]},{"content":"(Strictly speaking, there is more than one <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> region if there is more than one <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> HWND, but for purposes of this discussion, you can assume there is only one).","pos":[956,1273],"source":" (Strictly speaking, there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] region if there is more than one [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] HWND, but for purposes of this discussion, you can assume there is only one)."},{"content":"The region implies that all layers or other windows that attempt to render above that pixel during application lifetime must be part of the same render-level technology.","pos":[1274,1443]},{"content":"Attempting to render <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> pixels over <ph id=\"ph2\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> leads to undesirable results, and is disallowed as much as possible through the interoperation <ph id=\"ph3\">[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]</ph>.","pos":[1444,1816],"source":" Attempting to render [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] pixels over [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] leads to undesirable results, and is disallowed as much as possible through the interoperation [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]."},{"pos":[1826,1841],"content":"Region Examples","linkify":"Region Examples","nodes":[{"content":"Region Examples","pos":[0,15]}]},{"content":"The following illustration shows an application that mixes <ph id=\"ph1\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph>, <ph id=\"ph2\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph>, and <ph id=\"ph3\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>.","pos":[1845,2134],"source":"The following illustration shows an application that mixes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)], [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)], and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]."},{"content":"Each technology uses its own separate, non-overlapping set of pixels, and there are no region issues.","pos":[2135,2236]},{"pos":[2243,2374],"content":"<bpt id=\"p1\">![</bpt>A window that does not have airspace issues<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/migrationinteroparchitectarticle01.png \"</bpt>MigrationInteropArchitectArticle01<ept id=\"p2\">\")</ept>","source":"![A window that does not have airspace issues](./media/migrationinteroparchitectarticle01.png \"MigrationInteropArchitectArticle01\")"},{"content":"Suppose that this application uses the mouse pointer position to create an animation that attempts to render over any of these three regions.","pos":[2381,2522]},{"content":"No matter which technology was responsible for the animation itself, that technology would violate the region of the other two.","pos":[2523,2650]},{"content":"The following illustration shows an attempt to render a WPF circle over a Win32 region.","pos":[2651,2738]},{"pos":[2745,2848],"content":"<bpt id=\"p1\">![</bpt>Interop diagram<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/migrationinteroparchitectarticle02.png \"</bpt>MigrationInteropArchitectArticle02<ept id=\"p2\">\")</ept>","source":"![Interop diagram](./media/migrationinteroparchitectarticle02.png \"MigrationInteropArchitectArticle02\")"},{"content":"Another violation is if you try to use transparency/alpha blending between different technologies.","pos":[2855,2953]},{"content":"In the following illustration, the <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> box violates the <ph id=\"ph2\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> and <ph id=\"ph3\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> regions.","pos":[2955,3243],"source":"  In the following illustration, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box violates the [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] and [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] regions."},{"content":"Because pixels in that <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> box are semi-transparent, they would have to be owned jointly by both <ph id=\"ph2\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> and <ph id=\"ph3\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, which is not possible.","pos":[3244,3596],"source":" Because pixels in that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] box are semi-transparent, they would have to be owned jointly by both [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], which is not possible."},{"content":"So this is another violation and cannot be built.","pos":[3598,3647]},{"pos":[3654,3757],"content":"<bpt id=\"p1\">![</bpt>Interop diagram<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/migrationinteroparchitectarticle03.png \"</bpt>MigrationInteropArchitectArticle03<ept id=\"p2\">\")</ept>","source":"![Interop diagram](./media/migrationinteroparchitectarticle03.png \"MigrationInteropArchitectArticle03\")"},{"content":"The previous three examples used rectangular regions, but different shapes are possible.","pos":[3764,3852]},{"content":"For example, a region can have a hole.","pos":[3854,3892]},{"content":"The following illustration shows a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> region with a rectangular hole this is the size of the <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> and <ph id=\"ph3\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> regions combined.","pos":[3893,4228],"source":" The following illustration shows a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] region with a rectangular hole this is the size of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] regions combined."},{"pos":[4235,4338],"content":"<bpt id=\"p1\">![</bpt>Interop diagram<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/migrationinteroparchitectarticle04.png \"</bpt>MigrationInteropArchitectArticle04<ept id=\"p2\">\")</ept>","source":"![Interop diagram](./media/migrationinteroparchitectarticle04.png \"MigrationInteropArchitectArticle04\")"},{"pos":[4345,4510],"content":"Regions can also be completely nonrectangular, or any shape describable by a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> HRGN (region).","source":"Regions can also be completely nonrectangular, or any shape describable by a [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HRGN (region)."},{"pos":[4517,4620],"content":"<bpt id=\"p1\">![</bpt>Interop diagram<ept id=\"p1\">]</ept><bpt id=\"p2\">(./media/migrationinteroparchitectarticle05.png \"</bpt>MigrationInteropArchitectArticle05<ept id=\"p2\">\")</ept>","source":"![Interop diagram](./media/migrationinteroparchitectarticle05.png \"MigrationInteropArchitectArticle05\")"},{"pos":[4629,4663],"content":"Transparency and Top-Level Windows","linkify":"Transparency and Top-Level Windows","nodes":[{"content":"Transparency and Top-Level Windows","pos":[0,34]}]},{"content":"The window manager in Windows only really processes <ph id=\"ph1\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> HWNDs.","pos":[4667,4799],"source":"The window manager in Windows only really processes [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] HWNDs."},{"content":"Therefore, every <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Windows.Window&gt;</ph> is an HWND.","pos":[4800,4939],"source":" Therefore, every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <xref:System.Windows.Window> is an HWND."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Window&gt;</ph> HWND must abide by the general rules for any HWND.","pos":[4940,5023],"source":" The <xref:System.Windows.Window> HWND must abide by the general rules for any HWND."},{"content":"Within that HWND, <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> code can do whatever the overall <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> <ph id=\"ph3\">[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]</ph> support.","pos":[5024,5335],"source":" Within that HWND, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] code can do whatever the overall [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] support."},{"content":"But for interactions with other HWNDs on the desktop, <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> must abide by <ph id=\"ph2\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> processing and rendering rules.","pos":[5336,5591],"source":" But for interactions with other HWNDs on the desktop, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] must abide by [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] processing and rendering rules."},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> supports non-rectangular windows by using <ph id=\"ph2\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> <ph id=\"ph3\">[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]</ph>—HRGNs for non-rectangular windows, and layered windows for a per-pixel alpha.","pos":[5593,5956],"source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports non-rectangular windows by using [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]—HRGNs for non-rectangular windows, and layered windows for a per-pixel alpha."},{"content":"Constant alpha and color keys are not supported.","pos":[5963,6011]},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> layered window capabilities vary by platform.","pos":[6013,6132],"source":"[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] layered window capabilities vary by platform."},{"content":"Layered windows can make the entire window translucent (semi-transparent) by specifying an alpha value to apply to every pixel in the window.","pos":[6139,6280]},{"content":"(<ph id=\"ph1\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> in fact supports per-pixel alpha, but this is very difficult to use in practical programs because in this mode you would need to draw any child HWND yourself, including dialogs and dropdowns).","pos":[6282,6549],"source":"  ([!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] in fact supports per-pixel alpha, but this is very difficult to use in practical programs because in this mode you would need to draw any child HWND yourself, including dialogs and dropdowns)."},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> supports HRGNs; however, there are no managed <ph id=\"ph2\">[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]</ph> for this functionality.","pos":[6556,6795],"source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports HRGNs; however, there are no managed [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] for this functionality."},{"content":"You can use platform invoke and <ph id=\"ph1\">&lt;xref:System.Windows.Interop.HwndSource&gt;</ph> to call the relevant <ph id=\"ph2\">[!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)]</ph> <ph id=\"ph3\">[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]</ph>.","pos":[6796,7052],"source":" You can use platform invoke and <xref:System.Windows.Interop.HwndSource> to call the relevant [!INCLUDE[TLA2#tla_win32](../../../../includes/tla2sharptla-win32-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Calling Native Functions from Managed Code<ept id=\"p1\">](/cpp/dotnet/calling-native-functions-from-managed-code)</ept>.","pos":[7053,7180],"source":" For more information, see [Calling Native Functions from Managed Code](/cpp/dotnet/calling-native-functions-from-managed-code)."},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> layered windows have different capabilities on different operating systems.","pos":[7187,7344],"source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows have different capabilities on different operating systems."},{"content":"This is because <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> uses <ph id=\"ph2\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> to render, and layered windows were primarily designed for <ph id=\"ph3\">[!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)]</ph> rendering, not <ph id=\"ph4\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> rendering.","pos":[7345,7738],"source":" This is because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] to render, and layered windows were primarily designed for [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] rendering, not [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] rendering."},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> supports hardware accelerated layered windows on <ph id=\"ph2\">[!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)]</ph> and later.","pos":[7748,7967],"source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports hardware accelerated layered windows on [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] and later."},{"content":"Hardware accelerated layered windows on <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)]</ph> require support from <ph id=\"ph2\">[!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)]</ph>, so the capabilities will depend on the version of <ph id=\"ph3\">[!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)]</ph> on that machine.","pos":[7968,8302],"source":" Hardware accelerated layered windows on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)] require support from [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)], so the capabilities will depend on the version of [!INCLUDE[TLA#tla_dx](../../../../includes/tlasharptla-dx-md.md)] on that machine."},{"pos":[8312,8636],"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> does not support transparency color keys, because <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> cannot guarantee to render the exact color you requested, particularly when rendering is hardware-accelerated.","source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] does not support transparency color keys, because [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] cannot guarantee to render the exact color you requested, particularly when rendering is hardware-accelerated."},{"content":"If your application is running on <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)]</ph>, layered windows on top of <ph id=\"ph2\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> surfaces flicker when the <ph id=\"ph3\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> application renders.","pos":[8646,8963],"source":"If your application is running on [!INCLUDE[TLA2#tla_winxp](../../../../includes/tla2sharptla-winxp-md.md)], layered windows on top of [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] surfaces flicker when the [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] application renders."},{"content":"(The actual rendering sequence is that <ph id=\"ph1\">[!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)]</ph> hides the layered window, then <ph id=\"ph2\">[!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)]</ph> draws, and then <ph id=\"ph3\">[!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)]</ph> puts the layered window back).","pos":[8965,9285],"source":"  (The actual rendering sequence is that [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] hides the layered window, then [!INCLUDE[TLA2#tla_dx](../../../../includes/tla2sharptla-dx-md.md)] draws, and then [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] puts the layered window back)."},{"content":"Non-<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> layered windows also have this limitation.","pos":[9287,9415],"source":"  Non-[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] layered windows also have this limitation."},{"pos":[9424,9432],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[9436,9499],"content":"<bpt id=\"p1\">[</bpt>WPF and Win32 Interoperation<ept id=\"p1\">](wpf-and-win32-interoperation.md)</ept>","source":"[WPF and Win32 Interoperation](wpf-and-win32-interoperation.md)"},{"pos":[9502,9590],"content":"<bpt id=\"p1\">[</bpt>Walkthrough: Hosting a WPF Clock in Win32<ept id=\"p1\">](walkthrough-hosting-a-wpf-clock-in-win32.md)</ept>","source":"[Walkthrough: Hosting a WPF Clock in Win32](walkthrough-hosting-a-wpf-clock-in-win32.md)"},{"pos":[9593,9656],"content":"<bpt id=\"p1\">[</bpt>Hosting Win32 Content in WPF<ept id=\"p1\">](hosting-win32-content-in-wpf.md)</ept>","source":"[Hosting Win32 Content in WPF](hosting-win32-content-in-wpf.md)"}]}