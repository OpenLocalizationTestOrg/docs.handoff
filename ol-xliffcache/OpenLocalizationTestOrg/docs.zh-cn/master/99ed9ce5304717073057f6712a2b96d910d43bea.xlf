<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="deploying-an-internet-information-services-hosted-wcf-service.md" source-language="en-US" target-language="zh-cn">
    <header>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-0a91294" tool-company="Microsoft" />
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">99ed9ce5304717073057f6712a2b96d910d43bea</xliffext:olfilehash>
      <xliffext:olfilepath xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">docs\framework\wcf\feature-details\deploying-an-internet-information-services-hosted-wcf-service.md</xliffext:olfilepath>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">net-med-mt</xliffext:oltranslationpriority>
      <xliffext:oltranslationtype xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">MT</xliffext:oltranslationtype>
      <xliffext:olskeletonhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">aa82dcaf20df2cda8f07b745e8a8c15cc5ec20f4</xliffext:olskeletonhash>
      <xliffext:olxliffhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">0f90d4ab5af1aba53281ea5c175c02eebe82f34d</xliffext:olxliffhash>
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve" restype="x-metadata">
          <source>Deploying an Internet Information Services-Hosted WCF Service</source>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>Deploying an Internet Information Services-Hosted WCF Service</source>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</source>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</source>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>Create a new IIS application, or reuse an existing ASP.NET application.</source>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>Create a .svc file for the WCF service.</source>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>Deploy the service implementation to the IIS application.</source>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>Configure the WCF service.</source>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>For a detailed walkthrough of creating an IIS-hosted WCF service, see <bpt id="p1">[</bpt>How to: Host a WCF Service in IIS<ept id="p1">](how-to-host-a-wcf-service-in-iis.md)</ept>.</source>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</source>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</source>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>The procedures for installing WCF (as part of the .NET Framework), ASP.NET, and IIS vary depending on your operating system.</source>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>For more information about installing WCF and the .NET Framework, see <bpt id="p1">[</bpt>Install the .NET Framework for developers<ept id="p1">](../../install/guide-for-developers.md)</ept>.</source>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>To install IIS on Windows 10, open <bpt id="p1">**</bpt>Programs and Features<ept id="p1">**</ept> in <bpt id="p2">**</bpt>Control Panel<ept id="p2">**</ept> and then select <bpt id="p3">**</bpt>Turn Windows features on or off<ept id="p3">**</ept>.</source>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>In <bpt id="p1">**</bpt>Windows Features<ept id="p1">**</ept>, select <bpt id="p2">**</bpt>Internet Information Services<ept id="p2">**</ept> and then choose <bpt id="p3">**</bpt>OK<ept id="p3">**</ept>.</source>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>Windows Features with IIS highlighted</source>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>Instructions for installing IIS on other operating systems can be found at <bpt id="p1">[</bpt>Install IIS on Windows Vista and Windows 7<ept id="p1">](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)</ept> and <bpt id="p2">[</bpt>Install IIS 8.5 on Windows Server 2012 R2<ept id="p2">](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2)</ept>.</source>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>The installation process for .NET Framework automatically registers WCF with IIS if IIS is already present on the machine.</source>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>If IIS is installed after the .NET Framework, an additional step is required to register WCF with IIS and ASP.NET.</source>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>You can do this as follows, depending on your operating system:</source>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>Windows 7 and Windows Server 2003: Use the <bpt id="p1">[</bpt>ServiceModel Registration Tool (ServiceModelReg.exe)<ept id="p1">](../../../../docs/framework/wcf/servicemodelreg-exe.md)</ept> tool to register WCF with IIS.</source>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>To use this tool, type <bpt id="p1">**</bpt>ServiceModelReg.exe /i /x<ept id="p1">**</ept> in the <bpt id="p2">[</bpt>Developer Command Prompt for Visual Studio<ept id="p2">](../../tools/developer-command-prompt-for-vs.md)</ept>.</source>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>Windows 7: Finally, you must verify that ASP.NET is configured to use the .NET Framework version 4 or later.</source>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>You do this by running the ASPNET_Regiis tool with the <ph id="ph1">`â€“i`</ph> option.</source>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>For more information, see <bpt id="p1">[</bpt>ASP.NET IIS Registration Tool<ept id="p1">](https://go.microsoft.com/fwlink/?LinkId=201186)</ept>.</source>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>Create a New IIS Application or Reuse an Existing ASP.NET Application</source>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>IIS-hosted WCF services must reside inside of an IIS application.</source>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source>You can create a new IIS application to host WCF services exclusively.</source>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>Alternatively, you can deploy an WCF service into an existing application that is already hosting <ph id="ph1">[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]</ph> content (such as .aspx pages and ASP.NET Web services [ASMX]).</source>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in <bpt id="p1">[</bpt>WCF Services and ASP.NET<ept id="p1">](wcf-services-and-aspnet.md)</ept>.</source>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>Note that <ph id="ph1">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]</ph> and later versions periodically restart an isolated object-oriented programming application.</source>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>The default value is 1740 minutes.</source>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>The maximum value supported is 71,582 minutes.</source>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>This restart can be disabled.</source>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>For more information about this property, see the <bpt id="p1">[</bpt>PeriodicRestartTime<ept id="p1">](https://go.microsoft.com/fwlink/?LinkId=109968)</ept>.</source>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>Create an .svc File for the WCF Service</source>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</source>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</source>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>A .svc file contains a WCF-specific processing directive (<bpt id="p1">[</bpt><ph id="ph1">\@</ph>ServiceHost<ept id="p1">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept>) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</source>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>The most common syntax for a .svc file is in the following statement.</source>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>It consists of the <bpt id="p1">[</bpt><ph id="ph1">\@</ph>ServiceHost<ept id="p1">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept> directive and a single attribute, <ph id="ph2">`Service`</ph>.</source>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>The value of the <ph id="ph1">`Service`</ph> attribute is the common language runtime (CLR) type name of the service implementation.</source>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>Using this directive is basically equivalent to creating a service host using the following code.</source>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</source>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>You can also use a custom <ph id="ph1">&lt;xref:System.ServiceModel.Activation.ServiceHostFactory&gt;</ph> to extend the directive for use with custom hosting solutions.</source>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <ph id="ph1">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> instances.</source>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>The managed WCF hosting infrastructure creates the necessary <ph id="ph1">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> instance dynamically when the first request is received for the .svc file.</source>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>The instance is not released until either it is closed explicitly by code or when the application is recycled.</source>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>For more information about the syntax for .svc files, see <bpt id="p1">[</bpt><ph id="ph1">\@</ph>ServiceHost<ept id="p1">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept>.</source>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>Deploy the Service Implementation to the IIS Application</source>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>WCF services hosted in IIS use the same dynamic compilation model as <ph id="ph1">[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]</ph>.</source>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>Just as with ASP.NET, you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</source>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>As a precompiled .dll file located in the global assembly cache (GAC) or in the applicationâ€™s \bin directory.</source>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>Precompiled binaries are not updated until a new version of the class library is deployed.</source>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>As uncompiled source files located in the applicationâ€™s \App_Code directory.</source>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>Source files located in this directory are dynamically required when processing the applicationâ€™s first request.</source>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source>Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</source>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source>As uncompiled code placed directly in the .svc file.</source>
        </trans-unit>
        <trans-unit id="159" translate="yes" xml:space="preserve">
          <source>Implementation code can also be located inline in the serviceâ€™s .svc file, after the <ph id="ph1">\@</ph>ServiceHost directive.</source>
        </trans-unit>
        <trans-unit id="160" translate="yes" xml:space="preserve">
          <source>Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</source>
        </trans-unit>
        <trans-unit id="161" translate="yes" xml:space="preserve">
          <source>For more information about the <ph id="ph1">[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]</ph> compilation model, see <bpt id="p1">[</bpt>ASP.NET Compilation Overview<ept id="p1">](https://go.microsoft.com/fwlink/?LinkId=94773)</ept>.</source>
        </trans-unit>
        <trans-unit id="162" translate="yes" xml:space="preserve">
          <source>Configure the WCF Service</source>
        </trans-unit>
        <trans-unit id="163" translate="yes" xml:space="preserve">
          <source>IIS-hosted WCF services store their configuration in the applications Web.config file.</source>
        </trans-unit>
        <trans-unit id="164" translate="yes" xml:space="preserve">
          <source>IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</source>
        </trans-unit>
        <trans-unit id="165" translate="yes" xml:space="preserve">
          <source>However, the following constraints are unique to the IIS hosting environment:</source>
        </trans-unit>
        <trans-unit id="166" translate="yes" xml:space="preserve">
          <source>Base addresses for IIS-hosted services.</source>
        </trans-unit>
        <trans-unit id="167" translate="yes" xml:space="preserve">
          <source>Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <ph id="ph1">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> constructor or by providing a <bpt id="p1">[</bpt><ph id="ph2">\&lt;</ph>host&gt;<ept id="p1">](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)</ept> element in the serviceâ€™s configuration.</source>
        </trans-unit>
        <trans-unit id="168" translate="yes" xml:space="preserve">
          <source>Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</source>
        </trans-unit>
        <trans-unit id="169" translate="yes" xml:space="preserve">
          <source>Endpoint Addresses for IIS-Hosted Services</source>
        </trans-unit>
        <trans-unit id="170" translate="yes" xml:space="preserve">
          <source>When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</source>
        </trans-unit>
        <trans-unit id="171" translate="yes" xml:space="preserve">
          <source>For example, if the base address of a WCF service is <ph id="ph1">`http://localhost/Application1/MyService.svc`</ph> with the following endpoint configuration:</source>
        </trans-unit>
        <trans-unit id="172" translate="yes" xml:space="preserve">
          <source>This provides an endpoint that can be reached at <ph id="ph1">`http://localhost/Application1/MyService.svc/anotherEndpoint`</ph>.</source>
        </trans-unit>
        <trans-unit id="173" translate="yes" xml:space="preserve">
          <source>Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at <ph id="ph1">`http://localhost/Application1/MyService.svc`</ph>, which is the base address.</source>
        </trans-unit>
        <trans-unit id="174" translate="yes" xml:space="preserve">
          <source>You must always use relative endpoint addresses for IIS-hosted service endpoints.</source>
        </trans-unit>
        <trans-unit id="175" translate="yes" xml:space="preserve">
          <source>Supplying a fully-qualified endpoint address (for example, <ph id="ph1">`http://localhost/MyService.svc`</ph>) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</source>
        </trans-unit>
        <trans-unit id="176" translate="yes" xml:space="preserve">
          <source>Using relative endpoint addresses for hosted services avoids these potential conflicts.</source>
        </trans-unit>
        <trans-unit id="177" translate="yes" xml:space="preserve">
          <source>Available Transports</source>
        </trans-unit>
        <trans-unit id="178" translate="yes" xml:space="preserve">
          <source>WCF services hosted in IIS 5.1 and <ph id="ph1">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]</ph> are restricted to using HTTP-based communication.</source>
        </trans-unit>
        <trans-unit id="179" translate="yes" xml:space="preserve">
          <source>On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</source>
        </trans-unit>
        <trans-unit id="180" translate="yes" xml:space="preserve">
          <source>For <ph id="ph1">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]</ph>, the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</source>
        </trans-unit>
        <trans-unit id="181" translate="yes" xml:space="preserve">
          <source>HTTP Transport Security</source>
        </trans-unit>
        <trans-unit id="182" translate="yes" xml:space="preserve">
          <source>IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</source>
        </trans-unit>
        <trans-unit id="183" translate="yes" xml:space="preserve">
          <source>The HTTP Transport Security settings on a hosted endpointâ€™s binding must match the transport security settings on the IIS virtual directory that contains it.</source>
        </trans-unit>
        <trans-unit id="184" translate="yes" xml:space="preserve">
          <source>For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</source>
        </trans-unit>
        <trans-unit id="185" translate="yes" xml:space="preserve">
          <source>Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</source>
        </trans-unit>
        <trans-unit id="186" translate="yes" xml:space="preserve">
          <source>See also</source>
        </trans-unit>
        <trans-unit id="187" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Hosting in Internet Information Services<ept id="p1">](hosting-in-internet-information-services.md)</ept></source>
        </trans-unit>
        <trans-unit id="188" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Internet Information Services Hosting Best Practices<ept id="p1">](internet-information-services-hosting-best-practices.md)</ept></source>
        </trans-unit>
        <trans-unit id="189" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Windows Server App Fabric Hosting Features<ept id="p1">](https://go.microsoft.com/fwlink/?LinkId=201276)</ept></source>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>