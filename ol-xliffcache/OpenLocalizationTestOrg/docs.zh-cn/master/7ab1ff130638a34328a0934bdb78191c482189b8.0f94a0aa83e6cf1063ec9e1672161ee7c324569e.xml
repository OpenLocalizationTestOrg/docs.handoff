{"content":"---\ntitle: \"Custom Binding Imperative | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 6e13bf96-5de0-4476-b646-5f150774418d\ncaps.latest.revision: 18\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Custom Binding Imperative\nThe sample demonstrates how to write imperative code to define and use custom bindings without using a configuration file or a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] generated client. This sample combines the features provided by the HTTP transport and the reliable session channel to create a reliable HTTP-based binding. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n On both the client and the service, a custom binding is created that contains two binding elements (Reliable Session and HTTP):  \n  \n```  \n  \nReliableSessionBindingElement reliableSession = new ReliableSessionBindingElement();  \nreliableSession.Ordered = true;  \n  \nHttpTransportBindingElement httpTransport = new HttpTransportBindingElement();  \nhttpTransport.AuthenticationScheme = System.Net.AuthenticationSchemes.Anonymous;  \nhttpTransport.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;  \n  \nCustomBinding binding = new CustomBinding(reliableSession, httpTransport);  \n  \n```  \n  \n On the service, the binding is used by adding an endpoint to the ServiceHost:  \n  \n```  \nserviceHost.AddServiceEndpoint(typeof(ICalculator), binding, \"\");  \n```  \n  \n On the client, the binding is used by a <xref:System.ServiceModel.ChannelFactory> to create a channel to the service:  \n  \n```  \nEndpointAddress address = new EndpointAddress(\"http://localhost:8000/servicemodelsamples/service\");  \nChannelFactory<ICalculator> channelFactory = new ChannelFactory<ICalculator>(binding, address);  \nICalculator channel = channelFactory.CreateChannel();  \n```  \n  \n This channel is then used to interact with the service:  \n  \n```  \n  \n// Call the Add service operation.  \ndouble value1 = 100.00D;  \ndouble value2 = 15.99D;  \ndouble result = channel.Add(value1, value2);  \nConsole.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result);  \n  \n```  \n  \n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```  \n  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Binding\\Custom\\Imperative`  \n  \n## See Also  \n [Custom Binding](http://msdn.microsoft.com/en-us/657e8143-beb0-472d-9cfe-ed1a19c2ab08)","nodes":[{"pos":[12,54],"content":"Custom Binding Imperative | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Custom Binding Imperative | Microsoft Docs","pos":[0,42]}]},{"pos":[353,378],"content":"Custom Binding Imperative","linkify":"Custom Binding Imperative","nodes":[{"content":"Custom Binding Imperative","pos":[0,25]}]},{"content":"The sample demonstrates how to write imperative code to define and use custom bindings without using a configuration file or a <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> generated client.","pos":[379,579],"source":"The sample demonstrates how to write imperative code to define and use custom bindings without using a configuration file or a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] generated client."},{"content":"This sample combines the features provided by the HTTP transport and the reliable session channel to create a reliable HTTP-based binding.","pos":[580,718]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept> that implements a calculator service.","pos":[719,868],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service."},{"pos":[876,983],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"On both the client and the service, a custom binding is created that contains two binding elements (Reliable Session and HTTP):","pos":[990,1117]},{"content":"On the service, the binding is used by adding an endpoint to the ServiceHost:","pos":[1593,1670]},{"content":"On the client, the binding is used by a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ChannelFactory&gt;</ph> to create a channel to the service:","pos":[1760,1877],"source":"On the client, the binding is used by a <xref:System.ServiceModel.ChannelFactory> to create a channel to the service:"},{"content":"This channel is then used to interact with the service:","pos":[2155,2210]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[2442,2547]},{"content":"Press ENTER in the client window to shut down the client.","pos":[2548,2605]},{"pos":[2792,2828],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2838,3033],"content":"Be sure you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3043,3252],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3262,3470],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[3478,3610],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3664,3990],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3991,4041]},{"pos":[4128,4136],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[4140,4226],"content":"<bpt id=\"p1\">[</bpt>Custom Binding<ept id=\"p1\">](http://msdn.microsoft.com/en-us/657e8143-beb0-472d-9cfe-ed1a19c2ab08)</ept>","source":"[Custom Binding](http://msdn.microsoft.com/en-us/657e8143-beb0-472d-9cfe-ed1a19c2ab08)"}]}