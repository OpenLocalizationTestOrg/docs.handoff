{"content":"---\ntitle: \"Encryption of Digital Signatures\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"encryption of digital signatures [WCF]\"\n  - \"digital signatures [WCF], encryption\"\n  - \"digital signatures [WCF]\"\nms.assetid: 0868866d-40b4-4341-8e42-eee3b7f15b69\n---\n# Encryption of Digital Signatures\nBy default, a message is signed and encrypted, and the signature is digitally encrypted. You can control this by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and then setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value. The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>. This process takes 10 to 40 percent longer than simply signing and encrypting. Disabling encryption of the signature, however, might allow an attacker to guess the contents of the message. This is possible because the signature element contains the hash code of the plain text of every signed part in the message. For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body. If the message is small, an attacker might be able to deduce the contents. Encrypting the signature reduces or eliminates this possibility.  \n  \n Therefore, disable encryption of the signature only when the value of the content is low, and the performance gain will be significant, for example, when sending large binary files that have no security implications.  \n  \n### To disable digital signing  \n  \n1.  Create a <xref:System.ServiceModel.Channels.CustomBinding>. For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).  \n  \n2.  Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.  \n  \n3.  Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.  \n  \n For more information about creating custom bindings, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md). For more information about creating a custom binding for a specific authentication mode, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).  \n  \n## See also\n\n- <xref:System.ServiceModel.Security.MessageProtectionOrder>\n- <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>\n- <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>\n- [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)\n- [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)\n- [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)\n","nodes":[{"pos":[4,257],"embed":true,"restype":"x-metadata","content":"title: \"Encryption of Digital Signatures\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"encryption of digital signatures [WCF]\"\n  - \"digital signatures [WCF], encryption\"\n  - \"digital signatures [WCF]\"\nms.assetid: 0868866d-40b4-4341-8e42-eee3b7f15b69","nodes":[{"content":"Encryption of Digital Signatures","nodes":[{"pos":[0,32],"content":"Encryption of Digital Signatures","nodes":[{"content":"Encryption of Digital Signatures","pos":[0,32]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[264,296],"content":"Encryption of Digital Signatures","linkify":"Encryption of Digital Signatures","nodes":[{"content":"Encryption of Digital Signatures","pos":[0,32]}]},{"content":"By default, a message is signed and encrypted, and the signature is digitally encrypted.","pos":[297,385]},{"content":"You can control this by creating a custom binding with an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement&gt;</ph> or the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> and then setting the <ph id=\"ph3\">`MessageProtectionOrder`</ph> property of either class to a <ph id=\"ph4\">&lt;xref:System.ServiceModel.Security.MessageProtectionOrder&gt;</ph> enumeration value.","pos":[386,757],"source":" You can control this by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and then setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value."},{"content":"The default is <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature&gt;</ph>.","pos":[758,869],"source":" The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>."},{"content":"This process takes 10 to 40 percent longer than simply signing and encrypting.","pos":[870,948]},{"content":"Disabling encryption of the signature, however, might allow an attacker to guess the contents of the message.","pos":[949,1058]},{"content":"This is possible because the signature element contains the hash code of the plain text of every signed part in the message.","pos":[1059,1183]},{"content":"For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body.","pos":[1184,1317]},{"content":"If the message is small, an attacker might be able to deduce the contents.","pos":[1318,1392]},{"content":"Encrypting the signature reduces or eliminates this possibility.","pos":[1393,1457]},{"content":"Therefore, disable encryption of the signature only when the value of the content is low, and the performance gain will be significant, for example, when sending large binary files that have no security implications.","pos":[1464,1680]},{"pos":[1690,1716],"content":"To disable digital signing","linkify":"To disable digital signing","nodes":[{"content":"To disable digital signing","pos":[0,26]}]},{"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.CustomBinding&gt;</ph>.","pos":[1726,1785],"source":"Create a <xref:System.ServiceModel.Channels.CustomBinding>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>.","pos":[1786,1994],"source":" For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)."},{"pos":[2004,2186],"content":"Add either an <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement&gt;</ph> or a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> to the binding collection.","source":"Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection."},{"pos":[2196,2641],"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt&gt;</ph>, or set the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType&gt;</ph> property to <ph id=\"ph4\">&lt;xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt&gt;</ph>.","source":"Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>."},{"content":"For more information about creating custom bindings, see <bpt id=\"p1\">[</bpt>Creating User-Defined Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)</ept>.","pos":[2648,2814],"source":"For more information about creating custom bindings, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)."},{"content":"For more information about creating a custom binding for a specific authentication mode, see <bpt id=\"p1\">[</bpt>How to: Create a SecurityBindingElement for a Specified Authentication Mode<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)</ept>.","pos":[2815,3112],"source":" For more information about creating a custom binding for a specific authentication mode, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)."},{"pos":[3121,3129],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3335,3516],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>","source":"[How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)"},{"pos":[3519,3627],"content":"<bpt id=\"p1\">[</bpt>Creating User-Defined Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)</ept>","source":"[Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)"},{"pos":[3630,3833],"content":"<bpt id=\"p1\">[</bpt>How to: Create a SecurityBindingElement for a Specified Authentication Mode<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)</ept>","source":"[How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)"}]}