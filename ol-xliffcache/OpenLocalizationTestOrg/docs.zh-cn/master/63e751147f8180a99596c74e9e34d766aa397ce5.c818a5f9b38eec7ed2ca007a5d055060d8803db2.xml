{"content":"---\ntitle: \"How to: Implement User Login with Client Application Services | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"validating users [client application services]\"\n  - \"validation [.NET Framework], client application services\"\n  - \"client application services, authenticate users\"\nms.assetid: 5431a671-eb02-4e18-a651-24764fccec9a\ncaps.latest.revision: 11\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# How to: Implement User Login with Client Application Services\nYou can use client application services to validate users through an existing [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] profile service. For information about how to set up the [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] profile service, see [Using Forms Authentication with Microsoft Ajax](http://msdn.microsoft.com/library/c50f7dc5-323c-4c63-b4f3-96edfc1e815e).  \n  \n The following procedures describe how to validate users through the authentication service when your application is configured to use one of the client authentication service providers. For more information, see [How to: Configure Client Application Services](../../../docs/framework/common-client-technologies/how-to-configure-client-application-services.md).  \n  \n You will typically perform all validation through the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method. This method manages the interaction with the authentication service through the configured authentication provider. For more information, see [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md).  \n  \n The forms authentication procedures require access to a running [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] authentication service. For guidance on end-to-end testing of client application services features, see [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md).  \n  \n### To authenticate a user with forms authentication using a membership credentials provider  \n  \n1.  Implement the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider> interface. The following code example shows a <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A?displayProperty=fullName> implementation for a login dialog box class derived from  <xref:System.Windows.Forms.Form?displayProperty=fullName>. This dialog box has text boxes for user name and password and a \"remember me\" check box. When the client authentication provider calls the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A> method, the form is displayed. When the user fills in the information in the login dialog box and clicks OK, the specified values are returned in a new <xref:System.Web.ClientServices.Providers.ClientFormsAuthenticationCredentials> object.  \n  \n     [!code-csharp[ClientApplicationServices#210](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Login.cs#210)]\n     [!code-vb[ClientApplicationServices#210](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Login.vb#210)]  \n  \n2.  Call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method and pass in empty strings as the parameter values. When you specify empty strings, this method internally calls the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A> method for the credentials provider configured for your application. The following code example calls this method to restrict access to an entire Windows Forms application. You can add this code to a <xref:System.Windows.Forms.Form.Load?displayProperty=fullName> handler.  \n  \n     [!code-csharp[ClientApplicationServices#317](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Class1.cs#317)]\n     [!code-vb[ClientApplicationServices#317](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Class1.vb#317)]  \n  \n### To authenticate a user with forms authentication without using a membership credentials provider  \n  \n-   Call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method and pass in user name and password values retrieved from the user.  \n  \n     [!code-csharp[ClientApplicationServices#318](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Class1.cs#318)]\n     [!code-vb[ClientApplicationServices#318](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Class1.vb#318)]  \n  \n### To authenticate a user with Windows authentication  \n  \n-   Call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method and pass empty strings for the parameters. This method call will always return `true` and will add a cookie to the user's cookie cache that contains the Windows identity.  \n  \n     [!code-csharp[ClientApplicationServices#319](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Class1.cs#319)]\n     [!code-vb[ClientApplicationServices#319](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Class1.vb#319)]  \n  \n## Robust Programming  \n The example code in this topic demonstrates the simplest usages of authentication in a Windows client application. When you call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method with client application services and forms authentication, however, your code can throw a <xref:System.Net.WebException>. This indicates that the authentication service is unavailable. For an example of how to handle this exception, see [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md).  \n  \n## See Also  \n [Client Application Services](../../../docs/framework/common-client-technologies/client-application-services.md)   \n [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md)   \n [How to: Configure Client Application Services](../../../docs/framework/common-client-technologies/how-to-configure-client-application-services.md)   \n [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)   \n [Using Forms Authentication with Microsoft Ajax](http://msdn.microsoft.com/library/c50f7dc5-323c-4c63-b4f3-96edfc1e815e)","nodes":[{"pos":[4,583],"embed":true,"restype":"x-metadata","content":"title: \"How to: Implement User Login with Client Application Services | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"validating users [client application services]\"\n  - \"validation [.NET Framework], client application services\"\n  - \"client application services, authenticate users\"\nms.assetid: 5431a671-eb02-4e18-a651-24764fccec9a\ncaps.latest.revision: 11\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"","nodes":[{"content":"How to: Implement User Login with Client Application Services | Microsoft Docs","nodes":[{"pos":[0,78],"content":"How to: Implement User Login with Client Application Services | Microsoft Docs","nodes":[{"content":"How to: Implement User Login with Client Application Services | Microsoft Docs","pos":[0,78]}]}],"path":["title"]}],"yml":true},{"pos":[590,651],"content":"How to: Implement User Login with Client Application Services","linkify":"How to: Implement User Login with Client Application Services","nodes":[{"content":"How to: Implement User Login with Client Application Services","pos":[0,61]}]},{"content":"You can use client application services to validate users through an existing <ph id=\"ph1\">[!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)]</ph> profile service.","pos":[652,821],"source":"You can use client application services to validate users through an existing [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] profile service."},{"content":"For information about how to set up the <ph id=\"ph1\">[!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)]</ph> profile service, see <bpt id=\"p1\">[</bpt>Using Forms Authentication with Microsoft Ajax<ept id=\"p1\">](http://msdn.microsoft.com/library/c50f7dc5-323c-4c63-b4f3-96edfc1e815e)</ept>.","pos":[822,1079],"source":" For information about how to set up the [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] profile service, see [Using Forms Authentication with Microsoft Ajax](http://msdn.microsoft.com/library/c50f7dc5-323c-4c63-b4f3-96edfc1e815e)."},{"content":"The following procedures describe how to validate users through the authentication service when your application is configured to use one of the client authentication service providers.","pos":[1086,1271]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Configure Client Application Services<ept id=\"p1\">](../../../docs/framework/common-client-technologies/how-to-configure-client-application-services.md)</ept>.","pos":[1272,1446],"source":" For more information, see [How to: Configure Client Application Services](../../../docs/framework/common-client-technologies/how-to-configure-client-application-services.md)."},{"content":"You will typically perform all validation through the <ph id=\"ph1\">`static`</ph> <ph id=\"ph2\">&lt;xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName&gt;</ph> method.","pos":[1453,1602],"source":"You will typically perform all validation through the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method."},{"content":"This method manages the interaction with the authentication service through the configured authentication provider.","pos":[1603,1718]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Client Application Services Overview<ept id=\"p1\">](../../../docs/framework/common-client-technologies/client-application-services-overview.md)</ept>.","pos":[1719,1876],"source":" For more information, see [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md)."},{"content":"The forms authentication procedures require access to a running <ph id=\"ph1\">[!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)]</ph> authentication service.","pos":[1883,2045],"source":"The forms authentication procedures require access to a running [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] authentication service."},{"content":"For guidance on end-to-end testing of client application services features, see <bpt id=\"p1\">[</bpt>Walkthrough: Using Client Application Services<ept id=\"p1\">](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)</ept>.","pos":[2046,2276],"source":" For guidance on end-to-end testing of client application services features, see [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)."},{"pos":[2286,2374],"content":"To authenticate a user with forms authentication using a membership credentials provider","linkify":"To authenticate a user with forms authentication using a membership credentials provider","nodes":[{"content":"To authenticate a user with forms authentication using a membership credentials provider","pos":[0,88]}]},{"content":"Implement the <ph id=\"ph1\">&lt;xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider&gt;</ph> interface.","pos":[2384,2497],"source":"Implement the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider> interface."},{"content":"The following code example shows a <ph id=\"ph1\">&lt;xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A?displayProperty=fullName&gt;</ph> implementation for a login dialog box class derived from  <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Form?displayProperty=fullName&gt;</ph>.","pos":[2498,2781],"source":" The following code example shows a <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A?displayProperty=fullName> implementation for a login dialog box class derived from  <xref:System.Windows.Forms.Form?displayProperty=fullName>."},{"content":"This dialog box has text boxes for user name and password and a \"remember me\" check box.","pos":[2782,2870]},{"content":"When the client authentication provider calls the <ph id=\"ph1\">&lt;xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A&gt;</ph> method, the form is displayed.","pos":[2871,3058],"source":" When the client authentication provider calls the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A> method, the form is displayed."},{"content":"When the user fills in the information in the login dialog box and clicks OK, the specified values are returned in a new <ph id=\"ph1\">&lt;xref:System.Web.ClientServices.Providers.ClientFormsAuthenticationCredentials&gt;</ph> object.","pos":[3059,3267],"source":" When the user fills in the information in the login dialog box and clicks OK, the specified values are returned in a new <xref:System.Web.ClientServices.Providers.ClientFormsAuthenticationCredentials> object."},{"pos":[3278,3569],"content":"[!code-csharp[ClientApplicationServices#210](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Login.cs#210)]\n [!code-vb[ClientApplicationServices#210](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Login.vb#210)]","leadings":["","    "],"nodes":[]},{"content":"Call the <ph id=\"ph1\">`static`</ph> <ph id=\"ph2\">&lt;xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName&gt;</ph> method and pass in empty strings as the parameter values.","pos":[3579,3733],"source":"Call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method and pass in empty strings as the parameter values."},{"content":"When you specify empty strings, this method internally calls the <ph id=\"ph1\">&lt;xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A&gt;</ph> method for the credentials provider configured for your application.","pos":[3734,3974],"source":" When you specify empty strings, this method internally calls the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider.GetCredentials%2A> method for the credentials provider configured for your application."},{"content":"The following code example calls this method to restrict access to an entire Windows Forms application.","pos":[3975,4078]},{"content":"You can add this code to a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Form.Load?displayProperty=fullName&gt;</ph> handler.","pos":[4079,4177],"source":" You can add this code to a <xref:System.Windows.Forms.Form.Load?displayProperty=fullName> handler."},{"pos":[4188,4481],"content":"[!code-csharp[ClientApplicationServices#317](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Class1.cs#317)]\n [!code-vb[ClientApplicationServices#317](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Class1.vb#317)]","leadings":["","    "],"nodes":[]},{"pos":[4491,4587],"content":"To authenticate a user with forms authentication without using a membership credentials provider","linkify":"To authenticate a user with forms authentication without using a membership credentials provider","nodes":[{"content":"To authenticate a user with forms authentication without using a membership credentials provider","pos":[0,96]}]},{"pos":[4597,4767],"content":"Call the <ph id=\"ph1\">`static`</ph> <ph id=\"ph2\">&lt;xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName&gt;</ph> method and pass in user name and password values retrieved from the user.","source":"Call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method and pass in user name and password values retrieved from the user."},{"pos":[4778,5071],"content":"[!code-csharp[ClientApplicationServices#318](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Class1.cs#318)]\n [!code-vb[ClientApplicationServices#318](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Class1.vb#318)]","leadings":["","    "],"nodes":[]},{"pos":[5081,5131],"content":"To authenticate a user with Windows authentication","linkify":"To authenticate a user with Windows authentication","nodes":[{"content":"To authenticate a user with Windows authentication","pos":[0,50]}]},{"content":"Call the <ph id=\"ph1\">`static`</ph> <ph id=\"ph2\">&lt;xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName&gt;</ph> method and pass empty strings for the parameters.","pos":[5141,5287],"source":"Call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method and pass empty strings for the parameters."},{"content":"This method call will always return <ph id=\"ph1\">`true`</ph> and will add a cookie to the user's cookie cache that contains the Windows identity.","pos":[5288,5415],"source":" This method call will always return `true` and will add a cookie to the user's cookie cache that contains the Windows identity."},{"pos":[5426,5719],"content":"[!code-csharp[ClientApplicationServices#319](../../../samples/snippets/csharp/VS_Snippets_Winforms/ClientApplicationServices/CS/Class1.cs#319)]\n [!code-vb[ClientApplicationServices#319](../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ClientApplicationServices/VB/Class1.vb#319)]","leadings":["","    "],"nodes":[]},{"pos":[5728,5746],"content":"Robust Programming","linkify":"Robust Programming","nodes":[{"content":"Robust Programming","pos":[0,18]}]},{"content":"The example code in this topic demonstrates the simplest usages of authentication in a Windows client application.","pos":[5750,5864]},{"content":"When you call the <ph id=\"ph1\">`static`</ph> <ph id=\"ph2\">&lt;xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName&gt;</ph> method with client application services and forms authentication, however, your code can throw a <ph id=\"ph3\">&lt;xref:System.Net.WebException&gt;</ph>.","pos":[5865,6099],"source":" When you call the `static` <xref:System.Web.Security.Membership.ValidateUser%2A?displayProperty=fullName> method with client application services and forms authentication, however, your code can throw a <xref:System.Net.WebException>."},{"content":"This indicates that the authentication service is unavailable.","pos":[6100,6162]},{"content":"For an example of how to handle this exception, see <bpt id=\"p1\">[</bpt>Walkthrough: Using Client Application Services<ept id=\"p1\">](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)</ept>.","pos":[6163,6365],"source":" For an example of how to handle this exception, see [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)."},{"pos":[6374,6382],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Client Application Services<ept id=\"p1\">](../../../docs/framework/common-client-technologies/client-application-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[6386,6499],"source":"[Client Application Services](../../../docs/framework/common-client-technologies/client-application-services.md) "},{"content":"<bpt id=\"p1\">[</bpt>Client Application Services Overview<ept id=\"p1\">](../../../docs/framework/common-client-technologies/client-application-services-overview.md)</ept><ph id=\"ph1\"> </ph>","pos":[6503,6634],"source":"[Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Configure Client Application Services<ept id=\"p1\">](../../../docs/framework/common-client-technologies/how-to-configure-client-application-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[6638,6786],"source":"[How to: Configure Client Application Services](../../../docs/framework/common-client-technologies/how-to-configure-client-application-services.md) "},{"content":"<bpt id=\"p1\">[</bpt>Walkthrough: Using Client Application Services<ept id=\"p1\">](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[6790,6940],"source":"[Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md) "},{"content":"<bpt id=\"p1\">[</bpt>Using Forms Authentication with Microsoft Ajax<ept id=\"p1\">](http://msdn.microsoft.com/library/c50f7dc5-323c-4c63-b4f3-96edfc1e815e)</ept>","pos":[6944,7064],"source":"[Using Forms Authentication with Microsoft Ajax](http://msdn.microsoft.com/library/c50f7dc5-323c-4c63-b4f3-96edfc1e815e)"}]}