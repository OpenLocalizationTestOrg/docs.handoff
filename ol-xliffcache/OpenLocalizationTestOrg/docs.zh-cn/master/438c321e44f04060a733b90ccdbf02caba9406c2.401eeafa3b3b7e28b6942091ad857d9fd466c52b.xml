{"content":"---\ntitle: \"Multiple Endpoints\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Multiple EndPoints\"\nms.assetid: 8f0c2e1f-9aee-41c2-8301-c72b7f664412\n---\n# Multiple Endpoints\nThe Multiple Endpoints sample demonstrates how to configure multiple endpoints on a service and how to communicate with each endpoint from a client. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md). The service configuration has been modified to define two endpoints that support the `ICalculator` contract, but each at a different address using a different binding. The client configuration and code have been modified to communicate with both of the service endpoints.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The service Web.config file has been modified to define two endpoints, each supporting the same `ICalculator` contract, but at different addresses using different bindings. The first endpoint is defined at the base address using a `basicHttpBinding` binding, which does not have security enabled. The second endpoint is defined at {baseaddress}/secure using a `wsHttpBinding` binding, which is secure by default, using WS-Security with Windows authentication.  \n  \n```xml  \n<service   \n    name=\"Microsoft.ServiceModel.Samples.CalculatorService\"  \n    behaviorConfiguration=\"CalculatorServiceBehavior\">  \n  <!-- This endpoint is exposed at the base address provided by host:  \n       http://localhost/servicemodelsamples/service.svc  -->  \n  <endpoint address=\"\"  \n            binding=\"basicHttpBinding\"  \n            contract=\"Microsoft.ServiceModel.Samples.ICalculator\" />  \n  <!-- secure endpoint exposed at {base address}/secure:  \n       http://localhost/servicemodelsamples/service.svc/secure -->  \n  <endpoint address=\"secure\"  \n            binding=\"wsHttpBinding\"  \n            contract=\"Microsoft.ServiceModel.Samples.ICalculator\" />  \n  ...  \n</service>  \n```  \n  \n Both endpoints are also configured on the client. These endpoints are given names so that the caller can pass the desired endpoint name into the constructor of the client.  \n  \n```xml  \n<client>  \n  <!-- Passing \"basic\" into the constructor of the CalculatorClient  \n       class selects this endpoint.-->  \n  <endpoint name=\"basic\"  \n            address=\"http://localhost/servicemodelsamples/service.svc\"   \n            binding=\"basicHttpBinding\"   \n            contract=\"Microsoft.ServiceModel.Samples.ICalculator\" />  \n  <!-- Passing \"secure\" into the constructor of the CalculatorClient  \n       class selects this endpoint.-->  \n  <endpoint name=\"secure\"  \n            address=\"http://localhost/servicemodelsamples/service.svc/secure\"   \n            binding=\"wsHttpBinding\"   \n            contract=\"Microsoft.ServiceModel.Samples.ICalculator\" />  \n</client>  \n```  \n  \n The client uses both endpoints as shown in the following code.  \n  \n```csharp  \nstatic void Main()  \n{  \n    // Create a client to the basic endpoint configuration.  \n    CalculatorClient client = new CalculatorClient(\"basic\");  \n    Console.WriteLine(\"Communicate with basic endpoint.\");  \n    // call operations  \n    DoCalculations(client);  \n  \n    // Close the client and release resources.  \n    client.Close();  \n  \n    // Create a client to the secure endpoint configuration.  \n    client = new CalculatorClient(\"secure\");  \n    Console.WriteLine(\"Communicate with secure endpoint.\");  \n    // Call operations.  \n    DoCalculations(client);  \n  \n    // Close the client and release resources.  \n    client.Close();  \n  \n    Console.WriteLine();  \n    Console.WriteLine(\"Press <ENTER> to terminate client.\");  \n    Console.ReadLine();  \n}  \n```  \n  \n When you run the client, interactions with both endpoints are displayed.  \n  \n```  \nCommunicate with basic endpoint.  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \nCommunicate with secure endpoint.  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\MultipleEndpoints`  \n","nodes":[{"pos":[4,149],"embed":true,"restype":"x-metadata","content":"title: \"Multiple Endpoints\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"Multiple EndPoints\"\nms.assetid: 8f0c2e1f-9aee-41c2-8301-c72b7f664412","nodes":[{"content":"Multiple Endpoints","nodes":[{"pos":[0,18],"content":"Multiple Endpoints","nodes":[{"content":"Multiple Endpoints","pos":[0,18]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[156,174],"content":"Multiple Endpoints","linkify":"Multiple Endpoints","nodes":[{"content":"Multiple Endpoints","pos":[0,18]}]},{"content":"The Multiple Endpoints sample demonstrates how to configure multiple endpoints on a service and how to communicate with each endpoint from a client.","pos":[175,323]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>.","pos":[324,436],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md)."},{"content":"The service configuration has been modified to define two endpoints that support the <ph id=\"ph1\">`ICalculator`</ph> contract, but each at a different address using a different binding.","pos":[437,604],"source":" The service configuration has been modified to define two endpoints that support the `ICalculator` contract, but each at a different address using a different binding."},{"content":"The client configuration and code have been modified to communicate with both of the service endpoints.","pos":[605,708]},{"pos":[716,823],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The service Web.config file has been modified to define two endpoints, each supporting the same <ph id=\"ph1\">`ICalculator`</ph> contract, but at different addresses using different bindings.","pos":[830,1002],"source":"The service Web.config file has been modified to define two endpoints, each supporting the same `ICalculator` contract, but at different addresses using different bindings."},{"content":"The first endpoint is defined at the base address using a <ph id=\"ph1\">`basicHttpBinding`</ph> binding, which does not have security enabled.","pos":[1003,1126],"source":" The first endpoint is defined at the base address using a `basicHttpBinding` binding, which does not have security enabled."},{"content":"The second endpoint is defined at {baseaddress}/secure using a <ph id=\"ph1\">`wsHttpBinding`</ph> binding, which is secure by default, using WS-Security with Windows authentication.","pos":[1127,1289],"source":" The second endpoint is defined at {baseaddress}/secure using a `wsHttpBinding` binding, which is secure by default, using WS-Security with Windows authentication."},{"content":"Both endpoints are also configured on the client.","pos":[2006,2055]},{"content":"These endpoints are given names so that the caller can pass the desired endpoint name into the constructor of the client.","pos":[2056,2177]},{"content":"The client uses both endpoints as shown in the following code.","pos":[2881,2943]},{"content":"When you run the client, interactions with both endpoints are displayed.","pos":[3739,3811]},{"pos":[4185,4221],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[4231,4430],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[4440,4649],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4659,4867],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[4875,5007],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5061,5371],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5372,5422]}]}