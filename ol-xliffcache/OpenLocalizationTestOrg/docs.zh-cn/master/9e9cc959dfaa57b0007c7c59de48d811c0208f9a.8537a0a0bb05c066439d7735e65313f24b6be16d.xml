{"content":"---\ntitle: \"Deploying an Internet Information Services-Hosted WCF Service | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7\ncaps.latest.revision: 30\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Deploying an Internet Information Services-Hosted WCF Service\nDeveloping and deploying a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] service that is hosted in Internet Information Services (IIS) consists of the following tasks:  \n  \n-   Ensure that IIS, ASP.NET, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], and the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] activation component are correctly installed and registered.  \n  \n-   Create a new IIS application, or reuse an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.  \n  \n-   Create a .svc file for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.  \n  \n-   Deploy the service implementation to the IIS application.  \n  \n-   Configure the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.  \n  \n For a detailed walkthrough of creating an IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).  \n  \n## Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], IIS, and ASP.NET must be installed for IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to function correctly. The procedures for installing [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (as part of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]), ASP.NET and IIS vary depending on the operating system version being used. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] installing [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], see [Microsoft .NET Framework 4 Web Installer](http://go.microsoft.com/fwlink/?LinkId=201185). Instructions for installing IIS can be found at [Installing IIS](http://go.microsoft.com/fwlink/?LinkId=201188).  \n  \n The installation process for the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] automatically registers [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS if IIS is already present on the machine. If IIS is installed after the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], an additional step is required to register [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]. You can do this as follows, depending on your operating system:  \n  \n-   [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)], Windows 7, and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS: To use this tool, type **ServiceModelReg.exe /i /x** in the Visual Studio command prompt. You can open this command prompt by clicking the start button, selecting **All Programs**, **Microsoft Visual Studio 2012**, **Visual Studio Tools**, and **Visual Studio Command Prompt**  \n  \n-   [!INCLUDE[wv](../../../../includes/wv-md.md)]: Install the Windows Communication Foundation Activation Components subcomponent of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]. To do this, in Control Panel, click **Add or Remove Programs** and then **Add\\/Remove Windows Components**. This activates the **Windows Component Wizard**.  \n  \n-   Windows 7:  \n  \n Finally you must verify that ASP.NET is configured to use the .NET Framework version 4. You do this by running the ASPNET_Regiis tool with the –i option. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][ASP.NET IIS Registration Tool](http://go.microsoft.com/fwlink/?LinkId=201186)  \n  \n## Create a New IIS Application or Reuse an Existing ASP.NET Application  \n IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services must reside inside of an IIS application. You can create a new IIS application to host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services exclusively. Alternatively, you can deploy an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service into an existing application that is already hosting [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] content (such as .aspx pages and ASP.NET Web services [ASMX]). [!INCLUDE[crabout](../../../../includes/crabout-md.md)] these options, see the \"Hosting WCF Side-by-Side with ASP.NET\" and \"Hosting WCF Services in ASP.NET Compatibility Mode\" sections in [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md).  \n  \n Note that [!INCLUDE[iis601](../../../../includes/iis601-md.md)] and later versions periodically restart an isolated object-oriented programming application. The default value is 1740 minutes. The maximum value supported is 71,582 minutes. This restart can be disabled. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] this property, see the [PeriodicRestartTime](http://go.microsoft.com/fwlink/?LinkId=109968).  \n  \n## Create an .svc File for the WCF Service  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS are represented as special content files (.svc files) inside the IIS application. This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files. A .svc file contains a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-specific processing directive ([@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure to activate hosted services in response to incoming messages. The most common syntax for a .svc file is in the following statement.  \n  \n```  \n<% @ServiceHost Service=\"MyNamespace.MyServiceImplementationTypeName\" %>  \n```  \n  \n It consists of the [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`. The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation. Using this directive is basically equivalent to creating a service host using the following code.  \n  \n```  \nnew ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );  \n```  \n  \n Additional hosting configuration, such as creating a list of base addresses for the service can also be done. You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions. The IIS applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances. The managed [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file. The instance is not released until either it is closed explicitly by code or when the application is recycled.  \n  \n [!INCLUDE[crabout](../../../../includes/crabout-md.md)] the syntax for .svc files, see [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).  \n  \n## Deploy the Service Implementation to the IIS Application  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS use the same dynamic compilation model as [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]. Just as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], you can deploy the implementation code for IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services in several ways at various locations, as follows:  \n  \n-   As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \\bin directory. Precompiled binaries are not updated until a new version of the class library is deployed.  \n  \n-   As un-compiled source files located in the application’s \\App_Code directory. Source files located in this directory are dynamically required when processing the application’s first request. Any changes to files in the \\App_Code directory cause the entire application to be recycled and recompiled when the next request is received.  \n  \n-   As un-compiled code placed directly in the .svc file. Implementation code can also be located inline in the service’s .svc file, after the @ServiceHost directive. Any changes to inline code cause the application to be recycled and recompiled when the next request is received.  \n  \n [!INCLUDE[crabout](../../../../includes/crabout-md.md)] the [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] compilation model, see [ASP.NET Compilation Overview](http://go.microsoft.com/fwlink/?LinkId=94773).  \n  \n## Configure the WCF Service  \n IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services store their configuration in the applications Web.config file. IIS-hosted services use the same configuration elements and syntax as [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted outside of IIS. However, the following constraints are unique to the IIS hosting environment:  \n  \n-   Base addresses for IIS-hosted services.  \n  \n-   Applications hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration. Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.  \n  \n### Endpoint Addresses for IIS-Hosted Services  \n When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service. For example, if the base address of a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service is http://localhost/Application1/MyService.svc with the following endpoint configuration.  \n  \n```  \n<endpoint address=\"anotherEndpoint\" .../>  \n```  \n  \n This provides an endpoint that can be reached at \"http://localhost/Application1/MyService.svc/anotherEndpoint\".  \n  \n Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at http://localhost/Application1/MyService.svc, which is the base address.  \n  \n```  \n<endpoint address=\"\" ... />  \n```  \n  \n You must always use relative endpoint addresses for IIS-hosted service endpoints. Supplying a fully-qualified endpoint address (for example, http://localhost/MyService.svc) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint. Using relative endpoint addresses for hosted services avoids these potential conflicts.  \n  \n### Available Transports  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS 5.1 and [!INCLUDE[iis601](../../../../includes/iis601-md.md)] are restricted to using HTTP-based communication. On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation. For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.  \n  \n### HTTP Transport Security  \n IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings. The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.  \n  \n For example, a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication. Unmatched combinations of IIS settings and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint settings result in an error during service activation.  \n  \n## See Also  \n [Hosting in Internet Information Services](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)   \n [Internet Information Services Hosting Best Practices](../../../../docs/framework/wcf/feature-details/internet-information-services-hosting-best-practices.md)   \n [Windows Server App Fabric Hosting Features](http://go.microsoft.com/fwlink/?LinkId=201276)","nodes":[{"pos":[12,90],"content":"Deploying an Internet Information Services-Hosted WCF Service | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Deploying an Internet Information Services-Hosted WCF Service | Microsoft Docs","pos":[0,78]}]},{"pos":[389,450],"content":"Deploying an Internet Information Services-Hosted WCF Service","linkify":"Deploying an Internet Information Services-Hosted WCF Service","nodes":[{"content":"Deploying an Internet Information Services-Hosted WCF Service","pos":[0,61]}]},{"pos":[451,628],"content":"Developing and deploying a <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> service that is hosted in Internet Information Services (IIS) consists of the following tasks:","source":"Developing and deploying a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] service that is hosted in Internet Information Services (IIS) consists of the following tasks:"},{"pos":[638,845],"content":"Ensure that IIS, ASP.NET, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>, and the <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> activation component are correctly installed and registered.","source":"Ensure that IIS, ASP.NET, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], and the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] activation component are correctly installed and registered."},{"pos":[855,976],"content":"Create a new IIS application, or reuse an existing <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> application.","source":"Create a new IIS application, or reuse an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application."},{"pos":[986,1077],"content":"Create a .svc file for the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service.","source":"Create a .svc file for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service."},{"content":"Deploy the service implementation to the IIS application.","pos":[1087,1144]},{"pos":[1154,1232],"content":"Configure the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service.","source":"Configure the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service."},{"pos":[1239,1481],"content":"For a detailed walkthrough of creating an IIS-hosted <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service, see <bpt id=\"p1\">[</bpt>How to: Host a WCF Service in IIS<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)</ept>.","source":"For a detailed walkthrough of creating an IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)."},{"pos":[1490,1561],"content":"Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered","linkify":"Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered","nodes":[{"content":"Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered","pos":[0,71]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>, IIS, and ASP.NET must be installed for IIS-hosted <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services to function correctly.","pos":[1565,1759],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], IIS, and ASP.NET must be installed for IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to function correctly."},{"content":"The procedures for installing <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> (as part of the <ph id=\"ph2\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph>), ASP.NET and IIS vary depending on the operating system version being used.","pos":[1760,2000],"source":" The procedures for installing [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (as part of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]), ASP.NET and IIS vary depending on the operating system version being used."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> installing <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> and the <ph id=\"ph3\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>Microsoft .NET Framework 4 Web Installer<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=201185)</ept>.","pos":[2001,2289],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] installing [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], see [Microsoft .NET Framework 4 Web Installer](http://go.microsoft.com/fwlink/?LinkId=201185)."},{"content":"Instructions for installing IIS can be found at <bpt id=\"p1\">[</bpt>Installing IIS<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=201188)</ept>.","pos":[2290,2402],"source":" Instructions for installing IIS can be found at [Installing IIS](http://go.microsoft.com/fwlink/?LinkId=201188)."},{"content":"The installation process for the <ph id=\"ph1\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph> automatically registers <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> with IIS if IIS is already present on the machine.","pos":[2409,2634],"source":"The installation process for the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] automatically registers [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS if IIS is already present on the machine."},{"content":"If IIS is installed after the <ph id=\"ph1\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph>, an additional step is required to register <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> with IIS and <ph id=\"ph3\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph>.","pos":[2635,2898],"source":" If IIS is installed after the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], an additional step is required to register [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]."},{"content":"You can do this as follows, depending on your operating system:","pos":[2899,2962]},{"content":"<ph id=\"ph1\">[!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]</ph>, Windows 7, and <ph id=\"ph2\">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]</ph>: Use the <bpt id=\"p1\">[</bpt>ServiceModel Registration Tool (ServiceModelReg.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodelreg-exe.md)</ept> tool to register <ph id=\"ph3\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> with IIS: To use this tool, type <bpt id=\"p2\">**</bpt>ServiceModelReg.exe /i /x<ept id=\"p2\">**</ept> in the Visual Studio command prompt.","pos":[2972,3387],"source":"[!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)], Windows 7, and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS: To use this tool, type **ServiceModelReg.exe /i /x** in the Visual Studio command prompt."},{"content":"You can open this command prompt by clicking the start button, selecting <bpt id=\"p1\">**</bpt>All Programs<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Microsoft Visual Studio 2012<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Visual Studio Tools<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>Visual Studio Command Prompt<ept id=\"p4\">**</ept>","pos":[3388,3574],"source":" You can open this command prompt by clicking the start button, selecting **All Programs**, **Microsoft Visual Studio 2012**, **Visual Studio Tools**, and **Visual Studio Command Prompt**"},{"content":"<ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>: Install the Windows Communication Foundation Activation Components subcomponent of the <ph id=\"ph2\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph>.","pos":[3584,3780],"source":"[!INCLUDE[wv](../../../../includes/wv-md.md)]: Install the Windows Communication Foundation Activation Components subcomponent of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]."},{"content":"To do this, in Control Panel, click <bpt id=\"p1\">**</bpt>Add or Remove Programs<ept id=\"p1\">**</ept> and then <bpt id=\"p2\">**</bpt>Add<ph id=\"ph1\">\\/</ph>Remove Windows Components<ept id=\"p2\">**</ept>.","pos":[3781,3888],"source":" To do this, in Control Panel, click **Add or Remove Programs** and then **Add\\/Remove Windows Components**."},{"content":"This activates the <bpt id=\"p1\">**</bpt>Windows Component Wizard<ept id=\"p1\">**</ept>.","pos":[3889,3937],"source":" This activates the **Windows Component Wizard**."},{"content":"Windows 7:","pos":[3947,3957]},{"content":"Finally you must verify that ASP.NET is configured to use the .NET Framework version 4.","pos":[3964,4051]},{"content":"You do this by running the ASPNET_Regiis tool with the –i option.","pos":[4052,4117]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>ASP.NET IIS Registration Tool<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=201186)</ept>","pos":[4118,4255],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][ASP.NET IIS Registration Tool](http://go.microsoft.com/fwlink/?LinkId=201186)"},{"pos":[4264,4333],"content":"Create a New IIS Application or Reuse an Existing ASP.NET Application","linkify":"Create a New IIS Application or Reuse an Existing ASP.NET Application","nodes":[{"content":"Create a New IIS Application or Reuse an Existing ASP.NET Application","pos":[0,69]}]},{"content":"IIS-hosted <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services must reside inside of an IIS application.","pos":[4337,4454],"source":"IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services must reside inside of an IIS application."},{"content":"You can create a new IIS application to host <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services exclusively.","pos":[4455,4577],"source":" You can create a new IIS application to host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services exclusively."},{"content":"Alternatively, you can deploy an <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service into an existing application that is already hosting <ph id=\"ph2\">[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]</ph> content (such as .aspx pages and ASP.NET Web services [ASMX]).","pos":[4578,4856],"source":" Alternatively, you can deploy an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service into an existing application that is already hosting [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] content (such as .aspx pages and ASP.NET Web services [ASMX])."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> these options, see the \"Hosting WCF Side-by-Side with ASP.NET\" and \"Hosting WCF Services in ASP.NET Compatibility Mode\" sections in <bpt id=\"p1\">[</bpt>WCF Services and ASP.NET<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)</ept>.","pos":[4857,5147],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] these options, see the \"Hosting WCF Side-by-Side with ASP.NET\" and \"Hosting WCF Services in ASP.NET Compatibility Mode\" sections in [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)."},{"content":"Note that <ph id=\"ph1\">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]</ph> and later versions periodically restart an isolated object-oriented programming application.","pos":[5154,5310],"source":"Note that [!INCLUDE[iis601](../../../../includes/iis601-md.md)] and later versions periodically restart an isolated object-oriented programming application."},{"content":"The default value is 1740 minutes.","pos":[5311,5345]},{"content":"The maximum value supported is 71,582 minutes.","pos":[5346,5392]},{"content":"This restart can be disabled.","pos":[5393,5422]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> this property, see the <bpt id=\"p1\">[</bpt>PeriodicRestartTime<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=109968)</ept>.","pos":[5423,5571],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] this property, see the [PeriodicRestartTime](http://go.microsoft.com/fwlink/?LinkId=109968)."},{"pos":[5580,5619],"content":"Create an .svc File for the WCF Service","linkify":"Create an .svc File for the WCF Service","nodes":[{"content":"Create an .svc File for the WCF Service","pos":[0,39]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services hosted in IIS are represented as special content files (.svc files) inside the IIS application.","pos":[5623,5783],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS are represented as special content files (.svc files) inside the IIS application."},{"content":"This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.","pos":[5784,5888]},{"content":"A .svc file contains a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>-specific processing directive (<bpt id=\"p1\">[</bpt><ph id=\"ph2\">@ServiceHost</ph><ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept>) that allows the <ph id=\"ph3\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> hosting infrastructure to activate hosted services in response to incoming messages.","pos":[5889,6255],"source":" A .svc file contains a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-specific processing directive ([@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure to activate hosted services in response to incoming messages."},{"content":"The most common syntax for a .svc file is in the following statement.","pos":[6256,6325]},{"content":"It consists of the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">@ServiceHost</ph><ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept> directive and a single attribute, <ph id=\"ph2\">`Service`</ph>.","pos":[6422,6584],"source":"It consists of the [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`."},{"content":"The value of the <ph id=\"ph1\">`Service`</ph> attribute is the common language runtime (CLR) type name of the service implementation.","pos":[6585,6699],"source":" The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation."},{"content":"Using this directive is basically equivalent to creating a service host using the following code.","pos":[6700,6797]},{"content":"Additional hosting configuration, such as creating a list of base addresses for the service can also be done.","pos":[6895,7004]},{"content":"You can also use a custom <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activation.ServiceHostFactory&gt;</ph> to extend the directive for use with custom hosting solutions.","pos":[7005,7150],"source":" You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions."},{"content":"The IIS applications that host <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services are not responsible for managing the creation and lifetime of <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> instances.","pos":[7151,7358],"source":" The IIS applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances."},{"content":"The managed <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> hosting infrastructure creates the necessary <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> instance dynamically when the first request is received for the .svc file.","pos":[7359,7585],"source":" The managed [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file."},{"content":"The instance is not released until either it is closed explicitly by code or when the application is recycled.","pos":[7586,7696]},{"pos":[7703,7889],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> the syntax for .svc files, see <bpt id=\"p1\">[</bpt><ph id=\"ph2\">@ServiceHost</ph><ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)</ept>.","source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] the syntax for .svc files, see [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)."},{"pos":[7898,7954],"content":"Deploy the Service Implementation to the IIS Application","linkify":"Deploy the Service Implementation to the IIS Application","nodes":[{"content":"Deploy the Service Implementation to the IIS Application","pos":[0,56]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services hosted in IIS use the same dynamic compilation model as <ph id=\"ph2\">[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]</ph>.","pos":[7958,8145],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS use the same dynamic compilation model as [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]."},{"content":"Just as with <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph>, you can deploy the implementation code for IIS-hosted <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services in several ways at various locations, as follows:","pos":[8146,8386],"source":" Just as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], you can deploy the implementation code for IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services in several ways at various locations, as follows:"},{"content":"As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \\bin directory.","pos":[8396,8505]},{"content":"Precompiled binaries are not updated until a new version of the class library is deployed.","pos":[8506,8596]},{"content":"As un-compiled source files located in the application’s \\App_Code directory.","pos":[8606,8683]},{"content":"Source files located in this directory are dynamically required when processing the application’s first request.","pos":[8684,8796]},{"content":"Any changes to files in the \\App_Code directory cause the entire application to be recycled and recompiled when the next request is received.","pos":[8797,8938]},{"content":"As un-compiled code placed directly in the .svc file.","pos":[8948,9001]},{"content":"Implementation code can also be located inline in the service’s .svc file, after the <ph id=\"ph1\">@ServiceHost</ph> directive.","pos":[9002,9110],"source":" Implementation code can also be located inline in the service’s .svc file, after the @ServiceHost directive."},{"content":"Any changes to inline code cause the application to be recycled and recompiled when the next request is received.","pos":[9111,9224]},{"pos":[9231,9457],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> the <ph id=\"ph2\">[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]</ph> compilation model, see <bpt id=\"p1\">[</bpt>ASP.NET Compilation Overview<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=94773)</ept>.","source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] the [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] compilation model, see [ASP.NET Compilation Overview](http://go.microsoft.com/fwlink/?LinkId=94773)."},{"pos":[9466,9491],"content":"Configure the WCF Service","linkify":"Configure the WCF Service","nodes":[{"content":"Configure the WCF Service","pos":[0,25]}]},{"content":"IIS-hosted <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services store their configuration in the applications Web.config file.","pos":[9495,9633],"source":"IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services store their configuration in the applications Web.config file."},{"content":"IIS-hosted services use the same configuration elements and syntax as <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services hosted outside of IIS.","pos":[9634,9791],"source":" IIS-hosted services use the same configuration elements and syntax as [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted outside of IIS."},{"content":"However, the following constraints are unique to the IIS hosting environment:","pos":[9792,9869]},{"content":"Base addresses for IIS-hosted services.","pos":[9879,9918]},{"content":"Applications hosting <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> constructor or by providing a <bpt id=\"p1\">[</bpt><ph id=\"ph3\">\\&lt;</ph>host&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)</ept> element in the service’s configuration.","pos":[9928,10314],"source":"Applications hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration."},{"content":"Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.","pos":[10315,10467]},{"pos":[10477,10519],"content":"Endpoint Addresses for IIS-Hosted Services","linkify":"Endpoint Addresses for IIS-Hosted Services","nodes":[{"content":"Endpoint Addresses for IIS-Hosted Services","pos":[0,42]}]},{"content":"When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.","pos":[10523,10659]},{"content":"For example, if the base address of a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service is http://localhost/Application1/MyService.svc with the following endpoint configuration.","pos":[10660,10851],"source":" For example, if the base address of a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service is http://localhost/Application1/MyService.svc with the following endpoint configuration."},{"content":"This provides an endpoint that can be reached at \"http://localhost/Application1/MyService.svc/anotherEndpoint\".","pos":[10917,11028]},{"content":"Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at http://localhost/Application1/MyService.svc, which is the base address.","pos":[11035,11236]},{"content":"You must always use relative endpoint addresses for IIS-hosted service endpoints.","pos":[11288,11369]},{"content":"Supplying a fully-qualified endpoint address (for example, http://localhost/MyService.svc) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.","pos":[11370,11620]},{"content":"Using relative endpoint addresses for hosted services avoids these potential conflicts.","pos":[11621,11708]},{"pos":[11718,11738],"content":"Available Transports","linkify":"Available Transports","nodes":[{"content":"Available Transports","pos":[0,20]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services hosted in IIS 5.1 and <ph id=\"ph2\">[!INCLUDE[iis601](../../../../includes/iis601-md.md)]</ph> are restricted to using HTTP-based communication.","pos":[11742,11932],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS 5.1 and [!INCLUDE[iis601](../../../../includes/iis601-md.md)] are restricted to using HTTP-based communication."},{"content":"On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.","pos":[11933,12058]},{"content":"For <ph id=\"ph1\">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]</ph>, the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.","pos":[12059,12266],"source":" For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications."},{"pos":[12276,12299],"content":"HTTP Transport Security","linkify":"HTTP Transport Security","nodes":[{"content":"HTTP Transport Security","pos":[0,23]}]},{"content":"IIS-hosted <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.","pos":[12303,12620],"source":"IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings."},{"content":"The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.","pos":[12621,12778]},{"content":"For example, a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.","pos":[12785,13010],"source":"For example, a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication."},{"content":"Unmatched combinations of IIS settings and <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> endpoint settings result in an error during service activation.","pos":[13011,13173],"source":" Unmatched combinations of IIS settings and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint settings result in an error during service activation."},{"pos":[13182,13190],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Hosting in Internet Information Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[13194,13329],"source":"[Hosting in Internet Information Services](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Internet Information Services Hosting Best Practices<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/internet-information-services-hosting-best-practices.md)</ept><ph id=\"ph1\"> </ph>","pos":[13332,13492],"source":" [Internet Information Services Hosting Best Practices](../../../../docs/framework/wcf/feature-details/internet-information-services-hosting-best-practices.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Windows Server App Fabric Hosting Features<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=201276)</ept>","pos":[13495,13587],"source":" [Windows Server App Fabric Hosting Features](http://go.microsoft.com/fwlink/?LinkId=201276)"}]}