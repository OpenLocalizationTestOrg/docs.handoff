{"content":"---\ntitle: \"Getting Started with .NET Native\"\nms.date: \"03/30/2017\"\nms.assetid: fc9e04e8-2d05-4870-8cd6-5bd276814afc\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Getting Started with .NET Native\nWhether you are writing a new Windows app for Windows 10 or you are migrating an existing Windows Store app, you can follow the same set of procedures. To create a [!INCLUDE[net_native](../../../includes/net-native-md.md)] app, follow these steps:  \n  \n1.  [Develop a Universal Windows Platform (UWP) app that targets Windows 10](#Step1), and test the debug builds of your app to ensure that it works properly.  \n  \n2.  [Handle additional reflection and serialization usage](#Step2).  \n  \n3.  [Deploy and test the release builds of your app](#Step3).  \n  \n4.  [Manually resolve missing metadata](#Step4), and repeat [step 3](#Step3) until all issues are resolved.  \n  \n> [!NOTE]\n>  If you are migrating an existing Windows Store app to [!INCLUDE[net_native](../../../includes/net-native-md.md)], be sure to review [Migrating Your Windows Store App to .NET Native](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md).  \n  \n<a name=\"Step1\"></a>   \n## Step 1: Develop and test debug builds of your UWP app  \n Whether you are developing a new app or migrating an existing one, you follow the same process as for any Windows app.  \n  \n1.  Create a new UWP project in Visual Studio by using the Universal Windows app template for Visual C# or Visual Basic. By default, all UWP applications target the CoreCLR and their release builds are compiled by using the .NET Native tool chain.  \n  \n2.  Note that there are some known compatibility issues between compiling UWP app projects with the .NET Native tool chain and without it. Refer to the [migration guide](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md) for more information.  \n  \n You can now write C# or Visual Basic code against the [!INCLUDE[net_native](../../../includes/net-native-md.md)] surface area that runs on the local system (or in the simulator).  \n  \n> [!IMPORTANT]\n>  As you develop your app, note any use of serialization or reflection in your code.  \n  \n By default, debug builds are JIT-compiled to enable rapid F5 deployment, while release builds are compiled by using the [!INCLUDE[net_native](../../../includes/net-native-md.md)] pre-compilation technology. This means you should build and test the debug builds of your app to ensure that they work normally before compiling them with the .NET Native tool chain.  \n  \n<a name=\"Step2\"></a>   \n## Step 2: Handle additional reflection and serialization usage  \n A runtime directives file, Default.rd.xml, is automatically added to your project when you create it. If you develop in C#, it is found in your project's **Properties** folder. If you develop in Visual Basic, it is found in your project's **My Project** folder.  \n  \n> [!NOTE]\n>  For an overview of the .NET Native compilation process that provides background on why a runtime directives file is needed, see [.NET Native and Compilation](../../../docs/framework/net-native/net-native-and-compilation.md).  \n  \n The runtime directives file is used to define the metadata that your app needs at run time. In some cases, the default version of the file may be adequate. However, some code that relies on serialization or reflection may require additional entries in the runtime directives file.  \n  \n **Serialization**  \n There are two categories of serializers, and both may require additional entries in the runtime directives file:  \n  \n-   Non-reflection based serializers. The serializers found in the .NET Framework class library, such as the <xref:System.Runtime.Serialization.DataContractSerializer>, <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>, and <xref:System.Xml.Serialization.XmlSerializer> classes, do not rely on reflection. However, they do require that code be generated based on the object to be serialized or deserialized.  For more information, see the \"Microsoft Serializers\" section in [Serialization and Metadata](../../../docs/framework/net-native/serialization-and-metadata.md).  \n  \n-   Third-party serializers. Third-party serialization libraries, the most common of which is the Newtonsoft JSON serializer, are generally reflection-based and require entries in the *.rd.xml file to support object serialization and deserialization. For more information, see the \"Third-Party Serializers\" section in [Serialization and Metadata](../../../docs/framework/net-native/serialization-and-metadata.md).  \n  \n **Methods that rely on reflection**  \n In some cases, the use of reflection in code is not obvious. Some common APIs or programming patterns aren't considered part of the reflection API but rely on reflection to execute successfully. This includes the following type instantiation and method construction methods:  \n  \n-   The <xref:System.Type.MakeGenericType%2A?displayProperty=nameWithType> method  \n  \n-   The <xref:System.Array.CreateInstance%2A?displayProperty=nameWithType> and <xref:System.Type.MakeArrayType%2A?displayProperty=nameWithType> methods  \n  \n-   The <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A?displayProperty=nameWithType> method.  \n  \n For more information, see [APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md).  \n  \n> [!NOTE]\n>  Type names used in runtime directives files must be fully qualified. For example, the file must specify \"System.String\" instead of \"String\".  \n  \n<a name=\"Step3\"></a>   \n## Step 3: Deploy and test the release builds of your app  \n After you’ve updated the runtime directives file, you can rebuild and deploy release builds of your app. .NET Native binaries are placed in the ILC.out subdirectory of the directory specified in the **Build output path** text box of  the project's **Properties** dialog box, **Compile** tab. Binaries that aren't in this folder haven't been compiled with .NET Native. Test your app thoroughly, and test all scenarios, including failure scenarios, on each of its target platforms.  \n  \n If your app doesn’t work properly (particularly in cases where it throws [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) or [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md) exceptions at run time), follow the instructions in the next section, [Step 4: Manually resolve missing metadata](#Step4). Enabling first-chance exceptions may help you find these bugs.  \n  \n When you’ve tested and debugged the debug builds of your app and you’re confident that you’ve eliminated the [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) and [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md) exceptions, you should test your app as an optimized [!INCLUDE[net_native](../../../includes/net-native-md.md)] app. To do this, change your active project configuration from **Debug** to **Release**.  \n  \n<a name=\"Step4\"></a>   \n## Step 4: Manually resolve missing metadata  \n The most common failure you'll encounter with [!INCLUDE[net_native](../../../includes/net-native-md.md)] that you don't encounter on the desktop is a runtime [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md), [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md), or [MissingRuntimeArtifactException](../../../docs/framework/net-native/missingruntimeartifactexception-class-net-native.md) exception. In some cases, the absence of metadata can manifest itself in unpredictable behavior or even in app failures. This section discusses how you can debug and resolve these exceptions by adding directives to the runtime directives file. For information about the format of runtime directives, see [Runtime Directives (rd.xml) Configuration File Reference](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md). After you’ve added runtime directives, you should [deploy and test your app](#Step3) again and resolve any new [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md), [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md), and  [MissingRuntimeArtifactException](../../../docs/framework/net-native/missingruntimeartifactexception-class-net-native.md) exceptions until you encounter no more exceptions.  \n  \n> [!TIP]\n>  Specify the runtime directives at a high level to enable your app to be resilient to code changes.  We recommend adding runtime directives at the namespace and type levels rather than the member level. Note that there may be a tradeoff between resiliency and larger binaries with longer compile times.  \n  \n When addressing a missing metadata exception, consider these issues:  \n  \n-   What was the app trying to do before the exception?  \n  \n    -   For example, was it data binding, serializing or deserializing data, or directly using the reflection API?  \n  \n-   Is this an isolated case, or do you believe you'll encounter the same issue for other types?  \n  \n    -   For example, a [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) exception is thrown when serializing a type in the app’s object model.  If you know other types that will be serialized, you can add runtime directives for those types (or for their containing namespaces, depending on how well the code is organized) at the same time.  \n  \n-   Can you rewrite the code so it doesn’t use reflection?  \n  \n    -   For example, does the code use the `dynamic` keyword when you know what type to expect?  \n  \n    -   Does the code call a method that depends on reflection when some better alternative is available?  \n  \n> [!NOTE]\n>  For additional information about handling problems that stem from differences in reflection and the availability of metadata in desktop apps and [!INCLUDE[net_native](../../../includes/net-native-md.md)], see [APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md).  \n  \n For some specific examples of handling exceptions and other issues that occur when testing your app, see:  \n  \n-   [Example: Handling Exceptions When Binding Data](../../../docs/framework/net-native/example-handling-exceptions-when-binding-data.md)  \n  \n-   [Example: Troubleshooting Dynamic Programming](../../../docs/framework/net-native/example-troubleshooting-dynamic-programming.md)  \n  \n-   [Runtime Exceptions in .NET Native Apps](../../../docs/framework/net-native/runtime-exceptions-in-net-native-apps.md)  \n  \n## See also\n\n- [Runtime Directives (rd.xml) Configuration File Reference](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)\n- [.NET Native Setup and Configuration](https://docs.microsoft.com/previous-versions/dn600164(v=vs.110))\n- [.NET Native and Compilation](../../../docs/framework/net-native/net-native-and-compilation.md)\n- [Reflection and .NET Native](../../../docs/framework/net-native/reflection-and-net-native.md)\n- [APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)\n- [Serialization and Metadata](../../../docs/framework/net-native/serialization-and-metadata.md)\n- [Migrating Your Windows Store App to .NET Native](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md)\n","nodes":[{"pos":[4,156],"embed":true,"restype":"x-metadata","content":"title: \"Getting Started with .NET Native\"\nms.date: \"03/30/2017\"\nms.assetid: fc9e04e8-2d05-4870-8cd6-5bd276814afc\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Getting Started with .NET Native","nodes":[{"pos":[0,32],"content":"Getting Started with .NET Native","nodes":[{"content":"Getting Started with .NET Native","pos":[0,32]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[163,195],"content":"Getting Started with .NET Native","linkify":"Getting Started with .NET Native","nodes":[{"content":"Getting Started with .NET Native","pos":[0,32]}]},{"content":"Whether you are writing a new Windows app for Windows 10 or you are migrating an existing Windows Store app, you can follow the same set of procedures.","pos":[196,347]},{"content":"To create a <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> app, follow these steps:","pos":[348,443],"source":" To create a [!INCLUDE[net_native](../../../includes/net-native-md.md)] app, follow these steps:"},{"pos":[453,606],"content":"<bpt id=\"p1\">[</bpt>Develop a Universal Windows Platform (UWP) app that targets Windows 10<ept id=\"p1\">](#Step1)</ept>, and test the debug builds of your app to ensure that it works properly.","source":"[Develop a Universal Windows Platform (UWP) app that targets Windows 10](#Step1), and test the debug builds of your app to ensure that it works properly."},{"pos":[616,679],"content":"<bpt id=\"p1\">[</bpt>Handle additional reflection and serialization usage<ept id=\"p1\">](#Step2)</ept>.","source":"[Handle additional reflection and serialization usage](#Step2)."},{"pos":[689,746],"content":"<bpt id=\"p1\">[</bpt>Deploy and test the release builds of your app<ept id=\"p1\">](#Step3)</ept>.","source":"[Deploy and test the release builds of your app](#Step3)."},{"pos":[756,859],"content":"<bpt id=\"p1\">[</bpt>Manually resolve missing metadata<ept id=\"p1\">](#Step4)</ept>, and repeat <bpt id=\"p2\">[</bpt>step 3<ept id=\"p2\">](#Step3)</ept> until all issues are resolved.","source":"[Manually resolve missing metadata](#Step4), and repeat [step 3](#Step3) until all issues are resolved."},{"pos":[867,1146],"content":"[!NOTE]\n If you are migrating an existing Windows Store app to [!INCLUDE[net_native](../../../includes/net-native-md.md)], be sure to review [Migrating Your Windows Store App to .NET Native](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md).","leadings":["","> "],"nodes":[{"content":"If you are migrating an existing Windows Store app to <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph>, be sure to review <bpt id=\"p1\">[</bpt>Migrating Your Windows Store App to .NET Native<ept id=\"p1\">](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md)</ept>.","pos":[9,277],"source":"If you are migrating an existing Windows Store app to [!INCLUDE[net_native](../../../includes/net-native-md.md)], be sure to review [Migrating Your Windows Store App to .NET Native](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md)."}]},{"pos":[1179,1232],"content":"Step 1: Develop and test debug builds of your UWP app","linkify":"Step 1: Develop and test debug builds of your UWP app","nodes":[{"content":"Step 1: Develop and test debug builds of your UWP app","pos":[0,53]}]},{"content":"Whether you are developing a new app or migrating an existing one, you follow the same process as for any Windows app.","pos":[1236,1354]},{"content":"Create a new UWP project in Visual Studio by using the Universal Windows app template for Visual C# or Visual Basic.","pos":[1364,1480]},{"content":"By default, all UWP applications target the CoreCLR and their release builds are compiled by using the .NET Native tool chain.","pos":[1481,1607]},{"content":"Note that there are some known compatibility issues between compiling UWP app projects with the .NET Native tool chain and without it.","pos":[1617,1751]},{"content":"Refer to the <bpt id=\"p1\">[</bpt>migration guide<ept id=\"p1\">](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md)</ept> for more information.","pos":[1752,1890],"source":" Refer to the [migration guide](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md) for more information."},{"pos":[1897,2075],"content":"You can now write C# or Visual Basic code against the <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> surface area that runs on the local system (or in the simulator).","source":"You can now write C# or Visual Basic code against the [!INCLUDE[net_native](../../../includes/net-native-md.md)] surface area that runs on the local system (or in the simulator)."},{"pos":[2083,2181],"content":"[!IMPORTANT]\n As you develop your app, note any use of serialization or reflection in your code.","leadings":["","> "],"nodes":[{"content":"As you develop your app, note any use of serialization or reflection in your code.","pos":[14,96]}]},{"content":"By default, debug builds are JIT-compiled to enable rapid F5 deployment, while release builds are compiled by using the <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> pre-compilation technology.","pos":[2188,2394],"source":"By default, debug builds are JIT-compiled to enable rapid F5 deployment, while release builds are compiled by using the [!INCLUDE[net_native](../../../includes/net-native-md.md)] pre-compilation technology."},{"content":"This means you should build and test the debug builds of your app to ensure that they work normally before compiling them with the .NET Native tool chain.","pos":[2395,2549]},{"pos":[2582,2642],"content":"Step 2: Handle additional reflection and serialization usage","linkify":"Step 2: Handle additional reflection and serialization usage","nodes":[{"content":"Step 2: Handle additional reflection and serialization usage","pos":[0,60]}]},{"content":"A runtime directives file, Default.rd.xml, is automatically added to your project when you create it.","pos":[2646,2747]},{"content":"If you develop in C#, it is found in your project's <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> folder.","pos":[2748,2822],"source":" If you develop in C#, it is found in your project's **Properties** folder."},{"content":"If you develop in Visual Basic, it is found in your project's <bpt id=\"p1\">**</bpt>My Project<ept id=\"p1\">**</ept> folder.","pos":[2823,2907],"source":" If you develop in Visual Basic, it is found in your project's **My Project** folder."},{"pos":[2915,3150],"content":"[!NOTE]\n For an overview of the .NET Native compilation process that provides background on why a runtime directives file is needed, see [.NET Native and Compilation](../../../docs/framework/net-native/net-native-and-compilation.md).","leadings":["","> "],"nodes":[{"content":"For an overview of the .NET Native compilation process that provides background on why a runtime directives file is needed, see <bpt id=\"p1\">[</bpt>.NET Native and Compilation<ept id=\"p1\">](../../../docs/framework/net-native/net-native-and-compilation.md)</ept>.","pos":[9,233],"source":"For an overview of the .NET Native compilation process that provides background on why a runtime directives file is needed, see [.NET Native and Compilation](../../../docs/framework/net-native/net-native-and-compilation.md)."}]},{"content":"The runtime directives file is used to define the metadata that your app needs at run time.","pos":[3157,3248]},{"content":"In some cases, the default version of the file may be adequate.","pos":[3249,3312]},{"content":"However, some code that relies on serialization or reflection may require additional entries in the runtime directives file.","pos":[3313,3437]},{"content":"<bpt id=\"p1\">**</bpt>Serialization<ept id=\"p1\">**</ept>","pos":[3444,3461],"source":"**Serialization**"},{"content":"There are two categories of serializers, and both may require additional entries in the runtime directives file:","pos":[3465,3577]},{"content":"Non-reflection based serializers.","pos":[3587,3620]},{"content":"The serializers found in the .NET Framework class library, such as the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> classes, do not rely on reflection.","pos":[3621,3906],"source":" The serializers found in the .NET Framework class library, such as the <xref:System.Runtime.Serialization.DataContractSerializer>, <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>, and <xref:System.Xml.Serialization.XmlSerializer> classes, do not rely on reflection."},{"content":"However, they do require that code be generated based on the object to be serialized or deserialized.","pos":[3907,4008]},{"content":"For more information, see the \"Microsoft Serializers\" section in <bpt id=\"p1\">[</bpt>Serialization and Metadata<ept id=\"p1\">](../../../docs/framework/net-native/serialization-and-metadata.md)</ept>.","pos":[4010,4170],"source":"  For more information, see the \"Microsoft Serializers\" section in [Serialization and Metadata](../../../docs/framework/net-native/serialization-and-metadata.md)."},{"content":"Third-party serializers.","pos":[4180,4204]},{"content":"Third-party serialization libraries, the most common of which is the Newtonsoft JSON serializer, are generally reflection-based and require entries in the *.rd.xml file to support object serialization and deserialization.","pos":[4205,4426]},{"content":"For more information, see the \"Third-Party Serializers\" section in <bpt id=\"p1\">[</bpt>Serialization and Metadata<ept id=\"p1\">](../../../docs/framework/net-native/serialization-and-metadata.md)</ept>.","pos":[4427,4589],"source":" For more information, see the \"Third-Party Serializers\" section in [Serialization and Metadata](../../../docs/framework/net-native/serialization-and-metadata.md)."},{"pos":[4596,4909],"content":"**Methods that rely on reflection**  \nIn some cases, the use of reflection in code is not obvious. Some common APIs or programming patterns aren't considered part of the reflection API but rely on reflection to execute successfully. This includes the following type instantiation and method construction methods:","leadings":[""," "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>Methods that rely on reflection<ept id=\"p1\">**</ept>","pos":[0,35],"source":"**Methods that rely on reflection**"},{"content":"In some cases, the use of reflection in code is not obvious. Some common APIs or programming patterns aren't considered part of the reflection API but rely on reflection to execute successfully. This includes the following type instantiation and method construction methods:","pos":[38,312],"nodes":[{"content":"In some cases, the use of reflection in code is not obvious.","pos":[0,60]},{"content":"Some common APIs or programming patterns aren't considered part of the reflection API but rely on reflection to execute successfully.","pos":[61,194]},{"content":"This includes the following type instantiation and method construction methods:","pos":[195,274]}]}]},{"pos":[4919,4996],"content":"The <ph id=\"ph1\">&lt;xref:System.Type.MakeGenericType%2A?displayProperty=nameWithType&gt;</ph> method","source":"The <xref:System.Type.MakeGenericType%2A?displayProperty=nameWithType> method"},{"pos":[5006,5153],"content":"The <ph id=\"ph1\">&lt;xref:System.Array.CreateInstance%2A?displayProperty=nameWithType&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Type.MakeArrayType%2A?displayProperty=nameWithType&gt;</ph> methods","source":"The <xref:System.Array.CreateInstance%2A?displayProperty=nameWithType> and <xref:System.Type.MakeArrayType%2A?displayProperty=nameWithType> methods"},{"pos":[5163,5260],"content":"The <ph id=\"ph1\">&lt;xref:System.Reflection.MethodInfo.MakeGenericMethod%2A?displayProperty=nameWithType&gt;</ph> method.","source":"The <xref:System.Reflection.MethodInfo.MakeGenericMethod%2A?displayProperty=nameWithType> method."},{"pos":[5267,5392],"content":"For more information, see <bpt id=\"p1\">[</bpt>APIs That Rely on Reflection<ept id=\"p1\">](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)</ept>.","source":"For more information, see [APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)."},{"pos":[5400,5551],"content":"[!NOTE]\n Type names used in runtime directives files must be fully qualified. For example, the file must specify \"System.String\" instead of \"String\".","leadings":["","> "],"nodes":[{"content":"Type names used in runtime directives files must be fully qualified. For example, the file must specify \"System.String\" instead of \"String\".","pos":[9,149],"nodes":[{"content":"Type names used in runtime directives files must be fully qualified.","pos":[0,68]},{"content":"For example, the file must specify \"System.String\" instead of \"String\".","pos":[69,140]}]}]},{"pos":[5584,5638],"content":"Step 3: Deploy and test the release builds of your app","linkify":"Step 3: Deploy and test the release builds of your app","nodes":[{"content":"Step 3: Deploy and test the release builds of your app","pos":[0,54]}]},{"content":"After you’ve updated the runtime directives file, you can rebuild and deploy release builds of your app.","pos":[5642,5746]},{"content":".NET Native binaries are placed in the ILC.out subdirectory of the directory specified in the <bpt id=\"p1\">**</bpt>Build output path<ept id=\"p1\">**</ept> text box of  the project's <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> dialog box, <bpt id=\"p3\">**</bpt>Compile<ept id=\"p3\">**</ept> tab. Binaries that aren't in this folder haven't been compiled with .NET Native.","pos":[5747,6009],"source":" .NET Native binaries are placed in the ILC.out subdirectory of the directory specified in the **Build output path** text box of  the project's **Properties** dialog box, **Compile** tab. Binaries that aren't in this folder haven't been compiled with .NET Native."},{"content":"Test your app thoroughly, and test all scenarios, including failure scenarios, on each of its target platforms.","pos":[6010,6121]},{"content":"If your app doesn’t work properly (particularly in cases where it throws <bpt id=\"p1\">[</bpt>MissingMetadataException<ept id=\"p1\">](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md)</ept> or <bpt id=\"p2\">[</bpt>MissingInteropDataException<ept id=\"p2\">](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md)</ept> exceptions at run time), follow the instructions in the next section, <bpt id=\"p3\">[</bpt>Step 4: Manually resolve missing metadata<ept id=\"p3\">](#Step4)</ept>.","pos":[6128,6548],"source":"If your app doesn’t work properly (particularly in cases where it throws [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) or [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md) exceptions at run time), follow the instructions in the next section, [Step 4: Manually resolve missing metadata](#Step4)."},{"content":"Enabling first-chance exceptions may help you find these bugs.","pos":[6549,6611]},{"content":"When you’ve tested and debugged the debug builds of your app and you’re confident that you’ve eliminated the <bpt id=\"p1\">[</bpt>MissingMetadataException<ept id=\"p1\">](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md)</ept> and <bpt id=\"p2\">[</bpt>MissingInteropDataException<ept id=\"p2\">](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md)</ept> exceptions, you should test your app as an optimized <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> app.","pos":[6618,7069],"source":"When you’ve tested and debugged the debug builds of your app and you’re confident that you’ve eliminated the [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) and [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md) exceptions, you should test your app as an optimized [!INCLUDE[net_native](../../../includes/net-native-md.md)] app."},{"content":"To do this, change your active project configuration from <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>Release<ept id=\"p2\">**</ept>.","pos":[7070,7153],"source":" To do this, change your active project configuration from **Debug** to **Release**."},{"pos":[7186,7227],"content":"Step 4: Manually resolve missing metadata","linkify":"Step 4: Manually resolve missing metadata","nodes":[{"content":"Step 4: Manually resolve missing metadata","pos":[0,41]}]},{"content":"The most common failure you'll encounter with <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph> that you don't encounter on the desktop is a runtime <bpt id=\"p1\">[</bpt>MissingMetadataException<ept id=\"p1\">](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md)</ept>, <bpt id=\"p2\">[</bpt>MissingInteropDataException<ept id=\"p2\">](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md)</ept>, or <bpt id=\"p3\">[</bpt>MissingRuntimeArtifactException<ept id=\"p3\">](../../../docs/framework/net-native/missingruntimeartifactexception-class-net-native.md)</ept> exception.","pos":[7231,7748],"source":"The most common failure you'll encounter with [!INCLUDE[net_native](../../../includes/net-native-md.md)] that you don't encounter on the desktop is a runtime [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md), [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md), or [MissingRuntimeArtifactException](../../../docs/framework/net-native/missingruntimeartifactexception-class-net-native.md) exception."},{"content":"In some cases, the absence of metadata can manifest itself in unpredictable behavior or even in app failures.","pos":[7749,7858]},{"content":"This section discusses how you can debug and resolve these exceptions by adding directives to the runtime directives file.","pos":[7859,7981]},{"content":"For information about the format of runtime directives, see <bpt id=\"p1\">[</bpt>Runtime Directives (rd.xml) Configuration File Reference<ept id=\"p1\">](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)</ept>.","pos":[7982,8195],"source":" For information about the format of runtime directives, see [Runtime Directives (rd.xml) Configuration File Reference](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)."},{"content":"After you’ve added runtime directives, you should <bpt id=\"p1\">[</bpt>deploy and test your app<ept id=\"p1\">](#Step3)</ept> again and resolve any new <bpt id=\"p2\">[</bpt>MissingMetadataException<ept id=\"p2\">](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md)</ept>, <bpt id=\"p3\">[</bpt>MissingInteropDataException<ept id=\"p3\">](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md)</ept>, and  <bpt id=\"p4\">[</bpt>MissingRuntimeArtifactException<ept id=\"p4\">](../../../docs/framework/net-native/missingruntimeartifactexception-class-net-native.md)</ept> exceptions until you encounter no more exceptions.","pos":[8196,8708],"source":" After you’ve added runtime directives, you should [deploy and test your app](#Step3) again and resolve any new [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md), [MissingInteropDataException](../../../docs/framework/net-native/missinginteropdataexception-class-net-native.md), and  [MissingRuntimeArtifactException](../../../docs/framework/net-native/missingruntimeartifactexception-class-net-native.md) exceptions until you encounter no more exceptions."},{"pos":[8716,9027],"content":"[!TIP]\n Specify the runtime directives at a high level to enable your app to be resilient to code changes.  We recommend adding runtime directives at the namespace and type levels rather than the member level. Note that there may be a tradeoff between resiliency and larger binaries with longer compile times.","leadings":["","> "],"nodes":[{"content":"Specify the runtime directives at a high level to enable your app to be resilient to code changes.  We recommend adding runtime directives at the namespace and type levels rather than the member level. Note that there may be a tradeoff between resiliency and larger binaries with longer compile times.","pos":[8,309],"nodes":[{"content":"Specify the runtime directives at a high level to enable your app to be resilient to code changes.","pos":[0,98]},{"content":"We recommend adding runtime directives at the namespace and type levels rather than the member level.","pos":[100,201]},{"content":"Note that there may be a tradeoff between resiliency and larger binaries with longer compile times.","pos":[202,301]}]}]},{"content":"When addressing a missing metadata exception, consider these issues:","pos":[9034,9102]},{"content":"What was the app trying to do before the exception?","pos":[9112,9163]},{"content":"For example, was it data binding, serializing or deserializing data, or directly using the reflection API?","pos":[9177,9283]},{"content":"Is this an isolated case, or do you believe you'll encounter the same issue for other types?","pos":[9293,9385]},{"content":"For example, a <bpt id=\"p1\">[</bpt>MissingMetadataException<ept id=\"p1\">](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md)</ept> exception is thrown when serializing a type in the app’s object model.","pos":[9399,9592],"source":"For example, a [MissingMetadataException](../../../docs/framework/net-native/missingmetadataexception-class-net-native.md) exception is thrown when serializing a type in the app’s object model."},{"content":"If you know other types that will be serialized, you can add runtime directives for those types (or for their containing namespaces, depending on how well the code is organized) at the same time.","pos":[9594,9789]},{"content":"Can you rewrite the code so it doesn’t use reflection?","pos":[9799,9853]},{"pos":[9867,9954],"content":"For example, does the code use the <ph id=\"ph1\">`dynamic`</ph> keyword when you know what type to expect?","source":"For example, does the code use the `dynamic` keyword when you know what type to expect?"},{"content":"Does the code call a method that depends on reflection when some better alternative is available?","pos":[9968,10065]},{"pos":[10073,10392],"content":"[!NOTE]\n For additional information about handling problems that stem from differences in reflection and the availability of metadata in desktop apps and [!INCLUDE[net_native](../../../includes/net-native-md.md)], see [APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md).","leadings":["","> "],"nodes":[{"content":"For additional information about handling problems that stem from differences in reflection and the availability of metadata in desktop apps and <ph id=\"ph1\">[!INCLUDE[net_native](../../../includes/net-native-md.md)]</ph>, see <bpt id=\"p1\">[</bpt>APIs That Rely on Reflection<ept id=\"p1\">](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)</ept>.","pos":[9,317],"source":"For additional information about handling problems that stem from differences in reflection and the availability of metadata in desktop apps and [!INCLUDE[net_native](../../../includes/net-native-md.md)], see [APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)."}]},{"content":"For some specific examples of handling exceptions and other issues that occur when testing your app, see:","pos":[10399,10504]},{"pos":[10514,10647],"content":"<bpt id=\"p1\">[</bpt>Example: Handling Exceptions When Binding Data<ept id=\"p1\">](../../../docs/framework/net-native/example-handling-exceptions-when-binding-data.md)</ept>","source":"[Example: Handling Exceptions When Binding Data](../../../docs/framework/net-native/example-handling-exceptions-when-binding-data.md)"},{"pos":[10657,10786],"content":"<bpt id=\"p1\">[</bpt>Example: Troubleshooting Dynamic Programming<ept id=\"p1\">](../../../docs/framework/net-native/example-troubleshooting-dynamic-programming.md)</ept>","source":"[Example: Troubleshooting Dynamic Programming](../../../docs/framework/net-native/example-troubleshooting-dynamic-programming.md)"},{"pos":[10796,10913],"content":"<bpt id=\"p1\">[</bpt>Runtime Exceptions in .NET Native Apps<ept id=\"p1\">](../../../docs/framework/net-native/runtime-exceptions-in-net-native-apps.md)</ept>","source":"[Runtime Exceptions in .NET Native Apps](../../../docs/framework/net-native/runtime-exceptions-in-net-native-apps.md)"},{"pos":[10922,10930],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10934,11086],"content":"<bpt id=\"p1\">[</bpt>Runtime Directives (rd.xml) Configuration File Reference<ept id=\"p1\">](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)</ept>","source":"[Runtime Directives (rd.xml) Configuration File Reference](../../../docs/framework/net-native/runtime-directives-rd-xml-configuration-file-reference.md)"},{"pos":[11089,11191],"content":"<bpt id=\"p1\">[</bpt>.NET Native Setup and Configuration<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dn600164(v=vs.110))</ept>","source":"[.NET Native Setup and Configuration](https://docs.microsoft.com/previous-versions/dn600164(v=vs.110))"},{"pos":[11194,11289],"content":"<bpt id=\"p1\">[</bpt>.NET Native and Compilation<ept id=\"p1\">](../../../docs/framework/net-native/net-native-and-compilation.md)</ept>","source":"[.NET Native and Compilation](../../../docs/framework/net-native/net-native-and-compilation.md)"},{"pos":[11292,11385],"content":"<bpt id=\"p1\">[</bpt>Reflection and .NET Native<ept id=\"p1\">](../../../docs/framework/net-native/reflection-and-net-native.md)</ept>","source":"[Reflection and .NET Native](../../../docs/framework/net-native/reflection-and-net-native.md)"},{"pos":[11388,11486],"content":"<bpt id=\"p1\">[</bpt>APIs That Rely on Reflection<ept id=\"p1\">](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)</ept>","source":"[APIs That Rely on Reflection](../../../docs/framework/net-native/apis-that-rely-on-reflection.md)"},{"pos":[11489,11583],"content":"<bpt id=\"p1\">[</bpt>Serialization and Metadata<ept id=\"p1\">](../../../docs/framework/net-native/serialization-and-metadata.md)</ept>","source":"[Serialization and Metadata](../../../docs/framework/net-native/serialization-and-metadata.md)"},{"pos":[11586,11721],"content":"<bpt id=\"p1\">[</bpt>Migrating Your Windows Store App to .NET Native<ept id=\"p1\">](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md)</ept>","source":"[Migrating Your Windows Store App to .NET Native](../../../docs/framework/net-native/migrating-your-windows-store-app-to-net-native.md)"}]}