{"content":"---\ntitle: \"How to: Configure a Windows Communication Foundation Service to Use Port Sharing\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 6400bc71-a858-4ac2-8d5a-caa72d3b5482\n---\n# How to: Configure a Windows Communication Foundation Service to Use Port Sharing\nThe easiest way to use net.tcp:// port sharing in your Windows Communication Foundation (WCF) application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding>.  \n  \n This binding provides a <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property that controls whether net.tcp:// port sharing is enabled for the service being configured with this binding.  \n  \n The following procedure shows how to use the <xref:System.ServiceModel.NetTcpBinding> class to open an endpoint at the Uniform Resource Identifier (URI) net.tcp://localhost/MyService, first in code and then by using configuration elements.  \n  \n### To enable net.tcp:// port sharing on a NetTcpBinding in code  \n  \n1.  Create a service to implement a contract called `IMyService` and call it `MyService`, .  \n  \n     [!code-csharp[c_ConfigurePortSharing#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_configureportsharing/cs/source.cs#1)]\n     [!code-vb[c_ConfigurePortSharing#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_configureportsharing/vb/source.vb#1)]  \n  \n2.  Create an instance of the <xref:System.ServiceModel.NetTcpBinding> class and set the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property to `true`.  \n  \n     [!code-csharp[c_ConfigurePortSharing#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_configureportsharing/cs/source.cs#2)]\n     [!code-vb[c_ConfigurePortSharing#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_configureportsharing/vb/source.vb#2)]  \n  \n3.  Create a <xref:System.ServiceModel.ServiceHost> and add the service endpoint to it for `MyService` that uses the port sharing-enabled <xref:System.ServiceModel.NetTcpBinding> and that listens at the endpoint address URI \"net.tcp://localhost/MyService\".  \n  \n     [!code-csharp[c_ConfigurePortSharing#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_configureportsharing/cs/source.cs#3)]\n     [!code-vb[c_ConfigurePortSharing#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_configureportsharing/vb/source.vb#3)]  \n  \n    > [!NOTE]\n    >  This example uses the default TCP port of 808 because the endpoint address URI does not specify a different port number. Because port sharing is explicitly enabled on the transport binding, this service can share port 808 with other services in other processes. If port sharing were not allowed and another application were already using port 808, this service would throw an <xref:System.ServiceModel.AddressAlreadyInUseException> when it was opened.  \n  \n### To enable net.tcp:// port sharing on a NetTcpBinding in configuration  \n  \n1.  The following example shows how to enable port sharing and add the service endpoint using configuration elements.  \n  \n```xml  \n<system.serviceModel>  \n  <bindings>  \n    <netTcpBinding name=\"portSharingBinding\"   \n                   portSharingEnabled=\"true\" />  \n  </bindings>  \n  <services>  \n    <service name=\"MyService\">  \n        <endpoint address=\"net.tcp://localhost/MyService\"  \n                  binding=\"netTcpBinding\"  \n                  contract=\"IMyService\"  \n                  bindingConfiguration=\"portSharingBinding\" />  \n    </service>  \n  </services>  \n</system.serviceModel>  \n```  \n  \n## See also\n\n- [Net.TCP Port Sharing](../../../../docs/framework/wcf/feature-details/net-tcp-port-sharing.md)\n- [How to: Enable the Net.TCP Port Sharing Service](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)\n","nodes":[{"pos":[4,198],"embed":true,"restype":"x-metadata","content":"title: \"How to: Configure a Windows Communication Foundation Service to Use Port Sharing\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 6400bc71-a858-4ac2-8d5a-caa72d3b5482","nodes":[{"content":"How to: Configure a Windows Communication Foundation Service to Use Port Sharing","nodes":[{"pos":[0,80],"content":"How to: Configure a Windows Communication Foundation Service to Use Port Sharing","nodes":[{"content":"How to: Configure a Windows Communication Foundation Service to Use Port Sharing","pos":[0,80]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[205,285],"content":"How to: Configure a Windows Communication Foundation Service to Use Port Sharing","linkify":"How to: Configure a Windows Communication Foundation Service to Use Port Sharing","nodes":[{"content":"How to: Configure a Windows Communication Foundation Service to Use Port Sharing","pos":[0,80]}]},{"pos":[286,466],"content":"The easiest way to use net.tcp:// port sharing in your Windows Communication Foundation (WCF) application is to expose a service using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph>.","source":"The easiest way to use net.tcp:// port sharing in your Windows Communication Foundation (WCF) application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding>."},{"pos":[473,677],"content":"This binding provides a <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A&gt;</ph> property that controls whether net.tcp:// port sharing is enabled for the service being configured with this binding.","source":"This binding provides a <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property that controls whether net.tcp:// port sharing is enabled for the service being configured with this binding."},{"pos":[684,923],"content":"The following procedure shows how to use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> class to open an endpoint at the Uniform Resource Identifier (URI) net.tcp://localhost/MyService, first in code and then by using configuration elements.","source":"The following procedure shows how to use the <xref:System.ServiceModel.NetTcpBinding> class to open an endpoint at the Uniform Resource Identifier (URI) net.tcp://localhost/MyService, first in code and then by using configuration elements."},{"pos":[933,993],"content":"To enable net.tcp:// port sharing on a NetTcpBinding in code","linkify":"To enable net.tcp:// port sharing on a NetTcpBinding in code","nodes":[{"content":"To enable net.tcp:// port sharing on a NetTcpBinding in code","pos":[0,60]}]},{"pos":[1003,1090],"content":"Create a service to implement a contract called <ph id=\"ph1\">`IMyService`</ph> and call it <ph id=\"ph2\">`MyService`</ph>, .","source":"Create a service to implement a contract called `IMyService` and call it `MyService`, ."},{"pos":[1101,1370],"content":"[!code-csharp[c_ConfigurePortSharing#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_configureportsharing/cs/source.cs#1)]\n [!code-vb[c_ConfigurePortSharing#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_configureportsharing/vb/source.vb#1)]","leadings":["","    "],"nodes":[]},{"pos":[1380,1547],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> class and set the <ph id=\"ph2\">&lt;xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A&gt;</ph> property to <ph id=\"ph3\">`true`</ph>.","source":"Create an instance of the <xref:System.ServiceModel.NetTcpBinding> class and set the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property to `true`."},{"pos":[1558,1827],"content":"[!code-csharp[c_ConfigurePortSharing#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_configureportsharing/cs/source.cs#2)]\n [!code-vb[c_ConfigurePortSharing#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_configureportsharing/vb/source.vb#2)]","leadings":["","    "],"nodes":[]},{"pos":[1837,2089],"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> and add the service endpoint to it for <ph id=\"ph2\">`MyService`</ph> that uses the port sharing-enabled <ph id=\"ph3\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> and that listens at the endpoint address URI \"net.tcp://localhost/MyService\".","source":"Create a <xref:System.ServiceModel.ServiceHost> and add the service endpoint to it for `MyService` that uses the port sharing-enabled <xref:System.ServiceModel.NetTcpBinding> and that listens at the endpoint address URI \"net.tcp://localhost/MyService\"."},{"pos":[2100,2369],"content":"[!code-csharp[c_ConfigurePortSharing#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_configureportsharing/cs/source.cs#3)]\n [!code-vb[c_ConfigurePortSharing#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_configureportsharing/vb/source.vb#3)]","leadings":["","    "],"nodes":[]},{"pos":[2381,2847],"content":"[!NOTE]\nThis example uses the default TCP port of 808 because the endpoint address URI does not specify a different port number. Because port sharing is explicitly enabled on the transport binding, this service can share port 808 with other services in other processes. If port sharing were not allowed and another application were already using port 808, this service would throw an <xref:System.ServiceModel.AddressAlreadyInUseException> when it was opened.","leadings":["","    >  "],"nodes":[{"content":"This example uses the default TCP port of 808 because the endpoint address URI does not specify a different port number. Because port sharing is explicitly enabled on the transport binding, this service can share port 808 with other services in other processes. If port sharing were not allowed and another application were already using port 808, this service would throw an <xref:System.ServiceModel.AddressAlreadyInUseException> when it was opened.","pos":[8,459],"nodes":[{"content":"This example uses the default TCP port of 808 because the endpoint address URI does not specify a different port number.","pos":[0,120]},{"content":"Because port sharing is explicitly enabled on the transport binding, this service can share port 808 with other services in other processes.","pos":[121,261]},{"content":"If port sharing were not allowed and another application were already using port 808, this service would throw an <ph id=\"ph1\">&lt;xref:System.ServiceModel.AddressAlreadyInUseException&gt;</ph> when it was opened.","pos":[262,451],"source":" If port sharing were not allowed and another application were already using port 808, this service would throw an <xref:System.ServiceModel.AddressAlreadyInUseException> when it was opened."}]}]},{"pos":[2857,2926],"content":"To enable net.tcp:// port sharing on a NetTcpBinding in configuration","linkify":"To enable net.tcp:// port sharing on a NetTcpBinding in configuration","nodes":[{"content":"To enable net.tcp:// port sharing on a NetTcpBinding in configuration","pos":[0,69]}]},{"content":"The following example shows how to enable port sharing and add the service endpoint using configuration elements.","pos":[2936,3049]},{"pos":[3546,3554],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3558,3652],"content":"<bpt id=\"p1\">[</bpt>Net.TCP Port Sharing<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/net-tcp-port-sharing.md)</ept>","source":"[Net.TCP Port Sharing](../../../../docs/framework/wcf/feature-details/net-tcp-port-sharing.md)"},{"pos":[3655,3802],"content":"<bpt id=\"p1\">[</bpt>How to: Enable the Net.TCP Port Sharing Service<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)</ept>","source":"[How to: Enable the Net.TCP Port Sharing Service](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)"}]}