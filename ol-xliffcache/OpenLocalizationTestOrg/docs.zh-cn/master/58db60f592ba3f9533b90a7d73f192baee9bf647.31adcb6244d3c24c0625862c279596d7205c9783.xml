{"content":"---\ntitle: \"How to: Anticipate Out-of-Space Conditions with Isolated Storage | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"data stores, quotas\"\n  - \"isolated storage, quotas\"\n  - \"quanitity of isolated storage used\"\n  - \"limit on isolated storage used\"\n  - \"stores, quotas\"\n  - \"stores, out of space conditions\"\n  - \"data storage using isolated storage, quotas\"\n  - \"storing data using isolated storage, quotas\"\n  - \"space remaining in isolated storage\"\n  - \"data stores, out of space conditions\"\n  - \"storing data using isolated storage, out of space conditions\"\n  - \"quotas for isolated storage\"\n  - \"isolated storage, out of space conditions\"\n  - \"data storage using isolated storage, out of space conditions\"\nms.assetid: e35d4535-3732-421e-b1a3-37412e036145\ncaps.latest.revision: 17\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"\n---\n# How to: Anticipate Out-of-Space Conditions with Isolated Storage\nCode that uses isolated storage is constrained by a [quota](../../../docs/standard/io/isolated-storage.md#quotas) that specifies the maximum size for the data compartment in which isolated storage files and directories exist. The quota is defined by security policy and is configurable by administrators. If the maximum allowed size is exceeded when you try to write data, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown and the operation fails. This helps prevent malicious denial-of-service attacks that could cause the application to refuse requests because data storage is filled.  \n  \n To help you determine whether a given write attempt is likely to fail for this reason, the <xref:System.IO.IsolatedStorage.IsolatedStorage> class provides three read-only properties: <xref:System.IO.IsolatedStorage.IsolatedStorage.AvailableFreeSpace%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorage.UsedSize%2A>, and <xref:System.IO.IsolatedStorage.IsolatedStorage.Quota%2A>. You can use these properties to determine whether writing to the store will cause the maximum allowed size of the store to be exceeded. Keep in mind that isolated storage can be accessed concurrently; therefore, when you compute the amount of remaining storage, the storage space could be consumed by the time you try to write to the store. However, you can use the maximum size of the store to help determine whether the upper limit on available storage is about to be reached.  \n  \n The <xref:System.IO.IsolatedStorage.IsolatedStorage.Quota%2A> property depends on evidence from the assembly to work properly. For this reason, you should retrieve this property only on <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objects that were created by using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A>, or <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method. <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objects that were created in any other way (for example, objects that were returned from the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A> method) will not return an accurate maximum size.  \n  \n## Example  \n The following code example obtains an isolated store, creates a few files, and retrieves the <xref:System.IO.IsolatedStorage.IsolatedStorage.AvailableFreeSpace%2A> property. The remaining space is reported in bytes.  \n  \n [!code-cpp[Conceptual.IsolatedStorage#8](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.isolatedstorage/cpp/source7.cpp#8)]\n [!code-csharp[Conceptual.IsolatedStorage#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.isolatedstorage/cs/source7.cs#8)]\n [!code-vb[Conceptual.IsolatedStorage#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.isolatedstorage/vb/source7.vb#8)]  \n  \n## See Also  \n <xref:System.IO.IsolatedStorage.IsolatedStorageFile>   \n [Isolated Storage](../../../docs/standard/io/isolated-storage.md)   \n [How to: Obtain Stores for Isolated Storage](../../../docs/standard/io/how-to-obtain-stores-for-isolated-storage.md)","nodes":[{"pos":[4,992],"embed":true,"restype":"x-metadata","content":"title: \"How to: Anticipate Out-of-Space Conditions with Isolated Storage | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"data stores, quotas\"\n  - \"isolated storage, quotas\"\n  - \"quanitity of isolated storage used\"\n  - \"limit on isolated storage used\"\n  - \"stores, quotas\"\n  - \"stores, out of space conditions\"\n  - \"data storage using isolated storage, quotas\"\n  - \"storing data using isolated storage, quotas\"\n  - \"space remaining in isolated storage\"\n  - \"data stores, out of space conditions\"\n  - \"storing data using isolated storage, out of space conditions\"\n  - \"quotas for isolated storage\"\n  - \"isolated storage, out of space conditions\"\n  - \"data storage using isolated storage, out of space conditions\"\nms.assetid: e35d4535-3732-421e-b1a3-37412e036145\ncaps.latest.revision: 17\nauthor: \"mairaw\"\nms.author: \"mairaw\"\nmanager: \"wpickett\"","nodes":[{"content":"How to: Anticipate Out-of-Space Conditions with Isolated Storage | Microsoft Docs","nodes":[{"pos":[0,81],"content":"How to: Anticipate Out-of-Space Conditions with Isolated Storage | Microsoft Docs","nodes":[{"content":"How to: Anticipate Out-of-Space Conditions with Isolated Storage | Microsoft Docs","pos":[0,81]}]}],"path":["title"]}],"yml":true},{"pos":[999,1063],"content":"How to: Anticipate Out-of-Space Conditions with Isolated Storage","linkify":"How to: Anticipate Out-of-Space Conditions with Isolated Storage","nodes":[{"content":"How to: Anticipate Out-of-Space Conditions with Isolated Storage","pos":[0,64]}]},{"content":"Code that uses isolated storage is constrained by a <bpt id=\"p1\">[</bpt>quota<ept id=\"p1\">](../../../docs/standard/io/isolated-storage.md#quotas)</ept> that specifies the maximum size for the data compartment in which isolated storage files and directories exist.","pos":[1064,1289],"source":"Code that uses isolated storage is constrained by a [quota](../../../docs/standard/io/isolated-storage.md#quotas) that specifies the maximum size for the data compartment in which isolated storage files and directories exist."},{"content":"The quota is defined by security policy and is configurable by administrators.","pos":[1290,1368]},{"content":"If the maximum allowed size is exceeded when you try to write data, an <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageException&gt;</ph> exception is thrown and the operation fails.","pos":[1369,1542],"source":" If the maximum allowed size is exceeded when you try to write data, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown and the operation fails."},{"content":"This helps prevent malicious denial-of-service attacks that could cause the application to refuse requests because data storage is filled.","pos":[1543,1681]},{"content":"To help you determine whether a given write attempt is likely to fail for this reason, the <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage&gt;</ph> class provides three read-only properties: <ph id=\"ph2\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage.AvailableFreeSpace%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage.UsedSize%2A&gt;</ph>, and <ph id=\"ph4\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage.Quota%2A&gt;</ph>.","pos":[1688,2067],"source":"To help you determine whether a given write attempt is likely to fail for this reason, the <xref:System.IO.IsolatedStorage.IsolatedStorage> class provides three read-only properties: <xref:System.IO.IsolatedStorage.IsolatedStorage.AvailableFreeSpace%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorage.UsedSize%2A>, and <xref:System.IO.IsolatedStorage.IsolatedStorage.Quota%2A>."},{"content":"You can use these properties to determine whether writing to the store will cause the maximum allowed size of the store to be exceeded.","pos":[2068,2203]},{"content":"Keep in mind that isolated storage can be accessed concurrently; therefore, when you compute the amount of remaining storage, the storage space could be consumed by the time you try to write to the store.","pos":[2204,2408]},{"content":"However, you can use the maximum size of the store to help determine whether the upper limit on available storage is about to be reached.","pos":[2409,2546]},{"content":"The <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage.Quota%2A&gt;</ph> property depends on evidence from the assembly to work properly.","pos":[2553,2679],"source":"The <xref:System.IO.IsolatedStorage.IsolatedStorage.Quota%2A> property depends on evidence from the assembly to work properly."},{"content":"For this reason, you should retrieve this property only on <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> objects that were created by using the <ph id=\"ph2\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A&gt;</ph>, or <ph id=\"ph4\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> method.","pos":[2680,3066],"source":" For this reason, you should retrieve this property only on <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objects that were created by using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A>, or <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method."},{"content":"<ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> objects that were created in any other way (for example, objects that were returned from the <ph id=\"ph2\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A&gt;</ph> method) will not return an accurate maximum size.","pos":[3067,3332],"source":" <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objects that were created in any other way (for example, objects that were returned from the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A> method) will not return an accurate maximum size."},{"pos":[3341,3348],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code example obtains an isolated store, creates a few files, and retrieves the <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage.AvailableFreeSpace%2A&gt;</ph> property.","pos":[3352,3525],"source":"The following code example obtains an isolated store, creates a few files, and retrieves the <xref:System.IO.IsolatedStorage.IsolatedStorage.AvailableFreeSpace%2A> property."},{"content":"The remaining space is reported in bytes.","pos":[3526,3567]},{"content":"<bpt id=\"p1\">[!code-cpp</bpt><bpt id=\"p2\">[</bpt>Conceptual.IsolatedStorage#8<ept id=\"p2\">](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.isolatedstorage/cpp/source7.cpp#8)</ept><ept id=\"p1\">]</ept>","pos":[3574,3707],"source":"[!code-cpp[Conceptual.IsolatedStorage#8](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.isolatedstorage/cpp/source7.cpp#8)]"},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Conceptual.IsolatedStorage#8<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.isolatedstorage/cs/source7.cs#8)</ept><ept id=\"p1\">]</ept>","pos":[3709,3846],"source":"[!code-csharp[Conceptual.IsolatedStorage#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.isolatedstorage/cs/source7.cs#8)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>Conceptual.IsolatedStorage#8<ept id=\"p2\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.isolatedstorage/vb/source7.vb#8)</ept><ept id=\"p1\">]</ept>","pos":[3848,3986],"source":"[!code-vb[Conceptual.IsolatedStorage#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.isolatedstorage/vb/source7.vb#8)]"},{"pos":[3995,4003],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph>","pos":[4007,4059],"source":"<xref:System.IO.IsolatedStorage.IsolatedStorageFile> "},{"content":"<bpt id=\"p1\">[</bpt>Isolated Storage<ept id=\"p1\">](../../../docs/standard/io/isolated-storage.md)</ept><ph id=\"ph1\"> </ph>","pos":[4064,4130],"source":"[Isolated Storage](../../../docs/standard/io/isolated-storage.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Obtain Stores for Isolated Storage<ept id=\"p1\">](../../../docs/standard/io/how-to-obtain-stores-for-isolated-storage.md)</ept>","pos":[4134,4250],"source":"[How to: Obtain Stores for Isolated Storage](../../../docs/standard/io/how-to-obtain-stores-for-isolated-storage.md)"}]}