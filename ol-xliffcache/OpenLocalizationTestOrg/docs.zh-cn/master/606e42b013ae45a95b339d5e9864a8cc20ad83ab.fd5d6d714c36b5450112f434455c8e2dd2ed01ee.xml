{"content":"---\ntitle: \"ReceiveContext-Enabled WCF Channels | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: d990d119-7321-4b8c-852b-10256f59f9b0\ncaps.latest.revision: 10\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# ReceiveContext-Enabled WCF Channels\nThis sample demonstrates the usefulness of <xref:System.ServiceModel.Channels.ReceiveContext>-enabled WCF channels. The sample implements a service to find the product of two numbers using a NetMSMQ channel.  \n  \n The <xref:System.ServiceModel.Channels.ReceiveContext> class enables an application to decide whether to access the message or leave it in the queue for further processing, even after the contents of the message have been inspected. In this sample, a client sends random integers to a transactional queue. The `ProductCalculator` service receives the messages and inspects the message contents, which are integers, to determine whether the product can be computed. If the service operation does not compute the product, the message is put back into the queue and can be received again by the service listening on the queue.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing:  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory:  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Binding\\Net\\MSMQ\\ReceiveContextProductGenerator`  \n  \n#### To use this sample  \n  \n1.  Ensure that Microsoft Message Queuing (MSMQ) is installed.  \n  \n    1.  To install MSMQ on [!INCLUDE[lserver](../../../../includes/lserver-md.md)]:  \n  \n        1.  In **Server Manager**, click **Features**.  \n  \n        2.  In the right pane under **Features Summary**, click **Add Features**.  \n  \n        3.  In the resulting window, expand **Message Queuing**.  \n  \n        4.  Expand **Message Queuing Services**.  \n  \n        5.  Click **Directory Services Integration** (for computers joined to a domain), and then click **HTTP Support**.  \n  \n        6.  Click **Next**, and then click **Install**.  \n  \n    2.  To install MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)]:  \n  \n        1.  Open **Control Panel**.  \n  \n        2.  Click **Programs** and then, under **Programs and Features**, click **Turn Windows Features on and off**.  \n  \n        3.  Expand **Microsoft Message Queue (MSMQ) Server**, expand **Microsoft Message Queue (MSMQ) Server Core**, and then select the check boxes for the following Message Queuing features to install:  \n  \n            -   Message Queuing Server  \n  \n            -   MSMQ Active Directory Domain Services Integration (for computers joined to a domain)  \n  \n            -   MSMQ HTTP Support  \n  \n        4.  Click **OK**.  \n  \n        5.  If you are prompted to restart the computer, click **OK** to complete the installation.  \n  \n2.  Ensure that [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] is installed on the computer.  \n  \n3.  Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the ReceiveContextProductGenerator.sln solution file.  \n  \n4.  To build the solution, press CTRL+SHIFT+B.  \n  \n5.  To run the solution, press CTRL+F5.","nodes":[{"pos":[12,64],"content":"ReceiveContext-Enabled WCF Channels | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"ReceiveContext-Enabled WCF Channels | Microsoft Docs","pos":[0,52]}]},{"pos":[363,398],"content":"ReceiveContext-Enabled WCF Channels","linkify":"ReceiveContext-Enabled WCF Channels","nodes":[{"content":"ReceiveContext-Enabled WCF Channels","pos":[0,35]}]},{"content":"This sample demonstrates the usefulness of <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.ReceiveContext&gt;</ph>-enabled WCF channels.","pos":[399,514],"source":"This sample demonstrates the usefulness of <xref:System.ServiceModel.Channels.ReceiveContext>-enabled WCF channels."},{"content":"The sample implements a service to find the product of two numbers using a NetMSMQ channel.","pos":[515,606]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.ReceiveContext&gt;</ph> class enables an application to decide whether to access the message or leave it in the queue for further processing, even after the contents of the message have been inspected.","pos":[613,845],"source":"The <xref:System.ServiceModel.Channels.ReceiveContext> class enables an application to decide whether to access the message or leave it in the queue for further processing, even after the contents of the message have been inspected."},{"content":"In this sample, a client sends random integers to a transactional queue.","pos":[846,918]},{"content":"The <ph id=\"ph1\">`ProductCalculator`</ph> service receives the messages and inspects the message contents, which are integers, to determine whether the product can be computed.","pos":[919,1077],"source":" The `ProductCalculator` service receives the messages and inspects the message contents, which are integers, to determine whether the product can be computed."},{"content":"If the service operation does not compute the product, the message is put back into the queue and can be received again by the service listening on the queue.","pos":[1078,1236]},{"pos":[1244,1377],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing:","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing:","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing:","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1431,1757],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory:","pos":[1758,1808]},{"pos":[1920,1938],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"content":"Ensure that Microsoft Message Queuing (MSMQ) is installed.","pos":[1948,2006]},{"pos":[2020,2095],"content":"To install MSMQ on <ph id=\"ph1\">[!INCLUDE[lserver](../../../../includes/lserver-md.md)]</ph>:","source":"To install MSMQ on [!INCLUDE[lserver](../../../../includes/lserver-md.md)]:"},{"pos":[2113,2155],"content":"In <bpt id=\"p1\">**</bpt>Server Manager<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Features<ept id=\"p2\">**</ept>.","source":"In **Server Manager**, click **Features**."},{"pos":[2173,2242],"content":"In the right pane under <bpt id=\"p1\">**</bpt>Features Summary<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Add Features<ept id=\"p2\">**</ept>.","source":"In the right pane under **Features Summary**, click **Add Features**."},{"pos":[2260,2312],"content":"In the resulting window, expand <bpt id=\"p1\">**</bpt>Message Queuing<ept id=\"p1\">**</ept>.","source":"In the resulting window, expand **Message Queuing**."},{"pos":[2330,2366],"content":"Expand <bpt id=\"p1\">**</bpt>Message Queuing Services<ept id=\"p1\">**</ept>.","source":"Expand **Message Queuing Services**."},{"pos":[2384,2493],"content":"Click <bpt id=\"p1\">**</bpt>Directory Services Integration<ept id=\"p1\">**</ept> (for computers joined to a domain), and then click <bpt id=\"p2\">**</bpt>HTTP Support<ept id=\"p2\">**</ept>.","source":"Click **Directory Services Integration** (for computers joined to a domain), and then click **HTTP Support**."},{"pos":[2511,2554],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Install<ept id=\"p2\">**</ept>.","source":"Click **Next**, and then click **Install**."},{"pos":[2568,2633],"content":"To install MSMQ on <ph id=\"ph1\">[!INCLUDE[wv](../../../../includes/wv-md.md)]</ph>:","source":"To install MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)]:"},{"pos":[2651,2674],"content":"Open <bpt id=\"p1\">**</bpt>Control Panel<ept id=\"p1\">**</ept>.","source":"Open **Control Panel**."},{"pos":[2692,2797],"content":"Click <bpt id=\"p1\">**</bpt>Programs<ept id=\"p1\">**</ept> and then, under <bpt id=\"p2\">**</bpt>Programs and Features<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>Turn Windows Features on and off<ept id=\"p3\">**</ept>.","source":"Click **Programs** and then, under **Programs and Features**, click **Turn Windows Features on and off**."},{"pos":[2815,3006],"content":"Expand <bpt id=\"p1\">**</bpt>Microsoft Message Queue (MSMQ) Server<ept id=\"p1\">**</ept>, expand <bpt id=\"p2\">**</bpt>Microsoft Message Queue (MSMQ) Server Core<ept id=\"p2\">**</ept>, and then select the check boxes for the following Message Queuing features to install:","source":"Expand **Microsoft Message Queue (MSMQ) Server**, expand **Microsoft Message Queue (MSMQ) Server Core**, and then select the check boxes for the following Message Queuing features to install:"},{"content":"Message Queuing Server","pos":[3028,3050]},{"content":"MSMQ Active Directory Domain Services Integration (for computers joined to a domain)","pos":[3072,3156]},{"content":"MSMQ HTTP Support","pos":[3178,3195]},{"pos":[3213,3226],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Click **OK**."},{"pos":[3244,3331],"content":"If you are prompted to restart the computer, click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to complete the installation.","source":"If you are prompted to restart the computer, click **OK** to complete the installation."},{"pos":[3341,3454],"content":"Ensure that <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph> is installed on the computer.","source":"Ensure that [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] is installed on the computer."},{"pos":[3464,3601],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>, open the ReceiveContextProductGenerator.sln solution file.","source":"Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the ReceiveContextProductGenerator.sln solution file."},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[3611,3653]},{"content":"To run the solution, press CTRL+F5.","pos":[3663,3698]}]}