{"content":"---\ntitle: Perform grouped joins (LINQ in C#)\ndescription: Learn how to perform grouped joins using LINQ in C#.\nms.date: 12/01/2016\nms.assetid: 9667daf9-a5fd-4b43-a5c4-a9c2b744000e\n---\n# Perform grouped joins\n\nThe group join is useful for producing hierarchical data structures. It pairs each element from the first collection with a set of correlated elements from the second collection.\n\nFor example, a class or a relational database table named `Student` might contain two fields: `Id` and `Name`. A second class or relational database table named `Course` might contain two fields: `StudentId` and `CourseTitle`. A group join of these two data sources, based on matching `Student.Id` and `Course.StudentId`, would group each `Student` with a collection of `Course` objects (which might be empty).\n\n> [!NOTE]\n> Each element of the first collection appears in the result set of a group join regardless of whether correlated elements are found in the second collection. In the case where no correlated elements are found, the sequence of correlated elements for that element is empty. The result selector therefore has access to every element of the first collection. This differs from the result selector in a non-group join, which cannot access elements from the first collection that have no match in the second collection.\n\nThe first example in this article shows you how to perform a group join. The second example shows you how to use a group join to create XML elements.\n\n## Example - Group join\n\nThe following example performs a group join of objects of type `Person` and `Pet` based on the `Person` matching the `Pet.Owner` property. Unlike a non-group join, which would produce a pair of elements for each match, the group join produces only one resulting object for each element of the first collection, which in this example is a `Person` object. The corresponding elements from the second collection, which in this example are `Pet` objects, are grouped into a collection. Finally, the result selector function creates an anonymous type for each match that consists of `Person.FirstName` and a collection of `Pet` objects.\n\n[!code-csharp[CsLINQProgJoining#5](~/samples/snippets/csharp/concepts/linq/how-to-perform-grouped-joins_1.cs)]\n\n## Example - Group join to create XML\n\nGroup joins are ideal for creating XML by using LINQ to XML. The following example is similar to the previous example except that instead of creating anonymous types, the result selector function creates XML elements that represent the joined objects.\n\n[!code-csharp[CsLINQProgJoining#6](~/samples/snippets/csharp/concepts/linq/how-to-perform-grouped-joins_2.cs)]\n\n## See also\n\n- <xref:System.Linq.Enumerable.Join%2A>\n- <xref:System.Linq.Enumerable.GroupJoin%2A>\n- [Perform inner joins](perform-inner-joins.md)\n- [Perform left outer joins](perform-left-outer-joins.md)\n- [Anonymous types](../programming-guide/classes-and-structs/anonymous-types.md)\n","nodes":[{"pos":[4,180],"embed":true,"restype":"x-metadata","content":"title: Perform grouped joins (LINQ in C#)\ndescription: Learn how to perform grouped joins using LINQ in C#.\nms.date: 12/01/2016\nms.assetid: 9667daf9-a5fd-4b43-a5c4-a9c2b744000e","nodes":[{"content":"Perform grouped joins (LINQ in C#)","nodes":[{"pos":[0,34],"content":"Perform grouped joins (LINQ in C#)","nodes":[{"content":"Perform grouped joins (LINQ in C#)","pos":[0,34]}]}],"path":["title"],"nosxs":false},{"content":"Learn how to perform grouped joins using LINQ in C#.","nodes":[{"pos":[0,52],"content":"Learn how to perform grouped joins using LINQ in C#.","nodes":[{"content":"Learn how to perform grouped joins using LINQ in C#.","pos":[0,52]}]}],"path":["description"],"nosxs":false}],"yml":true},{"pos":[187,208],"content":"Perform grouped joins","linkify":"Perform grouped joins","nodes":[{"content":"Perform grouped joins","pos":[0,21]}]},{"content":"The group join is useful for producing hierarchical data structures.","pos":[210,278]},{"content":"It pairs each element from the first collection with a set of correlated elements from the second collection.","pos":[279,388]},{"content":"For example, a class or a relational database table named <ph id=\"ph1\">`Student`</ph> might contain two fields: <ph id=\"ph2\">`Id`</ph> and <ph id=\"ph3\">`Name`</ph>.","pos":[390,500],"source":"For example, a class or a relational database table named `Student` might contain two fields: `Id` and `Name`."},{"content":"A second class or relational database table named <ph id=\"ph1\">`Course`</ph> might contain two fields: <ph id=\"ph2\">`StudentId`</ph> and <ph id=\"ph3\">`CourseTitle`</ph>.","pos":[501,616],"source":" A second class or relational database table named `Course` might contain two fields: `StudentId` and `CourseTitle`."},{"content":"A group join of these two data sources, based on matching <ph id=\"ph1\">`Student.Id`</ph> and <ph id=\"ph2\">`Course.StudentId`</ph>, would group each <ph id=\"ph3\">`Student`</ph> with a collection of <ph id=\"ph4\">`Course`</ph> objects (which might be empty).","pos":[617,800],"source":" A group join of these two data sources, based on matching `Student.Id` and `Course.StudentId`, would group each `Student` with a collection of `Course` objects (which might be empty)."},{"pos":[804,1327],"content":"[!NOTE]\nEach element of the first collection appears in the result set of a group join regardless of whether correlated elements are found in the second collection. In the case where no correlated elements are found, the sequence of correlated elements for that element is empty. The result selector therefore has access to every element of the first collection. This differs from the result selector in a non-group join, which cannot access elements from the first collection that have no match in the second collection.","leadings":["","> "],"nodes":[{"content":"Each element of the first collection appears in the result set of a group join regardless of whether correlated elements are found in the second collection. In the case where no correlated elements are found, the sequence of correlated elements for that element is empty. The result selector therefore has access to every element of the first collection. This differs from the result selector in a non-group join, which cannot access elements from the first collection that have no match in the second collection.","pos":[8,521],"nodes":[{"content":"Each element of the first collection appears in the result set of a group join regardless of whether correlated elements are found in the second collection.","pos":[0,156]},{"content":"In the case where no correlated elements are found, the sequence of correlated elements for that element is empty.","pos":[157,271]},{"content":"The result selector therefore has access to every element of the first collection.","pos":[272,354]},{"content":"This differs from the result selector in a non-group join, which cannot access elements from the first collection that have no match in the second collection.","pos":[355,513]}]}]},{"content":"The first example in this article shows you how to perform a group join.","pos":[1329,1401]},{"content":"The second example shows you how to use a group join to create XML elements.","pos":[1402,1478]},{"pos":[1483,1503],"content":"Example - Group join","linkify":"Example - Group join","nodes":[{"content":"Example - Group join","pos":[0,20]}]},{"content":"The following example performs a group join of objects of type <ph id=\"ph1\">`Person`</ph> and <ph id=\"ph2\">`Pet`</ph> based on the <ph id=\"ph3\">`Person`</ph> matching the <ph id=\"ph4\">`Pet.Owner`</ph> property.","pos":[1505,1643],"source":"The following example performs a group join of objects of type `Person` and `Pet` based on the `Person` matching the `Pet.Owner` property."},{"content":"Unlike a non-group join, which would produce a pair of elements for each match, the group join produces only one resulting object for each element of the first collection, which in this example is a <ph id=\"ph1\">`Person`</ph> object.","pos":[1644,1859],"source":" Unlike a non-group join, which would produce a pair of elements for each match, the group join produces only one resulting object for each element of the first collection, which in this example is a `Person` object."},{"content":"The corresponding elements from the second collection, which in this example are <ph id=\"ph1\">`Pet`</ph> objects, are grouped into a collection.","pos":[1860,1986],"source":" The corresponding elements from the second collection, which in this example are `Pet` objects, are grouped into a collection."},{"content":"Finally, the result selector function creates an anonymous type for each match that consists of <ph id=\"ph1\">`Person.FirstName`</ph> and a collection of <ph id=\"ph2\">`Pet`</ph> objects.","pos":[1987,2136],"source":" Finally, the result selector function creates an anonymous type for each match that consists of `Person.FirstName` and a collection of `Pet` objects."},{"pos":[2253,2287],"content":"Example - Group join to create XML","linkify":"Example - Group join to create XML","nodes":[{"content":"Example - Group join to create XML","pos":[0,34]}]},{"content":"Group joins are ideal for creating XML by using LINQ to XML.","pos":[2289,2349]},{"content":"The following example is similar to the previous example except that instead of creating anonymous types, the result selector function creates XML elements that represent the joined objects.","pos":[2350,2540]},{"pos":[2657,2665],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2754,2799],"content":"<bpt id=\"p1\">[</bpt>Perform inner joins<ept id=\"p1\">](perform-inner-joins.md)</ept>","source":"[Perform inner joins](perform-inner-joins.md)"},{"pos":[2802,2857],"content":"<bpt id=\"p1\">[</bpt>Perform left outer joins<ept id=\"p1\">](perform-left-outer-joins.md)</ept>","source":"[Perform left outer joins](perform-left-outer-joins.md)"},{"pos":[2860,2938],"content":"<bpt id=\"p1\">[</bpt>Anonymous types<ept id=\"p1\">](../programming-guide/classes-and-structs/anonymous-types.md)</ept>","source":"[Anonymous types](../programming-guide/classes-and-structs/anonymous-types.md)"}]}