{"content":"---\ntitle: \"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 62210fd8-a372-4d55-ab9b-c99827d1885e\n---\n# How to: Exchange Messages with WCF Endpoints and Message Queuing Applications\nYou can integrate existing Message Queuing (MSMQ) applications with Windows Communication Foundation (WCF) applications by using the MSMQ integration binding to convert MSMQ messages to and from WCF messages. This allows you to call into MSMQ receiver applications from WCF clients as well as call into WCF services from MSMQ sender applications.  \n  \n In this section, we explain how to use <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> for queued communication between (1) a WCF client and an MSMQ application service written using System.Messaging and (2) an MSMQ application client and a WCF service.  \n  \n For a complete sample that demonstrates how to call a MSMQ receiver application from a WCF client, see the [Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md) sample.  \n  \n For a complete sample that demonstrates how to call a WCF service from a MSMQ client, see the [Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md) sample.  \n  \n### To create a WCF service that receives messages from a MSMQ client  \n  \n1.  Define an interface that defines the service contract for the WCF service that receives queued messages from a MSMQ sender application, as shown in the following example code.  \n  \n     [!code-csharp[S_MsmqToWcf#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#1)]\n     [!code-vb[S_MsmqToWcf#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#1)]  \n  \n2.  Implement the interface and apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to the class, as shown in the following example code.  \n  \n     [!code-csharp[S_MsmqToWcf#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#2)]\n     [!code-vb[S_MsmqToWcf#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#2)]  \n  \n3.  Create a configuration file that specifies the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.  \n\n4.  Instantiate a <xref:System.ServiceModel.ServiceHost> object that uses the configured binding.  \n\n### To create a WCF client that sends messages to a MSMQ receiver application  \n  \n1.  Define an interface that defines the service contract for the WCF client that sends queued messages to the MSMQ receiver, as shown in the following example code.  \n  \n     [!code-csharp[S_WcfToMsmq#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/proxy.cs#6)]\n     [!code-vb[S_WcfToMsmq#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/proxy.vb#6)]  \n  \n2.  Define a client class that the WCF client uses to call the MSMQ receiver.  \n  \n     [!code-csharp[S_WcfToMsmq#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#2)]\n     [!code-vb[S_WcfToMsmq#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#2)]  \n  \n3.  Create a configuration that specifies use of the MsmqIntegrationBinding binding.  \n  \n     [!code-csharp[S_WcfToMsmq#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#3)]\n     [!code-vb[S_WcfToMsmq#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#3)]  \n  \n4.  Create an instance of the client class and call the method defined by the message receiving service.  \n  \n     [!code-csharp[S_WcfToMsmq#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/client.cs#4)]  \n  \n## See also\n\n- [Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md)\n- [How to: Exchange Queued Messages with WCF Endpoints](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)\n- [Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)\n- [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)\n- [Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)\n- [Message Security over Message Queuing](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)\n","nodes":[{"pos":[4,195],"embed":true,"restype":"x-metadata","content":"title: \"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 62210fd8-a372-4d55-ab9b-c99827d1885e","nodes":[{"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","nodes":[{"pos":[0,77],"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","nodes":[{"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","pos":[0,77]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[202,279],"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","linkify":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","nodes":[{"content":"How to: Exchange Messages with WCF Endpoints and Message Queuing Applications","pos":[0,77]}]},{"content":"You can integrate existing Message Queuing (MSMQ) applications with Windows Communication Foundation (WCF) applications by using the MSMQ integration binding to convert MSMQ messages to and from WCF messages.","pos":[280,488]},{"content":"This allows you to call into MSMQ receiver applications from WCF clients as well as call into WCF services from MSMQ sender applications.","pos":[489,626]},{"pos":[633,904],"content":"In this section, we explain how to use <ph id=\"ph1\">&lt;xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding&gt;</ph> for queued communication between (1) a WCF client and an MSMQ application service written using System.Messaging and (2) an MSMQ application client and a WCF service.","source":"In this section, we explain how to use <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> for queued communication between (1) a WCF client and an MSMQ application service written using System.Messaging and (2) an MSMQ application client and a WCF service."},{"pos":[911,1145],"content":"For a complete sample that demonstrates how to call a MSMQ receiver application from a WCF client, see the <bpt id=\"p1\">[</bpt>Windows Communication Foundation to Message Queuing<ept id=\"p1\">](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)</ept> sample.","source":"For a complete sample that demonstrates how to call a MSMQ receiver application from a WCF client, see the [Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md) sample."},{"pos":[1152,1373],"content":"For a complete sample that demonstrates how to call a WCF service from a MSMQ client, see the <bpt id=\"p1\">[</bpt>Message Queuing to Windows Communication Foundation<ept id=\"p1\">](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)</ept> sample.","source":"For a complete sample that demonstrates how to call a WCF service from a MSMQ client, see the [Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md) sample."},{"pos":[1383,1448],"content":"To create a WCF service that receives messages from a MSMQ client","linkify":"To create a WCF service that receives messages from a MSMQ client","nodes":[{"content":"To create a WCF service that receives messages from a MSMQ client","pos":[0,65]}]},{"content":"Define an interface that defines the service contract for the WCF service that receives queued messages from a MSMQ sender application, as shown in the following example code.","pos":[1458,1633]},{"pos":[1644,1871],"content":"[!code-csharp[S_MsmqToWcf#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#1)]\n [!code-vb[S_MsmqToWcf#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#1)]","leadings":["","    "],"nodes":[]},{"pos":[1881,2034],"content":"Implement the interface and apply the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute to the class, as shown in the following example code.","source":"Implement the interface and apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to the class, as shown in the following example code."},{"pos":[2045,2272],"content":"[!code-csharp[S_MsmqToWcf#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_msmqtowcf/cs/service.cs#2)]\n [!code-vb[S_MsmqToWcf#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_msmqtowcf/vb/service.vb#2)]","leadings":["","    "],"nodes":[]},{"pos":[2282,2395],"content":"Create a configuration file that specifies the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding&gt;</ph>.","source":"Create a configuration file that specifies the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>."},{"pos":[2403,2496],"content":"Instantiate a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> object that uses the configured binding.","source":"Instantiate a <xref:System.ServiceModel.ServiceHost> object that uses the configured binding."},{"pos":[2504,2577],"content":"To create a WCF client that sends messages to a MSMQ receiver application","linkify":"To create a WCF client that sends messages to a MSMQ receiver application","nodes":[{"content":"To create a WCF client that sends messages to a MSMQ receiver application","pos":[0,73]}]},{"content":"Define an interface that defines the service contract for the WCF client that sends queued messages to the MSMQ receiver, as shown in the following example code.","pos":[2587,2748]},{"pos":[2759,2982],"content":"[!code-csharp[S_WcfToMsmq#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/proxy.cs#6)]\n [!code-vb[S_WcfToMsmq#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/proxy.vb#6)]","leadings":["","    "],"nodes":[]},{"content":"Define a client class that the WCF client uses to call the MSMQ receiver.","pos":[2992,3065]},{"pos":[3076,3305],"content":"[!code-csharp[S_WcfToMsmq#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#2)]\n [!code-vb[S_WcfToMsmq#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#2)]","leadings":["","    "],"nodes":[]},{"content":"Create a configuration that specifies use of the MsmqIntegrationBinding binding.","pos":[3315,3395]},{"pos":[3406,3635],"content":"[!code-csharp[S_WcfToMsmq#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_wcftomsmq/cs/snippets.cs#3)]\n [!code-vb[S_WcfToMsmq#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_wcftomsmq/vb/snippets.vb#3)]","leadings":["","    "],"nodes":[]},{"content":"Create an instance of the client class and call the method defined by the message receiving service.","pos":[3645,3745]},{"pos":[3874,3882],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3886,3970],"content":"<bpt id=\"p1\">[</bpt>Queues Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/queues-overview.md)</ept>","source":"[Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md)"},{"pos":[3973,4128],"content":"<bpt id=\"p1\">[</bpt>How to: Exchange Queued Messages with WCF Endpoints<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)</ept>","source":"[How to: Exchange Queued Messages with WCF Endpoints](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)"},{"pos":[4131,4250],"content":"<bpt id=\"p1\">[</bpt>Windows Communication Foundation to Message Queuing<ept id=\"p1\">](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)</ept>","source":"[Windows Communication Foundation to Message Queuing](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)"},{"pos":[4253,4363],"content":"<bpt id=\"p1\">[</bpt>Installing Message Queuing (MSMQ)<ept id=\"p1\">](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)</ept>","source":"[Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)"},{"pos":[4366,4485],"content":"<bpt id=\"p1\">[</bpt>Message Queuing to Windows Communication Foundation<ept id=\"p1\">](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)</ept>","source":"[Message Queuing to Windows Communication Foundation](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)"},{"pos":[4488,4608],"content":"<bpt id=\"p1\">[</bpt>Message Security over Message Queuing<ept id=\"p1\">](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)</ept>","source":"[Message Security over Message Queuing](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)"}]}