{"content":"---\ntitle: \"<sqlWorkflowInstanceStore>\"\nms.date: \"03/30/2017\"\nms.topic: \"reference\"\nms.assetid: 8a4e4214-fc51-4f4d-b968-0427c37a9520\n---\n# \\<sqlWorkflowInstanceStore>\nA service behavior that allows you to configure the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> feature, which supports persisting state information for workflow service instances into an SQL Server 2005 or SQL Server 2008 database. For more information on this feature, see [SQL Workflow Instance Store](../../../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md).  \n  \n\\<system.ServiceModel>  \n\\<behaviors>  \n\\<serviceBehaviors>  \n\\<behavior>  \n\\<sqlWorkflowInstanceStore>  \n  \n## Syntax  \n  \n```xml  \n<behaviors>\n  <serviceBehaviors>\n    <behavior name=\"String\">\n      <sqlWorkflowInstanceStore connectionStringName=\"String\" \n                                honstLockRenewalPeriod=\"TimeSpan\" \n                                instanceCompletionAction=\"DeleteNothing/DeleteAll\" \n                                instanceEncodingAction=\"None/GZip\" \n                                instanceLockedExceptionAction=\"NoRetry/BasicRetry/AggressiveRetry\" \n                                runnableInstancesDetectionPeriod=\"TimeSpan\" />\n    </behavior>\n  </serviceBehaviors>\n</behaviors>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements.  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|connectionString|A string that contains a connection string used to connect to an underlying persistence database.|  \n|connectionStringName|A string that contains a named connection string to the database server. An example of a named connection string is \"DefaultConnectionString\".|  \n|honstLockRenewalPeriod|A Timespan value that specifies the time period in which the host must renew the lock on an instance. If the host does not renew the lock in the specified time period, the instance is unlocked and may be picked up by another host.<br /><br /> Unloading a workflow implies that it is also persisted. If this attribute is set to zero the workflow instance is persisted and unloaded immediately after the workflow becomes idle. Setting this attribute to TimeSpan.MaxValue effectively disables the unload operation. Idle workflow instances are never unloaded.|  \n|instanceCompletionAction|A value that specifies whether workflow instance data is kept in the persistence store after the workflow instance completes or if it is deleted at that point. This value is of type <xref:System.Activities.DurableInstancing.InstanceCompletionAction>.<br /><br /> The enumerated actions consist of deleting the instance data from the persistence store or not deleting the instance data from the persistence store, when the instance has completed its operation.<br /><br /> Keeping instances after completion causes the persistence database to grow rapidly and this affects the performance of the database. You should configure a database purge policy to delete these records periodically to ensure that the performance of the database is at the level that satisfy your performance requirements.|  \n|instanceEncodingOption|An optional value that specifies  whether the instance state information is compressed using the GZip algorithm before the information is saved in the persistence store.. This value is of type <xref:System.Activities.DurableInstancing.InstanceEncodingOption>. Possible values for this property are <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>, which specifies no compression, and <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>, which specifies that instance data is compressed and uses the gzip algorithm.|  \n|instanceLockedExceptionAction|A value that specifies the action that occurs in response to an exception that is thrown when the host tries to lock an instance because the instance is currently locked by another host. This value is of type <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>.<br /><br /> The options allowed for this field are: None, Basic Retry, and Aggressive Retry. The default value is None. The following list provides you with the descriptions for these three options:<br /><br /> -   None. The service host does not attempt to lock the instance and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller.<br />-   Basic Retry. The service host reattempts to lock the instance with a linear retry interval and passes the exception to the caller at the end of the sequence.<br />-   Aggressive Retry. The service host reattempts to lock the instance with an exponentially increasing delay and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller at the end of the sequence.|  \n|runnableInstancesDetectionPeriod||  \n  \n### Child Elements  \n None.  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<behavior> of \\<serviceBehaviors>](../../../../../docs/framework/configure-apps/file-schema/windows-workflow-foundation/behavior-of-servicebehaviors-of-workflow.md)|Specifies a behavior element.|  \n  \n## See also\n\n- <xref:System.ServiceModel.Activities.Description.SqlWorkflowInstanceStoreBehavior>\n- <xref:System.ServiceModel.Activities.Configuration.SqlWorkflowInstanceStoreElement>\n- <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>\n- [SQL Workflow Instance Store](../../../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)\n","nodes":[{"pos":[4,132],"embed":true,"restype":"x-metadata","content":"title: \"<sqlWorkflowInstanceStore>\"\nms.date: \"03/30/2017\"\nms.topic: \"reference\"\nms.assetid: 8a4e4214-fc51-4f4d-b968-0427c37a9520","nodes":[{"content":"<sqlWorkflowInstanceStore>","nodes":[],"path":["title"],"nosxs":false}],"yml":true},{"pos":[139,166],"content":"\\<sqlWorkflowInstanceStore>","linkify":"\\<sqlWorkflowInstanceStore>","nodes":[{"content":"<ph id=\"ph1\">\\&lt;</ph>sqlWorkflowInstanceStore&gt;","pos":[0,27],"source":"\\<sqlWorkflowInstanceStore>"}]},{"content":"A service behavior that allows you to configure the <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore&gt;</ph> feature, which supports persisting state information for workflow service instances into an SQL Server 2005 or SQL Server 2008 database.","pos":[167,423],"source":"A service behavior that allows you to configure the <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore> feature, which supports persisting state information for workflow service instances into an SQL Server 2005 or SQL Server 2008 database."},{"content":"For more information on this feature, see <bpt id=\"p1\">[</bpt>SQL Workflow Instance Store<ept id=\"p1\">](../../../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)</ept>.","pos":[424,586],"source":" For more information on this feature, see [SQL Workflow Instance Store](../../../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)."},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.ServiceModel&gt;","pos":[592,614],"source":"\\<system.ServiceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behaviors&gt;","pos":[617,629],"source":"\\<behaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>serviceBehaviors&gt;","pos":[632,651],"source":"\\<serviceBehaviors>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>behavior&gt;","pos":[654,665],"source":"\\<behavior>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>sqlWorkflowInstanceStore&gt;","pos":[668,695],"source":"\\<sqlWorkflowInstanceStore>"},{"pos":[704,710],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1313,1336],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements.","pos":[1340,1420]},{"pos":[1430,1440],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1447,1456]},{"content":"Description","pos":[1457,1468]},{"content":"connectionString","pos":[1511,1527]},{"content":"A string that contains a connection string used to connect to an underlying persistence database.","pos":[1528,1625]},{"content":"connectionStringName","pos":[1630,1650]},{"content":"A string that contains a named connection string to the database server.","pos":[1651,1723]},{"content":"An example of a named connection string is \"DefaultConnectionString\".","pos":[1724,1793]},{"content":"honstLockRenewalPeriod","pos":[1798,1820]},{"content":"A Timespan value that specifies the time period in which the host must renew the lock on an instance.","pos":[1821,1922]},{"content":"If the host does not renew the lock in the specified time period, the instance is unlocked and may be picked up by another host.","pos":[1923,2051]},{"content":"Unloading a workflow implies that it is also persisted.","pos":[2064,2119]},{"content":"If this attribute is set to zero the workflow instance is persisted and unloaded immediately after the workflow becomes idle.","pos":[2120,2245]},{"content":"Setting this attribute to TimeSpan.MaxValue effectively disables the unload operation.","pos":[2246,2332]},{"content":"Idle workflow instances are never unloaded.","pos":[2333,2376]},{"content":"instanceCompletionAction","pos":[2381,2405]},{"content":"A value that specifies whether workflow instance data is kept in the persistence store after the workflow instance completes or if it is deleted at that point.","pos":[2406,2565]},{"content":"This value is of type <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.InstanceCompletionAction&gt;</ph>.","pos":[2566,2656],"source":" This value is of type <xref:System.Activities.DurableInstancing.InstanceCompletionAction>."},{"content":"The enumerated actions consist of deleting the instance data from the persistence store or not deleting the instance data from the persistence store, when the instance has completed its operation.","pos":[2669,2865]},{"content":"Keeping instances after completion causes the persistence database to grow rapidly and this affects the performance of the database.","pos":[2878,3010]},{"content":"You should configure a database purge policy to delete these records periodically to ensure that the performance of the database is at the level that satisfy your performance requirements.","pos":[3011,3199]},{"content":"instanceEncodingOption","pos":[3204,3226]},{"content":"An optional value that specifies  whether the instance state information is compressed using the GZip algorithm before the information is saved in the persistence store..","pos":[3227,3397]},{"content":"This value is of type <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.InstanceEncodingOption&gt;</ph>.","pos":[3398,3486],"source":" This value is of type <xref:System.Activities.DurableInstancing.InstanceEncodingOption>."},{"content":"Possible values for this property are <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.InstanceEncodingOption.None&gt;</ph>, which specifies no compression, and <ph id=\"ph2\">&lt;xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip&gt;</ph>, which specifies that instance data is compressed and uses the gzip algorithm.","pos":[3487,3782],"source":" Possible values for this property are <xref:System.Activities.DurableInstancing.InstanceEncodingOption.None>, which specifies no compression, and <xref:System.Activities.DurableInstancing.InstanceEncodingOption.GZip>, which specifies that instance data is compressed and uses the gzip algorithm."},{"content":"instanceLockedExceptionAction","pos":[3787,3816]},{"content":"A value that specifies the action that occurs in response to an exception that is thrown when the host tries to lock an instance because the instance is currently locked by another host.","pos":[3817,4003]},{"content":"This value is of type <ph id=\"ph1\">&lt;xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction&gt;</ph>.","pos":[4004,4099],"source":" This value is of type <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction>."},{"content":"The options allowed for this field are: None, Basic Retry, and Aggressive Retry.","pos":[4112,4192]},{"content":"The default value is None.","pos":[4193,4219]},{"content":"The following list provides you with the descriptions for these three options:","pos":[4220,4298]},{"content":"-   None.","pos":[4311,4320]},{"content":"The service host does not attempt to lock the instance and passes the <ph id=\"ph1\">&lt;xref:System.Runtime.DurableInstancing.InstanceLockedException&gt;</ph> to the caller.","pos":[4321,4469],"source":" The service host does not attempt to lock the instance and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller."},{"content":"-   Basic Retry.","pos":[4475,4491]},{"content":"The service host reattempts to lock the instance with a linear retry interval and passes the exception to the caller at the end of the sequence.","pos":[4492,4636]},{"content":"-   Aggressive Retry.","pos":[4642,4663]},{"content":"The service host reattempts to lock the instance with an exponentially increasing delay and passes the <ph id=\"ph1\">&lt;xref:System.Runtime.DurableInstancing.InstanceLockedException&gt;</ph> to the caller at the end of the sequence.","pos":[4664,4872],"source":" The service host reattempts to lock the instance with an exponentially increasing delay and passes the <xref:System.Runtime.DurableInstancing.InstanceLockedException> to the caller at the end of the sequence."},{"content":"runnableInstancesDetectionPeriod","pos":[4877,4909]},{"pos":[4921,4935],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"None.","pos":[4939,4944]},{"pos":[4954,4969],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[4976,4983]},{"content":"Description","pos":[4984,4995]},{"pos":[5036,5202],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behavior&gt; of <ph id=\"ph2\">\\&lt;</ph>serviceBehaviors&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/windows-workflow-foundation/behavior-of-servicebehaviors-of-workflow.md)</ept>","source":"[\\<behavior> of \\<serviceBehaviors>](../../../../../docs/framework/configure-apps/file-schema/windows-workflow-foundation/behavior-of-servicebehaviors-of-workflow.md)"},{"content":"Specifies a behavior element.","pos":[5203,5232]},{"pos":[5242,5250],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5495,5614],"content":"<bpt id=\"p1\">[</bpt>SQL Workflow Instance Store<ept id=\"p1\">](../../../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)</ept>","source":"[SQL Workflow Instance Store](../../../../../docs/framework/windows-workflow-foundation/sql-workflow-instance-store.md)"}]}