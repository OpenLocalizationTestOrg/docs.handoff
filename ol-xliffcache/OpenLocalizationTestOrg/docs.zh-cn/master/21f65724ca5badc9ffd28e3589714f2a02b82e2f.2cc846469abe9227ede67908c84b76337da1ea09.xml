{"content":"---\ntitle: \"Configuration Channel Factory | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 3b749493-bd8a-4ccb-893e-5948901a1486\ncaps.latest.revision: 10\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Configuration Channel Factory\nThis sample covers the usage of the <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601>. The <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> allows central management of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client configuration. This can also be useful in scenarios in which configuration is selected or changed after the application domain load time.  \n  \n## Demonstrates  \n <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601>  \n  \n## Discussion  \n This sample shows how to use <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> to add a particular configuration file to a client application, without having to use the default application configuration file.  \n  \n The sample consists of two projects. The first project is a simple service that runs to reply to messages coming from the clients. The second project is a client application that builds two <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> objects using a <xref:System.Configuration.ExeConfigurationFileMap> for the Test.config configuration file and uses them to communicate with the service. Both clients communicate with the service using the configuration specified in Test.config.  \n  \n The following code adds a custom configuration file to a client application.  \n  \n```  \nExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();  \nfileMap.ExeConfigFilename = \"Test.config\";  \nConfiguration newConfiguration = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);  \n  \nConfigurationChannelFactory<ICalculatorChannel> factory1 = new ConfigurationChannelFactory<ICalculatorChannel>(\"endpoint1\", newConfiguration, new EndpointAddress(\"http://localhost:8000/servicemodelsamples/service\"));  \nICalculatorChannel client1 = factory1.CreateChannel();  \n  \n```  \n  \n#### To set up, build, and run the sample  \n  \n1.  Open [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] with administrator privileges.  \n  \n2.  Right-click the ConfigurationChannelFactory solution (2 projects) and then select **Properties**.  \n  \n3.  In **Common Properties**, select **Startup Project**, and then click **Multiple startup projects**.  \n  \n4.  Move the **Service** project to the beginning of the list, with the **Action ‘Start’**, and then move the **Client** project after the **Service** project, also with the **Action ‘Start’**, so the **Client** project is executed after the **Service** project.  \n  \n5.  Click **OK**, and then press F5 (or CTRL+F5) to run the sample.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\ConfigurationChannelFactory`","nodes":[{"pos":[12,58],"content":"Configuration Channel Factory | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Configuration Channel Factory | Microsoft Docs","pos":[0,46]}]},{"pos":[357,386],"content":"Configuration Channel Factory","linkify":"Configuration Channel Factory","nodes":[{"content":"Configuration Channel Factory","pos":[0,29]}]},{"content":"This sample covers the usage of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601&gt;</ph>.","pos":[387,496],"source":"This sample covers the usage of the <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601&gt;</ph> allows central management of <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client configuration.","pos":[497,680],"source":" The <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> allows central management of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client configuration."},{"content":"This can also be useful in scenarios in which configuration is selected or changed after the application domain load time.","pos":[681,803]},{"pos":[812,824],"content":"Demonstrates","linkify":"Demonstrates","nodes":[{"content":"Demonstrates","pos":[0,12]}]},{"pos":[909,919],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"This sample shows how to use <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601&gt;</ph> to add a particular configuration file to a client application, without having to use the default application configuration file.","pos":[923,1154],"source":"This sample shows how to use <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> to add a particular configuration file to a client application, without having to use the default application configuration file."},{"content":"The sample consists of two projects.","pos":[1161,1197]},{"content":"The first project is a simple service that runs to reply to messages coming from the clients.","pos":[1198,1291]},{"content":"The second project is a client application that builds two <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601&gt;</ph> objects using a <ph id=\"ph2\">&lt;xref:System.Configuration.ExeConfigurationFileMap&gt;</ph> for the Test.config configuration file and uses them to communicate with the service.","pos":[1292,1577],"source":" The second project is a client application that builds two <xref:System.ServiceModel.Configuration.ConfigurationChannelFactory%601> objects using a <xref:System.Configuration.ExeConfigurationFileMap> for the Test.config configuration file and uses them to communicate with the service."},{"content":"Both clients communicate with the service using the configuration specified in Test.config.","pos":[1578,1669]},{"content":"The following code adds a custom configuration file to a client application.","pos":[1676,1752]},{"pos":[2294,2330],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2340,2447],"content":"Open <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph> with administrator privileges.","source":"Open [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] with administrator privileges."},{"pos":[2457,2554],"content":"Right-click the ConfigurationChannelFactory solution (2 projects) and then select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.","source":"Right-click the ConfigurationChannelFactory solution (2 projects) and then select **Properties**."},{"pos":[2564,2663],"content":"In <bpt id=\"p1\">**</bpt>Common Properties<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Startup Project<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Multiple startup projects<ept id=\"p3\">**</ept>.","source":"In **Common Properties**, select **Startup Project**, and then click **Multiple startup projects**."},{"pos":[2673,2931],"content":"Move the <bpt id=\"p1\">**</bpt>Service<ept id=\"p1\">**</ept> project to the beginning of the list, with the <bpt id=\"p2\">**</bpt>Action ‘Start’<ept id=\"p2\">**</ept>, and then move the <bpt id=\"p3\">**</bpt>Client<ept id=\"p3\">**</ept> project after the <bpt id=\"p4\">**</bpt>Service<ept id=\"p4\">**</ept> project, also with the <bpt id=\"p5\">**</bpt>Action ‘Start’<ept id=\"p5\">**</ept>, so the <bpt id=\"p6\">**</bpt>Client<ept id=\"p6\">**</ept> project is executed after the <bpt id=\"p7\">**</bpt>Service<ept id=\"p7\">**</ept> project.","source":"Move the **Service** project to the beginning of the list, with the **Action ‘Start’**, and then move the **Client** project after the **Service** project, also with the **Action ‘Start’**, so the **Client** project is executed after the **Service** project."},{"pos":[2941,3004],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>, and then press F5 (or CTRL+F5) to run the sample.","source":"Click **OK**, and then press F5 (or CTRL+F5) to run the sample."},{"pos":[3012,3144],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3198,3524],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3525,3575]}]}