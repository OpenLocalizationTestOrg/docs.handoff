{"content":"---\ntitle: \".NET Framework Cryptography Model\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"cryptography [.NET Framework], model\"\n  - \"encryption [.NET Framework], model\"\nms.assetid: 12fecad4-fbab-432a-bade-2f05976a2971\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# .NET Framework Cryptography Model\nThe .NET Framework provides implementations of many standard cryptographic algorithms. These algorithms are easy to use and have the safest possible default properties. In addition, the .NET Framework cryptography model of object inheritance, stream design, and configuration is extremely extensible.  \n  \n## Object Inheritance  \n The .NET Framework security system implements an extensible pattern of derived class inheritance. The hierarchy is as follows:  \n  \n-   Algorithm type class, such as <xref:System.Security.Cryptography.SymmetricAlgorithm>,  <xref:System.Security.Cryptography.AsymmetricAlgorithm> or <xref:System.Security.Cryptography.HashAlgorithm>. This level is abstract.  \n  \n-   Algorithm class that inherits from an algorithm type class; for example, <xref:System.Security.Cryptography.Aes>, <xref:System.Security.Cryptography.RC2>, or <xref:System.Security.Cryptography.ECDiffieHellman>. This level is abstract.  \n  \n-   Implementation of an algorithm class that inherits from an algorithm class; for example, <xref:System.Security.Cryptography.AesManaged>, <xref:System.Security.Cryptography.RC2CryptoServiceProvider>, or <xref:System.Security.Cryptography.ECDiffieHellmanCng>. This level is fully implemented.  \n  \n Using this pattern of derived classes, it is easy to add a new algorithm or a new implementation of an existing algorithm. For example, to create a new public-key algorithm, you would inherit from the <xref:System.Security.Cryptography.AsymmetricAlgorithm> class. To create a new implementation of a specific algorithm, you would create a non-abstract derived class of that algorithm.  \n  \n## How Algorithms Are Implemented in the .NET Framework  \n As an example of the different implementations available for an algorithm, consider symmetric algorithms. The base for all symmetric algorithms is <xref:System.Security.Cryptography.SymmetricAlgorithm>, which is inherited by the following algorithms:  \n  \n1.  <xref:System.Security.Cryptography.Aes>  \n  \n2.  <xref:System.Security.Cryptography.DES>  \n  \n3.  <xref:System.Security.Cryptography.RC2>  \n  \n4.  <xref:System.Security.Cryptography.Rijndael>  \n  \n5.  <xref:System.Security.Cryptography.TripleDES>  \n  \n <xref:System.Security.Cryptography.Aes> is inherited by two classes: <xref:System.Security.Cryptography.AesCryptoServiceProvider> and <xref:System.Security.Cryptography.AesManaged>. The <xref:System.Security.Cryptography.AesCryptoServiceProvider> class is a wrapper around the Windows Cryptography API (CAPI) implementation of Aes, whereas the <xref:System.Security.Cryptography.AesManaged> class is written entirely in managed code. There is also a third type of implementation, Cryptography Next Generation (CNG), in addition to the managed and CAPI implementations. An example of a CNG algorithm is <xref:System.Security.Cryptography.ECDiffieHellmanCng>. CNG algorithms are available on Windows Vista and later.  \n  \n You can choose which implementation is best for you.  The managed implementations are available on all platforms that support the .NET Framework.  The CAPI implementations are available on older operating systems, and are no longer being developed. CNG is the very latest implementation where new development will take place. However, the managed implementations are not certified by the Federal Information Processing Standards (FIPS), and may be slower than the wrapper classes.  \n  \n## Stream Design  \n The common language runtime uses a stream-oriented design for implementing symmetric algorithms and hash algorithms. The core of this design is the <xref:System.Security.Cryptography.CryptoStream> class, which derives from the <xref:System.IO.Stream> class. Stream-based cryptographic objects support a single standard interface (`CryptoStream`) for handling the data transfer portion of the object. Because all the objects are built on a standard interface, you can chain together multiple objects (such as a hash object followed by an encryption object), and you can perform multiple operations on the data without needing any intermediate storage for it. The streaming model also enables you to build objects from smaller objects. For example, a combined encryption and hash algorithm can be viewed as a single stream object, although this object might be built from a set of stream objects.  \n  \n## Cryptographic Configuration  \n Cryptographic configuration lets you resolve a specific implementation of an algorithm to an algorithm name, allowing extensibility of the .NET Framework cryptography classes. You can add your own hardware or software implementation of an algorithm and map the implementation to the algorithm name of your choice. If an algorithm is not specified in the configuration file, the default settings are used. For more information about cryptographic configuration, see [Configuring Cryptography Classes](../../../docs/framework/configure-apps/configure-cryptography-classes.md).  \n  \n## Choosing an Algorithm  \n You can select an algorithm for different reasons: for example, for data integrity, for data privacy, or to generate a key. Symmetric and hash algorithms are intended for protecting data for either integrity reasons (protect from change) or privacy reasons (protect from viewing). Hash algorithms are used primarily for data integrity.  \n  \n Here is a list of recommended algorithms by application:  \n  \n-   Data privacy:  \n  \n    -   <xref:System.Security.Cryptography.Aes>  \n  \n-   Data integrity:  \n  \n    -   <xref:System.Security.Cryptography.HMACSHA256>  \n  \n    -   <xref:System.Security.Cryptography.HMACSHA512>  \n  \n-   Digital signature:  \n  \n    -   <xref:System.Security.Cryptography.ECDsa>  \n  \n    -   <xref:System.Security.Cryptography.RSA>  \n  \n-   Key exchange:  \n  \n    -   <xref:System.Security.Cryptography.ECDiffieHellman>  \n  \n    -   <xref:System.Security.Cryptography.RSA>  \n  \n-   Random number generation:  \n  \n    -   <xref:System.Security.Cryptography.RNGCryptoServiceProvider>  \n  \n-   Generating a key from a password:  \n  \n    -   <xref:System.Security.Cryptography.Rfc2898DeriveBytes>  \n  \n## See also\n\n- [Cryptographic Services](../../../docs/standard/security/cryptographic-services.md)\n","nodes":[{"pos":[4,291],"embed":true,"restype":"x-metadata","content":"title: \".NET Framework Cryptography Model\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"cryptography [.NET Framework], model\"\n  - \"encryption [.NET Framework], model\"\nms.assetid: 12fecad4-fbab-432a-bade-2f05976a2971\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":".NET Framework Cryptography Model","nodes":[{"pos":[0,33],"content":".NET Framework Cryptography Model","nodes":[{"content":".NET Framework Cryptography Model","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[298,331],"content":".NET Framework Cryptography Model","linkify":".NET Framework Cryptography Model","nodes":[{"content":".NET Framework Cryptography Model","pos":[0,33]}]},{"content":"The .NET Framework provides implementations of many standard cryptographic algorithms.","pos":[332,418]},{"content":"These algorithms are easy to use and have the safest possible default properties.","pos":[419,500]},{"content":"In addition, the .NET Framework cryptography model of object inheritance, stream design, and configuration is extremely extensible.","pos":[501,632]},{"pos":[641,659],"content":"Object Inheritance","linkify":"Object Inheritance","nodes":[{"content":"Object Inheritance","pos":[0,18]}]},{"content":"The .NET Framework security system implements an extensible pattern of derived class inheritance.","pos":[663,760]},{"content":"The hierarchy is as follows:","pos":[761,789]},{"content":"Algorithm type class, such as <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.SymmetricAlgorithm&gt;</ph>,  <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.AsymmetricAlgorithm&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.HashAlgorithm&gt;</ph>.","pos":[799,995],"source":"Algorithm type class, such as <xref:System.Security.Cryptography.SymmetricAlgorithm>,  <xref:System.Security.Cryptography.AsymmetricAlgorithm> or <xref:System.Security.Cryptography.HashAlgorithm>."},{"content":"This level is abstract.","pos":[996,1019]},{"content":"Algorithm class that inherits from an algorithm type class; for example, <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Aes&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RC2&gt;</ph>, or <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.ECDiffieHellman&gt;</ph>.","pos":[1029,1239],"source":"Algorithm class that inherits from an algorithm type class; for example, <xref:System.Security.Cryptography.Aes>, <xref:System.Security.Cryptography.RC2>, or <xref:System.Security.Cryptography.ECDiffieHellman>."},{"content":"This level is abstract.","pos":[1240,1263]},{"content":"Implementation of an algorithm class that inherits from an algorithm class; for example, <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.AesManaged&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.RC2CryptoServiceProvider&gt;</ph>, or <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.ECDiffieHellmanCng&gt;</ph>.","pos":[1273,1530],"source":"Implementation of an algorithm class that inherits from an algorithm class; for example, <xref:System.Security.Cryptography.AesManaged>, <xref:System.Security.Cryptography.RC2CryptoServiceProvider>, or <xref:System.Security.Cryptography.ECDiffieHellmanCng>."},{"content":"This level is fully implemented.","pos":[1531,1563]},{"content":"Using this pattern of derived classes, it is easy to add a new algorithm or a new implementation of an existing algorithm.","pos":[1570,1692]},{"content":"For example, to create a new public-key algorithm, you would inherit from the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.AsymmetricAlgorithm&gt;</ph> class.","pos":[1693,1833],"source":" For example, to create a new public-key algorithm, you would inherit from the <xref:System.Security.Cryptography.AsymmetricAlgorithm> class."},{"content":"To create a new implementation of a specific algorithm, you would create a non-abstract derived class of that algorithm.","pos":[1834,1954]},{"pos":[1963,2015],"content":"How Algorithms Are Implemented in the .NET Framework","linkify":"How Algorithms Are Implemented in the .NET Framework","nodes":[{"content":"How Algorithms Are Implemented in the .NET Framework","pos":[0,52]}]},{"content":"As an example of the different implementations available for an algorithm, consider symmetric algorithms.","pos":[2019,2124]},{"content":"The base for all symmetric algorithms is <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.SymmetricAlgorithm&gt;</ph>, which is inherited by the following algorithms:","pos":[2125,2269],"source":" The base for all symmetric algorithms is <xref:System.Security.Cryptography.SymmetricAlgorithm>, which is inherited by the following algorithms:"},{"content":"<ph id=\"ph1\">&lt;xref:System.Security.Cryptography.Aes&gt;</ph> is inherited by two classes: <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.AesCryptoServiceProvider&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.Security.Cryptography.AesManaged&gt;</ph>.","pos":[2532,2713],"source":"<xref:System.Security.Cryptography.Aes> is inherited by two classes: <xref:System.Security.Cryptography.AesCryptoServiceProvider> and <xref:System.Security.Cryptography.AesManaged>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.AesCryptoServiceProvider&gt;</ph> class is a wrapper around the Windows Cryptography API (CAPI) implementation of Aes, whereas the <ph id=\"ph2\">&lt;xref:System.Security.Cryptography.AesManaged&gt;</ph> class is written entirely in managed code.","pos":[2714,2965],"source":" The <xref:System.Security.Cryptography.AesCryptoServiceProvider> class is a wrapper around the Windows Cryptography API (CAPI) implementation of Aes, whereas the <xref:System.Security.Cryptography.AesManaged> class is written entirely in managed code."},{"content":"There is also a third type of implementation, Cryptography Next Generation (CNG), in addition to the managed and CAPI implementations.","pos":[2966,3100]},{"content":"An example of a CNG algorithm is <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.ECDiffieHellmanCng&gt;</ph>.","pos":[3101,3189],"source":" An example of a CNG algorithm is <xref:System.Security.Cryptography.ECDiffieHellmanCng>."},{"content":"CNG algorithms are available on Windows Vista and later.","pos":[3190,3246]},{"content":"You can choose which implementation is best for you.","pos":[3253,3305]},{"content":"The managed implementations are available on all platforms that support the .NET Framework.","pos":[3307,3398]},{"content":"The CAPI implementations are available on older operating systems, and are no longer being developed.","pos":[3400,3501]},{"content":"CNG is the very latest implementation where new development will take place.","pos":[3502,3578]},{"content":"However, the managed implementations are not certified by the Federal Information Processing Standards (FIPS), and may be slower than the wrapper classes.","pos":[3579,3733]},{"pos":[3742,3755],"content":"Stream Design","linkify":"Stream Design","nodes":[{"content":"Stream Design","pos":[0,13]}]},{"content":"The common language runtime uses a stream-oriented design for implementing symmetric algorithms and hash algorithms.","pos":[3759,3875]},{"content":"The core of this design is the <ph id=\"ph1\">&lt;xref:System.Security.Cryptography.CryptoStream&gt;</ph> class, which derives from the <ph id=\"ph2\">&lt;xref:System.IO.Stream&gt;</ph> class.","pos":[3876,4016],"source":" The core of this design is the <xref:System.Security.Cryptography.CryptoStream> class, which derives from the <xref:System.IO.Stream> class."},{"content":"Stream-based cryptographic objects support a single standard interface (<ph id=\"ph1\">`CryptoStream`</ph>) for handling the data transfer portion of the object.","pos":[4017,4158],"source":" Stream-based cryptographic objects support a single standard interface (`CryptoStream`) for handling the data transfer portion of the object."},{"content":"Because all the objects are built on a standard interface, you can chain together multiple objects (such as a hash object followed by an encryption object), and you can perform multiple operations on the data without needing any intermediate storage for it.","pos":[4159,4416]},{"content":"The streaming model also enables you to build objects from smaller objects.","pos":[4417,4492]},{"content":"For example, a combined encryption and hash algorithm can be viewed as a single stream object, although this object might be built from a set of stream objects.","pos":[4493,4653]},{"pos":[4662,4689],"content":"Cryptographic Configuration","linkify":"Cryptographic Configuration","nodes":[{"content":"Cryptographic Configuration","pos":[0,27]}]},{"content":"Cryptographic configuration lets you resolve a specific implementation of an algorithm to an algorithm name, allowing extensibility of the .NET Framework cryptography classes.","pos":[4693,4868]},{"content":"You can add your own hardware or software implementation of an algorithm and map the implementation to the algorithm name of your choice.","pos":[4869,5006]},{"content":"If an algorithm is not specified in the configuration file, the default settings are used.","pos":[5007,5097]},{"content":"For more information about cryptographic configuration, see <bpt id=\"p1\">[</bpt>Configuring Cryptography Classes<ept id=\"p1\">](../../../docs/framework/configure-apps/configure-cryptography-classes.md)</ept>.","pos":[5098,5267],"source":" For more information about cryptographic configuration, see [Configuring Cryptography Classes](../../../docs/framework/configure-apps/configure-cryptography-classes.md)."},{"pos":[5276,5297],"content":"Choosing an Algorithm","linkify":"Choosing an Algorithm","nodes":[{"content":"Choosing an Algorithm","pos":[0,21]}]},{"content":"You can select an algorithm for different reasons: for example, for data integrity, for data privacy, or to generate a key.","pos":[5301,5424]},{"content":"Symmetric and hash algorithms are intended for protecting data for either integrity reasons (protect from change) or privacy reasons (protect from viewing).","pos":[5425,5581]},{"content":"Hash algorithms are used primarily for data integrity.","pos":[5582,5636]},{"content":"Here is a list of recommended algorithms by application:","pos":[5643,5699]},{"content":"Data privacy:","pos":[5709,5722]},{"content":"Data integrity:","pos":[5785,5800]},{"content":"Digital signature:","pos":[5930,5948]},{"content":"Key exchange:","pos":[6066,6079]},{"content":"Random number generation:","pos":[6207,6232]},{"content":"Generating a key from a password:","pos":[6316,6349]},{"pos":[6426,6434],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6438,6521],"content":"<bpt id=\"p1\">[</bpt>Cryptographic Services<ept id=\"p1\">](../../../docs/standard/security/cryptographic-services.md)</ept>","source":"[Cryptographic Services](../../../docs/standard/security/cryptographic-services.md)"}]}