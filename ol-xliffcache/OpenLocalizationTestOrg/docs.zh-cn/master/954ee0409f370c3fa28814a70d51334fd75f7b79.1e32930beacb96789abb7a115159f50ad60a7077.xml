{"content":"---\ntitle: Create an AJAX-Enabled WCF Service and an ASP.NET Client in Visual Studio\nms.date: 08/17/2018\nms.assetid: 95012df8-2a66-420d-944a-8afab261013e\n---\n# How to: Create an AJAX-Enabled WCF Service and an ASP.NET Client that Accesses the Service\n\nThis topic shows how to use Visual Studio to create an AJAX-enabled Windows Communication Foundation (WCF) service and an ASP.NET client that accesses the service.\n\n## Create an ASP.NET web app\n\n1. Open Visual Studio.\n\n1. From the **File** menu, select **New** > **Project**\n\n1. In the **New Project** dialog, expand the **Installed** > **Visual C#** > **Web** category, and then select **ASP.NET Web Application (.NET Framework)**.\n\n1. Name the Project **SandwichServices** and click **OK**.\n\n1. In the **New ASP.NET Web Application** dialog, select **Empty** and then select **OK**.\n\n   ![ASP.NET web app type dialog in Visual Studio](media/create-an-ajax-wcf-asp-net-client/new-asp-net-web-app-type.png)\n\n## Add a web form\n\n1. Right-click the SandwichServices project in **Solution Explorer** and select **Add** > **New Item**.\n\n1. In the **Add New Item** dialog, expand the **Installed** > **Visual C#** > **Web** category, and then select the **Web Form** template.\n\n1. Accept the default name (**WebForm1**), and then select **Add**.\n\n   *WebForm1.aspx* opens in **Source** view.\n\n1. Add the following markup inside the **\\<body>** tags:\n\n   ```html\n   <input type=\"button\" value=\"Price of 3 sandwiches\" onclick=\"Calculate()\"/>\n   <br />\n   <span id=\"additionResult\"></span>\n   ```\n\n## Create an AJAX-enabled WCF service\n\n1. Right-click the SandwichServices project in **Solution Explorer** and select **Add** > **New Item**.\n\n1. In the **Add New Item** dialog, expand the **Installed** > **Visual C#** > **Web** category, and then select the **WCF Service (AJAX-enabled)** template.\n\n   ![WCF Service (AJAX-enabled) item template in Visual Studio](media/create-an-ajax-wcf-asp-net-client/add-wcf-service.png)\n\n1. Name the service **CostService** and then select **Add**.\n\n   *CostService.svc.cs* opens in the editor.\n\n1. Implement the operation in the service. Add the following method to the CostService class to calculate the cost of a quantity of sandwiches:\n\n    ```csharp\n    [OperationContract]\n    public double CostOfSandwiches(int quantity)\n    {\n        return 1.25 * quantity;\n    }\n    ```\n\n## Configure the client to access the service\n\n1. Open the *WebForm1.aspx* file and select the **Design** view.\n\n2. From the **View** menu, select **Toolbox**.\n\n3. Expand the **AJAX Extensions** node and drag and drop a **ScriptManager** onto the form.\n\n4. Back in the **Source** view, add the following code between the **\\<ScriptManager>** tags to specify the path to the WCF service:\n\n    ```html\n    <Services>\n       <asp:ServiceReference Path=\"~/CostService.svc\" />\n    </Services>\n    ```\n\n1. Add the code for the Javascript function `Calculate()`. Place the following code in the **head** section of the web form:\n\n    ```javascript\n    <script type=\"text/javascript\">\n\n        function Calculate() {\n            CostService.CostOfSandwiches(3, onSuccess);\n        }\n\n        function onSuccess(result) {\n            var myres = $get(\"additionResult\");\n            myres.innerHTML = result;\n        }\n\n    </script>\n    ```\n\n   This code calls the method of CostService to calculate the price for three sandwiches, and then displays the result in the span called **additionResult**.\n\n## Run the program\n\nMake sure that *WebForm1.aspx* has focus, and then press **Start** button to launch the web client. The button has a green triangle and says something like **IIS Express (Microsoft Edge)**. Or, you can press **F5**. Click the **Price of 3 sandwiches** button to generate the expected output of \"3.75\".\n\n## Example code\n\nFollowing is the full code in the *CostService.svc.cs* file :\n\n```csharp\nusing System.ServiceModel;\nusing System.ServiceModel.Activation;\n\nnamespace SandwichServices\n{\n    [ServiceContract(Namespace = \"\")]\n    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\n    public class CostService\n    {\n        [OperationContract]\n        public double CostOfSandwiches(int quantity)\n        {\n            return 1.25 * quantity;\n        }\n    }\n}\n```\n\nFollowing is the full contents of the *WebForm1.aspx* page:\n\n```aspx-csharp\n<%@ Page Language=\"C#\" AutoEventWireup=\"true\" CodeBehind=\"WebForm1.aspx.cs\" Inherits=\"SandwichServices.WebForm1\" %>\n\n<!DOCTYPE html>\n\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head runat=\"server\">\n    <title></title>\n    <script type=\"text/javascript\">\n\n        function Calculate() {\n            CostService.CostOfSandwiches(3, onSuccess);\n        }\n\n        function onSuccess(result) {\n            var myres = $get(\"additionResult\");\n            myres.innerHTML = result;\n        }\n\n    </script>\n</head>\n<body>\n    <form id=\"form1\" runat=\"server\">\n        <div>\n        </div>\n        <asp:ScriptManager ID=\"ScriptManager1\" runat=\"server\">\n            <Services>\n                <asp:ServiceReference Path=\"~/CostService.svc\" />\n            </Services>\n        </asp:ScriptManager>\n\n        <input type=\"button\" value=\"Price of 3 sandwiches\" onclick=\"Calculate()\" />\n        <br />\n        <span id=\"additionResult\"></span>\n    </form>\n</body>\n</html>\n```\n","nodes":[{"pos":[4,153],"embed":true,"restype":"x-metadata","content":"title: Create an AJAX-Enabled WCF Service and an ASP.NET Client in Visual Studio\nms.date: 08/17/2018\nms.assetid: 95012df8-2a66-420d-944a-8afab261013e","nodes":[{"content":"Create an AJAX-Enabled WCF Service and an ASP.NET Client in Visual Studio","nodes":[{"pos":[0,73],"content":"Create an AJAX-Enabled WCF Service and an ASP.NET Client in Visual Studio","nodes":[{"content":"Create an AJAX-Enabled WCF Service and an ASP.NET Client in Visual Studio","pos":[0,73]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[160,250],"content":"How to: Create an AJAX-Enabled WCF Service and an ASP.NET Client that Accesses the Service","linkify":"How to: Create an AJAX-Enabled WCF Service and an ASP.NET Client that Accesses the Service","nodes":[{"content":"How to: Create an AJAX-Enabled WCF Service and an ASP.NET Client that Accesses the Service","pos":[0,90]}]},{"content":"This topic shows how to use Visual Studio to create an AJAX-enabled Windows Communication Foundation (WCF) service and an ASP.NET client that accesses the service.","pos":[252,415]},{"pos":[420,445],"content":"Create an ASP.NET web app","linkify":"Create an ASP.NET web app","nodes":[{"content":"Create an ASP.NET web app","pos":[0,25]}]},{"content":"Open Visual Studio.","pos":[450,469]},{"pos":[474,526],"content":"From the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>Project<ept id=\"p3\">**</ept>","source":"From the **File** menu, select **New** > **Project**"},{"pos":[531,684],"content":"In the <bpt id=\"p1\">**</bpt>New Project<ept id=\"p1\">**</ept> dialog, expand the <bpt id=\"p2\">**</bpt>Installed<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>Visual C#<ept id=\"p3\">**</ept><ph id=\"ph2\"> &gt; </ph><bpt id=\"p4\">**</bpt>Web<ept id=\"p4\">**</ept> category, and then select <bpt id=\"p5\">**</bpt>ASP.NET Web Application (.NET Framework)<ept id=\"p5\">**</ept>.","source":"In the **New Project** dialog, expand the **Installed** > **Visual C#** > **Web** category, and then select **ASP.NET Web Application (.NET Framework)**."},{"pos":[689,744],"content":"Name the Project <bpt id=\"p1\">**</bpt>SandwichServices<ept id=\"p1\">**</ept> and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","source":"Name the Project **SandwichServices** and click **OK**."},{"pos":[749,836],"content":"In the <bpt id=\"p1\">**</bpt>New ASP.NET Web Application<ept id=\"p1\">**</ept> dialog, select <bpt id=\"p2\">**</bpt>Empty<ept id=\"p2\">**</ept> and then select <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","source":"In the **New ASP.NET Web Application** dialog, select **Empty** and then select **OK**."},{"content":"ASP.NET web app type dialog in Visual Studio","pos":[843,887]},{"pos":[963,977],"content":"Add a web form","linkify":"Add a web form","nodes":[{"content":"Add a web form","pos":[0,14]}]},{"pos":[982,1082],"content":"Right-click the SandwichServices project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"Right-click the SandwichServices project in **Solution Explorer** and select **Add** > **New Item**."},{"pos":[1087,1222],"content":"In the <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog, expand the <bpt id=\"p2\">**</bpt>Installed<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>Visual C#<ept id=\"p3\">**</ept><ph id=\"ph2\"> &gt; </ph><bpt id=\"p4\">**</bpt>Web<ept id=\"p4\">**</ept> category, and then select the <bpt id=\"p5\">**</bpt>Web Form<ept id=\"p5\">**</ept> template.","source":"In the **Add New Item** dialog, expand the **Installed** > **Visual C#** > **Web** category, and then select the **Web Form** template."},{"pos":[1227,1291],"content":"Accept the default name (<bpt id=\"p1\">**</bpt>WebForm1<ept id=\"p1\">**</ept>), and then select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.","source":"Accept the default name (**WebForm1**), and then select **Add**."},{"pos":[1296,1337],"content":"<bpt id=\"p1\">*</bpt>WebForm1.aspx<ept id=\"p1\">*</ept> opens in <bpt id=\"p2\">**</bpt>Source<ept id=\"p2\">**</ept> view.","source":"*WebForm1.aspx* opens in **Source** view."},{"pos":[1342,1395],"content":"Add the following markup inside the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>body&gt;<ept id=\"p1\">**</ept> tags:","source":"Add the following markup inside the **\\<body>** tags:"},{"pos":[1544,1578],"content":"Create an AJAX-enabled WCF service","linkify":"Create an AJAX-enabled WCF service","nodes":[{"content":"Create an AJAX-enabled WCF service","pos":[0,34]}]},{"pos":[1583,1683],"content":"Right-click the SandwichServices project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"Right-click the SandwichServices project in **Solution Explorer** and select **Add** > **New Item**."},{"pos":[1688,1841],"content":"In the <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog, expand the <bpt id=\"p2\">**</bpt>Installed<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>Visual C#<ept id=\"p3\">**</ept><ph id=\"ph2\"> &gt; </ph><bpt id=\"p4\">**</bpt>Web<ept id=\"p4\">**</ept> category, and then select the <bpt id=\"p5\">**</bpt>WCF Service (AJAX-enabled)<ept id=\"p5\">**</ept> template.","source":"In the **Add New Item** dialog, expand the **Installed** > **Visual C#** > **Web** category, and then select the **WCF Service (AJAX-enabled)** template."},{"content":"WCF Service (AJAX-enabled) item template in Visual Studio","pos":[1848,1905]},{"pos":[1972,2029],"content":"Name the service <bpt id=\"p1\">**</bpt>CostService<ept id=\"p1\">**</ept> and then select <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.","source":"Name the service **CostService** and then select **Add**."},{"pos":[2034,2075],"content":"<bpt id=\"p1\">*</bpt>CostService.svc.cs<ept id=\"p1\">*</ept> opens in the editor.","source":"*CostService.svc.cs* opens in the editor."},{"content":"Implement the operation in the service.","pos":[2080,2119]},{"content":"Add the following method to the CostService class to calculate the cost of a quantity of sandwiches:","pos":[2120,2220]},{"pos":[2365,2407],"content":"Configure the client to access the service","linkify":"Configure the client to access the service","nodes":[{"content":"Configure the client to access the service","pos":[0,42]}]},{"pos":[2412,2473],"content":"Open the <bpt id=\"p1\">*</bpt>WebForm1.aspx<ept id=\"p1\">*</ept> file and select the <bpt id=\"p2\">**</bpt>Design<ept id=\"p2\">**</ept> view.","source":"Open the *WebForm1.aspx* file and select the **Design** view."},{"pos":[2478,2521],"content":"From the <bpt id=\"p1\">**</bpt>View<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>Toolbox<ept id=\"p2\">**</ept>.","source":"From the **View** menu, select **Toolbox**."},{"pos":[2526,2614],"content":"Expand the <bpt id=\"p1\">**</bpt>AJAX Extensions<ept id=\"p1\">**</ept> node and drag and drop a <bpt id=\"p2\">**</bpt>ScriptManager<ept id=\"p2\">**</ept> onto the form.","source":"Expand the **AJAX Extensions** node and drag and drop a **ScriptManager** onto the form."},{"pos":[2619,2748],"content":"Back in the <bpt id=\"p1\">**</bpt>Source<ept id=\"p1\">**</ept> view, add the following code between the <bpt id=\"p2\">**</bpt><ph id=\"ph1\">\\&lt;</ph>ScriptManager&gt;<ept id=\"p2\">**</ept> tags to specify the path to the WCF service:","source":"Back in the **Source** view, add the following code between the **\\<ScriptManager>** tags to specify the path to the WCF service:"},{"content":"Add the code for the Javascript function <ph id=\"ph1\">`Calculate()`</ph>.","pos":[2862,2917],"source":"Add the code for the Javascript function `Calculate()`."},{"content":"Place the following code in the <bpt id=\"p1\">**</bpt>head<ept id=\"p1\">**</ept> section of the web form:","pos":[2918,2983],"source":" Place the following code in the **head** section of the web form:"},{"pos":[3298,3452],"content":"This code calls the method of CostService to calculate the price for three sandwiches, and then displays the result in the span called <bpt id=\"p1\">**</bpt>additionResult<ept id=\"p1\">**</ept>.","source":"This code calls the method of CostService to calculate the price for three sandwiches, and then displays the result in the span called **additionResult**."},{"pos":[3457,3472],"content":"Run the program","linkify":"Run the program","nodes":[{"content":"Run the program","pos":[0,15]}]},{"content":"Make sure that <bpt id=\"p1\">*</bpt>WebForm1.aspx<ept id=\"p1\">*</ept> has focus, and then press <bpt id=\"p2\">**</bpt>Start<ept id=\"p2\">**</ept> button to launch the web client.","pos":[3474,3573],"source":"Make sure that *WebForm1.aspx* has focus, and then press **Start** button to launch the web client."},{"content":"The button has a green triangle and says something like <bpt id=\"p1\">**</bpt>IIS Express (Microsoft Edge)<ept id=\"p1\">**</ept>.","pos":[3574,3663],"source":" The button has a green triangle and says something like **IIS Express (Microsoft Edge)**."},{"content":"Or, you can press <bpt id=\"p1\">**</bpt>F5<ept id=\"p1\">**</ept>.","pos":[3664,3689],"source":" Or, you can press **F5**."},{"content":"Click the <bpt id=\"p1\">**</bpt>Price of 3 sandwiches<ept id=\"p1\">**</ept> button to generate the expected output of \"3.75\".","pos":[3690,3775],"source":" Click the **Price of 3 sandwiches** button to generate the expected output of \"3.75\"."},{"pos":[3780,3792],"content":"Example code","linkify":"Example code","nodes":[{"content":"Example code","pos":[0,12]}]},{"pos":[3794,3855],"content":"Following is the full code in the <bpt id=\"p1\">*</bpt>CostService.svc.cs<ept id=\"p1\">*</ept> file :","source":"Following is the full code in the *CostService.svc.cs* file :"},{"pos":[4287,4346],"content":"Following is the full contents of the <bpt id=\"p1\">*</bpt>WebForm1.aspx<ept id=\"p1\">*</ept> page:","source":"Following is the full contents of the *WebForm1.aspx* page:"}]}