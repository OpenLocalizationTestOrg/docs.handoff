{"content":"---\ntitle: \"How to: Receive First-Chance Exception Notifications | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-bcl\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"first-chance exception notifications\"\n  - \"exceptions, first chance notifications\"\nms.assetid: 66f002b8-a97d-4a6e-a503-2cec01689113\ncaps.latest.revision: 10\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# How to: Receive First-Chance Exception Notifications\nThe <xref:System.AppDomain.FirstChanceException> event of the <xref:System.AppDomain> class lets you receive a notification that an exception has been thrown, before the common language runtime has begun searching for exception handlers.  \n  \n The event is raised at the application domain level. A thread of execution can pass through multiple application domains, so an exception that is unhandled in one application domain could be handled in another application domain. The notification occurs in each application domain that has added a handler for the event, until an application domain handles the exception.  \n  \n The procedures and examples in this article show how to receive first-chance exception notifications in a simple program that has one application domain, and in an application domain that you create.  \n  \n For a more complex example that spans several application domains, see the example for the <xref:System.AppDomain.FirstChanceException> event.  \n  \n## Receiving First-Chance Exception Notifications in the Default Application Domain  \n In the following procedure, the entry point for the application, the `Main()` method, runs in the default application domain.  \n  \n#### To demonstrate first-chance exception notifications in the default application domain  \n  \n1.  Define an event handler for the <xref:System.AppDomain.FirstChanceException> event, using a lambda function, and attach it to the event. In this example, the event handler prints the name of the application domain where the event was handled and the exception's <xref:System.Exception.Message%2A> property.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto_simple#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#2)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto_simple#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#2)]  \n  \n2.  Throw an exception and catch it. Before the runtime locates the exception handler, the <xref:System.AppDomain.FirstChanceException> event is raised and displays a message. This message is followed by the message that is displayed by the exception handler.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto_simple#3](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#3)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto_simple#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#3)]  \n  \n3.  Throw an exception, but do not catch it. Before the runtime looks for an exception handler, the <xref:System.AppDomain.FirstChanceException> event is raised and displays a message. There is no exception handler, so the application terminates.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto_simple#4](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#4)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto_simple#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#4)]  \n  \n     The code that is shown in the first three steps of this procedure forms a complete console application. The output from the application varies, depending on the name of the .exe file, because the name of the default application domain consists of the name and extension of the .exe file. See the following for sample output.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto_simple#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#5)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto_simple#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#5)]  \n  \n## Receiving First-Chance Exception Notifications in Another Application Domain  \n If your program contains more than one application domain, you can choose which application domains receive notifications.  \n  \n#### To receive first-chance exception notifications in an application domain that you create  \n  \n1.  Define an event handler for the <xref:System.AppDomain.FirstChanceException> event. This example uses a `static` method (`Shared` method in Visual Basic) that prints the name of the application domain where the event was handled and the exception's <xref:System.Exception.Message%2A> property.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto#3](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#3)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#3)]  \n  \n2.  Create an application domain and add the event handler to the <xref:System.AppDomain.FirstChanceException> event for that application domain. In this example, the application domain is named `AD1`.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#2)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#2)]  \n  \n     You can handle this event in the default application domain in the same way. Use the `static` (`Shared` in Visual Basic) <xref:System.AppDomain.CurrentDomain%2A?displayProperty=fullName> property in `Main()` to get a reference to the default application domain.  \n  \n#### To demonstrate first-chance exception notifications in the application domain  \n  \n1.  Create a `Worker` object in the application domain that you created in the previous procedure. The `Worker` class must be public, and must derive from <xref:System.MarshalByRefObject>, as shown in the complete example at the end of this article.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto#4](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#4)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#4)]  \n  \n2.  Call a method of the `Worker` object that throws an exception. In this example, the `Thrower` method is called twice. The first time, the method argument is `true`, which causes the method to catch its own exception. The second time, the argument is `false`, and the `Main()` method catches the exception in the default application domain.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#6)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#6)]  \n  \n3.  Place code in the `Thrower` method to control whether the method handles its own exception.  \n  \n     [!code-csharp[System.AppDomain.FirstChanceException_howto#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#5)]\n     [!code-vb[System.AppDomain.FirstChanceException_howto#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#5)]  \n  \n## Example  \n The following example creates an application domain named `AD1` and adds an event handler to the application domain's <xref:System.AppDomain.FirstChanceException> event. The example creates an instance of the `Worker` class in the application domain, and calls a method named `Thrower` that throws an <xref:System.ArgumentException>. Depending on the value of its argument, the method either catches the exception or fails to handle it.  \n  \n Each time the `Thrower` method throws an exception in `AD1`, the <xref:System.AppDomain.FirstChanceException> event is raised in `AD1`, and the event handler displays a message. The runtime then looks for an exception handler. In the first case, the exception handler is found in `AD1`. In the second case, the exception is unhandled in `AD1`, and instead is caught in the default application domain.  \n  \n> [!NOTE]\n>  The name of the default application domain is the same as the name of the executable.  \n  \n If you add a handler for the <xref:System.AppDomain.FirstChanceException> event to the default application domain, the event is raised and handled before the default application domain handles the exception. To see this, add the C# code `AppDomain.CurrentDomain.FirstChanceException += FirstChanceException;` (in Visual Basic, `AddHandler AppDomain.CurrentDomain.FirstChanceException, FirstChanceExceptio`n) at the beginning of `Main()`.  \n  \n [!code-csharp[System.AppDomain.FirstChanceException_howto#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#1)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#1)]  \n  \n## Compiling the Code  \n  \n-   This example is a command-line application. To compile and run this code in [!INCLUDE[vs_dev10_long](../../../includes/vs-dev10-long-md.md)], add the C# code `Console.ReadLine();` (in Visual Basic, `Console.ReadLine()`) at the end of `Main()`, to prevent the command window from closing before you can read the output.  \n  \n## See Also  \n <xref:System.AppDomain.FirstChanceException>","nodes":[{"pos":[12,81],"content":"How to: Receive First-Chance Exception Notifications | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Receive First-Chance Exception Notifications | Microsoft Docs","pos":[0,69]}]},{"pos":[495,547],"content":"How to: Receive First-Chance Exception Notifications","linkify":"How to: Receive First-Chance Exception Notifications","nodes":[{"content":"How to: Receive First-Chance Exception Notifications","pos":[0,52]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event of the <ph id=\"ph2\">&lt;xref:System.AppDomain&gt;</ph> class lets you receive a notification that an exception has been thrown, before the common language runtime has begun searching for exception handlers.","pos":[548,785],"source":"The <xref:System.AppDomain.FirstChanceException> event of the <xref:System.AppDomain> class lets you receive a notification that an exception has been thrown, before the common language runtime has begun searching for exception handlers."},{"content":"The event is raised at the application domain level.","pos":[792,844]},{"content":"A thread of execution can pass through multiple application domains, so an exception that is unhandled in one application domain could be handled in another application domain.","pos":[845,1021]},{"content":"The notification occurs in each application domain that has added a handler for the event, until an application domain handles the exception.","pos":[1022,1163]},{"content":"The procedures and examples in this article show how to receive first-chance exception notifications in a simple program that has one application domain, and in an application domain that you create.","pos":[1170,1369]},{"content":"For a more complex example that spans several application domains, see the example for the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event.","pos":[1376,1518],"source":"For a more complex example that spans several application domains, see the example for the <xref:System.AppDomain.FirstChanceException> event."},{"pos":[1527,1607],"content":"Receiving First-Chance Exception Notifications in the Default Application Domain","linkify":"Receiving First-Chance Exception Notifications in the Default Application Domain","nodes":[{"content":"Receiving First-Chance Exception Notifications in the Default Application Domain","pos":[0,80]}]},{"pos":[1611,1736],"content":"In the following procedure, the entry point for the application, the <ph id=\"ph1\">`Main()`</ph> method, runs in the default application domain.","source":"In the following procedure, the entry point for the application, the `Main()` method, runs in the default application domain."},{"pos":[1747,1832],"content":"To demonstrate first-chance exception notifications in the default application domain","linkify":"To demonstrate first-chance exception notifications in the default application domain","nodes":[{"content":"To demonstrate first-chance exception notifications in the default application domain","pos":[0,85]}]},{"content":"Define an event handler for the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event, using a lambda function, and attach it to the event.","pos":[1842,1978],"source":"Define an event handler for the <xref:System.AppDomain.FirstChanceException> event, using a lambda function, and attach it to the event."},{"content":"In this example, the event handler prints the name of the application domain where the event was handled and the exception's <ph id=\"ph1\">&lt;xref:System.Exception.Message%2A&gt;</ph> property.","pos":[1979,2148],"source":" In this example, the event handler prints the name of the application domain where the event was handled and the exception's <xref:System.Exception.Message%2A> property."},{"pos":[2159,2550],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#2<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#2)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#2<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#2)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto_simple#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#2)]\n [!code-vb[System.AppDomain.FirstChanceException_howto_simple#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#2)]"},{"content":"Throw an exception and catch it.","pos":[2560,2592]},{"content":"Before the runtime locates the exception handler, the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event is raised and displays a message.","pos":[2593,2731],"source":" Before the runtime locates the exception handler, the <xref:System.AppDomain.FirstChanceException> event is raised and displays a message."},{"content":"This message is followed by the message that is displayed by the exception handler.","pos":[2732,2815]},{"pos":[2826,3217],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#3<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#3)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#3<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#3)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto_simple#3](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#3)]\n [!code-vb[System.AppDomain.FirstChanceException_howto_simple#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#3)]"},{"content":"Throw an exception, but do not catch it.","pos":[3227,3267]},{"content":"Before the runtime looks for an exception handler, the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event is raised and displays a message.","pos":[3268,3407],"source":" Before the runtime looks for an exception handler, the <xref:System.AppDomain.FirstChanceException> event is raised and displays a message."},{"content":"There is no exception handler, so the application terminates.","pos":[3408,3469]},{"pos":[3480,3871],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#4<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#4)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#4<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#4)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto_simple#4](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#4)]\n [!code-vb[System.AppDomain.FirstChanceException_howto_simple#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#4)]"},{"content":"The code that is shown in the first three steps of this procedure forms a complete console application.","pos":[3882,3985]},{"content":"The output from the application varies, depending on the name of the .exe file, because the name of the default application domain consists of the name and extension of the .exe file.","pos":[3986,4169]},{"content":"See the following for sample output.","pos":[4170,4206]},{"pos":[4217,4608],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#5<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#5)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto_simple#5<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#5)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto_simple#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/cs/example.cs#5)]\n [!code-vb[System.AppDomain.FirstChanceException_howto_simple#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto_simple/vb/example.vb#5)]"},{"pos":[4617,4693],"content":"Receiving First-Chance Exception Notifications in Another Application Domain","linkify":"Receiving First-Chance Exception Notifications in Another Application Domain","nodes":[{"content":"Receiving First-Chance Exception Notifications in Another Application Domain","pos":[0,76]}]},{"content":"If your program contains more than one application domain, you can choose which application domains receive notifications.","pos":[4697,4819]},{"pos":[4830,4918],"content":"To receive first-chance exception notifications in an application domain that you create","linkify":"To receive first-chance exception notifications in an application domain that you create","nodes":[{"content":"To receive first-chance exception notifications in an application domain that you create","pos":[0,88]}]},{"content":"Define an event handler for the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event.","pos":[4928,5011],"source":"Define an event handler for the <xref:System.AppDomain.FirstChanceException> event."},{"content":"This example uses a <ph id=\"ph1\">`static`</ph> method (<ph id=\"ph2\">`Shared`</ph> method in Visual Basic) that prints the name of the application domain where the event was handled and the exception's <ph id=\"ph3\">&lt;xref:System.Exception.Message%2A&gt;</ph> property.","pos":[5012,5221],"source":" This example uses a `static` method (`Shared` method in Visual Basic) that prints the name of the application domain where the event was handled and the exception's <xref:System.Exception.Message%2A> property."},{"pos":[5232,5595],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto#3<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#3)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto#3<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#3)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto#3](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#3)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#3)]"},{"content":"Create an application domain and add the event handler to the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event for that application domain.","pos":[5605,5746],"source":"Create an application domain and add the event handler to the <xref:System.AppDomain.FirstChanceException> event for that application domain."},{"content":"In this example, the application domain is named <ph id=\"ph1\">`AD1`</ph>.","pos":[5747,5802],"source":" In this example, the application domain is named `AD1`."},{"pos":[5813,6176],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto#2<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#2)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto#2<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#2)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#2)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#2)]"},{"content":"You can handle this event in the default application domain in the same way.","pos":[6187,6263]},{"content":"Use the <ph id=\"ph1\">`static`</ph> (<ph id=\"ph2\">`Shared`</ph> in Visual Basic) <ph id=\"ph3\">&lt;xref:System.AppDomain.CurrentDomain%2A?displayProperty=fullName&gt;</ph> property in <ph id=\"ph4\">`Main()`</ph> to get a reference to the default application domain.","pos":[6264,6448],"source":" Use the `static` (`Shared` in Visual Basic) <xref:System.AppDomain.CurrentDomain%2A?displayProperty=fullName> property in `Main()` to get a reference to the default application domain."},{"pos":[6459,6536],"content":"To demonstrate first-chance exception notifications in the application domain","linkify":"To demonstrate first-chance exception notifications in the application domain","nodes":[{"content":"To demonstrate first-chance exception notifications in the application domain","pos":[0,77]}]},{"content":"Create a <ph id=\"ph1\">`Worker`</ph> object in the application domain that you created in the previous procedure.","pos":[6546,6640],"source":"Create a `Worker` object in the application domain that you created in the previous procedure."},{"content":"The <ph id=\"ph1\">`Worker`</ph> class must be public, and must derive from <ph id=\"ph2\">&lt;xref:System.MarshalByRefObject&gt;</ph>, as shown in the complete example at the end of this article.","pos":[6641,6791],"source":" The `Worker` class must be public, and must derive from <xref:System.MarshalByRefObject>, as shown in the complete example at the end of this article."},{"pos":[6802,7165],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto#4<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#4)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto#4<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#4)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto#4](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#4)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#4)]"},{"content":"Call a method of the <ph id=\"ph1\">`Worker`</ph> object that throws an exception.","pos":[7175,7237],"source":"Call a method of the `Worker` object that throws an exception."},{"content":"In this example, the <ph id=\"ph1\">`Thrower`</ph> method is called twice.","pos":[7238,7292],"source":" In this example, the `Thrower` method is called twice."},{"content":"The first time, the method argument is <ph id=\"ph1\">`true`</ph>, which causes the method to catch its own exception.","pos":[7293,7391],"source":" The first time, the method argument is `true`, which causes the method to catch its own exception."},{"content":"The second time, the argument is <ph id=\"ph1\">`false`</ph>, and the <ph id=\"ph2\">`Main()`</ph> method catches the exception in the default application domain.","pos":[7392,7514],"source":" The second time, the argument is `false`, and the `Main()` method catches the exception in the default application domain."},{"pos":[7525,7888],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto#6<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#6)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto#6<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#6)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#6)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#6)]"},{"pos":[7898,7989],"content":"Place code in the <ph id=\"ph1\">`Thrower`</ph> method to control whether the method handles its own exception.","source":"Place code in the `Thrower` method to control whether the method handles its own exception."},{"pos":[8000,8363],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto#5<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#5)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto#5<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#5)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[System.AppDomain.FirstChanceException_howto#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#5)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#5)]"},{"pos":[8372,8379],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example creates an application domain named <ph id=\"ph1\">`AD1`</ph> and adds an event handler to the application domain's <ph id=\"ph2\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event.","pos":[8383,8552],"source":"The following example creates an application domain named `AD1` and adds an event handler to the application domain's <xref:System.AppDomain.FirstChanceException> event."},{"content":"The example creates an instance of the <ph id=\"ph1\">`Worker`</ph> class in the application domain, and calls a method named <ph id=\"ph2\">`Thrower`</ph> that throws an <ph id=\"ph3\">&lt;xref:System.ArgumentException&gt;</ph>.","pos":[8553,8716],"source":" The example creates an instance of the `Worker` class in the application domain, and calls a method named `Thrower` that throws an <xref:System.ArgumentException>."},{"content":"Depending on the value of its argument, the method either catches the exception or fails to handle it.","pos":[8717,8819]},{"content":"Each time the <ph id=\"ph1\">`Thrower`</ph> method throws an exception in <ph id=\"ph2\">`AD1`</ph>, the <ph id=\"ph3\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event is raised in <ph id=\"ph4\">`AD1`</ph>, and the event handler displays a message.","pos":[8826,9003],"source":"Each time the `Thrower` method throws an exception in `AD1`, the <xref:System.AppDomain.FirstChanceException> event is raised in `AD1`, and the event handler displays a message."},{"content":"The runtime then looks for an exception handler.","pos":[9004,9052]},{"content":"In the first case, the exception handler is found in <ph id=\"ph1\">`AD1`</ph>.","pos":[9053,9112],"source":" In the first case, the exception handler is found in `AD1`."},{"content":"In the second case, the exception is unhandled in <ph id=\"ph1\">`AD1`</ph>, and instead is caught in the default application domain.","pos":[9113,9226],"source":" In the second case, the exception is unhandled in `AD1`, and instead is caught in the default application domain."},{"pos":[9234,9330],"content":"[!NOTE]\n The name of the default application domain is the same as the name of the executable.","leadings":["","> "],"nodes":[{"content":"The name of the default application domain is the same as the name of the executable.","pos":[9,94]}]},{"content":"If you add a handler for the <ph id=\"ph1\">&lt;xref:System.AppDomain.FirstChanceException&gt;</ph> event to the default application domain, the event is raised and handled before the default application domain handles the exception.","pos":[9337,9544],"source":"If you add a handler for the <xref:System.AppDomain.FirstChanceException> event to the default application domain, the event is raised and handled before the default application domain handles the exception."},{"content":"To see this, add the C# code <ph id=\"ph1\">`AppDomain.CurrentDomain.FirstChanceException += FirstChanceException;`</ph> (in Visual Basic, <ph id=\"ph2\">`AddHandler AppDomain.CurrentDomain.FirstChanceException, FirstChanceExceptio`</ph>n) at the beginning of <ph id=\"ph3\">`Main()`</ph>.","pos":[9545,9774],"source":" To see this, add the C# code `AppDomain.CurrentDomain.FirstChanceException += FirstChanceException;` (in Visual Basic, `AddHandler AppDomain.CurrentDomain.FirstChanceException, FirstChanceExceptio`n) at the beginning of `Main()`."},{"pos":[9781,10140],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.AppDomain.FirstChanceException_howto#1<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.AppDomain.FirstChanceException_howto#1<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[System.AppDomain.FirstChanceException_howto#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/cs/example.cs#1)]\n [!code-vb[System.AppDomain.FirstChanceException_howto#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.appdomain.firstchanceexception_howto/vb/example.vb#1)]"},{"pos":[10149,10167],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"content":"This example is a command-line application.","pos":[10177,10220]},{"content":"To compile and run this code in <ph id=\"ph1\">[!INCLUDE[vs_dev10_long](../../../includes/vs-dev10-long-md.md)]</ph>, add the C# code <ph id=\"ph2\">`Console.ReadLine();`</ph> (in Visual Basic, <ph id=\"ph3\">`Console.ReadLine()`</ph>) at the end of <ph id=\"ph4\">`Main()`</ph>, to prevent the command window from closing before you can read the output.","pos":[10221,10495],"source":" To compile and run this code in [!INCLUDE[vs_dev10_long](../../../includes/vs-dev10-long-md.md)], add the C# code `Console.ReadLine();` (in Visual Basic, `Console.ReadLine()`) at the end of `Main()`, to prevent the command window from closing before you can read the output."},{"pos":[10504,10512],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}