{"content":"---\ntitle: \"Using UDP Services\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"protocols, UDP\"\n  - \"network resources, UDP\"\n  - \"requesting data from Internet, UDP\"\n  - \"UDP\"\n  - \"receiving data, UDP\"\n  - \"Internet, UDP\"\n  - \"broadcasting messages to multiple addresses\"\n  - \"data requests, UDP\"\n  - \"UdpClient class, about UdpClient class\"\n  - \"sending data, UDP\"\n  - \"application protocols, UDP\"\nms.assetid: d5c3477a-e798-454c-a890-738ba14c5707\n---\n# Using UDP Services\nThe <xref:System.Net.Sockets.UdpClient> class communicates with network services using UDP. The properties and methods of the <xref:System.Net.Sockets.UdpClient> class abstract the details of creating a <xref:System.Net.Sockets.Socket> for requesting and receiving data using UDP.\n\nUser Datagram Protocol (UDP) is a simple protocol that makes a best effort to deliver data to a remote host. However, because the UDP protocol is a connectionless protocol, UDP datagrams sent to the remote endpoint are not guaranteed to arrive, nor are they guaranteed to arrive in the same sequence in which they are sent. Applications that use UDP must be prepared to handle missing, duplicate, and out-of-sequence datagrams.\n\nTo send a datagram using UDP, you must know the network address of the network device hosting the service you need and the UDP port number that the service uses to communicate. The Internet Assigned Numbers Authority (Iana) defines port numbers for common services (see [Service Name and Transport Protocol Port Number Registry](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml)). Services not on the Iana list can have port numbers in the range 1,024 to 65,535.\n\nSpecial network addresses are used to support UDP broadcast messages on IP-based networks. The following discussion uses the IP version 4 address family used on the Internet as an example.\n\nIP version 4 addresses use 32 bits to specify a network address. For class C addresses using a netmask of 255.255.255.0, these bits are separated into four octets. When expressed in decimal, the four octets form the familiar dotted-quad notation, such as 192.168.100.2. The first two octets (192.168 in this example) form the network number, the third octet (100) defines the subnet, and the final octet (2) is the host identifier.\n\nSetting all the bits of an IP address to one, or 255.255.255.255, forms the limited broadcast address. Sending a UDP datagram to this address delivers the message to any host on the local network segment. Because routers never forward messages sent to this address, only hosts on the network segment receive the broadcast message.\n\nBroadcasts can be directed to specific portions of a network by setting all bits of the host identifier. For example, to send a broadcast to all hosts on the network identified by IP addresses starting with 192.168.1, use the address 192.168.1.255.\n\nThe following code example uses a <xref:System.Net.Sockets.UdpClient> to listen for UDP datagrams on port 11,000. The client receives a message string and writes the message to the console.\n\n```vb\nImports System.Net\nImports System.Net.Sockets\nImports System.Text\n\nPublic Class UDPListener\n   Private Const listenPort As Integer = 11000\n   \n   Private Shared Sub StartListener()\n      Dim listener As New UdpClient(listenPort)\n      Dim groupEP As New IPEndPoint(IPAddress.Any, listenPort)\n      Try\n         While True\n            Console.WriteLine(\"Waiting for broadcast\")\n            Dim bytes As Byte() = listener.Receive(groupEP)\n            Console.WriteLine(\"Received broadcast from {0} :\", groupEP)\n            Console.WriteLine(Encoding.ASCII.GetString(bytes, 0, bytes.Length))\n         End While\n      Catch e As SocketException\n         Console.WriteLine(e)\n      Finally\n         listener.Close()\n      End Try\n   End Sub 'StartListener\n   \n   Public Shared Sub Main()\n      StartListener()\n   End Sub 'Main\nEnd Class 'UDPListener\n```\n\n```csharp\nusing System;\nusing System.Net;\nusing System.Net.Sockets;\nusing System.Text;\n\npublic class UDPListener\n{\n    private const int listenPort = 11000;\n    \n    private static void StartListener()\n    {\n        UdpClient listener = new UdpClient(listenPort);\n        IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, listenPort);\n        \n        try\n        {\n            while (true)\n            {\n                Console.WriteLine(\"Waiting for broadcast\");\n                byte[] bytes = listener.Receive(ref groupEP);\n                \n                Console.WriteLine($\"Received broadcast from {groupEP} :\");\n                Console.WriteLine($\" {Encoding.ASCII.GetString(bytes, 0, bytes.Length)}\");\n            }\n        }\n        catch (SocketException e)\n        {\n            Console.WriteLine(e);\n        }\n        finally\n        {\n            listener.Close();\n        }\n    }\n    \n    public static void Main()\n    {\n        StartListener();\n    }\n}\n```\n\nThe following code example uses a <xref:System.Net.Sockets.Socket> to send UDP datagrams to the directed broadcast address 192.168.1.255, using port 11,000. The client sends the message string specified on the command line.\n\n```vb\nImports System.Net\nImports System.Net.Sockets\nImports System.Text\n\nPublic Class Program\n    Public Shared Sub Main(args() As [String])\n      Dim s As New Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp)\n      Dim broadcast As IPAddress = IPAddress.Parse(\"192.168.1.255\")\n      Dim sendbuf As Byte() = Encoding.ASCII.GetBytes(args(0))\n      Dim ep As New IPEndPoint(broadcast, 11000)\n      s.SendTo(sendbuf, ep)\n      Console.WriteLine(\"Message sent to the broadcast address\")\n   End Sub 'Main\nEnd Class\n```\n\n```csharp\nusing System;\nusing System.Net;\nusing System.Net.Sockets;\nusing System.Text;\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);\n        \n        IPAddress broadcast = IPAddress.Parse(\"192.168.1.255\");\n        \n        byte[] sendbuf = Encoding.ASCII.GetBytes(args[0]);\n        IPEndPoint ep = new IPEndPoint(broadcast, 11000);\n        \n        s.SendTo(sendbuf, ep);\n        \n        Console.WriteLine(\"Message sent to the broadcast address\");\n    }\n}\n```\n\n## See also\n\n- <xref:System.Net.Sockets.UdpClient>\n- <xref:System.Net.IPAddress>\n","nodes":[{"pos":[4,482],"embed":true,"restype":"x-metadata","content":"title: \"Using UDP Services\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"protocols, UDP\"\n  - \"network resources, UDP\"\n  - \"requesting data from Internet, UDP\"\n  - \"UDP\"\n  - \"receiving data, UDP\"\n  - \"Internet, UDP\"\n  - \"broadcasting messages to multiple addresses\"\n  - \"data requests, UDP\"\n  - \"UdpClient class, about UdpClient class\"\n  - \"sending data, UDP\"\n  - \"application protocols, UDP\"\nms.assetid: d5c3477a-e798-454c-a890-738ba14c5707","nodes":[{"content":"Using UDP Services","nodes":[{"pos":[0,18],"content":"Using UDP Services","nodes":[{"content":"Using UDP Services","pos":[0,18]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[489,507],"content":"Using UDP Services","linkify":"Using UDP Services","nodes":[{"content":"Using UDP Services","pos":[0,18]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Net.Sockets.UdpClient&gt;</ph> class communicates with network services using UDP.","pos":[508,599],"source":"The <xref:System.Net.Sockets.UdpClient> class communicates with network services using UDP."},{"content":"The properties and methods of the <ph id=\"ph1\">&lt;xref:System.Net.Sockets.UdpClient&gt;</ph> class abstract the details of creating a <ph id=\"ph2\">&lt;xref:System.Net.Sockets.Socket&gt;</ph> for requesting and receiving data using UDP.","pos":[600,788],"source":" The properties and methods of the <xref:System.Net.Sockets.UdpClient> class abstract the details of creating a <xref:System.Net.Sockets.Socket> for requesting and receiving data using UDP."},{"content":"User Datagram Protocol (UDP) is a simple protocol that makes a best effort to deliver data to a remote host.","pos":[790,898]},{"content":"However, because the UDP protocol is a connectionless protocol, UDP datagrams sent to the remote endpoint are not guaranteed to arrive, nor are they guaranteed to arrive in the same sequence in which they are sent.","pos":[899,1113]},{"content":"Applications that use UDP must be prepared to handle missing, duplicate, and out-of-sequence datagrams.","pos":[1114,1217]},{"content":"To send a datagram using UDP, you must know the network address of the network device hosting the service you need and the UDP port number that the service uses to communicate.","pos":[1219,1395]},{"content":"The Internet Assigned Numbers Authority (Iana) defines port numbers for common services (see <bpt id=\"p1\">[</bpt>Service Name and Transport Protocol Port Number Registry<ept id=\"p1\">](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml)</ept>).","pos":[1396,1643],"source":" The Internet Assigned Numbers Authority (Iana) defines port numbers for common services (see [Service Name and Transport Protocol Port Number Registry](https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml))."},{"content":"Services not on the Iana list can have port numbers in the range 1,024 to 65,535.","pos":[1644,1725]},{"content":"Special network addresses are used to support UDP broadcast messages on IP-based networks.","pos":[1727,1817]},{"content":"The following discussion uses the IP version 4 address family used on the Internet as an example.","pos":[1818,1915]},{"content":"IP version 4 addresses use 32 bits to specify a network address.","pos":[1917,1981]},{"content":"For class C addresses using a netmask of 255.255.255.0, these bits are separated into four octets.","pos":[1982,2080]},{"content":"When expressed in decimal, the four octets form the familiar dotted-quad notation, such as 192.168.100.2.","pos":[2081,2186]},{"content":"The first two octets (192.168 in this example) form the network number, the third octet (100) defines the subnet, and the final octet (2) is the host identifier.","pos":[2187,2348]},{"content":"Setting all the bits of an IP address to one, or 255.255.255.255, forms the limited broadcast address.","pos":[2350,2452]},{"content":"Sending a UDP datagram to this address delivers the message to any host on the local network segment.","pos":[2453,2554]},{"content":"Because routers never forward messages sent to this address, only hosts on the network segment receive the broadcast message.","pos":[2555,2680]},{"content":"Broadcasts can be directed to specific portions of a network by setting all bits of the host identifier.","pos":[2682,2786]},{"content":"For example, to send a broadcast to all hosts on the network identified by IP addresses starting with 192.168.1, use the address 192.168.1.255.","pos":[2787,2930]},{"content":"The following code example uses a <ph id=\"ph1\">&lt;xref:System.Net.Sockets.UdpClient&gt;</ph> to listen for UDP datagrams on port 11,000.","pos":[2932,3045],"source":"The following code example uses a <xref:System.Net.Sockets.UdpClient> to listen for UDP datagrams on port 11,000."},{"content":"The client receives a message string and writes the message to the console.","pos":[3046,3121]},{"content":"The following code example uses a <ph id=\"ph1\">&lt;xref:System.Net.Sockets.Socket&gt;</ph> to send UDP datagrams to the directed broadcast address 192.168.1.255, using port 11,000.","pos":[4953,5109],"source":"The following code example uses a <xref:System.Net.Sockets.Socket> to send UDP datagrams to the directed broadcast address 192.168.1.255, using port 11,000."},{"content":"The client sends the message string specified on the command line.","pos":[5110,5176]},{"pos":[6287,6295],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]}]}