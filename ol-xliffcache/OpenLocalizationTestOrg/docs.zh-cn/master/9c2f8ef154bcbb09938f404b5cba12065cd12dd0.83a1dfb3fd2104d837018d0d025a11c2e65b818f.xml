{"content":"---\ntitle: \"Correlated Calculator | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: c365166e-6552-49a4-bf17-9f4e597d4d41\ncaps.latest.revision: 7\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Correlated Calculator\nThis sample demonstrates how to use the messaging activities (<xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>) in the designer with content-based correlation based on a parameter in the message. In this scenario, the operations of the calculator are in a parallel convoy. Both an instance and a correlation (based on `CalculatorId`) are created when the first message is sent to the workflow, and subsequent messages with the same `CalculatorId` are dispatched to that instance until the Reset operation is called. The client is implemented as a WPF application that uses a code-based client proxy to communicate with the service.  \n  \n#### To use this sample  \n  \n1.  Start [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] in elevated permissions, open the For.sln solution file.  \n  \n    1.  Navigate to the folder that contains [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n    2.  Right-click Devenv.exe and select **Run as administrator**.  \n  \n2.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CorrelatedCalculator.sln solution file.  \n  \n3.  To build the solution, press CTRL+SHIFT+B.  \n  \n4.  To run the service project, press CTRL+F5.  \n  \n5.  Once the service is ready and listening for messages, in Solution Explorer, right-click the Client project and run it.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Scenario\\Services\\CorellatedCalculator`  \n  \n## See Also","nodes":[{"pos":[12,50],"content":"Correlated Calculator | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Correlated Calculator | Microsoft Docs","pos":[0,38]}]},{"pos":[315,336],"content":"Correlated Calculator","linkify":"Correlated Calculator","nodes":[{"content":"Correlated Calculator","pos":[0,21]}]},{"content":"This sample demonstrates how to use the messaging activities (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph>) in the designer with content-based correlation based on a parameter in the message.","pos":[337,581],"source":"This sample demonstrates how to use the messaging activities (<xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>) in the designer with content-based correlation based on a parameter in the message."},{"content":"In this scenario, the operations of the calculator are in a parallel convoy.","pos":[582,658]},{"content":"Both an instance and a correlation (based on <ph id=\"ph1\">`CalculatorId`</ph>) are created when the first message is sent to the workflow, and subsequent messages with the same <ph id=\"ph2\">`CalculatorId`</ph> are dispatched to that instance until the Reset operation is called.","pos":[659,901],"source":" Both an instance and a correlation (based on `CalculatorId`) are created when the first message is sent to the workflow, and subsequent messages with the same `CalculatorId` are dispatched to that instance until the Reset operation is called."},{"content":"The client is implemented as a WPF application that uses a code-based client proxy to communicate with the service.","pos":[902,1017]},{"pos":[1028,1046],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[1056,1172],"content":"Start <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> in elevated permissions, open the For.sln solution file.","source":"Start [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] in elevated permissions, open the For.sln solution file."},{"pos":[1186,1277],"content":"Navigate to the folder that contains <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","source":"Navigate to the folder that contains [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"pos":[1291,1350],"content":"Right-click Devenv.exe and select <bpt id=\"p1\">**</bpt>Run as administrator<ept id=\"p1\">**</ept>.","source":"Right-click Devenv.exe and select **Run as administrator**."},{"pos":[1360,1469],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the CorrelatedCalculator.sln solution file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CorrelatedCalculator.sln solution file."},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[1479,1521]},{"content":"To run the service project, press CTRL+F5.","pos":[1531,1573]},{"content":"Once the service is ready and listening for messages, in Solution Explorer, right-click the Client project and run it.","pos":[1583,1701]},{"pos":[1709,1841],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1895,2221],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[2222,2272]},{"pos":[2366,2374],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}