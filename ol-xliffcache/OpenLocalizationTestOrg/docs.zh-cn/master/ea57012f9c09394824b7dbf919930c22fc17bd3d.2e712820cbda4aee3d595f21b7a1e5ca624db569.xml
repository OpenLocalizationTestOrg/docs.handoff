{"content":"---\ntitle: \"How to: Use Transport Security and Message Credentials\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"TransportWithMessageCredentials\"\nms.assetid: 6cc35346-c37a-4859-b82b-946c0ba6e68f\n---\n# How to: Use Transport Security and Message Credentials\nSecuring a service with both transport and message credentials uses the best of both Transport and Message security modes in Windows Communication Foundation (WCF). In sum, transport-layer security provides integrity and confidentiality, while message-layer security provides a variety of credentials that are not possible with strict transport security mechanisms. This topic shows the basic steps for implementing transport with message credentials using the <xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.NetTcpBinding> bindings. For more information about setting the security mode, see [How to: Set the Security Mode](../../../../docs/framework/wcf/how-to-set-the-security-mode.md).  \n  \n When setting the security mode to `TransportWithMessageCredential`, the transport determines the actual mechanism that provides the transport-level security. For HTTP, the mechanism is Secure Sockets Layer (SSL) over HTTP (HTTPS); for TCP, it is SSL over TCP or Windows.  \n  \n If the transport is HTTP (using the <xref:System.ServiceModel.WSHttpBinding>), SSL over HTTP provides the transport-level security. In that case, you must configure the computer hosting the service with an SSL certificate bound to a port, as shown later in this topic.  \n  \n If the transport is TCP (using the <xref:System.ServiceModel.NetTcpBinding>), by default the transport-level security provided is Windows security, or SSL over TCP. When using SSL over TCP, you must specify the certificate using the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A> method, as shown later in this topic.  \n  \n### To use the WSHttpBinding with a certificate for transport security (in code)  \n  \n1.  Use the HttpCfg.exe tool to bind an SSL certificate to a port on the machine. For more information, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).  \n  \n2.  Create an instance of the <xref:System.ServiceModel.WSHttpBinding> class and set the <xref:System.ServiceModel.WSHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential>.  \n  \n3.  Set the <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A> property to an appropriate value. (For more information, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) The following code uses the <xref:System.ServiceModel.MessageCredentialType.Certificate> value.  \n  \n4.  Create an instance of the <xref:System.Uri> class with an appropriate base address. Note that the address must use the \"HTTPS\" scheme and must contain the actual name of the machine and the port number that the SSL certificate is bound to. (Alternatively, you can set the base address in configuration.)  \n  \n5.  Add a service endpoint using the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method.  \n  \n6.  Create the instance of the <xref:System.ServiceModel.ServiceHost> and call the <xref:System.ServiceModel.ICommunicationObject.Open%2A> method, as shown in the following code.  \n  \n     [!code-csharp[c_SettingSecurityMode#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_settingsecuritymode/cs/source.cs#7)]\n     [!code-vb[c_SettingSecurityMode#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_settingsecuritymode/vb/source.vb#7)]  \n  \n### To use the NetTcpBinding with a certificate for transport security (in code)  \n  \n1.  Create an instance of the <xref:System.ServiceModel.NetTcpBinding> class and set the <xref:System.ServiceModel.NetTcpSecurity.Mode%2A> property to <xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential>.  \n  \n2.  Set the <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A> to an appropriate value. The following code uses the <xref:System.ServiceModel.MessageCredentialType.Certificate> value.  \n  \n3.  Create an instance of the <xref:System.Uri> class with an appropriate base address. Note that the address must use the \"net.tcp\" scheme. (Alternatively, you can set the base address in configuration.)  \n  \n4.  Create the instance of the <xref:System.ServiceModel.ServiceHost> class.  \n  \n5.  Use the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class to explicitly set the X.509 certificate for the service.  \n  \n6.  Add a service endpoint using the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method.  \n  \n7.  Call the <xref:System.ServiceModel.ICommunicationObject.Open%2A> method, as shown in the following code.  \n  \n     [!code-csharp[c_SettingSecurityMode#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_settingsecuritymode/cs/source.cs#8)]\n     [!code-vb[c_SettingSecurityMode#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_settingsecuritymode/vb/source.vb#8)]  \n  \n### To use the NetTcpBinding with Windows for transport security (in code)  \n  \n1.  Create an instance of the <xref:System.ServiceModel.NetTcpBinding> class and set the <xref:System.ServiceModel.NetTcpSecurity.Mode%2A> property to <xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential>.  \n  \n2.  Set the transport security to use Windows by setting the <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A> to <xref:System.ServiceModel.TcpClientCredentialType.Windows>. (Note that this is the default.)  \n  \n3.  Set the <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A> to an appropriate value. The following code uses the <xref:System.ServiceModel.MessageCredentialType.Certificate> value.  \n  \n4.  Create an instance of the <xref:System.Uri> class with an appropriate base address. Note that the address must use the \"net.tcp\" scheme. (Alternatively, you can set the base address in configuration.)  \n  \n5.  Create the instance of the <xref:System.ServiceModel.ServiceHost> class.  \n  \n6.  Use the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class to explicitly set the X.509 certificate for the service.  \n  \n7.  Add a service endpoint using the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method.  \n  \n8.  Call the <xref:System.ServiceModel.ICommunicationObject.Open%2A> method, as shown in the following code.  \n  \n     [!code-csharp[c_SettingSecurityMode#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_settingsecuritymode/cs/source.cs#9)]\n     [!code-vb[c_SettingSecurityMode#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_settingsecuritymode/vb/source.vb#9)]  \n  \n## Using Configuration  \n  \n#### To use the WSHttpBinding  \n  \n1.  Configure the computer with an SSL certificate bound to a port. (For more information, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)). You do not need to set a <`transport`> element value with this configuration.  \n  \n2.  Specify the client credential type for the message-level security. The following example sets the `clientCredentialType` attribute of the <`message`> element to `UserName`.  \n  \n    ```xml  \n    <wsHttpBinding>  \n    <binding name=\"WsHttpBinding_ICalculator\">  \n            <security mode=\"TransportWithMessageCredential\" >  \n               <message clientCredentialType=\"UserName\" />  \n            </security>  \n    </binding>  \n    </wsHttpBinding>  \n    ```  \n  \n#### To use the NetTcpBinding with a certificate for transport security  \n  \n1.  For SSL over TCP, you must explicitly specify the certificate in the `<behaviors>` element. The following example specifies a certificate by its issuer in the default store location (local machine and personal stores).  \n  \n    ```xml  \n    <behaviors>  \n     <serviceBehaviors>  \n       <behavior name=\"mySvcBehavior\">  \n           <serviceCredentials>  \n             <serviceCertificate findValue=\"contoso.com\"  \n                                 x509FindType=\"FindByIssuerName\" />  \n           </serviceCredentials>  \n       </behavior>  \n     </serviceBehaviors>  \n    </behaviors>  \n    ```  \n  \n2.  Add a [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md) to the bindings section  \n  \n3.  Add a binding element, and set the `name` attribute to an appropriate value.  \n  \n4.  Add a <`security`> element, and set the `mode` attribute to `TransportWithMessageCredential`.  \n  \n5.  Add a <`message>` element, and set the `clientCredentialType` attribute to an appropriate value.  \n  \n    ```xml  \n    <bindings>  \n    <netTcpBinding>  \n      <binding name=\"myTcpBinding\">  \n        <security mode=\"TransportWithMessageCredential\" >  \n           <message clientCredentialType=\"Windows\" />  \n        </security>  \n      </binding>  \n    </netTcpBinding>  \n    </bindings>  \n    ```  \n  \n#### To use the NetTcpBinding with Windows for transport security  \n  \n1.  Add a [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md) to the bindings section,  \n  \n2.  Add a <`binding`> element and set the `name` attribute to an appropriate value.  \n  \n3.  Add a <`security`> element, and set the `mode` attribute to `TransportWithMessageCredential`.  \n  \n4.  Add a <`transport`> element and set the `clientCredentialType` attribute to `Windows`.  \n  \n5.  Add a <`message`> element and set the `clientCredentialType` attribute to an appropriate value. The following code sets the value to a certificate.  \n  \n    ```xml  \n    <bindings>  \n    <netTcpBinding>  \n      <binding name=\"myTcpBinding\">  \n        <security mode=\"TransportWithMessageCredential\" >  \n           <transport clientCredentialType=\"Windows\" />  \n           <message clientCredentialType=\"Certificate\" />  \n        </security>  \n      </binding>  \n    </netTcpBinding>  \n    </bindings>  \n    ```  \n  \n## See also\n\n- [How to: Set the Security Mode](../../../../docs/framework/wcf/how-to-set-the-security-mode.md)\n- [Securing Services](../../../../docs/framework/wcf/securing-services.md)\n- [Securing Services and Clients](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)\n","nodes":[{"pos":[4,232],"embed":true,"restype":"x-metadata","content":"title: \"How to: Use Transport Security and Message Credentials\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"TransportWithMessageCredentials\"\nms.assetid: 6cc35346-c37a-4859-b82b-946c0ba6e68f","nodes":[{"content":"How to: Use Transport Security and Message Credentials","nodes":[{"pos":[0,54],"content":"How to: Use Transport Security and Message Credentials","nodes":[{"content":"How to: Use Transport Security and Message Credentials","pos":[0,54]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[239,293],"content":"How to: Use Transport Security and Message Credentials","linkify":"How to: Use Transport Security and Message Credentials","nodes":[{"content":"How to: Use Transport Security and Message Credentials","pos":[0,54]}]},{"content":"Securing a service with both transport and message credentials uses the best of both Transport and Message security modes in Windows Communication Foundation (WCF).","pos":[294,458]},{"content":"In sum, transport-layer security provides integrity and confidentiality, while message-layer security provides a variety of credentials that are not possible with strict transport security mechanisms.","pos":[459,659]},{"content":"This topic shows the basic steps for implementing transport with message credentials using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> bindings.","pos":[660,850],"source":" This topic shows the basic steps for implementing transport with message credentials using the <xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.NetTcpBinding> bindings."},{"content":"For more information about setting the security mode, see <bpt id=\"p1\">[</bpt>How to: Set the Security Mode<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-set-the-security-mode.md)</ept>.","pos":[851,1005],"source":" For more information about setting the security mode, see [How to: Set the Security Mode](../../../../docs/framework/wcf/how-to-set-the-security-mode.md)."},{"content":"When setting the security mode to <ph id=\"ph1\">`TransportWithMessageCredential`</ph>, the transport determines the actual mechanism that provides the transport-level security.","pos":[1012,1169],"source":"When setting the security mode to `TransportWithMessageCredential`, the transport determines the actual mechanism that provides the transport-level security."},{"content":"For HTTP, the mechanism is Secure Sockets Layer (SSL) over HTTP (HTTPS); for TCP, it is SSL over TCP or Windows.","pos":[1170,1282]},{"content":"If the transport is HTTP (using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph>), SSL over HTTP provides the transport-level security.","pos":[1289,1420],"source":"If the transport is HTTP (using the <xref:System.ServiceModel.WSHttpBinding>), SSL over HTTP provides the transport-level security."},{"content":"In that case, you must configure the computer hosting the service with an SSL certificate bound to a port, as shown later in this topic.","pos":[1421,1557]},{"content":"If the transport is TCP (using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph>), by default the transport-level security provided is Windows security, or SSL over TCP.","pos":[1564,1728],"source":"If the transport is TCP (using the <xref:System.ServiceModel.NetTcpBinding>), by default the transport-level security provided is Windows security, or SSL over TCP."},{"content":"When using SSL over TCP, you must specify the certificate using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A&gt;</ph> method, as shown later in this topic.","pos":[1729,1930],"source":" When using SSL over TCP, you must specify the certificate using the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A> method, as shown later in this topic."},{"pos":[1940,2016],"content":"To use the WSHttpBinding with a certificate for transport security (in code)","linkify":"To use the WSHttpBinding with a certificate for transport security (in code)","nodes":[{"content":"To use the WSHttpBinding with a certificate for transport security (in code)","pos":[0,76]}]},{"content":"Use the HttpCfg.exe tool to bind an SSL certificate to a port on the machine.","pos":[2026,2103]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Configure a Port with an SSL Certificate<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)</ept>.","pos":[2104,2280],"source":" For more information, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)."},{"pos":[2290,2508],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> class and set the <ph id=\"ph2\">&lt;xref:System.ServiceModel.WSHttpSecurity.Mode%2A&gt;</ph> property to <ph id=\"ph3\">&lt;xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential&gt;</ph>.","source":"Create an instance of the <xref:System.ServiceModel.WSHttpBinding> class and set the <xref:System.ServiceModel.WSHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential>."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A&gt;</ph> property to an appropriate value.","pos":[2518,2632],"source":"Set the <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A> property to an appropriate value."},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>Selecting a Credential Type<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)</ept>.) The following code uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageCredentialType.Certificate&gt;</ph> value.","pos":[2633,2866],"source":" (For more information, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) The following code uses the <xref:System.ServiceModel.MessageCredentialType.Certificate> value."},{"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.Uri&gt;</ph> class with an appropriate base address.","pos":[2876,2959],"source":"Create an instance of the <xref:System.Uri> class with an appropriate base address."},{"content":"Note that the address must use the \"HTTPS\" scheme and must contain the actual name of the machine and the port number that the SSL certificate is bound to.","pos":[2960,3115]},{"content":"(Alternatively, you can set the base address in configuration.)","pos":[3116,3179]},{"pos":[3189,3290],"content":"Add a service endpoint using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A&gt;</ph> method.","source":"Add a service endpoint using the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method."},{"pos":[3300,3474],"content":"Create the instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> and call the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ICommunicationObject.Open%2A&gt;</ph> method, as shown in the following code.","source":"Create the instance of the <xref:System.ServiceModel.ServiceHost> and call the <xref:System.ServiceModel.ICommunicationObject.Open%2A> method, as shown in the following code."},{"pos":[3485,3750],"content":"[!code-csharp[c_SettingSecurityMode#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_settingsecuritymode/cs/source.cs#7)]\n [!code-vb[c_SettingSecurityMode#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_settingsecuritymode/vb/source.vb#7)]","leadings":["","    "],"nodes":[]},{"pos":[3760,3836],"content":"To use the NetTcpBinding with a certificate for transport security (in code)","linkify":"To use the NetTcpBinding with a certificate for transport security (in code)","nodes":[{"content":"To use the NetTcpBinding with a certificate for transport security (in code)","pos":[0,76]}]},{"pos":[3846,4064],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> class and set the <ph id=\"ph2\">&lt;xref:System.ServiceModel.NetTcpSecurity.Mode%2A&gt;</ph> property to <ph id=\"ph3\">&lt;xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential&gt;</ph>.","source":"Create an instance of the <xref:System.ServiceModel.NetTcpBinding> class and set the <xref:System.ServiceModel.NetTcpSecurity.Mode%2A> property to <xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential>."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A&gt;</ph> to an appropriate value.","pos":[4074,4180],"source":"Set the <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A> to an appropriate value."},{"content":"The following code uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageCredentialType.Certificate&gt;</ph> value.","pos":[4181,4276],"source":" The following code uses the <xref:System.ServiceModel.MessageCredentialType.Certificate> value."},{"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.Uri&gt;</ph> class with an appropriate base address.","pos":[4286,4369],"source":"Create an instance of the <xref:System.Uri> class with an appropriate base address."},{"content":"Note that the address must use the \"net.tcp\" scheme.","pos":[4370,4422]},{"content":"(Alternatively, you can set the base address in configuration.)","pos":[4423,4486]},{"pos":[4496,4568],"content":"Create the instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> class.","source":"Create the instance of the <xref:System.ServiceModel.ServiceHost> class."},{"pos":[4578,4836],"content":"Use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A&gt;</ph> method of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential&gt;</ph> class to explicitly set the X.509 certificate for the service.","source":"Use the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class to explicitly set the X.509 certificate for the service."},{"pos":[4846,4947],"content":"Add a service endpoint using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A&gt;</ph> method.","source":"Add a service endpoint using the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method."},{"pos":[4957,5061],"content":"Call the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ICommunicationObject.Open%2A&gt;</ph> method, as shown in the following code.","source":"Call the <xref:System.ServiceModel.ICommunicationObject.Open%2A> method, as shown in the following code."},{"pos":[5072,5337],"content":"[!code-csharp[c_SettingSecurityMode#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_settingsecuritymode/cs/source.cs#8)]\n [!code-vb[c_SettingSecurityMode#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_settingsecuritymode/vb/source.vb#8)]","leadings":["","    "],"nodes":[]},{"pos":[5347,5417],"content":"To use the NetTcpBinding with Windows for transport security (in code)","linkify":"To use the NetTcpBinding with Windows for transport security (in code)","nodes":[{"content":"To use the NetTcpBinding with Windows for transport security (in code)","pos":[0,70]}]},{"pos":[5427,5645],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.NetTcpBinding&gt;</ph> class and set the <ph id=\"ph2\">&lt;xref:System.ServiceModel.NetTcpSecurity.Mode%2A&gt;</ph> property to <ph id=\"ph3\">&lt;xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential&gt;</ph>.","source":"Create an instance of the <xref:System.ServiceModel.NetTcpBinding> class and set the <xref:System.ServiceModel.NetTcpSecurity.Mode%2A> property to <xref:System.ServiceModel.SecurityMode.TransportWithMessageCredential>."},{"content":"Set the transport security to use Windows by setting the <ph id=\"ph1\">&lt;xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A&gt;</ph> to <ph id=\"ph2\">&lt;xref:System.ServiceModel.TcpClientCredentialType.Windows&gt;</ph>.","pos":[5655,5846],"source":"Set the transport security to use Windows by setting the <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A> to <xref:System.ServiceModel.TcpClientCredentialType.Windows>."},{"content":"(Note that this is the default.)","pos":[5847,5879]},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A&gt;</ph> to an appropriate value.","pos":[5889,5995],"source":"Set the <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A> to an appropriate value."},{"content":"The following code uses the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageCredentialType.Certificate&gt;</ph> value.","pos":[5996,6091],"source":" The following code uses the <xref:System.ServiceModel.MessageCredentialType.Certificate> value."},{"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.Uri&gt;</ph> class with an appropriate base address.","pos":[6101,6184],"source":"Create an instance of the <xref:System.Uri> class with an appropriate base address."},{"content":"Note that the address must use the \"net.tcp\" scheme.","pos":[6185,6237]},{"content":"(Alternatively, you can set the base address in configuration.)","pos":[6238,6301]},{"pos":[6311,6383],"content":"Create the instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> class.","source":"Create the instance of the <xref:System.ServiceModel.ServiceHost> class."},{"pos":[6393,6651],"content":"Use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A&gt;</ph> method of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential&gt;</ph> class to explicitly set the X.509 certificate for the service.","source":"Use the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class to explicitly set the X.509 certificate for the service."},{"pos":[6661,6762],"content":"Add a service endpoint using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A&gt;</ph> method.","source":"Add a service endpoint using the <xref:System.ServiceModel.ServiceHost.AddServiceEndpoint%2A> method."},{"pos":[6772,6876],"content":"Call the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ICommunicationObject.Open%2A&gt;</ph> method, as shown in the following code.","source":"Call the <xref:System.ServiceModel.ICommunicationObject.Open%2A> method, as shown in the following code."},{"pos":[6887,7152],"content":"[!code-csharp[c_SettingSecurityMode#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_settingsecuritymode/cs/source.cs#9)]\n [!code-vb[c_SettingSecurityMode#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_settingsecuritymode/vb/source.vb#9)]","leadings":["","    "],"nodes":[]},{"pos":[7161,7180],"content":"Using Configuration","linkify":"Using Configuration","nodes":[{"content":"Using Configuration","pos":[0,19]}]},{"pos":[7191,7215],"content":"To use the WSHttpBinding","linkify":"To use the WSHttpBinding","nodes":[{"content":"To use the WSHttpBinding","pos":[0,24]}]},{"content":"Configure the computer with an SSL certificate bound to a port.","pos":[7225,7288]},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>How to: Configure a Port with an SSL Certificate<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md)</ept>).","pos":[7289,7467],"source":" (For more information, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md))."},{"content":"You do not need to set a &lt;<ph id=\"ph1\">`transport`</ph>&gt; element value with this configuration.","pos":[7468,7545],"source":" You do not need to set a <`transport`> element value with this configuration."},{"content":"Specify the client credential type for the message-level security.","pos":[7555,7621]},{"content":"The following example sets the <ph id=\"ph1\">`clientCredentialType`</ph> attribute of the &lt;<ph id=\"ph2\">`message`</ph>&gt; element to <ph id=\"ph3\">`UserName`</ph>.","pos":[7622,7727],"source":" The following example sets the `clientCredentialType` attribute of the <`message`> element to `UserName`."},{"pos":[8026,8092],"content":"To use the NetTcpBinding with a certificate for transport security","linkify":"To use the NetTcpBinding with a certificate for transport security","nodes":[{"content":"To use the NetTcpBinding with a certificate for transport security","pos":[0,66]}]},{"content":"For SSL over TCP, you must explicitly specify the certificate in the <ph id=\"ph1\">`&lt;behaviors&gt;`</ph> element.","pos":[8102,8193],"source":"For SSL over TCP, you must explicitly specify the certificate in the `<behaviors>` element."},{"content":"The following example specifies a certificate by its issuer in the default store location (local machine and personal stores).","pos":[8194,8320]},{"pos":[8706,8830],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>netTcpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md)</ept> to the bindings section","source":"Add a [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md) to the bindings section"},{"pos":[8840,8916],"content":"Add a binding element, and set the <ph id=\"ph1\">`name`</ph> attribute to an appropriate value.","source":"Add a binding element, and set the `name` attribute to an appropriate value."},{"pos":[8926,9019],"content":"Add a &lt;<ph id=\"ph1\">`security`</ph>&gt; element, and set the <ph id=\"ph2\">`mode`</ph> attribute to <ph id=\"ph3\">`TransportWithMessageCredential`</ph>.","source":"Add a <`security`> element, and set the `mode` attribute to `TransportWithMessageCredential`."},{"pos":[9029,9125],"content":"Add a &lt;<ph id=\"ph1\">`message&gt;`</ph> element, and set the <ph id=\"ph2\">`clientCredentialType`</ph> attribute to an appropriate value.","source":"Add a <`message>` element, and set the `clientCredentialType` attribute to an appropriate value."},{"pos":[9437,9497],"content":"To use the NetTcpBinding with Windows for transport security","linkify":"To use the NetTcpBinding with Windows for transport security","nodes":[{"content":"To use the NetTcpBinding with Windows for transport security","pos":[0,60]}]},{"pos":[9507,9632],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>netTcpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md)</ept> to the bindings section,","source":"Add a [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md) to the bindings section,"},{"pos":[9642,9721],"content":"Add a &lt;<ph id=\"ph1\">`binding`</ph>&gt; element and set the <ph id=\"ph2\">`name`</ph> attribute to an appropriate value.","source":"Add a <`binding`> element and set the `name` attribute to an appropriate value."},{"pos":[9731,9824],"content":"Add a &lt;<ph id=\"ph1\">`security`</ph>&gt; element, and set the <ph id=\"ph2\">`mode`</ph> attribute to <ph id=\"ph3\">`TransportWithMessageCredential`</ph>.","source":"Add a <`security`> element, and set the `mode` attribute to `TransportWithMessageCredential`."},{"pos":[9834,9920],"content":"Add a &lt;<ph id=\"ph1\">`transport`</ph>&gt; element and set the <ph id=\"ph2\">`clientCredentialType`</ph> attribute to <ph id=\"ph3\">`Windows`</ph>.","source":"Add a <`transport`> element and set the `clientCredentialType` attribute to `Windows`."},{"content":"Add a &lt;<ph id=\"ph1\">`message`</ph>&gt; element and set the <ph id=\"ph2\">`clientCredentialType`</ph> attribute to an appropriate value.","pos":[9930,10025],"source":"Add a <`message`> element and set the `clientCredentialType` attribute to an appropriate value."},{"content":"The following code sets the value to a certificate.","pos":[10026,10077]},{"pos":[10449,10457],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10461,10556],"content":"<bpt id=\"p1\">[</bpt>How to: Set the Security Mode<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-set-the-security-mode.md)</ept>","source":"[How to: Set the Security Mode](../../../../docs/framework/wcf/how-to-set-the-security-mode.md)"},{"pos":[10559,10631],"content":"<bpt id=\"p1\">[</bpt>Securing Services<ept id=\"p1\">](../../../../docs/framework/wcf/securing-services.md)</ept>","source":"[Securing Services](../../../../docs/framework/wcf/securing-services.md)"},{"pos":[10634,10746],"content":"<bpt id=\"p1\">[</bpt>Securing Services and Clients<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)</ept>","source":"[Securing Services and Clients](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)"}]}