{"content":"---\ntitle: \"Miscellaneous Constructs in Regular Expressions\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"constructs, miscellaneous\"\n  - \".NET Framework regular expressions, miscellaneous constructs\"\n  - \"regular expressions, miscellaneous constructs\"\nms.assetid: 7d10d11f-680f-4721-b047-fb136316b4cd\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Miscellaneous Constructs in Regular Expressions\nRegular expressions in .NET include three miscellaneous language constructs. One lets you enable or disable particular matching options in the middle of a regular expression pattern. The remaining two let you include comments in a regular expression.  \n  \n## Inline Options  \n You can set or disable specific pattern matching options for part of a regular expression by using the syntax  \n  \n```  \n(?imnsx-imnsx)  \n```  \n  \n You list the options you want to enable after the question mark, and the options you want to disable after the minus sign. The following table describes each option. For more information about each option, see [Regular Expression Options](../../../docs/standard/base-types/regular-expression-options.md).  \n  \n|Option|Description|  \n|------------|-----------------|  \n|`i`|Case-insensitive matching.|  \n|`m`|Multiline mode.|  \n|`n`|Explicit captures only. (Parentheses do not act as capturing groups.)|  \n|`s`|Single-line mode.|  \n|`x`|Ignore unescaped white space, and allow x-mode comments.|  \n  \n Any change in regular expression options defined by the `(?imnsx-imnsx)` construct remains in effect until the end of the enclosing group.  \n  \n> [!NOTE]\n>  The `(?imnsx-imnsx:`*subexpression*`)` grouping construct provides identical functionality for a subexpression. For more information, see [Grouping Constructs](../../../docs/standard/base-types/grouping-constructs-in-regular-expressions.md).  \n  \n The following example uses the `i`, `n`, and `x` options to enable case insensitivity and explicit captures, and to ignore white space in the regular expression pattern in the middle of a regular expression.  \n  \n [!code-csharp[RegularExpressions.Language.Miscellaneous#1](../../../samples/snippets/csharp/VS_Snippets_CLR/regularexpressions.language.miscellaneous/cs/miscellaneous1.cs#1)]\n [!code-vb[RegularExpressions.Language.Miscellaneous#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/regularexpressions.language.miscellaneous/vb/miscellaneous1.vb#1)]  \n  \n The example defines two regular expressions. The first, `\\b(D\\w+)\\s(d\\w+)\\b`, matches two consecutive words that begin with an uppercase \"D\" and a lowercase \"d\". The second regular expression, `\\b(D\\w+)(?ixn) \\s (d\\w+) \\b`, uses inline options to modify this pattern, as described in the following table. A comparison of the results confirms the effect of the `(?ixn)` construct.  \n  \n|Pattern|Description|  \n|-------------|-----------------|  \n|`\\b`|Start at a word boundary.|  \n|`(D\\w+)`|Match a capital \"D\" followed by one or more word characters. This is the first capture group.|  \n|`(?ixn)`|From this point on, make comparisons case-insensitive, make only explicit captures, and ignore white space in the regular expression pattern.|  \n|`\\s`|Match a white-space character.|  \n|`(d\\w+)`|Match an uppercase or lowercase \"d\" followed by one or more word characters. This group is not captured because the `n` (explicit capture) option was enabled..|  \n|`\\b`|Match a word boundary.|  \n  \n## Inline Comment  \n The `(?#` *comment*`)` construct lets you include an inline comment in a regular expression. The regular expression engine does not use any part of the comment in pattern matching, although the comment is included in the string that is returned by the <xref:System.Text.RegularExpressions.Regex.ToString%2A?displayProperty=nameWithType> method. The comment ends at the first closing parenthesis.  \n  \n The following example repeats the first regular expression pattern from the example in the previous section. It adds two inline comments to the regular expression to indicate whether the comparison is case-sensitive. The regular expression pattern, `\\b((?# case-sensitive comparison)D\\w+)\\s(?ixn)((?#case-insensitive comparison)d\\w+)\\b`, is defined as follows.  \n  \n|Pattern|Description|  \n|-------------|-----------------|  \n|`\\b`|Start at a word boundary.|  \n|`(?# case-sensitive comparison)`|A comment. It does not affect pattern-matching behavior.|  \n|`(D\\w+)`|Match a capital \"D\" followed by one or more word characters. This is the first capturing group.|  \n|`\\s`|Match a white-space character.|  \n|`(?ixn)`|From this point on, make comparisons case-insensitive, make only explicit captures, and ignore white space in the regular expression pattern.|  \n|`(?#case-insensitive comparison)`|A comment. It does not affect pattern-matching behavior.|  \n|`(d\\w+)`|Match an uppercase or lowercase \"d\" followed by one or more word characters. This is the second capture group.|  \n|`\\b`|Match a word boundary.|  \n  \n [!code-csharp[RegularExpressions.Language.Miscellaneous#2](../../../samples/snippets/csharp/VS_Snippets_CLR/regularexpressions.language.miscellaneous/cs/miscellaneous2.cs#2)]\n [!code-vb[RegularExpressions.Language.Miscellaneous#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/regularexpressions.language.miscellaneous/vb/miscellaneous2.vb#2)]  \n  \n## End-of-Line Comment  \n A number sign (`#`)marks an x-mode comment, which starts at the unescaped # character at the end of the regular expression pattern and continues until the end of the line. To use this construct, you must either enable the `x` option (through inline options) or supply the <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> value to the `option` parameter when instantiating the <xref:System.Text.RegularExpressions.Regex> object or calling a static <xref:System.Text.RegularExpressions.Regex> method.  \n  \n The following example illustrates the end-of-line comment construct. It determines whether a string is a composite format string that includes at least one format item. The following table describes the constructs in the regular expression pattern:  \n  \n `\\{\\d+(,-*\\d+)*(\\:\\w{1,4}?)*\\}(?x) # Looks for a composite format item.`  \n  \n|Pattern|Description|  \n|-------------|-----------------|  \n|`\\{`|Match an opening brace.|  \n|`\\d+`|Match one or more decimal digits.|  \n|`(,-*\\d+)*`|Match zero or one occurrence of a comma, followed by an optional minus sign, followed by one or more decimal digits.|  \n|`(\\:\\w{1,4}?)*`|Match zero or one occurrence of a colon, followed by one to four, but as few as possible, white-space characters.|  \n|`\\}`|Match a closing brace.|  \n|`(?x)`|Enable the ignore pattern white-space option so that the end-of-line comment will be recognized.|  \n|`# Looks for a composite format item.`|An end-of-line comment.|  \n  \n [!code-csharp[RegularExpressions.Language.Miscellaneous#3](../../../samples/snippets/csharp/VS_Snippets_CLR/regularexpressions.language.miscellaneous/cs/miscellaneous3.cs#3)]\n [!code-vb[RegularExpressions.Language.Miscellaneous#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/regularexpressions.language.miscellaneous/vb/miscellaneous3.vb#3)]  \n  \n Note that, instead of providing the `(?x)` construct in the regular expression, the comment could also have been recognized by calling the <xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method and passing it the <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> enumeration value.  \n  \n## See also\n\n- [Regular Expression Language - Quick Reference](../../../docs/standard/base-types/regular-expression-language-quick-reference.md)\n","nodes":[{"pos":[4,409],"embed":true,"restype":"x-metadata","content":"title: \"Miscellaneous Constructs in Regular Expressions\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"constructs, miscellaneous\"\n  - \".NET Framework regular expressions, miscellaneous constructs\"\n  - \"regular expressions, miscellaneous constructs\"\nms.assetid: 7d10d11f-680f-4721-b047-fb136316b4cd\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Miscellaneous Constructs in Regular Expressions","nodes":[{"pos":[0,47],"content":"Miscellaneous Constructs in Regular Expressions","nodes":[{"content":"Miscellaneous Constructs in Regular Expressions","pos":[0,47]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[416,463],"content":"Miscellaneous Constructs in Regular Expressions","linkify":"Miscellaneous Constructs in Regular Expressions","nodes":[{"content":"Miscellaneous Constructs in Regular Expressions","pos":[0,47]}]},{"content":"Regular expressions in .NET include three miscellaneous language constructs.","pos":[464,540]},{"content":"One lets you enable or disable particular matching options in the middle of a regular expression pattern.","pos":[541,646]},{"content":"The remaining two let you include comments in a regular expression.","pos":[647,714]},{"pos":[723,737],"content":"Inline Options","linkify":"Inline Options","nodes":[{"content":"Inline Options","pos":[0,14]}]},{"content":"You can set or disable specific pattern matching options for part of a regular expression by using the syntax","pos":[741,850]},{"content":"You list the options you want to enable after the question mark, and the options you want to disable after the minus sign.","pos":[889,1011]},{"content":"The following table describes each option.","pos":[1012,1054]},{"content":"For more information about each option, see <bpt id=\"p1\">[</bpt>Regular Expression Options<ept id=\"p1\">](../../../docs/standard/base-types/regular-expression-options.md)</ept>.","pos":[1055,1193],"source":" For more information about each option, see [Regular Expression Options](../../../docs/standard/base-types/regular-expression-options.md)."},{"content":"Option","pos":[1200,1206]},{"content":"Description","pos":[1207,1218]},{"content":"Case-insensitive matching.","pos":[1262,1288]},{"content":"Multiline mode.","pos":[1297,1312]},{"content":"Explicit captures only.","pos":[1321,1344]},{"content":"(Parentheses do not act as capturing groups.)","pos":[1345,1390]},{"content":"Single-line mode.","pos":[1399,1416]},{"content":"Ignore unescaped white space, and allow x-mode comments.","pos":[1425,1481]},{"pos":[1489,1627],"content":"Any change in regular expression options defined by the <ph id=\"ph1\">`(?imnsx-imnsx)`</ph> construct remains in effect until the end of the enclosing group.","source":"Any change in regular expression options defined by the `(?imnsx-imnsx)` construct remains in effect until the end of the enclosing group."},{"pos":[1635,1887],"content":"[!NOTE]\n The `(?imnsx-imnsx:`*subexpression*`)` grouping construct provides identical functionality for a subexpression. For more information, see [Grouping Constructs](../../../docs/standard/base-types/grouping-constructs-in-regular-expressions.md).","leadings":["","> "],"nodes":[{"content":"The `(?imnsx-imnsx:`*subexpression*`)` grouping construct provides identical functionality for a subexpression. For more information, see [Grouping Constructs](../../../docs/standard/base-types/grouping-constructs-in-regular-expressions.md).","pos":[9,250],"nodes":[{"content":"The <ph id=\"ph1\">`(?imnsx-imnsx:`</ph><bpt id=\"p1\">*</bpt>subexpression<ept id=\"p1\">*</ept><ph id=\"ph2\">`)`</ph> grouping construct provides identical functionality for a subexpression.","pos":[0,111],"source":"The `(?imnsx-imnsx:`*subexpression*`)` grouping construct provides identical functionality for a subexpression."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Grouping Constructs<ept id=\"p1\">](../../../docs/standard/base-types/grouping-constructs-in-regular-expressions.md)</ept>.","pos":[112,241],"source":" For more information, see [Grouping Constructs](../../../docs/standard/base-types/grouping-constructs-in-regular-expressions.md)."}]}]},{"pos":[1894,2101],"content":"The following example uses the <ph id=\"ph1\">`i`</ph>, <ph id=\"ph2\">`n`</ph>, and <ph id=\"ph3\">`x`</ph> options to enable case insensitivity and explicit captures, and to ignore white space in the regular expression pattern in the middle of a regular expression.","source":"The following example uses the `i`, `n`, and `x` options to enable case insensitivity and explicit captures, and to ignore white space in the regular expression pattern in the middle of a regular expression."},{"content":"The example defines two regular expressions.","pos":[2466,2510]},{"content":"The first, <ph id=\"ph1\">`\\b(D\\w+)\\s(d\\w+)\\b`</ph>, matches two consecutive words that begin with an uppercase \"D\" and a lowercase \"d\".","pos":[2511,2627],"source":" The first, `\\b(D\\w+)\\s(d\\w+)\\b`, matches two consecutive words that begin with an uppercase \"D\" and a lowercase \"d\"."},{"content":"The second regular expression, <ph id=\"ph1\">`\\b(D\\w+)(?ixn) \\s (d\\w+) \\b`</ph>, uses inline options to modify this pattern, as described in the following table.","pos":[2628,2770],"source":" The second regular expression, `\\b(D\\w+)(?ixn) \\s (d\\w+) \\b`, uses inline options to modify this pattern, as described in the following table."},{"content":"A comparison of the results confirms the effect of the <ph id=\"ph1\">`(?ixn)`</ph> construct.","pos":[2771,2845],"source":" A comparison of the results confirms the effect of the `(?ixn)` construct."},{"content":"Pattern","pos":[2852,2859]},{"content":"Description","pos":[2860,2871]},{"content":"Start at a word boundary.","pos":[2917,2942]},{"content":"Match a capital \"D\" followed by one or more word characters.","pos":[2956,3016]},{"content":"This is the first capture group.","pos":[3017,3049]},{"content":"From this point on, make comparisons case-insensitive, make only explicit captures, and ignore white space in the regular expression pattern.","pos":[3063,3204]},{"content":"Match a white-space character.","pos":[3214,3244]},{"content":"Match an uppercase or lowercase \"d\" followed by one or more word characters.","pos":[3258,3334]},{"content":"This group is not captured because the <ph id=\"ph1\">`n`</ph> (explicit capture) option was enabled..","pos":[3335,3417],"source":" This group is not captured because the `n` (explicit capture) option was enabled.."},{"content":"Match a word boundary.","pos":[3427,3449]},{"pos":[3459,3473],"content":"Inline Comment","linkify":"Inline Comment","nodes":[{"content":"Inline Comment","pos":[0,14]}]},{"content":"The <ph id=\"ph1\">`(?#`</ph> <bpt id=\"p1\">*</bpt>comment<ept id=\"p1\">*</ept><ph id=\"ph2\">`)`</ph> construct lets you include an inline comment in a regular expression.","pos":[3477,3569],"source":"The `(?#` *comment*`)` construct lets you include an inline comment in a regular expression."},{"content":"The regular expression engine does not use any part of the comment in pattern matching, although the comment is included in the string that is returned by the <ph id=\"ph1\">&lt;xref:System.Text.RegularExpressions.Regex.ToString%2A?displayProperty=nameWithType&gt;</ph> method.","pos":[3570,3821],"source":" The regular expression engine does not use any part of the comment in pattern matching, although the comment is included in the string that is returned by the <xref:System.Text.RegularExpressions.Regex.ToString%2A?displayProperty=nameWithType> method."},{"content":"The comment ends at the first closing parenthesis.","pos":[3822,3872]},{"content":"The following example repeats the first regular expression pattern from the example in the previous section.","pos":[3879,3987]},{"content":"It adds two inline comments to the regular expression to indicate whether the comparison is case-sensitive.","pos":[3988,4095]},{"content":"The regular expression pattern, <ph id=\"ph1\">`\\b((?# case-sensitive comparison)D\\w+)\\s(?ixn)((?#case-insensitive comparison)d\\w+)\\b`</ph>, is defined as follows.","pos":[4096,4239],"source":" The regular expression pattern, `\\b((?# case-sensitive comparison)D\\w+)\\s(?ixn)((?#case-insensitive comparison)d\\w+)\\b`, is defined as follows."},{"content":"Pattern","pos":[4246,4253]},{"content":"Description","pos":[4254,4265]},{"content":"Start at a word boundary.","pos":[4311,4336]},{"content":"A comment.","pos":[4374,4384]},{"content":"It does not affect pattern-matching behavior.","pos":[4385,4430]},{"content":"Match a capital \"D\" followed by one or more word characters.","pos":[4444,4504]},{"content":"This is the first capturing group.","pos":[4505,4539]},{"content":"Match a white-space character.","pos":[4549,4579]},{"content":"From this point on, make comparisons case-insensitive, make only explicit captures, and ignore white space in the regular expression pattern.","pos":[4593,4734]},{"content":"A comment.","pos":[4773,4783]},{"content":"It does not affect pattern-matching behavior.","pos":[4784,4829]},{"content":"Match an uppercase or lowercase \"d\" followed by one or more word characters.","pos":[4843,4919]},{"content":"This is the second capture group.","pos":[4920,4953]},{"content":"Match a word boundary.","pos":[4963,4985]},{"pos":[5353,5372],"content":"End-of-Line Comment","linkify":"End-of-Line Comment","nodes":[{"content":"End-of-Line Comment","pos":[0,19]}]},{"content":"A number sign (<ph id=\"ph1\">`#`</ph>)marks an x-mode comment, which starts at the unescaped # character at the end of the regular expression pattern and continues until the end of the line.","pos":[5376,5547],"source":"A number sign (`#`)marks an x-mode comment, which starts at the unescaped # character at the end of the regular expression pattern and continues until the end of the line."},{"content":"To use this construct, you must either enable the <ph id=\"ph1\">`x`</ph> option (through inline options) or supply the <ph id=\"ph2\">&lt;xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType&gt;</ph> value to the <ph id=\"ph3\">`option`</ph> parameter when instantiating the <ph id=\"ph4\">&lt;xref:System.Text.RegularExpressions.Regex&gt;</ph> object or calling a static <ph id=\"ph5\">&lt;xref:System.Text.RegularExpressions.Regex&gt;</ph> method.","pos":[5548,5929],"source":" To use this construct, you must either enable the `x` option (through inline options) or supply the <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> value to the `option` parameter when instantiating the <xref:System.Text.RegularExpressions.Regex> object or calling a static <xref:System.Text.RegularExpressions.Regex> method."},{"content":"The following example illustrates the end-of-line comment construct.","pos":[5936,6004]},{"content":"It determines whether a string is a composite format string that includes at least one format item.","pos":[6005,6104]},{"content":"The following table describes the constructs in the regular expression pattern:","pos":[6105,6184]},{"content":"Pattern","pos":[6270,6277]},{"content":"Description","pos":[6278,6289]},{"content":"Match an opening brace.","pos":[6335,6358]},{"content":"Match one or more decimal digits.","pos":[6369,6402]},{"content":"Match zero or one occurrence of a comma, followed by an optional minus sign, followed by one or more decimal digits.","pos":[6419,6535]},{"content":"Match zero or one occurrence of a colon, followed by one to four, but as few as possible, white-space characters.","pos":[6556,6669]},{"content":"Match a closing brace.","pos":[6679,6701]},{"content":"Enable the ignore pattern white-space option so that the end-of-line comment will be recognized.","pos":[6713,6809]},{"content":"An end-of-line comment.","pos":[6853,6876]},{"pos":[7242,7691],"content":"Note that, instead of providing the <ph id=\"ph1\">`(?x)`</ph> construct in the regular expression, the comment could also have been recognized by calling the <ph id=\"ph2\">&lt;xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType&gt;</ph> method and passing it the <ph id=\"ph3\">&lt;xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType&gt;</ph> enumeration value.","source":"Note that, instead of providing the `(?x)` construct in the regular expression, the comment could also have been recognized by calling the <xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=nameWithType> method and passing it the <xref:System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace?displayProperty=nameWithType> enumeration value."},{"pos":[7700,7708],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[7712,7841],"content":"<bpt id=\"p1\">[</bpt>Regular Expression Language - Quick Reference<ept id=\"p1\">](../../../docs/standard/base-types/regular-expression-language-quick-reference.md)</ept>","source":"[Regular Expression Language - Quick Reference](../../../docs/standard/base-types/regular-expression-language-quick-reference.md)"}]}