{"content":"---\ntitle: \"How to: Define and Use Custom Numeric Format Providers | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"numeric format strings [.NET Framework]\"\n  - \"formatting [.NET Framework], numbers\"\n  - \"number formatting [.NET Framework]\"\n  - \"custom numeric format strings\"\n  - \"numbers [.NET Framework], custom numeric format strings\"\n  - \"displaying date and time data\"\n  - \"format providers [.NET Framework]\"\n  - \"custom format strings\"\nms.assetid: a281bfbf-6596-45ed-a2d6-3782d535ada2\ncaps.latest.revision: 11\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# How to: Define and Use Custom Numeric Format Providers\nThe [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] gives you extensive control over the string representation of numeric values. It supports the following features for customizing the format of numeric values:  \n  \n-   Standard numeric format strings, which provide a predefined set of formats for converting numbers to their string representation. You can use them with any numeric formatting method, such as <xref:System.Decimal.ToString%28System.String%29?displayProperty=fullName>, that has a `format` parameter. For details, see [Standard Numeric Format Strings](../../../docs/standard/base-types/standard-numeric-format-strings.md).  \n  \n-   Custom numeric format strings, which provide a set of symbols that can be combined to define custom numeric format specifiers. They can also be used with any numeric formatting method, such as <xref:System.Decimal.ToString%28System.String%29?displayProperty=fullName>, that has a `format` parameter. For details, see [Custom Numeric Format Strings](../../../docs/standard/base-types/custom-numeric-format-strings.md).  \n  \n-   Custom <xref:System.Globalization.CultureInfo> or <xref:System.Globalization.NumberFormatInfo> objects, which define the symbols and format patterns used in displaying the string representations of numeric values. You can use them with any numeric formatting method, such as <xref:System.Int32.ToString%2A>, that has a `provider` parameter. Typically, the `provider` parameter is used to specify culture-specific formatting.  \n  \n In some cases (such as when an application must display a formatted account number, an identification number, or a postal code) these three techniques are inappropriate. The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] also enables you to define a formatting object that is neither a <xref:System.Globalization.CultureInfo> nor a <xref:System.Globalization.NumberFormatInfo> object to determine how a numeric value is formatted. This topic provides the step-by-step instructions for implementing such an object, and provides an example that formats telephone numbers.  \n  \n### To define a custom format provider  \n  \n1.  Define a class that implements the <xref:System.IFormatProvider> and <xref:System.ICustomFormatter> interfaces.  \n  \n2.  Implement the <xref:System.IFormatProvider.GetFormat%2A?displayProperty=fullName> method. <xref:System.IFormatProvider.GetFormat%2A> is a callback method that the formatting method (such as the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method) invokes to retrieve the object that is actually responsible for performing custom formatting. A typical implementation of <xref:System.IFormatProvider.GetFormat%2A> does the following:  \n  \n    1.  Determines whether the <xref:System.Type> object passed as a method parameter represents an <xref:System.ICustomFormatter> interface.  \n  \n    2.  If the parameter does represent the <xref:System.ICustomFormatter> interface, <xref:System.IFormatProvider.GetFormat%2A> returns an object that implements the <xref:System.ICustomFormatter> interface that is responsible for providing custom formatting. Typically, the custom formatting object returns itself.  \n  \n    3.  If the parameter does not represent the <xref:System.ICustomFormatter> interface, <xref:System.IFormatProvider.GetFormat%2A> returns `null`.  \n  \n3.  Implement the <xref:System.ICustomFormatter.Format%2A> method. This method is called by the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method and is responsible for returning the string representation of a number. Implementing the method typically involves the following:  \n  \n    1.  Optionally, make sure that the method is legitimately intended to provide formatting services by examining the `provider` parameter. For formatting objects that implement both <xref:System.IFormatProvider> and <xref:System.ICustomFormatter>, this involves testing the `provider` parameter for equality with the current formatting object.  \n  \n    2.  Determine whether the formatting object should support custom format specifiers. (For example, an \"N\" format specifier might indicate that a U.S. telephone number should be output in NANP format, and an \"I\" might indicate output in ITU-T Recommendation E.123 format.) If format specifiers are used, the method should handle the specific format specifier. It is passed to the method in the `format` parameter. If no specifier is present, the value of the `format` parameter is <xref:System.String.Empty?displayProperty=fullName>.  \n  \n    3.  Retrieve the numeric value passed to the method as the `arg` parameter. Perform whatever manipulations are required to convert it to its string representation.  \n  \n    4.  Return the string representation of the `arg` parameter.  \n  \n### To use a custom numeric formatting object  \n  \n1.  Create a new instance of the custom formatting class.  \n  \n2.  Call the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> formatting method, passing it the custom formatting object, the formatting specifier (or <xref:System.String.Empty?displayProperty=fullName>, if one is not used), and the numeric value to be formatted.  \n  \n## Example  \n The following example defines a custom numeric format provider named `TelephoneFormatter` that converts a number that represents a U.S. telephone number to its NANP or E.123 format. The method handles two format specifiers, \"N\" (which outputs the NANP format) and \"I\" (which outputs the international E.123 format).  \n  \n [!code-csharp[Formatting.HowTo.NumericValue#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#1)]\n [!code-vb[Formatting.HowTo.NumericValue#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#1)]  \n  \n The custom numeric format provider can be used only with the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method. The other overloads of numeric formatting methods (such as `ToString`) that have a parameter of type <xref:System.IFormatProvider> all pass the <xref:System.IFormatProvider.GetFormat%2A?displayProperty=fullName> implementation a <xref:System.Type> object that represents the <xref:System.Globalization.NumberFormatInfo> type. In return, they expect the method to return a <xref:System.Globalization.NumberFormatInfo> object. If it does not, the custom numeric format provider is ignored, and the <xref:System.Globalization.NumberFormatInfo> object for the current culture is used in its place. In the example, the `TelephoneFormatter.GetFormat` method handles the possibility that it may be inappropriately passed to a numeric formatting method by examining the method parameter and returning `null` if it represents a type other than <xref:System.ICustomFormatter>.  \n  \n If a custom numeric format provider supports a set of format specifiers, make sure you provide a default behavior if no format specifier is supplied in the format item used in the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method call. In the example, \"N\" is the default format specifier. This allows for a number to be converted to a formatted telephone number by providing an explicit format specifier. The following example illustrates such a method call.  \n  \n [!code-csharp[Formatting.HowTo.NumericValue#2](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#2)]\n [!code-vb[Formatting.HowTo.NumericValue#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#2)]  \n  \n But it also allows the conversion to occur if no format specifier is present. The following example illustrates such a method call.  \n  \n [!code-csharp[Formatting.HowTo.NumericValue#3](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#3)]\n [!code-vb[Formatting.HowTo.NumericValue#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#3)]  \n  \n If no default format specifier is defined, your implementation of the <xref:System.ICustomFormatter.Format%2A?displayProperty=fullName> method should include code such as the following so that .NET can provide formatting that your code does not support.  \n  \n [!code-csharp[System.ICustomFormatter.Format#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.ICustomFormatter.Format/cs/format.cs#1)]\n [!code-vb[System.ICustomFormatter.Format#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.ICustomFormatter.Format/vb/Format.vb#1)]  \n  \n In the case of this example, the method that implements <xref:System.ICustomFormatter.Format%2A?displayProperty=fullName> is intended to serve as a callback method for the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method. Therefore, it examines the `formatProvider` parameter to determine whether it contains a reference to the current `TelephoneFormatter` object. However, the method can also be called directly from code. In that case, you can use the `formatProvider` parameter to provide a <xref:System.Globalization.CultureInfo> or <xref:System.Globalization.NumberFormatInfo> object that supplies culture-specific formatting information.  \n  \n## Compiling the Code  \n Compile the code at the command line using csc.exe or vb.exe. To compile the code in [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], put it in a console application project template.  \n  \n## See Also  \n [Performing Formatting Operations](../../../docs/standard/base-types/performing-formatting-operations.md)","nodes":[{"pos":[12,83],"content":"How to: Define and Use Custom Numeric Format Providers | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Define and Use Custom Numeric Format Providers | Microsoft Docs","pos":[0,71]}]},{"pos":[729,783],"content":"How to: Define and Use Custom Numeric Format Providers","linkify":"How to: Define and Use Custom Numeric Format Providers","nodes":[{"content":"How to: Define and Use Custom Numeric Format Providers","pos":[0,54]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]</ph> gives you extensive control over the string representation of numeric values.","pos":[784,926],"source":"The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] gives you extensive control over the string representation of numeric values."},{"content":"It supports the following features for customizing the format of numeric values:","pos":[927,1007]},{"content":"Standard numeric format strings, which provide a predefined set of formats for converting numbers to their string representation.","pos":[1017,1146]},{"content":"You can use them with any numeric formatting method, such as <ph id=\"ph1\">&lt;xref:System.Decimal.ToString%28System.String%29?displayProperty=fullName&gt;</ph>, that has a <ph id=\"ph2\">`format`</ph> parameter.","pos":[1147,1314],"source":" You can use them with any numeric formatting method, such as <xref:System.Decimal.ToString%28System.String%29?displayProperty=fullName>, that has a `format` parameter."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Standard Numeric Format Strings<ept id=\"p1\">](../../../docs/standard/base-types/standard-numeric-format-strings.md)</ept>.","pos":[1315,1436],"source":" For details, see [Standard Numeric Format Strings](../../../docs/standard/base-types/standard-numeric-format-strings.md)."},{"content":"Custom numeric format strings, which provide a set of symbols that can be combined to define custom numeric format specifiers.","pos":[1446,1572]},{"content":"They can also be used with any numeric formatting method, such as <ph id=\"ph1\">&lt;xref:System.Decimal.ToString%28System.String%29?displayProperty=fullName&gt;</ph>, that has a <ph id=\"ph2\">`format`</ph> parameter.","pos":[1573,1745],"source":" They can also be used with any numeric formatting method, such as <xref:System.Decimal.ToString%28System.String%29?displayProperty=fullName>, that has a `format` parameter."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Custom Numeric Format Strings<ept id=\"p1\">](../../../docs/standard/base-types/custom-numeric-format-strings.md)</ept>.","pos":[1746,1863],"source":" For details, see [Custom Numeric Format Strings](../../../docs/standard/base-types/custom-numeric-format-strings.md)."},{"content":"Custom <ph id=\"ph1\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Globalization.NumberFormatInfo&gt;</ph> objects, which define the symbols and format patterns used in displaying the string representations of numeric values.","pos":[1873,2086],"source":"Custom <xref:System.Globalization.CultureInfo> or <xref:System.Globalization.NumberFormatInfo> objects, which define the symbols and format patterns used in displaying the string representations of numeric values."},{"content":"You can use them with any numeric formatting method, such as <ph id=\"ph1\">&lt;xref:System.Int32.ToString%2A&gt;</ph>, that has a <ph id=\"ph2\">`provider`</ph> parameter.","pos":[2087,2213],"source":" You can use them with any numeric formatting method, such as <xref:System.Int32.ToString%2A>, that has a `provider` parameter."},{"content":"Typically, the <ph id=\"ph1\">`provider`</ph> parameter is used to specify culture-specific formatting.","pos":[2214,2297],"source":" Typically, the `provider` parameter is used to specify culture-specific formatting."},{"content":"In some cases (such as when an application must display a formatted account number, an identification number, or a postal code) these three techniques are inappropriate.","pos":[2304,2473]},{"content":"The <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]</ph> also enables you to define a formatting object that is neither a <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> nor a <ph id=\"ph3\">&lt;xref:System.Globalization.NumberFormatInfo&gt;</ph> object to determine how a numeric value is formatted.","pos":[2474,2748],"source":" The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] also enables you to define a formatting object that is neither a <xref:System.Globalization.CultureInfo> nor a <xref:System.Globalization.NumberFormatInfo> object to determine how a numeric value is formatted."},{"content":"This topic provides the step-by-step instructions for implementing such an object, and provides an example that formats telephone numbers.","pos":[2749,2887]},{"pos":[2897,2931],"content":"To define a custom format provider","linkify":"To define a custom format provider","nodes":[{"content":"To define a custom format provider","pos":[0,34]}]},{"content":"Define a class that implements the <ph id=\"ph1\">&lt;xref:System.IFormatProvider&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ICustomFormatter&gt;</ph> interfaces.","pos":[2941,3052],"source":"Define a class that implements the <xref:System.IFormatProvider> and <xref:System.ICustomFormatter> interfaces."},{"content":"Implement the <ph id=\"ph1\">&lt;xref:System.IFormatProvider.GetFormat%2A?displayProperty=fullName&gt;</ph> method.","pos":[3062,3151],"source":"Implement the <xref:System.IFormatProvider.GetFormat%2A?displayProperty=fullName> method."},{"content":"<ph id=\"ph1\">&lt;xref:System.IFormatProvider.GetFormat%2A&gt;</ph> is a callback method that the formatting method (such as the <ph id=\"ph2\">&lt;xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName&gt;</ph> method) invokes to retrieve the object that is actually responsible for performing custom formatting.","pos":[3152,3476],"source":"<xref:System.IFormatProvider.GetFormat%2A> is a callback method that the formatting method (such as the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method) invokes to retrieve the object that is actually responsible for performing custom formatting."},{"content":"A typical implementation of <ph id=\"ph1\">&lt;xref:System.IFormatProvider.GetFormat%2A&gt;</ph> does the following:","pos":[3477,3567],"source":" A typical implementation of <xref:System.IFormatProvider.GetFormat%2A> does the following:"},{"content":"Determines whether the <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph> object passed as a method parameter represents an <ph id=\"ph2\">&lt;xref:System.ICustomFormatter&gt;</ph> interface.","pos":[3581,3714],"source":"Determines whether the <xref:System.Type> object passed as a method parameter represents an <xref:System.ICustomFormatter> interface."},{"content":"If the parameter does represent the <ph id=\"ph1\">&lt;xref:System.ICustomFormatter&gt;</ph> interface, <ph id=\"ph2\">&lt;xref:System.IFormatProvider.GetFormat%2A&gt;</ph> returns an object that implements the <ph id=\"ph3\">&lt;xref:System.ICustomFormatter&gt;</ph> interface that is responsible for providing custom formatting.","pos":[3728,3980],"source":"If the parameter does represent the <xref:System.ICustomFormatter> interface, <xref:System.IFormatProvider.GetFormat%2A> returns an object that implements the <xref:System.ICustomFormatter> interface that is responsible for providing custom formatting."},{"content":"Typically, the custom formatting object returns itself.","pos":[3981,4036]},{"pos":[4050,4190],"content":"If the parameter does not represent the <ph id=\"ph1\">&lt;xref:System.ICustomFormatter&gt;</ph> interface, <ph id=\"ph2\">&lt;xref:System.IFormatProvider.GetFormat%2A&gt;</ph> returns <ph id=\"ph3\">`null`</ph>.","source":"If the parameter does not represent the <xref:System.ICustomFormatter> interface, <xref:System.IFormatProvider.GetFormat%2A> returns `null`."},{"content":"Implement the <ph id=\"ph1\">&lt;xref:System.ICustomFormatter.Format%2A&gt;</ph> method.","pos":[4200,4262],"source":"Implement the <xref:System.ICustomFormatter.Format%2A> method."},{"content":"This method is called by the <ph id=\"ph1\">&lt;xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName&gt;</ph> method and is responsible for returning the string representation of a number.","pos":[4263,4489],"source":" This method is called by the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method and is responsible for returning the string representation of a number."},{"content":"Implementing the method typically involves the following:","pos":[4490,4547]},{"content":"Optionally, make sure that the method is legitimately intended to provide formatting services by examining the <ph id=\"ph1\">`provider`</ph> parameter.","pos":[4561,4693],"source":"Optionally, make sure that the method is legitimately intended to provide formatting services by examining the `provider` parameter."},{"content":"For formatting objects that implement both <ph id=\"ph1\">&lt;xref:System.IFormatProvider&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ICustomFormatter&gt;</ph>, this involves testing the <ph id=\"ph3\">`provider`</ph> parameter for equality with the current formatting object.","pos":[4694,4898],"source":" For formatting objects that implement both <xref:System.IFormatProvider> and <xref:System.ICustomFormatter>, this involves testing the `provider` parameter for equality with the current formatting object."},{"content":"Determine whether the formatting object should support custom format specifiers.","pos":[4912,4992]},{"content":"(For example, an \"N\" format specifier might indicate that a U.S. telephone number should be output in NANP format, and an \"I\" might indicate output in ITU-T Recommendation E.123 format.) If format specifiers are used, the method should handle the specific format specifier.","pos":[4993,5266]},{"content":"It is passed to the method in the <ph id=\"ph1\">`format`</ph> parameter.","pos":[5267,5320],"source":" It is passed to the method in the `format` parameter."},{"content":"If no specifier is present, the value of the <ph id=\"ph1\">`format`</ph> parameter is <ph id=\"ph2\">&lt;xref:System.String.Empty?displayProperty=fullName&gt;</ph>.","pos":[5321,5440],"source":" If no specifier is present, the value of the `format` parameter is <xref:System.String.Empty?displayProperty=fullName>."},{"content":"Retrieve the numeric value passed to the method as the <ph id=\"ph1\">`arg`</ph> parameter.","pos":[5454,5525],"source":"Retrieve the numeric value passed to the method as the `arg` parameter."},{"content":"Perform whatever manipulations are required to convert it to its string representation.","pos":[5526,5613]},{"pos":[5627,5683],"content":"Return the string representation of the <ph id=\"ph1\">`arg`</ph> parameter.","source":"Return the string representation of the `arg` parameter."},{"pos":[5693,5734],"content":"To use a custom numeric formatting object","linkify":"To use a custom numeric formatting object","nodes":[{"content":"To use a custom numeric formatting object","pos":[0,41]}]},{"content":"Create a new instance of the custom formatting class.","pos":[5744,5797]},{"content":"Call the <ph id=\"ph1\">&lt;xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName&gt;</ph> formatting method, passing it the custom formatting object, the formatting specifier (or <ph id=\"ph2\">&lt;xref:System.String.Empty?displayProperty=fullName&gt;</ph>, if one is not used), and the numeric value to be formatted.","pos":[5807,6136],"source":"Call the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> formatting method, passing it the custom formatting object, the formatting specifier (or <xref:System.String.Empty?displayProperty=fullName>, if one is not used), and the numeric value to be formatted."},{"pos":[6145,6152],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example defines a custom numeric format provider named <ph id=\"ph1\">`TelephoneFormatter`</ph> that converts a number that represents a U.S. telephone number to its NANP or E.123 format.","pos":[6156,6337],"source":"The following example defines a custom numeric format provider named `TelephoneFormatter` that converts a number that represents a U.S. telephone number to its NANP or E.123 format."},{"content":"The method handles two format specifiers, \"N\" (which outputs the NANP format) and \"I\" (which outputs the international E.123 format).","pos":[6338,6471]},{"pos":[6478,6773],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Formatting.HowTo.NumericValue#1<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Formatting.HowTo.NumericValue#1<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Formatting.HowTo.NumericValue#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#1)]\n [!code-vb[Formatting.HowTo.NumericValue#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#1)]"},{"content":"The custom numeric format provider can be used only with the <ph id=\"ph1\">&lt;xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName&gt;</ph> method.","pos":[6780,6967],"source":"The custom numeric format provider can be used only with the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method."},{"content":"The other overloads of numeric formatting methods (such as <ph id=\"ph1\">`ToString`</ph>) that have a parameter of type <ph id=\"ph2\">&lt;xref:System.IFormatProvider&gt;</ph> all pass the <ph id=\"ph3\">&lt;xref:System.IFormatProvider.GetFormat%2A?displayProperty=fullName&gt;</ph> implementation a <ph id=\"ph4\">&lt;xref:System.Type&gt;</ph> object that represents the <ph id=\"ph5\">&lt;xref:System.Globalization.NumberFormatInfo&gt;</ph> type.","pos":[6968,7293],"source":" The other overloads of numeric formatting methods (such as `ToString`) that have a parameter of type <xref:System.IFormatProvider> all pass the <xref:System.IFormatProvider.GetFormat%2A?displayProperty=fullName> implementation a <xref:System.Type> object that represents the <xref:System.Globalization.NumberFormatInfo> type."},{"content":"In return, they expect the method to return a <ph id=\"ph1\">&lt;xref:System.Globalization.NumberFormatInfo&gt;</ph> object.","pos":[7294,7392],"source":" In return, they expect the method to return a <xref:System.Globalization.NumberFormatInfo> object."},{"content":"If it does not, the custom numeric format provider is ignored, and the <ph id=\"ph1\">&lt;xref:System.Globalization.NumberFormatInfo&gt;</ph> object for the current culture is used in its place.","pos":[7393,7561],"source":" If it does not, the custom numeric format provider is ignored, and the <xref:System.Globalization.NumberFormatInfo> object for the current culture is used in its place."},{"content":"In the example, the <ph id=\"ph1\">`TelephoneFormatter.GetFormat`</ph> method handles the possibility that it may be inappropriately passed to a numeric formatting method by examining the method parameter and returning <ph id=\"ph2\">`null`</ph> if it represents a type other than <ph id=\"ph3\">&lt;xref:System.ICustomFormatter&gt;</ph>.","pos":[7562,7834],"source":" In the example, the `TelephoneFormatter.GetFormat` method handles the possibility that it may be inappropriately passed to a numeric formatting method by examining the method parameter and returning `null` if it represents a type other than <xref:System.ICustomFormatter>."},{"content":"If a custom numeric format provider supports a set of format specifiers, make sure you provide a default behavior if no format specifier is supplied in the format item used in the <ph id=\"ph1\">&lt;xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName&gt;</ph> method call.","pos":[7841,8152],"source":"If a custom numeric format provider supports a set of format specifiers, make sure you provide a default behavior if no format specifier is supplied in the format item used in the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method call."},{"content":"In the example, \"N\" is the default format specifier.","pos":[8153,8205]},{"content":"This allows for a number to be converted to a formatted telephone number by providing an explicit format specifier.","pos":[8206,8321]},{"content":"The following example illustrates such a method call.","pos":[8322,8375]},{"pos":[8382,8677],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Formatting.HowTo.NumericValue#2<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#2)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Formatting.HowTo.NumericValue#2<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#2)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Formatting.HowTo.NumericValue#2](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#2)]\n [!code-vb[Formatting.HowTo.NumericValue#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#2)]"},{"content":"But it also allows the conversion to occur if no format specifier is present.","pos":[8684,8761]},{"content":"The following example illustrates such a method call.","pos":[8762,8815]},{"pos":[8822,9117],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Formatting.HowTo.NumericValue#3<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#3)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Formatting.HowTo.NumericValue#3<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#3)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Formatting.HowTo.NumericValue#3](../../../samples/snippets/csharp/VS_Snippets_CLR/Formatting.HowTo.NumericValue/cs/Telephone1.cs#3)]\n [!code-vb[Formatting.HowTo.NumericValue#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Formatting.HowTo.NumericValue/vb/Telephone1.vb#3)]"},{"content":"If no default format specifier is defined, your implementation of the <ph id=\"ph1\">&lt;xref:System.ICustomFormatter.Format%2A?displayProperty=fullName&gt;</ph> method should include code such as the following so that .NET can provide formatting that your code does not support.","pos":[9124,9377],"source":"If no default format specifier is defined, your implementation of the <xref:System.ICustomFormatter.Format%2A?displayProperty=fullName> method should include code such as the following so that .NET can provide formatting that your code does not support."},{"pos":[9384,9689],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>System.ICustomFormatter.Format#1<ept id=\"p2\">](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.ICustomFormatter.Format/cs/format.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>System.ICustomFormatter.Format#1<ept id=\"p4\">](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.ICustomFormatter.Format/vb/Format.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[System.ICustomFormatter.Format#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.ICustomFormatter.Format/cs/format.cs#1)]\n [!code-vb[System.ICustomFormatter.Format#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.ICustomFormatter.Format/vb/Format.vb#1)]"},{"content":"In the case of this example, the method that implements <ph id=\"ph1\">&lt;xref:System.ICustomFormatter.Format%2A?displayProperty=fullName&gt;</ph> is intended to serve as a callback method for the <ph id=\"ph2\">&lt;xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName&gt;</ph> method.","pos":[9696,9994],"source":"In the case of this example, the method that implements <xref:System.ICustomFormatter.Format%2A?displayProperty=fullName> is intended to serve as a callback method for the <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=fullName> method."},{"content":"Therefore, it examines the <ph id=\"ph1\">`formatProvider`</ph> parameter to determine whether it contains a reference to the current <ph id=\"ph2\">`TelephoneFormatter`</ph> object.","pos":[9995,10137],"source":" Therefore, it examines the `formatProvider` parameter to determine whether it contains a reference to the current `TelephoneFormatter` object."},{"content":"However, the method can also be called directly from code.","pos":[10138,10196]},{"content":"In that case, you can use the <ph id=\"ph1\">`formatProvider`</ph> parameter to provide a <ph id=\"ph2\">&lt;xref:System.Globalization.CultureInfo&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Globalization.NumberFormatInfo&gt;</ph> object that supplies culture-specific formatting information.","pos":[10197,10416],"source":" In that case, you can use the `formatProvider` parameter to provide a <xref:System.Globalization.CultureInfo> or <xref:System.Globalization.NumberFormatInfo> object that supplies culture-specific formatting information."},{"pos":[10425,10443],"content":"Compiling the Code","linkify":"Compiling the Code","nodes":[{"content":"Compiling the Code","pos":[0,18]}]},{"content":"Compile the code at the command line using csc.exe or vb.exe.","pos":[10447,10508]},{"content":"To compile the code in <ph id=\"ph1\">[!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)]</ph>, put it in a console application project template.","pos":[10509,10633],"source":" To compile the code in [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], put it in a console application project template."},{"pos":[10642,10650],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[10654,10759],"content":"<bpt id=\"p1\">[</bpt>Performing Formatting Operations<ept id=\"p1\">](../../../docs/standard/base-types/performing-formatting-operations.md)</ept>","source":"[Performing Formatting Operations](../../../docs/standard/base-types/performing-formatting-operations.md)"}]}