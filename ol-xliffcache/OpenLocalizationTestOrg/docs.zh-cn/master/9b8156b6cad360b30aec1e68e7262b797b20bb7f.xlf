<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="security-concerns-for-message-logging.md" source-language="en-US" target-language="zh-cn">
    <header>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-7148b53" tool-company="Microsoft" />
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">9b8156b6cad360b30aec1e68e7262b797b20bb7f</xliffext:olfilehash>
      <xliffext:olfilepath xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">docs\framework\wcf\diagnostics\security-concerns-for-message-logging.md</xliffext:olfilepath>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">net-med-mt</xliffext:oltranslationpriority>
      <xliffext:oltranslationtype xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">MT</xliffext:oltranslationtype>
      <xliffext:olskeletonhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">d97cca3b12fb5b72e5f72f08334c589a2f8f9f7b</xliffext:olskeletonhash>
      <xliffext:olxliffhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">4b1abda9cb8d57858aa32b36b9280c24175f2fcb</xliffext:olxliffhash>
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve" restype="x-metadata">
          <source>Security Concerns for Message Logging | Microsoft Docs</source>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>Security Concerns for Message Logging</source>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>This topic describes how you can protect sensitive data from being exposed in message logs, as well as events generated by message logging.</source>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>Security Concerns</source>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>Logging Sensitive Information</source>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>does not modify any data in application-specific headers and body.</source>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> also does not track personal information in application-specific headers or body data.</source>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>When message logging is enabled, personal information in application-specific headers, such as, a query string; and body information, such as, a credit card number, can become visible in the logs.</source>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>The application deployer is responsible for enforcing access control on the configuration and log files.</source>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>If you do not want this kind of information to be visible, you should disable logging, or filter out part of the data if you want to share the logs.</source>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>The following tips can help you to prevent the content of a log file from being exposed unintentionally:</source>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>Ensure that the log files are protected by Access Control Lists (ACL) both in Web-host and self-host scenarios.</source>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>Choose a file extension that cannot be easily served using a Web request.</source>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>For example, the .xml file extension is not a safe choice.</source>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>You can check the Internet Information Services (IIS) administration guide to see a list of extensions that can be served.</source>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>Specify an absolute path for the log file location, which should be outside of the Web host vroot public directory to prevent it from being accessed by an external party using a Web browser.</source>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>By default, keys and personally identifiable information (PII) such as username and password are not logged in traces and logged messages.</source>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>A machine administrator, however, can use the <ph id="ph1">`enableLoggingKnownPII`</ph> attribute in the <ph id="ph2">`machineSettings`</ph> element of the Machine.config file to permit applications running on the machine to log known personally identifiable information (PII).</source>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>The following configuration demonstrates how to do this:</source>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>An application deployer can then use the <ph id="ph1">`logKnownPii`</ph> attribute in either the App.config or Web.config file to enable PII logging as follows:</source>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>Only when both settings are <ph id="ph1">`true`</ph> is PII logging enabled.</source>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>The combination of two switches allows the flexibility to log known PII for each application.</source>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>In <ph id="ph1">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph> the <ph id="ph2">`logEntireMessage`</ph> and <ph id="ph3">`logKnownPii`</ph> flags must also be set to <ph id="ph4">`true`</ph> in the Web.config file or the App.config file to enable PII logging, as show in the following example <ph id="ph5">`&lt;system.serviceModel&gt;&lt;messageLogging logEntireMessage="true" logKnownPii="true" â€¦`</ph>.</source>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>You should be aware that if you specify two or more custom sources in a configuration file, only the attributes of the first source are read.</source>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>The others are ignored.</source>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>This means that, for the following App.config, file, PII is not logged for both sources even though PII logging is explicitly enabled for the second source.</source>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>If the <ph id="ph1">`&lt;machineSettings enableLoggingKnownPii="Boolean"/&gt;`</ph> element exists outside the Machine.config file, the system throws a <ph id="ph2">&lt;xref:System.Configuration.ConfigurationErrorsException&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source>The changes are effective only when the application starts or restarts.</source>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>An event is logged at startup when both attributes are set to <ph id="ph1">`true`</ph>.</source>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>An event is also logged if <ph id="ph1">`logKnownPii`</ph> is set to <ph id="ph2">`true`</ph> but <ph id="ph3">`enableLoggingKnownPii`</ph> is <ph id="ph4">`false`</ph>.</source>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>The machine administrator and application deployer should exercise extreme caution when using these two switches.</source>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>If PII logging is enabled, security keys and PII are logged.</source>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>If it is disabled, sensitive and application-specific data is still logged in message headers and bodies.</source>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>For a more thorough discussion about privacy and protecting PII from being exposed, see <bpt id="p1">[</bpt>User Privacy<ept id="p1">](http://go.microsoft.com/fwlink/?LinkID=94647)</ept>.</source>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>PII is not hidden in malformed messages.</source>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>Such messaged are logged as-is without any modification.</source>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>Attributes mentioned previously have no effect on this.</source>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>Custom Trace Listener</source>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>Adding a custom trace listener on the Message Logging trace source is a privilege that should be restricted to the administrator.</source>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>This is because malicious custom listeners can be configured to send messages remotely, which leads to sensitive information disclosure.</source>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>In addition, if you configure a custom listener to send messages on the wire, such as, to a remote database, you should enforce proper access control on the message logs in the remote machine.</source>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>Events Triggered by Message Logging</source>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>The following lists all the events emitted by message logging.</source>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>Message logging on: This event is emitted when message logging is enabled in configuration, or through WMI.</source>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>The content of the event is "Message logging has been turned on.</source>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>Sensitive information may be logged in clear text, even if they were encrypted on the wire, for example, message bodies."</source>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>Message logging off: This event is emitted when message logging is disabled through WMI.</source>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>The content of the event is "Message logging has been turned off."</source>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>Log Known PII On: This event is emitted when logging of known PII is enabled.</source>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>This happens when the <ph id="ph1">`enableLoggingKnownPii`</ph> attribute in the <ph id="ph2">`machineSettings`</ph> element of the Machine.config file is set to <ph id="ph3">`true`</ph>, and the <ph id="ph4">`logKnownPii`</ph> attribute of the <ph id="ph5">`source`</ph> element in either the App.config or Web.config file is set to <ph id="ph6">`true`</ph>.</source>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>Log Known PII Not Allowed: This event is emitted when logging of known PII is not allowed.</source>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>This happens when the <ph id="ph1">`logKnownPii`</ph> attribute of the <ph id="ph2">`source`</ph> element in either the App.config or Web.config file is set to <ph id="ph3">`true`</ph>, but the <ph id="ph4">`enableLoggingKnownPii`</ph> attribute in the <ph id="ph5">`machineSettings`</ph> element of the Machine.config file is set to <ph id="ph6">`false`</ph>.</source>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>No exception is thrown.</source>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>These events can be viewed in the Event Viewer tool that comes with Windows.</source>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>For more information on this, see <bpt id="p1">[</bpt>Event Logging<ept id="p1">](../../../../docs/framework/wcf/diagnostics/event-logging/index.md)</ept>.</source>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>See Also</source>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Message Logging<ept id="p1">](../../../../docs/framework/wcf/diagnostics/message-logging.md)</ept><ph id="ph1"> </ph></source>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Security Concerns and Useful Tips for Tracing<ept id="p1">](../../../../docs/framework/wcf/diagnostics/tracing/security-concerns-and-useful-tips-for-tracing.md)</ept></source>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>