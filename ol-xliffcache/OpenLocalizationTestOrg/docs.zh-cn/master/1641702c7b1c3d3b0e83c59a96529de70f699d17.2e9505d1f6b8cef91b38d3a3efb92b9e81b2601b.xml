{"content":"---\ntitle: \"High DPI support in Windows Forms\"\nms.date: \"05/16/2017\"\nhelpviewer_keywords:\n  - \"High DPI in Windows Forms\"\n  - \"Dynamic rescaling in Windows Forms\"\n  - \"Windows Forms layout\"\n  - \"Windows Forms dynamic resizing\"\nms.assetid: 075ea4c3-900c-4f8a-9dd2-13ea6804346b\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n\n# High DPI support in Windows Forms\n\nStarting with the .NET Framework 4.7, Windows Forms includes enhancements for common high DPI and dynamic DPI scenarios. These include:\n\n- Improvements in the scaling and layout of a number of Windows Forms controls, such as the <xref:System.Windows.Forms.MonthCalendar> control and the <xref:System.Windows.Forms.CheckedListBox> control.\n\n- Single-pass scaling.  In the .NET Framework 4.6 and earlier versions, scaling was performed through multiple passes, which caused some controls to be scaled more than was necessary.\n\n- Support for dynamic DPI scenarios in which the user changes the DPI or scale factor after a Windows Forms application has been launched.\n\nIn versions of the .NET Framework starting with the .NET Framework 4.7, enhanced high DPI support is an opt-in feature. You must configure your application to take advantage of it.\n\n## Configuring your Windows Forms app for high DPI support\n\nThe new Windows Forms features that support high DPI awareness are available only in applications that target the .NET Framework 4.7 and are running on Windows operating systems starting with the Windows 10 Creators Update.\n\nIn addition, to configure high DPI support in your Windows Forms application, you must do the following:\n\n- Declare compatibility with Windows 10.\n\n  To do this, add the following to your manifest file:\n\n  ```xml\n  <compatibility xmlns=\"urn:schemas-microsoft-com:compatibility.v1\">\n    <application>\n      <!-- Windows 10 compatibility -->\n      <supportedOS Id=\"{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}\" />\n    </application>\n  </compatibility>\n  ```\n\n- Enable per-monitor DPI awareness in the *app.config* file.\n\n  Windows Forms introduces a new [`<System.Windows.Forms.ApplicationConfigurationSection>`](../configure-apps/file-schema/winforms/index.md) element to support new features and customizations added starting with the .NET Framework 4.7. To take advantage of the new features that support high DPI, add the following to your application configuration file.\n\n  ```xml\n  <System.Windows.Forms.ApplicationConfigurationSection>\n    <add key=\"DpiAwareness\" value=\"PerMonitorV2\" />\n  </System.Windows.Forms.ApplicationConfigurationSection>\n  ```\n\n  > [!IMPORTANT]\n  > In previous versions of the .NET Framework, you used the manifest to add high DPI support. This approach is no longer recommended, since it overrides settings defined on the app.config file.\n\n- Call the static <xref:System.Windows.Forms.Application.EnableVisualStyles%2A> method.\n\n  This should be the first method call in your application entry point. For example:\n\n  ```csharp\n  static void Main()\n  {\n      Application.EnableVisualStyles();\n      Application.SetCompatibleTextRenderingDefault(false);\n      Application.Run(new Form2());\n  }\n  ```\n\n## Opting out of individual high DPI features\n\nSetting the `DpiAwareness` value to `PerMonitorV2` enables all high DPI awareness features supported by .NET Framework versions starting with the .NET Framework 4.7. Typically, this is adequate for most Windows Forms applications. However, you may want to opt out of one or more individual features. The most important reason for doing this is that your existing application code already handles that feature.  For example, if your application handles auto scaling, you might want to disable the auto-resizing feature as follows:\n\n```xml\n<System.Windows.Forms.ApplicationConfigurationSection>\n  <add key=\"DpiAwareness\" value=\"PerMonitorV2\" />\n  <add key=\"EnableWindowsFormsHighDpiAutoResizing\" value=\"false\" />\n</System.Windows.Forms.ApplicationConfigurationSection>\n```\n\nFor a list of individual keys and their values, see [Windows Forms Add Configuration Element](../configure-apps/file-schema/winforms/windows-forms-add-configuration-element.md).\n\n## New DPI change events\n\nStarting with the .NET Framework 4.7, three new events allow you to programmatically handle dynamic DPI changes:\n\n- <xref:System.Windows.Forms.Control.DpiChangedAfterParent>, which is fired when the DPI setting for a control is changed programmatically after a DPI change event for it's parent control or form has occurred.\n- <xref:System.Windows.Forms.Control.DpiChangedBeforeParent>, which is fired when the DPI setting for a control is changed programmatically before a DPI change event for its parent control or form has occurred.\n- <xref:System.Windows.Forms.Form.DpiChanged>, which is fired when the DPI setting changes on the display device where the form is currently displayed.\n\n## New helper methods and properties\n\nThe .NET Framework 4.7 also adds a number of new helper methods and properties that provide information about DPI scaling and allow you to perform DPI scaling. These include:\n\n- <xref:System.Windows.Forms.Control.LogicalToDeviceUnits%2A>, which converts a value from logical to device pixels.\n\n- <xref:System.Windows.Forms.Control.ScaleBitmapLogicalToDevice%2A>, which scales a bitmap image to the logical DPI for a device.\n\n- <xref:System.Windows.Forms.Control.DeviceDpi%2A>, which returns the DPI for the current device.\n\n## Versioning considerations\n\nIn addition to running on .NET Framework 4.7 and Windows 10 Creators Update, your application may also run in an environment in which it isn't compatible with high DPI improvements. In this case, you'll need to develop a fallback for your application. You can do this to perform [custom drawing](./controls/user-drawn-controls.md) to handle scaling.\n\nTo do this, you also need to determine the operating system on which your app is running. You can do that with code like the following:\n\n```csharp\n// Create a reference to the OS version of Windows 10 Creators Update.\nVersion OsMinVersion = new Version(10, 0, 15063, 0);\n\n// Access the platform/version of the current OS.\nConsole.WriteLine(Environment.OSVersion.Platform.ToString());\nConsole.WriteLine(Environment.OSVersion.VersionString);\n\n// Compare the current version to the minimum required version.\nConsole.WriteLine(Environment.OSVersion.Version.CompareTo(OsMinVersion));\n```\n\nNote that your application won't successfully detect Windows 10 if it wasn't listed as a supported operating system in the application manifest.\n\nYou can also check the version of the .NET Framework that the application was built against:\n\n```csharp\nConsole.WriteLine(AppDomain.CurrentDomain.SetupInformation.TargetFrameworkName);\n```\n\n## See also\n\n- [Windows Forms Add Configuration Element](../configure-apps/file-schema/winforms/windows-forms-add-configuration-element.md)\n- [Adjusting the Size and Scale of Windows Forms](adjusting-the-size-and-scale-of-windows-forms.md)\n","nodes":[{"pos":[4,315],"embed":true,"restype":"x-metadata","content":"title: \"High DPI support in Windows Forms\"\nms.date: \"05/16/2017\"\nhelpviewer_keywords:\n  - \"High DPI in Windows Forms\"\n  - \"Dynamic rescaling in Windows Forms\"\n  - \"Windows Forms layout\"\n  - \"Windows Forms dynamic resizing\"\nms.assetid: 075ea4c3-900c-4f8a-9dd2-13ea6804346b\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"High DPI support in Windows Forms","nodes":[{"pos":[0,33],"content":"High DPI support in Windows Forms","nodes":[{"content":"High DPI support in Windows Forms","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[323,356],"content":"High DPI support in Windows Forms","linkify":"High DPI support in Windows Forms","nodes":[{"content":"High DPI support in Windows Forms","pos":[0,33]}]},{"content":"Starting with the .NET Framework 4.7, Windows Forms includes enhancements for common high DPI and dynamic DPI scenarios.","pos":[358,478]},{"content":"These include:","pos":[479,493]},{"pos":[497,696],"content":"Improvements in the scaling and layout of a number of Windows Forms controls, such as the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.MonthCalendar&gt;</ph> control and the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.CheckedListBox&gt;</ph> control.","source":"Improvements in the scaling and layout of a number of Windows Forms controls, such as the <xref:System.Windows.Forms.MonthCalendar> control and the <xref:System.Windows.Forms.CheckedListBox> control."},{"content":"Single-pass scaling.","pos":[700,720]},{"content":"In the .NET Framework 4.6 and earlier versions, scaling was performed through multiple passes, which caused some controls to be scaled more than was necessary.","pos":[722,881]},{"content":"Support for dynamic DPI scenarios in which the user changes the DPI or scale factor after a Windows Forms application has been launched.","pos":[885,1021]},{"content":"In versions of the .NET Framework starting with the .NET Framework 4.7, enhanced high DPI support is an opt-in feature.","pos":[1023,1142]},{"content":"You must configure your application to take advantage of it.","pos":[1143,1203]},{"pos":[1208,1263],"content":"Configuring your Windows Forms app for high DPI support","linkify":"Configuring your Windows Forms app for high DPI support","nodes":[{"content":"Configuring your Windows Forms app for high DPI support","pos":[0,55]}]},{"content":"The new Windows Forms features that support high DPI awareness are available only in applications that target the .NET Framework 4.7 and are running on Windows operating systems starting with the Windows 10 Creators Update.","pos":[1265,1488]},{"content":"In addition, to configure high DPI support in your Windows Forms application, you must do the following:","pos":[1490,1594]},{"content":"Declare compatibility with Windows 10.","pos":[1598,1636]},{"content":"To do this, add the following to your manifest file:","pos":[1640,1692]},{"pos":[1943,2001],"content":"Enable per-monitor DPI awareness in the <bpt id=\"p1\">*</bpt>app.config<ept id=\"p1\">*</ept> file.","source":"Enable per-monitor DPI awareness in the *app.config* file."},{"content":"Windows Forms introduces a new <bpt id=\"p1\">[</bpt><ph id=\"ph1\">`&lt;System.Windows.Forms.ApplicationConfigurationSection&gt;`</ph><ept id=\"p1\">](../configure-apps/file-schema/winforms/index.md)</ept> element to support new features and customizations added starting with the .NET Framework 4.7.","pos":[2005,2238],"source":"Windows Forms introduces a new [`<System.Windows.Forms.ApplicationConfigurationSection>`](../configure-apps/file-schema/winforms/index.md) element to support new features and customizations added starting with the .NET Framework 4.7."},{"content":"To take advantage of the new features that support high DPI, add the following to your application configuration file.","pos":[2239,2357]},{"pos":[2546,2753],"content":"[!IMPORTANT]\nIn previous versions of the .NET Framework, you used the manifest to add high DPI support. This approach is no longer recommended, since it overrides settings defined on the app.config file.","leadings":["","  > "],"nodes":[{"content":"In previous versions of the .NET Framework, you used the manifest to add high DPI support. This approach is no longer recommended, since it overrides settings defined on the app.config file.","pos":[13,203],"nodes":[{"content":"In previous versions of the .NET Framework, you used the manifest to add high DPI support.","pos":[0,90]},{"content":"This approach is no longer recommended, since it overrides settings defined on the app.config file.","pos":[91,190]}]}]},{"pos":[2757,2842],"content":"Call the static <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Application.EnableVisualStyles%2A&gt;</ph> method.","source":"Call the static <xref:System.Windows.Forms.Application.EnableVisualStyles%2A> method."},{"content":"This should be the first method call in your application entry point.","pos":[2846,2915]},{"content":"For example:","pos":[2916,2928]},{"pos":[3117,3159],"content":"Opting out of individual high DPI features","linkify":"Opting out of individual high DPI features","nodes":[{"content":"Opting out of individual high DPI features","pos":[0,42]}]},{"content":"Setting the <ph id=\"ph1\">`DpiAwareness`</ph> value to <ph id=\"ph2\">`PerMonitorV2`</ph> enables all high DPI awareness features supported by .NET Framework versions starting with the .NET Framework 4.7.","pos":[3161,3326],"source":"Setting the `DpiAwareness` value to `PerMonitorV2` enables all high DPI awareness features supported by .NET Framework versions starting with the .NET Framework 4.7."},{"content":"Typically, this is adequate for most Windows Forms applications.","pos":[3327,3391]},{"content":"However, you may want to opt out of one or more individual features.","pos":[3392,3460]},{"content":"The most important reason for doing this is that your existing application code already handles that feature.","pos":[3461,3570]},{"content":"For example, if your application handles auto scaling, you might want to disable the auto-resizing feature as follows:","pos":[3572,3690]},{"pos":[3933,4110],"content":"For a list of individual keys and their values, see <bpt id=\"p1\">[</bpt>Windows Forms Add Configuration Element<ept id=\"p1\">](../configure-apps/file-schema/winforms/windows-forms-add-configuration-element.md)</ept>.","source":"For a list of individual keys and their values, see [Windows Forms Add Configuration Element](../configure-apps/file-schema/winforms/windows-forms-add-configuration-element.md)."},{"pos":[4115,4136],"content":"New DPI change events","linkify":"New DPI change events","nodes":[{"content":"New DPI change events","pos":[0,21]}]},{"content":"Starting with the .NET Framework 4.7, three new events allow you to programmatically handle dynamic DPI changes:","pos":[4138,4250]},{"pos":[4254,4461],"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.DpiChangedAfterParent&gt;</ph>, which is fired when the DPI setting for a control is changed programmatically after a DPI change event for it's parent control or form has occurred.","source":"<xref:System.Windows.Forms.Control.DpiChangedAfterParent>, which is fired when the DPI setting for a control is changed programmatically after a DPI change event for it's parent control or form has occurred."},{"pos":[4464,4672],"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.DpiChangedBeforeParent&gt;</ph>, which is fired when the DPI setting for a control is changed programmatically before a DPI change event for its parent control or form has occurred.","source":"<xref:System.Windows.Forms.Control.DpiChangedBeforeParent>, which is fired when the DPI setting for a control is changed programmatically before a DPI change event for its parent control or form has occurred."},{"pos":[4675,4824],"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.Form.DpiChanged&gt;</ph>, which is fired when the DPI setting changes on the display device where the form is currently displayed.","source":"<xref:System.Windows.Forms.Form.DpiChanged>, which is fired when the DPI setting changes on the display device where the form is currently displayed."},{"pos":[4829,4862],"content":"New helper methods and properties","linkify":"New helper methods and properties","nodes":[{"content":"New helper methods and properties","pos":[0,33]}]},{"content":"The .NET Framework 4.7 also adds a number of new helper methods and properties that provide information about DPI scaling and allow you to perform DPI scaling.","pos":[4864,5023]},{"content":"These include:","pos":[5024,5038]},{"pos":[5042,5156],"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.LogicalToDeviceUnits%2A&gt;</ph>, which converts a value from logical to device pixels.","source":"<xref:System.Windows.Forms.Control.LogicalToDeviceUnits%2A>, which converts a value from logical to device pixels."},{"pos":[5160,5287],"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.ScaleBitmapLogicalToDevice%2A&gt;</ph>, which scales a bitmap image to the logical DPI for a device.","source":"<xref:System.Windows.Forms.Control.ScaleBitmapLogicalToDevice%2A>, which scales a bitmap image to the logical DPI for a device."},{"pos":[5291,5386],"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Forms.Control.DeviceDpi%2A&gt;</ph>, which returns the DPI for the current device.","source":"<xref:System.Windows.Forms.Control.DeviceDpi%2A>, which returns the DPI for the current device."},{"pos":[5391,5416],"content":"Versioning considerations","linkify":"Versioning considerations","nodes":[{"content":"Versioning considerations","pos":[0,25]}]},{"content":"In addition to running on .NET Framework 4.7 and Windows 10 Creators Update, your application may also run in an environment in which it isn't compatible with high DPI improvements.","pos":[5418,5599]},{"content":"In this case, you'll need to develop a fallback for your application.","pos":[5600,5669]},{"content":"You can do this to perform <bpt id=\"p1\">[</bpt>custom drawing<ept id=\"p1\">](./controls/user-drawn-controls.md)</ept> to handle scaling.","pos":[5670,5767],"source":" You can do this to perform [custom drawing](./controls/user-drawn-controls.md) to handle scaling."},{"content":"To do this, you also need to determine the operating system on which your app is running.","pos":[5769,5858]},{"content":"You can do that with code like the following:","pos":[5859,5904]},{"content":"Note that your application won't successfully detect Windows 10 if it wasn't listed as a supported operating system in the application manifest.","pos":[6353,6497]},{"content":"You can also check the version of the .NET Framework that the application was built against:","pos":[6499,6591]},{"pos":[6692,6700],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6704,6828],"content":"<bpt id=\"p1\">[</bpt>Windows Forms Add Configuration Element<ept id=\"p1\">](../configure-apps/file-schema/winforms/windows-forms-add-configuration-element.md)</ept>","source":"[Windows Forms Add Configuration Element](../configure-apps/file-schema/winforms/windows-forms-add-configuration-element.md)"},{"pos":[6831,6928],"content":"<bpt id=\"p1\">[</bpt>Adjusting the Size and Scale of Windows Forms<ept id=\"p1\">](adjusting-the-size-and-scale-of-windows-forms.md)</ept>","source":"[Adjusting the Size and Scale of Windows Forms](adjusting-the-size-and-scale-of-windows-forms.md)"}]}