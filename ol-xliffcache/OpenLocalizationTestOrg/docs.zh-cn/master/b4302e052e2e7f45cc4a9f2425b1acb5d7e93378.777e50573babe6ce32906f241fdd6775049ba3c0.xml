{"content":"---\ntitle: \"Content-Based Correlation | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 8638b5d6-1d59-456d-8acd-179a5b39b260\ncaps.latest.revision: 7\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Content-Based Correlation\nThis sample demonstrates how the messaging activities (<xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.Receive>, <xref:System.ServiceModel.Activities.SendReply>, and <xref:System.ServiceModel.Activities.ReceiveReply>) can be used with multiple content-based correlations.and content-based correlation. In this scenario, a correlation is first initialized based on a purchase order ID, and then another correlation is created later based on the customer ID. This shows how a <xref:System.ServiceModel.Activities.Receive> activity can both follow an existing correlation and initialize a new correlation based on the same incoming message.  \n  \n## Demonstrates  \n Messaging activities and content-based correlation  \n  \n## Discussion  \n This sample shows how to use multiple content-based correlations.  In this scenario, a correlation is first initialized based on a purchase order ID, and then another correlation is created later based on the customer ID.  The correlations are cascaded using a <xref:System.ServiceModel.Activities.Receive> activity that both follows an existing correlation (PurchaseOrderId) and initializes a new correlation (CustomerId) based on the same incoming message.  To accomplish this, the <xref:System.ServiceModel.Activities.Receive> activity uses the <xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A>, <xref:System.ServiceModel.Activities.Receive.CorrelatesWith%2A> and <xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A> properties.  \n  \n## To use this sample  \n  \n1.  Open [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] with elevated permissions, by right-clicking the [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] icon and selecting **Run as administrator**.  \n  \n2.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CascadingCorrelation.sln solution file.  \n  \n3.  To build the solution, press CTRL+SHIFT+B.  \n  \n4.  To run the server, press F5.  \n  \n5.  Once the service is ready and listening for messages, in Solution Explorer, right-click the Client project and run it.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Services\\ContentBasedCorrelation`  \n  \n## See Also","nodes":[{"pos":[12,54],"content":"Content-Based Correlation | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Content-Based Correlation | Microsoft Docs","pos":[0,42]}]},{"pos":[319,344],"content":"Content-Based Correlation","linkify":"Content-Based Correlation","nodes":[{"content":"Content-Based Correlation","pos":[0,25]}]},{"content":"This sample demonstrates how the messaging activities (<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Send&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph>, and <ph id=\"ph4\">&lt;xref:System.ServiceModel.Activities.ReceiveReply&gt;</ph>) can be used with multiple content-based correlations.and content-based correlation.","pos":[345,679],"source":"This sample demonstrates how the messaging activities (<xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.Receive>, <xref:System.ServiceModel.Activities.SendReply>, and <xref:System.ServiceModel.Activities.ReceiveReply>) can be used with multiple content-based correlations.and content-based correlation."},{"content":"In this scenario, a correlation is first initialized based on a purchase order ID, and then another correlation is created later based on the customer ID.","pos":[680,834]},{"content":"This shows how a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity can both follow an existing correlation and initialize a new correlation based on the same incoming message.","pos":[835,1015],"source":" This shows how a <xref:System.ServiceModel.Activities.Receive> activity can both follow an existing correlation and initialize a new correlation based on the same incoming message."},{"pos":[1024,1036],"content":"Demonstrates","linkify":"Demonstrates","nodes":[{"content":"Demonstrates","pos":[0,12]}]},{"content":"Messaging activities and content-based correlation","pos":[1040,1090]},{"pos":[1099,1109],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"This sample shows how to use multiple content-based correlations.","pos":[1113,1178]},{"content":"In this scenario, a correlation is first initialized based on a purchase order ID, and then another correlation is created later based on the customer ID.","pos":[1180,1334]},{"content":"The correlations are cascaded using a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity that both follows an existing correlation (PurchaseOrderId) and initializes a new correlation (CustomerId) based on the same incoming message.","pos":[1336,1571],"source":"  The correlations are cascaded using a <xref:System.ServiceModel.Activities.Receive> activity that both follows an existing correlation (PurchaseOrderId) and initializes a new correlation (CustomerId) based on the same incoming message."},{"content":"To accomplish this, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity uses the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.Receive.CorrelatesWith%2A&gt;</ph> and <ph id=\"ph4\">&lt;xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A&gt;</ph> properties.","pos":[1573,1876],"source":"  To accomplish this, the <xref:System.ServiceModel.Activities.Receive> activity uses the <xref:System.ServiceModel.Activities.Receive.CorrelatesOn%2A>, <xref:System.ServiceModel.Activities.Receive.CorrelatesWith%2A> and <xref:System.ServiceModel.Activities.Receive.CorrelationInitializers%2A> properties."},{"pos":[1885,1903],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[1913,2119],"content":"Open <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> with elevated permissions, by right-clicking the <ph id=\"ph2\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> icon and selecting <bpt id=\"p1\">**</bpt>Run as administrator<ept id=\"p1\">**</ept>.","source":"Open [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] with elevated permissions, by right-clicking the [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] icon and selecting **Run as administrator**."},{"pos":[2129,2238],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the CascadingCorrelation.sln solution file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CascadingCorrelation.sln solution file."},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[2248,2290]},{"content":"To run the server, press F5.","pos":[2300,2328]},{"content":"Once the service is ready and listening for messages, in Solution Explorer, right-click the Client project and run it.","pos":[2338,2456]},{"pos":[2464,2596],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2650,2976],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[2977,3027]},{"pos":[3121,3129],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}