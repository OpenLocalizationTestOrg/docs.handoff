{"content":"---\ntitle: \"How to: Compare Claims\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"claims [WCF], comparing\"\n  - \"claims [WCF]\"\nms.assetid: 0c4ec84d-53df-408f-8953-9bc437f56c28\n---\n# How to: Compare Claims\nThe Identity Model infrastructure in Windows Communication Foundation (WCF) is used to perform authorization checking. As such, a common task is to compare claims in the authorization context to the claims required to perform the requested action or access the requested resource. This topic describes how to compare claims, including built-in and custom claim types. For more information about the Identity Model infrastructure, see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).  \n  \n Claim comparison involves comparing the three parts of a claim (type, right, and resource) against the same parts in another claim to see if they are equal. See the following example.  \n  \n [!code-csharp[c_CustomClaimComparison#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#9)]\n [!code-vb[c_CustomClaimComparison#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#9)]  \n  \n Both claims have a claim type of <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, a right of <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>, and a resource of the string \"someone\". As all three parts of the claim are equal, the claims themselves are equal.  \n  \n The built-in claim types are compared using the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method. Claim-specific comparison code is used where necessary. For example, given the following two user principal name (UPN) claims:  \n  \n [!code-csharp[c_CustomClaimComparison#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#4)]\n [!code-vb[c_CustomClaimComparison#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#4)]  \n  \n the comparison code in the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method returns `true`, assuming `example\\someone` identifies the same domain user as \"someone@example.com\".  \n  \n Custom claim types can also be compared using the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method. However, in cases where the type returned by the <xref:System.IdentityModel.Claims.Claim.Resource%2A> property of the claim is something other than a primitive type, the <xref:System.IdentityModel.Claims.Claim.Equals%2A> returns `true` only if the values returned by the `Resource` properties are equal according to the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method. In cases where this is not appropriate, the custom type returned by the `Resource` property should override the <xref:System.IdentityModel.Claims.Claim.Equals%2A> and <xref:System.Object.GetHashCode%2A> methods to perform whatever custom processing is necessary.  \n  \n### Comparing built-in claims  \n  \n1.  Given two instances of the <xref:System.IdentityModel.Claims.Claim> class, use the <xref:System.IdentityModel.Claims.Claim.Equals%2A> to make the comparison, as shown in the following code.  \n  \n     [!code-csharp[c_CustomClaimComparison#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#5)]\n     [!code-vb[c_CustomClaimComparison#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#5)]  \n  \n### Comparing custom claims with primitive resource types  \n  \n1.  For custom claims with primitive resource types, comparison can be performed as for built-in claims, as shown in the following code.  \n  \n     [!code-csharp[c_CustomClaimComparison#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#6)]\n     [!code-vb[c_CustomClaimComparison#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#6)]  \n  \n2.  For custom claims with structure or class based resource types, the resource type should override the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method.  \n  \n3.  First check whether the `obj` parameter is `null`, and if so, return `false`.  \n  \n     [!code-csharp[c_CustomClaimComparison#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#7)]\n     [!code-vb[c_CustomClaimComparison#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#7)]  \n  \n4.  Next call <xref:System.Object.ReferenceEquals%2A> and pass `this` and `obj` as parameters. If it returns `true`, then return `true`.  \n  \n     [!code-csharp[c_CustomClaimComparison#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#8)]\n     [!code-vb[c_CustomClaimComparison#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#8)]  \n  \n5.  Next attempt to assign `obj` to a local variable of the class type. If this fails, the reference is `null`. In such cases, return `false`.  \n  \n6.  Perform the custom comparison necessary to correctly compare the current claim to the provided claim.  \n  \n## Example  \n The following example shows a comparison of custom claims where the claim resource is a non-primitive type.  \n  \n [!code-csharp[c_CustomClaimComparison#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#0)]\n [!code-vb[c_CustomClaimComparison#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#0)]  \n  \n## See also\n\n- [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)\n- [How to: Create a Custom Claim](../../../../docs/framework/wcf/extending/how-to-create-a-custom-claim.md)\n","nodes":[{"pos":[4,211],"embed":true,"restype":"x-metadata","content":"title: \"How to: Compare Claims\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"claims [WCF], comparing\"\n  - \"claims [WCF]\"\nms.assetid: 0c4ec84d-53df-408f-8953-9bc437f56c28","nodes":[{"content":"How to: Compare Claims","nodes":[{"pos":[0,22],"content":"How to: Compare Claims","nodes":[{"content":"How to: Compare Claims","pos":[0,22]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[218,240],"content":"How to: Compare Claims","linkify":"How to: Compare Claims","nodes":[{"content":"How to: Compare Claims","pos":[0,22]}]},{"content":"The Identity Model infrastructure in Windows Communication Foundation (WCF) is used to perform authorization checking.","pos":[241,359]},{"content":"As such, a common task is to compare claims in the authorization context to the claims required to perform the requested action or access the requested resource.","pos":[360,521]},{"content":"This topic describes how to compare claims, including built-in and custom claim types.","pos":[522,608]},{"content":"For more information about the Identity Model infrastructure, see <bpt id=\"p1\">[</bpt>Managing Claims and Authorization with the Identity Model<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)</ept>.","pos":[609,844],"source":" For more information about the Identity Model infrastructure, see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)."},{"content":"Claim comparison involves comparing the three parts of a claim (type, right, and resource) against the same parts in another claim to see if they are equal.","pos":[851,1007]},{"content":"See the following example.","pos":[1008,1034]},{"content":"Both claims have a claim type of <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.ClaimTypes.Name%2A&gt;</ph>, a right of <ph id=\"ph2\">&lt;xref:System.IdentityModel.Claims.Rights.PossessProperty%2A&gt;</ph>, and a resource of the string \"someone\".","pos":[1334,1534],"source":"Both claims have a claim type of <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, a right of <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>, and a resource of the string \"someone\"."},{"content":"As all three parts of the claim are equal, the claims themselves are equal.","pos":[1535,1610]},{"content":"The built-in claim types are compared using the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> method.","pos":[1617,1723],"source":"The built-in claim types are compared using the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method."},{"content":"Claim-specific comparison code is used where necessary.","pos":[1724,1779]},{"content":"For example, given the following two user principal name (UPN) claims:","pos":[1780,1850]},{"pos":[2150,2335],"content":"the comparison code in the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> method returns <ph id=\"ph2\">`true`</ph>, assuming <ph id=\"ph3\">`example\\someone`</ph> identifies the same domain user as \"<ph id=\"ph4\">someone@example.com</ph>\".","source":"the comparison code in the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method returns `true`, assuming `example\\someone` identifies the same domain user as \"someone@example.com\"."},{"content":"Custom claim types can also be compared using the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> method.","pos":[2342,2450],"source":"Custom claim types can also be compared using the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method."},{"content":"However, in cases where the type returned by the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.Claim.Resource%2A&gt;</ph> property of the claim is something other than a primitive type, the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> returns <ph id=\"ph3\">`true`</ph> only if the values returned by the <ph id=\"ph4\">`Resource`</ph> properties are equal according to the <ph id=\"ph5\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> method.","pos":[2451,2829],"source":" However, in cases where the type returned by the <xref:System.IdentityModel.Claims.Claim.Resource%2A> property of the claim is something other than a primitive type, the <xref:System.IdentityModel.Claims.Claim.Equals%2A> returns `true` only if the values returned by the `Resource` properties are equal according to the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method."},{"content":"In cases where this is not appropriate, the custom type returned by the <ph id=\"ph1\">`Resource`</ph> property should override the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.Object.GetHashCode%2A&gt;</ph> methods to perform whatever custom processing is necessary.","pos":[2830,3092],"source":" In cases where this is not appropriate, the custom type returned by the `Resource` property should override the <xref:System.IdentityModel.Claims.Claim.Equals%2A> and <xref:System.Object.GetHashCode%2A> methods to perform whatever custom processing is necessary."},{"pos":[3102,3127],"content":"Comparing built-in claims","linkify":"Comparing built-in claims","nodes":[{"content":"Comparing built-in claims","pos":[0,25]}]},{"pos":[3137,3326],"content":"Given two instances of the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.Claim&gt;</ph> class, use the <ph id=\"ph2\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> to make the comparison, as shown in the following code.","source":"Given two instances of the <xref:System.IdentityModel.Claims.Claim> class, use the <xref:System.IdentityModel.Claims.Claim.Equals%2A> to make the comparison, as shown in the following code."},{"pos":[3337,3627],"content":"[!code-csharp[c_CustomClaimComparison#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#5)]\n [!code-vb[c_CustomClaimComparison#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#5)]","leadings":["","    "],"nodes":[]},{"pos":[3637,3690],"content":"Comparing custom claims with primitive resource types","linkify":"Comparing custom claims with primitive resource types","nodes":[{"content":"Comparing custom claims with primitive resource types","pos":[0,53]}]},{"content":"For custom claims with primitive resource types, comparison can be performed as for built-in claims, as shown in the following code.","pos":[3700,3832]},{"pos":[3843,4133],"content":"[!code-csharp[c_CustomClaimComparison#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#6)]\n [!code-vb[c_CustomClaimComparison#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#6)]","leadings":["","    "],"nodes":[]},{"pos":[4143,4303],"content":"For custom claims with structure or class based resource types, the resource type should override the <ph id=\"ph1\">&lt;xref:System.IdentityModel.Claims.Claim.Equals%2A&gt;</ph> method.","source":"For custom claims with structure or class based resource types, the resource type should override the <xref:System.IdentityModel.Claims.Claim.Equals%2A> method."},{"pos":[4313,4390],"content":"First check whether the <ph id=\"ph1\">`obj`</ph> parameter is <ph id=\"ph2\">`null`</ph>, and if so, return <ph id=\"ph3\">`false`</ph>.","source":"First check whether the `obj` parameter is `null`, and if so, return `false`."},{"pos":[4401,4691],"content":"[!code-csharp[c_CustomClaimComparison#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#7)]\n [!code-vb[c_CustomClaimComparison#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#7)]","leadings":["","    "],"nodes":[]},{"content":"Next call <ph id=\"ph1\">&lt;xref:System.Object.ReferenceEquals%2A&gt;</ph> and pass <ph id=\"ph2\">`this`</ph> and <ph id=\"ph3\">`obj`</ph> as parameters.","pos":[4701,4791],"source":"Next call <xref:System.Object.ReferenceEquals%2A> and pass `this` and `obj` as parameters."},{"content":"If it returns <ph id=\"ph1\">`true`</ph>, then return <ph id=\"ph2\">`true`</ph>.","pos":[4792,4833],"source":" If it returns `true`, then return `true`."},{"pos":[4844,5134],"content":"[!code-csharp[c_CustomClaimComparison#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customclaimcomparison/cs/c_customclaimcomparison.cs#8)]\n [!code-vb[c_CustomClaimComparison#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customclaimcomparison/vb/source.vb#8)]","leadings":["","    "],"nodes":[]},{"content":"Next attempt to assign <ph id=\"ph1\">`obj`</ph> to a local variable of the class type.","pos":[5144,5211],"source":"Next attempt to assign `obj` to a local variable of the class type."},{"content":"If this fails, the reference is <ph id=\"ph1\">`null`</ph>.","pos":[5212,5251],"source":" If this fails, the reference is `null`."},{"content":"In such cases, return <ph id=\"ph1\">`false`</ph>.","pos":[5252,5282],"source":" In such cases, return `false`."},{"content":"Perform the custom comparison necessary to correctly compare the current claim to the provided claim.","pos":[5292,5393]},{"pos":[5402,5409],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows a comparison of custom claims where the claim resource is a non-primitive type.","pos":[5413,5520]},{"pos":[5822,5830],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5834,6002],"content":"<bpt id=\"p1\">[</bpt>Managing Claims and Authorization with the Identity Model<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)</ept>","source":"[Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)"},{"pos":[6005,6110],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Custom Claim<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-create-a-custom-claim.md)</ept>","source":"[How to: Create a Custom Claim](../../../../docs/framework/wcf/extending/how-to-create-a-custom-claim.md)"}]}