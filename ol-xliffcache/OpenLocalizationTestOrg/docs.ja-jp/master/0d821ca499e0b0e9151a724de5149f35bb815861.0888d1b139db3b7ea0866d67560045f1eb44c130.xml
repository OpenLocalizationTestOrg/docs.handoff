{"content":"---\ntitle: \"How to: Set Headers in the Client Request (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"WCF Data Services, customizing requests\"\nms.assetid: 3d55168d-5901-4f48-8117-6c93da3ab5ae\n---\n# How to: Set Headers in the Client Request (WCF Data Services)\nWhen you use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library to access a data service that supports the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)], the client library automatically sets the required HTTP headers in request messages sent to the data service. However, the client library does not know to set message headers that are required in certain cases, such as when the data service requires claims-based authentication or cookies. For more information, see [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md#clientAuthentication). In these cases, you must manually set message headers in the request message before it is sent. The example in this topic shows how to handle the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event to add a new header to the request message before it is sent to the data service.  \n  \n The example in this topic uses the Northwind sample data service and autogenerated client data service classes. This service and the client data classes are created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md). You can also use the [Northwind sample data service](https://go.microsoft.com/fwlink/?LinkId=187426) that is published on the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Web site; this sample data service is read-only and attempting to save changes returns an error. The sample data services on the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Web site allow anonymous authentication.  \n  \n## Example  \n The following example registers a handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and then executes a query against the data service.  \n  \n> [!NOTE]\n>  When a data service requires you to manually set the message header for every request, consider registering the handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event by overriding the `OnContextCreated` partial method in the entity container that represents the data service, which in this case is `NorthwindEntities`.  \n  \n[!code-csharp[Astoria Northwind Client#RegisterHeadersQuery](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#registerheadersquery)]   \n[!code-vb[Astoria Northwind Client#RegisterHeadersQuery](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#registerheadersquery)]\n  \n## Example  \n The following method handles the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and adds an Authentication header to the request.  \n  \n [!code-csharp[Astoria Northwind Client#OnSendingRequest](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#onsendingrequest)]  \n [!code-vb[Astoria Northwind Client#OnSendingRequest](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#onsendingrequest)]  \n  \n## See also\n\n- [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md)\n- [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)\n","nodes":[{"pos":[4,247],"embed":true,"restype":"x-metadata","content":"title: \"How to: Set Headers in the Client Request (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"WCF Data Services, customizing requests\"\nms.assetid: 3d55168d-5901-4f48-8117-6c93da3ab5ae","nodes":[{"content":"How to: Set Headers in the Client Request (WCF Data Services)","nodes":[{"pos":[0,61],"content":"How to: Set Headers in the Client Request (WCF Data Services)","nodes":[{"content":"How to: Set Headers in the Client Request (WCF Data Services)","pos":[0,61]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[254,315],"content":"How to: Set Headers in the Client Request (WCF Data Services)","linkify":"How to: Set Headers in the Client Request (WCF Data Services)","nodes":[{"content":"How to: Set Headers in the Client Request (WCF Data Services)","pos":[0,61]}]},{"content":"When you use the <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> client library to access a data service that supports the <ph id=\"ph2\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph>, the client library automatically sets the required HTTP headers in request messages sent to the data service.","pos":[316,625],"source":"When you use the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library to access a data service that supports the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)], the client library automatically sets the required HTTP headers in request messages sent to the data service."},{"content":"However, the client library does not know to set message headers that are required in certain cases, such as when the data service requires claims-based authentication or cookies.","pos":[626,805]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Securing WCF Data Services<ept id=\"p1\">](../../../../docs/framework/data/wcf/securing-wcf-data-services.md#clientAuthentication)</ept>.","pos":[806,949],"source":" For more information, see [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md#clientAuthentication)."},{"content":"In these cases, you must manually set message headers in the request message before it is sent.","pos":[950,1045]},{"content":"The example in this topic shows how to handle the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SendingRequest&gt;</ph> event to add a new header to the request message before it is sent to the data service.","pos":[1046,1252],"source":" The example in this topic shows how to handle the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event to add a new header to the request message before it is sent to the data service."},{"content":"The example in this topic uses the Northwind sample data service and autogenerated client data service classes.","pos":[1259,1370]},{"content":"This service and the client data classes are created when you complete the <bpt id=\"p1\">[</bpt>WCF Data Services quickstart<ept id=\"p1\">](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)</ept>.","pos":[1371,1546],"source":" This service and the client data classes are created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)."},{"content":"You can also use the <bpt id=\"p1\">[</bpt>Northwind sample data service<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=187426)</ept> that is published on the <ph id=\"ph1\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> Web site; this sample data service is read-only and attempting to save changes returns an error.","pos":[1547,1835],"source":" You can also use the [Northwind sample data service](https://go.microsoft.com/fwlink/?LinkId=187426) that is published on the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Web site; this sample data service is read-only and attempting to save changes returns an error."},{"content":"The sample data services on the <ph id=\"ph1\">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</ph> Web site allow anonymous authentication.","pos":[1836,1974],"source":" The sample data services on the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Web site allow anonymous authentication."},{"pos":[1983,1990],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1994,2170],"content":"The following example registers a handler for the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SendingRequest&gt;</ph> event and then executes a query against the data service.","source":"The following example registers a handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and then executes a query against the data service."},{"pos":[2178,2544],"content":"[!NOTE]\n When a data service requires you to manually set the message header for every request, consider registering the handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event by overriding the `OnContextCreated` partial method in the entity container that represents the data service, which in this case is `NorthwindEntities`.","leadings":["","> "],"nodes":[{"content":"When a data service requires you to manually set the message header for every request, consider registering the handler for the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SendingRequest&gt;</ph> event by overriding the <ph id=\"ph2\">`OnContextCreated`</ph> partial method in the entity container that represents the data service, which in this case is <ph id=\"ph3\">`NorthwindEntities`</ph>.","pos":[9,364],"source":"When a data service requires you to manually set the message header for every request, consider registering the handler for the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event by overriding the `OnContextCreated` partial method in the entity container that represents the data service, which in this case is `NorthwindEntities`."}]},{"pos":[2910,2917],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[2921,3078],"content":"The following method handles the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext.SendingRequest&gt;</ph> event and adds an Authentication header to the request.","source":"The following method handles the <xref:System.Data.Services.Client.DataServiceContext.SendingRequest> event and adds an Authentication header to the request."},{"pos":[3431,3439],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3443,3538],"content":"<bpt id=\"p1\">[</bpt>Securing WCF Data Services<ept id=\"p1\">](../../../../docs/framework/data/wcf/securing-wcf-data-services.md)</ept>","source":"[Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md)"},{"pos":[3541,3648],"content":"<bpt id=\"p1\">[</bpt>WCF Data Services Client Library<ept id=\"p1\">](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)</ept>","source":"[WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)"}]}