{"content":"---\ntitle: \"Importing Schema to Generate Classes | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF, schema import and export\"\n  - \"XsdDataContractImporter class\"\nms.assetid: b9170583-8c34-43bd-97bb-6c0c8dddeee0\ncaps.latest.revision: 15\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Importing Schema to Generate Classes\nTo generate classes from schemas that are usable with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], use the <xref:System.Runtime.Serialization.XsdDataContractImporter> class. This topic describes the process and variations.  \n  \n## The Import Process  \n The schema import process starts with an <xref:System.Xml.Schema.XmlSchemaSet> and produces a <xref:System.CodeDom.CodeCompileUnit>.  \n  \n The `XmlSchemaSet` is a part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]’s Schema Object Model (SOM) that represents a set of XML Schema definition language (XSD) schema documents. To create an `XmlSchemaSet` object from a set of XSD documents, deserialize each document into an <xref:System.Xml.Schema.XmlSchema> object (using the <xref:System.Xml.Serialization.XmlSerializer>) and add these objects to a new `XmlSchemaSet`.  \n  \n The `CodeCompileUnit` is part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]’s Code Document Object Model (CodeDOM) that represents [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] code in an abstract way. To generate the actual code from a `CodeCompileUnit`, use a subclass of the <xref:System.CodeDom.Compiler.CodeDomProvider> class, such as the <xref:Microsoft.CSharp.CSharpCodeProvider> or <xref:Microsoft.VisualBasic.VBCodeProvider> class.  \n  \n#### To import a schema  \n  \n1.  Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractImporter>.  \n  \n2.  Optional. Pass a `CodeCompileUnit` in the constructor. The types generated during schema import are added to this `CodeCompileUnit` instance instead of starting with a blank `CodeCompileUnit`.  \n  \n3.  Optional. Call one of the <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> methods. The method determines whether the given schema is a valid data contract schema and can be imported. The `CanImport` method has the same overloads as `Import` (the next step).  \n  \n4.  Call one of the overloaded `Import` methods, for example, the <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29> method.  \n  \n     The simplest overload takes an `XmlSchemaSet` and imports all types, including anonymous types, found in that schema set. Other overloads allow you to specify the XSD type or a list of types to import (in the form of an <xref:System.Xml.XmlQualifiedName> or a collection of `XmlQualifiedName` objects). In this case, only the specified types are imported. An overload takes an <xref:System.Xml.Schema.XmlSchemaElement> that imports a particular element out of the `XmlSchemaSet`, as well as its associated type (whether it is anonymous or not). This overload returns an `XmlQualifiedName`, which represents the data contract name of the type generated for this element.  \n  \n     Multiple calls of the `Import` method result in multiple items being added to the same `CodeCompileUnit`. A type is not generated into the `CodeCompileUnit` if it already exists there. Call `Import` multiple times on the same `XsdDataContractImporter` instead of using multiple `XsdDataContractImporter` objects. This is the recommended way to avoid duplicate types being generated.  \n  \n    > [!NOTE]\n    >  If there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state. Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities.  \n  \n5.  Access the `CodeCompileUnit` through the <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> property.  \n  \n### Import Options: Customizing the Generated Types  \n You can set the <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to an instance of the <xref:System.Runtime.Serialization.ImportOptions> class to control various aspects of the import process. A number of options directly influence the types that are generated.  \n  \n#### Controlling the Access Level (GenerateInternal or the /internal switch)  \n This corresponds to the **/internal** switch on the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).  \n  \n Normally, public types are generated from schema, with private fields and matching public data member properties. To generate internal types instead, set the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property to `true`.  \n  \n The following example shows a schema transformed into an internal class when the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property is set to `true.`  \n  \n [!code-csharp[c_SchemaImportExport#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#2)]\n [!code-vb[c_SchemaImportExport#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#2)]  \n  \n#### Controlling Namespaces (Namespaces or the /namespace switch)  \n This corresponds to the **/namespace** switch on the `Svcutil.exe` tool.  \n  \n Normally, types generated from schema are generated into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] namespaces, with each XSD namespace corresponding to a particular [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] namespace according to a mapping described in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md). You can customize this mapping by the <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> property to a <xref:System.Collections.Generic.Dictionary%602>. If a given XSD namespace is found in the dictionary, the matching [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] namespace is also taken from your dictionary.  \n  \n For example, consider the following schema.  \n  \n [!code-xml[c_SchemaImportExport#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#10)]   \n  \n The following example uses the `Namespaces` property to map the \"http://schemas.contoso.com/carSchema\" namespace to \"Contoso.Cars\".  \n  \n [!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]\n [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]  \n  \n#### Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)  \n This corresponds to the **/serializable** switch on the `Svcutil.exe` tool.  \n  \n Sometimes it is important for the types generated from the schema to be usable with [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] runtime serialization engines (for example, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=fullName> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classes). This is useful when using types for [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting. To enable this, you must apply the <xref:System.SerializableAttribute> attribute to the generated types in addition to the regular <xref:System.Runtime.Serialization.DataContractAttribute> attribute. The attribute is generated automatically if the `GenerateSerializable` import option is set to `true`.  \n  \n The following example shows the `Vehicle` class generated with the `GenerateSerializable` import option set to `true`.  \n  \n [!code-csharp[c_SchemaImportExport#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#4)]\n [!code-vb[c_SchemaImportExport#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#4)]  \n  \n#### Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)  \n This corresponds to the **/enableDataBinding** switch on the Svcutil.exe tool.  \n  \n Sometimes, you may want to bind the types generated from the schema to graphical user interface components so that any update to instances of these types will automatically update the UI. The `XsdDataContractImporter` can generate types that implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface in such a way that any property change triggers an event. If you are generating types for use with a client UI programming environment that supports this interface (such as [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)]), set the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> property to `true` to enable this feature.  \n  \n The following example shows the `Vehicle` class generated with the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> set to `true`.  \n  \n [!code-csharp[C_SchemaImportExport#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#5)]\n [!code-vb[C_SchemaImportExport#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#5)]  \n  \n### Import Options: Choosing Collection Types  \n Two special patterns in XML represent collections of items: lists of items and associations between one item and another. The following is an example of a list of strings.  \n  \n [!code-xml[C_SchemaImportExport#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#11)]   \n  \n The following is an example of an association between a string and an integer (`city name` and `population`).  \n  \n [!code-xml[C_SchemaImportExport#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#12)]   \n  \n> [!NOTE]\n>  Any association could also be considered a list. For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field). Both patterns have a representation in the XSD Schema. There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is present in the schema. The annotation indicates that a given pattern represents an association. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).  \n  \n Normally, a list is imported as a collection data contract that derives from a Generic List or as a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] array, depending on whether or not the schema follows the standard naming pattern for collections. This is described in more detail in [Collection Types in Data Contracts](../../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md). Associations are normally imported as either a <xref:System.Collections.Generic.Dictionary%602> or a collection data contract that derives from the dictionary object. For example, consider the following schema.  \n  \n [!code-xml[c_SchemaImportExport#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#13)]   \n  \n This would be imported as follows (fields are shown instead of properties for readability).  \n  \n [!code-csharp[c_SchemaImportExport#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#6)]\n [!code-vb[c_SchemaImportExport#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#6)]  \n  \n It is possible to customize the collection types that are generated for such schema patterns. For example, you may want to generate collections deriving from the <xref:System.ComponentModel.BindingList%601> instead of the <xref:System.Collections.Generic.List%601> class in order to bind the type to a list box and have it be automatically updated when the contents of the collection change. To do this, set the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> class to a list of collection types to be used (hereafter known as the referenced types). When importing any collection, this list of referenced collection types is scanned and the best-matching collection is used if one is found. Associations are matched only against types that implement either the generic or the nongeneric <xref:System.Collections.IDictionary> interface, while lists are matched against any supported collection type.  \n  \n For example, if the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property is set to a <xref:System.ComponentModel.BindingList%601>, the `people` type in the preceding example is generated as follows.  \n  \n [!code-csharp[C_SchemaImportExport#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#7)]\n [!code-vb[C_SchemaImportExport#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#7)]  \n  \n A closed generic is considered the best match. For example, if the types `BindingList(Of Integer)` and <xref:System.Collections.ArrayList> are passed to the collection of referenced types, any lists of integers found in schema are imported as a `BindingList(Of Integer)`. Any other lists, for example, a `List(Of String)`, are imported as an `ArrayList`.  \n  \n If a type that implements the generic `IDictionary` interface is added to the collection of referenced types, its type parameters must either be fully open or fully closed.  \n  \n Duplicates are not allowed. For example, you cannot add both a `List(Of Integer)` and a `Collection(Of Integer)` to the referenced types. That would make it impossible to determine which should be used when a list of integers is found in schema. Duplicates will be detected only if there is a type in schema that exposes the duplicates problem. For example, if the imported schema does not contain lists of integers, it is allowed to have both the `List(Of Integer)` and the `Collection(Of Integer)` in the referenced types collection, but neither will have any effect.  \n  \n The referenced collection types mechanism works equally well for collections of complex types (including collections of other collections), and not just for collections of primitives.  \n  \n The `ReferencedCollectionTypes` property corresponds to the **/collectionType** switch on the SvcUtil.exe tool. Note that to reference multiple collection types, the **/collectionType** switch must be specified multiple times. If the type is not in the MsCorLib.dll, its assembly must also be referenced using the **/reference** switch.  \n  \n#### Import Options: Referencing Existing Types  \n Occasionally, types in schema correspond to existing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types, and there is no need to generate these types from scratch. (This section applies only to noncollection types. For collection types, see the preceding section.)  \n  \n For example, you may have a standard company-wide \"Person\" data contract type that you always want used when representing a person. Whenever some service makes use of this type, and its schema appears in the service metadata, you may want to reuse the existing `Person` type when importing this schema instead of generating a new one for every service.  \n  \n To do this, pass a list of [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types that you want to reuse into the collection the <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> property returns on the <xref:System.Runtime.Serialization.ImportOptions> class. If any of these types have a data contract name and namespace that matches the name and namespace of a schema type, a structural comparison is performed. If it is determined that the types have both matching names and matching structures, the existing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type is reused instead of generating a new one. If only the name matches but not the structure, an exception is thrown. Note that there is no allowance for versioning when referencing types (for example, adding new optional data members). The structures must match exactly.  \n  \n It is legal to add multiple types with the same data contract name and namespace to the referenced types collection, as long as no schema types are imported with that name and namespace. This allows you to easily add all the types in an assembly to the collection without worrying about duplicates for types that do not actually occur in schema.  \n  \n The `ReferencedTypes` property corresponds to the **/reference** switch in certain modes of operation of the Svcutil.exe tool.  \n  \n> [!NOTE]\n>  When using the Svcutil.exe or (in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]) the **Add Service Reference** tools, all of the types in MsCorLib.dll are automatically referenced.  \n  \n#### Import Options: Importing Non-DataContract Schema as IXmlSerializable types  \n The <xref:System.Runtime.Serialization.XsdDataContractImporter> supports a limited subset of the schema. If unsupported schema constructs are present (for example, XML attributes), the import attempt fails with an exception. However, setting the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property to `true` extends the range of schema supported. When set to `true`, the <xref:System.Runtime.Serialization.XsdDataContractImporter> generates types that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface. This enables direct access to the XML representation of these types.  \n  \n##### Design Considerations  \n  \n-   It may be difficult to work with the weakly typed XML representation directly. Consider using an alternative serialization engine, such as the <xref:System.Xml.Serialization.XmlSerializer>, to work with schema not compatible with data contracts in a strongly typed way. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Using the XmlSerializer Class](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md).  \n  \n-   Some schema constructs cannot be imported by the <xref:System.Runtime.Serialization.XsdDataContractImporter> even when the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property is set to `true`. Again, consider using the <xref:System.Xml.Serialization.XmlSerializer> for such cases.  \n  \n-   The exact schema constructs that are supported both when <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> is `true` or `false` are described in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).  \n  \n-   Schema for generated <xref:System.Xml.Serialization.IXmlSerializable> types do not retain fidelity when imported and exported. That is, exporting the schema from the generated types and importing as classes does not return the original schema.  \n  \n It is possible to combine the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option with the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> option previously described. For types that have to be generated as <xref:System.Xml.Serialization.IXmlSerializable> implementations, the structural check is skipped when using the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> feature.  \n  \n The <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option corresponds to the **/importXmlTypes** switch on the Svcutil.exe tool.  \n  \n##### Working with Generated IXmlSerializable Types  \n The generated `IXmlSerializable` types contain a private field, named \"nodesField,\" that returns an array of <xref:System.Xml.XmlNode> objects. When deserializing an instance of such a type, you can access the XML data directly through this field by using the XML Document Object Model. When serializing an instance of this type, you can set this field to the desired XML data and it will be serialized.  \n  \n This is accomplished through the `IXmlSerializable` implementation. In the generated `IXmlSerializable` type, the <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> implementation calls the <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> method of the <xref:System.Runtime.Serialization.XmlSerializableServices> class. The method is a helper method that converts XML provided through an <xref:System.Xml.XmlReader> to an array of <xref:System.Xml.XmlNode> objects. The <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> implementation does the opposite and converts the array of `XmlNode` objects to a sequence of <xref:System.Xml.XmlWriter> calls. This is accomplished using the <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A> method.  \n  \n It is possible to run the schema export process on the generated `IXmlSerializable` classes. As previously stated, you will not get the original schema back. Instead, you will get the \"anyType\" standard XSD type, which is a wildcard for any XSD type.  \n  \n This is accomplished by applying the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attribute to the generated `IXmlSerializable` classes and specifying a method that calls the <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> method to generate the \"anyType\" type.  \n  \n> [!NOTE]\n>  The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature. It is not recommended for use for any other purpose.  \n  \n#### Import Options: Advanced Options  \n The following are advanced import options:  \n  \n-   <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> property. Specify the <xref:System.CodeDom.Compiler.CodeDomProvider> to use to generate the code for the generated classes. The import mechanism attempts to avoid features that the <xref:System.CodeDom.Compiler.CodeDomProvider> does not support. For example, the J# language does not support generics. If you specify the J# code provider in this property, no generic types is generated in the importer’s <xref:System.CodeDom.CodeCompileUnit>. If the <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> is not set, the full set of [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] features is used with no restrictions.  \n  \n-   <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property. An <xref:System.Runtime.Serialization.IDataContractSurrogate> implementation can be specified with this property. The <xref:System.Runtime.Serialization.IDataContractSurrogate> customizes the import process. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md). By default, no surrogate is used.  \n  \n## See Also  \n <xref:System.Runtime.Serialization.DataContractSerializer>   \n <xref:System.Runtime.Serialization.XsdDataContractImporter>   \n <xref:System.Runtime.Serialization.XsdDataContractExporter>   \n <xref:System.Runtime.Serialization.ImportOptions>   \n [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)   \n [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)   \n [Schema Import and Export](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md)   \n [Exporting Schemas from Classes](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md)   \n [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)","nodes":[{"pos":[4,451],"nodes":[{"content":"Importing Schema to Generate Classes | Microsoft Docs","nodes":[{"pos":[0,53],"content":"Importing Schema to Generate Classes | Microsoft Docs","nodes":[{"content":"Importing Schema to Generate Classes | Microsoft Docs","pos":[0,53]}]}],"pos":[6,62],"yaml":true}],"content":"title: \"Importing Schema to Generate Classes | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"WCF, schema import and export\"\n  - \"XsdDataContractImporter class\"\nms.assetid: b9170583-8c34-43bd-97bb-6c0c8dddeee0\ncaps.latest.revision: 15\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[458,494],"content":"Importing Schema to Generate Classes","linkify":"Importing Schema to Generate Classes","nodes":[{"content":"Importing Schema to Generate Classes","pos":[0,36]}]},{"content":"To generate classes from schemas that are usable with <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph>, use the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph> class.","pos":[495,680],"source":"To generate classes from schemas that are usable with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], use the <xref:System.Runtime.Serialization.XsdDataContractImporter> class."},{"content":"This topic describes the process and variations.","pos":[681,729]},{"pos":[738,756],"content":"The Import Process","linkify":"The Import Process","nodes":[{"content":"The Import Process","pos":[0,18]}]},{"content":"The schema import process starts with an <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> and produces a <ph id=\"ph2\">&lt;xref:System.CodeDom.CodeCompileUnit&gt;</ph>.","pos":[760,892],"source":"The schema import process starts with an <xref:System.Xml.Schema.XmlSchemaSet> and produces a <xref:System.CodeDom.CodeCompileUnit>."},{"content":"The <ph id=\"ph1\">`XmlSchemaSet`</ph> is a part of the <ph id=\"ph2\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph>’s Schema Object Model (SOM) that represents a set of XML Schema definition language (XSD) schema documents.","pos":[899,1106],"source":"The `XmlSchemaSet` is a part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]’s Schema Object Model (SOM) that represents a set of XML Schema definition language (XSD) schema documents."},{"content":"To create an <ph id=\"ph1\">`XmlSchemaSet`</ph> object from a set of XSD documents, deserialize each document into an <ph id=\"ph2\">&lt;xref:System.Xml.Schema.XmlSchema&gt;</ph> object (using the <ph id=\"ph3\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph>) and add these objects to a new <ph id=\"ph4\">`XmlSchemaSet`</ph>.","pos":[1107,1351],"source":" To create an `XmlSchemaSet` object from a set of XSD documents, deserialize each document into an <xref:System.Xml.Schema.XmlSchema> object (using the <xref:System.Xml.Serialization.XmlSerializer>) and add these objects to a new `XmlSchemaSet`."},{"content":"The <ph id=\"ph1\">`CodeCompileUnit`</ph> is part of the <ph id=\"ph2\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph>’s Code Document Object Model (CodeDOM) that represents <ph id=\"ph3\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> code in an abstract way.","pos":[1358,1602],"source":"The `CodeCompileUnit` is part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]’s Code Document Object Model (CodeDOM) that represents [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] code in an abstract way."},{"content":"To generate the actual code from a <ph id=\"ph1\">`CodeCompileUnit`</ph>, use a subclass of the <ph id=\"ph2\">&lt;xref:System.CodeDom.Compiler.CodeDomProvider&gt;</ph> class, such as the <ph id=\"ph3\">&lt;xref:Microsoft.CSharp.CSharpCodeProvider&gt;</ph> or <ph id=\"ph4\">&lt;xref:Microsoft.VisualBasic.VBCodeProvider&gt;</ph> class.","pos":[1603,1841],"source":" To generate the actual code from a `CodeCompileUnit`, use a subclass of the <xref:System.CodeDom.Compiler.CodeDomProvider> class, such as the <xref:Microsoft.CSharp.CSharpCodeProvider> or <xref:Microsoft.VisualBasic.VBCodeProvider> class."},{"pos":[1852,1870],"content":"To import a schema","linkify":"To import a schema","nodes":[{"content":"To import a schema","pos":[0,18]}]},{"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph>.","pos":[1880,1966],"source":"Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractImporter>."},{"content":"Optional.","pos":[1976,1985]},{"content":"Pass a <ph id=\"ph1\">`CodeCompileUnit`</ph> in the constructor.","pos":[1986,2030],"source":" Pass a `CodeCompileUnit` in the constructor."},{"content":"The types generated during schema import are added to this <ph id=\"ph1\">`CodeCompileUnit`</ph> instance instead of starting with a blank <ph id=\"ph2\">`CodeCompileUnit`</ph>.","pos":[2031,2168],"source":" The types generated during schema import are added to this `CodeCompileUnit` instance instead of starting with a blank `CodeCompileUnit`."},{"content":"Optional.","pos":[2178,2187]},{"content":"Call one of the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A&gt;</ph> methods.","pos":[2188,2285],"source":" Call one of the <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> methods."},{"content":"The method determines whether the given schema is a valid data contract schema and can be imported.","pos":[2286,2385]},{"content":"The <ph id=\"ph1\">`CanImport`</ph> method has the same overloads as <ph id=\"ph2\">`Import`</ph> (the next step).","pos":[2386,2460],"source":" The `CanImport` method has the same overloads as `Import` (the next step)."},{"pos":[2470,2642],"content":"Call one of the overloaded <ph id=\"ph1\">`Import`</ph> methods, for example, the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29&gt;</ph> method.","source":"Call one of the overloaded `Import` methods, for example, the <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29> method."},{"content":"The simplest overload takes an <ph id=\"ph1\">`XmlSchemaSet`</ph> and imports all types, including anonymous types, found in that schema set.","pos":[2653,2774],"source":"The simplest overload takes an `XmlSchemaSet` and imports all types, including anonymous types, found in that schema set."},{"content":"Other overloads allow you to specify the XSD type or a list of types to import (in the form of an <ph id=\"ph1\">&lt;xref:System.Xml.XmlQualifiedName&gt;</ph> or a collection of <ph id=\"ph2\">`XmlQualifiedName`</ph> objects).","pos":[2775,2955],"source":" Other overloads allow you to specify the XSD type or a list of types to import (in the form of an <xref:System.Xml.XmlQualifiedName> or a collection of `XmlQualifiedName` objects)."},{"content":"In this case, only the specified types are imported.","pos":[2956,3008]},{"content":"An overload takes an <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaElement&gt;</ph> that imports a particular element out of the <ph id=\"ph2\">`XmlSchemaSet`</ph>, as well as its associated type (whether it is anonymous or not).","pos":[3009,3197],"source":" An overload takes an <xref:System.Xml.Schema.XmlSchemaElement> that imports a particular element out of the `XmlSchemaSet`, as well as its associated type (whether it is anonymous or not)."},{"content":"This overload returns an <ph id=\"ph1\">`XmlQualifiedName`</ph>, which represents the data contract name of the type generated for this element.","pos":[3198,3322],"source":" This overload returns an `XmlQualifiedName`, which represents the data contract name of the type generated for this element."},{"content":"Multiple calls of the <ph id=\"ph1\">`Import`</ph> method result in multiple items being added to the same <ph id=\"ph2\">`CodeCompileUnit`</ph>.","pos":[3333,3438],"source":"Multiple calls of the `Import` method result in multiple items being added to the same `CodeCompileUnit`."},{"content":"A type is not generated into the <ph id=\"ph1\">`CodeCompileUnit`</ph> if it already exists there.","pos":[3439,3517],"source":" A type is not generated into the `CodeCompileUnit` if it already exists there."},{"content":"Call <ph id=\"ph1\">`Import`</ph> multiple times on the same <ph id=\"ph2\">`XsdDataContractImporter`</ph> instead of using multiple <ph id=\"ph3\">`XsdDataContractImporter`</ph> objects.","pos":[3518,3645],"source":" Call `Import` multiple times on the same `XsdDataContractImporter` instead of using multiple `XsdDataContractImporter` objects."},{"content":"This is the recommended way to avoid duplicate types being generated.","pos":[3646,3715]},{"pos":[3727,3938],"content":"[!NOTE]\nIf there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state. Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities.","leadings":["","    >  "],"nodes":[{"content":"If there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state. Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities.","pos":[8,204],"nodes":[{"content":"If there is a failure during import, the <ph id=\"ph1\">`CodeCompileUnit`</ph> will be in an unpredictable state.","pos":[0,93],"source":"If there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state."},{"content":"Using a <ph id=\"ph1\">`CodeCompileUnit`</ph> resulting from a failed import could expose you to security vulnerabilities.","pos":[94,196],"source":" Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities."}]}]},{"pos":[3948,4077],"content":"Access the <ph id=\"ph1\">`CodeCompileUnit`</ph> through the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A&gt;</ph> property.","source":"Access the `CodeCompileUnit` through the <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> property."},{"pos":[4087,4134],"content":"Import Options: Customizing the Generated Types","linkify":"Import Options: Customizing the Generated Types","nodes":[{"content":"Import Options: Customizing the Generated Types","pos":[0,47]}]},{"content":"You can set the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph> to an instance of the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.ImportOptions&gt;</ph> class to control various aspects of the import process.","pos":[4138,4428],"source":"You can set the <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to an instance of the <xref:System.Runtime.Serialization.ImportOptions> class to control various aspects of the import process."},{"content":"A number of options directly influence the types that are generated.","pos":[4429,4497]},{"pos":[4508,4579],"content":"Controlling the Access Level (GenerateInternal or the /internal switch)","linkify":"Controlling the Access Level (GenerateInternal or the /internal switch)","nodes":[{"content":"Controlling the Access Level (GenerateInternal or the /internal switch)","pos":[0,71]}]},{"pos":[4583,4768],"content":"This corresponds to the <bpt id=\"p1\">**</bpt>/internal<ept id=\"p1\">**</ept> switch on the <bpt id=\"p2\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p2\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept>.","source":"This corresponds to the **/internal** switch on the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)."},{"content":"Normally, public types are generated from schema, with private fields and matching public data member properties.","pos":[4775,4888]},{"content":"To generate internal types instead, set the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A&gt;</ph> property to <ph id=\"ph2\">`true`</ph>.","pos":[4889,5022],"source":" To generate internal types instead, set the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property to `true`."},{"pos":[5029,5206],"content":"The following example shows a schema transformed into an internal class when the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A&gt;</ph> property is set to <ph id=\"ph2\">`true.`</ph>","source":"The following example shows a schema transformed into an internal class when the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property is set to `true.`"},{"pos":[5213,5470],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_SchemaImportExport#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#2)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_SchemaImportExport#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#2)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_SchemaImportExport#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#2)]\n [!code-vb[c_SchemaImportExport#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#2)]"},{"pos":[5481,5541],"content":"Controlling Namespaces (Namespaces or the /namespace switch)","linkify":"Controlling Namespaces (Namespaces or the /namespace switch)","nodes":[{"content":"Controlling Namespaces (Namespaces or the /namespace switch)","pos":[0,60]}]},{"pos":[5545,5617],"content":"This corresponds to the <bpt id=\"p1\">**</bpt>/namespace<ept id=\"p1\">**</ept> switch on the <ph id=\"ph1\">`Svcutil.exe`</ph> tool.","source":"This corresponds to the **/namespace** switch on the `Svcutil.exe` tool."},{"content":"Normally, types generated from schema are generated into <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> namespaces, with each XSD namespace corresponding to a particular <ph id=\"ph2\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> namespace according to a mapping described in <bpt id=\"p1\">[</bpt>Data Contract Schema Reference<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)</ept>.","pos":[5624,6036],"source":"Normally, types generated from schema are generated into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] namespaces, with each XSD namespace corresponding to a particular [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] namespace according to a mapping described in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)."},{"content":"You can customize this mapping by the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A&gt;</ph> property to a <ph id=\"ph2\">&lt;xref:System.Collections.Generic.Dictionary%602&gt;</ph>.","pos":[6037,6202],"source":" You can customize this mapping by the <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> property to a <xref:System.Collections.Generic.Dictionary%602>."},{"content":"If a given XSD namespace is found in the dictionary, the matching <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> namespace is also taken from your dictionary.","pos":[6203,6378],"source":" If a given XSD namespace is found in the dictionary, the matching [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] namespace is also taken from your dictionary."},{"content":"For example, consider the following schema.","pos":[6385,6428]},{"pos":[6435,6569],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>c_SchemaImportExport#10<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#10)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[c_SchemaImportExport#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#10)]"},{"pos":[6577,6708],"content":"The following example uses the <ph id=\"ph1\">`Namespaces`</ph> property to map the \"http://schemas.contoso.com/carSchema\" namespace to \"Contoso.Cars\".","source":"The following example uses the `Namespaces` property to map the \"http://schemas.contoso.com/carSchema\" namespace to \"Contoso.Cars\"."},{"pos":[6715,6972],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_SchemaImportExport#8<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_SchemaImportExport#8<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]\n [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]"},{"pos":[6983,7066],"content":"Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)","linkify":"Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)","nodes":[{"content":"Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)","pos":[0,83]}]},{"pos":[7070,7145],"content":"This corresponds to the <bpt id=\"p1\">**</bpt>/serializable<ept id=\"p1\">**</ept> switch on the <ph id=\"ph1\">`Svcutil.exe`</ph> tool.","source":"This corresponds to the **/serializable** switch on the `Svcutil.exe` tool."},{"content":"Sometimes it is important for the types generated from the schema to be usable with <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> runtime serialization engines (for example, the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=fullName&gt;</ph> and the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter&gt;</ph> classes).","pos":[7152,7526],"source":"Sometimes it is important for the types generated from the schema to be usable with [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] runtime serialization engines (for example, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=fullName> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classes)."},{"content":"This is useful when using types for <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> remoting.","pos":[7527,7636],"source":" This is useful when using types for [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting."},{"content":"To enable this, you must apply the <ph id=\"ph1\">&lt;xref:System.SerializableAttribute&gt;</ph> attribute to the generated types in addition to the regular <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> attribute.","pos":[7637,7836],"source":" To enable this, you must apply the <xref:System.SerializableAttribute> attribute to the generated types in addition to the regular <xref:System.Runtime.Serialization.DataContractAttribute> attribute."},{"content":"The attribute is generated automatically if the <ph id=\"ph1\">`GenerateSerializable`</ph> import option is set to <ph id=\"ph2\">`true`</ph>.","pos":[7837,7939],"source":" The attribute is generated automatically if the `GenerateSerializable` import option is set to `true`."},{"pos":[7946,8064],"content":"The following example shows the <ph id=\"ph1\">`Vehicle`</ph> class generated with the <ph id=\"ph2\">`GenerateSerializable`</ph> import option set to <ph id=\"ph3\">`true`</ph>.","source":"The following example shows the `Vehicle` class generated with the `GenerateSerializable` import option set to `true`."},{"pos":[8071,8328],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_SchemaImportExport#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#4)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_SchemaImportExport#4<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#4)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_SchemaImportExport#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#4)]\n [!code-vb[c_SchemaImportExport#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#4)]"},{"pos":[8339,8419],"content":"Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)","linkify":"Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)","nodes":[{"content":"Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)","pos":[0,80]}]},{"pos":[8423,8501],"content":"This corresponds to the <bpt id=\"p1\">**</bpt>/enableDataBinding<ept id=\"p1\">**</ept> switch on the Svcutil.exe tool.","source":"This corresponds to the **/enableDataBinding** switch on the Svcutil.exe tool."},{"content":"Sometimes, you may want to bind the types generated from the schema to graphical user interface components so that any update to instances of these types will automatically update the UI.","pos":[8508,8695]},{"content":"The <ph id=\"ph1\">`XsdDataContractImporter`</ph> can generate types that implement the <ph id=\"ph2\">&lt;xref:System.ComponentModel.INotifyPropertyChanged&gt;</ph> interface in such a way that any property change triggers an event.","pos":[8696,8883],"source":" The `XsdDataContractImporter` can generate types that implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface in such a way that any property change triggers an event."},{"content":"If you are generating types for use with a client UI programming environment that supports this interface (such as <ph id=\"ph1\">[!INCLUDE[avalon1](../../../../includes/avalon1-md.md)]</ph>), set the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A&gt;</ph> property to <ph id=\"ph3\">`true`</ph> to enable this feature.","pos":[8884,9178],"source":" If you are generating types for use with a client UI programming environment that supports this interface (such as [!INCLUDE[avalon1](../../../../includes/avalon1-md.md)]), set the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> property to `true` to enable this feature."},{"pos":[9185,9337],"content":"The following example shows the <ph id=\"ph1\">`Vehicle`</ph> class generated with the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A&gt;</ph> set to <ph id=\"ph3\">`true`</ph>.","source":"The following example shows the `Vehicle` class generated with the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> set to `true`."},{"pos":[9344,9601],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_SchemaImportExport#5<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#5)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_SchemaImportExport#5<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#5)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_SchemaImportExport#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#5)]\n [!code-vb[C_SchemaImportExport#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#5)]"},{"pos":[9611,9652],"content":"Import Options: Choosing Collection Types","linkify":"Import Options: Choosing Collection Types","nodes":[{"content":"Import Options: Choosing Collection Types","pos":[0,41]}]},{"content":"Two special patterns in XML represent collections of items: lists of items and associations between one item and another.","pos":[9656,9777]},{"content":"The following is an example of a list of strings.","pos":[9778,9827]},{"pos":[9834,9968],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>C_SchemaImportExport#11<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#11)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[C_SchemaImportExport#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#11)]"},{"pos":[9976,10085],"content":"The following is an example of an association between a string and an integer (<ph id=\"ph1\">`city name`</ph> and <ph id=\"ph2\">`population`</ph>).","source":"The following is an example of an association between a string and an integer (`city name` and `population`)."},{"pos":[10092,10226],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>C_SchemaImportExport#12<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#12)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[C_SchemaImportExport#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#12)]"},{"pos":[10235,10990],"content":"[!NOTE]\n Any association could also be considered a list. For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field). Both patterns have a representation in the XSD Schema. There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is present in the schema. The annotation indicates that a given pattern represents an association. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).","leadings":["","> "],"nodes":[{"content":"Any association could also be considered a list. For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field). Both patterns have a representation in the XSD Schema. There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is present in the schema. The annotation indicates that a given pattern represents an association. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md).","pos":[9,753],"nodes":[{"content":"Any association could also be considered a list.","pos":[0,48]},{"content":"For example, you can view the preceding association as a list of complex <ph id=\"ph1\">`city`</ph> objects that happen to have two fields (a string field and an integer field).","pos":[49,206],"source":" For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field)."},{"content":"Both patterns have a representation in the XSD Schema.","pos":[207,261]},{"content":"There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> is present in the schema.","pos":[262,496],"source":" There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is present in the schema."},{"content":"The annotation indicates that a given pattern represents an association.","pos":[497,569]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Data Contract Schema Reference<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)</ept>.","pos":[570,744],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)."}]}]},{"content":"Normally, a list is imported as a collection data contract that derives from a Generic List or as a <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> array, depending on whether or not the schema follows the standard naming pattern for collections.","pos":[10997,11259],"source":"Normally, a list is imported as a collection data contract that derives from a Generic List or as a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] array, depending on whether or not the schema follows the standard naming pattern for collections."},{"content":"This is described in more detail in <bpt id=\"p1\">[</bpt>Collection Types in Data Contracts<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md)</ept>.","pos":[11260,11419],"source":" This is described in more detail in [Collection Types in Data Contracts](../../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md)."},{"content":"Associations are normally imported as either a <ph id=\"ph1\">&lt;xref:System.Collections.Generic.Dictionary%602&gt;</ph> or a collection data contract that derives from the dictionary object.","pos":[11420,11586],"source":" Associations are normally imported as either a <xref:System.Collections.Generic.Dictionary%602> or a collection data contract that derives from the dictionary object."},{"content":"For example, consider the following schema.","pos":[11587,11630]},{"pos":[11637,11771],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>c_SchemaImportExport#13<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#13)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[c_SchemaImportExport#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#13)]"},{"content":"This would be imported as follows (fields are shown instead of properties for readability).","pos":[11779,11870]},{"pos":[11877,12134],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_SchemaImportExport#6<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#6)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>c_SchemaImportExport#6<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#6)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[c_SchemaImportExport#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#6)]\n [!code-vb[c_SchemaImportExport#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#6)]"},{"content":"It is possible to customize the collection types that are generated for such schema patterns.","pos":[12141,12234]},{"content":"For example, you may want to generate collections deriving from the <ph id=\"ph1\">&lt;xref:System.ComponentModel.BindingList%601&gt;</ph> instead of the <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> class in order to bind the type to a list box and have it be automatically updated when the contents of the collection change.","pos":[12235,12532],"source":" For example, you may want to generate collections deriving from the <xref:System.ComponentModel.BindingList%601> instead of the <xref:System.Collections.Generic.List%601> class in order to bind the type to a list box and have it be automatically updated when the contents of the collection change."},{"content":"To do this, set the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.ImportOptions&gt;</ph> class to a list of collection types to be used (hereafter known as the referenced types).","pos":[12533,12787],"source":" To do this, set the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> class to a list of collection types to be used (hereafter known as the referenced types)."},{"content":"When importing any collection, this list of referenced collection types is scanned and the best-matching collection is used if one is found.","pos":[12788,12928]},{"content":"Associations are matched only against types that implement either the generic or the nongeneric <ph id=\"ph1\">&lt;xref:System.Collections.IDictionary&gt;</ph> interface, while lists are matched against any supported collection type.","pos":[12929,13136],"source":" Associations are matched only against types that implement either the generic or the nongeneric <xref:System.Collections.IDictionary> interface, while lists are matched against any supported collection type."},{"pos":[13143,13376],"content":"For example, if the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A&gt;</ph> property is set to a <ph id=\"ph2\">&lt;xref:System.ComponentModel.BindingList%601&gt;</ph>, the <ph id=\"ph3\">`people`</ph> type in the preceding example is generated as follows.","source":"For example, if the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property is set to a <xref:System.ComponentModel.BindingList%601>, the `people` type in the preceding example is generated as follows."},{"pos":[13383,13640],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_SchemaImportExport#7<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#7)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_SchemaImportExport#7<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#7)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_SchemaImportExport#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#7)]\n [!code-vb[C_SchemaImportExport#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#7)]"},{"content":"A closed generic is considered the best match.","pos":[13647,13693]},{"content":"For example, if the types <ph id=\"ph1\">`BindingList(Of Integer)`</ph> and <ph id=\"ph2\">&lt;xref:System.Collections.ArrayList&gt;</ph> are passed to the collection of referenced types, any lists of integers found in schema are imported as a <ph id=\"ph3\">`BindingList(Of Integer)`</ph>.","pos":[13694,13918],"source":" For example, if the types `BindingList(Of Integer)` and <xref:System.Collections.ArrayList> are passed to the collection of referenced types, any lists of integers found in schema are imported as a `BindingList(Of Integer)`."},{"content":"Any other lists, for example, a <ph id=\"ph1\">`List(Of String)`</ph>, are imported as an <ph id=\"ph2\">`ArrayList`</ph>.","pos":[13919,14001],"source":" Any other lists, for example, a `List(Of String)`, are imported as an `ArrayList`."},{"pos":[14008,14180],"content":"If a type that implements the generic <ph id=\"ph1\">`IDictionary`</ph> interface is added to the collection of referenced types, its type parameters must either be fully open or fully closed.","source":"If a type that implements the generic `IDictionary` interface is added to the collection of referenced types, its type parameters must either be fully open or fully closed."},{"content":"Duplicates are not allowed.","pos":[14187,14214]},{"content":"For example, you cannot add both a <ph id=\"ph1\">`List(Of Integer)`</ph> and a <ph id=\"ph2\">`Collection(Of Integer)`</ph> to the referenced types.","pos":[14215,14324],"source":" For example, you cannot add both a `List(Of Integer)` and a `Collection(Of Integer)` to the referenced types."},{"content":"That would make it impossible to determine which should be used when a list of integers is found in schema.","pos":[14325,14432]},{"content":"Duplicates will be detected only if there is a type in schema that exposes the duplicates problem.","pos":[14433,14531]},{"content":"For example, if the imported schema does not contain lists of integers, it is allowed to have both the <ph id=\"ph1\">`List(Of Integer)`</ph> and the <ph id=\"ph2\">`Collection(Of Integer)`</ph> in the referenced types collection, but neither will have any effect.","pos":[14532,14756],"source":" For example, if the imported schema does not contain lists of integers, it is allowed to have both the `List(Of Integer)` and the `Collection(Of Integer)` in the referenced types collection, but neither will have any effect."},{"content":"The referenced collection types mechanism works equally well for collections of complex types (including collections of other collections), and not just for collections of primitives.","pos":[14763,14946]},{"content":"The <ph id=\"ph1\">`ReferencedCollectionTypes`</ph> property corresponds to the <bpt id=\"p1\">**</bpt>/collectionType<ept id=\"p1\">**</ept> switch on the SvcUtil.exe tool.","pos":[14953,15064],"source":"The `ReferencedCollectionTypes` property corresponds to the **/collectionType** switch on the SvcUtil.exe tool."},{"content":"Note that to reference multiple collection types, the <bpt id=\"p1\">**</bpt>/collectionType<ept id=\"p1\">**</ept> switch must be specified multiple times.","pos":[15065,15179],"source":" Note that to reference multiple collection types, the **/collectionType** switch must be specified multiple times."},{"content":"If the type is not in the MsCorLib.dll, its assembly must also be referenced using the <bpt id=\"p1\">**</bpt>/reference<ept id=\"p1\">**</ept> switch.","pos":[15180,15289],"source":" If the type is not in the MsCorLib.dll, its assembly must also be referenced using the **/reference** switch."},{"pos":[15300,15342],"content":"Import Options: Referencing Existing Types","linkify":"Import Options: Referencing Existing Types","nodes":[{"content":"Import Options: Referencing Existing Types","pos":[0,42]}]},{"content":"Occasionally, types in schema correspond to existing <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> types, and there is no need to generate these types from scratch.","pos":[15346,15528],"source":"Occasionally, types in schema correspond to existing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types, and there is no need to generate these types from scratch."},{"content":"(This section applies only to noncollection types.","pos":[15529,15579]},{"content":"For collection types, see the preceding section.)","pos":[15580,15629]},{"content":"For example, you may have a standard company-wide \"Person\" data contract type that you always want used when representing a person.","pos":[15636,15767]},{"content":"Whenever some service makes use of this type, and its schema appears in the service metadata, you may want to reuse the existing <ph id=\"ph1\">`Person`</ph> type when importing this schema instead of generating a new one for every service.","pos":[15768,15988],"source":" Whenever some service makes use of this type, and its schema appears in the service metadata, you may want to reuse the existing `Person` type when importing this schema instead of generating a new one for every service."},{"content":"To do this, pass a list of <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> types that you want to reuse into the collection the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A&gt;</ph> property returns on the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.ImportOptions&gt;</ph> class.","pos":[15995,16288],"source":"To do this, pass a list of [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types that you want to reuse into the collection the <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> property returns on the <xref:System.Runtime.Serialization.ImportOptions> class."},{"content":"If any of these types have a data contract name and namespace that matches the name and namespace of a schema type, a structural comparison is performed.","pos":[16289,16442]},{"content":"If it is determined that the types have both matching names and matching structures, the existing <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> type is reused instead of generating a new one.","pos":[16443,16652],"source":" If it is determined that the types have both matching names and matching structures, the existing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type is reused instead of generating a new one."},{"content":"If only the name matches but not the structure, an exception is thrown.","pos":[16653,16724]},{"content":"Note that there is no allowance for versioning when referencing types (for example, adding new optional data members).","pos":[16725,16843]},{"content":"The structures must match exactly.","pos":[16844,16878]},{"content":"It is legal to add multiple types with the same data contract name and namespace to the referenced types collection, as long as no schema types are imported with that name and namespace.","pos":[16885,17071]},{"content":"This allows you to easily add all the types in an assembly to the collection without worrying about duplicates for types that do not actually occur in schema.","pos":[17072,17230]},{"pos":[17237,17363],"content":"The <ph id=\"ph1\">`ReferencedTypes`</ph> property corresponds to the <bpt id=\"p1\">**</bpt>/reference<ept id=\"p1\">**</ept> switch in certain modes of operation of the Svcutil.exe tool.","source":"The `ReferencedTypes` property corresponds to the **/reference** switch in certain modes of operation of the Svcutil.exe tool."},{"pos":[17371,17570],"content":"[!NOTE]\n When using the Svcutil.exe or (in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]) the **Add Service Reference** tools, all of the types in MsCorLib.dll are automatically referenced.","leadings":["","> "],"nodes":[{"content":"When using the Svcutil.exe or (in <ph id=\"ph1\">[!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]</ph>) the <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept> tools, all of the types in MsCorLib.dll are automatically referenced.","pos":[9,197],"source":"When using the Svcutil.exe or (in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)]) the **Add Service Reference** tools, all of the types in MsCorLib.dll are automatically referenced."}]},{"pos":[17581,17656],"content":"Import Options: Importing Non-DataContract Schema as IXmlSerializable types","linkify":"Import Options: Importing Non-DataContract Schema as IXmlSerializable types","nodes":[{"content":"Import Options: Importing Non-DataContract Schema as IXmlSerializable types","pos":[0,75]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph> supports a limited subset of the schema.","pos":[17660,17764],"source":"The <xref:System.Runtime.Serialization.XsdDataContractImporter> supports a limited subset of the schema."},{"content":"If unsupported schema constructs are present (for example, XML attributes), the import attempt fails with an exception.","pos":[17765,17884]},{"content":"However, setting the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A&gt;</ph> property to <ph id=\"ph2\">`true`</ph> extends the range of schema supported.","pos":[17885,18030],"source":" However, setting the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property to `true` extends the range of schema supported."},{"content":"When set to <ph id=\"ph1\">`true`</ph>, the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph> generates types that implement the <ph id=\"ph3\">&lt;xref:System.Xml.Serialization.IXmlSerializable&gt;</ph> interface.","pos":[18031,18209],"source":" When set to `true`, the <xref:System.Runtime.Serialization.XsdDataContractImporter> generates types that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface."},{"content":"This enables direct access to the XML representation of these types.","pos":[18210,18278]},{"pos":[18290,18311],"content":"Design Considerations","linkify":"Design Considerations","nodes":[{"content":"Design Considerations","pos":[0,21]}]},{"content":"It may be difficult to work with the weakly typed XML representation directly.","pos":[18321,18399]},{"content":"Consider using an alternative serialization engine, such as the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph>, to work with schema not compatible with data contracts in a strongly typed way.","pos":[18400,18590],"source":" Consider using an alternative serialization engine, such as the <xref:System.Xml.Serialization.XmlSerializer>, to work with schema not compatible with data contracts in a strongly typed way."},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Using the XmlSerializer Class<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md)</ept>.","pos":[18591,18763],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Using the XmlSerializer Class](../../../../docs/framework/wcf/feature-details/using-the-xmlserializer-class.md)."},{"content":"Some schema constructs cannot be imported by the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph> even when the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A&gt;</ph> property is set to <ph id=\"ph3\">`true`</ph>.","pos":[18773,18989],"source":"Some schema constructs cannot be imported by the <xref:System.Runtime.Serialization.XsdDataContractImporter> even when the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property is set to `true`."},{"content":"Again, consider using the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph> for such cases.","pos":[18990,19077],"source":" Again, consider using the <xref:System.Xml.Serialization.XmlSerializer> for such cases."},{"pos":[19087,19364],"content":"The exact schema constructs that are supported both when <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A&gt;</ph> is <ph id=\"ph2\">`true`</ph> or <ph id=\"ph3\">`false`</ph> are described in <bpt id=\"p1\">[</bpt>Data Contract Schema Reference<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)</ept>.","source":"The exact schema constructs that are supported both when <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> is `true` or `false` are described in [Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)."},{"content":"Schema for generated <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.IXmlSerializable&gt;</ph> types do not retain fidelity when imported and exported.","pos":[19374,19500],"source":"Schema for generated <xref:System.Xml.Serialization.IXmlSerializable> types do not retain fidelity when imported and exported."},{"content":"That is, exporting the schema from the generated types and importing as classes does not return the original schema.","pos":[19501,19617]},{"content":"It is possible to combine the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A&gt;</ph> option with the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A&gt;</ph> option previously described.","pos":[19624,19848],"source":"It is possible to combine the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option with the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> option previously described."},{"content":"For types that have to be generated as <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.IXmlSerializable&gt;</ph> implementations, the structural check is skipped when using the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A&gt;</ph> feature.","pos":[19849,20092],"source":" For types that have to be generated as <xref:System.Xml.Serialization.IXmlSerializable> implementations, the structural check is skipped when using the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> feature."},{"pos":[20099,20247],"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A&gt;</ph> option corresponds to the <bpt id=\"p1\">**</bpt>/importXmlTypes<ept id=\"p1\">**</ept> switch on the Svcutil.exe tool.","source":"The <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option corresponds to the **/importXmlTypes** switch on the Svcutil.exe tool."},{"pos":[20259,20304],"content":"Working with Generated IXmlSerializable Types","linkify":"Working with Generated IXmlSerializable Types","nodes":[{"content":"Working with Generated IXmlSerializable Types","pos":[0,45]}]},{"content":"The generated <ph id=\"ph1\">`IXmlSerializable`</ph> types contain a private field, named \"nodesField,\" that returns an array of <ph id=\"ph2\">&lt;xref:System.Xml.XmlNode&gt;</ph> objects.","pos":[20308,20451],"source":"The generated `IXmlSerializable` types contain a private field, named \"nodesField,\" that returns an array of <xref:System.Xml.XmlNode> objects."},{"content":"When deserializing an instance of such a type, you can access the XML data directly through this field by using the XML Document Object Model.","pos":[20452,20594]},{"content":"When serializing an instance of this type, you can set this field to the desired XML data and it will be serialized.","pos":[20595,20711]},{"content":"This is accomplished through the <ph id=\"ph1\">`IXmlSerializable`</ph> implementation.","pos":[20718,20785],"source":"This is accomplished through the `IXmlSerializable` implementation."},{"content":"In the generated <ph id=\"ph1\">`IXmlSerializable`</ph> type, the <ph id=\"ph2\">&lt;xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A&gt;</ph> implementation calls the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A&gt;</ph> method of the <ph id=\"ph4\">&lt;xref:System.Runtime.Serialization.XmlSerializableServices&gt;</ph> class.","pos":[20786,21070],"source":" In the generated `IXmlSerializable` type, the <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> implementation calls the <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> method of the <xref:System.Runtime.Serialization.XmlSerializableServices> class."},{"content":"The method is a helper method that converts XML provided through an <ph id=\"ph1\">&lt;xref:System.Xml.XmlReader&gt;</ph> to an array of <ph id=\"ph2\">&lt;xref:System.Xml.XmlNode&gt;</ph> objects.","pos":[21071,21216],"source":" The method is a helper method that converts XML provided through an <xref:System.Xml.XmlReader> to an array of <xref:System.Xml.XmlNode> objects."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A&gt;</ph> implementation does the opposite and converts the array of <ph id=\"ph2\">`XmlNode`</ph> objects to a sequence of <ph id=\"ph3\">&lt;xref:System.Xml.XmlWriter&gt;</ph> calls.","pos":[21217,21410],"source":" The <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> implementation does the opposite and converts the array of `XmlNode` objects to a sequence of <xref:System.Xml.XmlWriter> calls."},{"content":"This is accomplished using the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A&gt;</ph> method.","pos":[21411,21523],"source":" This is accomplished using the <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A> method."},{"content":"It is possible to run the schema export process on the generated <ph id=\"ph1\">`IXmlSerializable`</ph> classes.","pos":[21530,21622],"source":"It is possible to run the schema export process on the generated `IXmlSerializable` classes."},{"content":"As previously stated, you will not get the original schema back.","pos":[21623,21687]},{"content":"Instead, you will get the \"anyType\" standard XSD type, which is a wildcard for any XSD type.","pos":[21688,21780]},{"pos":[21787,22094],"content":"This is accomplished by applying the <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.XmlSchemaProviderAttribute&gt;</ph> attribute to the generated <ph id=\"ph2\">`IXmlSerializable`</ph> classes and specifying a method that calls the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A&gt;</ph> method to generate the \"anyType\" type.","source":"This is accomplished by applying the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attribute to the generated `IXmlSerializable` classes and specifying a method that calls the <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> method to generate the \"anyType\" type."},{"pos":[22102,22284],"content":"[!NOTE]\n The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature. It is not recommended for use for any other purpose.","leadings":["","> "],"nodes":[{"content":"The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature. It is not recommended for use for any other purpose.","pos":[9,180],"nodes":[{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XmlSerializableServices&gt;</ph> type exists solely to support this particular feature.","pos":[0,118],"source":"The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature."},{"content":"It is not recommended for use for any other purpose.","pos":[119,171]}]}]},{"pos":[22295,22327],"content":"Import Options: Advanced Options","linkify":"Import Options: Advanced Options","nodes":[{"content":"Import Options: Advanced Options","pos":[0,32]}]},{"content":"The following are advanced import options:","pos":[22331,22373]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A&gt;</ph> property.","pos":[22383,22458],"source":"<xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> property."},{"content":"Specify the <ph id=\"ph1\">&lt;xref:System.CodeDom.Compiler.CodeDomProvider&gt;</ph> to use to generate the code for the generated classes.","pos":[22459,22572],"source":" Specify the <xref:System.CodeDom.Compiler.CodeDomProvider> to use to generate the code for the generated classes."},{"content":"The import mechanism attempts to avoid features that the <ph id=\"ph1\">&lt;xref:System.CodeDom.Compiler.CodeDomProvider&gt;</ph> does not support.","pos":[22573,22694],"source":" The import mechanism attempts to avoid features that the <xref:System.CodeDom.Compiler.CodeDomProvider> does not support."},{"content":"For example, the J# language does not support generics.","pos":[22695,22750]},{"content":"If you specify the J# code provider in this property, no generic types is generated in the importer’s <ph id=\"ph1\">&lt;xref:System.CodeDom.CodeCompileUnit&gt;</ph>.","pos":[22751,22891],"source":" If you specify the J# code provider in this property, no generic types is generated in the importer’s <xref:System.CodeDom.CodeCompileUnit>."},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A&gt;</ph> is not set, the full set of <ph id=\"ph2\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> features is used with no restrictions.","pos":[22892,23095],"source":" If the <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> is not set, the full set of [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] features is used with no restrictions."},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A&gt;</ph> property.","pos":[23105,23189],"source":"<xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property."},{"content":"An <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate&gt;</ph> implementation can be specified with this property.","pos":[23190,23303],"source":" An <xref:System.Runtime.Serialization.IDataContractSurrogate> implementation can be specified with this property."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate&gt;</ph> customizes the import process.","pos":[23304,23397],"source":" The <xref:System.Runtime.Serialization.IDataContractSurrogate> customizes the import process."},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Data Contract Surrogates<ept id=\"p1\">](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)</ept>.","pos":[23398,23554],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)."},{"content":"By default, no surrogate is used.","pos":[23555,23588]},{"pos":[23597,23605],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph>","pos":[23609,23667],"source":"<xref:System.Runtime.Serialization.DataContractSerializer> "},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractImporter&gt;</ph>","pos":[23672,23731],"source":"<xref:System.Runtime.Serialization.XsdDataContractImporter> "},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter&gt;</ph>","pos":[23736,23795],"source":"<xref:System.Runtime.Serialization.XsdDataContractExporter> "},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ImportOptions&gt;</ph>","pos":[23800,23849],"source":"<xref:System.Runtime.Serialization.ImportOptions> "},{"content":"<bpt id=\"p1\">[</bpt>Data Contract Schema Reference<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)</ept><ph id=\"ph1\"> </ph>","pos":[23854,23969],"source":"[Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md) "},{"content":"<bpt id=\"p1\">[</bpt>Data Contract Surrogates<ept id=\"p1\">](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)</ept><ph id=\"ph1\"> </ph>","pos":[23973,24070],"source":"[Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md) "},{"content":"<bpt id=\"p1\">[</bpt>Schema Import and Export<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md)</ept><ph id=\"ph1\"> </ph>","pos":[24074,24177],"source":"[Schema Import and Export](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md) "},{"content":"<bpt id=\"p1\">[</bpt>Exporting Schemas from Classes<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md)</ept><ph id=\"ph1\"> </ph>","pos":[24181,24296],"source":"[Exporting Schemas from Classes](../../../../docs/framework/wcf/feature-details/exporting-schemas-from-classes.md) "},{"content":"<bpt id=\"p1\">[</bpt>Data Contract Schema Reference<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)</ept>","pos":[24300,24414],"source":"[Data Contract Schema Reference](../../../../docs/framework/wcf/feature-details/data-contract-schema-reference.md)"}]}