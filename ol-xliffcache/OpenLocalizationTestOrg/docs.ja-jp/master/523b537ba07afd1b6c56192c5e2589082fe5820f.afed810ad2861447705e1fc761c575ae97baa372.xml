{"content":"---\ntitle: Build .NET Core from source\ndescription: Learn how to build .NET Core and the .NET Core CLI from the source code.\nauthor: bleroy\nms.date: 06/28/2017\nms.custom: \"seodec18\"\n---\n\n# Build .NET Core from source\n\nThe ability to build .NET Core from its source code is important in multiple ways: it makes it easier to port .NET Core to new platforms, it enables contributions and fixes to the product, and it enables the creation of custom versions of .NET.\nThis article gives guidance to developers who want to build and distribute their own versions of .NET Core.\n\n## Build the CLR from source\n\nThe source code for the .NET CoreCLR can be found in the [dotnet/coreclr](https://github.com/dotnet/coreclr/) repository on GitHub.\n\nThe build currently depends on the following prerequisites:\n\n* [Git](https://git-scm.com/)\n* [CMake](https://cmake.org/)\n* [Python](https://www.python.org/)\n* a C++ compiler.\n\nAfter you've installed these prerequisites, you can build the CLR by invoking the build script (`build.cmd` on Windows, or `build.sh` on Linux and macOS) at the base of the [dotnet/coreclr](https://github.com/dotnet/coreclr/) repository.\n\nInstalling the components differ depending on the operating system (OS). See the build instructions for your specific OS:\n\n* [Windows](https://github.com/dotnet/coreclr/blob/master/Documentation/building/windows-instructions.md)\n* [Linux](https://github.com/dotnet/coreclr/blob/master/Documentation/building/linux-instructions.md)\n* [macOS](https://github.com/dotnet/coreclr/blob/master/Documentation/building/osx-instructions.md)\n* [FreeBSD](https://github.com/dotnet/coreclr/blob/master/Documentation/building/freebsd-instructions.md)\n* [NetBSD](https://github.com/dotnet/coreclr/blob/master/Documentation/building/netbsd-instructions.md)\n\nThere is no cross-building across OS (only for ARM, which is built on X64).  \nYou have to be on the particular platform to build that platform.  \n\nThe build has two main `buildTypes`:\n\n* Debug (default)- Compiles the runtime with minimal optimizations and additional runtime checks (asserts). This reduction in optimization level and the additional checks slow runtime execution but are valuable for debugging. This is the recommended setting for development and testing environments.\n* Release - Compiles the runtime with full optimizations and without the additional runtime checks. This will yield much faster run time performance but it can take a bit longer to build and can be difficult to debug. Pass `release` to the build script to select this build type.\n\nIn addition, by default the build not only creates the runtime executables, but it also builds all the tests.\nThere are quite a few tests, taking a significant amount of time that isn't necessary if you just want to experiment with changes.\nYou can skip the tests builds by adding the `skiptests` argument to the build script, like in the following example (replace `.\\build` with `./build.sh` on Unix machines):\n\n```bat\n    .\\build skiptests\n```\n\nThe previous example showed how to build the `Debug` flavor, which has development time checks (asserts) enabled and optimizations disabled. To build the release (full speed) flavor, do the following:\n\n```bat\n    .\\build release skiptests\n```\n\nYou can find more build options with build by using the -? or -help qualifier.\n\n### Using Your Build\n\nThe build places all of its generated files under the `bin` directory at the base of the repository.\nThere is a *bin\\Log* directory that contains log files generated during the build (Most useful when the build fails).\nThe actual output is placed in a *bin\\Product\\[platform].[CPU architecture].[build type]* directory, such as *bin\\Product\\Windows_NT.x64.Release*.\n\nWhile the 'raw' output of the build is sometimes useful, normally you're only interested in the NuGet packages, which are placed in the `.nuget\\pkg` subdirectory of the previous output directory.\n\nThere are two basic techniques for using your new runtime:\n\n 1. **Use dotnet.exe and NuGet to compose an application**.\n    See [Using Your Build](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingYourBuild.md) for instructions on creating a program that uses your new runtime by using the NuGet packages you just created and the 'dotnet' command-line interface (CLI). This technique is the expected way non-runtime developers are likely to consume your new runtime.\n\n 2. **Use corerun.exe to run an application using unpackaged DLLs**.\n    This repository also defines a simple host called corerun.exe that does NOT take any dependency on NuGet.\n    You need to tell the host where to get the required DLLs you actually use, and you have to manually gather them together.\n    This technique is used by all the tests in the [dotnet/coreclr](https://github.com/dotnet/coreclr) repo, and is useful for quick local 'edit-compile-debug' loop such as preliminary unit testing.\n    See [Executing .NET Core Apps with CoreRun.exe](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingCoreRun.md) for details on using this technique.\n\n## Build the CLI from source\n\nThe source code for the .NET Core CLI can be found in the [dotnet/cli](https://github.com/dotnet/cli/) repository on GitHub.\n\nIn order to build the .NET Core CLI, you need the following installed on your machine.\n\n* Windows & Linux:\n  * git on the PATH\n* macOS:\n  * git on the PATH\n  * Xcode\n  * OpenSSL\n\nIn order to build, run `build.cmd` on Windows, or `build.sh` on Linux and macOS from the root. If you don't want to execute tests, run `build.cmd -t:Compile` or `./build.sh -t:Compile`. To build the CLI in macOS Sierra, you need to set the DOTNET_RUNTIME_ID environment variable by running `export DOTNET_RUNTIME_ID=osx.10.11-x64`.\n\n### Using your build\n\nUse the `dotnet` executable from *artifacts/{os}-{arch}/stage2* to try out the newly built CLI. If you want to use the build output when invoking `dotnet` from the current console, you can also add *artifacts/{os}-{arch}/stage2* to the PATH.\n\n## See also\n\n- [.NET Core Common Language Runtime (CoreCLR)](https://github.com/dotnet/coreclr/blob/master/README.md)\n- [.NET Core CLI Developer Guide](https://github.com/dotnet/cli/blob/master/Documentation/project-docs/developer-guide.md)\n- [.NET Core distribution packaging](./distribution-packaging.md)\n","nodes":[{"pos":[4,181],"embed":true,"restype":"x-metadata","content":"title: Build .NET Core from source\ndescription: Learn how to build .NET Core and the .NET Core CLI from the source code.\nauthor: bleroy\nms.date: 06/28/2017\nms.custom: \"seodec18\"","nodes":[{"content":"Build .NET Core from source","nodes":[{"pos":[0,27],"content":"Build .NET Core from source","nodes":[{"content":"Build .NET Core from source","pos":[0,27]}]}],"path":["title"],"nosxs":false},{"content":"Learn how to build .NET Core and the .NET Core CLI from the source code.","nodes":[{"pos":[0,72],"content":"Learn how to build .NET Core and the .NET Core CLI from the source code.","nodes":[{"content":"Learn how to build .NET Core and the .NET Core CLI from the source code.","pos":[0,72]}]}],"path":["description"],"nosxs":false}],"yml":true},{"pos":[189,216],"content":"Build .NET Core from source","linkify":"Build .NET Core from source","nodes":[{"content":"Build .NET Core from source","pos":[0,27]}]},{"content":"The ability to build .NET Core from its source code is important in multiple ways: it makes it easier to port .NET Core to new platforms, it enables contributions and fixes to the product, and it enables the creation of custom versions of .NET.","pos":[218,462]},{"content":"This article gives guidance to developers who want to build and distribute their own versions of .NET Core.","pos":[463,570],"source":"\nThis article gives guidance to developers who want to build and distribute their own versions of .NET Core."},{"pos":[575,600],"content":"Build the CLR from source","linkify":"Build the CLR from source","nodes":[{"content":"Build the CLR from source","pos":[0,25]}]},{"pos":[602,733],"content":"The source code for the .NET CoreCLR can be found in the <bpt id=\"p1\">[</bpt>dotnet/coreclr<ept id=\"p1\">](https://github.com/dotnet/coreclr/)</ept> repository on GitHub.","source":"The source code for the .NET CoreCLR can be found in the [dotnet/coreclr](https://github.com/dotnet/coreclr/) repository on GitHub."},{"content":"The build currently depends on the following prerequisites:","pos":[735,794]},{"pos":[798,825],"content":"<bpt id=\"p1\">[</bpt>Git<ept id=\"p1\">](https://git-scm.com/)</ept>","source":"[Git](https://git-scm.com/)"},{"pos":[828,855],"content":"<bpt id=\"p1\">[</bpt>CMake<ept id=\"p1\">](https://cmake.org/)</ept>","source":"[CMake](https://cmake.org/)"},{"pos":[858,891],"content":"<bpt id=\"p1\">[</bpt>Python<ept id=\"p1\">](https://www.python.org/)</ept>","source":"[Python](https://www.python.org/)"},{"content":"a C++ compiler.","pos":[894,909]},{"pos":[911,1148],"content":"After you've installed these prerequisites, you can build the CLR by invoking the build script (<ph id=\"ph1\">`build.cmd`</ph> on Windows, or <ph id=\"ph2\">`build.sh`</ph> on Linux and macOS) at the base of the <bpt id=\"p1\">[</bpt>dotnet/coreclr<ept id=\"p1\">](https://github.com/dotnet/coreclr/)</ept> repository.","source":"After you've installed these prerequisites, you can build the CLR by invoking the build script (`build.cmd` on Windows, or `build.sh` on Linux and macOS) at the base of the [dotnet/coreclr](https://github.com/dotnet/coreclr/) repository."},{"content":"Installing the components differ depending on the operating system (OS).","pos":[1150,1222]},{"content":"See the build instructions for your specific OS:","pos":[1223,1271]},{"pos":[1275,1378],"content":"<bpt id=\"p1\">[</bpt>Windows<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/building/windows-instructions.md)</ept>","source":"[Windows](https://github.com/dotnet/coreclr/blob/master/Documentation/building/windows-instructions.md)"},{"pos":[1381,1480],"content":"<bpt id=\"p1\">[</bpt>Linux<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/building/linux-instructions.md)</ept>","source":"[Linux](https://github.com/dotnet/coreclr/blob/master/Documentation/building/linux-instructions.md)"},{"pos":[1483,1580],"content":"<bpt id=\"p1\">[</bpt>macOS<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/building/osx-instructions.md)</ept>","source":"[macOS](https://github.com/dotnet/coreclr/blob/master/Documentation/building/osx-instructions.md)"},{"pos":[1583,1686],"content":"<bpt id=\"p1\">[</bpt>FreeBSD<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/building/freebsd-instructions.md)</ept>","source":"[FreeBSD](https://github.com/dotnet/coreclr/blob/master/Documentation/building/freebsd-instructions.md)"},{"pos":[1689,1790],"content":"<bpt id=\"p1\">[</bpt>NetBSD<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/building/netbsd-instructions.md)</ept>","source":"[NetBSD](https://github.com/dotnet/coreclr/blob/master/Documentation/building/netbsd-instructions.md)"},{"content":"There is no cross-building across OS (only for ARM, which is built on X64).","pos":[1792,1867]},{"content":"You have to be on the particular platform to build that platform.","pos":[1870,1935]},{"pos":[1939,1975],"content":"The build has two main <ph id=\"ph1\">`buildTypes`</ph>:","source":"The build has two main `buildTypes`:"},{"content":"Debug (default)- Compiles the runtime with minimal optimizations and additional runtime checks (asserts).","pos":[1979,2084]},{"content":"This reduction in optimization level and the additional checks slow runtime execution but are valuable for debugging.","pos":[2085,2202]},{"content":"This is the recommended setting for development and testing environments.","pos":[2203,2276]},{"content":"Release - Compiles the runtime with full optimizations and without the additional runtime checks.","pos":[2279,2376]},{"content":"This will yield much faster run time performance but it can take a bit longer to build and can be difficult to debug.","pos":[2377,2494]},{"content":"Pass <ph id=\"ph1\">`release`</ph> to the build script to select this build type.","pos":[2495,2556],"source":" Pass `release` to the build script to select this build type."},{"content":"In addition, by default the build not only creates the runtime executables, but it also builds all the tests.","pos":[2558,2667]},{"content":"There are quite a few tests, taking a significant amount of time that isn't necessary if you just want to experiment with changes.","pos":[2668,2798],"source":"\nThere are quite a few tests, taking a significant amount of time that isn't necessary if you just want to experiment with changes."},{"content":"You can skip the tests builds by adding the <ph id=\"ph1\">`skiptests`</ph> argument to the build script, like in the following example (replace <ph id=\"ph2\">`.\\build`</ph> with <ph id=\"ph3\">`./build.sh`</ph> on Unix machines):","pos":[2799,2970],"source":"\nYou can skip the tests builds by adding the `skiptests` argument to the build script, like in the following example (replace `.\\build` with `./build.sh` on Unix machines):"},{"content":"The previous example showed how to build the <ph id=\"ph1\">`Debug`</ph> flavor, which has development time checks (asserts) enabled and optimizations disabled.","pos":[3006,3146],"source":"The previous example showed how to build the `Debug` flavor, which has development time checks (asserts) enabled and optimizations disabled."},{"content":"To build the release (full speed) flavor, do the following:","pos":[3147,3206]},{"content":"You can find more build options with build by using the -?","pos":[3250,3308]},{"content":"or -help qualifier.","pos":[3309,3328]},{"pos":[3334,3350],"content":"Using Your Build","linkify":"Using Your Build","nodes":[{"content":"Using Your Build","pos":[0,16]}]},{"content":"The build places all of its generated files under the <ph id=\"ph1\">`bin`</ph> directory at the base of the repository.","pos":[3352,3452],"source":"The build places all of its generated files under the `bin` directory at the base of the repository."},{"content":"There is a <bpt id=\"p1\">*</bpt>bin\\Log<ept id=\"p1\">*</ept> directory that contains log files generated during the build (Most useful when the build fails).","pos":[3453,3570],"source":"\nThere is a *bin\\Log* directory that contains log files generated during the build (Most useful when the build fails)."},{"content":"The actual output is placed in a <bpt id=\"p1\">*</bpt>bin\\Product<ph id=\"ph1\">\\[</ph>platform].[CPU architecture].[build type]<ept id=\"p1\">*</ept> directory, such as <bpt id=\"p2\">*</bpt>bin\\Product\\Windows_NT.x64.Release<ept id=\"p2\">*</ept>.","pos":[3571,3717],"source":"\nThe actual output is placed in a *bin\\Product\\[platform].[CPU architecture].[build type]* directory, such as *bin\\Product\\Windows_NT.x64.Release*."},{"pos":[3719,3914],"content":"While the 'raw' output of the build is sometimes useful, normally you're only interested in the NuGet packages, which are placed in the <ph id=\"ph1\">`.nuget\\pkg`</ph> subdirectory of the previous output directory.","source":"While the 'raw' output of the build is sometimes useful, normally you're only interested in the NuGet packages, which are placed in the `.nuget\\pkg` subdirectory of the previous output directory."},{"content":"There are two basic techniques for using your new runtime:","pos":[3916,3974]},{"pos":[3980,4406],"content":"**Use dotnet.exe and NuGet to compose an application**.\nSee [Using Your Build](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingYourBuild.md) for instructions on creating a program that uses your new runtime by using the NuGet packages you just created and the 'dotnet' command-line interface (CLI). This technique is the expected way non-runtime developers are likely to consume your new runtime.","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>Use dotnet.exe and NuGet to compose an application<ept id=\"p1\">**</ept>.","pos":[0,55],"source":"**Use dotnet.exe and NuGet to compose an application**."},{"content":"See <bpt id=\"p1\">[</bpt>Using Your Build<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingYourBuild.md)</ept> for instructions on creating a program that uses your new runtime by using the NuGet packages you just created and the 'dotnet' command-line interface (CLI).","pos":[56,324],"source":"See [Using Your Build](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingYourBuild.md) for instructions on creating a program that uses your new runtime by using the NuGet packages you just created and the 'dotnet' command-line interface (CLI)."},{"content":"This technique is the expected way non-runtime developers are likely to consume your new runtime.","pos":[325,422]}]},{"pos":[4412,5086],"content":"**Use corerun.exe to run an application using unpackaged DLLs**.\nThis repository also defines a simple host called corerun.exe that does NOT take any dependency on NuGet.\nYou need to tell the host where to get the required DLLs you actually use, and you have to manually gather them together.\nThis technique is used by all the tests in the [dotnet/coreclr](https://github.com/dotnet/coreclr) repo, and is useful for quick local 'edit-compile-debug' loop such as preliminary unit testing.\nSee [Executing .NET Core Apps with CoreRun.exe](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingCoreRun.md) for details on using this technique.","leadings":["","    ","    ","    ","    "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>Use corerun.exe to run an application using unpackaged DLLs<ept id=\"p1\">**</ept>.","pos":[0,64],"source":"**Use corerun.exe to run an application using unpackaged DLLs**."},{"content":"This repository also defines a simple host called corerun.exe that does NOT take any dependency on NuGet.","pos":[65,170]},{"content":"You need to tell the host where to get the required DLLs you actually use, and you have to manually gather them together.","pos":[171,292]},{"content":"This technique is used by all the tests in the <bpt id=\"p1\">[</bpt>dotnet/coreclr<ept id=\"p1\">](https://github.com/dotnet/coreclr)</ept> repo, and is useful for quick local 'edit-compile-debug' loop such as preliminary unit testing.","pos":[293,487],"source":"This technique is used by all the tests in the [dotnet/coreclr](https://github.com/dotnet/coreclr) repo, and is useful for quick local 'edit-compile-debug' loop such as preliminary unit testing."},{"content":"See <bpt id=\"p1\">[</bpt>Executing .NET Core Apps with CoreRun.exe<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingCoreRun.md)</ept> for details on using this technique.","pos":[488,658],"source":"See [Executing .NET Core Apps with CoreRun.exe](https://github.com/dotnet/coreclr/blob/master/Documentation/workflow/UsingCoreRun.md) for details on using this technique."}]},{"pos":[5091,5116],"content":"Build the CLI from source","linkify":"Build the CLI from source","nodes":[{"content":"Build the CLI from source","pos":[0,25]}]},{"pos":[5118,5242],"content":"The source code for the .NET Core CLI can be found in the <bpt id=\"p1\">[</bpt>dotnet/cli<ept id=\"p1\">](https://github.com/dotnet/cli/)</ept> repository on GitHub.","source":"The source code for the .NET Core CLI can be found in the [dotnet/cli](https://github.com/dotnet/cli/) repository on GitHub."},{"content":"In order to build the .NET Core CLI, you need the following installed on your machine.","pos":[5244,5330]},{"content":"Windows &amp; Linux:","pos":[5334,5350],"source":"Windows & Linux:"},{"content":"git on the PATH","pos":[5355,5370]},{"content":"macOS:","pos":[5373,5379]},{"content":"git on the PATH","pos":[5384,5399]},{"content":"Xcode","pos":[5404,5409]},{"content":"OpenSSL","pos":[5414,5421]},{"content":"In order to build, run <ph id=\"ph1\">`build.cmd`</ph> on Windows, or <ph id=\"ph2\">`build.sh`</ph> on Linux and macOS from the root.","pos":[5423,5517],"source":"In order to build, run `build.cmd` on Windows, or `build.sh` on Linux and macOS from the root."},{"content":"If you don't want to execute tests, run <ph id=\"ph1\">`build.cmd -t:Compile`</ph> or <ph id=\"ph2\">`./build.sh -t:Compile`</ph>.","pos":[5518,5608],"source":" If you don't want to execute tests, run `build.cmd -t:Compile` or `./build.sh -t:Compile`."},{"content":"To build the CLI in macOS Sierra, you need to set the DOTNET_RUNTIME_ID environment variable by running <ph id=\"ph1\">`export DOTNET_RUNTIME_ID=osx.10.11-x64`</ph>.","pos":[5609,5754],"source":" To build the CLI in macOS Sierra, you need to set the DOTNET_RUNTIME_ID environment variable by running `export DOTNET_RUNTIME_ID=osx.10.11-x64`."},{"pos":[5760,5776],"content":"Using your build","linkify":"Using your build","nodes":[{"content":"Using your build","pos":[0,16]}]},{"content":"Use the <ph id=\"ph1\">`dotnet`</ph> executable from <bpt id=\"p1\">*</bpt>artifacts/{os}-{arch}/stage2<ept id=\"p1\">*</ept> to try out the newly built CLI.","pos":[5778,5873],"source":"Use the `dotnet` executable from *artifacts/{os}-{arch}/stage2* to try out the newly built CLI."},{"content":"If you want to use the build output when invoking <ph id=\"ph1\">`dotnet`</ph> from the current console, you can also add <bpt id=\"p1\">*</bpt>artifacts/{os}-{arch}/stage2<ept id=\"p1\">*</ept> to the PATH.","pos":[5874,6019],"source":" If you want to use the build output when invoking `dotnet` from the current console, you can also add *artifacts/{os}-{arch}/stage2* to the PATH."},{"pos":[6024,6032],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6036,6138],"content":"<bpt id=\"p1\">[</bpt>.NET Core Common Language Runtime (CoreCLR)<ept id=\"p1\">](https://github.com/dotnet/coreclr/blob/master/README.md)</ept>","source":"[.NET Core Common Language Runtime (CoreCLR)](https://github.com/dotnet/coreclr/blob/master/README.md)"},{"pos":[6141,6261],"content":"<bpt id=\"p1\">[</bpt>.NET Core CLI Developer Guide<ept id=\"p1\">](https://github.com/dotnet/cli/blob/master/Documentation/project-docs/developer-guide.md)</ept>","source":"[.NET Core CLI Developer Guide](https://github.com/dotnet/cli/blob/master/Documentation/project-docs/developer-guide.md)"},{"pos":[6264,6327],"content":"<bpt id=\"p1\">[</bpt>.NET Core distribution packaging<ept id=\"p1\">](./distribution-packaging.md)</ept>","source":"[.NET Core distribution packaging](./distribution-packaging.md)"}]}