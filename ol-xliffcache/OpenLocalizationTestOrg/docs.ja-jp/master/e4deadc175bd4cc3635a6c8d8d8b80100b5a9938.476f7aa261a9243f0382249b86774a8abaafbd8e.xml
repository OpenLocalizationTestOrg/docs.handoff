{"content":"---\ntitle: \"Security and Serialization\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"code security, serialization\"\n  - \"serialization, security\"\n  - \"secure coding, serialization\"\n  - \"security [.NET Framework], serialization\"\nms.assetid: b921bc94-bd3a-4c91-9ede-2c8d4f78ea9a\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# Security and Serialization\nBecause serialization can allow other code to see or modify object instance data that would otherwise be inaccessible, a special permission is required of code performing serialization: <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.SerializationFormatter> flag specified. Under default policy, this permission is not given to Internet-downloaded or intranet code; only code on the local computer is granted this permission.  \n  \n Normally, all fields of an object instance are serialized, meaning that data is represented in the serialized data for the instance. It is possible for code that can interpret the format to determine what the data values are, independent of the accessibility of the member. Similarly, deserialization extracts data from the serialized representation and sets object state directly, again irrespective of accessibility rules.  \n  \n Any object that could contain security-sensitive data should be made nonserializable, if possible. If it must be serializable, try to make specific fields that hold sensitive data nonserializable. If this cannot be done, be aware that this data will be exposed to any code that has permission to serialize, and make sure that no malicious code can get this permission.  \n  \n The <xref:System.Runtime.Serialization.ISerializable> interface is intended for use only by the serialization infrastructure. However, if unprotected, it can potentially release sensitive information. If you provide custom serialization by implementing **ISerializable**, make sure you take the following precautions:  \n  \n-   The <xref:System.Runtime.Serialization.ISerializable.GetObjectData%2A> method should be explicitly secured either by demanding the **SecurityPermission** with **SerializationFormatter** permission specified or by making sure that no sensitive information is released with the method output. For example:  \n  \n    ```vb  \n    Public Overrides<SecurityPermissionAttribute(SecurityAction.Demand, SerializationFormatter := True)>  _  \n    Sub GetObjectData(info As SerializationInfo, context As StreamingContext)  \n    End Sub  \n    ```  \n  \n    ```csharp  \n    [SecurityPermissionAttribute(SecurityAction.Demand,SerializationFormatter   \n    =true)]  \n    public override void GetObjectData(SerializationInfo info,   \n    StreamingContext context)  \n    {  \n    }  \n    ```  \n  \n-   The special constructor used for serialization should also perform thorough input validation and should be either protected or private to help protect against misuse by malicious code. It should enforce the same security checks and permissions required to obtain an instance of such a class by any other means, such as explicitly creating the class or indirectly creating it through some kind of factory.  \n  \n## See also\n\n- [Secure Coding Guidelines](../../../docs/standard/security/secure-coding-guidelines.md)\n","nodes":[{"pos":[4,350],"embed":true,"restype":"x-metadata","content":"title: \"Security and Serialization\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"code security, serialization\"\n  - \"serialization, security\"\n  - \"secure coding, serialization\"\n  - \"security [.NET Framework], serialization\"\nms.assetid: b921bc94-bd3a-4c91-9ede-2c8d4f78ea9a\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"Security and Serialization","nodes":[{"pos":[0,26],"content":"Security and Serialization","nodes":[{"content":"Security and Serialization","pos":[0,26]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[357,383],"content":"Security and Serialization","linkify":"Security and Serialization","nodes":[{"content":"Security and Serialization","pos":[0,26]}]},{"content":"Because serialization can allow other code to see or modify object instance data that would otherwise be inaccessible, a special permission is required of code performing serialization: <ph id=\"ph1\">&lt;xref:System.Security.Permissions.SecurityPermission&gt;</ph> with the <ph id=\"ph2\">&lt;xref:System.Security.Permissions.SecurityPermissionFlag.SerializationFormatter&gt;</ph> flag specified.","pos":[384,729],"source":"Because serialization can allow other code to see or modify object instance data that would otherwise be inaccessible, a special permission is required of code performing serialization: <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.SerializationFormatter> flag specified."},{"content":"Under default policy, this permission is not given to Internet-downloaded or intranet code; only code on the local computer is granted this permission.","pos":[730,881]},{"content":"Normally, all fields of an object instance are serialized, meaning that data is represented in the serialized data for the instance.","pos":[888,1020]},{"content":"It is possible for code that can interpret the format to determine what the data values are, independent of the accessibility of the member.","pos":[1021,1161]},{"content":"Similarly, deserialization extracts data from the serialized representation and sets object state directly, again irrespective of accessibility rules.","pos":[1162,1312]},{"content":"Any object that could contain security-sensitive data should be made nonserializable, if possible.","pos":[1319,1417]},{"content":"If it must be serializable, try to make specific fields that hold sensitive data nonserializable.","pos":[1418,1515]},{"content":"If this cannot be done, be aware that this data will be exposed to any code that has permission to serialize, and make sure that no malicious code can get this permission.","pos":[1516,1687]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ISerializable&gt;</ph> interface is intended for use only by the serialization infrastructure.","pos":[1694,1819],"source":"The <xref:System.Runtime.Serialization.ISerializable> interface is intended for use only by the serialization infrastructure."},{"content":"However, if unprotected, it can potentially release sensitive information.","pos":[1820,1894]},{"content":"If you provide custom serialization by implementing <bpt id=\"p1\">**</bpt>ISerializable<ept id=\"p1\">**</ept>, make sure you take the following precautions:","pos":[1895,2011],"source":" If you provide custom serialization by implementing **ISerializable**, make sure you take the following precautions:"},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ISerializable.GetObjectData%2A&gt;</ph> method should be explicitly secured either by demanding the <bpt id=\"p1\">**</bpt>SecurityPermission<ept id=\"p1\">**</ept> with <bpt id=\"p2\">**</bpt>SerializationFormatter<ept id=\"p2\">**</ept> permission specified or by making sure that no sensitive information is released with the method output.","pos":[2021,2311],"source":"The <xref:System.Runtime.Serialization.ISerializable.GetObjectData%2A> method should be explicitly secured either by demanding the **SecurityPermission** with **SerializationFormatter** permission specified or by making sure that no sensitive information is released with the method output."},{"content":"For example:","pos":[2312,2324]},{"content":"The special constructor used for serialization should also perform thorough input validation and should be either protected or private to help protect against misuse by malicious code.","pos":[2801,2985]},{"content":"It should enforce the same security checks and permissions required to obtain an instance of such a class by any other means, such as explicitly creating the class or indirectly creating it through some kind of factory.","pos":[2986,3205]},{"pos":[3214,3222],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3226,3313],"content":"<bpt id=\"p1\">[</bpt>Secure Coding Guidelines<ept id=\"p1\">](../../../docs/standard/security/secure-coding-guidelines.md)</ept>","source":"[Secure Coding Guidelines](../../../docs/standard/security/secure-coding-guidelines.md)"}]}