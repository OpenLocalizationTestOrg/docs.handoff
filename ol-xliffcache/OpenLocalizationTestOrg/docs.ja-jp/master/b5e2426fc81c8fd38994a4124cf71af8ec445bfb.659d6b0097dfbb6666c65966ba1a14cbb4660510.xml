{"content":"---\ntitle: \"Mitigation: Path Colon Checks | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-bcl\"\n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: a0bb52de-d279-419d-8f23-4b12d1a3f36e\ncaps.latest.revision: 5\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Mitigation: Path Colon Checks\nStarting with apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], a number of changes were made to support previously unsupported paths (both in terms of length and format). In particular, checks for the proper drive separator syntax (the colon) were made more correct.  \n  \n## Impact  \n These changes block some URI paths the <xref:System.IO.Path.GetDirectoryName%2A?displayProperty=fullName> and <xref:System.IO.Path.GetPathRoot%2A?displayProperty=fullName> methods previously supported.  \n  \n## Mitigation  \n To work around the problem of a previously acceptable path that is no longer supported by the <xref:System.IO.Path.GetDirectoryName%2A?displayProperty=fullName> and <xref:System.IO.Path.GetPathRoot%2A?displayProperty=fullName> methods, you can do the following:  \n  \n-   Manually remove the scheme from a URL. For example, remove `file://` from a URL.  \n  \n-   Pass the URI to a <xref:System.Uri> constructor,  and retrieve the value of the <xref:System.Uri.LocalPath%2A?displayProperty=fullName> property.  \n  \n-   Opt out of the new path normalization by setting the `Switch.System.IO.UseLegacyPathHandling`<xref:System.AppContext> switch to `true`.  \n  \n    ```xml  \n  \n    <runtime>  \n        <AppContextSwitchOverrides value=\"Switch.System.IO.UseLegacyPathHandling=true\" />    \n    </runtime>  \n  \n    ```  \n  \n## See Also  \n [Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)","nodes":[{"pos":[12,58],"content":"Mitigation: Path Colon Checks | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Mitigation: Path Colon Checks | Microsoft Docs","pos":[0,46]}]},{"pos":[378,407],"content":"Mitigation: Path Colon Checks","linkify":"Mitigation: Path Colon Checks","nodes":[{"content":"Mitigation: Path Colon Checks","pos":[0,29]}]},{"content":"Starting with apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, a number of changes were made to support previously unsupported paths (both in terms of length and format).","pos":[408,606],"source":"Starting with apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], a number of changes were made to support previously unsupported paths (both in terms of length and format)."},{"content":"In particular, checks for the proper drive separator syntax (the colon) were made more correct.","pos":[607,702]},{"pos":[711,717],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"content":"These changes block some URI paths the <ph id=\"ph1\">&lt;xref:System.IO.Path.GetDirectoryName%2A?displayProperty=fullName&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.IO.Path.GetPathRoot%2A?displayProperty=fullName&gt;</ph> methods previously supported.","pos":[721,922],"source":"These changes block some URI paths the <xref:System.IO.Path.GetDirectoryName%2A?displayProperty=fullName> and <xref:System.IO.Path.GetPathRoot%2A?displayProperty=fullName> methods previously supported."},{"pos":[931,941],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"content":"To work around the problem of a previously acceptable path that is no longer supported by the <ph id=\"ph1\">&lt;xref:System.IO.Path.GetDirectoryName%2A?displayProperty=fullName&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.IO.Path.GetPathRoot%2A?displayProperty=fullName&gt;</ph> methods, you can do the following:","pos":[945,1206],"source":"To work around the problem of a previously acceptable path that is no longer supported by the <xref:System.IO.Path.GetDirectoryName%2A?displayProperty=fullName> and <xref:System.IO.Path.GetPathRoot%2A?displayProperty=fullName> methods, you can do the following:"},{"content":"Manually remove the scheme from a URL.","pos":[1216,1254]},{"content":"For example, remove <ph id=\"ph1\">`file://`</ph> from a URL.","pos":[1255,1296],"source":" For example, remove `file://` from a URL."},{"content":"Pass the URI to a <ph id=\"ph1\">&lt;xref:System.Uri&gt;</ph> constructor,  and retrieve the value of the <ph id=\"ph2\">&lt;xref:System.Uri.LocalPath%2A?displayProperty=fullName&gt;</ph> property.","pos":[1306,1451],"source":"Pass the URI to a <xref:System.Uri> constructor,  and retrieve the value of the <xref:System.Uri.LocalPath%2A?displayProperty=fullName> property."},{"pos":[1461,1596],"content":"Opt out of the new path normalization by setting the <ph id=\"ph1\">`Switch.System.IO.UseLegacyPathHandling`</ph><ph id=\"ph2\">&lt;xref:System.AppContext&gt;</ph> switch to <ph id=\"ph3\">`true`</ph>.","source":"Opt out of the new path normalization by setting the `Switch.System.IO.UseLegacyPathHandling`<xref:System.AppContext> switch to `true`."},{"pos":[1764,1772],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[1776,1888],"content":"<bpt id=\"p1\">[</bpt>Retargeting Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)</ept>","source":"[Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)"}]}