{"content":"---\ntitle: \"Using a Custom Binding with the Discovery Client Channel | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 36f95e75-04f7-44f3-a995-a0d623624d7f\ncaps.latest.revision: 4\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Using a Custom Binding with the Discovery Client Channel\nWhen using a custom binding with the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, you must define a <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> that creates <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances.  \n  \n## Creating a DiscoveryEndpointProvider  \n The <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> is responsible for creating <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances on demand. To define a discovery endpoint provider, derive a class from <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> and override the <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider.GetDiscoveryEndpoint%2A> method and return a new discovery endpoint. The following example shows how to create a discovery endpoint provider.  \n  \n```  \n// Extend DiscoveryEndpointProvider class to change the default DiscoveryEndpoint  \n// to the DiscoveryClientBindingElement. The Discovery ClientChannel   \n// uses this endpoint to send Probe message.  \npublic class UdpDiscoveryEndpointProvider : DiscoveryEndpointProvider  \n{  \n   public override DiscoveryEndpoint GetDiscoveryEndpoint()  \n   {  \n      return new UdpDiscoveryEndpoint(DiscoveryVersion.WSDiscoveryApril2005);  \n   }  \n}  \n```  \n  \n Once you have defined the discovery endpoint provider you can create a custom binding and add the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, which references the discovery endpoint provider as shown in the following example.  \n  \n```  \nDiscoveryClientBindingElement discoveryBindingElement = new DiscoveryClientBindingElement();  \n  \n// Provide the search criteria and the endpoint over which the probe is sent.  \ndiscoveryBindingElement.FindCriteria = new FindCriteria(typeof(ICalculatorService));  \ndiscoveryBindingElement.DiscoveryEndpointProvider = new UdpDiscoveryEndpointProvider();  \n  \nCustomBinding customBinding = new CustomBinding(new NetTcpBinding());  \n// Insert DiscoveryClientBindingElement at the top of the BindingElement stack.  \n// An exception is thrown if this binding element is not at the top.  \ncustomBinding.Elements.Insert(0, discoveryBindingElement);  \n```  \n  \n [!INCLUDE[crabout](../../../../includes/crabout-md.md)] using the discovery client channel, see [Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md). For a complete code example, see [Discovery Binding Element Sample](../../../../docs/framework/wcf/samples/discovery-binding-element-sample.md)  \n  \n## See Also  \n [WCF Discovery Overview](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)   \n [Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)   \n [Discovery Binding Element Sample](../../../../docs/framework/wcf/samples/discovery-binding-element-sample.md)","nodes":[{"pos":[4,376],"embed":true,"restype":"x-metadata","content":"title: \"Using a Custom Binding with the Discovery Client Channel | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 36f95e75-04f7-44f3-a995-a0d623624d7f\ncaps.latest.revision: 4\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"Using a Custom Binding with the Discovery Client Channel | Microsoft Docs","nodes":[{"pos":[0,73],"content":"Using a Custom Binding with the Discovery Client Channel | Microsoft Docs","nodes":[{"content":"Using a Custom Binding with the Discovery Client Channel | Microsoft Docs","pos":[0,73]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[383,439],"content":"Using a Custom Binding with the Discovery Client Channel","linkify":"Using a Custom Binding with the Discovery Client Channel","nodes":[{"content":"Using a Custom Binding with the Discovery Client Channel","pos":[0,56]}]},{"content":"When using a custom binding with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement&gt;</ph>, you must define a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider&gt;</ph> that creates <ph id=\"ph3\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpoint&gt;</ph> instances.","pos":[440,704],"source":"When using a custom binding with the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, you must define a <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> that creates <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances."},{"pos":[713,749],"content":"Creating a DiscoveryEndpointProvider","linkify":"Creating a DiscoveryEndpointProvider","nodes":[{"content":"Creating a DiscoveryEndpointProvider","pos":[0,36]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider&gt;</ph> is responsible for creating <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpoint&gt;</ph> instances on demand.","pos":[753,923],"source":"The <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> is responsible for creating <xref:System.ServiceModel.Discovery.DiscoveryEndpoint> instances on demand."},{"content":"To define a discovery endpoint provider, derive a class from <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider&gt;</ph> and override the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider.GetDiscoveryEndpoint%2A&gt;</ph> method and return a new discovery endpoint.","pos":[924,1195],"source":" To define a discovery endpoint provider, derive a class from <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider> and override the <xref:System.ServiceModel.Discovery.DiscoveryEndpointProvider.GetDiscoveryEndpoint%2A> method and return a new discovery endpoint."},{"content":"The following example shows how to create a discovery endpoint provider.","pos":[1196,1268]},{"content":"Once you have defined the discovery endpoint provider you can create a custom binding and add the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement&gt;</ph>, which references the discovery endpoint provider as shown in the following example.","pos":[1729,1978],"source":"Once you have defined the discovery endpoint provider you can create a custom binding and add the <xref:System.ServiceModel.Discovery.DiscoveryClientBindingElement>, which references the discovery endpoint provider as shown in the following example."},{"content":"using the discovery client channel, see <bpt id=\"p1\">[</bpt>Using the Discovery Client Channel<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)</ept>.","pos":[2700,2863],"source":" using the discovery client channel, see [Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)."},{"content":"For a complete code example, see <bpt id=\"p1\">[</bpt>Discovery Binding Element Sample<ept id=\"p1\">](../../../../docs/framework/wcf/samples/discovery-binding-element-sample.md)</ept>","pos":[2864,3007],"source":" For a complete code example, see [Discovery Binding Element Sample](../../../../docs/framework/wcf/samples/discovery-binding-element-sample.md)"},{"pos":[3016,3024],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>WCF Discovery Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md)</ept><ph id=\"ph1\"> </ph>","pos":[3028,3127],"source":"[WCF Discovery Overview](../../../../docs/framework/wcf/feature-details/wcf-discovery-overview.md) "},{"content":"<bpt id=\"p1\">[</bpt>Using the Discovery Client Channel<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md)</ept><ph id=\"ph1\"> </ph>","pos":[3131,3254],"source":"[Using the Discovery Client Channel](../../../../docs/framework/wcf/feature-details/using-the-discovery-client-channel.md) "},{"content":"<bpt id=\"p1\">[</bpt>Discovery Binding Element Sample<ept id=\"p1\">](../../../../docs/framework/wcf/samples/discovery-binding-element-sample.md)</ept>","pos":[3258,3368],"source":"[Discovery Binding Element Sample](../../../../docs/framework/wcf/samples/discovery-binding-element-sample.md)"}]}