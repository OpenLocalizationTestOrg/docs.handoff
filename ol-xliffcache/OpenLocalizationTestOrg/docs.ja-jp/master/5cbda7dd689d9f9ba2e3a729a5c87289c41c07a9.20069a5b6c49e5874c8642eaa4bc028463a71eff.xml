{"content":"---\ntitle: \"How to: Publish Metadata for a Service Using Code | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 51407e6d-4d87-42d5-be7c-9887b8652006\ncaps.latest.revision: 19\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Publish Metadata for a Service Using Code\nThis is one of two how-to topics that discuss publishing metadata for a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] service. There are two ways to specify how a service should publish metadata, using a configuration file and using code. This topic shows how to publish metadata for a service using a code.  \n  \n> [!CAUTION]\n>  This topic shows how to publish metadata in an unsecure manner. Any client can retrieve the metadata from the service. If you require your service to publish metadata in a secure manner. see [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md).  \n  \n [!INCLUDE[crabout](../../../../includes/crabout-md.md)] publishing metadata in a configuration file, see [How to: Publish Metadata for a Service Using a Configuration File](../../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md). Publishing metadata allows clients to retrieve the metadata using a WS-Transfer GET request or an HTTP/GET request using the `?wsdl` query string. To be sure that the code is working you must create a basic WCF service. A basic self-hosted service is provided in the following code.  \n  \n [!code-csharp[htPublishMetadataCode#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#0)]\n [!code-vb[htPublishMetadataCode#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#0)]  \n  \n### To publish metadata in code  \n  \n1.  Within the main method of a console application, instantiate a <xref:System.ServiceModel.ServiceHost> object by passing in the service type and the base address.  \n  \n     [!code-csharp[htPublishMetadataCode#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#1)]\n     [!code-vb[htPublishMetadataCode#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#1)]  \n  \n2.  Create a try block immediately below the code for step 1, this catches any exceptions that get thrown while the service is running.  \n  \n     [!code-csharp[htPublishMetadataCode#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#2)]\n     [!code-vb[htPublishMetadataCode#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#2)]  \n  \n     [!code-csharp[htPublishMetadataCode#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#3)]\n     [!code-vb[htPublishMetadataCode#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#3)]  \n  \n3.  Check to see whether the service host already contains a <xref:System.ServiceModel.Description.ServiceMetadataBehavior>, if not, create a new <xref:System.ServiceModel.Description.ServiceMetadataBehavior> instance.  \n  \n     [!code-csharp[htPublishMetadataCode#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#4)]\n     [!code-vb[htPublishMetadataCode#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#4)]  \n  \n4.  Set the <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A> property to `true.`  \n  \n     [!code-csharp[htPublishMetadataCode#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#5)]\n     [!code-vb[htPublishMetadataCode#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#5)]  \n  \n5.  The <xref:System.ServiceModel.Description.ServiceMetadataBehavior> contains a <xref:System.ServiceModel.Description.MetadataExporter> property. The <xref:System.ServiceModel.Description.MetadataExporter> contains a <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property. Set the value of the <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property to <xref:System.ServiceModel.Description.PolicyVersion.Policy15%2A>. The <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property can also be set to <xref:System.ServiceModel.Description.PolicyVersion.Policy12%2A>. When set to <xref:System.ServiceModel.Description.PolicyVersion.Policy15%2A> the metadata exporter generates policy information with the metadata that\" conforms to WS-Policy 1.5. When set to <xref:System.ServiceModel.Description.PolicyVersion.Policy12%2A> the metadata exporter generates policy information that conforms to WS-Policy 1.2.  \n  \n     [!code-csharp[htPublishMetadataCode#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#6)]\n     [!code-vb[htPublishMetadataCode#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#6)]  \n  \n6.  Add the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> instance to the service host's behaviors collection.  \n  \n     [!code-csharp[htPublishMetadataCode#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#7)]\n     [!code-vb[htPublishMetadataCode#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#7)]  \n  \n7.  Add the metadata exchange endpoint to the service host.  \n  \n     [!code-csharp[htPublishMetadataCode#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#8)]\n     [!code-vb[htPublishMetadataCode#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#8)]  \n  \n8.  Add an application endpoint to the service host.  \n  \n     [!code-csharp[htPublishMetadataCode#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#9)]\n     [!code-vb[htPublishMetadataCode#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#9)]  \n  \n    > [!NOTE]\n    >  If you do not add any endpoints to the service, the runtime adds default endpoints for you. In this example, because the service has a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> set to `true`, the service has publishing metadata enabled. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] default endpoints, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).  \n  \n9. Open the service host and wait for incoming calls. When the user presses ENTER, close the service host.  \n  \n     [!code-csharp[htPublishMetadataCode#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#10)]\n     [!code-vb[htPublishMetadataCode#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#10)]  \n  \n10. Build and run the console application.  \n  \n11. Use Internet Explorer to browse to the base address of the service (http://localhost:8001/MetadataSample in this sample) and verify that the metadata publishing is turned on. You should see a Web page displayed that says \"Simple Service\" at the top and immediately below \"You have created a service.\" If not, a message at the top of the resulting page displays: \"Metadata publishing for this service is currently disabled.\"  \n  \n## Example  \n The following code example shows the implementation of a basic [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that publishes metadata for the service in code.  \n  \n [!code-csharp[htPublishMetadataCode#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#11)]\n [!code-vb[htPublishMetadataCode#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#11)]  \n  \n## See Also  \n [How to: Host a WCF Service in a Managed Application](../../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md)   \n [Self-Host](../../../../docs/framework/wcf/samples/self-host.md)   \n [Metadata Architecture Overview](../../../../docs/framework/wcf/feature-details/metadata-architecture-overview.md)   \n [Using Metadata](../../../../docs/framework/wcf/feature-details/using-metadata.md)   \n [How to: Publish Metadata for a Service Using a Configuration File](../../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)","nodes":[{"pos":[4,370],"embed":true,"restype":"x-metadata","content":"title: \"How to: Publish Metadata for a Service Using Code | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 51407e6d-4d87-42d5-be7c-9887b8652006\ncaps.latest.revision: 19\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"How to: Publish Metadata for a Service Using Code | Microsoft Docs","nodes":[{"pos":[0,66],"content":"How to: Publish Metadata for a Service Using Code | Microsoft Docs","nodes":[{"content":"How to: Publish Metadata for a Service Using Code | Microsoft Docs","pos":[0,66]}]}],"path":["title"]}],"yml":true},{"pos":[377,426],"content":"How to: Publish Metadata for a Service Using Code","linkify":"How to: Publish Metadata for a Service Using Code","nodes":[{"content":"How to: Publish Metadata for a Service Using Code","pos":[0,49]}]},{"content":"This is one of two how-to topics that discuss publishing metadata for a <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> service.","pos":[427,563],"source":"This is one of two how-to topics that discuss publishing metadata for a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] service."},{"content":"There are two ways to specify how a service should publish metadata, using a configuration file and using code.","pos":[564,675]},{"content":"This topic shows how to publish metadata for a service using a code.","pos":[676,744]},{"pos":[752,1066],"content":"[!CAUTION]\n This topic shows how to publish metadata in an unsecure manner. Any client can retrieve the metadata from the service. If you require your service to publish metadata in a secure manner. see [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md).","leadings":["","> "],"nodes":[{"content":"This topic shows how to publish metadata in an unsecure manner. Any client can retrieve the metadata from the service. If you require your service to publish metadata in a secure manner. see [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md).","pos":[12,312],"nodes":[{"content":"This topic shows how to publish metadata in an unsecure manner.","pos":[0,63]},{"content":"Any client can retrieve the metadata from the service.","pos":[64,118]},{"content":"If you require your service to publish metadata in a secure manner.","pos":[119,186]},{"content":"see <bpt id=\"p1\">[</bpt>Custom Secure Metadata Endpoint<ept id=\"p1\">](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md)</ept>.","pos":[187,300],"source":" see [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md)."}]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> publishing metadata in a configuration file, see <bpt id=\"p1\">[</bpt>How to: Publish Metadata for a Service Using a Configuration File<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)</ept>.","pos":[1073,1362],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] publishing metadata in a configuration file, see [How to: Publish Metadata for a Service Using a Configuration File](../../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)."},{"content":"Publishing metadata allows clients to retrieve the metadata using a WS-Transfer GET request or an HTTP/GET request using the <ph id=\"ph1\">`?wsdl`</ph> query string.","pos":[1363,1509],"source":" Publishing metadata allows clients to retrieve the metadata using a WS-Transfer GET request or an HTTP/GET request using the `?wsdl` query string."},{"content":"To be sure that the code is working you must create a basic WCF service.","pos":[1510,1582]},{"content":"A basic self-hosted service is provided in the following code.","pos":[1583,1645]},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#0<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#0)</ept><ept id=\"p1\">]</ept>","pos":[1652,1782],"source":"[!code-csharp[htPublishMetadataCode#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#0)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#0<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#0)</ept><ept id=\"p1\">]</ept>","pos":[1784,1915],"source":"[!code-vb[htPublishMetadataCode#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#0)]"},{"pos":[1925,1952],"content":"To publish metadata in code","linkify":"To publish metadata in code","nodes":[{"content":"To publish metadata in code","pos":[0,27]}]},{"content":"Within the main method of a console application, instantiate a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> object by passing in the service type and the base address.","pos":[1962,2123],"source":"Within the main method of a console application, instantiate a <xref:System.ServiceModel.ServiceHost> object by passing in the service type and the base address."},{"pos":[2134,2401],"content":"[!code-csharp[htPublishMetadataCode#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#1)]\n [!code-vb[htPublishMetadataCode#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#1)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#1)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#1)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#1<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#1)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#1)]"}]},{"content":"Create a try block immediately below the code for step 1, this catches any exceptions that get thrown while the service is running.","pos":[2411,2542]},{"pos":[2553,2820],"content":"[!code-csharp[htPublishMetadataCode#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#2)]\n [!code-vb[htPublishMetadataCode#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#2)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#2)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#2)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#2<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#2)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#2)]"}]},{"pos":[2831,3098],"content":"[!code-csharp[htPublishMetadataCode#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#3)]\n [!code-vb[htPublishMetadataCode#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#3)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#3)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#3)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#3<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#3)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#3)]"}]},{"content":"Check to see whether the service host already contains a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph>, if not, create a new <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> instance.","pos":[3108,3322],"source":"Check to see whether the service host already contains a <xref:System.ServiceModel.Description.ServiceMetadataBehavior>, if not, create a new <xref:System.ServiceModel.Description.ServiceMetadataBehavior> instance."},{"pos":[3333,3600],"content":"[!code-csharp[htPublishMetadataCode#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#4)]\n [!code-vb[htPublishMetadataCode#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#4)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#4)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#4)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#4<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#4)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#4)]"}]},{"pos":[3610,3718],"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A&gt;</ph> property to <ph id=\"ph2\">`true.`</ph>","source":"Set the <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A> property to `true.`"},{"pos":[3729,3996],"content":"[!code-csharp[htPublishMetadataCode#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#5)]\n [!code-vb[htPublishMetadataCode#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#5)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#5<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#5)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#5)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#5<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#5)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#5)]"}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> contains a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataExporter&gt;</ph> property.","pos":[4006,4149],"source":"The <xref:System.ServiceModel.Description.ServiceMetadataBehavior> contains a <xref:System.ServiceModel.Description.MetadataExporter> property."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExporter&gt;</ph> contains a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A&gt;</ph> property.","pos":[4150,4303],"source":" The <xref:System.ServiceModel.Description.MetadataExporter> contains a <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property."},{"content":"Set the value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.PolicyVersion.Policy15%2A&gt;</ph>.","pos":[4304,4475],"source":" Set the value of the <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property to <xref:System.ServiceModel.Description.PolicyVersion.Policy15%2A>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A&gt;</ph> property can also be set to <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.PolicyVersion.Policy12%2A&gt;</ph>.","pos":[4476,4646],"source":" The <xref:System.ServiceModel.Description.MetadataExporter.PolicyVersion%2A> property can also be set to <xref:System.ServiceModel.Description.PolicyVersion.Policy12%2A>."},{"content":"When set to <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.PolicyVersion.Policy15%2A&gt;</ph> the metadata exporter generates policy information with the metadata that\" conforms to WS-Policy 1.5.","pos":[4647,4825],"source":" When set to <xref:System.ServiceModel.Description.PolicyVersion.Policy15%2A> the metadata exporter generates policy information with the metadata that\" conforms to WS-Policy 1.5."},{"content":"When set to <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.PolicyVersion.Policy12%2A&gt;</ph> the metadata exporter generates policy information that conforms to WS-Policy 1.2.","pos":[4826,4985],"source":" When set to <xref:System.ServiceModel.Description.PolicyVersion.Policy12%2A> the metadata exporter generates policy information that conforms to WS-Policy 1.2."},{"pos":[4996,5263],"content":"[!code-csharp[htPublishMetadataCode#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#6)]\n [!code-vb[htPublishMetadataCode#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#6)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#6<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#6)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#6)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#6<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#6)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#6)]"}]},{"content":"Add the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> instance to the service host's behaviors collection.","pos":[5273,5396],"source":"Add the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> instance to the service host's behaviors collection."},{"pos":[5407,5674],"content":"[!code-csharp[htPublishMetadataCode#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#7)]\n [!code-vb[htPublishMetadataCode#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#7)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#7<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#7)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#7)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#7<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#7)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#7)]"}]},{"content":"Add the metadata exchange endpoint to the service host.","pos":[5684,5739]},{"pos":[5750,6017],"content":"[!code-csharp[htPublishMetadataCode#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#8)]\n [!code-vb[htPublishMetadataCode#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#8)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#8<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#8)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#8)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#8<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#8)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#8)]"}]},{"content":"Add an application endpoint to the service host.","pos":[6027,6075]},{"pos":[6086,6353],"content":"[!code-csharp[htPublishMetadataCode#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#9)]\n [!code-vb[htPublishMetadataCode#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#9)]","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#9<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#9)</ept><ept id=\"p1\">]</ept>","pos":[0,130],"source":"[!code-csharp[htPublishMetadataCode#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#9)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#9<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#9)</ept><ept id=\"p1\">]</ept>","pos":[132,263],"source":"[!code-vb[htPublishMetadataCode#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#9)]"}]},{"pos":[6365,6937],"content":"[!NOTE]\nIf you do not add any endpoints to the service, the runtime adds default endpoints for you. In this example, because the service has a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> set to `true`, the service has publishing metadata enabled. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] default endpoints, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).","leadings":["","    >  "],"nodes":[{"content":"If you do not add any endpoints to the service, the runtime adds default endpoints for you. In this example, because the service has a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> set to `true`, the service has publishing metadata enabled. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] default endpoints, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md).","pos":[8,565],"nodes":[{"content":"If you do not add any endpoints to the service, the runtime adds default endpoints for you.","pos":[0,91]},{"content":"In this example, because the service has a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> set to <ph id=\"ph2\">`true`</ph>, the service has publishing metadata enabled.","pos":[92,257],"source":" In this example, because the service has a <xref:System.ServiceModel.Description.ServiceMetadataBehavior> set to `true`, the service has publishing metadata enabled."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> default endpoints, see <bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept> and <bpt id=\"p2\">[</bpt>Simplified Configuration for WCF Services<ept id=\"p2\">](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)</ept>.","pos":[258,557],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] default endpoints, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)."}]}]},{"content":"Open the service host and wait for incoming calls.","pos":[6946,6996]},{"content":"When the user presses ENTER, close the service host.","pos":[6997,7049]},{"pos":[7060,7331],"content":"[!code-csharp[htPublishMetadataCode#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#10)]\n  [!code-vb[htPublishMetadataCode#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#10)]","leadings":["","   "],"nodes":[{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#10<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#10)</ept><ept id=\"p1\">]</ept>","pos":[0,132],"source":"[!code-csharp[htPublishMetadataCode#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#10)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#10<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#10)</ept><ept id=\"p1\">]</ept>","pos":[135,268],"source":"[!code-vb[htPublishMetadataCode#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#10)]"}]},{"content":"Build and run the console application.","pos":[7341,7379]},{"content":"Use Internet Explorer to browse to the base address of the service (http://localhost:8001/MetadataSample in this sample) and verify that the metadata publishing is turned on.","pos":[7389,7563]},{"content":"You should see a Web page displayed that says \"Simple Service\" at the top and immediately below \"You have created a service.\"","pos":[7564,7689]},{"content":"If not, a message at the top of the resulting page displays: \"Metadata publishing for this service is currently disabled.\"","pos":[7690,7812]},{"pos":[7821,7828],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[7832,8007],"content":"The following code example shows the implementation of a basic <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> service that publishes metadata for the service in code.","source":"The following code example shows the implementation of a basic [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that publishes metadata for the service in code."},{"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#11<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#11)</ept><ept id=\"p1\">]</ept>","pos":[8014,8146],"source":"[!code-csharp[htPublishMetadataCode#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/htpublishmetadatacode/cs/program.cs#11)]"},{"content":"<bpt id=\"p1\">[!code-vb</bpt><bpt id=\"p2\">[</bpt>htPublishMetadataCode#11<ept id=\"p2\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#11)</ept><ept id=\"p1\">]</ept>","pos":[8148,8281],"source":"[!code-vb[htPublishMetadataCode#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htpublishmetadatacode/vb/program.vb#11)]"},{"pos":[8290,8298],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>How to: Host a WCF Service in a Managed Application<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md)</ept><ph id=\"ph1\"> </ph>","pos":[8302,8442],"source":"[How to: Host a WCF Service in a Managed Application](../../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md) "},{"content":"<bpt id=\"p1\">[</bpt>Self-Host<ept id=\"p1\">](../../../../docs/framework/wcf/samples/self-host.md)</ept><ph id=\"ph1\"> </ph>","pos":[8446,8511],"source":"[Self-Host](../../../../docs/framework/wcf/samples/self-host.md) "},{"content":"<bpt id=\"p1\">[</bpt>Metadata Architecture Overview<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/metadata-architecture-overview.md)</ept><ph id=\"ph1\"> </ph>","pos":[8515,8630],"source":"[Metadata Architecture Overview](../../../../docs/framework/wcf/feature-details/metadata-architecture-overview.md) "},{"content":"<bpt id=\"p1\">[</bpt>Using Metadata<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/using-metadata.md)</ept><ph id=\"ph1\"> </ph>","pos":[8634,8717],"source":"[Using Metadata](../../../../docs/framework/wcf/feature-details/using-metadata.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Publish Metadata for a Service Using a Configuration File<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)</ept>","pos":[8721,8904],"source":"[How to: Publish Metadata for a Service Using a Configuration File](../../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)"}]}