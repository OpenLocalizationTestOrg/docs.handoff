{"content":"---\ntitle: Create a WCF data service in Visual Studio\nms.date: 08/24/2018\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nms.assetid: 34d1d971-5e18-4c22-9bf6-d3612e27ea59\n---\n# Create the data service\n\nIn this topic, you create a sample data service that uses WCF Data Services to expose an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed that's based on the Northwind sample database. The task involves the following basic steps:\n\n1. Create an ASP.NET Web application.\n\n2. Define the data model by using the Entity Data Model tools.\n\n3. Add the data service to the Web application.\n\n4. Enable access to the data service.\n\n## Create the ASP.NET web app\n\n1. In Visual Studio, on the **File** menu, select **New** > **Project**.\n\n1. In the **New Project** dialog box, under either Visual Basic or Visual C# select the **Web** category, and then select **ASP.NET Web Application**.\n\n1. Enter `NorthwindService` as the name of the project and then select **OK**.\n\n1. In the **New ASP.NET Web Application** dialog, select **Empty** and then select **OK**.\n\n1. (Optional) Specify a specific port number for your Web application. Note: the port number `12345` is used in this series of quickstart topics.\n\n    1. In **Solution Explorer**, right-click on the ASP.NET project that you just created, and then choose **Properties**.\n\n    2. Select the **Web** tab, and set the value of the **Specific port** text box to `12345`.\n\n## Define the data model\n\n1. In **Solution Explorer**, right-click the name of the ASP.NET project, and then click **Add** > **New Item**.\n\n2. In the **Add New Item** dialog box, select the **Data** category, and then select **ADO.NET Entity Data Model**.\n\n3. For the name of the data model, enter `Northwind.edmx`.\n\n4. In the **Entity Data Model Wizard**, select **EF Designer from Database**, and then click **Next**.\n\n5. Connect the data model to the database by doing one of the following steps, and then click **Next**:\n\n    -   If you don't have a database connection already configured, click **New Connection** and create a new connection. For more information, see [How to: Create Connections to SQL Server Databases](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/s4yys16a(v=vs.90)). This SQL Server instance must have the Northwind sample database attached.\n\n         \\- or -\n\n    -   If you have a database connection already configured to connect to the Northwind database, select that connection from the list of connections.\n\n6. On the final page of the wizard, select the check boxes for all tables in the database, and clear the check boxes for views and stored procedures.\n\n7. Click **Finish** to close the wizard.\n\n## Create the WCF data service\n\n1. In **Solution Explorer**, right-click on the ASP.NET project, and then choose **Add** > **New Item**.\n\n2. In the **Add New Item** dialog box, select the **WCF Data Service** item template from the **Web** category.\n\n   ![WCF Data Service item template in Visual Studio 2015](media/wcf-data-service-item-template.png)\n\n   > [!NOTE]\n   > The **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017.\n\n3. For the name of the service, type `Northwind`.\n\n     Visual Studio creates the XML markup and code files for the new service. By default, the code-editor window opens. In **Solution Explorer**, the service has the name Northwind with the extension *.svc.cs* or *.svc.vb*.\n\n4. In the code for the data service, replace the comment `/* TODO: put your data source class name here */` in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is `NorthwindEntities`. The class definition should look this the following:\n\n     [!code-csharp[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#servicedefinition)]\n     [!code-vb[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#servicedefinition)]\n\n## Enable access to data service resources\n\n1. In the code for the data service, replace the placeholder code in the `InitializeService` function with the following:\n\n     [!code-csharp[Astoria Quickstart Service#AllReadConfig](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#allreadconfig)]\n     [!code-vb[Astoria Quickstart Service#AllReadConfig](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#allreadconfig)]\n\n     This enables authorized clients to have read and write access to resources for the specified entity sets.\n\n    > [!NOTE]\n    > Any client that can access the ASP.NET application can also access the resources exposed by the data service. In a production data service, to prevent unauthorized access to resources you should also secure the application itself. For more information, see [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md).\n\n## Next steps\n\nYou have successfully created a new data service that exposes an OData feed that is based on the Northwind sample database, and you have enabled access to the feed for clients that have permissions on the ASP.NET Web application. Next, you'll start the data service from Visual Studio and access the OData feed by submitting HTTP GET requests through a Web browser:\n\n> [!div class=\"nextstepaction\"]\n> [Access the service from a web browser](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)\n\n## See also\n\n- [ADO.NET Entity Data Model Tools](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100))","nodes":[{"pos":[4,155],"embed":true,"restype":"x-metadata","content":"title: Create a WCF data service in Visual Studio\nms.date: 08/24/2018\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nms.assetid: 34d1d971-5e18-4c22-9bf6-d3612e27ea59","nodes":[{"content":"Create a WCF data service in Visual Studio","nodes":[{"pos":[0,42],"content":"Create a WCF data service in Visual Studio","nodes":[{"content":"Create a WCF data service in Visual Studio","pos":[0,42]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[162,185],"content":"Create the data service","linkify":"Create the data service","nodes":[{"content":"Create the data service","pos":[0,23]}]},{"content":"In this topic, you create a sample data service that uses WCF Data Services to expose an <ph id=\"ph1\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> feed that's based on the Northwind sample database.","pos":[187,391],"source":"In this topic, you create a sample data service that uses WCF Data Services to expose an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed that's based on the Northwind sample database."},{"content":"The task involves the following basic steps:","pos":[392,436]},{"content":"Create an ASP.NET Web application.","pos":[441,475]},{"content":"Define the data model by using the Entity Data Model tools.","pos":[480,539]},{"content":"Add the data service to the Web application.","pos":[544,588]},{"content":"Enable access to the data service.","pos":[593,627]},{"pos":[632,658],"content":"Create the ASP.NET web app","linkify":"Create the ASP.NET web app","nodes":[{"content":"Create the ASP.NET web app","pos":[0,26]}]},{"pos":[663,732],"content":"In Visual Studio, on the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>Project<ept id=\"p3\">**</ept>.","source":"In Visual Studio, on the **File** menu, select **New** > **Project**."},{"pos":[737,884],"content":"In the <bpt id=\"p1\">**</bpt>New Project<ept id=\"p1\">**</ept> dialog box, under either Visual Basic or Visual C# select the <bpt id=\"p2\">**</bpt>Web<ept id=\"p2\">**</ept> category, and then select <bpt id=\"p3\">**</bpt>ASP.NET Web Application<ept id=\"p3\">**</ept>.","source":"In the **New Project** dialog box, under either Visual Basic or Visual C# select the **Web** category, and then select **ASP.NET Web Application**."},{"pos":[889,964],"content":"Enter <ph id=\"ph1\">`NorthwindService`</ph> as the name of the project and then select <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","source":"Enter `NorthwindService` as the name of the project and then select **OK**."},{"pos":[969,1056],"content":"In the <bpt id=\"p1\">**</bpt>New ASP.NET Web Application<ept id=\"p1\">**</ept> dialog, select <bpt id=\"p2\">**</bpt>Empty<ept id=\"p2\">**</ept> and then select <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","source":"In the **New ASP.NET Web Application** dialog, select **Empty** and then select **OK**."},{"content":"(Optional) Specify a specific port number for your Web application.","pos":[1061,1128]},{"content":"Note: the port number <ph id=\"ph1\">`12345`</ph> is used in this series of quickstart topics.","pos":[1129,1203],"source":" Note: the port number `12345` is used in this series of quickstart topics."},{"pos":[1212,1327],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click on the ASP.NET project that you just created, and then choose <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","source":"In **Solution Explorer**, right-click on the ASP.NET project that you just created, and then choose **Properties**."},{"pos":[1336,1423],"content":"Select the <bpt id=\"p1\">**</bpt>Web<ept id=\"p1\">**</ept> tab, and set the value of the <bpt id=\"p2\">**</bpt>Specific port<ept id=\"p2\">**</ept> text box to <ph id=\"ph1\">`12345`</ph>.","source":"Select the **Web** tab, and set the value of the **Specific port** text box to `12345`."},{"pos":[1428,1449],"content":"Define the data model","linkify":"Define the data model","nodes":[{"content":"Define the data model","pos":[0,21]}]},{"pos":[1454,1563],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the name of the ASP.NET project, and then click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"In **Solution Explorer**, right-click the name of the ASP.NET project, and then click **Add** > **New Item**."},{"pos":[1568,1680],"content":"In the <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Data<ept id=\"p2\">**</ept> category, and then select <bpt id=\"p3\">**</bpt>ADO.NET Entity Data Model<ept id=\"p3\">**</ept>.","source":"In the **Add New Item** dialog box, select the **Data** category, and then select **ADO.NET Entity Data Model**."},{"pos":[1685,1740],"content":"For the name of the data model, enter <ph id=\"ph1\">`Northwind.edmx`</ph>.","source":"For the name of the data model, enter `Northwind.edmx`."},{"pos":[1745,1844],"content":"In the <bpt id=\"p1\">**</bpt>Entity Data Model Wizard<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>EF Designer from Database<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>.","source":"In the **Entity Data Model Wizard**, select **EF Designer from Database**, and then click **Next**."},{"pos":[1849,1949],"content":"Connect the data model to the database by doing one of the following steps, and then click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>:","source":"Connect the data model to the database by doing one of the following steps, and then click **Next**:"},{"content":"If you don't have a database connection already configured, click <bpt id=\"p1\">**</bpt>New Connection<ept id=\"p1\">**</ept> and create a new connection.","pos":[1959,2072],"source":"If you don't have a database connection already configured, click **New Connection** and create a new connection."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Create Connections to SQL Server Databases<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/s4yys16a(v=vs.90))</ept>.","pos":[2073,2248],"source":" For more information, see [How to: Create Connections to SQL Server Databases](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/s4yys16a(v=vs.90))."},{"content":"This SQL Server instance must have the Northwind sample database attached.","pos":[2249,2323]},{"content":"<ph id=\"ph1\">\\-</ph> or -","pos":[2334,2341],"source":"\\- or -"},{"content":"If you have a database connection already configured to connect to the Northwind database, select that connection from the list of connections.","pos":[2351,2494]},{"content":"On the final page of the wizard, select the check boxes for all tables in the database, and clear the check boxes for views and stored procedures.","pos":[2499,2645]},{"pos":[2650,2687],"content":"Click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept> to close the wizard.","source":"Click **Finish** to close the wizard."},{"pos":[2692,2719],"content":"Create the WCF data service","linkify":"Create the WCF data service","nodes":[{"content":"Create the WCF data service","pos":[0,27]}]},{"pos":[2724,2825],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click on the ASP.NET project, and then choose <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept><ph id=\"ph1\"> &gt; </ph><bpt id=\"p3\">**</bpt>New Item<ept id=\"p3\">**</ept>.","source":"In **Solution Explorer**, right-click on the ASP.NET project, and then choose **Add** > **New Item**."},{"pos":[2830,2938],"content":"In the <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>WCF Data Service<ept id=\"p2\">**</ept> item template from the <bpt id=\"p3\">**</bpt>Web<ept id=\"p3\">**</ept> category.","source":"In the **Add New Item** dialog box, select the **WCF Data Service** item template from the **Web** category."},{"content":"WCF Data Service item template in Visual Studio 2015","pos":[2945,2997]},{"pos":[3047,3160],"content":"[!NOTE]\nThe **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017.","leadings":["","   > "],"nodes":[{"content":"The <bpt id=\"p1\">**</bpt>WCF Data Service<ept id=\"p1\">**</ept> template is available in Visual Studio 2015, but not in Visual Studio 2017.","pos":[8,108],"source":"The **WCF Data Service** template is available in Visual Studio 2015, but not in Visual Studio 2017."}]},{"pos":[3165,3211],"content":"For the name of the service, type <ph id=\"ph1\">`Northwind`</ph>.","source":"For the name of the service, type `Northwind`."},{"content":"Visual Studio creates the XML markup and code files for the new service.","pos":[3218,3290]},{"content":"By default, the code-editor window opens.","pos":[3291,3332]},{"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, the service has the name Northwind with the extension <bpt id=\"p2\">*</bpt>.svc.cs<ept id=\"p2\">*</ept> or <bpt id=\"p3\">*</bpt>.svc.vb<ept id=\"p3\">*</ept>.","pos":[3333,3436],"source":" In **Solution Explorer**, the service has the name Northwind with the extension *.svc.cs* or *.svc.vb*."},{"content":"In the code for the data service, replace the comment <ph id=\"ph1\">`/* TODO: put your data source class name here */`</ph> in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is <ph id=\"ph2\">`NorthwindEntities`</ph>.","pos":[3441,3711],"source":"In the code for the data service, replace the comment `/* TODO: put your data source class name here */` in the definition of the class that defines the data service with the type that is the entity container of the data model, which in this case is `NorthwindEntities`."},{"content":"The class definition should look this the following:","pos":[3712,3764]},{"pos":[3771,4136],"content":"[!code-csharp[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#servicedefinition)]\n  [!code-vb[Astoria Quickstart Service#ServiceDefinition](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#servicedefinition)]","leadings":["","   "],"nodes":[]},{"pos":[4141,4180],"content":"Enable access to data service resources","linkify":"Enable access to data service resources","nodes":[{"content":"Enable access to data service resources","pos":[0,39]}]},{"pos":[4185,4303],"content":"In the code for the data service, replace the placeholder code in the <ph id=\"ph1\">`InitializeService`</ph> function with the following:","source":"In the code for the data service, replace the placeholder code in the `InitializeService` function with the following:"},{"pos":[4310,4659],"content":"[!code-csharp[Astoria Quickstart Service#AllReadConfig](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria quickstart service/cs/northwind.svc.cs#allreadconfig)]\n  [!code-vb[Astoria Quickstart Service#AllReadConfig](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria quickstart service/vb/northwind.svc.vb#allreadconfig)]","leadings":["","   "],"nodes":[]},{"content":"This enables authorized clients to have read and write access to resources for the specified entity sets.","pos":[4666,4771]},{"pos":[4779,5146],"content":"[!NOTE]\nAny client that can access the ASP.NET application can also access the resources exposed by the data service. In a production data service, to prevent unauthorized access to resources you should also secure the application itself. For more information, see [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md).","leadings":["","    > "],"nodes":[{"content":"Any client that can access the ASP.NET application can also access the resources exposed by the data service. In a production data service, to prevent unauthorized access to resources you should also secure the application itself. For more information, see [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md).","pos":[8,361],"nodes":[{"content":"Any client that can access the ASP.NET application can also access the resources exposed by the data service.","pos":[0,109]},{"content":"In a production data service, to prevent unauthorized access to resources you should also secure the application itself.","pos":[110,230]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Securing WCF Data Services<ept id=\"p1\">](../../../../docs/framework/data/wcf/securing-wcf-data-services.md)</ept>.","pos":[231,353],"source":" For more information, see [Securing WCF Data Services](../../../../docs/framework/data/wcf/securing-wcf-data-services.md)."}]}]},{"pos":[5151,5161],"content":"Next steps","linkify":"Next steps","nodes":[{"content":"Next steps","pos":[0,10]}]},{"content":"You have successfully created a new data service that exposes an OData feed that is based on the Northwind sample database, and you have enabled access to the feed for clients that have permissions on the ASP.NET Web application.","pos":[5163,5392]},{"content":"Next, you'll start the data service from Visual Studio and access the OData feed by submitting HTTP GET requests through a Web browser:","pos":[5393,5528]},{"pos":[5532,5713],"content":"[!div class=\"nextstepaction\"]\n[Access the service from a web browser](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)","leadings":["","> "],"nodes":[{"content":"<bpt id=\"p1\">[</bpt>Access the service from a web browser<ept id=\"p1\">](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)</ept>","pos":[30,179],"source":"[Access the service from a web browser](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)"}]},{"pos":[5718,5726],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5730,5852],"content":"<bpt id=\"p1\">[</bpt>ADO.NET Entity Data Model Tools<ept id=\"p1\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100))</ept>","source":"[ADO.NET Entity Data Model Tools](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100))"}]}