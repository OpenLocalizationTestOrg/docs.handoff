{"content":"---\ntitle: \"Designer ReHosting\"\nms.date: \"03/30/2017\"\nms.assetid: b676ad31-5f64-4d84-9a36-b4d7113a2f4d\n---\n# Designer Rehosting\nDesigner rehosting is a common scenario that refers to hosting the workflow design canvas inside of a custom application. The hosting application most people are familiar with is Visual Studio, however there are a number of scenarios where showing the workflow designer in an application may be useful:  \n  \n-   Monitoring applications (allowing an end user to visualize the process, as well as runtime data about the process such as the currently active state, aggregate execution time data, or other information about an instance of the workflow).  \n  \n-   Applications that allow a user to customize the process with a limited set of activities.  \n  \n To support these types of applications, the workflow designer ships inside the .NET Framework, and can be hosted inside a WPF application, or in a WinForms application with the appropriate WPF hosting code. This sample demonstrates:  \n  \n-   Rehosting the WF designer.  \n  \n-   Using the rehosted toolbox and property grid as well.  \n  \n## Rehosting the designer  \n This sample shows how to create the WPF layout to contain the designer, seen in the following grid layout (Toolbox code omitted for space concerns). Note the naming of the borders which contain the designer and property grid.  \n  \n```xaml  \n<Grid>  \n    <Grid.ColumnDefinitions>  \n        <ColumnDefinition Width=\"2*\"/>  \n        <ColumnDefinition Width=\"7*\"/>  \n        <ColumnDefinition Width=\"3*\"/>  \n    </Grid.ColumnDefinitions>  \n    <Border Grid.Column=\"0\">  \n        <sapt:ToolboxControl>...</sapt:ToolboxControl>  \n    </Border>  \n    <Border Grid.Column=\"1\" Name=\"DesignerBorder\"/>  \n    <Border Grid.Column=\"2\" Name=\"PropertyBorder\"/>  \n</Grid>  \n```  \n  \n Next the sample creates the designer, and associates its primary <xref:System.Activities.Presentation.WorkflowDesigner.View%2A> and <xref:System.Activities.Presentation.WorkflowDesigner.PropertyInspectorView%2A> with the appropriate container in the user interface. There are a few additional lines of code in the following example that merit some explanation. The <xref:System.Activities.Core.Presentation.DesignerMetadata.Register%2A> call is required to associate the default activity designers for the activities shipped with [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]. <xref:System.Activities.Presentation.WorkflowDesigner.Load%2A> is called to pass in the WF item to be edited. Finally, the <xref:System.Activities.Presentation.WorkflowDesigner.View%2A> (primary canvas) and <xref:System.Activities.Presentation.WorkflowDesigner.PropertyInspectorView%2A> (property grid) are placed onto the user interface surface.  \n  \n```csharp  \nprotected override void OnInitialized(EventArgs e)  \n{  \n   base.OnInitialized(e);  \n   // register metadata  \n   (new DesignerMetadata()).Register();  \n  \n   // create the workflow designer  \n   WorkflowDesigner wd = new WorkflowDesigner();  \n   wd.Load(new Sequence());  \n   DesignerBorder.Child = wd.View;  \n   PropertyBorder.Child = wd.PropertyInspectorView;  \n}  \n```  \n  \n## Using the rehosted toolbox  \n This sample uses the rehosted toolbox control declaratively in XAML. Note that in code, one can pass a type to the <xref:System.Activities.Presentation.Toolbox.ToolboxItemWrapper> constructor.  \n  \n```xaml  \n<!-- Copyright (c) Microsoft Corporation. All rights reserved-->  \n<Window x:Class=\"Microsoft.Samples.DesignerRehosting.RehostingWfDesigner\"  \n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"  \n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"  \n        xmlns:sapt=\"clr-namespace:System.Activities.Presentation.Toolbox;assembly=System.Activities.Presentation\"  \n        xmlns:sys=\"clr-namespace:System;assembly=mscorlib\"  \n        Title=\"Window1\" Height=\"600\" Width=\"900\">  \n    <Window.Resources>  \n        <sys:String x:Key=\"AssemblyName\">System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</sys:String>  \n    </Window.Resources>  \n    <Grid>  \n        <Grid.ColumnDefinitions>  \n            <ColumnDefinition Width=\"2*\"/>  \n            <ColumnDefinition Width=\"7*\"/>  \n            <ColumnDefinition Width=\"3*\"/>  \n        </Grid.ColumnDefinitions>  \n        <Border Grid.Column=\"0\">  \n            <sapt:ToolboxControl>  \n                <sapt:ToolboxCategory CategoryName=\"Basic\">  \n                    <sapt:ToolboxItemWrapper AssemblyName=\"{StaticResource AssemblyName}\" >  \n                        <sapt:ToolboxItemWrapper.ToolName>  \n                            System.Activities.Statements.Sequence  \n                        </sapt:ToolboxItemWrapper.ToolName>  \n                       </sapt:ToolboxItemWrapper>  \n                    <sapt:ToolboxItemWrapper  AssemblyName=\"{StaticResource AssemblyName}\">  \n                        <sapt:ToolboxItemWrapper.ToolName>  \n                            System.Activities.Statements.WriteLine  \n                        </sapt:ToolboxItemWrapper.ToolName>  \n  \n                    </sapt:ToolboxItemWrapper>  \n                    <sapt:ToolboxItemWrapper  AssemblyName=\"{StaticResource AssemblyName}\">  \n                        <sapt:ToolboxItemWrapper.ToolName>  \n                            System.Activities.Statements.If  \n                        </sapt:ToolboxItemWrapper.ToolName>  \n  \n                    </sapt:ToolboxItemWrapper>  \n                    <sapt:ToolboxItemWrapper  AssemblyName=\"{StaticResource AssemblyName}\">  \n                        <sapt:ToolboxItemWrapper.ToolName>  \n                            System.Activities.Statements.While  \n                        </sapt:ToolboxItemWrapper.ToolName>  \n  \n                    </sapt:ToolboxItemWrapper>  \n                </sapt:ToolboxCategory>  \n            </sapt:ToolboxControl>  \n        </Border>  \n        <Border Grid.Column=\"1\" Name=\"DesignerBorder\"/>  \n        <Border Grid.Column=\"2\" Name=\"PropertyBorder\"/>  \n    </Grid>  \n</Window>  \n```  \n  \n#### Using the sample  \n  \n1.  Open the DesignerRehosting.sln solution in Visual Studio 2010.  \n  \n2.  Press F5 to compile and run the application.  \n  \n3.  A WPF application starts with a rehosted designer.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\DesignerRehosting\\Basic`","nodes":[{"pos":[4,102],"embed":true,"restype":"x-metadata","content":"title: \"Designer ReHosting\"\nms.date: \"03/30/2017\"\nms.assetid: b676ad31-5f64-4d84-9a36-b4d7113a2f4d","nodes":[{"content":"Designer ReHosting","nodes":[{"pos":[0,18],"content":"Designer ReHosting","nodes":[{"content":"Designer ReHosting","pos":[0,18]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[109,127],"content":"Designer Rehosting","linkify":"Designer Rehosting","nodes":[{"content":"Designer Rehosting","pos":[0,18]}]},{"content":"Designer rehosting is a common scenario that refers to hosting the workflow design canvas inside of a custom application.","pos":[128,249]},{"content":"The hosting application most people are familiar with is Visual Studio, however there are a number of scenarios where showing the workflow designer in an application may be useful:","pos":[250,430]},{"content":"Monitoring applications (allowing an end user to visualize the process, as well as runtime data about the process such as the currently active state, aggregate execution time data, or other information about an instance of the workflow).","pos":[440,677]},{"content":"Applications that allow a user to customize the process with a limited set of activities.","pos":[687,776]},{"content":"To support these types of applications, the workflow designer ships inside the .NET Framework, and can be hosted inside a WPF application, or in a WinForms application with the appropriate WPF hosting code.","pos":[783,989]},{"content":"This sample demonstrates:","pos":[990,1015]},{"content":"Rehosting the WF designer.","pos":[1025,1051]},{"content":"Using the rehosted toolbox and property grid as well.","pos":[1061,1114]},{"pos":[1123,1145],"content":"Rehosting the designer","linkify":"Rehosting the designer","nodes":[{"content":"Rehosting the designer","pos":[0,22]}]},{"content":"This sample shows how to create the WPF layout to contain the designer, seen in the following grid layout (Toolbox code omitted for space concerns).","pos":[1149,1297]},{"content":"Note the naming of the borders which contain the designer and property grid.","pos":[1298,1374]},{"content":"Next the sample creates the designer, and associates its primary <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.WorkflowDesigner.View%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.WorkflowDesigner.PropertyInspectorView%2A&gt;</ph> with the appropriate container in the user interface.","pos":[1817,2082],"source":"Next the sample creates the designer, and associates its primary <xref:System.Activities.Presentation.WorkflowDesigner.View%2A> and <xref:System.Activities.Presentation.WorkflowDesigner.PropertyInspectorView%2A> with the appropriate container in the user interface."},{"content":"There are a few additional lines of code in the following example that merit some explanation.","pos":[2083,2177]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Core.Presentation.DesignerMetadata.Register%2A&gt;</ph> call is required to associate the default activity designers for the activities shipped with <ph id=\"ph2\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph>.","pos":[2178,2411],"source":" The <xref:System.Activities.Core.Presentation.DesignerMetadata.Register%2A> call is required to associate the default activity designers for the activities shipped with [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]."},{"content":"<ph id=\"ph1\">&lt;xref:System.Activities.Presentation.WorkflowDesigner.Load%2A&gt;</ph> is called to pass in the WF item to be edited.","pos":[2412,2521],"source":"<xref:System.Activities.Presentation.WorkflowDesigner.Load%2A> is called to pass in the WF item to be edited."},{"content":"Finally, the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.WorkflowDesigner.View%2A&gt;</ph> (primary canvas) and <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.WorkflowDesigner.PropertyInspectorView%2A&gt;</ph> (property grid) are placed onto the user interface surface.","pos":[2522,2758],"source":" Finally, the <xref:System.Activities.Presentation.WorkflowDesigner.View%2A> (primary canvas) and <xref:System.Activities.Presentation.WorkflowDesigner.PropertyInspectorView%2A> (property grid) are placed onto the user interface surface."},{"pos":[3157,3183],"content":"Using the rehosted toolbox","linkify":"Using the rehosted toolbox","nodes":[{"content":"Using the rehosted toolbox","pos":[0,26]}]},{"content":"This sample uses the rehosted toolbox control declaratively in XAML.","pos":[3187,3255]},{"content":"Note that in code, one can pass a type to the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Toolbox.ToolboxItemWrapper&gt;</ph> constructor.","pos":[3256,3379],"source":" Note that in code, one can pass a type to the <xref:System.Activities.Presentation.Toolbox.ToolboxItemWrapper> constructor."},{"pos":[6047,6063],"content":"Using the sample","linkify":"Using the sample","nodes":[{"content":"Using the sample","pos":[0,16]}]},{"content":"Open the DesignerRehosting.sln solution in Visual Studio 2010.","pos":[6073,6135]},{"content":"Press F5 to compile and run the application.","pos":[6145,6189]},{"content":"A WPF application starts with a rehosted designer.","pos":[6199,6249]},{"pos":[6257,6389],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[6443,6753],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[6754,6804]}]}