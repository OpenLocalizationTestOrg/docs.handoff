{"content":"---\ntitle: \"How to: Expose a Contract to SOAP and Web Clients\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: bb765a48-12f2-430d-a54d-6f0c20f2a23a\n---\n# How to: Expose a Contract to SOAP and Web Clients\n\nBy default, Windows Communication Foundation (WCF) makes endpoints available only to SOAP clients. In [How to: Create a Basic WCF Web HTTP Service](../../../../docs/framework/wcf/feature-details/how-to-create-a-basic-wcf-web-http-service.md), an endpoint is made available to non-SOAP clients. There may be times when you want to make the same contract available both ways, as a Web endpoint and as a SOAP endpoint. This topic shows an example of how to do this.\n\n## To define the service contract\n\n1. Define a service contract using an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.Web.WebInvokeAttribute> and the <xref:System.ServiceModel.Web.WebGetAttribute> attributes, as shown in the following code:\n\n    [!code-csharp[htSoapWeb#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#0)]\n    [!code-vb[htSoapWeb#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#0)]\n\n    > [!NOTE]\n    > By default <xref:System.ServiceModel.Web.WebInvokeAttribute> maps POST calls to the operation. You can, however, specify the method to map to the operation by specifying a \"method=\" parameter. <xref:System.ServiceModel.Web.WebGetAttribute> does not have a \"method=\" parameter and only maps GET calls to the service operation.\n\n2. Implement the service contract, as shown in the following code:\n\n     [!code-csharp[htSoapWeb#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#1)]\n     [!code-vb[htSoapWeb#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#1)]\n\n## To host the service\n\n1. Create a <xref:System.ServiceModel.ServiceHost> object, as shown in the following code:\n\n     [!code-csharp[htSoapWeb#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#2)]\n     [!code-vb[htSoapWeb#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#2)]\n\n2. Add a <xref:System.ServiceModel.Description.ServiceEndpoint> with <xref:System.ServiceModel.BasicHttpBinding> for the SOAP endpoint, as shown in the following code:\n\n     [!code-csharp[htSoapWeb#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#3)]\n     [!code-vb[htSoapWeb#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#3)]\n\n3. Add a <xref:System.ServiceModel.Description.ServiceEndpoint> with <xref:System.ServiceModel.WebHttpBinding> for the non-SOAP endpoint and add the <xref:System.ServiceModel.Description.WebHttpBehavior> to the endpoint, as shown in the following code:\n\n     [!code-csharp[htSoapWeb#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#4)]\n     [!code-vb[htSoapWeb#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#4)]\n\n4. Call `Open()` on a <xref:System.ServiceModel.ServiceHost> instance to open the service host, as shown in the following code:\n\n     [!code-csharp[htSoapWeb#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#5)]\n     [!code-vb[htSoapWeb#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#5)]\n\n## To call service operations mapped to GET in Internet Explorer\n\n1. Open Internet Explorer and type \"`http://localhost:8000/Web/EchoWithGet?s=Hello, world!`\" and press ENTER. The URL contains the base address of the service (`http://localhost:8000/`), the relative address of the endpoint (\"\"), the service operation to call (\"EchoWithGet\"), and a question mark followed by a list of named parameters separated by an ampersand (&).\n\n## To call service operations on the Web endpoint in code\n\n1. Create an instance of <xref:System.ServiceModel.Web.WebChannelFactory%601> within a `using` block, as shown in the following code.\n\n     [!code-csharp[htSoapWeb#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#6)]\n     [!code-vb[htSoapWeb#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#6)]\n\n> [!NOTE]\n> `Close()` is automatically called on the channel at the end of the `using` block.\n\n1. Create the channel and call the service, as shown in the following code.\n\n     [!code-csharp[htSoapWeb#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#8)]\n     [!code-vb[htSoapWeb#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#8)]\n\n## To call service operations on the SOAP endpoint\n\n1. Create an instance of <xref:System.ServiceModel.ChannelFactory> within a `using` block, as shown in the following code.\n\n    [!code-csharp[htSoapWeb#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#10)]\n    [!code-vb[htSoapWeb#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#10)]\n\n2. Create the channel and call the service, as shown in the following code.\n\n    [!code-csharp[htSoapWeb#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#11)]\n    [!code-vb[htSoapWeb#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#11)]\n\n## To close the service host\n\n1. Close the service host, as shown in the following code.\n\n    [!code-csharp[htSoapWeb#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#9)]\n    [!code-vb[htSoapWeb#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#9)]\n\n## Example\n\nThe following is the full code listing for this topic:\n\n[!code-csharp[htSoapWeb#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#13)]\n[!code-vb[htSoapWeb#13](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#13)]\n\n## Compiling the code\n\n When compiling Service.cs, reference System.ServiceModel.dll and System.ServiceModel.Web.dll.\n\n## See also\n\n- <xref:System.ServiceModel.WebHttpBinding>\n- <xref:System.ServiceModel.Web.WebGetAttribute>\n- <xref:System.ServiceModel.Web.WebInvokeAttribute>\n- <xref:System.ServiceModel.Web.WebServiceHost>\n- <xref:System.ServiceModel.ChannelFactory>\n- <xref:System.ServiceModel.Description.WebHttpBehavior>\n- [WCF Web HTTP Programming Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)","nodes":[{"pos":[4,167],"embed":true,"restype":"x-metadata","content":"title: \"How to: Expose a Contract to SOAP and Web Clients\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: bb765a48-12f2-430d-a54d-6f0c20f2a23a","nodes":[{"content":"How to: Expose a Contract to SOAP and Web Clients","nodes":[{"pos":[0,49],"content":"How to: Expose a Contract to SOAP and Web Clients","nodes":[{"content":"How to: Expose a Contract to SOAP and Web Clients","pos":[0,49]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[174,223],"content":"How to: Expose a Contract to SOAP and Web Clients","linkify":"How to: Expose a Contract to SOAP and Web Clients","nodes":[{"content":"How to: Expose a Contract to SOAP and Web Clients","pos":[0,49]}]},{"content":"By default, Windows Communication Foundation (WCF) makes endpoints available only to SOAP clients.","pos":[225,323]},{"content":"In <bpt id=\"p1\">[</bpt>How to: Create a Basic WCF Web HTTP Service<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-basic-wcf-web-http-service.md)</ept>, an endpoint is made available to non-SOAP clients.","pos":[324,518],"source":" In [How to: Create a Basic WCF Web HTTP Service](../../../../docs/framework/wcf/feature-details/how-to-create-a-basic-wcf-web-http-service.md), an endpoint is made available to non-SOAP clients."},{"content":"There may be times when you want to make the same contract available both ways, as a Web endpoint and as a SOAP endpoint.","pos":[519,640]},{"content":"This topic shows an example of how to do this.","pos":[641,687]},{"pos":[692,722],"content":"To define the service contract","linkify":"To define the service contract","nodes":[{"content":"To define the service contract","pos":[0,30]}]},{"pos":[727,989],"content":"Define a service contract using an interface marked with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceContractAttribute&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.ServiceModel.Web.WebInvokeAttribute&gt;</ph> and the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Web.WebGetAttribute&gt;</ph> attributes, as shown in the following code:","source":"Define a service contract using an interface marked with the <xref:System.ServiceModel.ServiceContractAttribute>, <xref:System.ServiceModel.Web.WebInvokeAttribute> and the <xref:System.ServiceModel.Web.WebGetAttribute> attributes, as shown in the following code:"},{"pos":[995,1213],"content":"[!code-csharp[htSoapWeb#0](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#0)]\n [!code-vb[htSoapWeb#0](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#0)]","leadings":["","   "],"nodes":[]},{"pos":[1221,1560],"content":"[!NOTE]\nBy default <xref:System.ServiceModel.Web.WebInvokeAttribute> maps POST calls to the operation. You can, however, specify the method to map to the operation by specifying a \"method=\" parameter. <xref:System.ServiceModel.Web.WebGetAttribute> does not have a \"method=\" parameter and only maps GET calls to the service operation.","leadings":["","    > "],"nodes":[{"content":"By default <xref:System.ServiceModel.Web.WebInvokeAttribute> maps POST calls to the operation. You can, however, specify the method to map to the operation by specifying a \"method=\" parameter. <xref:System.ServiceModel.Web.WebGetAttribute> does not have a \"method=\" parameter and only maps GET calls to the service operation.","pos":[8,333],"nodes":[{"content":"By default <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebInvokeAttribute&gt;</ph> maps POST calls to the operation.","pos":[0,94],"source":"By default <xref:System.ServiceModel.Web.WebInvokeAttribute> maps POST calls to the operation."},{"content":"You can, however, specify the method to map to the operation by specifying a \"method=\" parameter.","pos":[95,192]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebGetAttribute&gt;</ph> does not have a \"method=\" parameter and only maps GET calls to the service operation.","pos":[193,325],"source":"<xref:System.ServiceModel.Web.WebGetAttribute> does not have a \"method=\" parameter and only maps GET calls to the service operation."}]}]},{"content":"Implement the service contract, as shown in the following code:","pos":[1565,1628]},{"pos":[1635,1854],"content":"[!code-csharp[htSoapWeb#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#1)]\n  [!code-vb[htSoapWeb#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#1)]","leadings":["","   "],"nodes":[]},{"pos":[1859,1878],"content":"To host the service","linkify":"To host the service","nodes":[{"content":"To host the service","pos":[0,19]}]},{"pos":[1883,1970],"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> object, as shown in the following code:","source":"Create a <xref:System.ServiceModel.ServiceHost> object, as shown in the following code:"},{"pos":[1977,2196],"content":"[!code-csharp[htSoapWeb#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#2)]\n  [!code-vb[htSoapWeb#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#2)]","leadings":["","   "],"nodes":[]},{"pos":[2201,2365],"content":"Add a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceEndpoint&gt;</ph> with <ph id=\"ph2\">&lt;xref:System.ServiceModel.BasicHttpBinding&gt;</ph> for the SOAP endpoint, as shown in the following code:","source":"Add a <xref:System.ServiceModel.Description.ServiceEndpoint> with <xref:System.ServiceModel.BasicHttpBinding> for the SOAP endpoint, as shown in the following code:"},{"pos":[2372,2591],"content":"[!code-csharp[htSoapWeb#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#3)]\n  [!code-vb[htSoapWeb#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#3)]","leadings":["","   "],"nodes":[]},{"pos":[2596,2845],"content":"Add a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceEndpoint&gt;</ph> with <ph id=\"ph2\">&lt;xref:System.ServiceModel.WebHttpBinding&gt;</ph> for the non-SOAP endpoint and add the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.WebHttpBehavior&gt;</ph> to the endpoint, as shown in the following code:","source":"Add a <xref:System.ServiceModel.Description.ServiceEndpoint> with <xref:System.ServiceModel.WebHttpBinding> for the non-SOAP endpoint and add the <xref:System.ServiceModel.Description.WebHttpBehavior> to the endpoint, as shown in the following code:"},{"pos":[2852,3071],"content":"[!code-csharp[htSoapWeb#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#4)]\n  [!code-vb[htSoapWeb#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#4)]","leadings":["","   "],"nodes":[]},{"pos":[3076,3200],"content":"Call <ph id=\"ph1\">`Open()`</ph> on a <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> instance to open the service host, as shown in the following code:","source":"Call `Open()` on a <xref:System.ServiceModel.ServiceHost> instance to open the service host, as shown in the following code:"},{"pos":[3207,3426],"content":"[!code-csharp[htSoapWeb#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#5)]\n  [!code-vb[htSoapWeb#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#5)]","leadings":["","   "],"nodes":[]},{"pos":[3431,3492],"content":"To call service operations mapped to GET in Internet Explorer","linkify":"To call service operations mapped to GET in Internet Explorer","nodes":[{"content":"To call service operations mapped to GET in Internet Explorer","pos":[0,61]}]},{"content":"Open Internet Explorer and type \"<ph id=\"ph1\">`http://localhost:8000/Web/EchoWithGet?s=Hello, world!`</ph>\" and press ENTER.","pos":[3497,3603],"source":"Open Internet Explorer and type \"`http://localhost:8000/Web/EchoWithGet?s=Hello, world!`\" and press ENTER."},{"content":"The URL contains the base address of the service (<ph id=\"ph1\">`http://localhost:8000/`</ph>), the relative address of the endpoint (\"\"), the service operation to call (\"EchoWithGet\"), and a question mark followed by a list of named parameters separated by an ampersand (&amp;).","pos":[3604,3860],"source":" The URL contains the base address of the service (`http://localhost:8000/`), the relative address of the endpoint (\"\"), the service operation to call (\"EchoWithGet\"), and a question mark followed by a list of named parameters separated by an ampersand (&)."},{"pos":[3865,3919],"content":"To call service operations on the Web endpoint in code","linkify":"To call service operations on the Web endpoint in code","nodes":[{"content":"To call service operations on the Web endpoint in code","pos":[0,54]}]},{"pos":[3924,4054],"content":"Create an instance of <ph id=\"ph1\">&lt;xref:System.ServiceModel.Web.WebChannelFactory%601&gt;</ph> within a <ph id=\"ph2\">`using`</ph> block, as shown in the following code.","source":"Create an instance of <xref:System.ServiceModel.Web.WebChannelFactory%601> within a `using` block, as shown in the following code."},{"pos":[4061,4280],"content":"[!code-csharp[htSoapWeb#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#6)]\n  [!code-vb[htSoapWeb#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#6)]","leadings":["","   "],"nodes":[]},{"pos":[4284,4375],"content":"[!NOTE]\n`Close()` is automatically called on the channel at the end of the `using` block.","leadings":["","> "],"nodes":[{"content":"<ph id=\"ph1\">`Close()`</ph> is automatically called on the channel at the end of the <ph id=\"ph2\">`using`</ph> block.","pos":[8,89],"source":"`Close()` is automatically called on the channel at the end of the `using` block."}]},{"content":"Create the channel and call the service, as shown in the following code.","pos":[4380,4452]},{"pos":[4459,4678],"content":"[!code-csharp[htSoapWeb#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#8)]\n  [!code-vb[htSoapWeb#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#8)]","leadings":["","   "],"nodes":[]},{"pos":[4683,4730],"content":"To call service operations on the SOAP endpoint","linkify":"To call service operations on the SOAP endpoint","nodes":[{"content":"To call service operations on the SOAP endpoint","pos":[0,47]}]},{"pos":[4735,4854],"content":"Create an instance of <ph id=\"ph1\">&lt;xref:System.ServiceModel.ChannelFactory&gt;</ph> within a <ph id=\"ph2\">`using`</ph> block, as shown in the following code.","source":"Create an instance of <xref:System.ServiceModel.ChannelFactory> within a `using` block, as shown in the following code."},{"pos":[4860,5082],"content":"[!code-csharp[htSoapWeb#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#10)]\n [!code-vb[htSoapWeb#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#10)]","leadings":["","   "],"nodes":[]},{"content":"Create the channel and call the service, as shown in the following code.","pos":[5087,5159]},{"pos":[5165,5387],"content":"[!code-csharp[htSoapWeb#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#11)]\n [!code-vb[htSoapWeb#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#11)]","leadings":["","   "],"nodes":[]},{"pos":[5392,5417],"content":"To close the service host","linkify":"To close the service host","nodes":[{"content":"To close the service host","pos":[0,25]}]},{"content":"Close the service host, as shown in the following code.","pos":[5422,5477]},{"pos":[5483,5701],"content":"[!code-csharp[htSoapWeb#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/htsoapweb/cs/program.cs#9)]\n [!code-vb[htSoapWeb#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/htsoapweb/vb/program.vb#9)]","leadings":["","   "],"nodes":[]},{"pos":[5706,5713],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following is the full code listing for this topic:","pos":[5715,5769]},{"pos":[5994,6012],"content":"Compiling the code","linkify":"Compiling the code","nodes":[{"content":"Compiling the code","pos":[0,18]}]},{"content":"When compiling Service.cs, reference System.ServiceModel.dll and System.ServiceModel.Web.dll.","pos":[6015,6108]},{"pos":[6113,6121],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6419,6533],"content":"<bpt id=\"p1\">[</bpt>WCF Web HTTP Programming Model<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)</ept>","source":"[WCF Web HTTP Programming Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)"}]}