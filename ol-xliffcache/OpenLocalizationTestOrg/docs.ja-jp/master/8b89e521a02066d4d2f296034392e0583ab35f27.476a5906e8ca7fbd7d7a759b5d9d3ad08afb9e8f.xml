{"content":"---\ntitle: \"Optimizing Performance: Controls | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-wpf\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"controls [WPF], improving performance\"\n  - \"container recycling\"\n  - \"user interface virtualization\"\nms.assetid: 45a31c43-ea8a-4546-96c8-0631b9934179\ncaps.latest.revision: 22\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# Optimizing Performance: Controls\n[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] includes many of the common user-interface (UI) components that are used in most Windows applications. This topic contains techniques for improving the performance of your UI.  \n  \n \n  \n<a name=\"Displaying\"></a>   \n## Displaying Large Data Sets  \n WPF controls such as the <xref:System.Windows.Controls.ListView> and <xref:System.Windows.Controls.ComboBox> are used to display lists of items in an application. If the list to display is large, the application's performance can be affected. This is because the standard layout system creates a layout container for each item associated with the list control, and computes its layout size and position. Typically, you do not have to display all the items at the same time; instead you display a subset, and the user scrolls through the list. In this case, it makes sense to use UI *virtualization*, which means the item container generation and associated layout computation for an item is deferred until the item is visible.  \n  \n UI Virtualization is an important aspect of list controls. UI virtualization should not be confused with data virtualization. UI virtualization stores only visible items in memory but in a data-binding scenario stores the entire data structure in memory. In contrast, data virtualization stores only the data items that are visible on the screen in memory.  \n  \n By default, UI virtualization is enabled for the <xref:System.Windows.Controls.ListView> and <xref:System.Windows.Controls.ListBox> controls when their list items are bound to data. <xref:System.Windows.Controls.TreeView> virtualization can be enabled by setting the <!--zz <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A?displayProperty=fullName> --> `IsVirtualizing` attached property to `true`. If you want to enable UI virtualization for custom controls that derive from <xref:System.Windows.Controls.ItemsControl> or existing item controls that use the <xref:System.Windows.Controls.StackPanel> class, such as <xref:System.Windows.Controls.ComboBox>, you can set the <xref:System.Windows.Controls.ItemsControl.ItemsPanel%2A> to <xref:System.Windows.Controls.VirtualizingStackPanel> and set <xref:System.Windows.Controls.VirtualizingPanel.IsVirtualizing%2A> to `true`. Unfortunately, you can disable UI virtualization for these controls without realizing it. The following is a list of conditions that disable UI virtualization.  \n  \n-   Item containers are added directly to the <xref:System.Windows.Controls.ItemsControl>. For example, if an application explicitly adds <xref:System.Windows.Controls.ListBoxItem> objects to a <xref:System.Windows.Controls.ListBox>, the <xref:System.Windows.Controls.ListBox> does not virtualize the <xref:System.Windows.Controls.ListBoxItem> objects.  \n  \n-   Item containers in the <xref:System.Windows.Controls.ItemsControl> are of different types. For example, a <xref:System.Windows.Controls.Menu> that uses <xref:System.Windows.Controls.Separator> objects cannot implement item recycling because the <xref:System.Windows.Controls.Menu> contains objects of type <xref:System.Windows.Controls.Separator> and <xref:System.Windows.Controls.MenuItem>.  \n  \n-   Setting <xref:System.Windows.Controls.ScrollViewer.CanContentScroll%2A> to `false`.  \n  \n-   Setting <!--zz <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A>-->  `IsVirtualizing`  to `false`.  \n  \n An important consideration when you virtualize item containers is whether you have additional state information associated with an item container that belongs with the item. In this case, you must save the additional state. For example, you might have an item contained in an <xref:System.Windows.Controls.Expander> control and the <xref:System.Windows.Controls.Expander.IsExpanded%2A> state is bound to the item's container, and not to the item itself. When the container is reused for a new item, the current value of <xref:System.Windows.Controls.Expander.IsExpanded%2A> is used for the new item. In addition, the old item loses the correct <xref:System.Windows.Controls.Expander.IsExpanded%2A> value.  \n  \n Currently, no WPF controls offer built-in support for data virtualization.  \n  \n<a name=\"Container\"></a>   \n## Container Recycling  \n An optimization to UI virtualization added in the .NET Framework 3.5 SP1 for controls that inherit from <xref:System.Windows.Controls.ItemsControl> is *container recycling,* which can also improve scrolling performance.  When an <xref:System.Windows.Controls.ItemsControl> that uses UI virtualization is populated, it creates an item container for each item that scrolls into view and destroys the item container for each item that scrolls out of view. *Container recycling* enables the control to reuse the existing item containers for different data items, so that item containers are not constantly created and destroyed as the user scrolls the <xref:System.Windows.Controls.ItemsControl>. You can choose to enable item recycling by setting the <xref:System.Windows.Controls.VirtualizingPanel.VirtualizationMode%2A> attached property to <xref:System.Windows.Controls.VirtualizationMode>.  \n  \n Any <xref:System.Windows.Controls.ItemsControl> that supports virtualization can use container recycling.  For an example of how to enable container recycling on a <xref:System.Windows.Controls.ListBox>, see [Improve the Scrolling Performance of a ListBox](../../../../docs/framework/wpf/controls/how-to-improve-the-scrolling-performance-of-a-listbox.md).  \n  \n<a name=\"Supporting\"></a>   \n## Supporting Bidirectional Virtualization  \n <xref:System.Windows.Controls.VirtualizingStackPanel> offers built-in support for UI virtualization in one direction, either horizontally or vertically. If you want to use bidirectional virtualization for your controls, you must implement a custom panel that extends the <xref:System.Windows.Controls.VirtualizingStackPanel> class. The <xref:System.Windows.Controls.VirtualizingStackPanel> class exposes virtual methods such as <xref:System.Windows.Controls.VirtualizingStackPanel.OnViewportSizeChanged%2A>, <xref:System.Windows.Controls.VirtualizingStackPanel.LineUp%2A>, <xref:System.Windows.Controls.VirtualizingStackPanel.PageUp%2A>, and <xref:System.Windows.Controls.VirtualizingStackPanel.MouseWheelUp%2A>.These virtual methods enable you to detect a change in the visible part of a list and handle it accordingly.  \n  \n<a name=\"Optimizing\"></a>   \n## Optimizing Templates  \n The visual tree contains all the visual elements in an application.  In addition to the objects directly created, it also contains objects due to template expansion.  For example, when you create a <xref:System.Windows.Controls.Button>, you also get <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> and <xref:System.Windows.Controls.ContentPresenter> objects in the visual tree.  If you haven't optimized your control templates, you may be creating a lot of extra unnecessary objects in the visual tree.   For more information on the visual tree, see [WPF Graphics Rendering Overview](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md).  \n  \n<a name=\"Deferred\"></a>   \n## Deferred Scrolling  \n By default, when the user drags the thumb on a scrollbar, the content view continuously updates.  If scrolling is slow in your control, consider using deferred scrolling.  In deferred scrolling, the content is updated only when the user releases the thumb.  \n  \n To implement deferred scrolling, set the <xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> property to `true`.  <xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> is an attached property and can be set on <xref:System.Windows.Controls.ScrollViewer> and any control that has a <xref:System.Windows.Controls.ScrollViewer> in its control template.  \n  \n<a name=\"Controls\"></a>   \n## Controls That Implement Performance Features  \n The following table lists the common controls for displaying data and their support of performance features.  See the previous sections for information on how to enable these features.  \n  \n|Control|Virtualization|Container recycling|Deferred scrolling|  \n|-------------|--------------------|-------------------------|------------------------|  \n|<xref:System.Windows.Controls.ComboBox>|Can be enabled|Can be enabled|Can be enabled|  \n|<xref:System.Windows.Controls.ContextMenu>|Can be enabled|Can be enabled|Can be enabled|  \n|<xref:System.Windows.Controls.DocumentViewer>|Not available|Not available|Can be enabled|  \n|<xref:System.Windows.Controls.ListBox>|Default|Can be enabled|Can be enabled|  \n|<xref:System.Windows.Controls.ListView>|Default|Can be enabled|Can be enabled|  \n|<xref:System.Windows.Controls.TreeView>|Can be enabled|Can be enabled|Can be enabled|  \n|<xref:System.Windows.Controls.ToolBar>|Not available|Not available|Can be enabled|  \n  \n> [!NOTE]\n>  For an example of how to enable virtualization and container recycling on a <xref:System.Windows.Controls.TreeView>, see [Improve the Performance of a TreeView](../../../../docs/framework/wpf/controls/how-to-improve-the-performance-of-a-treeview.md).  \n  \n## See Also  \n [Layout](../../../../docs/framework/wpf/advanced/layout.md)   \n [Layout and Design](../../../../docs/framework/wpf/advanced/optimizing-performance-layout-and-design.md)   \n [Data Binding](../../../../docs/framework/wpf/advanced/optimizing-performance-data-binding.md)   \n [Controls](../../../../docs/framework/wpf/controls/index.md)   \n [Styling and Templating](../../../../docs/framework/wpf/controls/styling-and-templating.md)   \n [Walkthrough: Caching Application Data in a WPF Application](../../../../docs/framework/wpf/advanced/walkthrough-caching-application-data-in-a-wpf-application.md)","nodes":[{"pos":[4,490],"nodes":[{"content":"Optimizing Performance: Controls | Microsoft Docs","nodes":[{"pos":[0,49],"content":"Optimizing Performance: Controls | Microsoft Docs","nodes":[{"content":"Optimizing Performance: Controls | Microsoft Docs","pos":[0,49]}]}],"pos":[6,58],"yaml":true}],"content":"title: \"Optimizing Performance: Controls | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-wpf\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"controls [WPF], improving performance\"\n  - \"container recycling\"\n  - \"user interface virtualization\"\nms.assetid: 45a31c43-ea8a-4546-96c8-0631b9934179\ncaps.latest.revision: 22\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"","yamlblock":true},{"pos":[497,529],"content":"Optimizing Performance: Controls","linkify":"Optimizing Performance: Controls","nodes":[{"content":"Optimizing Performance: Controls","pos":[0,32]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]</ph> includes many of the common user-interface (UI) components that are used in most Windows applications.","pos":[530,712],"source":"[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] includes many of the common user-interface (UI) components that are used in most Windows applications."},{"content":"This topic contains techniques for improving the performance of your UI.","pos":[713,785]},{"pos":[828,854],"content":"Displaying Large Data Sets","linkify":"Displaying Large Data Sets","nodes":[{"content":"Displaying Large Data Sets","pos":[0,26]}]},{"content":"WPF controls such as the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListView&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph> are used to display lists of items in an application.","pos":[858,1020],"source":"WPF controls such as the <xref:System.Windows.Controls.ListView> and <xref:System.Windows.Controls.ComboBox> are used to display lists of items in an application."},{"content":"If the list to display is large, the application's performance can be affected.","pos":[1021,1100]},{"content":"This is because the standard layout system creates a layout container for each item associated with the list control, and computes its layout size and position.","pos":[1101,1261]},{"content":"Typically, you do not have to display all the items at the same time; instead you display a subset, and the user scrolls through the list.","pos":[1262,1400]},{"content":"In this case, it makes sense to use UI <bpt id=\"p1\">*</bpt>virtualization<ept id=\"p1\">*</ept>, which means the item container generation and associated layout computation for an item is deferred until the item is visible.","pos":[1401,1584],"source":" In this case, it makes sense to use UI *virtualization*, which means the item container generation and associated layout computation for an item is deferred until the item is visible."},{"content":"UI Virtualization is an important aspect of list controls.","pos":[1591,1649]},{"content":"UI virtualization should not be confused with data virtualization.","pos":[1650,1716]},{"content":"UI virtualization stores only visible items in memory but in a data-binding scenario stores the entire data structure in memory.","pos":[1717,1845]},{"content":"In contrast, data virtualization stores only the data items that are visible on the screen in memory.","pos":[1846,1947]},{"content":"By default, UI virtualization is enabled for the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListView&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> controls when their list items are bound to data.","pos":[1954,2135],"source":"By default, UI virtualization is enabled for the <xref:System.Windows.Controls.ListView> and <xref:System.Windows.Controls.ListBox> controls when their list items are bound to data."},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Controls.TreeView&gt;</ph> virtualization can be enabled by setting the <ph id=\"ph2\">&lt;!--zz &lt;xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A?displayProperty=fullName&gt; --&gt;</ph> <ph id=\"ph3\">`IsVirtualizing`</ph> attached property to <ph id=\"ph4\">`true`</ph>.","pos":[2136,2374],"source":" <xref:System.Windows.Controls.TreeView> virtualization can be enabled by setting the <!--zz <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A?displayProperty=fullName> --> `IsVirtualizing` attached property to `true`."},{"content":"If you want to enable UI virtualization for custom controls that derive from <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> or existing item controls that use the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.StackPanel&gt;</ph> class, such as <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ComboBox&gt;</ph>, you can set the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ItemsControl.ItemsPanel%2A&gt;</ph> to <ph id=\"ph5\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel&gt;</ph> and set <ph id=\"ph6\">&lt;xref:System.Windows.Controls.VirtualizingPanel.IsVirtualizing%2A&gt;</ph> to <ph id=\"ph7\">`true`</ph>.","pos":[2375,2849],"source":" If you want to enable UI virtualization for custom controls that derive from <xref:System.Windows.Controls.ItemsControl> or existing item controls that use the <xref:System.Windows.Controls.StackPanel> class, such as <xref:System.Windows.Controls.ComboBox>, you can set the <xref:System.Windows.Controls.ItemsControl.ItemsPanel%2A> to <xref:System.Windows.Controls.VirtualizingStackPanel> and set <xref:System.Windows.Controls.VirtualizingPanel.IsVirtualizing%2A> to `true`."},{"content":"Unfortunately, you can disable UI virtualization for these controls without realizing it.","pos":[2850,2939]},{"content":"The following is a list of conditions that disable UI virtualization.","pos":[2940,3009]},{"content":"Item containers are added directly to the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph>.","pos":[3019,3105],"source":"Item containers are added directly to the <xref:System.Windows.Controls.ItemsControl>."},{"content":"For example, if an application explicitly adds <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBoxItem&gt;</ph> objects to a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph>, the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> does not virtualize the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ListBoxItem&gt;</ph> objects.","pos":[3106,3367],"source":" For example, if an application explicitly adds <xref:System.Windows.Controls.ListBoxItem> objects to a <xref:System.Windows.Controls.ListBox>, the <xref:System.Windows.Controls.ListBox> does not virtualize the <xref:System.Windows.Controls.ListBoxItem> objects."},{"content":"Item containers in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> are of different types.","pos":[3377,3467],"source":"Item containers in the <xref:System.Windows.Controls.ItemsControl> are of different types."},{"content":"For example, a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Menu&gt;</ph> that uses <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Separator&gt;</ph> objects cannot implement item recycling because the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Menu&gt;</ph> contains objects of type <ph id=\"ph4\">&lt;xref:System.Windows.Controls.Separator&gt;</ph> and <ph id=\"ph5\">&lt;xref:System.Windows.Controls.MenuItem&gt;</ph>.","pos":[3468,3768],"source":" For example, a <xref:System.Windows.Controls.Menu> that uses <xref:System.Windows.Controls.Separator> objects cannot implement item recycling because the <xref:System.Windows.Controls.Menu> contains objects of type <xref:System.Windows.Controls.Separator> and <xref:System.Windows.Controls.MenuItem>."},{"pos":[3778,3861],"content":"Setting <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ScrollViewer.CanContentScroll%2A&gt;</ph> to <ph id=\"ph2\">`false`</ph>.","source":"Setting <xref:System.Windows.Controls.ScrollViewer.CanContentScroll%2A> to `false`."},{"pos":[3871,3991],"content":"Setting <ph id=\"ph1\">&lt;!--zz &lt;xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A&gt;--&gt;</ph>  <ph id=\"ph2\">`IsVirtualizing`</ph>  to <ph id=\"ph3\">`false`</ph>.","source":"Setting <!--zz <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A>-->  `IsVirtualizing`  to `false`."},{"content":"An important consideration when you virtualize item containers is whether you have additional state information associated with an item container that belongs with the item.","pos":[3998,4171]},{"content":"In this case, you must save the additional state.","pos":[4172,4221]},{"content":"For example, you might have an item contained in an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Expander&gt;</ph> control and the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Expander.IsExpanded%2A&gt;</ph> state is bound to the item's container, and not to the item itself.","pos":[4222,4451],"source":" For example, you might have an item contained in an <xref:System.Windows.Controls.Expander> control and the <xref:System.Windows.Controls.Expander.IsExpanded%2A> state is bound to the item's container, and not to the item itself."},{"content":"When the container is reused for a new item, the current value of <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Expander.IsExpanded%2A&gt;</ph> is used for the new item.","pos":[4452,4597],"source":" When the container is reused for a new item, the current value of <xref:System.Windows.Controls.Expander.IsExpanded%2A> is used for the new item."},{"content":"In addition, the old item loses the correct <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Expander.IsExpanded%2A&gt;</ph> value.","pos":[4598,4702],"source":" In addition, the old item loses the correct <xref:System.Windows.Controls.Expander.IsExpanded%2A> value."},{"content":"Currently, no WPF controls offer built-in support for data virtualization.","pos":[4709,4783]},{"pos":[4820,4839],"content":"Container Recycling","linkify":"Container Recycling","nodes":[{"content":"Container Recycling","pos":[0,19]}]},{"content":"An optimization to UI virtualization added in the .NET Framework 3.5 SP1 for controls that inherit from <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> is <bpt id=\"p1\">*</bpt>container recycling,<ept id=\"p1\">*</ept> which can also improve scrolling performance.","pos":[4843,5062],"source":"An optimization to UI virtualization added in the .NET Framework 3.5 SP1 for controls that inherit from <xref:System.Windows.Controls.ItemsControl> is *container recycling,* which can also improve scrolling performance."},{"content":"When an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> that uses UI virtualization is populated, it creates an item container for each item that scrolls into view and destroys the item container for each item that scrolls out of view.","pos":[5064,5295],"source":"  When an <xref:System.Windows.Controls.ItemsControl> that uses UI virtualization is populated, it creates an item container for each item that scrolls into view and destroys the item container for each item that scrolls out of view."},{"content":"<bpt id=\"p1\">*</bpt>Container recycling<ept id=\"p1\">*</ept> enables the control to reuse the existing item containers for different data items, so that item containers are not constantly created and destroyed as the user scrolls the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph>.","pos":[5296,5535],"source":"*Container recycling* enables the control to reuse the existing item containers for different data items, so that item containers are not constantly created and destroyed as the user scrolls the <xref:System.Windows.Controls.ItemsControl>."},{"content":"You can choose to enable item recycling by setting the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.VirtualizingPanel.VirtualizationMode%2A&gt;</ph> attached property to <ph id=\"ph2\">&lt;xref:System.Windows.Controls.VirtualizationMode&gt;</ph>.","pos":[5536,5733],"source":" You can choose to enable item recycling by setting the <xref:System.Windows.Controls.VirtualizingPanel.VirtualizationMode%2A> attached property to <xref:System.Windows.Controls.VirtualizationMode>."},{"content":"Any <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> that supports virtualization can use container recycling.","pos":[5740,5845],"source":"Any <xref:System.Windows.Controls.ItemsControl> that supports virtualization can use container recycling."},{"content":"For an example of how to enable container recycling on a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph>, see <bpt id=\"p1\">[</bpt>Improve the Scrolling Performance of a ListBox<ept id=\"p1\">](../../../../docs/framework/wpf/controls/how-to-improve-the-scrolling-performance-of-a-listbox.md)</ept>.","pos":[5847,6095],"source":"  For an example of how to enable container recycling on a <xref:System.Windows.Controls.ListBox>, see [Improve the Scrolling Performance of a ListBox](../../../../docs/framework/wpf/controls/how-to-improve-the-scrolling-performance-of-a-listbox.md)."},{"pos":[6133,6172],"content":"Supporting Bidirectional Virtualization","linkify":"Supporting Bidirectional Virtualization","nodes":[{"content":"Supporting Bidirectional Virtualization","pos":[0,39]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel&gt;</ph> offers built-in support for UI virtualization in one direction, either horizontally or vertically.","pos":[6176,6328],"source":"<xref:System.Windows.Controls.VirtualizingStackPanel> offers built-in support for UI virtualization in one direction, either horizontally or vertically."},{"content":"If you want to use bidirectional virtualization for your controls, you must implement a custom panel that extends the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel&gt;</ph> class.","pos":[6329,6507],"source":" If you want to use bidirectional virtualization for your controls, you must implement a custom panel that extends the <xref:System.Windows.Controls.VirtualizingStackPanel> class."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel&gt;</ph> class exposes virtual methods such as <ph id=\"ph2\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel.OnViewportSizeChanged%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel.LineUp%2A&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel.PageUp%2A&gt;</ph>, and <ph id=\"ph5\">&lt;xref:System.Windows.Controls.VirtualizingStackPanel.MouseWheelUp%2A&gt;</ph>.These virtual methods enable you to detect a change in the visible part of a list and handle it accordingly.","pos":[6508,6996],"source":" The <xref:System.Windows.Controls.VirtualizingStackPanel> class exposes virtual methods such as <xref:System.Windows.Controls.VirtualizingStackPanel.OnViewportSizeChanged%2A>, <xref:System.Windows.Controls.VirtualizingStackPanel.LineUp%2A>, <xref:System.Windows.Controls.VirtualizingStackPanel.PageUp%2A>, and <xref:System.Windows.Controls.VirtualizingStackPanel.MouseWheelUp%2A>.These virtual methods enable you to detect a change in the visible part of a list and handle it accordingly."},{"pos":[7034,7054],"content":"Optimizing Templates","linkify":"Optimizing Templates","nodes":[{"content":"Optimizing Templates","pos":[0,20]}]},{"content":"The visual tree contains all the visual elements in an application.","pos":[7058,7125]},{"content":"In addition to the objects directly created, it also contains objects due to template expansion.","pos":[7127,7223]},{"content":"For example, when you create a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph>, you also get <ph id=\"ph2\">&lt;xref:Microsoft.Windows.Themes.ClassicBorderDecorator&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ContentPresenter&gt;</ph> objects in the visual tree.","pos":[7225,7442],"source":"  For example, when you create a <xref:System.Windows.Controls.Button>, you also get <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> and <xref:System.Windows.Controls.ContentPresenter> objects in the visual tree."},{"content":"If you haven't optimized your control templates, you may be creating a lot of extra unnecessary objects in the visual tree.","pos":[7444,7567]},{"content":"For more information on the visual tree, see <bpt id=\"p1\">[</bpt>WPF Graphics Rendering Overview<ept id=\"p1\">](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)</ept>.","pos":[7570,7736],"source":"   For more information on the visual tree, see [WPF Graphics Rendering Overview](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)."},{"pos":[7772,7790],"content":"Deferred Scrolling","linkify":"Deferred Scrolling","nodes":[{"content":"Deferred Scrolling","pos":[0,18]}]},{"content":"By default, when the user drags the thumb on a scrollbar, the content view continuously updates.","pos":[7794,7890]},{"content":"If scrolling is slow in your control, consider using deferred scrolling.","pos":[7892,7964]},{"content":"In deferred scrolling, the content is updated only when the user releases the thumb.","pos":[7966,8050]},{"content":"To implement deferred scrolling, set the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A&gt;</ph> property to <ph id=\"ph2\">`true`</ph>.","pos":[8057,8191],"source":"To implement deferred scrolling, set the <xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> property to `true`."},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A&gt;</ph> is an attached property and can be set on <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ScrollViewer&gt;</ph> and any control that has a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ScrollViewer&gt;</ph> in its control template.","pos":[8193,8448],"source":"  <xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> is an attached property and can be set on <xref:System.Windows.Controls.ScrollViewer> and any control that has a <xref:System.Windows.Controls.ScrollViewer> in its control template."},{"pos":[8484,8528],"content":"Controls That Implement Performance Features","linkify":"Controls That Implement Performance Features","nodes":[{"content":"Controls That Implement Performance Features","pos":[0,44]}]},{"content":"The following table lists the common controls for displaying data and their support of performance features.","pos":[8532,8640]},{"content":"See the previous sections for information on how to enable these features.","pos":[8642,8716]},{"content":"Control","pos":[8723,8730]},{"content":"Virtualization","pos":[8731,8745]},{"content":"Container recycling","pos":[8746,8765]},{"content":"Deferred scrolling","pos":[8766,8784]},{"content":"Can be enabled","pos":[8919,8933]},{"content":"Can be enabled","pos":[8934,8948]},{"content":"Can be enabled","pos":[8949,8963]},{"content":"Can be enabled","pos":[9011,9025]},{"content":"Can be enabled","pos":[9026,9040]},{"content":"Can be enabled","pos":[9041,9055]},{"content":"Not available","pos":[9106,9119]},{"content":"Not available","pos":[9120,9133]},{"content":"Can be enabled","pos":[9134,9148]},{"content":"Default","pos":[9192,9199]},{"content":"Can be enabled","pos":[9200,9214]},{"content":"Can be enabled","pos":[9215,9229]},{"content":"Default","pos":[9274,9281]},{"content":"Can be enabled","pos":[9282,9296]},{"content":"Can be enabled","pos":[9297,9311]},{"content":"Can be enabled","pos":[9356,9370]},{"content":"Can be enabled","pos":[9371,9385]},{"content":"Can be enabled","pos":[9386,9400]},{"content":"Not available","pos":[9444,9457]},{"content":"Not available","pos":[9458,9471]},{"content":"Can be enabled","pos":[9472,9486]},{"pos":[9495,9756],"content":"[!NOTE]\n For an example of how to enable virtualization and container recycling on a <xref:System.Windows.Controls.TreeView>, see [Improve the Performance of a TreeView](../../../../docs/framework/wpf/controls/how-to-improve-the-performance-of-a-treeview.md).","leadings":["","> "],"nodes":[{"content":"For an example of how to enable virtualization and container recycling on a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.TreeView&gt;</ph>, see <bpt id=\"p1\">[</bpt>Improve the Performance of a TreeView<ept id=\"p1\">](../../../../docs/framework/wpf/controls/how-to-improve-the-performance-of-a-treeview.md)</ept>.","pos":[9,259],"source":"For an example of how to enable virtualization and container recycling on a <xref:System.Windows.Controls.TreeView>, see [Improve the Performance of a TreeView](../../../../docs/framework/wpf/controls/how-to-improve-the-performance-of-a-treeview.md)."}]},{"pos":[9765,9773],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Layout<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/layout.md)</ept><ph id=\"ph1\"> </ph>","pos":[9777,9837],"source":"[Layout](../../../../docs/framework/wpf/advanced/layout.md) "},{"content":"<bpt id=\"p1\">[</bpt>Layout and Design<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/optimizing-performance-layout-and-design.md)</ept><ph id=\"ph1\"> </ph>","pos":[9841,9946],"source":"[Layout and Design](../../../../docs/framework/wpf/advanced/optimizing-performance-layout-and-design.md) "},{"content":"<bpt id=\"p1\">[</bpt>Data Binding<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/optimizing-performance-data-binding.md)</ept><ph id=\"ph1\"> </ph>","pos":[9950,10045],"source":"[Data Binding](../../../../docs/framework/wpf/advanced/optimizing-performance-data-binding.md) "},{"content":"<bpt id=\"p1\">[</bpt>Controls<ept id=\"p1\">](../../../../docs/framework/wpf/controls/index.md)</ept><ph id=\"ph1\"> </ph>","pos":[10049,10110],"source":"[Controls](../../../../docs/framework/wpf/controls/index.md) "},{"content":"<bpt id=\"p1\">[</bpt>Styling and Templating<ept id=\"p1\">](../../../../docs/framework/wpf/controls/styling-and-templating.md)</ept><ph id=\"ph1\"> </ph>","pos":[10114,10206],"source":"[Styling and Templating](../../../../docs/framework/wpf/controls/styling-and-templating.md) "},{"content":"<bpt id=\"p1\">[</bpt>Walkthrough: Caching Application Data in a WPF Application<ept id=\"p1\">](../../../../docs/framework/wpf/advanced/walkthrough-caching-application-data-in-a-wpf-application.md)</ept>","pos":[10210,10372],"source":"[Walkthrough: Caching Application Data in a WPF Application](../../../../docs/framework/wpf/advanced/walkthrough-caching-application-data-in-a-wpf-application.md)"}]}