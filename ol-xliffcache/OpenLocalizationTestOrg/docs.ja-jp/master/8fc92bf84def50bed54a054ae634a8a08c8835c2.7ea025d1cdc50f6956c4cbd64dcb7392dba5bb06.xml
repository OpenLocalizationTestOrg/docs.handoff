{"content":"---\ntitle: \"Managing the State of a Graphics Object\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"graphics [Windows Forms], managing state\"\n  - \"graphics [Windows Forms], clipping\"\nms.assetid: 6207cad1-7a34-4bd6-bfc1-db823ca7a73e\n---\n# Managing the State of a Graphics Object\nThe <xref:System.Drawing.Graphics> class is at the heart of [!INCLUDE[ndptecgdiplus](../../../../includes/ndptecgdiplus-md.md)]. To draw anything, you obtain a <xref:System.Drawing.Graphics> object, set its properties, and call its methods <xref:System.Drawing.Graphics.DrawLine%2A>, <xref:System.Drawing.Graphics.DrawImage%2A>, <xref:System.Drawing.Graphics.DrawString%2A>, and the like).  \n  \n The following example calls the <xref:System.Drawing.Graphics.DrawRectangle%2A> method of a <xref:System.Drawing.Graphics> object. The first argument passed to the <xref:System.Drawing.Graphics.DrawRectangle%2A> method is a <xref:System.Drawing.Pen> object.  \n  \n```vb  \nDim graphics As Graphics = e.Graphics  \nDim pen As New Pen(Color.Blue) ' Opaque blue  \ngraphics.DrawRectangle(pen, 10, 10, 200, 100)  \n```  \n  \n```csharp  \nGraphics graphics = e.Graphics;  \nPen pen = new Pen(Color.Blue);  // Opaque blue  \ngraphics.DrawRectangle(pen, 10, 10, 200, 100);  \n```  \n  \n## Graphics State  \n A <xref:System.Drawing.Graphics> object does more than provide drawing methods, such as <xref:System.Drawing.Graphics.DrawLine%2A> and <xref:System.Drawing.Graphics.DrawRectangle%2A>. A <xref:System.Drawing.Graphics> object also maintains graphics state, which can be divided into the following categories:  \n  \n-   Quality settings  \n  \n-   Transformations  \n  \n-   Clipping region  \n  \n### Quality Settings  \n A <xref:System.Drawing.Graphics> object has several properties that influence the quality of the items that are drawn. For example, you can set the <xref:System.Drawing.Graphics.TextRenderingHint%2A> property to specify the type of antialiasing (if any) applied to text. Other properties that influence quality are <xref:System.Drawing.Graphics.SmoothingMode%2A>, <xref:System.Drawing.Graphics.CompositingMode%2A>, <xref:System.Drawing.Graphics.CompositingQuality%2A>, and <xref:System.Drawing.Graphics.InterpolationMode%2A>.  \n  \n The following example draws two ellipses, one with the smoothing mode set to <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias> and one with the smoothing mode set to <xref:System.Drawing.Drawing2D.SmoothingMode.HighSpeed>:  \n  \n```vb  \nDim graphics As Graphics = e.Graphics  \nDim pen As New Pen(Color.Blue)  \n  \ngraphics.SmoothingMode = SmoothingMode.AntiAlias  \ngraphics.DrawEllipse(pen, 0, 0, 200, 100)  \ngraphics.SmoothingMode = SmoothingMode.HighSpeed  \ngraphics.DrawEllipse(pen, 0, 150, 200, 100)  \n```  \n  \n```csharp  \nGraphics graphics = e.Graphics;  \nPen pen = new Pen(Color.Blue);  \n  \ngraphics.SmoothingMode = SmoothingMode.AntiAlias;  \ngraphics.DrawEllipse(pen, 0, 0, 200, 100);  \ngraphics.SmoothingMode = SmoothingMode.HighSpeed;  \ngraphics.DrawEllipse(pen, 0, 150, 200, 100);  \n```  \n  \n### Transformations  \n A <xref:System.Drawing.Graphics> object maintains two transformations (world and page) that are applied to all items drawn by that <xref:System.Drawing.Graphics> object. Any affine transformation can be stored in the world transformation. Affine transformations include scaling, rotating, reflecting, skewing, and translating. The page transformation can be used for scaling and for changing units (for example, pixels to inches). For more information, see [Coordinate Systems and Transformations](coordinate-systems-and-transformations.md).  \n  \n The following example sets the world and page transformations of a <xref:System.Drawing.Graphics> object. The world transformation is set to a 30-degree rotation. The page transformation is set so that the coordinates passed to the second <xref:System.Drawing.Graphics.DrawEllipse%2A> will be treated as millimeters instead of pixels. The code makes two identical calls to the <xref:System.Drawing.Graphics.DrawEllipse%2A> method. The world transformation is applied to the first <xref:System.Drawing.Graphics.DrawEllipse%2A> call, and both transformations (world and page) are applied to the second <xref:System.Drawing.Graphics.DrawEllipse%2A> call.  \n  \n```vb  \nDim graphics As Graphics = e.Graphics  \nDim pen As New Pen(Color.Red)  \n  \ngraphics.ResetTransform()  \ngraphics.RotateTransform(30) ' world transformation  \ngraphics.DrawEllipse(pen, 0, 0, 100, 50)  \ngraphics.PageUnit = GraphicsUnit.Millimeter ' page transformation  \ngraphics.DrawEllipse(pen, 0, 0, 100, 50)  \n```  \n  \n```csharp  \nGraphics graphics = e.Graphics;  \nPen pen = new Pen(Color.Red);   \n  \ngraphics.ResetTransform();  \ngraphics.RotateTransform(30);                    // world transformation  \ngraphics.DrawEllipse(pen, 0, 0, 100, 50);  \ngraphics.PageUnit = GraphicsUnit.Millimeter;     // page transformation  \ngraphics.DrawEllipse(pen, 0, 0, 100, 50);  \n```  \n  \n The following illustration shows the two ellipses. Note that the 30-degree rotation is about the origin of the coordinate system (upper-left corner of the client area), not about the centers of the ellipses. Also note that the pen width of 1 means 1 pixel for the first ellipse and 1 millimeter for the second ellipse.  \n  \n ![Illustration that shows two ellipses: rotation and pen width.](./media/managing-the-state-of-a-graphics-object/set-rotation-pen-width-drawellipse-method.png)  \n  \n### Clipping Region  \n A <xref:System.Drawing.Graphics> object maintains a clipping region that applies to all items drawn by that <xref:System.Drawing.Graphics> object. You can set the clipping region by calling the <xref:System.Drawing.Graphics.SetClip%2A> method.  \n  \n The following example creates a plus-shaped region by forming the union of two rectangles. That region is designated as the clipping region of a <xref:System.Drawing.Graphics> object. Then the code draws two lines that are restricted to the interior of the clipping region.  \n  \n```vb  \nDim graphics As Graphics = e.Graphics  \n  \n' Opaque red, width 5  \nDim pen As New Pen(Color.Red, 5)  \n  \n' Opaque aqua  \nDim brush As New SolidBrush(Color.FromArgb(255, 180, 255, 255))  \n  \n' Create a plus-shaped region by forming the union of two rectangles.  \nDim [region] As New [Region](New Rectangle(50, 0, 50, 150))  \n[region].Union(New Rectangle(0, 50, 150, 50))  \ngraphics.FillRegion(brush, [region])  \n  \n' Set the clipping region.  \ngraphics.SetClip([region], CombineMode.Replace)  \n  \n' Draw two clipped lines.  \ngraphics.DrawLine(pen, 0, 30, 150, 160)  \ngraphics.DrawLine(pen, 40, 20, 190, 150)  \n```  \n  \n```csharp  \nGraphics graphics = e.Graphics;  \n  \n// Opaque red, width 5  \nPen pen = new Pen(Color.Red, 5);    \n  \n// Opaque aqua  \nSolidBrush brush = new SolidBrush(Color.FromArgb(255, 180, 255, 255));    \n  \n// Create a plus-shaped region by forming the union of two rectangles.  \nRegion region = new Region(new Rectangle(50, 0, 50, 150));  \nregion.Union(new Rectangle(0, 50, 150, 50));  \ngraphics.FillRegion(brush, region);  \n  \n// Set the clipping region.  \ngraphics.SetClip(region, CombineMode.Replace);  \n  \n// Draw two clipped lines.  \ngraphics.DrawLine(pen, 0, 30, 150, 160);  \ngraphics.DrawLine(pen, 40, 20, 190, 150);  \n```  \n  \n The following illustration shows the clipped lines:  \n  \n ![Diagram that shows the limited clip region.](./media/managing-the-state-of-a-graphics-object/set-clipping-region-setclip-method.png)  \n  \n## See also\n\n- [Graphics and Drawing in Windows Forms](graphics-and-drawing-in-windows-forms.md)\n- [Using Nested Graphics Containers](using-nested-graphics-containers.md)\n","nodes":[{"pos":[4,267],"embed":true,"restype":"x-metadata","content":"title: \"Managing the State of a Graphics Object\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"graphics [Windows Forms], managing state\"\n  - \"graphics [Windows Forms], clipping\"\nms.assetid: 6207cad1-7a34-4bd6-bfc1-db823ca7a73e","nodes":[{"content":"Managing the State of a Graphics Object","nodes":[{"pos":[0,39],"content":"Managing the State of a Graphics Object","nodes":[{"content":"Managing the State of a Graphics Object","pos":[0,39]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[274,313],"content":"Managing the State of a Graphics Object","linkify":"Managing the State of a Graphics Object","nodes":[{"content":"Managing the State of a Graphics Object","pos":[0,39]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> class is at the heart of <ph id=\"ph2\">[!INCLUDE[ndptecgdiplus](../../../../includes/ndptecgdiplus-md.md)]</ph>.","pos":[314,442],"source":"The <xref:System.Drawing.Graphics> class is at the heart of [!INCLUDE[ndptecgdiplus](../../../../includes/ndptecgdiplus-md.md)]."},{"content":"To draw anything, you obtain a <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object, set its properties, and call its methods <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics.DrawLine%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Drawing.Graphics.DrawImage%2A&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.Drawing.Graphics.DrawString%2A&gt;</ph>, and the like).","pos":[443,703],"source":" To draw anything, you obtain a <xref:System.Drawing.Graphics> object, set its properties, and call its methods <xref:System.Drawing.Graphics.DrawLine%2A>, <xref:System.Drawing.Graphics.DrawImage%2A>, <xref:System.Drawing.Graphics.DrawString%2A>, and the like)."},{"content":"The following example calls the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.DrawRectangle%2A&gt;</ph> method of a <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics&gt;</ph> object.","pos":[710,840],"source":"The following example calls the <xref:System.Drawing.Graphics.DrawRectangle%2A> method of a <xref:System.Drawing.Graphics> object."},{"content":"The first argument passed to the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.DrawRectangle%2A&gt;</ph> method is a <ph id=\"ph2\">&lt;xref:System.Drawing.Pen&gt;</ph> object.","pos":[841,967],"source":" The first argument passed to the <xref:System.Drawing.Graphics.DrawRectangle%2A> method is a <xref:System.Drawing.Pen> object."},{"pos":[1281,1295],"content":"Graphics State","linkify":"Graphics State","nodes":[{"content":"Graphics State","pos":[0,14]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object does more than provide drawing methods, such as <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics.DrawLine%2A&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.Drawing.Graphics.DrawRectangle%2A&gt;</ph>.","pos":[1299,1482],"source":"A <xref:System.Drawing.Graphics> object does more than provide drawing methods, such as <xref:System.Drawing.Graphics.DrawLine%2A> and <xref:System.Drawing.Graphics.DrawRectangle%2A>."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object also maintains graphics state, which can be divided into the following categories:","pos":[1483,1605],"source":" A <xref:System.Drawing.Graphics> object also maintains graphics state, which can be divided into the following categories:"},{"content":"Quality settings","pos":[1615,1631]},{"content":"Transformations","pos":[1641,1656]},{"content":"Clipping region","pos":[1666,1681]},{"pos":[1691,1707],"content":"Quality Settings","linkify":"Quality Settings","nodes":[{"content":"Quality Settings","pos":[0,16]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object has several properties that influence the quality of the items that are drawn.","pos":[1711,1829],"source":"A <xref:System.Drawing.Graphics> object has several properties that influence the quality of the items that are drawn."},{"content":"For example, you can set the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.TextRenderingHint%2A&gt;</ph> property to specify the type of antialiasing (if any) applied to text.","pos":[1830,1981],"source":" For example, you can set the <xref:System.Drawing.Graphics.TextRenderingHint%2A> property to specify the type of antialiasing (if any) applied to text."},{"content":"Other properties that influence quality are <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.SmoothingMode%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics.CompositingMode%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Drawing.Graphics.CompositingQuality%2A&gt;</ph>, and <ph id=\"ph4\">&lt;xref:System.Drawing.Graphics.InterpolationMode%2A&gt;</ph>.","pos":[1982,2236],"source":" Other properties that influence quality are <xref:System.Drawing.Graphics.SmoothingMode%2A>, <xref:System.Drawing.Graphics.CompositingMode%2A>, <xref:System.Drawing.Graphics.CompositingQuality%2A>, and <xref:System.Drawing.Graphics.InterpolationMode%2A>."},{"pos":[2243,2471],"content":"The following example draws two ellipses, one with the smoothing mode set to <ph id=\"ph1\">&lt;xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias&gt;</ph> and one with the smoothing mode set to <ph id=\"ph2\">&lt;xref:System.Drawing.Drawing2D.SmoothingMode.HighSpeed&gt;</ph>:","source":"The following example draws two ellipses, one with the smoothing mode set to <xref:System.Drawing.Drawing2D.SmoothingMode.AntiAlias> and one with the smoothing mode set to <xref:System.Drawing.Drawing2D.SmoothingMode.HighSpeed>:"},{"pos":[3053,3068],"content":"Transformations","linkify":"Transformations","nodes":[{"content":"Transformations","pos":[0,15]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object maintains two transformations (world and page) that are applied to all items drawn by that <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics&gt;</ph> object.","pos":[3072,3241],"source":"A <xref:System.Drawing.Graphics> object maintains two transformations (world and page) that are applied to all items drawn by that <xref:System.Drawing.Graphics> object."},{"content":"Any affine transformation can be stored in the world transformation.","pos":[3242,3310]},{"content":"Affine transformations include scaling, rotating, reflecting, skewing, and translating.","pos":[3311,3398]},{"content":"The page transformation can be used for scaling and for changing units (for example, pixels to inches).","pos":[3399,3502]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Coordinate Systems and Transformations<ept id=\"p1\">](coordinate-systems-and-transformations.md)</ept>.","pos":[3503,3613],"source":" For more information, see [Coordinate Systems and Transformations](coordinate-systems-and-transformations.md)."},{"content":"The following example sets the world and page transformations of a <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object.","pos":[3620,3725],"source":"The following example sets the world and page transformations of a <xref:System.Drawing.Graphics> object."},{"content":"The world transformation is set to a 30-degree rotation.","pos":[3726,3782]},{"content":"The page transformation is set so that the coordinates passed to the second <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.DrawEllipse%2A&gt;</ph> will be treated as millimeters instead of pixels.","pos":[3783,3954],"source":" The page transformation is set so that the coordinates passed to the second <xref:System.Drawing.Graphics.DrawEllipse%2A> will be treated as millimeters instead of pixels."},{"content":"The code makes two identical calls to the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.DrawEllipse%2A&gt;</ph> method.","pos":[3955,4050],"source":" The code makes two identical calls to the <xref:System.Drawing.Graphics.DrawEllipse%2A> method."},{"content":"The world transformation is applied to the first <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.DrawEllipse%2A&gt;</ph> call, and both transformations (world and page) are applied to the second <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics.DrawEllipse%2A&gt;</ph> call.","pos":[4051,4271],"source":" The world transformation is applied to the first <xref:System.Drawing.Graphics.DrawEllipse%2A> call, and both transformations (world and page) are applied to the second <xref:System.Drawing.Graphics.DrawEllipse%2A> call."},{"content":"The following illustration shows the two ellipses.","pos":[4963,5013]},{"content":"Note that the 30-degree rotation is about the origin of the coordinate system (upper-left corner of the client area), not about the centers of the ellipses.","pos":[5014,5170]},{"content":"Also note that the pen width of 1 means 1 pixel for the first ellipse and 1 millimeter for the second ellipse.","pos":[5171,5281]},{"content":"Illustration that shows two ellipses: rotation and pen width.","pos":[5290,5351]},{"pos":[5457,5472],"content":"Clipping Region","linkify":"Clipping Region","nodes":[{"content":"Clipping Region","pos":[0,15]}]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object maintains a clipping region that applies to all items drawn by that <ph id=\"ph2\">&lt;xref:System.Drawing.Graphics&gt;</ph> object.","pos":[5476,5622],"source":"A <xref:System.Drawing.Graphics> object maintains a clipping region that applies to all items drawn by that <xref:System.Drawing.Graphics> object."},{"content":"You can set the clipping region by calling the <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics.SetClip%2A&gt;</ph> method.","pos":[5623,5719],"source":" You can set the clipping region by calling the <xref:System.Drawing.Graphics.SetClip%2A> method."},{"content":"The following example creates a plus-shaped region by forming the union of two rectangles.","pos":[5726,5816]},{"content":"That region is designated as the clipping region of a <ph id=\"ph1\">&lt;xref:System.Drawing.Graphics&gt;</ph> object.","pos":[5817,5909],"source":" That region is designated as the clipping region of a <xref:System.Drawing.Graphics> object."},{"content":"Then the code draws two lines that are restricted to the interior of the clipping region.","pos":[5910,5999]},{"content":"The following illustration shows the clipped lines:","pos":[7270,7321]},{"content":"Diagram that shows the limited clip region.","pos":[7330,7373]},{"pos":[7471,7479],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[7483,7564],"content":"<bpt id=\"p1\">[</bpt>Graphics and Drawing in Windows Forms<ept id=\"p1\">](graphics-and-drawing-in-windows-forms.md)</ept>","source":"[Graphics and Drawing in Windows Forms](graphics-and-drawing-in-windows-forms.md)"},{"pos":[7567,7638],"content":"<bpt id=\"p1\">[</bpt>Using Nested Graphics Containers<ept id=\"p1\">](using-nested-graphics-containers.md)</ept>","source":"[Using Nested Graphics Containers](using-nested-graphics-containers.md)"}]}