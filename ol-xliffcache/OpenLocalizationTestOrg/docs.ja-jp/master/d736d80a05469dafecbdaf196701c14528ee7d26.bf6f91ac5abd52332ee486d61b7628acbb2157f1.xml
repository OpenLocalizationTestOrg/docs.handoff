{"content":"---\ntitle: \"XAML Resources\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"reusing resources [WPF]\"\n  - \"resources [WPF], reusing\"\n  - \"reusing commonly defined objects [WPF]\"\n  - \"XAML [WPF], reusing resources\"\nms.assetid: 91580b89-a0a8-4889-aecb-fddf8e63175f\n---\n# XAML Resources\nA resource is an object that can be reused in different places in your application. Examples of resources include brushes and styles. This overview describes how to use resources in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]. You can also create and access resources by using code, or interchangeably between code and [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]. For more information, see [Resources and Code](resources-and-code.md).  \n  \n> [!NOTE]\n>  The resource files described in this topic are different than the resource files described in [WPF Application Resource, Content, and Data Files](../app-development/wpf-application-resource-content-and-data-files.md) and different than the embedded or linked resources described in [Manage Application Resources (.NET)](/visualstudio/ide/managing-application-resources-dotnet).  \n\n<a name=\"usingresources\"></a>   \n## Using Resources in XAML  \n The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page. The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>.  \n  \n [!code-xaml[FEResourceSH_snip#XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page1.xaml#xaml)]  \n  \n Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is the property that contains the resources (as a <xref:System.Windows.ResourceDictionary>) that a resource defines. You can define resources on any element. However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example.  \n  \n Each resource in a resource dictionary must have a unique key. When you define resources in markup, you assign the unique key through the [x:Key Directive](../../xaml-services/x-key-directive.md). Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions. Nonstring keys for resources are used by certain feature areas in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], notably for styles, component resources, and data styling.  \n  \n After you define a resource, you can reference the resource to be used for a property value by using a resource markup extension syntax that specifies the key name, for example:  \n  \n [!code-xaml[FEResourceSH_snip#KeyNameUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#keynameusage)]  \n  \n In the preceding example, when the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element. If <xref:System.Windows.Controls.Button> does not have a definition of the resource key `MyBrush` (it does not; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>. Thus, when you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it, and you can reuse the same resource for setting the value of any property that accepts the <xref:System.Type> that the resource represents. In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>.  \n  \n<a name=\"staticdynamic\"></a>   \n## Static and Dynamic Resources  \n A resource can be referenced as either a static resource or a dynamic resource. This is done by using either the [StaticResource Markup Extension](staticresource-markup-extension.md) or the [DynamicResource Markup Extension](dynamicresource-markup-extension.md). A markup extension is a feature of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] whereby you can specify an object reference by having the markup extension process the attribute string and return the object to a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader. For more information about markup extension behavior, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md).  \n  \n When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension, rather than being evaluated in the context of the property being set. The [StaticResource Markup Extension](staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries. This happens during loading, which is the point in time when the loading process needs to assign the property value that takes the static resource reference. The [DynamicResource Markup Extension](dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the application is actually run, at which time the expression is evaluated and provides a value.  \n  \n When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:  \n  \n-   The overall design of how you create the resources for your application (per page, in the application, in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], in a resource only assembly).  \n  \n-   The application functionality: is updating resources in real time part of your application requirements?  \n  \n-   The respective lookup behavior of that resource reference type.  \n  \n-   The particular property or resource type, and the native behavior of those types.  \n  \n### Static Resources  \n Static resource references work best for the following circumstances:  \n  \n-   Your application design concentrates most of all of its resources into page or application level resource dictionaries. Static resource references are not reevaluated based on runtime behaviors such as reloading a page, and therefore there can be some performance benefit to avoiding large numbers of dynamic resource references when they are not necessary per your resource and application design.  \n  \n-   You are setting the value of a property that is not on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>.  \n  \n-   You are creating a resource dictionary that will be compiled into a DLL, and packaged as part of the application or shared between applications.  \n  \n-   You are creating a theme for a custom control, and are defining resources that are used within the themes. For this case, you typically do not want the dynamic resource reference lookup behavior, you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme. With a dynamic resource reference, even a reference within a theme is left unevaluated until runtime, and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup. If that happens, your theme will not behave in an expected manner.  \n  \n-   You are using resources to set large numbers of dependency properties. Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property does not have to check for a reevaluated expression and can return the last effective value. This technique can be a performance benefit.  \n  \n-   You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../../xaml-services/x-shared-attribute.md).  \n  \n#### Static resource lookup behavior  \n  \n1.  The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.  \n  \n2.  The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary. This continues until the root element is reached.  \n  \n3.  Next, application resources are checked. Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.  \n  \n Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference. Forward references cannot be resolved by a static resource reference. For this reason, if you use static resource references, you must design your resource dictionary structure such that resources intended for by-resource use are defined at or near the beginning of each respective resource dictionary.  \n  \n Static resource lookup can extend into themes, or into system resources, but this is supported only because the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader defers the request. The deferral is necessary so that the runtime theme at the time the page loads applies properly to the application. However, static resource references to keys that are known to only exist in themes or as system resources are not recommended. This is because such references are not reevaluated if the theme is changed by the user in realtime. A dynamic resource reference is more reliable when you request theme or system resources. The exception is when a theme element itself requests another resource. These references should be static resource references, for the reasons mentioned earlier.  \n  \n The exception behavior if a static resource reference is not found varies. If the resource was deferred, then the exception occurs at runtime. If the resource was not deferred, the exception occurs at load time.  \n  \n### Dynamic Resources  \n Dynamic resources work best for the following circumstances:  \n  \n-   The value of the resource depends on conditions that are not known until runtime. This includes system resources, or resources that are otherwise user settable. For example, you can create setter values that refer to system properties, as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>. These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system. You might also have application-level themes that can change, where page-level resource access must also capture the change.  \n  \n-   You are creating or referencing theme styles for a custom control.  \n  \n-   You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an application lifetime.  \n  \n-   You have a complicated resource structure that has interdependencies, where a forward reference may be required. Static resource references do not support forward references, but dynamic resource references do support them because the resource does not need to be evaluated until runtime, and forward references are therefore not a relevant concept.  \n  \n-   You are referencing a resource that is particularly large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads. Static resource references always load from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] when the page loads; however, a dynamic resource reference does not load until it is actually used.  \n  \n-   You are creating a style where setter values might come from other values that are influenced by themes or other user settings.  \n  \n-   You are applying resources to elements that might be reparented in the logical tree during application lifetime. Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.  \n  \n#### Dynamic resource lookup behavior  \n Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>.  \n  \n1.  The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.  \n  \n    -   If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.Style.Resources%2A> dictionary within the <xref:System.Windows.Style> is checked.  \n  \n    -   If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources%2A> dictionary within the <xref:System.Windows.FrameworkTemplate> is checked.  \n  \n2.  The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary. This continues until the root element is reached.  \n  \n3.  Next, application resources are checked. Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.  \n  \n4.  Theme resource dictionary is checked, for the currently active theme. If the theme changes at runtime, the value is reevaluated.  \n  \n5.  System resources are checked.  \n  \n Exception behavior (if any) varies:  \n  \n-   If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call, and was not found, an exception is raised.  \n  \n-   If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call, and was not found, no exception is raised, but the returned value is `null`. If the property being set does not accept `null`, then it is still possible that a deeper exception will be raised (this depends on the individual property being set).  \n  \n-   If a resource was requested by a dynamic resource reference in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], and was not found, then the behavior depends on the general property system, but the general behavior is as if no property setting operation occurred at the level where the resource exists. For instance, if you attempt to set the background on a an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence. For instance, the background value might still come from a locally defined button style, or from the theme style. For properties that are not defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.  \n  \n#### Restrictions  \n Dynamic resource references have some notable restrictions. At least one of the following must be true:  \n  \n-   The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>. That property must be backed by a <xref:System.Windows.DependencyProperty>.  \n  \n-   The reference is for a value within a <xref:System.Windows.Style><xref:System.Windows.Setter>.  \n  \n-   The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value.  \n  \n Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to UI because a property change (the changed dynamic resource value) is acknowledged by the property system. Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout. However, not all properties that have a [DynamicResource Markup Extension](dynamicresource-markup-extension.md) as their value are guaranteed to provide the value in such a way that they update in realtime in the UI. That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your application.  \n  \n<a name=\"stylesimplicitkeys\"></a>   \n## Styles, DataTemplates, and Implicit Keys  \n Earlier, it was stated that all items in a <xref:System.Windows.ResourceDictionary> must have a key. However, that does not mean that all resources must have an explicit `x:Key`. Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property. This is known as an implicit key, whereas an `x:Key` attribute is an explicit key. You can overwrite any implicit key by specifying an explicit key.  \n  \n One very important scenario for resources is when you define a <xref:System.Windows.Style>. In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse. For more information about styles, see [Styling and Templating](../controls/styling-and-templating.md).  \n  \n Styles for controls can be both created with and referenced with an implicit key. The theme styles that define the default appearance of a control rely on this implicit key. The implicit key from the standpoint of requesting it is the <xref:System.Type> of the control itself. The implicit key from the standpoint of defining the resource is the <xref:System.Windows.Style.TargetType%2A> of the style. Therefore, if you are creating themes for custom controls, creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../../xaml-services/x-key-directive.md) for that <xref:System.Windows.Style>. And if you want to use the themed styles, you do not need to specify any style at all. For instance, the following style definition works, even though the <xref:System.Windows.Style> resource does not appear to have a key:  \n  \n [!code-xaml[FEResourceSH_snip#ImplicitStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#implicitstyle)]  \n  \n That style really does have a key: the implicit key `typeof(`<xref:System.Windows.Controls.Button>`)`. In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../../xaml-services/x-type-markup-extension.md) to return a <xref:System.Type>.  \n  \n Through the default theme style mechanisms used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself does not attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style. Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has. You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button. If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A>, for clarity in your markup, but that is optional.  \n  \n Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true` (also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control). Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] do this). For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../controls/guidelines-for-designing-stylable-controls.md).  \n  \n <xref:System.Windows.DataTemplate> also has an implicit key. The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value. <xref:System.Windows.DataTemplate.DataType%2A> can also be specified as the name of the type rather than explicitly using [{x:Type...}](../../xaml-services/x-type-markup-extension.md). For details, see [Data Templating Overview](../data/data-templating-overview.md).  \n  \n## See also\n\n- <xref:System.Windows.ResourceDictionary>\n- [Application Resources](optimizing-performance-application-resources.md)\n- [Resources and Code](resources-and-code.md)\n- [Define and Reference a Resource](how-to-define-and-reference-a-resource.md)\n- [Application Management Overview](../app-development/application-management-overview.md)\n- [x:Type Markup Extension](../../xaml-services/x-type-markup-extension.md)\n- [StaticResource Markup Extension](staticresource-markup-extension.md)\n- [DynamicResource Markup Extension](dynamicresource-markup-extension.md)\n","nodes":[{"pos":[4,262],"embed":true,"restype":"x-metadata","content":"title: \"XAML Resources\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"reusing resources [WPF]\"\n  - \"resources [WPF], reusing\"\n  - \"reusing commonly defined objects [WPF]\"\n  - \"XAML [WPF], reusing resources\"\nms.assetid: 91580b89-a0a8-4889-aecb-fddf8e63175f","nodes":[{"content":"XAML Resources","nodes":[{"pos":[0,14],"content":"XAML Resources","nodes":[{"content":"XAML Resources","pos":[0,14]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[269,283],"content":"XAML Resources","linkify":"XAML Resources","nodes":[{"content":"XAML Resources","pos":[0,14]}]},{"content":"A resource is an object that can be reused in different places in your application.","pos":[284,367]},{"content":"Examples of resources include brushes and styles.","pos":[368,417]},{"content":"This overview describes how to use resources in <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph>.","pos":[418,538],"source":" This overview describes how to use resources in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]."},{"content":"You can also create and access resources by using code, or interchangeably between code and <ph id=\"ph1\">[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]</ph>.","pos":[539,701],"source":" You can also create and access resources by using code, or interchangeably between code and [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Resources and Code<ept id=\"p1\">](resources-and-code.md)</ept>.","pos":[702,772],"source":" For more information, see [Resources and Code](resources-and-code.md)."},{"pos":[780,1168],"content":"[!NOTE]\n The resource files described in this topic are different than the resource files described in [WPF Application Resource, Content, and Data Files](../app-development/wpf-application-resource-content-and-data-files.md) and different than the embedded or linked resources described in [Manage Application Resources (.NET)](/visualstudio/ide/managing-application-resources-dotnet).","leadings":["","> "],"nodes":[{"content":"The resource files described in this topic are different than the resource files described in <bpt id=\"p1\">[</bpt>WPF Application Resource, Content, and Data Files<ept id=\"p1\">](../app-development/wpf-application-resource-content-and-data-files.md)</ept> and different than the embedded or linked resources described in <bpt id=\"p2\">[</bpt>Manage Application Resources (.NET)<ept id=\"p2\">](/visualstudio/ide/managing-application-resources-dotnet)</ept>.","pos":[9,386],"source":"The resource files described in this topic are different than the resource files described in [WPF Application Resource, Content, and Data Files](../app-development/wpf-application-resource-content-and-data-files.md) and different than the embedded or linked resources described in [Manage Application Resources (.NET)](/visualstudio/ide/managing-application-resources-dotnet)."}]},{"pos":[1208,1231],"content":"Using Resources in XAML","linkify":"Using Resources in XAML","nodes":[{"content":"Using Resources in XAML","pos":[0,23]}]},{"content":"The following example defines a <ph id=\"ph1\">&lt;xref:System.Windows.Media.SolidColorBrush&gt;</ph> as a resource on the root element of a page.","pos":[1235,1355],"source":"The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page."},{"content":"The example then references the resource and uses it to set properties of several child elements, including an <ph id=\"ph1\">&lt;xref:System.Windows.Shapes.Ellipse&gt;</ph>, a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.TextBlock&gt;</ph>, and a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Button&gt;</ph>.","pos":[1356,1593],"source":" The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>."},{"content":"Every framework-level element (<ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkContentElement&gt;</ph>) has a <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkElement.Resources%2A&gt;</ph> property, which is the property that contains the resources (as a <ph id=\"ph4\">&lt;xref:System.Windows.ResourceDictionary&gt;</ph>) that a resource defines.","pos":[1723,2033],"source":"Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is the property that contains the resources (as a <xref:System.Windows.ResourceDictionary>) that a resource defines."},{"content":"You can define resources on any element.","pos":[2034,2074]},{"content":"However, resources are most often defined on the root element, which is <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Page&gt;</ph> in the example.","pos":[2075,2198],"source":" However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example."},{"content":"Each resource in a resource dictionary must have a unique key.","pos":[2205,2267]},{"content":"When you define resources in markup, you assign the unique key through the <bpt id=\"p1\">[</bpt>x:Key Directive<ept id=\"p1\">](../../xaml-services/x-key-directive.md)</ept>.","pos":[2268,2401],"source":" When you define resources in markup, you assign the unique key through the [x:Key Directive](../../xaml-services/x-key-directive.md)."},{"content":"Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions.","pos":[2402,2528]},{"content":"Nonstring keys for resources are used by certain feature areas in <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, notably for styles, component resources, and data styling.","pos":[2529,2736],"source":" Nonstring keys for resources are used by certain feature areas in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], notably for styles, component resources, and data styling."},{"content":"After you define a resource, you can reference the resource to be used for a property value by using a resource markup extension syntax that specifies the key name, for example:","pos":[2743,2920]},{"content":"In the preceding example, when the <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> loader processes the value <ph id=\"ph2\">`{StaticResource MyBrush}`</ph> for the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Control.Background%2A&gt;</ph> property on <ph id=\"ph4\">&lt;xref:System.Windows.Controls.Button&gt;</ph>, the resource lookup logic first checks the resource dictionary for the <ph id=\"ph5\">&lt;xref:System.Windows.Controls.Button&gt;</ph> element.","pos":[3066,3456],"source":"In the preceding example, when the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element."},{"content":"If <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Button&gt;</ph> does not have a definition of the resource key <ph id=\"ph2\">`MyBrush`</ph> (it does not; its resource collection is empty), the lookup next checks the parent element of <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Button&gt;</ph>, which is <ph id=\"ph4\">&lt;xref:System.Windows.Controls.Page&gt;</ph>.","pos":[3457,3733],"source":" If <xref:System.Windows.Controls.Button> does not have a definition of the resource key `MyBrush` (it does not; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>."},{"content":"Thus, when you define a resource on the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Page&gt;</ph> root element, all the elements in the logical tree of the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Page&gt;</ph> can access it, and you can reuse the same resource for setting the value of any property that accepts the <ph id=\"ph3\">&lt;xref:System.Type&gt;</ph> that the resource represents.","pos":[3734,4058],"source":" Thus, when you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it, and you can reuse the same resource for setting the value of any property that accepts the <xref:System.Type> that the resource represents."},{"content":"In the previous example, the same <ph id=\"ph1\">`MyBrush`</ph> resource sets two different properties: the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Control.Background%2A&gt;</ph> of a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Button&gt;</ph>, and the <ph id=\"ph4\">&lt;xref:System.Windows.Shapes.Shape.Fill%2A&gt;</ph> of a <ph id=\"ph5\">&lt;xref:System.Windows.Shapes.Rectangle&gt;</ph>.","pos":[4059,4339],"source":" In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>."},{"pos":[4380,4408],"content":"Static and Dynamic Resources","linkify":"Static and Dynamic Resources","nodes":[{"content":"Static and Dynamic Resources","pos":[0,28]}]},{"content":"A resource can be referenced as either a static resource or a dynamic resource.","pos":[4412,4491]},{"content":"This is done by using either the <bpt id=\"p1\">[</bpt>StaticResource Markup Extension<ept id=\"p1\">](staticresource-markup-extension.md)</ept> or the <bpt id=\"p2\">[</bpt>DynamicResource Markup Extension<ept id=\"p2\">](dynamicresource-markup-extension.md)</ept>.","pos":[4492,4674],"source":" This is done by using either the [StaticResource Markup Extension](staticresource-markup-extension.md) or the [DynamicResource Markup Extension](dynamicresource-markup-extension.md)."},{"content":"A markup extension is a feature of <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> whereby you can specify an object reference by having the markup extension process the attribute string and return the object to a <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> loader.","pos":[4675,4992],"source":" A markup extension is a feature of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] whereby you can specify an object reference by having the markup extension process the attribute string and return the object to a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader."},{"content":"For more information about markup extension behavior, see <bpt id=\"p1\">[</bpt>Markup Extensions and WPF XAML<ept id=\"p1\">](markup-extensions-and-wpf-xaml.md)</ept>.","pos":[4993,5119],"source":" For more information about markup extension behavior, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md)."},{"content":"When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension, rather than being evaluated in the context of the property being set.","pos":[5126,5344]},{"content":"The <bpt id=\"p1\">[</bpt>StaticResource Markup Extension<ept id=\"p1\">](staticresource-markup-extension.md)</ept> processes a key by looking up the value for that key in all available resource dictionaries.","pos":[5345,5511],"source":" The [StaticResource Markup Extension](staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries."},{"content":"This happens during loading, which is the point in time when the loading process needs to assign the property value that takes the static resource reference.","pos":[5512,5669]},{"content":"The <bpt id=\"p1\">[</bpt>DynamicResource Markup Extension<ept id=\"p1\">](dynamicresource-markup-extension.md)</ept> instead processes a key by creating an expression, and that expression remains unevaluated until the application is actually run, at which time the expression is evaluated and provides a value.","pos":[5670,5939],"source":" The [DynamicResource Markup Extension](dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the application is actually run, at which time the expression is evaluated and provides a value."},{"content":"When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:","pos":[5946,6096]},{"pos":[6106,6320],"content":"The overall design of how you create the resources for your application (per page, in the application, in loose <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph>, in a resource only assembly).","source":"The overall design of how you create the resources for your application (per page, in the application, in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], in a resource only assembly)."},{"content":"The application functionality: is updating resources in real time part of your application requirements?","pos":[6330,6434]},{"content":"The respective lookup behavior of that resource reference type.","pos":[6444,6507]},{"content":"The particular property or resource type, and the native behavior of those types.","pos":[6517,6598]},{"pos":[6608,6624],"content":"Static Resources","linkify":"Static Resources","nodes":[{"content":"Static Resources","pos":[0,16]}]},{"content":"Static resource references work best for the following circumstances:","pos":[6628,6697]},{"content":"Your application design concentrates most of all of its resources into page or application level resource dictionaries.","pos":[6707,6826]},{"content":"Static resource references are not reevaluated based on runtime behaviors such as reloading a page, and therefore there can be some performance benefit to avoiding large numbers of dynamic resource references when they are not necessary per your resource and application design.","pos":[6827,7105]},{"pos":[7115,7248],"content":"You are setting the value of a property that is not on a <ph id=\"ph1\">&lt;xref:System.Windows.DependencyObject&gt;</ph> or a <ph id=\"ph2\">&lt;xref:System.Windows.Freezable&gt;</ph>.","source":"You are setting the value of a property that is not on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>."},{"content":"You are creating a resource dictionary that will be compiled into a DLL, and packaged as part of the application or shared between applications.","pos":[7258,7402]},{"content":"You are creating a theme for a custom control, and are defining resources that are used within the themes.","pos":[7412,7518]},{"content":"For this case, you typically do not want the dynamic resource reference lookup behavior, you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme.","pos":[7519,7730]},{"content":"With a dynamic resource reference, even a reference within a theme is left unevaluated until runtime, and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup.","pos":[7731,8038]},{"content":"If that happens, your theme will not behave in an expected manner.","pos":[8039,8105]},{"content":"You are using resources to set large numbers of dependency properties.","pos":[8115,8185]},{"content":"Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property does not have to check for a reevaluated expression and can return the last effective value.","pos":[8186,8476]},{"content":"This technique can be a performance benefit.","pos":[8477,8521]},{"pos":[8531,8740],"content":"You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the <bpt id=\"p1\">[</bpt>x:Shared Attribute<ept id=\"p1\">](../../xaml-services/x-shared-attribute.md)</ept>.","source":"You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../../xaml-services/x-shared-attribute.md)."},{"pos":[8751,8782],"content":"Static resource lookup behavior","linkify":"Static resource lookup behavior","nodes":[{"content":"Static resource lookup behavior","pos":[0,31]}]},{"content":"The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.","pos":[8792,8917]},{"content":"The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.","pos":[8927,9036]},{"content":"This continues until the root element is reached.","pos":[9037,9086]},{"content":"Next, application resources are checked.","pos":[9096,9136]},{"content":"Application resources are those resources within the resource dictionary that is defined by the <ph id=\"ph1\">&lt;xref:System.Windows.Application&gt;</ph> object for your <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> application.","pos":[9137,9377],"source":" Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application."},{"content":"Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference.","pos":[9384,9541]},{"content":"Forward references cannot be resolved by a static resource reference.","pos":[9542,9611]},{"content":"For this reason, if you use static resource references, you must design your resource dictionary structure such that resources intended for by-resource use are defined at or near the beginning of each respective resource dictionary.","pos":[9612,9844]},{"content":"Static resource lookup can extend into themes, or into system resources, but this is supported only because the <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> loader defers the request.","pos":[9851,10061],"source":"Static resource lookup can extend into themes, or into system resources, but this is supported only because the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader defers the request."},{"content":"The deferral is necessary so that the runtime theme at the time the page loads applies properly to the application.","pos":[10062,10177]},{"content":"However, static resource references to keys that are known to only exist in themes or as system resources are not recommended.","pos":[10178,10304]},{"content":"This is because such references are not reevaluated if the theme is changed by the user in realtime.","pos":[10305,10405]},{"content":"A dynamic resource reference is more reliable when you request theme or system resources.","pos":[10406,10495]},{"content":"The exception is when a theme element itself requests another resource.","pos":[10496,10567]},{"content":"These references should be static resource references, for the reasons mentioned earlier.","pos":[10568,10657]},{"content":"The exception behavior if a static resource reference is not found varies.","pos":[10664,10738]},{"content":"If the resource was deferred, then the exception occurs at runtime.","pos":[10739,10806]},{"content":"If the resource was not deferred, the exception occurs at load time.","pos":[10807,10875]},{"pos":[10885,10902],"content":"Dynamic Resources","linkify":"Dynamic Resources","nodes":[{"content":"Dynamic Resources","pos":[0,17]}]},{"content":"Dynamic resources work best for the following circumstances:","pos":[10906,10966]},{"content":"The value of the resource depends on conditions that are not known until runtime.","pos":[10976,11057]},{"content":"This includes system resources, or resources that are otherwise user settable.","pos":[11058,11136]},{"content":"For example, you can create setter values that refer to system properties, as exposed by <ph id=\"ph1\">&lt;xref:System.Windows.SystemColors&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Windows.SystemFonts&gt;</ph>, or <ph id=\"ph3\">&lt;xref:System.Windows.SystemParameters&gt;</ph>.","pos":[11137,11339],"source":" For example, you can create setter values that refer to system properties, as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>."},{"content":"These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system.","pos":[11340,11462]},{"content":"You might also have application-level themes that can change, where page-level resource access must also capture the change.","pos":[11463,11587]},{"content":"You are creating or referencing theme styles for a custom control.","pos":[11597,11663]},{"pos":[11673,11784],"content":"You intend to adjust the contents of a <ph id=\"ph1\">&lt;xref:System.Windows.ResourceDictionary&gt;</ph> during an application lifetime.","source":"You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an application lifetime."},{"content":"You have a complicated resource structure that has interdependencies, where a forward reference may be required.","pos":[11794,11906]},{"content":"Static resource references do not support forward references, but dynamic resource references do support them because the resource does not need to be evaluated until runtime, and forward references are therefore not a relevant concept.","pos":[11907,12143]},{"content":"You are referencing a resource that is particularly large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads.","pos":[12153,12328]},{"content":"Static resource references always load from <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> when the page loads; however, a dynamic resource reference does not load until it is actually used.","pos":[12329,12544],"source":" Static resource references always load from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] when the page loads; however, a dynamic resource reference does not load until it is actually used."},{"content":"You are creating a style where setter values might come from other values that are influenced by themes or other user settings.","pos":[12554,12681]},{"content":"You are applying resources to elements that might be reparented in the logical tree during application lifetime.","pos":[12691,12803]},{"content":"Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.","pos":[12804,13011]},{"pos":[13022,13054],"content":"Dynamic resource lookup behavior","linkify":"Dynamic resource lookup behavior","nodes":[{"content":"Dynamic resource lookup behavior","pos":[0,32]}]},{"pos":[13058,13292],"content":"Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.FindResource%2A&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement.SetResourceReference%2A&gt;</ph>.","source":"Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>."},{"content":"The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.","pos":[13302,13427]},{"pos":[13441,13630],"content":"If the element defines a <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.Style%2A&gt;</ph> property, the <ph id=\"ph2\">&lt;xref:System.Windows.Style.Resources%2A&gt;</ph> dictionary within the <ph id=\"ph3\">&lt;xref:System.Windows.Style&gt;</ph> is checked.","source":"If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.Style.Resources%2A> dictionary within the <xref:System.Windows.Style> is checked."},{"pos":[13644,13860],"content":"If the element defines a <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control.Template%2A&gt;</ph> property, the <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkTemplate.Resources%2A&gt;</ph> dictionary within the <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkTemplate&gt;</ph> is checked.","source":"If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources%2A> dictionary within the <xref:System.Windows.FrameworkTemplate> is checked."},{"content":"The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.","pos":[13870,13979]},{"content":"This continues until the root element is reached.","pos":[13980,14029]},{"content":"Next, application resources are checked.","pos":[14039,14079]},{"content":"Application resources are those resources within the resource dictionary that is defined by the <ph id=\"ph1\">&lt;xref:System.Windows.Application&gt;</ph> object for your <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> application.","pos":[14080,14320],"source":" Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application."},{"content":"Theme resource dictionary is checked, for the currently active theme.","pos":[14330,14399]},{"content":"If the theme changes at runtime, the value is reevaluated.","pos":[14400,14458]},{"content":"System resources are checked.","pos":[14468,14497]},{"content":"Exception behavior (if any) varies:","pos":[14504,14539]},{"pos":[14549,14685],"content":"If a resource was requested by a <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.FindResource%2A&gt;</ph> call, and was not found, an exception is raised.","source":"If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call, and was not found, an exception is raised."},{"content":"If a resource was requested by a <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.TryFindResource%2A&gt;</ph> call, and was not found, no exception is raised, but the returned value is <ph id=\"ph2\">`null`</ph>.","pos":[14695,14868],"source":"If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call, and was not found, no exception is raised, but the returned value is `null`."},{"content":"If the property being set does not accept <ph id=\"ph1\">`null`</ph>, then it is still possible that a deeper exception will be raised (this depends on the individual property being set).","pos":[14869,15036],"source":" If the property being set does not accept `null`, then it is still possible that a deeper exception will be raised (this depends on the individual property being set)."},{"content":"If a resource was requested by a dynamic resource reference in <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph>, and was not found, then the behavior depends on the general property system, but the general behavior is as if no property setting operation occurred at the level where the resource exists.","pos":[15046,15371],"source":"If a resource was requested by a dynamic resource reference in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], and was not found, then the behavior depends on the general property system, but the general behavior is as if no property setting operation occurred at the level where the resource exists."},{"content":"For instance, if you attempt to set the background on a an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence.","pos":[15372,15637]},{"content":"For instance, the background value might still come from a locally defined button style, or from the theme style.","pos":[15638,15751]},{"content":"For properties that are not defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.","pos":[15752,15919]},{"pos":[15930,15942],"content":"Restrictions","linkify":"Restrictions","nodes":[{"content":"Restrictions","pos":[0,12]}]},{"content":"Dynamic resource references have some notable restrictions.","pos":[15946,16005]},{"content":"At least one of the following must be true:","pos":[16006,16049]},{"content":"The property being set must be a property on a <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkContentElement&gt;</ph>.","pos":[16059,16194],"source":"The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>."},{"content":"That property must be backed by a <ph id=\"ph1\">&lt;xref:System.Windows.DependencyProperty&gt;</ph>.","pos":[16195,16270],"source":" That property must be backed by a <xref:System.Windows.DependencyProperty>."},{"pos":[16280,16374],"content":"The reference is for a value within a <ph id=\"ph1\">&lt;xref:System.Windows.Style&gt;</ph><ph id=\"ph2\">&lt;xref:System.Windows.Setter&gt;</ph>.","source":"The reference is for a value within a <xref:System.Windows.Style><xref:System.Windows.Setter>."},{"pos":[16384,16641],"content":"The property being set must be a property on a <ph id=\"ph1\">&lt;xref:System.Windows.Freezable&gt;</ph> that is provided as a value of either a <ph id=\"ph2\">&lt;xref:System.Windows.FrameworkElement&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkContentElement&gt;</ph> property, or a <ph id=\"ph4\">&lt;xref:System.Windows.Setter&gt;</ph> value.","source":"The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value."},{"content":"Because the property being set must be a <ph id=\"ph1\">&lt;xref:System.Windows.DependencyProperty&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.Freezable&gt;</ph> property, most property changes can propagate to UI because a property change (the changed dynamic resource value) is acknowledged by the property system.","pos":[16648,16919],"source":"Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to UI because a property change (the changed dynamic resource value) is acknowledged by the property system."},{"content":"Most controls include logic that will force another layout of a control if a <ph id=\"ph1\">&lt;xref:System.Windows.DependencyProperty&gt;</ph> changes and that property might affect layout.","pos":[16920,17084],"source":" Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout."},{"content":"However, not all properties that have a <bpt id=\"p1\">[</bpt>DynamicResource Markup Extension<ept id=\"p1\">](dynamicresource-markup-extension.md)</ept> as their value are guaranteed to provide the value in such a way that they update in realtime in the UI.","pos":[17085,17301],"source":" However, not all properties that have a [DynamicResource Markup Extension](dynamicresource-markup-extension.md) as their value are guaranteed to provide the value in such a way that they update in realtime in the UI."},{"content":"That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your application.","pos":[17302,17472]},{"pos":[17518,17558],"content":"Styles, DataTemplates, and Implicit Keys","linkify":"Styles, DataTemplates, and Implicit Keys","nodes":[{"content":"Styles, DataTemplates, and Implicit Keys","pos":[0,40]}]},{"content":"Earlier, it was stated that all items in a <ph id=\"ph1\">&lt;xref:System.Windows.ResourceDictionary&gt;</ph> must have a key.","pos":[17562,17662],"source":"Earlier, it was stated that all items in a <xref:System.Windows.ResourceDictionary> must have a key."},{"content":"However, that does not mean that all resources must have an explicit <ph id=\"ph1\">`x:Key`</ph>.","pos":[17663,17740],"source":" However, that does not mean that all resources must have an explicit `x:Key`."},{"content":"Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property.","pos":[17741,17875]},{"content":"This is known as an implicit key, whereas an <ph id=\"ph1\">`x:Key`</ph> attribute is an explicit key.","pos":[17876,17958],"source":" This is known as an implicit key, whereas an `x:Key` attribute is an explicit key."},{"content":"You can overwrite any implicit key by specifying an explicit key.","pos":[17959,18024]},{"content":"One very important scenario for resources is when you define a <ph id=\"ph1\">&lt;xref:System.Windows.Style&gt;</ph>.","pos":[18031,18122],"source":"One very important scenario for resources is when you define a <xref:System.Windows.Style>."},{"content":"In fact, a <ph id=\"ph1\">&lt;xref:System.Windows.Style&gt;</ph> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse.","pos":[18123,18274],"source":" In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse."},{"content":"For more information about styles, see <bpt id=\"p1\">[</bpt>Styling and Templating<ept id=\"p1\">](../controls/styling-and-templating.md)</ept>.","pos":[18275,18378],"source":" For more information about styles, see [Styling and Templating](../controls/styling-and-templating.md)."},{"content":"Styles for controls can be both created with and referenced with an implicit key.","pos":[18385,18466]},{"content":"The theme styles that define the default appearance of a control rely on this implicit key.","pos":[18467,18558]},{"content":"The implicit key from the standpoint of requesting it is the <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph> of the control itself.","pos":[18559,18661],"source":" The implicit key from the standpoint of requesting it is the <xref:System.Type> of the control itself."},{"content":"The implicit key from the standpoint of defining the resource is the <ph id=\"ph1\">&lt;xref:System.Windows.Style.TargetType%2A&gt;</ph> of the style.","pos":[18662,18786],"source":" The implicit key from the standpoint of defining the resource is the <xref:System.Windows.Style.TargetType%2A> of the style."},{"content":"Therefore, if you are creating themes for custom controls, creating styles that interact with existing theme styles, you do not need to specify an <bpt id=\"p1\">[</bpt>x:Key Directive<ept id=\"p1\">](../../xaml-services/x-key-directive.md)</ept> for that <ph id=\"ph1\">&lt;xref:System.Windows.Style&gt;</ph>.","pos":[18787,19029],"source":" Therefore, if you are creating themes for custom controls, creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../../xaml-services/x-key-directive.md) for that <xref:System.Windows.Style>."},{"content":"And if you want to use the themed styles, you do not need to specify any style at all.","pos":[19030,19116]},{"content":"For instance, the following style definition works, even though the <ph id=\"ph1\">&lt;xref:System.Windows.Style&gt;</ph> resource does not appear to have a key:","pos":[19117,19252],"source":" For instance, the following style definition works, even though the <xref:System.Windows.Style> resource does not appear to have a key:"},{"content":"That style really does have a key: the implicit key <ph id=\"ph1\">`typeof(`</ph><ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph><ph id=\"ph3\">`)`</ph>.","pos":[19400,19502],"source":"That style really does have a key: the implicit key `typeof(`<xref:System.Windows.Controls.Button>`)`."},{"content":"In markup, you can specify a <ph id=\"ph1\">&lt;xref:System.Windows.Style.TargetType%2A&gt;</ph> directly as the type name (or you can optionally use <bpt id=\"p1\">[</bpt>{x:Type...}<ept id=\"p1\">](../../xaml-services/x-type-markup-extension.md)</ept>","pos":[19503,19688],"source":" In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../../xaml-services/x-type-markup-extension.md)"},{"content":"to return a <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph>.","pos":[19689,19720],"source":" to return a <xref:System.Type>."},{"content":"Through the default theme style mechanisms used by <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>, that style is applied as the runtime style of a <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Button&gt;</ph> on the page, even though the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Button&gt;</ph> itself does not attempt to specify its <ph id=\"ph4\">&lt;xref:System.Windows.FrameworkElement.Style%2A&gt;</ph> property or a specific resource reference to the style.","pos":[19727,20156],"source":"Through the default theme style mechanisms used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself does not attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style."},{"content":"Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has.","pos":[20157,20316]},{"content":"You could just specify <ph id=\"ph1\">`&lt;Button&gt;Hello&lt;/Button&gt;`</ph> anywhere in the page, and the style you defined with <ph id=\"ph2\">&lt;xref:System.Windows.Style.TargetType%2A&gt;</ph> of <ph id=\"ph3\">`Button`</ph> would apply to that button.","pos":[20317,20499],"source":" You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button."},{"content":"If you want, you can still explicitly key the style with the same type value as <ph id=\"ph1\">&lt;xref:System.Windows.Style.TargetType%2A&gt;</ph>, for clarity in your markup, but that is optional.","pos":[20500,20672],"source":" If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A>, for clarity in your markup, but that is optional."},{"content":"Implicit keys for styles do not apply on a control if <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A&gt;</ph> is <ph id=\"ph2\">`true`</ph> (also note that <ph id=\"ph3\">&lt;xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A&gt;</ph> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control).","pos":[20679,21004],"source":"Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true` (also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control)."},{"content":"Also, in order to support implicit keys for derived class scenarios, the control must override <ph id=\"ph1\">&lt;xref:System.Windows.FrameworkElement.DefaultStyleKey%2A&gt;</ph> (all existing controls provided as part of <ph id=\"ph2\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> do this).","pos":[21005,21292],"source":" Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] do this)."},{"content":"For more information about styles, themes, and control design, see <bpt id=\"p1\">[</bpt>Guidelines for Designing Stylable Controls<ept id=\"p1\">](../controls/guidelines-for-designing-stylable-controls.md)</ept>.","pos":[21293,21464],"source":" For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../controls/guidelines-for-designing-stylable-controls.md)."},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.DataTemplate&gt;</ph> also has an implicit key.","pos":[21471,21531],"source":"<xref:System.Windows.DataTemplate> also has an implicit key."},{"content":"The implicit key for a <ph id=\"ph1\">&lt;xref:System.Windows.DataTemplate&gt;</ph> is the <ph id=\"ph2\">&lt;xref:System.Windows.DataTemplate.DataType%2A&gt;</ph> property value.","pos":[21532,21659],"source":" The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value."},{"content":"<ph id=\"ph1\">&lt;xref:System.Windows.DataTemplate.DataType%2A&gt;</ph> can also be specified as the name of the type rather than explicitly using <bpt id=\"p1\">[</bpt>{x:Type...}<ept id=\"p1\">](../../xaml-services/x-type-markup-extension.md)</ept>.","pos":[21660,21844],"source":"<xref:System.Windows.DataTemplate.DataType%2A> can also be specified as the name of the type rather than explicitly using [{x:Type...}](../../xaml-services/x-type-markup-extension.md)."},{"content":"For details, see <bpt id=\"p1\">[</bpt>Data Templating Overview<ept id=\"p1\">](../data/data-templating-overview.md)</ept>.","pos":[21845,21926],"source":" For details, see [Data Templating Overview](../data/data-templating-overview.md)."},{"pos":[21935,21943],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[21990,22062],"content":"<bpt id=\"p1\">[</bpt>Application Resources<ept id=\"p1\">](optimizing-performance-application-resources.md)</ept>","source":"[Application Resources](optimizing-performance-application-resources.md)"},{"pos":[22065,22108],"content":"<bpt id=\"p1\">[</bpt>Resources and Code<ept id=\"p1\">](resources-and-code.md)</ept>","source":"[Resources and Code](resources-and-code.md)"},{"pos":[22111,22187],"content":"<bpt id=\"p1\">[</bpt>Define and Reference a Resource<ept id=\"p1\">](how-to-define-and-reference-a-resource.md)</ept>","source":"[Define and Reference a Resource](how-to-define-and-reference-a-resource.md)"},{"pos":[22190,22278],"content":"<bpt id=\"p1\">[</bpt>Application Management Overview<ept id=\"p1\">](../app-development/application-management-overview.md)</ept>","source":"[Application Management Overview](../app-development/application-management-overview.md)"},{"pos":[22281,22354],"content":"<bpt id=\"p1\">[</bpt>x:Type Markup Extension<ept id=\"p1\">](../../xaml-services/x-type-markup-extension.md)</ept>","source":"[x:Type Markup Extension](../../xaml-services/x-type-markup-extension.md)"},{"pos":[22357,22426],"content":"<bpt id=\"p1\">[</bpt>StaticResource Markup Extension<ept id=\"p1\">](staticresource-markup-extension.md)</ept>","source":"[StaticResource Markup Extension](staticresource-markup-extension.md)"},{"pos":[22429,22500],"content":"<bpt id=\"p1\">[</bpt>DynamicResource Markup Extension<ept id=\"p1\">](dynamicresource-markup-extension.md)</ept>","source":"[DynamicResource Markup Extension](dynamicresource-markup-extension.md)"}]}