{"content":"---\ntitle: .NET Core migration to the csproj format | Microsoft Docs\ndescription: .NET Core project.json to csproj migration\nkeywords: .NET, .NET Core, .NET Core migration\nauthor: blackdwarf\nms.author: mairaw\nms.date: 03/13/2017\nms.topic: article\nms.prod: .net-core\nms.devlang: dotnet\nms.assetid: 1feadf3d-3cfc-41dd-abb5-a4fc303a7b53\n---\n\n# Migrating .NET Core projects to the .csproj format\n\nThis document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:\n\n1. [Migration from a valid latest schema of *project.json* to *csproj*](#migration-from-projectjson-to-csproj)\n2. [Migration from DNX to csproj](#migration-from-dnx-to-csproj)\n3. [Migration from RC3 and previous .NET Core csproj projects to the final format](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)\n\n## Migration from project.json to csproj\nMigration from *project.json* to *.csproj* can be done using one of the following methods:\n\n- [Visual Studio 2017](#visual-studio-2017)\n- [dotnet migrate command-line tool](#dotnet-migrate)\n \nBoth methods use the same underlying engine to migrate the projects, so the results will be the same for both. In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary. The resulting *.csproj* file will be named the same as the containing directory name.\n\n### Visual Studio 2017\n\nWhen you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears. The dialog displays the projects to be migrated. \nIf you open a solution file, all the projects specified in the solution file will be listed. Review the list of projects to be migrated and select **OK**.\n\n![One-way upgrade dialog showing the list of projects to be migrated](media/one-way-upgrade.jpg)\n\nVisual Studio will migrate the projects chosen automatically. When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.\n\nFiles that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder. The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio. \nA file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report.\n\n> [!IMPORTANT]\n> The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.\n\n### dotnet migrate\n\nIn the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command. It will migrate a project, a solution or a set of folders in that order, depending on which ones were found. \nWhen you migrate a project, the project and all its dependencies are migrated.\n\nFiles that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder.\n\n> [!NOTE]\n> If you are using VS Code, the `dotnet migrate` command will not modify VS Code-specific files such as `tasks.json`. These files need to be changed manually. \n> This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio. \n\nSee [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.\n\n### Common issues\n\n- If you get an error: \"No executable found matching command dotnet-migrate\":\n\nRun `dotnet --version` to see which version you are using. [`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.\nYou’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.\n\n## Migration from DNX to csproj\nIf you are still using DNX for .NET Core development, your migration process should be done in two stages:\n\n1. Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.\n2. Follow the steps from the previous section to migrate from *project.json* to *.csproj*.  \n\n> [!NOTE]\n> DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI. \n\n## Migration from earlier .NET Core csproj formats to RTM csproj\nThe .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling. There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file. The actual steps depend on the version of the project file you are migrating. The following is some guidance to consider based on the changes that happened between versions:\n\n* Remove the tools version property from the `<Project>` element, if it exists. \n* Remove the XML namespace (`xmlns`) from the `<Project>` element.\n* If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`. This attribute specifies that the project uses the SDK to be used. `Microsoft.NET.Sdk.Web` is used for web apps.\n* Remove the `<Import Project=\"$(MSBuildExtensionsPath)\\$(MSBuildToolsVersion)\\Microsoft.Common.props\" />` and `<Import Project=\"$(MSBuildToolsPath)\\Microsoft.CSharp.targets\" />` statements from the top and bottom of the project. These import statements are implied by the SDK, so there is no need for them to be in the project. \n* If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them. These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs). \n* Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists. The SDK reference comes through the `Sdk` attribute on the `<Project>` element. \n* Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects). Leaving these globs in your project will cause an error on build because compile items will be duplicated. \n\nAfter these steps your project should be fully compatible with the RTM .NET Core csproj format. \n\nFor examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://blogs.msdn.microsoft.com/dotnet/2016/12/12/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.\n","nodes":[{"pos":[11,68],"content":".NET Core migration to the csproj format | Microsoft Docs","needQuote":true,"needEscape":true,"nodes":[{"content":".NET Core migration to the csproj format | Microsoft Docs","pos":[0,57]}]},{"pos":[82,124],"content":".NET Core project.json to csproj migration","needQuote":true,"needEscape":true,"nodes":[{"content":".NET Core project.json to csproj migration","pos":[0,42]}]},{"pos":[135,171],"content":".NET, .NET Core, .NET Core migration","needQuote":true,"needEscape":true,"nodes":[{"content":".NET, .NET Core, .NET Core migration","pos":[0,36]}]},{"pos":[341,391],"content":"Migrating .NET Core projects to the .csproj format","linkify":"Migrating .NET Core projects to the .csproj format","nodes":[{"content":"Migrating .NET Core projects to the .csproj format","pos":[0,50]}]},{"content":"This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:","pos":[393,518]},{"pos":[523,630],"content":"<bpt id=\"p1\">[</bpt>Migration from a valid latest schema of <bpt id=\"p2\">*</bpt>project.json<ept id=\"p2\">*</ept> to <bpt id=\"p3\">*</bpt>csproj<ept id=\"p3\">*</ept><ept id=\"p1\">](#migration-from-projectjson-to-csproj)</ept>","source":"[Migration from a valid latest schema of *project.json* to *csproj*](#migration-from-projectjson-to-csproj)"},{"pos":[634,695],"content":"<bpt id=\"p1\">[</bpt>Migration from DNX to csproj<ept id=\"p1\">](#migration-from-dnx-to-csproj)</ept>","source":"[Migration from DNX to csproj](#migration-from-dnx-to-csproj)"},{"pos":[699,841],"content":"<bpt id=\"p1\">[</bpt>Migration from RC3 and previous .NET Core csproj projects to the final format<ept id=\"p1\">](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)</ept>","source":"[Migration from RC3 and previous .NET Core csproj projects to the final format](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)"},{"pos":[846,883],"content":"Migration from project.json to csproj","linkify":"Migration from project.json to csproj","nodes":[{"content":"Migration from project.json to csproj","pos":[0,37]}]},{"pos":[884,974],"content":"Migration from <bpt id=\"p1\">*</bpt>project.json<ept id=\"p1\">*</ept> to <bpt id=\"p2\">*</bpt>.csproj<ept id=\"p2\">*</ept> can be done using one of the following methods:","source":"Migration from *project.json* to *.csproj* can be done using one of the following methods:"},{"pos":[978,1019],"content":"<bpt id=\"p1\">[</bpt>Visual Studio 2017<ept id=\"p1\">](#visual-studio-2017)</ept>","source":"[Visual Studio 2017](#visual-studio-2017)"},{"pos":[1022,1073],"content":"<bpt id=\"p1\">[</bpt>dotnet migrate command-line tool<ept id=\"p1\">](#dotnet-migrate)</ept>","source":"[dotnet migrate command-line tool](#dotnet-migrate)"},{"content":"Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.","pos":[1076,1186]},{"content":"In most cases, using one of these two ways to migrate the <bpt id=\"p1\">*</bpt>project.json<ept id=\"p1\">*</ept> to <bpt id=\"p2\">*</bpt>csproj<ept id=\"p2\">*</ept> is the only thing that is needed and no further manual editing of the project file is necessary.","pos":[1187,1368],"source":" In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary."},{"content":"The resulting <bpt id=\"p1\">*</bpt>.csproj<ept id=\"p1\">*</ept> file will be named the same as the containing directory name.","pos":[1369,1454],"source":" The resulting *.csproj* file will be named the same as the containing directory name."},{"pos":[1460,1478],"content":"Visual Studio 2017","linkify":"Visual Studio 2017","nodes":[{"content":"Visual Studio 2017","pos":[0,18]}]},{"content":"When you open a <bpt id=\"p1\">*</bpt>.xproj<ept id=\"p1\">*</ept> file or a solution file which references <bpt id=\"p2\">*</bpt>.xproj<ept id=\"p2\">*</ept> files, the <bpt id=\"p3\">**</bpt>One-way upgrade<ept id=\"p3\">**</ept> dialog appears.","pos":[1480,1601],"source":"When you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears."},{"content":"The dialog displays the projects to be migrated.","pos":[1602,1650]},{"content":"If you open a solution file, all the projects specified in the solution file will be listed.","pos":[1651,1744],"source":" \nIf you open a solution file, all the projects specified in the solution file will be listed."},{"content":"Review the list of projects to be migrated and select <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[1745,1806],"source":" Review the list of projects to be migrated and select **OK**."},{"content":"One-way upgrade dialog showing the list of projects to be migrated","pos":[1810,1876]},{"content":"Visual Studio will migrate the projects chosen automatically.","pos":[1906,1967]},{"content":"When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.","pos":[1968,2121]},{"content":"Files that were migrated (<bpt id=\"p1\">*</bpt>project.json<ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt>global.json<ept id=\"p2\">*</ept>, <bpt id=\"p3\">*</bpt>.xproj<ept id=\"p3\">*</ept> and solution file) will be moved to a <bpt id=\"p4\">*</bpt>Backup<ept id=\"p4\">*</ept> folder.","pos":[2123,2243],"source":"Files that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder."},{"content":"The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio.","pos":[2244,2405]},{"content":"A file named <bpt id=\"p1\">*</bpt>UpgradeLog.htm<ept id=\"p1\">*</ept> is also saved and automatically opened that contains a migration report.","pos":[2406,2509],"source":" \nA file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report."},{"pos":[2513,2656],"content":"[!IMPORTANT]\nThe new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.","leadings":["","> "],"nodes":[{"content":"The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.","pos":[13,141]}]},{"pos":[2662,2676],"content":"dotnet migrate","linkify":"dotnet migrate","nodes":[{"content":"dotnet migrate","pos":[0,14]}]},{"content":"In the command-line scenario, you can use the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">`dotnet migrate`</ph><ept id=\"p1\">](../tools/dotnet-migrate.md)</ept> command.","pos":[2678,2779],"source":"In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command."},{"content":"It will migrate a project, a solution or a set of folders in that order, depending on which ones were found.","pos":[2780,2888]},{"content":"When you migrate a project, the project and all its dependencies are migrated.","pos":[2889,2968],"source":" \nWhen you migrate a project, the project and all its dependencies are migrated."},{"pos":[2970,3075],"content":"Files that were migrated (<bpt id=\"p1\">*</bpt>project.json<ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt>global.json<ept id=\"p2\">*</ept> and <bpt id=\"p3\">*</bpt>.xproj<ept id=\"p3\">*</ept>) will be moved to a <bpt id=\"p4\">*</bpt>backup<ept id=\"p4\">*</ept> folder.","source":"Files that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder."},{"pos":[3079,3381],"content":"[!NOTE]\nIf you are using VS Code, the `dotnet migrate` command will not modify VS Code-specific files such as `tasks.json`. These files need to be changed manually. \nThis is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.","leadings":["","> ","> "],"nodes":[{"content":"If you are using VS Code, the `dotnet migrate` command will not modify VS Code-specific files such as `tasks.json`. These files need to be changed manually. \nThis is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.","pos":[8,298],"nodes":[{"content":"If you are using VS Code, the <ph id=\"ph1\">`dotnet migrate`</ph> command will not modify VS Code-specific files such as <ph id=\"ph2\">`tasks.json`</ph>.","pos":[0,115],"source":"If you are using VS Code, the `dotnet migrate` command will not modify VS Code-specific files such as `tasks.json`."},{"content":"These files need to be changed manually.","pos":[116,156]},{"content":"This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.","pos":[157,290],"source":" \nThis is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio."}]}]},{"pos":[3384,3531],"content":"See <bpt id=\"p1\">[</bpt>A mapping between project.json and csproj properties<ept id=\"p1\">](../tools/project-json-to-csproj.md)</ept> for a comparison of project.json and csproj formats.","source":"See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats."},{"pos":[3537,3550],"content":"Common issues","linkify":"Common issues","nodes":[{"content":"Common issues","pos":[0,13]}]},{"content":"If you get an error: \"No executable found matching command dotnet-migrate\":","pos":[3554,3629]},{"content":"Run <ph id=\"ph1\">`dotnet --version`</ph> to see which version you are using.","pos":[3631,3689],"source":"Run `dotnet --version` to see which version you are using."},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">`dotnet migrate`</ph><ept id=\"p1\">](../tools/dotnet-migrate.md)</ept> requires .NET Core CLI RC3 or higher.","pos":[3690,3774],"source":"[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher."},{"content":"You’ll get this error if you have a <bpt id=\"p1\">*</bpt>global.json<ept id=\"p1\">*</ept> file in the current or parent directory and the <ph id=\"ph1\">`sdk`</ph> version is set to an older version.","pos":[3775,3914],"source":"\nYou’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version."},{"pos":[3919,3947],"content":"Migration from DNX to csproj","linkify":"Migration from DNX to csproj","nodes":[{"content":"Migration from DNX to csproj","pos":[0,28]}]},{"content":"If you are still using DNX for .NET Core development, your migration process should be done in two stages:","pos":[3948,4054]},{"pos":[4059,4162],"content":"Use the <bpt id=\"p1\">[</bpt>existing DNX migration guidance<ept id=\"p1\">](from-dnx.md)</ept> to migrate from DNX to project-json enabled CLI.","source":"Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI."},{"pos":[4166,4253],"content":"Follow the steps from the previous section to migrate from <bpt id=\"p1\">*</bpt>project.json<ept id=\"p1\">*</ept> to <bpt id=\"p2\">*</bpt>.csproj<ept id=\"p2\">*</ept>.","source":"Follow the steps from the previous section to migrate from *project.json* to *.csproj*."},{"pos":[4259,4356],"content":"[!NOTE]\nDNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.","leadings":["","> "],"nodes":[{"content":"DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.","pos":[8,95]}]},{"pos":[4362,4423],"content":"Migration from earlier .NET Core csproj formats to RTM csproj","linkify":"Migration from earlier .NET Core csproj formats to RTM csproj","nodes":[{"content":"Migration from earlier .NET Core csproj formats to RTM csproj","pos":[0,61]}]},{"content":"The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.","pos":[4424,4532]},{"content":"There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.","pos":[4533,4679]},{"content":"The actual steps depend on the version of the project file you are migrating.","pos":[4680,4757]},{"content":"The following is some guidance to consider based on the changes that happened between versions:","pos":[4758,4853]},{"pos":[4857,4934],"content":"Remove the tools version property from the <ph id=\"ph1\">`&lt;Project&gt;`</ph> element, if it exists.","source":"Remove the tools version property from the `<Project>` element, if it exists."},{"pos":[4938,5002],"content":"Remove the XML namespace (<ph id=\"ph1\">`xmlns`</ph>) from the <ph id=\"ph2\">`&lt;Project&gt;`</ph> element.","source":"Remove the XML namespace (`xmlns`) from the `<Project>` element."},{"content":"If it doesn't exist, add the <ph id=\"ph1\">`Sdk`</ph> attribute to the <ph id=\"ph2\">`&lt;Project&gt;`</ph> element and set it to <ph id=\"ph3\">`Microsoft.NET.Sdk`</ph> or <ph id=\"ph4\">`Microsoft.NET.Sdk.Web`</ph>.","pos":[5005,5138],"source":"If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`."},{"content":"This attribute specifies that the project uses the SDK to be used.","pos":[5139,5205]},{"content":"<ph id=\"ph1\">`Microsoft.NET.Sdk.Web`</ph> is used for web apps.","pos":[5206,5251],"source":"`Microsoft.NET.Sdk.Web` is used for web apps."},{"content":"Remove the <ph id=\"ph1\">`&lt;Import Project=\"$(MSBuildExtensionsPath)\\$(MSBuildToolsVersion)\\Microsoft.Common.props\" /&gt;`</ph> and <ph id=\"ph2\">`&lt;Import Project=\"$(MSBuildToolsPath)\\Microsoft.CSharp.targets\" /&gt;`</ph> statements from the top and bottom of the project.","pos":[5254,5481],"source":"Remove the `<Import Project=\"$(MSBuildExtensionsPath)\\$(MSBuildToolsVersion)\\Microsoft.Common.props\" />` and `<Import Project=\"$(MSBuildToolsPath)\\Microsoft.CSharp.targets\" />` statements from the top and bottom of the project."},{"content":"These import statements are implied by the SDK, so there is no need for them to be in the project.","pos":[5482,5580]},{"content":"If you have <ph id=\"ph1\">`Microsoft.NETCore.App`</ph> or <ph id=\"ph2\">`NETStandard.Library`</ph> <ph id=\"ph3\">`&lt;PackageReference&gt;`</ph> items in your project, you should remove them.","pos":[5584,5712],"source":"If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them."},{"content":"These package references are <bpt id=\"p1\">[</bpt>implied by the SDK<ept id=\"p1\">](https://aka.ms/sdkimplicitrefs)</ept>.","pos":[5713,5795],"source":" These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs)."},{"content":"Remove the <ph id=\"ph1\">`Microsoft.NET.Sdk`</ph> <ph id=\"ph2\">`&lt;PackageReference&gt;`</ph> element, if it exists.","pos":[5799,5873],"source":"Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists."},{"content":"The SDK reference comes through the <ph id=\"ph1\">`Sdk`</ph> attribute on the <ph id=\"ph2\">`&lt;Project&gt;`</ph> element.","pos":[5874,5953],"source":" The SDK reference comes through the `Sdk` attribute on the `<Project>` element."},{"content":"Remove the <bpt id=\"p1\">[</bpt>globs<ept id=\"p1\">](https://en.wikipedia.org/wiki/Glob_(programming))</ept> that are <bpt id=\"p2\">[</bpt>implied by the SDK<ept id=\"p2\">](../tools/csproj.md#default-compilation-includes-in-net-core-projects)</ept>.","pos":[5957,6126],"source":"Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects)."},{"content":"Leaving these globs in your project will cause an error on build because compile items will be duplicated.","pos":[6127,6233]},{"content":"After these steps your project should be fully compatible with the RTM .NET Core csproj format.","pos":[6236,6331]},{"pos":[6334,6633],"content":"For examples of before and after the migration from old csproj format to the new one, see the <bpt id=\"p1\">[</bpt>Updating Visual Studio 2017 RC – .NET Core Tooling improvements<ept id=\"p1\">](https://blogs.msdn.microsoft.com/dotnet/2016/12/12/updating-visual-studio-2017-rc-net-core-tooling-improvements/)</ept> article on the .NET blog.","source":"For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://blogs.msdn.microsoft.com/dotnet/2016/12/12/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog."}]}