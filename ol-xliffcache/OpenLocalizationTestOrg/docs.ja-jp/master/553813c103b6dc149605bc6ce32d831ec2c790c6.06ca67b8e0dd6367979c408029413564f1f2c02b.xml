{"content":"---\ntitle: \"Walkthrough: Authoring a Composite Control with Visual C# | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-winforms\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"custom controls [C#]\"\n  - \"user controls [Windows Forms], creating with Visual C#\"\n  - \"UserControl class, walkthroughs\"\n  - \"user controls [C#]\"\n  - \"custom controls [Windows Forms], creating\"\nms.assetid: f88481a8-c746-4a36-9479-374ce5f2e91f\ncaps.latest.revision: 21\nauthor: dotnet-bot\nms.author: dotnetcontent\nmanager: \"wpickett\"\n---\n# Walkthrough: Authoring a Composite Control with Visual C# #\nComposite controls provide a means by which custom graphical interfaces can be created and reused. A composite control is essentially a component with a visual representation. As such, it might consist of one or more Windows Forms controls, components, or blocks of code that can extend functionality by validating user input, modifying display properties, or performing other tasks required by the author. Composite controls can be placed on Windows Forms in the same manner as other controls. In the first part of this walkthrough, you create a simple composite control called `ctlClock`. In the second part of the walkthrough, you extend the functionality of `ctlClock` through inheritance.  \n  \n> [!NOTE]\n>  The dialog boxes and menu commands you see might differ from those described in Help depending on your active settings or edition. To change your settings, choose **Import and Export Settings** on the **Tools** menu. For more information, see [Customizing Development Settings in Visual Studio](http://msdn.microsoft.com/en-us/22c4debb-4e31-47a8-8f19-16f328d7dcd3).  \n  \n## Creating the Project  \n When you create a new project, you specify its name to set the root namespace, assembly name, and project name, and ensure that the default component will be in the correct namespace.  \n  \n#### To create the ctlClockLib control library and the ctlClock control  \n  \n1.  On the **File** menu, point to **New**, and then click **Project** to open the **New Project** dialog box.  \n  \n2.  From the list of [!INCLUDE[csprcs](../../../../includes/csprcs-md.md)] projects, select the **Windows Forms Control Library** project template, type `ctlClockLib` in the **Name** box, and then click **OK**.  \n  \n     The project name, `ctlClockLib`, is also assigned to the root namespace by default. The root namespace is used to qualify the names of components in the assembly. For example, if two assemblies provide components named `ctlClock`, you can specify your `ctlClock` component using `ctlClockLib.ctlClock.`  \n  \n3.  In Solution Explorer, right-click **UserControl1.cs**, and then click **Rename**. Change the file name to `ctlClock.cs`. Click the **Yes** button when you are asked if you want to rename all references to the code element \"UserControl1\".  \n  \n    > [!NOTE]\n    >  By default, a composite control inherits from the <xref:System.Windows.Forms.UserControl> class provided by the system. The <xref:System.Windows.Forms.UserControl> class provides functionality required by all composite controls, and implements standard methods and properties.  \n  \n4.  On the **File** menu, click **Save All** to save the project.  \n  \n## Adding Windows Controls and Components to the Composite Control  \n A visual interface is an essential part of your composite control. This visual interface is implemented by the addition of one or more Windows controls to the designer surface. In the following demonstration, you will incorporate Windows controls into your composite control and write code to implement functionality.  \n  \n#### To add a Label and a Timer to your composite control  \n  \n1.  In Solution Explorer, right-click **ctlClock.cs**, and then click **View Designer**.  \n  \n2.  In the **Toolbox**, expand the **Common Controls** node, and then double-click **Label**.  \n  \n     A <xref:System.Windows.Forms.Label> control named `label1` is added to your control on the designer surface.  \n  \n3.  In the designer, click **label1**. In the Properties window, set the following properties.  \n  \n    |Property|Change to|  \n    |--------------|---------------|  \n    |**Name**|`lblDisplay`|  \n    |**Text**|`(blank space)`|  \n    |**TextAlign**|`MiddleCenter`|  \n    |**Font.Size**|`14`|  \n  \n4.  In the **Toolbox**, expand the **Components** node, and then double-click **Timer**.  \n  \n     Because a <xref:System.Windows.Forms.Timer> is a component, it has no visual representation at run time. Therefore, it does not appear with the controls on the designer surface, but rather in the **Component Designer** (a tray at the bottom of the designer surface).  \n  \n5.  In the **Component Designer**, click **timer1**, and then set the <xref:System.Windows.Forms.Timer.Interval%2A> property to `1000` and the <xref:System.Windows.Forms.Timer.Enabled%2A> property to `true`.  \n  \n     The <xref:System.Windows.Forms.Timer.Interval%2A> property controls the frequency with which the <xref:System.Windows.Forms.Timer> component ticks. Each time `timer1` ticks, it runs the code in the `timer1_Tick` event. The interval represents the number of milliseconds between ticks.  \n  \n6.  In the **Component Designer**, double-click **timer1** to go to the `timer1_Tick` event for `ctlClock`.  \n  \n7.  Modify the code so that it resembles the following code sample. Be sure to change the access modifier from `private` to `protected`.  \n  \n    ```csharp  \n    protected void timer1_Tick(object sender, System.EventArgs e)  \n    {  \n        // Causes the label to display the current time.  \n        lblDisplay.Text = DateTime.Now.ToLongTimeString();   \n    }  \n    ```  \n  \n     This code will cause the current time to be shown in `lblDisplay`. Because the interval of `timer1` was set to `1000`, this event will occur every thousand milliseconds, thus updating the current time every second.  \n  \n8.  Modify the method to be overridable with the `virtual` keyword. For more information, see the  \"Inheriting from a User Control\" section below.  \n  \n    ```csharp  \n    protected virtual void timer1_Tick(object sender, System.EventArgs e)  \n    ```  \n  \n9. On the **File** menu, click **Save All** to save the project.  \n  \n## Adding Properties to the Composite Control  \n Your clock control now encapsulates a <xref:System.Windows.Forms.Label> control and a <xref:System.Windows.Forms.Timer> component, each with its own set of inherent properties. While the individual properties of these controls will not be accessible to subsequent users of your control, you can create and expose custom properties by writing the appropriate blocks of code. In the following procedure, you will add properties to your control that enable the user to change the color of the background and text.  \n  \n#### To add a property to your composite control  \n  \n1.  In Solution Explorer, right-click **ctlClock.cs**, and then click **View Code**.  \n  \n     The **Code Editor** for your control opens.  \n  \n2.  Locate the `public partial class ctlClock` statement. Beneath the opening brace (`{)`, type the following code.  \n  \n    ```csharp  \n    private Color colFColor;  \n    private Color colBColor;  \n    ```  \n  \n     These statements create the private variables that you will use to store the values for the properties you are about to create.  \n  \n3.  Type the following code beneath the variable declarations from step 2.  \n  \n    ```csharp  \n    // Declares the name and type of the property.  \n    public Color ClockBackColor  \n    {  \n        // Retrieves the value of the private variable colBColor.  \n        get  \n        {  \n            return colBColor;  \n        }  \n        // Stores the selected value in the private variable colBColor, and   \n        // updates the background color of the label control lblDisplay.  \n        set  \n        {  \n            colBColor = value;  \n            lblDisplay.BackColor = colBColor;     \n        }  \n    }  \n    // Provides a similar set of instructions for the foreground color.  \n    public Color ClockForeColor  \n    {  \n        get  \n        {  \n            return colFColor;  \n        }  \n        set  \n        {  \n            colFColor = value;  \n            lblDisplay.ForeColor = colFColor;  \n        }  \n    }  \n    ```  \n  \n     The preceding code makes two custom properties, `ClockForeColor` and `ClockBackColor`, available to subsequent users of this control. The `get` and `set` statements provide for storage and retrieval of the property value, as well as code to implement functionality appropriate to the property.  \n  \n4.  On the **File** menu, click **Save All** to save the project.  \n  \n## Testing the Control  \n Controls are not stand-alone applications; they must be hosted in a container. Test your control's run-time behavior and exercise its properties with the **UserControl Test Container**. For more information, see [How to: Test the Run-Time Behavior of a UserControl](../../../../docs/framework/winforms/controls/how-to-test-the-run-time-behavior-of-a-usercontrol.md).  \n  \n#### To test your control  \n  \n1.  Press F5 to build the project and run your control in the **UserControl Test Container**.  \n  \n2.  In the test container's property grid, locate the `ClockBackColor` property, and then select the property to display the color palette.  \n  \n3.  Choose a color by clicking it.  \n  \n     The background color of your control changes to the color you selected.  \n  \n4.  Use a similar sequence of events to verify that the `ClockForeColor` property is functioning as expected.  \n  \n     In this section and the preceding sections, you have seen how components and Windows controls can be combined with code and packaging to provide custom functionality in the form of a composite control. You have learned to expose properties in your composite control, and how to test your control after it is complete. In the next section you will learn how to construct an inherited composite control using `ctlClock` as a base.  \n  \n## Inheriting from a Composite Control  \n In the previous sections, you learned how to combine Windows controls, components, and code into reusable composite controls. Your composite control can now be used as a base upon which other controls can be built. The process of deriving a class from a base class is called *inheritance*. In this section, you will create a composite control called `ctlAlarmClock`. This control will be derived from its parent control, `ctlClock`. You will learn to extend the functionality of `ctlClock` by overriding parent methods and adding new methods and properties.  \n  \n The first step in creating an inherited control is to derive it from its parent. This action creates a new control that has all of the properties, methods, and graphical characteristics of the parent control, but can also act as a base for the addition of new or modified functionality.  \n  \n#### To create the inherited control  \n  \n1.  In Solution Explorer, right-click **ctlClockLib**, point to **Add**, and then click **User Control**.  \n  \n     The **Add New Item** dialog box opens.  \n  \n2.  Select the **Inherited User Control** template.  \n  \n3.  In the **Name** box, type `ctlAlarmClock.cs`, and then click **Add**.  \n  \n     The **Inheritance Picker** dialog box appears.  \n  \n4.  Under **Component Name**, double-click **ctlClock**.  \n  \n5.  In Solution Explorer, browse through the current projects.  \n  \n    > [!NOTE]\n    >  A file called **ctlAlarmClock.cs** has been added to the current project.  \n  \n### Adding the Alarm Properties  \n Properties are added to an inherited control in the same way they are added to a composite control. You will now use the property declaration syntax to add two properties to your control: `AlarmTime`, which will store the value of the date and time the alarm is to go off, and `AlarmSet`, which will indicate whether the alarm is set.  \n  \n##### To add properties to your composite control  \n  \n1.  In Solution Explorer, right-click **ctlAlarmClock**, and then click **View Code**.  \n  \n2.  Locate the `public class` statement. Note that your control inherits from `ctlClockLib.ctlClock`. Beneath the opening brace (`{)` statement, type the following code.  \n  \n    ```csharp  \n    private DateTime dteAlarmTime;  \n    private bool blnAlarmSet;  \n    // These properties will be declared as public to allow future   \n    // developers to access them.  \n    public DateTime AlarmTime  \n    {  \n        get  \n        {  \n            return dteAlarmTime;  \n        }  \n        set  \n        {  \n            dteAlarmTime = value;  \n        }  \n    }  \n    public bool AlarmSet  \n    {  \n        get  \n        {  \n            return blnAlarmSet;  \n        }  \n        set  \n        {  \n            blnAlarmSet = value;  \n        }  \n    }  \n    ```  \n  \n### Adding to the Graphical Interface of the Control  \n Your inherited control has a visual interface that is identical to the control it inherits from. It possesses the same constituent controls as its parent control, but the properties of the constituent controls will not be available unless they were specifically exposed. You may add to the graphical interface of an inherited composite control in the same manner as you would add to any composite control. To continue adding to your alarm clock's visual interface, you will add a label control that will flash when the alarm is sounding.  \n  \n##### To add the label control  \n  \n1.  In Solution Explorer, right-click **ctlAlarmClock**, and then click **View Designer**.  \n  \n     The designer for `ctlAlarmClock` opens in the main window.  \n  \n2.  Click the display portion of the control, and view the Properties window.  \n  \n    > [!NOTE]\n    >  While all the properties are displayed, they are dimmed. This indicates that these properties are native to `lblDisplay` and cannot be modified or accessed in the Properties window. By default, controls contained in a composite control are `private`, and their properties are not accessible by any means.  \n  \n    > [!NOTE]\n    >  If you want subsequent users of your composite control to have access to its internal controls, declare them as `public` or `protected`. This will allow you to set and modify properties of controls contained within your composite control by using the appropriate code.  \n  \n3.  Add a <xref:System.Windows.Forms.Label> control to your composite control.  \n  \n4.  Using the mouse, drag the <xref:System.Windows.Forms.Label> control immediately beneath the display box. In the Properties window, set the following properties.  \n  \n    |Property|Setting|  \n    |--------------|-------------|  \n    |**Name**|`lblAlarm`|  \n    |**Text**|**Alarm!**|  \n    |**TextAlign**|`MiddleCenter`|  \n    |**Visible**|`false`|  \n  \n### Adding the Alarm Functionality  \n In the previous procedures, you added properties and a control that will enable alarm functionality in your composite control. In this procedure, you will add code to compare the current time to the alarm time and, if they are the same, to flash an alarm. By overriding the `timer1_Tick` method of `ctlClock` and adding additional code to it, you will extend the capability of `ctlAlarmClock` while retaining all of the inherent functionality of `ctlClock`.  \n  \n##### To override the timer1_Tick method of ctlClock  \n  \n1.  In the **Code Editor**, locate the `private bool blnAlarmSet;` statement. Immediately beneath it, add the following statement.  \n  \n    ```csharp  \n    private bool blnColorTicker;  \n    ```  \n  \n2.  In the **Code Editor**, locate the closing brace (`})` at the end of the class. Just before the brace, add the following code.  \n  \n    ```csharp  \n    protected override void timer1_Tick(object sender, System.EventArgs e)  \n    {  \n        // Calls the Timer1_Tick method of ctlClock.  \n        base.timer1_Tick(sender, e);  \n        // Checks to see if the alarm is set.  \n        if (AlarmSet == false)  \n            return;  \n        else  \n            // If the date, hour, and minute of the alarm time are the same as  \n            // the current time, flash an alarm.   \n        {  \n            if (AlarmTime.Date == DateTime.Now.Date && AlarmTime.Hour ==   \n                DateTime.Now.Hour && AlarmTime.Minute == DateTime.Now.Minute)  \n            {  \n                // Sets lblAlarmVisible to true, and changes the background color based on  \n                // the value of blnColorTicker. The background color of the label   \n                // will flash once per tick of the clock.  \n                lblAlarm.Visible = true;  \n                if (blnColorTicker == false)   \n                {  \n                    lblAlarm.BackColor = Color.Red;  \n                    blnColorTicker = true;  \n                }  \n                else  \n                {  \n                    lblAlarm.BackColor = Color.Blue;  \n                    blnColorTicker = false;  \n                }  \n            }  \n            else  \n            {  \n                // Once the alarm has sounded for a minute, the label is made   \n                // invisible again.  \n                lblAlarm.Visible = false;  \n            }  \n        }  \n    }  \n    ```  \n  \n     The addition of this code accomplishes several tasks. The `override` statement directs the control to use this method in place of the method that was inherited from the base control. When this method is called, it calls the method it overrides by invoking the `base.timer1_Tick` statement, ensuring that all of the functionality incorporated in the original control is reproduced in this control. It then runs additional code to incorporate the alarm functionality. A flashing label control will appear when the alarm occurs.  \n  \n     Your alarm clock control is almost complete. The only thing that remains is to implement a way to turn it off. To do this, you will add code to the `lblAlarm_Click` method.  \n  \n##### To implement the shutoff method  \n  \n1.  In Solution Explorer, right-click **ctlAlarmClock.cs**, and then click **View Designer**.  \n  \n     The designer opens.  \n  \n2.  Add a button to the control. Set the properties of the button as follows.  \n  \n    |Property|Value|  \n    |--------------|-----------|  \n    |**Name**|`btnAlarmOff`|  \n    |**Text**|**Disable Alarm**|  \n  \n3.  In the designer, double-click **btnAlarmOff**.  \n  \n     The **Code Editor** opens to the `private void btnAlarmOff_Click` line.  \n  \n4.  Modify this method so that it resembles the following code.  \n  \n    ```csharp  \n    private void btnAlarmOff_Click(object sender, System.EventArgs e)  \n    {  \n        // Turns off the alarm.  \n        AlarmSet = false;  \n        // Hides the flashing label.  \n        lblAlarm.Visible = false;  \n    }  \n    ```  \n  \n5.  On the **File** menu, click **Save All** to save the project.  \n  \n### Using the Inherited Control on a Form  \n You can test your inherited control the same way you tested the base class control, `ctlClock`: Press F5 to build the project and run your control in the **UserControl Test Container**. For more information, see [How to: Test the Run-Time Behavior of a UserControl](../../../../docs/framework/winforms/controls/how-to-test-the-run-time-behavior-of-a-usercontrol.md).  \n  \n To put your control to use, you will need to host it on a form. As with a standard composite control, an inherited composite control cannot stand alone and must be hosted in a form or other container. Since `ctlAlarmClock` has a greater depth of functionality, additional code is required to test it. In this procedure, you will write a simple program to test the functionality of `ctlAlarmClock`. You will write code to set and display the `AlarmTime` property of `ctlAlarmClock`, and will test its inherent functions.  \n  \n##### To build and add your control to a test form  \n  \n1.  In Solution Explorer, right-click **ctlClockLib**, and then click **Build**.  \n  \n2.  Add a new **Windows Application** project to the solution, and name it `Test`.  \n  \n3.  In Solution Explorer, right-click the **References** node for your test project. Click **Add Reference** to display the **Add Reference** dialog box. Click the tab labeled **Projects**. Your `ctlClockLib` project will be listed under **Project Name**. Double-click the project to add the reference to the test project.  \n  \n4.  In Solution Explorer, right-click **Test**, and then click **Build**.  \n  \n5.  In the **Toolbox**, expand the **ctlClockLib Components** node.  \n  \n6.  Double-click **ctlAlarmClock** to add a copy of `ctlAlarmClock` to your form.  \n  \n7.  In the **Toolbox**, locate and double-click **DateTimePicker** to add a <xref:System.Windows.Forms.DateTimePicker> control to your form, and then add a <xref:System.Windows.Forms.Label> control by double-clicking **Label**.  \n  \n8.  Use the mouse to position the controls in a convenient place on the form.  \n  \n9. Set the properties of these controls in the following manner.  \n  \n    |Control|Property|Value|  \n    |-------------|--------------|-----------|  \n    |`label1`|**Text**|`(blank space)`|  \n    ||**Name**|`lblTest`|  \n    |`dateTimePicker1`|**Name**|`dtpTest`|  \n    ||**Format**|<xref:System.Windows.Forms.DateTimePickerFormat>|  \n  \n10. In the designer, double-click **dtpTest**.  \n  \n     The **Code Editor** opens to `private void dtpTest_ValueChanged`.  \n  \n11. Modify the code so that it resembles the following.  \n  \n    ```csharp  \n    private void dtpTest_ValueChanged(object sender, System.EventArgs e)  \n    {  \n        ctlAlarmClock1.AlarmTime = dtpTest.Value;  \n        ctlAlarmClock1.AlarmSet = true;  \n        lblTest.Text = \"Alarm Time is \" +  \n            ctlAlarmClock1.AlarmTime.ToShortTimeString();  \n    }  \n    ```  \n  \n12. In Solution Explorer, right-click **Test**, and then click **Set as StartUp Project**.  \n  \n13. On the **Debug** menu, click **Start Debugging**.  \n  \n     The test program starts. Note that the current time is updated in the `ctlAlarmClock` control, and that the starting time is shown in the <xref:System.Windows.Forms.DateTimePicker> control.  \n  \n14. Click the <xref:System.Windows.Forms.DateTimePicker> where the minutes of the hour are displayed.  \n  \n15. Using the keyboard, set a value for minutes that is one minute greater than the current time shown by `ctlAlarmClock`.  \n  \n     The time for the alarm setting is shown in `lblTest`. Wait for the displayed time to reach the alarm setting time. When the displayed time reaches the time to which the alarm is set, the `lblAlarm` will flash.  \n  \n16. Turn off the alarm by clicking `btnAlarmOff`. You may now reset the alarm.  \n  \n     This walkthrough has covered a number of key concepts. You have learned to create a composite control by combining controls and components into a composite control container. You have learned to add properties to your control, and to write code to implement custom functionality. In the last section, you learned to extend the functionality of a given composite control through inheritance, and to alter the functionality of host methods by overriding those methods.  \n  \n## See Also  \n [Varieties of Custom Controls](../../../../docs/framework/winforms/controls/varieties-of-custom-controls.md)   \n [Programming with Components](http://msdn.microsoft.com/library/d4d4fcb4-e0b8-46b3-b679-7ee0026eb9e3)   \n [Component Authoring Walkthroughs](http://msdn.microsoft.com/library/c414cca9-2489-4208-8b38-954586d91c13)   \n [How to: Display a Control in the Choose Toolbox Items Dialog Box](../../../../docs/framework/winforms/controls/how-to-display-a-control-in-the-choose-toolbox-items-dialog-box.md)   \n [Walkthrough: Inheriting from a Windows Forms Control with Visual C#](../../../../docs/framework/winforms/controls/walkthrough-inheriting-from-a-windows-forms-control-with-visual-csharp.md)","nodes":[{"pos":[12,86],"content":"Walkthrough: Authoring a Composite Control with Visual C# | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Walkthrough: Authoring a Composite Control with Visual C# | Microsoft Docs","pos":[0,74]}]},{"pos":[645,702],"content":"Walkthrough: Authoring a Composite Control with Visual C#","linkify":"Walkthrough: Authoring a Composite Control with Visual C#","nodes":[{"content":"Walkthrough: Authoring a Composite Control with Visual C#","pos":[0,57]}]},{"content":"Composite controls provide a means by which custom graphical interfaces can be created and reused.","pos":[705,803]},{"content":"A composite control is essentially a component with a visual representation.","pos":[804,880]},{"content":"As such, it might consist of one or more Windows Forms controls, components, or blocks of code that can extend functionality by validating user input, modifying display properties, or performing other tasks required by the author.","pos":[881,1111]},{"content":"Composite controls can be placed on Windows Forms in the same manner as other controls.","pos":[1112,1199]},{"content":"In the first part of this walkthrough, you create a simple composite control called <ph id=\"ph1\">`ctlClock`</ph>.","pos":[1200,1295],"source":" In the first part of this walkthrough, you create a simple composite control called `ctlClock`."},{"content":"In the second part of the walkthrough, you extend the functionality of <ph id=\"ph1\">`ctlClock`</ph> through inheritance.","pos":[1296,1398],"source":" In the second part of the walkthrough, you extend the functionality of `ctlClock` through inheritance."},{"pos":[1406,1782],"content":"[!NOTE]\n The dialog boxes and menu commands you see might differ from those described in Help depending on your active settings or edition. To change your settings, choose **Import and Export Settings** on the **Tools** menu. For more information, see [Customizing Development Settings in Visual Studio](http://msdn.microsoft.com/en-us/22c4debb-4e31-47a8-8f19-16f328d7dcd3).","leadings":["","> "],"nodes":[{"content":" The dialog boxes and menu commands you see might differ from those described in Help depending on your active settings or edition. To change your settings, choose **Import and Export Settings** on the **Tools** menu. For more information, see [Customizing Development Settings in Visual Studio](http://msdn.microsoft.com/en-us/22c4debb-4e31-47a8-8f19-16f328d7dcd3).","pos":[8,374],"nodes":[{"content":"The dialog boxes and menu commands you see might differ from those described in Help depending on your active settings or edition.","pos":[1,131]},{"content":"To change your settings, choose <bpt id=\"p1\">**</bpt>Import and Export Settings<ept id=\"p1\">**</ept> on the <bpt id=\"p2\">**</bpt>Tools<ept id=\"p2\">**</ept> menu.","pos":[132,217],"source":" To change your settings, choose **Import and Export Settings** on the **Tools** menu."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Customizing Development Settings in Visual Studio<ept id=\"p1\">](http://msdn.microsoft.com/en-us/22c4debb-4e31-47a8-8f19-16f328d7dcd3)</ept>.","pos":[218,366],"source":" For more information, see [Customizing Development Settings in Visual Studio](http://msdn.microsoft.com/en-us/22c4debb-4e31-47a8-8f19-16f328d7dcd3)."}]}]},{"pos":[1791,1811],"content":"Creating the Project","linkify":"Creating the Project","nodes":[{"content":"Creating the Project","pos":[0,20]}]},{"content":"When you create a new project, you specify its name to set the root namespace, assembly name, and project name, and ensure that the default component will be in the correct namespace.","pos":[1815,1998]},{"pos":[2009,2075],"content":"To create the ctlClockLib control library and the ctlClock control","linkify":"To create the ctlClockLib control library and the ctlClock control","nodes":[{"content":"To create the ctlClockLib control library and the ctlClock control","pos":[0,66]}]},{"pos":[2085,2191],"content":"On the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, point to <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Project<ept id=\"p3\">**</ept> to open the <bpt id=\"p4\">**</bpt>New Project<ept id=\"p4\">**</ept> dialog box.","source":"On the **File** menu, point to **New**, and then click **Project** to open the **New Project** dialog box."},{"pos":[2201,2407],"content":"From the list of <ph id=\"ph1\">[!INCLUDE[csprcs](../../../../includes/csprcs-md.md)]</ph> projects, select the <bpt id=\"p1\">**</bpt>Windows Forms Control Library<ept id=\"p1\">**</ept> project template, type <ph id=\"ph2\">`ctlClockLib`</ph> in the <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept> box, and then click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","source":"From the list of [!INCLUDE[csprcs](../../../../includes/csprcs-md.md)] projects, select the **Windows Forms Control Library** project template, type `ctlClockLib` in the **Name** box, and then click **OK**."},{"content":"The project name, <ph id=\"ph1\">`ctlClockLib`</ph>, is also assigned to the root namespace by default.","pos":[2418,2501],"source":"The project name, `ctlClockLib`, is also assigned to the root namespace by default."},{"content":"The root namespace is used to qualify the names of components in the assembly.","pos":[2502,2580]},{"content":"For example, if two assemblies provide components named <ph id=\"ph1\">`ctlClock`</ph>, you can specify your <ph id=\"ph2\">`ctlClock`</ph> component using <ph id=\"ph3\">`ctlClockLib.ctlClock.`</ph>","pos":[2581,2720],"source":" For example, if two assemblies provide components named `ctlClock`, you can specify your `ctlClock` component using `ctlClockLib.ctlClock.`"},{"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>UserControl1.cs<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Rename<ept id=\"p2\">**</ept>.","pos":[2730,2811],"source":"In Solution Explorer, right-click **UserControl1.cs**, and then click **Rename**."},{"content":"Change the file name to <ph id=\"ph1\">`ctlClock.cs`</ph>.","pos":[2812,2850],"source":" Change the file name to `ctlClock.cs`."},{"content":"Click the <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept> button when you are asked if you want to rename all references to the code element \"UserControl1\".","pos":[2851,2967],"source":" Click the **Yes** button when you are asked if you want to rename all references to the code element \"UserControl1\"."},{"pos":[2979,3270],"content":"[!NOTE]\nBy default, a composite control inherits from the <xref:System.Windows.Forms.UserControl> class provided by the system. The <xref:System.Windows.Forms.UserControl> class provides functionality required by all composite controls, and implements standard methods and properties.","leadings":["","    >  "],"nodes":[{"content":"By default, a composite control inherits from the <xref:System.Windows.Forms.UserControl> class provided by the system. The <xref:System.Windows.Forms.UserControl> class provides functionality required by all composite controls, and implements standard methods and properties.","pos":[8,284],"nodes":[{"content":"By default, a composite control inherits from the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.UserControl&gt;</ph> class provided by the system.","pos":[0,119],"source":"By default, a composite control inherits from the <xref:System.Windows.Forms.UserControl> class provided by the system."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Forms.UserControl&gt;</ph> class provides functionality required by all composite controls, and implements standard methods and properties.","pos":[120,276],"source":" The <xref:System.Windows.Forms.UserControl> class provides functionality required by all composite controls, and implements standard methods and properties."}]}]},{"pos":[3280,3341],"content":"On the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Save All<ept id=\"p2\">**</ept> to save the project.","source":"On the **File** menu, click **Save All** to save the project."},{"pos":[3350,3413],"content":"Adding Windows Controls and Components to the Composite Control","linkify":"Adding Windows Controls and Components to the Composite Control","nodes":[{"content":"Adding Windows Controls and Components to the Composite Control","pos":[0,63]}]},{"content":"A visual interface is an essential part of your composite control.","pos":[3417,3483]},{"content":"This visual interface is implemented by the addition of one or more Windows controls to the designer surface.","pos":[3484,3593]},{"content":"In the following demonstration, you will incorporate Windows controls into your composite control and write code to implement functionality.","pos":[3594,3734]},{"pos":[3745,3797],"content":"To add a Label and a Timer to your composite control","linkify":"To add a Label and a Timer to your composite control","nodes":[{"content":"To add a Label and a Timer to your composite control","pos":[0,52]}]},{"pos":[3807,3891],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlClock.cs<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>View Designer<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **ctlClock.cs**, and then click **View Designer**."},{"pos":[3901,3990],"content":"In the <bpt id=\"p1\">**</bpt>Toolbox<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">**</bpt>Common Controls<ept id=\"p2\">**</ept> node, and then double-click <bpt id=\"p3\">**</bpt>Label<ept id=\"p3\">**</ept>.","source":"In the **Toolbox**, expand the **Common Controls** node, and then double-click **Label**."},{"pos":[4001,4109],"content":"A <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Label&gt;</ph> control named <ph id=\"ph2\">`label1`</ph> is added to your control on the designer surface.","source":"A <xref:System.Windows.Forms.Label> control named `label1` is added to your control on the designer surface."},{"content":"In the designer, click <bpt id=\"p1\">**</bpt>label1<ept id=\"p1\">**</ept>.","pos":[4119,4153],"source":"In the designer, click **label1**."},{"content":"In the Properties window, set the following properties.","pos":[4154,4209]},{"content":"Property","pos":[4220,4228]},{"content":"Change to","pos":[4229,4238]},{"pos":[4286,4294],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"pos":[4316,4324],"content":"<bpt id=\"p1\">**</bpt>Text<ept id=\"p1\">**</ept>","source":"**Text**"},{"pos":[4349,4362],"content":"<bpt id=\"p1\">**</bpt>TextAlign<ept id=\"p1\">**</ept>","source":"**TextAlign**"},{"pos":[4386,4399],"content":"<bpt id=\"p1\">**</bpt>Font.Size<ept id=\"p1\">**</ept>","source":"**Font.Size**"},{"pos":[4415,4499],"content":"In the <bpt id=\"p1\">**</bpt>Toolbox<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">**</bpt>Components<ept id=\"p2\">**</ept> node, and then double-click <bpt id=\"p3\">**</bpt>Timer<ept id=\"p3\">**</ept>.","source":"In the **Toolbox**, expand the **Components** node, and then double-click **Timer**."},{"content":"Because a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Timer&gt;</ph> is a component, it has no visual representation at run time.","pos":[4510,4614],"source":"Because a <xref:System.Windows.Forms.Timer> is a component, it has no visual representation at run time."},{"content":"Therefore, it does not appear with the controls on the designer surface, but rather in the <bpt id=\"p1\">**</bpt>Component Designer<ept id=\"p1\">**</ept> (a tray at the bottom of the designer surface).","pos":[4615,4776],"source":" Therefore, it does not appear with the controls on the designer surface, but rather in the **Component Designer** (a tray at the bottom of the designer surface)."},{"pos":[4786,4989],"content":"In the <bpt id=\"p1\">**</bpt>Component Designer<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>timer1<ept id=\"p2\">**</ept>, and then set the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Timer.Interval%2A&gt;</ph> property to <ph id=\"ph2\">`1000`</ph> and the <ph id=\"ph3\">&lt;xref:System.Windows.Forms.Timer.Enabled%2A&gt;</ph> property to <ph id=\"ph4\">`true`</ph>.","source":"In the **Component Designer**, click **timer1**, and then set the <xref:System.Windows.Forms.Timer.Interval%2A> property to `1000` and the <xref:System.Windows.Forms.Timer.Enabled%2A> property to `true`."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Timer.Interval%2A&gt;</ph> property controls the frequency with which the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Timer&gt;</ph> component ticks.","pos":[5000,5147],"source":"The <xref:System.Windows.Forms.Timer.Interval%2A> property controls the frequency with which the <xref:System.Windows.Forms.Timer> component ticks."},{"content":"Each time <ph id=\"ph1\">`timer1`</ph> ticks, it runs the code in the <ph id=\"ph2\">`timer1_Tick`</ph> event.","pos":[5148,5218],"source":" Each time `timer1` ticks, it runs the code in the `timer1_Tick` event."},{"content":"The interval represents the number of milliseconds between ticks.","pos":[5219,5284]},{"pos":[5294,5397],"content":"In the <bpt id=\"p1\">**</bpt>Component Designer<ept id=\"p1\">**</ept>, double-click <bpt id=\"p2\">**</bpt>timer1<ept id=\"p2\">**</ept> to go to the <ph id=\"ph1\">`timer1_Tick`</ph> event for <ph id=\"ph2\">`ctlClock`</ph>.","source":"In the **Component Designer**, double-click **timer1** to go to the `timer1_Tick` event for `ctlClock`."},{"content":"Modify the code so that it resembles the following code sample.","pos":[5407,5470]},{"content":"Be sure to change the access modifier from <ph id=\"ph1\">`private`</ph> to <ph id=\"ph2\">`protected`</ph>.","pos":[5471,5539],"source":" Be sure to change the access modifier from `private` to `protected`."},{"content":"This code will cause the current time to be shown in <ph id=\"ph1\">`lblDisplay`</ph>.","pos":[5784,5850],"source":"This code will cause the current time to be shown in `lblDisplay`."},{"content":"Because the interval of <ph id=\"ph1\">`timer1`</ph> was set to <ph id=\"ph2\">`1000`</ph>, this event will occur every thousand milliseconds, thus updating the current time every second.","pos":[5851,5998],"source":" Because the interval of `timer1` was set to `1000`, this event will occur every thousand milliseconds, thus updating the current time every second."},{"content":"Modify the method to be overridable with the <ph id=\"ph1\">`virtual`</ph> keyword.","pos":[6008,6071],"source":"Modify the method to be overridable with the `virtual` keyword."},{"content":"For more information, see the  \"Inheriting from a User Control\" section below.","pos":[6072,6150]},{"pos":[6264,6325],"content":"On the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Save All<ept id=\"p2\">**</ept> to save the project.","source":"On the **File** menu, click **Save All** to save the project."},{"pos":[6334,6376],"content":"Adding Properties to the Composite Control","linkify":"Adding Properties to the Composite Control","nodes":[{"content":"Adding Properties to the Composite Control","pos":[0,42]}]},{"content":"Your clock control now encapsulates a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Label&gt;</ph> control and a <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Timer&gt;</ph> component, each with its own set of inherent properties.","pos":[6380,6556],"source":"Your clock control now encapsulates a <xref:System.Windows.Forms.Label> control and a <xref:System.Windows.Forms.Timer> component, each with its own set of inherent properties."},{"content":"While the individual properties of these controls will not be accessible to subsequent users of your control, you can create and expose custom properties by writing the appropriate blocks of code.","pos":[6557,6753]},{"content":"In the following procedure, you will add properties to your control that enable the user to change the color of the background and text.","pos":[6754,6890]},{"pos":[6901,6944],"content":"To add a property to your composite control","linkify":"To add a property to your composite control","nodes":[{"content":"To add a property to your composite control","pos":[0,43]}]},{"pos":[6954,7034],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlClock.cs<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>View Code<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **ctlClock.cs**, and then click **View Code**."},{"pos":[7045,7088],"content":"The <bpt id=\"p1\">**</bpt>Code Editor<ept id=\"p1\">**</ept> for your control opens.","source":"The **Code Editor** for your control opens."},{"content":"Locate the <ph id=\"ph1\">`public partial class ctlClock`</ph> statement.","pos":[7098,7151],"source":"Locate the `public partial class ctlClock` statement."},{"content":"Beneath the opening brace (<ph id=\"ph1\">`{)`</ph>, type the following code.","pos":[7152,7209],"source":" Beneath the opening brace (`{)`, type the following code."},{"content":"These statements create the private variables that you will use to store the values for the properties you are about to create.","pos":[7311,7438]},{"content":"Type the following code beneath the variable declarations from step 2.","pos":[7448,7518]},{"content":"The preceding code makes two custom properties, <ph id=\"ph1\">`ClockForeColor`</ph> and <ph id=\"ph2\">`ClockBackColor`</ph>, available to subsequent users of this control.","pos":[8388,8521],"source":"The preceding code makes two custom properties, `ClockForeColor` and `ClockBackColor`, available to subsequent users of this control."},{"content":"The <ph id=\"ph1\">`get`</ph> and <ph id=\"ph2\">`set`</ph> statements provide for storage and retrieval of the property value, as well as code to implement functionality appropriate to the property.","pos":[8522,8681],"source":" The `get` and `set` statements provide for storage and retrieval of the property value, as well as code to implement functionality appropriate to the property."},{"pos":[8691,8752],"content":"On the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Save All<ept id=\"p2\">**</ept> to save the project.","source":"On the **File** menu, click **Save All** to save the project."},{"pos":[8761,8780],"content":"Testing the Control","linkify":"Testing the Control","nodes":[{"content":"Testing the Control","pos":[0,19]}]},{"content":"Controls are not stand-alone applications; they must be hosted in a container.","pos":[8784,8862]},{"content":"Test your control's run-time behavior and exercise its properties with the <bpt id=\"p1\">**</bpt>UserControl Test Container<ept id=\"p1\">**</ept>.","pos":[8863,8969],"source":" Test your control's run-time behavior and exercise its properties with the **UserControl Test Container**."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Test the Run-Time Behavior of a UserControl<ept id=\"p1\">](../../../../docs/framework/winforms/controls/how-to-test-the-run-time-behavior-of-a-usercontrol.md)</ept>.","pos":[8970,9150],"source":" For more information, see [How to: Test the Run-Time Behavior of a UserControl](../../../../docs/framework/winforms/controls/how-to-test-the-run-time-behavior-of-a-usercontrol.md)."},{"pos":[9161,9181],"content":"To test your control","linkify":"To test your control","nodes":[{"content":"To test your control","pos":[0,20]}]},{"pos":[9191,9280],"content":"Press F5 to build the project and run your control in the <bpt id=\"p1\">**</bpt>UserControl Test Container<ept id=\"p1\">**</ept>.","source":"Press F5 to build the project and run your control in the **UserControl Test Container**."},{"pos":[9290,9425],"content":"In the test container's property grid, locate the <ph id=\"ph1\">`ClockBackColor`</ph> property, and then select the property to display the color palette.","source":"In the test container's property grid, locate the `ClockBackColor` property, and then select the property to display the color palette."},{"content":"Choose a color by clicking it.","pos":[9435,9465]},{"content":"The background color of your control changes to the color you selected.","pos":[9476,9547]},{"pos":[9557,9662],"content":"Use a similar sequence of events to verify that the <ph id=\"ph1\">`ClockForeColor`</ph> property is functioning as expected.","source":"Use a similar sequence of events to verify that the `ClockForeColor` property is functioning as expected."},{"content":"In this section and the preceding sections, you have seen how components and Windows controls can be combined with code and packaging to provide custom functionality in the form of a composite control.","pos":[9673,9874]},{"content":"You have learned to expose properties in your composite control, and how to test your control after it is complete.","pos":[9875,9990]},{"content":"In the next section you will learn how to construct an inherited composite control using <ph id=\"ph1\">`ctlClock`</ph> as a base.","pos":[9991,10101],"source":" In the next section you will learn how to construct an inherited composite control using `ctlClock` as a base."},{"pos":[10110,10145],"content":"Inheriting from a Composite Control","linkify":"Inheriting from a Composite Control","nodes":[{"content":"Inheriting from a Composite Control","pos":[0,35]}]},{"content":"In the previous sections, you learned how to combine Windows controls, components, and code into reusable composite controls.","pos":[10149,10274]},{"content":"Your composite control can now be used as a base upon which other controls can be built.","pos":[10275,10363]},{"content":"The process of deriving a class from a base class is called <bpt id=\"p1\">*</bpt>inheritance<ept id=\"p1\">*</ept>.","pos":[10364,10438],"source":" The process of deriving a class from a base class is called *inheritance*."},{"content":"In this section, you will create a composite control called <ph id=\"ph1\">`ctlAlarmClock`</ph>.","pos":[10439,10515],"source":" In this section, you will create a composite control called `ctlAlarmClock`."},{"content":"This control will be derived from its parent control, <ph id=\"ph1\">`ctlClock`</ph>.","pos":[10516,10581],"source":" This control will be derived from its parent control, `ctlClock`."},{"content":"You will learn to extend the functionality of <ph id=\"ph1\">`ctlClock`</ph> by overriding parent methods and adding new methods and properties.","pos":[10582,10706],"source":" You will learn to extend the functionality of `ctlClock` by overriding parent methods and adding new methods and properties."},{"content":"The first step in creating an inherited control is to derive it from its parent.","pos":[10713,10793]},{"content":"This action creates a new control that has all of the properties, methods, and graphical characteristics of the parent control, but can also act as a base for the addition of new or modified functionality.","pos":[10794,10999]},{"pos":[11010,11041],"content":"To create the inherited control","linkify":"To create the inherited control","nodes":[{"content":"To create the inherited control","pos":[0,31]}]},{"pos":[11051,11152],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlClockLib<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>User Control<ept id=\"p3\">**</ept>.","source":"In Solution Explorer, right-click **ctlClockLib**, point to **Add**, and then click **User Control**."},{"pos":[11163,11201],"content":"The <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog box opens.","source":"The **Add New Item** dialog box opens."},{"pos":[11211,11258],"content":"Select the <bpt id=\"p1\">**</bpt>Inherited User Control<ept id=\"p1\">**</ept> template.","source":"Select the **Inherited User Control** template."},{"pos":[11268,11337],"content":"In the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> box, type <ph id=\"ph1\">`ctlAlarmClock.cs`</ph>, and then click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.","source":"In the **Name** box, type `ctlAlarmClock.cs`, and then click **Add**."},{"pos":[11348,11394],"content":"The <bpt id=\"p1\">**</bpt>Inheritance Picker<ept id=\"p1\">**</ept> dialog box appears.","source":"The **Inheritance Picker** dialog box appears."},{"pos":[11404,11456],"content":"Under <bpt id=\"p1\">**</bpt>Component Name<ept id=\"p1\">**</ept>, double-click <bpt id=\"p2\">**</bpt>ctlClock<ept id=\"p2\">**</ept>.","source":"Under **Component Name**, double-click **ctlClock**."},{"content":"In Solution Explorer, browse through the current projects.","pos":[11466,11524]},{"pos":[11536,11624],"content":"[!NOTE]\nA file called **ctlAlarmClock.cs** has been added to the current project.","leadings":["","    >  "],"nodes":[{"content":"A file called <bpt id=\"p1\">**</bpt>ctlAlarmClock.cs<ept id=\"p1\">**</ept> has been added to the current project.","pos":[8,81],"source":"A file called **ctlAlarmClock.cs** has been added to the current project."}]},{"pos":[11634,11661],"content":"Adding the Alarm Properties","linkify":"Adding the Alarm Properties","nodes":[{"content":"Adding the Alarm Properties","pos":[0,27]}]},{"content":"Properties are added to an inherited control in the same way they are added to a composite control.","pos":[11665,11764]},{"content":"You will now use the property declaration syntax to add two properties to your control: <ph id=\"ph1\">`AlarmTime`</ph>, which will store the value of the date and time the alarm is to go off, and <ph id=\"ph2\">`AlarmSet`</ph>, which will indicate whether the alarm is set.","pos":[11765,11999],"source":" You will now use the property declaration syntax to add two properties to your control: `AlarmTime`, which will store the value of the date and time the alarm is to go off, and `AlarmSet`, which will indicate whether the alarm is set."},{"pos":[12011,12054],"content":"To add properties to your composite control","linkify":"To add properties to your composite control","nodes":[{"content":"To add properties to your composite control","pos":[0,43]}]},{"pos":[12064,12146],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlAlarmClock<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>View Code<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **ctlAlarmClock**, and then click **View Code**."},{"content":"Locate the <ph id=\"ph1\">`public class`</ph> statement.","pos":[12156,12192],"source":"Locate the `public class` statement."},{"content":"Note that your control inherits from <ph id=\"ph1\">`ctlClockLib.ctlClock`</ph>.","pos":[12193,12253],"source":" Note that your control inherits from `ctlClockLib.ctlClock`."},{"content":"Beneath the opening brace (<ph id=\"ph1\">`{)`</ph> statement, type the following code.","pos":[12254,12321],"source":" Beneath the opening brace (`{)` statement, type the following code."},{"pos":[12918,12966],"content":"Adding to the Graphical Interface of the Control","linkify":"Adding to the Graphical Interface of the Control","nodes":[{"content":"Adding to the Graphical Interface of the Control","pos":[0,48]}]},{"content":"Your inherited control has a visual interface that is identical to the control it inherits from.","pos":[12970,13066]},{"content":"It possesses the same constituent controls as its parent control, but the properties of the constituent controls will not be available unless they were specifically exposed.","pos":[13067,13240]},{"content":"You may add to the graphical interface of an inherited composite control in the same manner as you would add to any composite control.","pos":[13241,13375]},{"content":"To continue adding to your alarm clock's visual interface, you will add a label control that will flash when the alarm is sounding.","pos":[13376,13507]},{"pos":[13519,13543],"content":"To add the label control","linkify":"To add the label control","nodes":[{"content":"To add the label control","pos":[0,24]}]},{"pos":[13553,13639],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlAlarmClock<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>View Designer<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **ctlAlarmClock**, and then click **View Designer**."},{"pos":[13650,13708],"content":"The designer for <ph id=\"ph1\">`ctlAlarmClock`</ph> opens in the main window.","source":"The designer for `ctlAlarmClock` opens in the main window."},{"content":"Click the display portion of the control, and view the Properties window.","pos":[13718,13791]},{"pos":[13803,14122],"content":"[!NOTE]\nWhile all the properties are displayed, they are dimmed. This indicates that these properties are native to `lblDisplay` and cannot be modified or accessed in the Properties window. By default, controls contained in a composite control are `private`, and their properties are not accessible by any means.","leadings":["","    >  "],"nodes":[{"content":"While all the properties are displayed, they are dimmed. This indicates that these properties are native to `lblDisplay` and cannot be modified or accessed in the Properties window. By default, controls contained in a composite control are `private`, and their properties are not accessible by any means.","pos":[8,312],"nodes":[{"content":"While all the properties are displayed, they are dimmed.","pos":[0,56]},{"content":"This indicates that these properties are native to <ph id=\"ph1\">`lblDisplay`</ph> and cannot be modified or accessed in the Properties window.","pos":[57,181],"source":" This indicates that these properties are native to `lblDisplay` and cannot be modified or accessed in the Properties window."},{"content":"By default, controls contained in a composite control are <ph id=\"ph1\">`private`</ph>, and their properties are not accessible by any means.","pos":[182,304],"source":" By default, controls contained in a composite control are `private`, and their properties are not accessible by any means."}]}]},{"pos":[14134,14417],"content":"[!NOTE]\nIf you want subsequent users of your composite control to have access to its internal controls, declare them as `public` or `protected`. This will allow you to set and modify properties of controls contained within your composite control by using the appropriate code.","leadings":["","    >  "],"nodes":[{"content":"If you want subsequent users of your composite control to have access to its internal controls, declare them as `public` or `protected`. This will allow you to set and modify properties of controls contained within your composite control by using the appropriate code.","pos":[8,276],"nodes":[{"content":"If you want subsequent users of your composite control to have access to its internal controls, declare them as <ph id=\"ph1\">`public`</ph> or <ph id=\"ph2\">`protected`</ph>.","pos":[0,136],"source":"If you want subsequent users of your composite control to have access to its internal controls, declare them as `public` or `protected`."},{"content":"This will allow you to set and modify properties of controls contained within your composite control by using the appropriate code.","pos":[137,268]}]}]},{"content":"Add a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Label&gt;</ph> control to your composite control.","pos":[14427,14501],"source":"Add a <xref:System.Windows.Forms.Label> control to your composite control."},{"content":"Using the mouse, drag the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.Label&gt;</ph> control immediately beneath the display box.","pos":[14511,14615],"source":"Using the mouse, drag the <xref:System.Windows.Forms.Label> control immediately beneath the display box."},{"content":"In the Properties window, set the following properties.","pos":[14616,14671]},{"content":"Property","pos":[14682,14690]},{"content":"Setting","pos":[14691,14698]},{"pos":[14744,14752],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"pos":[14772,14780],"content":"<bpt id=\"p1\">**</bpt>Text<ept id=\"p1\">**</ept>","source":"**Text**"},{"pos":[14781,14791],"content":"<bpt id=\"p1\">**</bpt>Alarm!<ept id=\"p1\">**</ept>","source":"**Alarm!**"},{"pos":[14800,14813],"content":"<bpt id=\"p1\">**</bpt>TextAlign<ept id=\"p1\">**</ept>","source":"**TextAlign**"},{"pos":[14837,14848],"content":"<bpt id=\"p1\">**</bpt>Visible<ept id=\"p1\">**</ept>","source":"**Visible**"},{"pos":[14867,14897],"content":"Adding the Alarm Functionality","linkify":"Adding the Alarm Functionality","nodes":[{"content":"Adding the Alarm Functionality","pos":[0,30]}]},{"content":"In the previous procedures, you added properties and a control that will enable alarm functionality in your composite control.","pos":[14901,15027]},{"content":"In this procedure, you will add code to compare the current time to the alarm time and, if they are the same, to flash an alarm.","pos":[15028,15156]},{"content":"By overriding the <ph id=\"ph1\">`timer1_Tick`</ph> method of <ph id=\"ph2\">`ctlClock`</ph> and adding additional code to it, you will extend the capability of <ph id=\"ph3\">`ctlAlarmClock`</ph> while retaining all of the inherent functionality of <ph id=\"ph4\">`ctlClock`</ph>.","pos":[15157,15358],"source":" By overriding the `timer1_Tick` method of `ctlClock` and adding additional code to it, you will extend the capability of `ctlAlarmClock` while retaining all of the inherent functionality of `ctlClock`."},{"pos":[15370,15416],"content":"To override the timer1_Tick method of ctlClock","linkify":"To override the timer1_Tick method of ctlClock","nodes":[{"content":"To override the timer1_Tick method of ctlClock","pos":[0,46]}]},{"content":"In the <bpt id=\"p1\">**</bpt>Code Editor<ept id=\"p1\">**</ept>, locate the <ph id=\"ph1\">`private bool blnAlarmSet;`</ph> statement.","pos":[15426,15499],"source":"In the **Code Editor**, locate the `private bool blnAlarmSet;` statement."},{"content":"Immediately beneath it, add the following statement.","pos":[15500,15552]},{"content":"In the <bpt id=\"p1\">**</bpt>Code Editor<ept id=\"p1\">**</ept>, locate the closing brace (<ph id=\"ph1\">`})`</ph> at the end of the class.","pos":[15626,15705],"source":"In the **Code Editor**, locate the closing brace (`})` at the end of the class."},{"content":"Just before the brace, add the following code.","pos":[15706,15752]},{"content":"The addition of this code accomplishes several tasks.","pos":[17288,17341]},{"content":"The <ph id=\"ph1\">`override`</ph> statement directs the control to use this method in place of the method that was inherited from the base control.","pos":[17342,17470],"source":" The `override` statement directs the control to use this method in place of the method that was inherited from the base control."},{"content":"When this method is called, it calls the method it overrides by invoking the <ph id=\"ph1\">`base.timer1_Tick`</ph> statement, ensuring that all of the functionality incorporated in the original control is reproduced in this control.","pos":[17471,17684],"source":" When this method is called, it calls the method it overrides by invoking the `base.timer1_Tick` statement, ensuring that all of the functionality incorporated in the original control is reproduced in this control."},{"content":"It then runs additional code to incorporate the alarm functionality.","pos":[17685,17753]},{"content":"A flashing label control will appear when the alarm occurs.","pos":[17754,17813]},{"content":"Your alarm clock control is almost complete.","pos":[17824,17868]},{"content":"The only thing that remains is to implement a way to turn it off.","pos":[17869,17934]},{"content":"To do this, you will add code to the <ph id=\"ph1\">`lblAlarm_Click`</ph> method.","pos":[17935,17996],"source":" To do this, you will add code to the `lblAlarm_Click` method."},{"pos":[18008,18039],"content":"To implement the shutoff method","linkify":"To implement the shutoff method","nodes":[{"content":"To implement the shutoff method","pos":[0,31]}]},{"pos":[18049,18138],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlAlarmClock.cs<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>View Designer<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **ctlAlarmClock.cs**, and then click **View Designer**."},{"content":"The designer opens.","pos":[18149,18168]},{"content":"Add a button to the control.","pos":[18178,18206]},{"content":"Set the properties of the button as follows.","pos":[18207,18251]},{"content":"Property","pos":[18262,18270]},{"content":"Value","pos":[18271,18276]},{"pos":[18320,18328],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"pos":[18351,18359],"content":"<bpt id=\"p1\">**</bpt>Text<ept id=\"p1\">**</ept>","source":"**Text**"},{"pos":[18360,18377],"content":"<bpt id=\"p1\">**</bpt>Disable Alarm<ept id=\"p1\">**</ept>","source":"**Disable Alarm**"},{"pos":[18388,18434],"content":"In the designer, double-click <bpt id=\"p1\">**</bpt>btnAlarmOff<ept id=\"p1\">**</ept>.","source":"In the designer, double-click **btnAlarmOff**."},{"pos":[18445,18516],"content":"The <bpt id=\"p1\">**</bpt>Code Editor<ept id=\"p1\">**</ept> opens to the <ph id=\"ph1\">`private void btnAlarmOff_Click`</ph> line.","source":"The **Code Editor** opens to the `private void btnAlarmOff_Click` line."},{"content":"Modify this method so that it resembles the following code.","pos":[18526,18585]},{"pos":[18849,18910],"content":"On the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Save All<ept id=\"p2\">**</ept> to save the project.","source":"On the **File** menu, click **Save All** to save the project."},{"pos":[18920,18957],"content":"Using the Inherited Control on a Form","linkify":"Using the Inherited Control on a Form","nodes":[{"content":"Using the Inherited Control on a Form","pos":[0,37]}]},{"content":"You can test your inherited control the same way you tested the base class control, <ph id=\"ph1\">`ctlClock`</ph>: Press F5 to build the project and run your control in the <bpt id=\"p1\">**</bpt>UserControl Test Container<ept id=\"p1\">**</ept>.","pos":[18961,19146],"source":"You can test your inherited control the same way you tested the base class control, `ctlClock`: Press F5 to build the project and run your control in the **UserControl Test Container**."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Test the Run-Time Behavior of a UserControl<ept id=\"p1\">](../../../../docs/framework/winforms/controls/how-to-test-the-run-time-behavior-of-a-usercontrol.md)</ept>.","pos":[19147,19327],"source":" For more information, see [How to: Test the Run-Time Behavior of a UserControl](../../../../docs/framework/winforms/controls/how-to-test-the-run-time-behavior-of-a-usercontrol.md)."},{"content":"To put your control to use, you will need to host it on a form.","pos":[19334,19397]},{"content":"As with a standard composite control, an inherited composite control cannot stand alone and must be hosted in a form or other container.","pos":[19398,19534]},{"content":"Since <ph id=\"ph1\">`ctlAlarmClock`</ph> has a greater depth of functionality, additional code is required to test it.","pos":[19535,19634],"source":" Since `ctlAlarmClock` has a greater depth of functionality, additional code is required to test it."},{"content":"In this procedure, you will write a simple program to test the functionality of <ph id=\"ph1\">`ctlAlarmClock`</ph>.","pos":[19635,19731],"source":" In this procedure, you will write a simple program to test the functionality of `ctlAlarmClock`."},{"content":"You will write code to set and display the <ph id=\"ph1\">`AlarmTime`</ph> property of <ph id=\"ph2\">`ctlAlarmClock`</ph>, and will test its inherent functions.","pos":[19732,19853],"source":" You will write code to set and display the `AlarmTime` property of `ctlAlarmClock`, and will test its inherent functions."},{"pos":[19865,19909],"content":"To build and add your control to a test form","linkify":"To build and add your control to a test form","nodes":[{"content":"To build and add your control to a test form","pos":[0,44]}]},{"pos":[19919,19995],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>ctlClockLib<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **ctlClockLib**, and then click **Build**."},{"pos":[20005,20083],"content":"Add a new <bpt id=\"p1\">**</bpt>Windows Application<ept id=\"p1\">**</ept> project to the solution, and name it <ph id=\"ph1\">`Test`</ph>.","source":"Add a new **Windows Application** project to the solution, and name it `Test`."},{"content":"In Solution Explorer, right-click the <bpt id=\"p1\">**</bpt>References<ept id=\"p1\">**</ept> node for your test project.","pos":[20093,20173],"source":"In Solution Explorer, right-click the **References** node for your test project."},{"content":"Click <bpt id=\"p1\">**</bpt>Add Reference<ept id=\"p1\">**</ept> to display the <bpt id=\"p2\">**</bpt>Add Reference<ept id=\"p2\">**</ept> dialog box.","pos":[20174,20242],"source":" Click **Add Reference** to display the **Add Reference** dialog box."},{"content":"Click the tab labeled <bpt id=\"p1\">**</bpt>Projects<ept id=\"p1\">**</ept>.","pos":[20243,20278],"source":" Click the tab labeled **Projects**."},{"content":"Your <ph id=\"ph1\">`ctlClockLib`</ph> project will be listed under <bpt id=\"p1\">**</bpt>Project Name<ept id=\"p1\">**</ept>.","pos":[20279,20344],"source":" Your `ctlClockLib` project will be listed under **Project Name**."},{"content":"Double-click the project to add the reference to the test project.","pos":[20345,20411]},{"pos":[20421,20490],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>Test<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **Test**, and then click **Build**."},{"pos":[20500,20563],"content":"In the <bpt id=\"p1\">**</bpt>Toolbox<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">**</bpt>ctlClockLib Components<ept id=\"p2\">**</ept> node.","source":"In the **Toolbox**, expand the **ctlClockLib Components** node."},{"pos":[20573,20650],"content":"Double-click <bpt id=\"p1\">**</bpt>ctlAlarmClock<ept id=\"p1\">**</ept> to add a copy of <ph id=\"ph1\">`ctlAlarmClock`</ph> to your form.","source":"Double-click **ctlAlarmClock** to add a copy of `ctlAlarmClock` to your form."},{"pos":[20660,20883],"content":"In the <bpt id=\"p1\">**</bpt>Toolbox<ept id=\"p1\">**</ept>, locate and double-click <bpt id=\"p2\">**</bpt>DateTimePicker<ept id=\"p2\">**</ept> to add a <ph id=\"ph1\">&lt;xref:System.Windows.Forms.DateTimePicker&gt;</ph> control to your form, and then add a <ph id=\"ph2\">&lt;xref:System.Windows.Forms.Label&gt;</ph> control by double-clicking <bpt id=\"p3\">**</bpt>Label<ept id=\"p3\">**</ept>.","source":"In the **Toolbox**, locate and double-click **DateTimePicker** to add a <xref:System.Windows.Forms.DateTimePicker> control to your form, and then add a <xref:System.Windows.Forms.Label> control by double-clicking **Label**."},{"content":"Use the mouse to position the controls in a convenient place on the form.","pos":[20893,20966]},{"content":"Set the properties of these controls in the following manner.","pos":[20975,21036]},{"content":"Control","pos":[21047,21054]},{"content":"Property","pos":[21055,21063]},{"content":"Value","pos":[21064,21069]},{"pos":[21136,21144],"content":"<bpt id=\"p1\">**</bpt>Text<ept id=\"p1\">**</ept>","source":"**Text**"},{"pos":[21170,21178],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"pos":[21215,21223],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>","source":"**Name**"},{"pos":[21243,21253],"content":"<bpt id=\"p1\">**</bpt>Format<ept id=\"p1\">**</ept>","source":"**Format**"},{"pos":[21313,21355],"content":"In the designer, double-click <bpt id=\"p1\">**</bpt>dtpTest<ept id=\"p1\">**</ept>.","source":"In the designer, double-click **dtpTest**."},{"pos":[21366,21431],"content":"The <bpt id=\"p1\">**</bpt>Code Editor<ept id=\"p1\">**</ept> opens to <ph id=\"ph1\">`private void dtpTest_ValueChanged`</ph>.","source":"The **Code Editor** opens to `private void dtpTest_ValueChanged`."},{"content":"Modify the code so that it resembles the following.","pos":[21441,21492]},{"pos":[21820,21906],"content":"In Solution Explorer, right-click <bpt id=\"p1\">**</bpt>Test<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Set as StartUp Project<ept id=\"p2\">**</ept>.","source":"In Solution Explorer, right-click **Test**, and then click **Set as StartUp Project**."},{"pos":[21916,21965],"content":"On the <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Start Debugging<ept id=\"p2\">**</ept>.","source":"On the **Debug** menu, click **Start Debugging**."},{"content":"The test program starts.","pos":[21976,22000]},{"content":"Note that the current time is updated in the <ph id=\"ph1\">`ctlAlarmClock`</ph> control, and that the starting time is shown in the <ph id=\"ph2\">&lt;xref:System.Windows.Forms.DateTimePicker&gt;</ph> control.","pos":[22001,22165],"source":" Note that the current time is updated in the `ctlAlarmClock` control, and that the starting time is shown in the <xref:System.Windows.Forms.DateTimePicker> control."},{"content":"Click the <ph id=\"ph1\">&lt;xref:System.Windows.Forms.DateTimePicker&gt;</ph> where the minutes of the hour are displayed.","pos":[22175,22272],"source":"Click the <xref:System.Windows.Forms.DateTimePicker> where the minutes of the hour are displayed."},{"pos":[22282,22400],"content":"Using the keyboard, set a value for minutes that is one minute greater than the current time shown by <ph id=\"ph1\">`ctlAlarmClock`</ph>.","source":"Using the keyboard, set a value for minutes that is one minute greater than the current time shown by `ctlAlarmClock`."},{"content":"The time for the alarm setting is shown in <ph id=\"ph1\">`lblTest`</ph>.","pos":[22411,22464],"source":"The time for the alarm setting is shown in `lblTest`."},{"content":"Wait for the displayed time to reach the alarm setting time.","pos":[22465,22525]},{"content":"When the displayed time reaches the time to which the alarm is set, the <ph id=\"ph1\">`lblAlarm`</ph> will flash.","pos":[22526,22620],"source":" When the displayed time reaches the time to which the alarm is set, the `lblAlarm` will flash."},{"content":"Turn off the alarm by clicking <ph id=\"ph1\">`btnAlarmOff`</ph>.","pos":[22630,22675],"source":"Turn off the alarm by clicking `btnAlarmOff`."},{"content":"You may now reset the alarm.","pos":[22676,22704]},{"content":"This walkthrough has covered a number of key concepts.","pos":[22715,22769]},{"content":"You have learned to create a composite control by combining controls and components into a composite control container.","pos":[22770,22889]},{"content":"You have learned to add properties to your control, and to write code to implement custom functionality.","pos":[22890,22994]},{"content":"In the last section, you learned to extend the functionality of a given composite control through inheritance, and to alter the functionality of host methods by overriding those methods.","pos":[22995,23181]},{"pos":[23190,23198],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Varieties of Custom Controls<ept id=\"p1\">](../../../../docs/framework/winforms/controls/varieties-of-custom-controls.md)</ept><ph id=\"ph1\"> </ph>","pos":[23202,23311],"source":"[Varieties of Custom Controls](../../../../docs/framework/winforms/controls/varieties-of-custom-controls.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Programming with Components<ept id=\"p1\">](http://msdn.microsoft.com/library/d4d4fcb4-e0b8-46b3-b679-7ee0026eb9e3)</ept><ph id=\"ph1\"> </ph>","pos":[23314,23417],"source":" [Programming with Components](http://msdn.microsoft.com/library/d4d4fcb4-e0b8-46b3-b679-7ee0026eb9e3) "},{"content":"<bpt id=\"p1\"> [</bpt>Component Authoring Walkthroughs<ept id=\"p1\">](http://msdn.microsoft.com/library/c414cca9-2489-4208-8b38-954586d91c13)</ept><ph id=\"ph1\"> </ph>","pos":[23420,23528],"source":" [Component Authoring Walkthroughs](http://msdn.microsoft.com/library/c414cca9-2489-4208-8b38-954586d91c13) "},{"content":"<bpt id=\"p1\"> [</bpt>How to: Display a Control in the Choose Toolbox Items Dialog Box<ept id=\"p1\">](../../../../docs/framework/winforms/controls/how-to-display-a-control-in-the-choose-toolbox-items-dialog-box.md)</ept><ph id=\"ph1\"> </ph>","pos":[23531,23712],"source":" [How to: Display a Control in the Choose Toolbox Items Dialog Box](../../../../docs/framework/winforms/controls/how-to-display-a-control-in-the-choose-toolbox-items-dialog-box.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Walkthrough: Inheriting from a Windows Forms Control with Visual C#<ept id=\"p1\">](../../../../docs/framework/winforms/controls/walkthrough-inheriting-from-a-windows-forms-control-with-visual-csharp.md)</ept>","pos":[23715,23905],"source":" [Walkthrough: Inheriting from a Windows Forms Control with Visual C#](../../../../docs/framework/winforms/controls/walkthrough-inheriting-from-a-windows-forms-control-with-visual-csharp.md)"}]}