{"content":"---\ntitle: \"Discovery Router Service\"\nms.date: \"03/30/2017\"\nms.assetid: 3d30af47-b24f-40e5-833a-24d77125c9e6\n---\n# Discovery Router Service\nThis sample demonstrates how to forward discovery messages to another endpoint.  \n  \n## Demonstrates  \n Discovery Routing  \n  \n## Discussion  \n Discovery routing is useful in a scenario in which a client is looking for a service using a proxy and the proxy is unaware of such a service, but knows of another proxy. This proxy can forward the discovery packet from this client to the second proxy. The second proxy can look for the service and return the responses to the original client.  \n  \n In this sample, a client sends a message to a discovery routing component. This message is sent to a specific endpoint on the discovery router. The router then forwards the message to a UDP multicast endpoint. The probe message goes out to the multicast endpoint and a service listening on a UDP multicast address responds to that discovery router. The discovery router collects the responses and sends them back to the client.  \n  \n#### To set up, build, and run the sample  \n  \n1.  Build the sample.  \n  \n2.  Run the DiscoveryRouter executable.  \n  \n3.  Run the service executable from the build directory.  \n  \n4.  Run the client executable. Note that the client locates the service.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Discovery\\DiscoveryRouter`\n","nodes":[{"pos":[4,108],"embed":true,"restype":"x-metadata","content":"title: \"Discovery Router Service\"\nms.date: \"03/30/2017\"\nms.assetid: 3d30af47-b24f-40e5-833a-24d77125c9e6","nodes":[{"content":"Discovery Router Service","nodes":[{"pos":[0,24],"content":"Discovery Router Service","nodes":[{"content":"Discovery Router Service","pos":[0,24]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[115,139],"content":"Discovery Router Service","linkify":"Discovery Router Service","nodes":[{"content":"Discovery Router Service","pos":[0,24]}]},{"content":"This sample demonstrates how to forward discovery messages to another endpoint.","pos":[140,219]},{"pos":[228,240],"content":"Demonstrates","linkify":"Demonstrates","nodes":[{"content":"Demonstrates","pos":[0,12]}]},{"content":"Discovery Routing","pos":[244,261]},{"pos":[270,280],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"Discovery routing is useful in a scenario in which a client is looking for a service using a proxy and the proxy is unaware of such a service, but knows of another proxy.","pos":[284,454]},{"content":"This proxy can forward the discovery packet from this client to the second proxy.","pos":[455,536]},{"content":"The second proxy can look for the service and return the responses to the original client.","pos":[537,627]},{"content":"In this sample, a client sends a message to a discovery routing component.","pos":[634,708]},{"content":"This message is sent to a specific endpoint on the discovery router.","pos":[709,777]},{"content":"The router then forwards the message to a UDP multicast endpoint.","pos":[778,843]},{"content":"The probe message goes out to the multicast endpoint and a service listening on a UDP multicast address responds to that discovery router.","pos":[844,982]},{"content":"The discovery router collects the responses and sends them back to the client.","pos":[983,1061]},{"pos":[1072,1108],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"content":"Build the sample.","pos":[1118,1135]},{"content":"Run the DiscoveryRouter executable.","pos":[1145,1180]},{"content":"Run the service executable from the build directory.","pos":[1190,1242]},{"content":"Run the client executable.","pos":[1252,1278]},{"content":"Note that the client locates the service.","pos":[1279,1320]},{"pos":[1328,1460],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1514,1824],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[1825,1875]}]}