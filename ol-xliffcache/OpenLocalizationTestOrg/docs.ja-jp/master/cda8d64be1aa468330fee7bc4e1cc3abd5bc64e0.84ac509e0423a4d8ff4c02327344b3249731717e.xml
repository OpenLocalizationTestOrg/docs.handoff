{"content":"---\ntitle: \"ICLRPolicyManager::SetUnhandledExceptionPolicy Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICLRPolicyManager.SetUnhandledExceptionPolicy\"\napi_location: \n  - \"mscoree.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICLRPolicyManager::SetUnhandledExceptionPolicy\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ICLRPolicyManager::SetUnhandledExceptionPolicy method [.NET Framework hosting]\"\n  - \"SetUnhandledExceptionPolicy method [.NET Framework hosting]\"\nms.assetid: 5268480e-280a-4931-b7a3-dc3ffdf7f78f\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 8\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# ICLRPolicyManager::SetUnhandledExceptionPolicy Method\nSpecifies the behavior of the common language runtime (CLR) when an unhandled exception occurs.  \n  \n## Syntax  \n  \n```  \nHRESULT SetUnhandledExceptionPolicy (  \n    [in] EClrUnhandledExceptionPolicy policy  \n);  \n```  \n  \n#### Parameters  \n `policy`  \n [in] One of the [EClrUnhandledException](../../../../docs/framework/unmanaged-api/hosting/eclrunhandledexception-enumeration.md) values, indicating whether the behavior is set by the CLR or the host.  \n  \n## Return Value  \n  \n|HRESULT|Description|  \n|-------------|-----------------|  \n|S_OK|`SetUnhandledExceptionPolicy` returned successfully.|  \n|HOST_E_CLRNOTAVAILABLE|The CLR has not been loaded into a process, or the CLR is in a state in which it cannot run managed code or process the call successfully.|  \n|HOST_E_TIMEOUT|The call timed out.|  \n|HOST_E_NOT_OWNER|The caller does not own the lock.|  \n|HOST_E_ABANDONED|An event was canceled while a blocked thread or fiber was waiting on it.|  \n|E_FAIL|An unknown catastrophic failure occurred. After a method returns E_FAIL, the CLR is no longer usable within the process. Subsequent calls to hosting methods return HOST_E_CLRNOTAVAILABLE.|  \n  \n## Remarks  \n By default, the CLR is the final handler for all unhandled exceptions, and its default behavior is to tear down the process. The host can change this behavior by setting the `policy` value to eHostDeterminedPolicy. This value allows the host to implement its own default behavior, as with earlier versions of the CLR.  \n  \n## Requirements  \n **Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md).  \n  \n **Header:** MSCorEE.h  \n  \n **Library:** Included as a resource in MSCorEE.dll  \n  \n **.NET Framework Versions:** [!INCLUDE[net_current_v20plus](../../../../includes/net-current-v20plus-md.md)]  \n  \n## See Also  \n [EClrUnhandledException Enumeration](../../../../docs/framework/unmanaged-api/hosting/eclrunhandledexception-enumeration.md)   \n [ICLRControl Interface](../../../../docs/framework/unmanaged-api/hosting/iclrcontrol-interface.md)   \n [ICLRPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)   \n [IHostPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/ihostpolicymanager-interface.md)","nodes":[{"pos":[4,785],"embed":true,"restype":"x-metadata","content":"title: \"ICLRPolicyManager::SetUnhandledExceptionPolicy Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICLRPolicyManager.SetUnhandledExceptionPolicy\"\napi_location: \n  - \"mscoree.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICLRPolicyManager::SetUnhandledExceptionPolicy\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ICLRPolicyManager::SetUnhandledExceptionPolicy method [.NET Framework hosting]\"\n  - \"SetUnhandledExceptionPolicy method [.NET Framework hosting]\"\nms.assetid: 5268480e-280a-4931-b7a3-dc3ffdf7f78f\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 8\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","nodes":[{"content":"ICLRPolicyManager::SetUnhandledExceptionPolicy Method | Microsoft Docs","nodes":[{"pos":[0,70],"content":"ICLRPolicyManager::SetUnhandledExceptionPolicy Method | Microsoft Docs","nodes":[{"content":"ICLRPolicyManager::SetUnhandledExceptionPolicy Method | Microsoft Docs","pos":[0,70]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[792,845],"content":"ICLRPolicyManager::SetUnhandledExceptionPolicy Method","linkify":"ICLRPolicyManager::SetUnhandledExceptionPolicy Method","nodes":[{"content":"ICLRPolicyManager::SetUnhandledExceptionPolicy Method","pos":[0,53]}]},{"content":"Specifies the behavior of the common language runtime (CLR) when an unhandled exception occurs.","pos":[846,941]},{"pos":[950,956],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1074,1084],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] One of the <bpt id=\"p1\">[</bpt>EClrUnhandledException<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclrunhandledexception-enumeration.md)</ept> values, indicating whether the behavior is set by the CLR or the host.","pos":[1100,1299],"source":"[in] One of the [EClrUnhandledException](../../../../docs/framework/unmanaged-api/hosting/eclrunhandledexception-enumeration.md) values, indicating whether the behavior is set by the CLR or the host."},{"pos":[1308,1320],"content":"Return Value","linkify":"Return Value","nodes":[{"content":"Return Value","pos":[0,12]}]},{"content":"HRESULT","pos":[1327,1334]},{"content":"Description","pos":[1335,1346]},{"content":"S_OK","pos":[1387,1391]},{"pos":[1392,1444],"content":"<ph id=\"ph1\">`SetUnhandledExceptionPolicy`</ph> returned successfully.","source":"`SetUnhandledExceptionPolicy` returned successfully."},{"content":"HOST_E_CLRNOTAVAILABLE","pos":[1449,1471]},{"content":"The CLR has not been loaded into a process, or the CLR is in a state in which it cannot run managed code or process the call successfully.","pos":[1472,1610]},{"content":"HOST_E_TIMEOUT","pos":[1615,1629]},{"content":"The call timed out.","pos":[1630,1649]},{"content":"HOST_E_NOT_OWNER","pos":[1654,1670]},{"content":"The caller does not own the lock.","pos":[1671,1704]},{"content":"HOST_E_ABANDONED","pos":[1709,1725]},{"content":"An event was canceled while a blocked thread or fiber was waiting on it.","pos":[1726,1798]},{"content":"E_FAIL","pos":[1803,1809]},{"content":"An unknown catastrophic failure occurred.","pos":[1810,1851]},{"content":"After a method returns E_FAIL, the CLR is no longer usable within the process.","pos":[1852,1930]},{"content":"Subsequent calls to hosting methods return HOST_E_CLRNOTAVAILABLE.","pos":[1931,1997]},{"pos":[2007,2014],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"By default, the CLR is the final handler for all unhandled exceptions, and its default behavior is to tear down the process.","pos":[2018,2142]},{"content":"The host can change this behavior by setting the <ph id=\"ph1\">`policy`</ph> value to eHostDeterminedPolicy.","pos":[2143,2232],"source":" The host can change this behavior by setting the `policy` value to eHostDeterminedPolicy."},{"content":"This value allows the host to implement its own default behavior, as with earlier versions of the CLR.","pos":[2233,2335]},{"pos":[2344,2356],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[2360,2464],"content":"<bpt id=\"p1\">**</bpt>Platforms:<ept id=\"p1\">**</ept> See <bpt id=\"p2\">[</bpt>System Requirements<ept id=\"p2\">](../../../../docs/framework/get-started/system-requirements.md)</ept>.","source":"**Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md)."},{"pos":[2471,2492],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> MSCorEE.h","source":"**Header:** MSCorEE.h"},{"pos":[2499,2549],"content":"<bpt id=\"p1\">**</bpt>Library:<ept id=\"p1\">**</ept> Included as a resource in MSCorEE.dll","source":"**Library:** Included as a resource in MSCorEE.dll"},{"pos":[2556,2664],"content":"<bpt id=\"p1\">**</bpt>.NET Framework Versions:<ept id=\"p1\">**</ept> <ph id=\"ph1\">[!INCLUDE[net_current_v20plus](../../../../includes/net-current-v20plus-md.md)]</ph>","source":"**.NET Framework Versions:** [!INCLUDE[net_current_v20plus](../../../../includes/net-current-v20plus-md.md)]"},{"pos":[2673,2681],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>EClrUnhandledException Enumeration<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/eclrunhandledexception-enumeration.md)</ept><ph id=\"ph1\"> </ph>","pos":[2685,2810],"source":"[EClrUnhandledException Enumeration](../../../../docs/framework/unmanaged-api/hosting/eclrunhandledexception-enumeration.md) "},{"content":"<bpt id=\"p1\">[</bpt>ICLRControl Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrcontrol-interface.md)</ept><ph id=\"ph1\"> </ph>","pos":[2814,2913],"source":"[ICLRControl Interface](../../../../docs/framework/unmanaged-api/hosting/iclrcontrol-interface.md) "},{"content":"<bpt id=\"p1\">[</bpt>ICLRPolicyManager Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md)</ept><ph id=\"ph1\"> </ph>","pos":[2917,3028],"source":"[ICLRPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/iclrpolicymanager-interface.md) "},{"content":"<bpt id=\"p1\">[</bpt>IHostPolicyManager Interface<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/hosting/ihostpolicymanager-interface.md)</ept>","pos":[3032,3144],"source":"[IHostPolicyManager Interface](../../../../docs/framework/unmanaged-api/hosting/ihostpolicymanager-interface.md)"}]}