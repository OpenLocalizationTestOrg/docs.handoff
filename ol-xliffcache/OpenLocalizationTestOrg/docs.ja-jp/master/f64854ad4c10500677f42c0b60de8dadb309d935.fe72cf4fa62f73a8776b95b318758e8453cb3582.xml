{"content":"---\ntitle: \"Data Contract Known Types | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nhelpviewer_keywords: \n  - \"data contracts [WCF], known types\"\n  - \"KnownTypeAttribute [WCF]\"\n  - \"KnownTypes [WCF]\"\nms.assetid: 1a0baea1-27b7-470d-9136-5bbad86c4337\ncaps.latest.revision: 42\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Data Contract Known Types\nThe <xref:System.Runtime.Serialization.KnownTypeAttribute> class allows you to specify, in advance, the types that should be included for consideration during deserialization. For a working example, see the [Known Types](../../../../docs/framework/wcf/samples/known-types.md) example.  \n  \n Normally, when passing parameters and return values between a client and a service, both endpoints share all of the data contracts of the data to be transmitted. However, this is not the case in the following circumstances:  \n  \n-   The sent data contract is derived from the expected data contract. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] the section about inheritance in [Data Contract Equivalence](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md)). In that case, the transmitted data does not have the same data contract as expected by the receiving endpoint.  \n  \n-   The declared type for the information to be transmitted is an interface, as opposed to a class, structure, or enumeration. Therefore, it cannot be known in advance which type that implements the interface is actually sent and therefore, the receiving endpoint cannot determine in advance the data contract for the transmitted data.  \n  \n-   The declared type for the information to be transmitted is <xref:System.Object>. Because every type inherits from <xref:System.Object>, and it cannot be known in advance which type is actually sent, the receiving endpoint cannot determine in advance the data contract for the transmitted data. This is a special case of the first item: Every data contract derives from the default, a blank data contract that is generated for <xref:System.Object>.  \n  \n-   Some types, which include [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types, have members that are in one of the preceding three categories. For example, <xref:System.Collections.Hashtable> uses <xref:System.Object> to store the actual objects in the hash table. When serializing these types, the receiving side cannot determine in advance the data contract for these members.  \n  \n## The KnownTypeAttribute Class  \n When data arrives at a receiving endpoint, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] runtime attempts to deserialize the data into an instance of a common language runtime (CLR) type. The type that is instantiated for deserialization is chosen by first inspecting the incoming message to determine the data contract to which the contents of the message conform. The deserialization engine then attempts to find a CLR type that implements a data contract compatible with the message contents. The set of candidate types that the deserialization engine allows for during this process is referred to as the deserializer's set of \"known types.\"  \n  \n One way to let the deserialization engine know about a type is by using the <xref:System.Runtime.Serialization.KnownTypeAttribute>. The attribute cannot be applied to individual data members, only to whole data contract types. The attribute is applied to an *outer type* that can be a class or a structure. In its most basic usage, applying the attribute specifies a type as a \"known type.\" This causes the known type to be a part of the set of known types whenever an object of the outer type or any object referred to through its members is being deserialized. More than one <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute can be applied to the same type.  \n  \n## Known Types and Primitives  \n Primitive types, as well as certain types treated as primitives (for example, <xref:System.DateTime> and <xref:System.Xml.XmlElement>) are always \"known\" and never have to be added through this mechanism. However, arrays of primitive types have to be added explicitly. Most collections are considered equivalent to arrays. (Non-generic collections are considered equivalent to arrays of <xref:System.Object>). For an example of the using primitives, primitive arrays, and primitive collections, see Example 4.  \n  \n> [!NOTE]\n>  Unlike other primitive types, the <xref:System.DateTimeOffset> structure is not a known type by default, so it must be manually added to the list of known types.  \n  \n## Examples  \n The following examples show the <xref:System.Runtime.Serialization.KnownTypeAttribute> class in use.  \n  \n#### Example 1  \n There are three classes with an inheritance relationship.  \n  \n [!code-csharp[C_KnownTypeAttribute#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#1)]\n [!code-vb[C_KnownTypeAttribute#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#1)]  \n  \n The following `CompanyLogo` class can be serialized, but cannot be deserialized if the `ShapeOfLogo` member is set to either a `CircleType` or a `TriangleType` object, because the deserialization engine does not recognize any types with data contract names \"Circle\" or \"Triangle.\"  \n  \n [!code-csharp[C_KnownTypeAttribute#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#2)]\n [!code-vb[C_KnownTypeAttribute#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#2)]  \n  \n The correct way to write the `CompanyLogo` type is shown in the following code.  \n  \n [!code-csharp[C_KnownTypeAttribute#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#3)]\n [!code-vb[C_KnownTypeAttribute#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#3)]  \n  \n Whenever the outer type `CompanyLogo2` is being deserialized, the deserialization engine knows about `CircleType` and `TriangleType` and, therefore, is able to find matching types for the \"Circle\" and \"Triangle\" data contracts.  \n  \n#### Example 2  \n In the following example, even though both `CustomerTypeA` and `CustomerTypeB` have the `Customer` data contract, an instance of `CustomerTypeB` is created whenever a `PurchaseOrder` is deserialized, because only `CustomerTypeB` is known to the deserialization engine.  \n  \n [!code-csharp[C_KnownTypeAttribute#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#4)]\n [!code-vb[C_KnownTypeAttribute#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#4)]  \n  \n#### Example 3  \n In the following example, a <xref:System.Collections.Hashtable> stores its contents internally as <xref:System.Object>. To successfully deserialize a hash table, the deserialization engine must know the set of possible types that can occur there. In this case, we know in advance that only `Book` and `Magazine` objects are stored in the `Catalog`, so those are added using the <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute.  \n  \n [!code-csharp[C_KnownTypeAttribute#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#5)]\n [!code-vb[C_KnownTypeAttribute#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#5)]  \n  \n#### Example 4  \n In the following example, a data contract stores a number and an operation to perform on the number. The `Numbers` data member can be an integer, an array of integers, or a <xref:System.Collections.Generic.List%601> that contains integers.  \n  \n> [!CAUTION]\n>  This will only work on the client side if SVCUTIL.EXE is used to generate a WCF proxy. SVCUTIL.EXE retrieves metadata from the service including any known types. Without this information a client will not be able to deserialize the types.  \n  \n [!code-csharp[C_KnownTypeAttribute#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#6)]\n [!code-vb[C_KnownTypeAttribute#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#6)]  \n  \n This is the application code.  \n  \n [!code-csharp[C_KnownTypeAttribute#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#7)]\n [!code-vb[C_KnownTypeAttribute#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#7)]  \n  \n## Known Types, Inheritance, and Interfaces  \n When a known type is associated with a particular type using the `KnownTypeAttribute` attribute, the known type is also associated with all of the derived types of that type. For example, see the following code.  \n  \n [!code-csharp[C_KnownTypeAttribute#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#8)]\n [!code-vb[C_KnownTypeAttribute#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#8)]  \n  \n The `DoubleDrawing` class does not require the `KnownTypeAttribute` attribute to use `Square` and `Circle` in the `AdditionalShape` field, because the base class (`Drawing`) already has these attributes applied.  \n  \n Known types can be associated only with classes and structures, not interfaces.  \n  \n## Known Types Using Open Generic Methods  \n It may be necessary to add a generic type as a known type. However, an open generic type cannot be passed as a parameter to the `KnownTypeAttribute` attribute.  \n  \n This problem can be solved by using an alternative mechanism: Write a method that returns a list of types to add to the known types collection. The name of the method is then specified as a string argument to the `KnownTypeAttribute` attribute due to some restrictions.  \n  \n The method must exist on the type to which the `KnownTypeAttribute` attribute is applied, must be static, must accept no parameters, and must return an object that can be assigned to <xref:System.Collections.IEnumerable> of <xref:System.Type>.  \n  \n You cannot combine the `KnownTypeAttribute` attribute with a method name and `KnownTypeAttribute` attributes with actual types on the same type. Furthermore, you cannot apply more than one `KnownTypeAttribute` with a method name to the same type.  \n  \n See the following class.  \n  \n [!code-csharp[C_KnownTypeAttribute#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#9)]\n [!code-vb[C_KnownTypeAttribute#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#9)]  \n  \n The `theDrawing` field contains instances of a generic class `ColorDrawing` and a generic class `BlackAndWhiteDrawing`, both of which inherit from a generic class `Drawing`. Normally, both must be added to known types, but the following is not valid syntax for attributes.  \n  \n```csharp  \n// Invalid syntax for attributes:  \n// [KnownType(typeof(ColorDrawing<T>))]  \n// [KnownType(typeof(BlackAndWhiteDrawing<T>))]  \n```  \n  \n```vb  \n' Invalid syntax for attributes:  \n' <KnownType(GetType(ColorDrawing(Of T))), _  \n' KnownType(GetType(BlackAndWhiteDrawing(Of T)))>  \n```  \n  \n Thus, a method must be created to return these types. The correct way to write this type, then, is shown in the following code.  \n  \n [!code-csharp[C_KnownTypeAttribute#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#10)]\n [!code-vb[C_KnownTypeAttribute#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#10)]  \n  \n## Additional Ways to Add Known Types  \n Additionally, known types can be added through a configuration file. This is useful when you do not control the type that requires known types for proper deserialization, such as when using third-party type libraries with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].  \n  \n The following configuration file shows how to specify a known type in a configuration file.  \n  \n `<configuration>`  \n  \n `<system.runtime.serialization>`  \n  \n `<dataContractSerializer>`  \n  \n `<declaredTypes>`  \n  \n `<add type=\"MyCompany.Library.Shape,`  \n  \n `MyAssembly, Version=2.0.0.0, Culture=neutral,`  \n  \n `PublicKeyToken=XXXXXX, processorArchitecture=MSIL\">`  \n  \n `<knownType type=\"MyCompany.Library.Circle,`  \n  \n `MyAssembly, Version=2.0.0.0, Culture=neutral,`  \n  \n `PublicKeyToken=XXXXXX, processorArchitecture=MSIL\"/>`  \n  \n `</add>`  \n  \n `</declaredTypes>`  \n  \n `</dataContractSerializer>`  \n  \n `</system.runtime.serialization>`  \n  \n `</configuration>`  \n  \n In the preceding configuration file a data contract type called `MyCompany.Library.Shape` is declared to have `MyCompany.Library.Circle` as a known type.  \n  \n## See Also  \n <xref:System.Runtime.Serialization.KnownTypeAttribute>   \n <xref:System.Collections.Hashtable>   \n <xref:System.Object>   \n <xref:System.Runtime.Serialization.DataContractSerializer>   \n <xref:System.Runtime.Serialization.DataContractSerializer.KnownTypes%2A>   \n [Known Types](../../../../docs/framework/wcf/samples/known-types.md)   \n [Data Contract Equivalence](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md)   \n [Designing Service Contracts](../../../../docs/framework/wcf/designing-service-contracts.md)","nodes":[{"pos":[12,54],"content":"Data Contract Known Types | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Data Contract Known Types | Microsoft Docs","pos":[0,42]}]},{"pos":[503,528],"content":"Data Contract Known Types","linkify":"Data Contract Known Types","nodes":[{"content":"Data Contract Known Types","pos":[0,25]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.KnownTypeAttribute&gt;</ph> class allows you to specify, in advance, the types that should be included for consideration during deserialization.","pos":[529,704],"source":"The <xref:System.Runtime.Serialization.KnownTypeAttribute> class allows you to specify, in advance, the types that should be included for consideration during deserialization."},{"content":"For a working example, see the <bpt id=\"p1\">[</bpt>Known Types<ept id=\"p1\">](../../../../docs/framework/wcf/samples/known-types.md)</ept> example.","pos":[705,813],"source":" For a working example, see the [Known Types](../../../../docs/framework/wcf/samples/known-types.md) example."},{"content":"Normally, when passing parameters and return values between a client and a service, both endpoints share all of the data contracts of the data to be transmitted.","pos":[820,981]},{"content":"However, this is not the case in the following circumstances:","pos":[982,1043]},{"content":"The sent data contract is derived from the expected data contract.","pos":[1053,1119]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph> the section about inheritance in <bpt id=\"p1\">[</bpt>Data Contract Equivalence<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md)</ept>).","pos":[1120,1319],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] the section about inheritance in [Data Contract Equivalence](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md))."},{"content":"In that case, the transmitted data does not have the same data contract as expected by the receiving endpoint.","pos":[1320,1430]},{"content":"The declared type for the information to be transmitted is an interface, as opposed to a class, structure, or enumeration.","pos":[1440,1562]},{"content":"Therefore, it cannot be known in advance which type that implements the interface is actually sent and therefore, the receiving endpoint cannot determine in advance the data contract for the transmitted data.","pos":[1563,1771]},{"content":"The declared type for the information to be transmitted is <ph id=\"ph1\">&lt;xref:System.Object&gt;</ph>.","pos":[1781,1861],"source":"The declared type for the information to be transmitted is <xref:System.Object>."},{"content":"Because every type inherits from <ph id=\"ph1\">&lt;xref:System.Object&gt;</ph>, and it cannot be known in advance which type is actually sent, the receiving endpoint cannot determine in advance the data contract for the transmitted data.","pos":[1862,2074],"source":" Because every type inherits from <xref:System.Object>, and it cannot be known in advance which type is actually sent, the receiving endpoint cannot determine in advance the data contract for the transmitted data."},{"content":"This is a special case of the first item: Every data contract derives from the default, a blank data contract that is generated for <ph id=\"ph1\">&lt;xref:System.Object&gt;</ph>.","pos":[2075,2228],"source":" This is a special case of the first item: Every data contract derives from the default, a blank data contract that is generated for <xref:System.Object>."},{"content":"Some types, which include <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> types, have members that are in one of the preceding three categories.","pos":[2238,2398],"source":"Some types, which include [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types, have members that are in one of the preceding three categories."},{"content":"For example, <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph> uses <ph id=\"ph2\">&lt;xref:System.Object&gt;</ph> to store the actual objects in the hash table.","pos":[2399,2520],"source":" For example, <xref:System.Collections.Hashtable> uses <xref:System.Object> to store the actual objects in the hash table."},{"content":"When serializing these types, the receiving side cannot determine in advance the data contract for these members.","pos":[2521,2634]},{"pos":[2643,2671],"content":"The KnownTypeAttribute Class","linkify":"The KnownTypeAttribute Class","nodes":[{"content":"The KnownTypeAttribute Class","pos":[0,28]}]},{"content":"When data arrives at a receiving endpoint, the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> runtime attempts to deserialize the data into an instance of a common language runtime (CLR) type.","pos":[2675,2876],"source":"When data arrives at a receiving endpoint, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] runtime attempts to deserialize the data into an instance of a common language runtime (CLR) type."},{"content":"The type that is instantiated for deserialization is chosen by first inspecting the incoming message to determine the data contract to which the contents of the message conform.","pos":[2877,3054]},{"content":"The deserialization engine then attempts to find a CLR type that implements a data contract compatible with the message contents.","pos":[3055,3184]},{"content":"The set of candidate types that the deserialization engine allows for during this process is referred to as the deserializer's set of \"known types.\"","pos":[3185,3333]},{"content":"One way to let the deserialization engine know about a type is by using the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.KnownTypeAttribute&gt;</ph>.","pos":[3340,3471],"source":"One way to let the deserialization engine know about a type is by using the <xref:System.Runtime.Serialization.KnownTypeAttribute>."},{"content":"The attribute cannot be applied to individual data members, only to whole data contract types.","pos":[3472,3566]},{"content":"The attribute is applied to an <bpt id=\"p1\">*</bpt>outer type<ept id=\"p1\">*</ept> that can be a class or a structure.","pos":[3567,3646],"source":" The attribute is applied to an *outer type* that can be a class or a structure."},{"content":"In its most basic usage, applying the attribute specifies a type as a \"known type.\"","pos":[3647,3730]},{"content":"This causes the known type to be a part of the set of known types whenever an object of the outer type or any object referred to through its members is being deserialized.","pos":[3731,3902]},{"content":"More than one <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.KnownTypeAttribute&gt;</ph> attribute can be applied to the same type.","pos":[3903,4014],"source":" More than one <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute can be applied to the same type."},{"pos":[4023,4049],"content":"Known Types and Primitives","linkify":"Known Types and Primitives","nodes":[{"content":"Known Types and Primitives","pos":[0,26]}]},{"content":"Primitive types, as well as certain types treated as primitives (for example, <ph id=\"ph1\">&lt;xref:System.DateTime&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Xml.XmlElement&gt;</ph>) are always \"known\" and never have to be added through this mechanism.","pos":[4053,4257],"source":"Primitive types, as well as certain types treated as primitives (for example, <xref:System.DateTime> and <xref:System.Xml.XmlElement>) are always \"known\" and never have to be added through this mechanism."},{"content":"However, arrays of primitive types have to be added explicitly.","pos":[4258,4321]},{"content":"Most collections are considered equivalent to arrays.","pos":[4322,4375]},{"content":"(Non-generic collections are considered equivalent to arrays of <ph id=\"ph1\">&lt;xref:System.Object&gt;</ph>).","pos":[4376,4462],"source":" (Non-generic collections are considered equivalent to arrays of <xref:System.Object>)."},{"content":"For an example of the using primitives, primitive arrays, and primitive collections, see Example 4.","pos":[4463,4562]},{"pos":[4570,4742],"content":"[!NOTE]\n Unlike other primitive types, the <xref:System.DateTimeOffset> structure is not a known type by default, so it must be manually added to the list of known types.","leadings":["","> "],"nodes":[{"content":"Unlike other primitive types, the <ph id=\"ph1\">&lt;xref:System.DateTimeOffset&gt;</ph> structure is not a known type by default, so it must be manually added to the list of known types.","pos":[9,170],"source":" Unlike other primitive types, the <xref:System.DateTimeOffset> structure is not a known type by default, so it must be manually added to the list of known types."}]},{"pos":[4751,4759],"content":"Examples","linkify":"Examples","nodes":[{"content":"Examples","pos":[0,8]}]},{"content":"The following examples show the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.KnownTypeAttribute&gt;</ph> class in use.","pos":[4763,4863],"source":"The following examples show the <xref:System.Runtime.Serialization.KnownTypeAttribute> class in use."},{"pos":[4874,4883],"content":"Example 1","linkify":"Example 1","nodes":[{"content":"Example 1","pos":[0,9]}]},{"content":"There are three classes with an inheritance relationship.","pos":[4887,4944]},{"pos":[4951,5208],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#1<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#1<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#1)]\n [!code-vb[C_KnownTypeAttribute#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#1)]"},{"pos":[5215,5495],"content":"The following <ph id=\"ph1\">`CompanyLogo`</ph> class can be serialized, but cannot be deserialized if the <ph id=\"ph2\">`ShapeOfLogo`</ph> member is set to either a <ph id=\"ph3\">`CircleType`</ph> or a <ph id=\"ph4\">`TriangleType`</ph> object, because the deserialization engine does not recognize any types with data contract names \"Circle\" or \"Triangle.\"","source":"The following `CompanyLogo` class can be serialized, but cannot be deserialized if the `ShapeOfLogo` member is set to either a `CircleType` or a `TriangleType` object, because the deserialization engine does not recognize any types with data contract names \"Circle\" or \"Triangle.\""},{"pos":[5502,5759],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#2<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#2)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#2<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#2)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#2)]\n [!code-vb[C_KnownTypeAttribute#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#2)]"},{"pos":[5766,5845],"content":"The correct way to write the <ph id=\"ph1\">`CompanyLogo`</ph> type is shown in the following code.","source":"The correct way to write the `CompanyLogo` type is shown in the following code."},{"pos":[5852,6109],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#3<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#3)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#3<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#3)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#3)]\n [!code-vb[C_KnownTypeAttribute#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#3)]"},{"pos":[6116,6343],"content":"Whenever the outer type <ph id=\"ph1\">`CompanyLogo2`</ph> is being deserialized, the deserialization engine knows about <ph id=\"ph2\">`CircleType`</ph> and <ph id=\"ph3\">`TriangleType`</ph> and, therefore, is able to find matching types for the \"Circle\" and \"Triangle\" data contracts.","source":"Whenever the outer type `CompanyLogo2` is being deserialized, the deserialization engine knows about `CircleType` and `TriangleType` and, therefore, is able to find matching types for the \"Circle\" and \"Triangle\" data contracts."},{"pos":[6354,6363],"content":"Example 2","linkify":"Example 2","nodes":[{"content":"Example 2","pos":[0,9]}]},{"pos":[6367,6635],"content":"In the following example, even though both <ph id=\"ph1\">`CustomerTypeA`</ph> and <ph id=\"ph2\">`CustomerTypeB`</ph> have the <ph id=\"ph3\">`Customer`</ph> data contract, an instance of <ph id=\"ph4\">`CustomerTypeB`</ph> is created whenever a <ph id=\"ph5\">`PurchaseOrder`</ph> is deserialized, because only <ph id=\"ph6\">`CustomerTypeB`</ph> is known to the deserialization engine.","source":"In the following example, even though both `CustomerTypeA` and `CustomerTypeB` have the `Customer` data contract, an instance of `CustomerTypeB` is created whenever a `PurchaseOrder` is deserialized, because only `CustomerTypeB` is known to the deserialization engine."},{"pos":[6642,6899],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#4<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#4)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#4<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#4)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#4)]\n [!code-vb[C_KnownTypeAttribute#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#4)]"},{"pos":[6910,6919],"content":"Example 3","linkify":"Example 3","nodes":[{"content":"Example 3","pos":[0,9]}]},{"content":"In the following example, a <ph id=\"ph1\">&lt;xref:System.Collections.Hashtable&gt;</ph> stores its contents internally as <ph id=\"ph2\">&lt;xref:System.Object&gt;</ph>.","pos":[6923,7042],"source":"In the following example, a <xref:System.Collections.Hashtable> stores its contents internally as <xref:System.Object>."},{"content":"To successfully deserialize a hash table, the deserialization engine must know the set of possible types that can occur there.","pos":[7043,7169]},{"content":"In this case, we know in advance that only <ph id=\"ph1\">`Book`</ph> and <ph id=\"ph2\">`Magazine`</ph> objects are stored in the <ph id=\"ph3\">`Catalog`</ph>, so those are added using the <ph id=\"ph4\">&lt;xref:System.Runtime.Serialization.KnownTypeAttribute&gt;</ph> attribute.","pos":[7170,7366],"source":" In this case, we know in advance that only `Book` and `Magazine` objects are stored in the `Catalog`, so those are added using the <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute."},{"pos":[7373,7630],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#5<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#5)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#5<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#5)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#5)]\n [!code-vb[C_KnownTypeAttribute#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#5)]"},{"pos":[7641,7650],"content":"Example 4","linkify":"Example 4","nodes":[{"content":"Example 4","pos":[0,9]}]},{"content":"In the following example, a data contract stores a number and an operation to perform on the number.","pos":[7654,7754]},{"content":"The <ph id=\"ph1\">`Numbers`</ph> data member can be an integer, an array of integers, or a <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> that contains integers.","pos":[7755,7893],"source":" The `Numbers` data member can be an integer, an array of integers, or a <xref:System.Collections.Generic.List%601> that contains integers."},{"pos":[7901,8153],"content":"[!CAUTION]\n This will only work on the client side if SVCUTIL.EXE is used to generate a WCF proxy. SVCUTIL.EXE retrieves metadata from the service including any known types. Without this information a client will not be able to deserialize the types.","leadings":["","> "],"nodes":[{"content":" This will only work on the client side if SVCUTIL.EXE is used to generate a WCF proxy. SVCUTIL.EXE retrieves metadata from the service including any known types. Without this information a client will not be able to deserialize the types.","pos":[11,250],"nodes":[{"content":"This will only work on the client side if SVCUTIL.EXE is used to generate a WCF proxy.","pos":[1,87]},{"content":"SVCUTIL.EXE retrieves metadata from the service including any known types.","pos":[88,162]},{"content":"Without this information a client will not be able to deserialize the types.","pos":[163,239]}]}]},{"pos":[8160,8417],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#6<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#6)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#6<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#6)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#6)]\n [!code-vb[C_KnownTypeAttribute#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#6)]"},{"content":"This is the application code.","pos":[8424,8453]},{"pos":[8460,8717],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#7<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#7)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#7<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#7)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#7)]\n [!code-vb[C_KnownTypeAttribute#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#7)]"},{"pos":[8726,8766],"content":"Known Types, Inheritance, and Interfaces","linkify":"Known Types, Inheritance, and Interfaces","nodes":[{"content":"Known Types, Inheritance, and Interfaces","pos":[0,40]}]},{"content":"When a known type is associated with a particular type using the <ph id=\"ph1\">`KnownTypeAttribute`</ph> attribute, the known type is also associated with all of the derived types of that type.","pos":[8770,8944],"source":"When a known type is associated with a particular type using the `KnownTypeAttribute` attribute, the known type is also associated with all of the derived types of that type."},{"content":"For example, see the following code.","pos":[8945,8981]},{"pos":[8988,9245],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#8<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#8)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#8<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#8)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#8)]\n [!code-vb[C_KnownTypeAttribute#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#8)]"},{"pos":[9252,9463],"content":"The <ph id=\"ph1\">`DoubleDrawing`</ph> class does not require the <ph id=\"ph2\">`KnownTypeAttribute`</ph> attribute to use <ph id=\"ph3\">`Square`</ph> and <ph id=\"ph4\">`Circle`</ph> in the <ph id=\"ph5\">`AdditionalShape`</ph> field, because the base class (<ph id=\"ph6\">`Drawing`</ph>) already has these attributes applied.","source":"The `DoubleDrawing` class does not require the `KnownTypeAttribute` attribute to use `Square` and `Circle` in the `AdditionalShape` field, because the base class (`Drawing`) already has these attributes applied."},{"content":"Known types can be associated only with classes and structures, not interfaces.","pos":[9470,9549]},{"pos":[9558,9596],"content":"Known Types Using Open Generic Methods","linkify":"Known Types Using Open Generic Methods","nodes":[{"content":"Known Types Using Open Generic Methods","pos":[0,38]}]},{"content":"It may be necessary to add a generic type as a known type.","pos":[9600,9658]},{"content":"However, an open generic type cannot be passed as a parameter to the <ph id=\"ph1\">`KnownTypeAttribute`</ph> attribute.","pos":[9659,9759],"source":" However, an open generic type cannot be passed as a parameter to the `KnownTypeAttribute` attribute."},{"content":"This problem can be solved by using an alternative mechanism: Write a method that returns a list of types to add to the known types collection.","pos":[9766,9909]},{"content":"The name of the method is then specified as a string argument to the <ph id=\"ph1\">`KnownTypeAttribute`</ph> attribute due to some restrictions.","pos":[9910,10035],"source":" The name of the method is then specified as a string argument to the `KnownTypeAttribute` attribute due to some restrictions."},{"pos":[10042,10285],"content":"The method must exist on the type to which the <ph id=\"ph1\">`KnownTypeAttribute`</ph> attribute is applied, must be static, must accept no parameters, and must return an object that can be assigned to <ph id=\"ph2\">&lt;xref:System.Collections.IEnumerable&gt;</ph> of <ph id=\"ph3\">&lt;xref:System.Type&gt;</ph>.","source":"The method must exist on the type to which the `KnownTypeAttribute` attribute is applied, must be static, must accept no parameters, and must return an object that can be assigned to <xref:System.Collections.IEnumerable> of <xref:System.Type>."},{"content":"You cannot combine the <ph id=\"ph1\">`KnownTypeAttribute`</ph> attribute with a method name and <ph id=\"ph2\">`KnownTypeAttribute`</ph> attributes with actual types on the same type.","pos":[10292,10436],"source":"You cannot combine the `KnownTypeAttribute` attribute with a method name and `KnownTypeAttribute` attributes with actual types on the same type."},{"content":"Furthermore, you cannot apply more than one <ph id=\"ph1\">`KnownTypeAttribute`</ph> with a method name to the same type.","pos":[10437,10538],"source":" Furthermore, you cannot apply more than one `KnownTypeAttribute` with a method name to the same type."},{"content":"See the following class.","pos":[10545,10569]},{"pos":[10576,10833],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#9<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#9)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#9<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#9)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#9)]\n [!code-vb[C_KnownTypeAttribute#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#9)]"},{"content":"The <ph id=\"ph1\">`theDrawing`</ph> field contains instances of a generic class <ph id=\"ph2\">`ColorDrawing`</ph> and a generic class <ph id=\"ph3\">`BlackAndWhiteDrawing`</ph>, both of which inherit from a generic class <ph id=\"ph4\">`Drawing`</ph>.","pos":[10840,11013],"source":"The `theDrawing` field contains instances of a generic class `ColorDrawing` and a generic class `BlackAndWhiteDrawing`, both of which inherit from a generic class `Drawing`."},{"content":"Normally, both must be added to known types, but the following is not valid syntax for attributes.","pos":[11014,11112]},{"content":"Thus, a method must be created to return these types.","pos":[11419,11472]},{"content":"The correct way to write this type, then, is shown in the following code.","pos":[11473,11546]},{"pos":[11553,11814],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_KnownTypeAttribute#10<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#10)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_KnownTypeAttribute#10<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#10)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_KnownTypeAttribute#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_knowntypeattribute/cs/source.cs#10)]\n [!code-vb[C_KnownTypeAttribute#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_knowntypeattribute/vb/source.vb#10)]"},{"pos":[11823,11857],"content":"Additional Ways to Add Known Types","linkify":"Additional Ways to Add Known Types","nodes":[{"content":"Additional Ways to Add Known Types","pos":[0,34]}]},{"content":"Additionally, known types can be added through a configuration file.","pos":[11861,11929]},{"content":"This is useful when you do not control the type that requires known types for proper deserialization, such as when using third-party type libraries with <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph>.","pos":[11930,12139],"source":" This is useful when you do not control the type that requires known types for proper deserialization, such as when using third-party type libraries with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]."},{"content":"The following configuration file shows how to specify a known type in a configuration file.","pos":[12146,12237]},{"pos":[12827,12980],"content":"In the preceding configuration file a data contract type called <ph id=\"ph1\">`MyCompany.Library.Shape`</ph> is declared to have <ph id=\"ph2\">`MyCompany.Library.Circle`</ph> as a known type.","source":"In the preceding configuration file a data contract type called `MyCompany.Library.Shape` is declared to have `MyCompany.Library.Circle` as a known type."},{"pos":[12989,12997],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\"> [</bpt>Known Types<ept id=\"p1\">](../../../../docs/framework/wcf/samples/known-types.md)</ept><ph id=\"ph1\"> </ph>","pos":[13264,13334],"source":" [Known Types](../../../../docs/framework/wcf/samples/known-types.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Data Contract Equivalence<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md)</ept><ph id=\"ph1\"> </ph>","pos":[13337,13443],"source":" [Data Contract Equivalence](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Designing Service Contracts<ept id=\"p1\">](../../../../docs/framework/wcf/designing-service-contracts.md)</ept>","pos":[13446,13539],"source":" [Designing Service Contracts](../../../../docs/framework/wcf/designing-service-contracts.md)"}]}