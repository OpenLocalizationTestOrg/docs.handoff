{"content":"---\ntitle: \"Object States and Change-Tracking | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 7a808b00-9c3c-479a-aa94-717280fefd71\ncaps.latest.revision: 2\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"\n---\n# Object States and Change-Tracking\n[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects always participate in some *state*. For example, when [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] creates a new object, the object is in `Unchanged` state. A new object that you yourself create is unknown to the <xref:System.Data.Linq.DataContext> and is in `Untracked` state. Following successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, all objects known to [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] are in `Unchanged` state. (The single exception is represented by those that have been successfully deleted from the database, which are in `Deleted` state and unusable in that <xref:System.Data.Linq.DataContext> instance.)  \n  \n## Object States  \n The following table lists the possible states for [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects.  \n  \n|State|Description|  \n|-----------|-----------------|  \n|`Untracked`|An object not tracked by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]. Examples include the following:<br /><br /> -   An object not queried through the current <xref:System.Data.Linq.DataContext> (such as a newly created object).<br />-   An object created through deserialization<br />-   An object queried through a different <xref:System.Data.Linq.DataContext>.|  \n|`Unchanged`|An object retrieved by using the current <xref:System.Data.Linq.DataContext> and not known to have been modified since it was created.|  \n|`PossiblyModified`|An object which is *attached* to a <xref:System.Data.Linq.DataContext>. For more information, see [Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).|  \n|`ToBeInserted`|An object not retrieved by using the current <xref:System.Data.Linq.DataContext>. This causes a database `INSERT` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.|  \n|`ToBeUpdated`|An object known to have been modified since it was retrieved. This causes a database `UPDATE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.|  \n|`ToBeDeleted`|An object marked for deletion, causing a database `DELETE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.|  \n|`Deleted`|An object that has been deleted in the database. This state is final and does not allow for additional transitions.|  \n  \n## Inserting Objects  \n You can explicitly request `Inserts` by using <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>. Alternatively, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] can infer `Inserts` by finding objects connected to one of the known objects that must be updated. For example, if you add an `Untracked` object to an <xref:System.Data.Linq.EntitySet%601> or set an <xref:System.Data.Linq.EntityRef%601> to an `Untracked` object, you make the `Untracked` object reachable by way of tracked objects in the graph. While processing <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] traverses the tracked objects and discovers any reachable persistent objects that are not tracked. Such objects are candidates for insertion into the database.  \n  \n For classes in an inheritance hierarchy, <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) also sets the value of the member designated as the *discriminator* to match the type of the object `o`. In the case of a type matching the default discriminator value, this action causes the discriminator value to be overwritten with the default value. For more information, see [Inheritance Support](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).  \n  \n> [!IMPORTANT]\n>  An object added to a `Table` is not in the identity cache. The identity cache reflects only what is retrieved from the database. After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.  \n  \n## Deleting Objects  \n You mark a tracked object `o` for deletion by calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) on the appropriate <xref:System.Data.Linq.Table%601>. [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] considers the removal of an object from an <xref:System.Data.Linq.EntitySet%601> as an update operation, and the corresponding foreign key value is set to null. The target of the operation (`o`) is not deleted from its table. For example, `cust.Orders.DeleteOnSubmit(ord)` indicates an update where the relationship between `cust` and `ord` is severed by setting the foreign key `ord.CustomerID` to null. It does not cause the deletion of the row corresponding to `ord`.  \n  \n [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] performs the following processing when an object is deleted (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) from its table:  \n  \n-   When <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is called, a `DELETE` operation is performed for that object.  \n  \n-   The removal is not propagated to related objects regardless of whether they are loaded. Specifically, related objects are not loaded for updating the relationship property.  \n  \n-   After successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, the objects are set to the `Deleted` state. As a result, you cannot use the object or its `id` in that <xref:System.Data.Linq.DataContext>. The internal cache maintained by a <xref:System.Data.Linq.DataContext> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database.  \n  \n You can call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> only on an object tracked by the <xref:System.Data.Linq.DataContext>. For an `Untracked` object, you must call <xref:System.Data.Linq.Table%601.Attach%2A> before you call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>. Calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> on an `Untracked` object throws an exception.  \n  \n> [!NOTE]\n>  Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>. This action does not remove the object from the cache or propagate the deletion to related objects.  \n>   \n>  To reclaim the `id` of a deleted object, use a new <xref:System.Data.Linq.DataContext> instance. For cleanup of related objects, you can use the *cascade delete* feature of the database, or else manually delete the related objects.  \n>   \n>  The related objects do not have to be deleted in any special order (unlike in the database).  \n  \n## Updating Objects  \n You can detect `Updates` by observing notifications of changes. Notifications are provided through the <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> event in property setters. When [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an `Update` statement.  \n  \n For objects that do not implement <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] maintains a copy of the values that objects had when they were first materialized. When you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compares the current and original values to decide whether the object has been changed.  \n  \n For updates to relationships, the reference from the child to the parent (that is, the reference corresponding to the foreign key) is considered the authority. The reference in the reverse direction (that is, from parent to child) is optional. Relationship classes (<xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships. If the object model does not use <xref:System.Data.Linq.EntitySet%601> or <xref:System.Data.Linq.EntityRef%601>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated.  \n  \n If you update both the required reference and the corresponding foreign key, you must make sure that they agree. An <xref:System.InvalidOperationException> exception is thrown if the two are not synchronized at the time that you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>. Although foreign key value changes are sufficient for affecting an update of the underlying row, you should change the reference to maintain connectivity of the object graph and bidirectional consistency of relationships.  \n  \n## See Also  \n [Background Information](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)   \n [Insert, Update, and Delete Operations](../../../../../../docs/framework/data/adonet/sql/linq/insert-update-and-delete-operations.md)","nodes":[{"pos":[12,62],"content":"Object States and Change-Tracking | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Object States and Change-Tracking | Microsoft Docs","pos":[0,50]}]},{"pos":[371,404],"content":"Object States and Change-Tracking","linkify":"Object States and Change-Tracking","nodes":[{"content":"Object States and Change-Tracking","pos":[0,33]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> objects always participate in some <bpt id=\"p1\">*</bpt>state<ept id=\"p1\">*</ept>.","pos":[405,516],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects always participate in some *state*."},{"content":"For example, when <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> creates a new object, the object is in <ph id=\"ph2\">`Unchanged`</ph> state.","pos":[517,660],"source":" For example, when [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] creates a new object, the object is in `Unchanged` state."},{"content":"A new object that you yourself create is unknown to the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> and is in <ph id=\"ph2\">`Untracked`</ph> state.","pos":[661,781],"source":" A new object that you yourself create is unknown to the <xref:System.Data.Linq.DataContext> and is in `Untracked` state."},{"content":"Following successful execution of <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>, all objects known to <ph id=\"ph2\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> are in <ph id=\"ph3\">`Unchanged`</ph> state.","pos":[782,984],"source":" Following successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, all objects known to [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] are in `Unchanged` state."},{"content":"(The single exception is represented by those that have been successfully deleted from the database, which are in <ph id=\"ph1\">`Deleted`</ph> state and unusable in that <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> instance.)","pos":[985,1182],"source":" (The single exception is represented by those that have been successfully deleted from the database, which are in `Deleted` state and unusable in that <xref:System.Data.Linq.DataContext> instance.)"},{"pos":[1191,1204],"content":"Object States","linkify":"Object States","nodes":[{"content":"Object States","pos":[0,13]}]},{"pos":[1208,1334],"content":"The following table lists the possible states for <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> objects.","source":"The following table lists the possible states for [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects."},{"content":"State","pos":[1341,1346]},{"content":"Description","pos":[1347,1358]},{"content":"An object not tracked by <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph>.","pos":[1409,1502],"source":"An object not tracked by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]."},{"content":"Examples include the following:","pos":[1503,1534]},{"content":"-   An object not queried through the current <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> (such as a newly created object).","pos":[1547,1662],"source":" -   An object not queried through the current <xref:System.Data.Linq.DataContext> (such as a newly created object)."},{"content":"-   An object created through deserialization","pos":[1668,1713]},{"content":"-   An object queried through a different <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph>.","pos":[1719,1797],"source":"-   An object queried through a different <xref:System.Data.Linq.DataContext>."},{"content":"An object retrieved by using the current <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> and not known to have been modified since it was created.","pos":[1814,1948],"source":"An object retrieved by using the current <xref:System.Data.Linq.DataContext> and not known to have been modified since it was created."},{"content":"An object which is <bpt id=\"p1\">*</bpt>attached<ept id=\"p1\">*</ept> to a <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph>.","pos":[1972,2043],"source":"An object which is *attached* to a <xref:System.Data.Linq.DataContext>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md)</ept>.","pos":[2044,2258],"source":" For more information, see [Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md)."},{"content":"An object not retrieved by using the current <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph>.","pos":[2278,2359],"source":"An object not retrieved by using the current <xref:System.Data.Linq.DataContext>."},{"content":"This causes a database <ph id=\"ph1\">`INSERT`</ph> during <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>.","pos":[2360,2452],"source":" This causes a database `INSERT` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>."},{"content":"An object known to have been modified since it was retrieved.","pos":[2471,2532]},{"content":"This causes a database <ph id=\"ph1\">`UPDATE`</ph> during <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>.","pos":[2533,2625],"source":" This causes a database `UPDATE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>."},{"pos":[2644,2763],"content":"An object marked for deletion, causing a database <ph id=\"ph1\">`DELETE`</ph> during <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>.","source":"An object marked for deletion, causing a database `DELETE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>."},{"content":"An object that has been deleted in the database.","pos":[2778,2826]},{"content":"This state is final and does not allow for additional transitions.","pos":[2827,2893]},{"pos":[2903,2920],"content":"Inserting Objects","linkify":"Inserting Objects","nodes":[{"content":"Inserting Objects","pos":[0,17]}]},{"content":"You can explicitly request <ph id=\"ph1\">`Inserts`</ph> by using <ph id=\"ph2\">&lt;xref:System.Data.Linq.Table%601.InsertOnSubmit%2A&gt;</ph>.","pos":[2924,3022],"source":"You can explicitly request `Inserts` by using <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>."},{"content":"Alternatively, <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> can infer <ph id=\"ph2\">`Inserts`</ph> by finding objects connected to one of the known objects that must be updated.","pos":[3023,3204],"source":" Alternatively, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] can infer `Inserts` by finding objects connected to one of the known objects that must be updated."},{"content":"For example, if you add an <ph id=\"ph1\">`Untracked`</ph> object to an <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph> or set an <ph id=\"ph3\">&lt;xref:System.Data.Linq.EntityRef%601&gt;</ph> to an <ph id=\"ph4\">`Untracked`</ph> object, you make the <ph id=\"ph5\">`Untracked`</ph> object reachable by way of tracked objects in the graph.","pos":[3205,3450],"source":" For example, if you add an `Untracked` object to an <xref:System.Data.Linq.EntitySet%601> or set an <xref:System.Data.Linq.EntityRef%601> to an `Untracked` object, you make the `Untracked` object reachable by way of tracked objects in the graph."},{"content":"While processing <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>, <ph id=\"ph2\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> traverses the tracked objects and discovers any reachable persistent objects that are not tracked.","pos":[3451,3688],"source":" While processing <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] traverses the tracked objects and discovers any reachable persistent objects that are not tracked."},{"content":"Such objects are candidates for insertion into the database.","pos":[3689,3749]},{"content":"For classes in an inheritance hierarchy, <ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601.InsertOnSubmit%2A&gt;</ph>(<ph id=\"ph2\">`o`</ph>) also sets the value of the member designated as the <bpt id=\"p1\">*</bpt>discriminator<ept id=\"p1\">*</ept> to match the type of the object <ph id=\"ph3\">`o`</ph>.","pos":[3756,3958],"source":"For classes in an inheritance hierarchy, <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) also sets the value of the member designated as the *discriminator* to match the type of the object `o`."},{"content":"In the case of a type matching the default discriminator value, this action causes the discriminator value to be overwritten with the default value.","pos":[3959,4107]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Inheritance Support<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md)</ept>.","pos":[4108,4234],"source":" For more information, see [Inheritance Support](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md)."},{"pos":[4242,4606],"content":"[!IMPORTANT]\n An object added to a `Table` is not in the identity cache. The identity cache reflects only what is retrieved from the database. After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.","leadings":["","> "],"nodes":[{"content":" An object added to a `Table` is not in the identity cache. The identity cache reflects only what is retrieved from the database. After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.","pos":[13,362],"nodes":[{"content":"An object added to a <ph id=\"ph1\">`Table`</ph> is not in the identity cache.","pos":[1,59],"source":" An object added to a `Table` is not in the identity cache."},{"content":"The identity cache reflects only what is retrieved from the database.","pos":[60,129]},{"content":"After a call to <ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601.InsertOnSubmit%2A&gt;</ph>, the added entity does not appear in queries against the database until <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph> is successfully completed.","pos":[130,349],"source":" After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed."}]}]},{"pos":[4615,4631],"content":"Deleting Objects","linkify":"Deleting Objects","nodes":[{"content":"Deleting Objects","pos":[0,16]}]},{"content":"You mark a tracked object <ph id=\"ph1\">`o`</ph> for deletion by calling <ph id=\"ph2\">&lt;xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A&gt;</ph>(o) on the appropriate <ph id=\"ph3\">&lt;xref:System.Data.Linq.Table%601&gt;</ph>.","pos":[4635,4797],"source":"You mark a tracked object `o` for deletion by calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) on the appropriate <xref:System.Data.Linq.Table%601>."},{"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> considers the removal of an object from an <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph> as an update operation, and the corresponding foreign key value is set to null.","pos":[4798,5026],"source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] considers the removal of an object from an <xref:System.Data.Linq.EntitySet%601> as an update operation, and the corresponding foreign key value is set to null."},{"content":"The target of the operation (<ph id=\"ph1\">`o`</ph>) is not deleted from its table.","pos":[5027,5091],"source":" The target of the operation (`o`) is not deleted from its table."},{"content":"For example, <ph id=\"ph1\">`cust.Orders.DeleteOnSubmit(ord)`</ph> indicates an update where the relationship between <ph id=\"ph2\">`cust`</ph> and <ph id=\"ph3\">`ord`</ph> is severed by setting the foreign key <ph id=\"ph4\">`ord.CustomerID`</ph> to null.","pos":[5092,5270],"source":" For example, `cust.Orders.DeleteOnSubmit(ord)` indicates an update where the relationship between `cust` and `ord` is severed by setting the foreign key `ord.CustomerID` to null."},{"content":"It does not cause the deletion of the row corresponding to <ph id=\"ph1\">`ord`</ph>.","pos":[5271,5336],"source":" It does not cause the deletion of the row corresponding to `ord`."},{"pos":[5343,5540],"content":"<ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> performs the following processing when an object is deleted (<ph id=\"ph2\">&lt;xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A&gt;</ph>) from its table:","source":"[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] performs the following processing when an object is deleted (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) from its table:"},{"pos":[5550,5669],"content":"When <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph> is called, a <ph id=\"ph2\">`DELETE`</ph> operation is performed for that object.","source":"When <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is called, a `DELETE` operation is performed for that object."},{"content":"The removal is not propagated to related objects regardless of whether they are loaded.","pos":[5679,5766]},{"content":"Specifically, related objects are not loaded for updating the relationship property.","pos":[5767,5851]},{"content":"After successful execution of <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>, the objects are set to the <ph id=\"ph2\">`Deleted`</ph> state.","pos":[5861,5988],"source":"After successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, the objects are set to the `Deleted` state."},{"content":"As a result, you cannot use the object or its <ph id=\"ph1\">`id`</ph> in that <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext&gt;</ph>.","pos":[5989,6084],"source":" As a result, you cannot use the object or its `id` in that <xref:System.Data.Linq.DataContext>."},{"content":"The internal cache maintained by a <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database.","pos":[6085,6285],"source":" The internal cache maintained by a <xref:System.Data.Linq.DataContext> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database."},{"content":"You can call <ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A&gt;</ph> only on an object tracked by the <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext&gt;</ph>.","pos":[6292,6426],"source":"You can call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> only on an object tracked by the <xref:System.Data.Linq.DataContext>."},{"content":"For an <ph id=\"ph1\">`Untracked`</ph> object, you must call <ph id=\"ph2\">&lt;xref:System.Data.Linq.Table%601.Attach%2A&gt;</ph> before you call <ph id=\"ph3\">&lt;xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A&gt;</ph>.","pos":[6427,6580],"source":" For an `Untracked` object, you must call <xref:System.Data.Linq.Table%601.Attach%2A> before you call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>."},{"content":"Calling <ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A&gt;</ph> on an <ph id=\"ph2\">`Untracked`</ph> object throws an exception.","pos":[6581,6686],"source":" Calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> on an `Untracked` object throws an exception."},{"pos":[6694,7028],"content":"[!NOTE]\n Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>. This action does not remove the object from the cache or propagate the deletion to related objects.","leadings":["","> "],"nodes":[{"content":" Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>. This action does not remove the object from the cache or propagate the deletion to related objects.","pos":[8,332],"nodes":[{"content":"Removing an object from a table tells <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> to generate a corresponding SQL <ph id=\"ph2\">`DELETE`</ph> command at the time of <ph id=\"ph3\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>.","pos":[1,224],"source":" Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>."},{"content":"This action does not remove the object from the cache or propagate the deletion to related objects.","pos":[225,324]}]}]},{"content":"To reclaim the <ph id=\"ph1\">`id`</ph> of a deleted object, use a new <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> instance.","pos":[7039,7135],"source":"To reclaim the `id` of a deleted object, use a new <xref:System.Data.Linq.DataContext> instance."},{"content":"For cleanup of related objects, you can use the <bpt id=\"p1\">*</bpt>cascade delete<ept id=\"p1\">*</ept> feature of the database, or else manually delete the related objects.","pos":[7136,7270],"source":" For cleanup of related objects, you can use the *cascade delete* feature of the database, or else manually delete the related objects."},{"content":"The related objects do not have to be deleted in any special order (unlike in the database).","pos":[7281,7373]},{"pos":[7382,7398],"content":"Updating Objects","linkify":"Updating Objects","nodes":[{"content":"Updating Objects","pos":[0,16]}]},{"content":"You can detect <ph id=\"ph1\">`Updates`</ph> by observing notifications of changes.","pos":[7402,7465],"source":"You can detect `Updates` by observing notifications of changes."},{"content":"Notifications are provided through the <ph id=\"ph1\">&lt;xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging&gt;</ph> event in property setters.","pos":[7466,7601],"source":" Notifications are provided through the <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> event in property setters."},{"content":"When <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an <ph id=\"ph2\">`Update`</ph> statement.","pos":[7602,7827],"source":" When [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an `Update` statement."},{"content":"For objects that do not implement <ph id=\"ph1\">&lt;xref:System.ComponentModel.INotifyPropertyChanging&gt;</ph>, <ph id=\"ph2\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> maintains a copy of the values that objects had when they were first materialized.","pos":[7834,8072],"source":"For objects that do not implement <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] maintains a copy of the values that objects had when they were first materialized."},{"content":"When you call <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>, <ph id=\"ph2\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> compares the current and original values to decide whether the object has been changed.","pos":[8073,8296],"source":" When you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compares the current and original values to decide whether the object has been changed."},{"content":"For updates to relationships, the reference from the child to the parent (that is, the reference corresponding to the foreign key) is considered the authority.","pos":[8303,8462]},{"content":"The reference in the reverse direction (that is, from parent to child) is optional.","pos":[8463,8546]},{"content":"Relationship classes (<ph id=\"ph1\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntityRef%601&gt;</ph>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships.","pos":[8547,8754],"source":" Relationship classes (<xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships."},{"content":"If the object model does not use <ph id=\"ph1\">&lt;xref:System.Data.Linq.EntitySet%601&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Data.Linq.EntityRef%601&gt;</ph>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated.","pos":[8755,9017],"source":" If the object model does not use <xref:System.Data.Linq.EntitySet%601> or <xref:System.Data.Linq.EntityRef%601>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated."},{"content":"If you update both the required reference and the corresponding foreign key, you must make sure that they agree.","pos":[9024,9136]},{"content":"An <ph id=\"ph1\">&lt;xref:System.InvalidOperationException&gt;</ph> exception is thrown if the two are not synchronized at the time that you call <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.SubmitChanges%2A&gt;</ph>.","pos":[9137,9311],"source":" An <xref:System.InvalidOperationException> exception is thrown if the two are not synchronized at the time that you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>."},{"content":"Although foreign key value changes are sufficient for affecting an update of the underlying row, you should change the reference to maintain connectivity of the object graph and bidirectional consistency of relationships.","pos":[9312,9533]},{"pos":[9542,9550],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Background Information<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)</ept><ph id=\"ph1\"> </ph>","pos":[9554,9660],"source":"[Background Information](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Insert, Update, and Delete Operations<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/insert-update-and-delete-operations.md)</ept>","pos":[9663,9797],"source":" [Insert, Update, and Delete Operations](../../../../../../docs/framework/data/adonet/sql/linq/insert-update-and-delete-operations.md)"}]}