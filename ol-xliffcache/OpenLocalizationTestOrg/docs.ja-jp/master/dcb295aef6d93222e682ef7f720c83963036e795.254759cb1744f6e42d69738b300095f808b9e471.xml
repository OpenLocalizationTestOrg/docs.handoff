{"content":"---\ntitle: \"Map keyref XML Schema (XSD) Constraints to DataSet Constraints\"\nms.date: \"03/30/2017\"\nms.assetid: 5b634fea-cc1e-4f6b-9454-10858105b1c8\n---\n# Map keyref XML Schema (XSD) Constraints to DataSet Constraints\nThe **keyref** element allows you to establish links between elements within a document. This is similar to a foreign key relationship in a relational database. If a schema specifies the **keyref** element, the element is converted during the schema mapping process to a corresponding foreign key constraint on the columns in the tables of the <xref:System.Data.DataSet>. By default, the **keyref** element also generates a relation, with the **ParentTable**, **ChildTable**, **ParentColumn**, and **ChildColumn** properties specified on the relation.  \n  \n The following table outlines the **msdata** attributes you can specify in the **keyref** element.  \n  \n|Attribute name|Description|  \n|--------------------|-----------------|  \n|**msdata:ConstraintOnly**|If **ConstraintOnly=\"true\"** is specified on the **keyref** element in the schema, a constraint is created, but no relation is created. If this attribute is not specified (or is set to **False**), both the constraint and the relation are created in the **DataSet**.|  \n|**msdata:ConstraintName**|If the **ConstraintName** attribute is specified, its value is used as the name of the constraint. Otherwise, the **name** attribute of the **keyref** element in the schema provides the constraint name in the **DataSet**.|  \n|**msdata:UpdateRule**|If the **UpdateRule** attribute is specified in the **keyref** element in the schema, its value is assigned to the **UpdateRule** constraint property in the **DataSet**. Otherwise the **UpdateRule** property is set to **Cascade**.|  \n|**msdata:DeleteRule**|If the **DeleteRule** attribute is specified in the **keyref** element in the schema, its value is assigned to the **DeleteRule** constraint property in the **DataSet**. Otherwise the **DeleteRule** property is set to **Cascade**.|  \n|**msdata:AcceptRejectRule**|If the **AcceptRejectRule** attribute is specified in the **keyref** element in the schema, its value is assigned to the **AcceptRejectRule** constraint property in the **DataSet**. Otherwise the **AcceptRejectRule** property is set to **None**.|  \n  \n The following example contains a schema that specifies the **key** and **keyref** relationships between the **OrderNumber** child element of the **Order** element and the **OrderNo** child element of the **OrderDetail** element.  \n  \n In the example, the **OrderNumber** child element of the **OrderDetail** element refers to the **OrderNo** key child element of the **Order** element.  \n  \n```xml  \n<xs:schema id=\"MyDataSet\" xmlns=\"\"   \n            xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"   \n            xmlns:msdata=\"urn:schemas-microsoft-com:xml-msdata\">  \n  \n <xs:element name=\"MyDataSet\" msdata:IsDataSet=\"true\">  \n  <xs:complexType>  \n    <xs:choice maxOccurs=\"unbounded\">  \n      <xs:element name=\"OrderDetail\">  \n       <xs:complexType>  \n         <xs:sequence>  \n           <xs:element name=\"OrderNo\" type=\"xs:integer\" />  \n           <xs:element name=\"ItemNo\" type=\"xs:string\" />  \n         </xs:sequence>  \n       </xs:complexType>  \n      </xs:element>  \n      <xs:element name=\"Order\">  \n        <xs:complexType>  \n          <xs:sequence>  \n            <xs:element name=\"OrderNumber\" type=\"xs:integer\" />  \n            <xs:element name=\"EmpNumber\" type=\"xs:integer\" />  \n          </xs:sequence>  \n        </xs:complexType>  \n      </xs:element>  \n    </xs:choice>  \n  </xs:complexType>  \n  \n  <xs:key name=\"OrderNumberKey\"  >  \n    <xs:selector xpath=\".//Order\" />  \n    <xs:field xpath=\"OrderNumber\" />  \n  </xs:key>  \n  \n  <xs:keyref name=\"OrderNoRef\" refer=\"OrderNumberKey\">  \n    <xs:selector xpath=\".//OrderDetail\" />  \n    <xs:field xpath=\"OrderNo\" />  \n  </xs:keyref>  \n </xs:element>  \n</xs:schema>  \n```  \n  \n The XML Schema definition language (XSD) schema mapping process produces the following **DataSet** with two tables:  \n  \n```  \nOrderDetail(OrderNo, ItemNo) and  \nOrder(OrderNumber, EmpNumber)  \n```  \n  \n In addition, the **DataSet** defines the following constraints:  \n  \n-   A unique constraint on the **Order** table.  \n  \n    ```  \n              Table: Order  \n    Columns: OrderNumber   \n    ConstraintName: OrderNumberKey  \n    Type: UniqueConstraint  \n    IsPrimaryKey: False  \n    ```  \n  \n-   A relationship between the **Order** and **OrderDetail** tables. The **Nested** property is set to **False** because the two elements are not nested in the schema.  \n  \n    ```  \n              ParentTable: Order  \n    ParentColumns: OrderNumber   \n    ChildTable: OrderDetail  \n    ChildColumns: OrderNo   \n    ParentKeyConstraint: OrderNumberKey  \n    ChildKeyConstraint: OrderNoRef  \n    RelationName: OrderNoRef  \n    Nested: False  \n    ```  \n  \n-   A foreign key constraint on the **OrderDetail** table.  \n  \n    ```  \n              ConstraintName: OrderNoRef  \n    Type: ForeignKeyConstraint  \n    Table: OrderDetail  \n    Columns: OrderNo   \n    RelatedTable: Order  \n    RelatedColumns: OrderNumber   \n    ```  \n  \n## See also\n\n- [Mapping XML Schema (XSD) Constraints to DataSet Constraints](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/mapping-xml-schema-xsd-constraints-to-dataset-constraints.md)\n- [Generating DataSet Relations from XML Schema (XSD)](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/generating-dataset-relations-from-xml-schema-xsd.md)\n- [ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)\n","nodes":[{"pos":[4,146],"embed":true,"restype":"x-metadata","content":"title: \"Map keyref XML Schema (XSD) Constraints to DataSet Constraints\"\nms.date: \"03/30/2017\"\nms.assetid: 5b634fea-cc1e-4f6b-9454-10858105b1c8","nodes":[{"content":"Map keyref XML Schema (XSD) Constraints to DataSet Constraints","nodes":[{"pos":[0,62],"content":"Map keyref XML Schema (XSD) Constraints to DataSet Constraints","nodes":[{"content":"Map keyref XML Schema (XSD) Constraints to DataSet Constraints","pos":[0,62]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[153,215],"content":"Map keyref XML Schema (XSD) Constraints to DataSet Constraints","linkify":"Map keyref XML Schema (XSD) Constraints to DataSet Constraints","nodes":[{"content":"Map keyref XML Schema (XSD) Constraints to DataSet Constraints","pos":[0,62]}]},{"content":"The <bpt id=\"p1\">**</bpt>keyref<ept id=\"p1\">**</ept> element allows you to establish links between elements within a document.","pos":[216,304],"source":"The **keyref** element allows you to establish links between elements within a document."},{"content":"This is similar to a foreign key relationship in a relational database.","pos":[305,376]},{"content":"If a schema specifies the <bpt id=\"p1\">**</bpt>keyref<ept id=\"p1\">**</ept> element, the element is converted during the schema mapping process to a corresponding foreign key constraint on the columns in the tables of the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[377,587],"source":" If a schema specifies the **keyref** element, the element is converted during the schema mapping process to a corresponding foreign key constraint on the columns in the tables of the <xref:System.Data.DataSet>."},{"content":"By default, the <bpt id=\"p1\">**</bpt>keyref<ept id=\"p1\">**</ept> element also generates a relation, with the <bpt id=\"p2\">**</bpt>ParentTable<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>ChildTable<ept id=\"p3\">**</ept>, <bpt id=\"p4\">**</bpt>ParentColumn<ept id=\"p4\">**</ept>, and <bpt id=\"p5\">**</bpt>ChildColumn<ept id=\"p5\">**</ept> properties specified on the relation.","pos":[588,767],"source":" By default, the **keyref** element also generates a relation, with the **ParentTable**, **ChildTable**, **ParentColumn**, and **ChildColumn** properties specified on the relation."},{"pos":[774,871],"content":"The following table outlines the <bpt id=\"p1\">**</bpt>msdata<ept id=\"p1\">**</ept> attributes you can specify in the <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> element.","source":"The following table outlines the **msdata** attributes you can specify in the **keyref** element."},{"content":"Attribute name","pos":[878,892]},{"content":"Description","pos":[893,904]},{"pos":[952,977],"content":"<bpt id=\"p1\">**</bpt>msdata:ConstraintOnly<ept id=\"p1\">**</ept>","source":"**msdata:ConstraintOnly**"},{"content":"If <bpt id=\"p1\">**</bpt>ConstraintOnly=\"true\"<ept id=\"p1\">**</ept> is specified on the <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> element in the schema, a constraint is created, but no relation is created.","pos":[978,1113],"source":"If **ConstraintOnly=\"true\"** is specified on the **keyref** element in the schema, a constraint is created, but no relation is created."},{"content":"If this attribute is not specified (or is set to <bpt id=\"p1\">**</bpt>False<ept id=\"p1\">**</ept>), both the constraint and the relation are created in the <bpt id=\"p2\">**</bpt>DataSet<ept id=\"p2\">**</ept>.","pos":[1114,1243],"source":" If this attribute is not specified (or is set to **False**), both the constraint and the relation are created in the **DataSet**."},{"pos":[1248,1273],"content":"<bpt id=\"p1\">**</bpt>msdata:ConstraintName<ept id=\"p1\">**</ept>","source":"**msdata:ConstraintName**"},{"content":"If the <bpt id=\"p1\">**</bpt>ConstraintName<ept id=\"p1\">**</ept> attribute is specified, its value is used as the name of the constraint.","pos":[1274,1372],"source":"If the **ConstraintName** attribute is specified, its value is used as the name of the constraint."},{"content":"Otherwise, the <bpt id=\"p1\">**</bpt>name<ept id=\"p1\">**</ept> attribute of the <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> element in the schema provides the constraint name in the <bpt id=\"p3\">**</bpt>DataSet<ept id=\"p3\">**</ept>.","pos":[1373,1495],"source":" Otherwise, the **name** attribute of the **keyref** element in the schema provides the constraint name in the **DataSet**."},{"pos":[1500,1521],"content":"<bpt id=\"p1\">**</bpt>msdata:UpdateRule<ept id=\"p1\">**</ept>","source":"**msdata:UpdateRule**"},{"content":"If the <bpt id=\"p1\">**</bpt>UpdateRule<ept id=\"p1\">**</ept> attribute is specified in the <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> element in the schema, its value is assigned to the <bpt id=\"p3\">**</bpt>UpdateRule<ept id=\"p3\">**</ept> constraint property in the <bpt id=\"p4\">**</bpt>DataSet<ept id=\"p4\">**</ept>.","pos":[1522,1691],"source":"If the **UpdateRule** attribute is specified in the **keyref** element in the schema, its value is assigned to the **UpdateRule** constraint property in the **DataSet**."},{"content":"Otherwise the <bpt id=\"p1\">**</bpt>UpdateRule<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>Cascade<ept id=\"p2\">**</ept>.","pos":[1692,1752],"source":" Otherwise the **UpdateRule** property is set to **Cascade**."},{"pos":[1757,1778],"content":"<bpt id=\"p1\">**</bpt>msdata:DeleteRule<ept id=\"p1\">**</ept>","source":"**msdata:DeleteRule**"},{"content":"If the <bpt id=\"p1\">**</bpt>DeleteRule<ept id=\"p1\">**</ept> attribute is specified in the <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> element in the schema, its value is assigned to the <bpt id=\"p3\">**</bpt>DeleteRule<ept id=\"p3\">**</ept> constraint property in the <bpt id=\"p4\">**</bpt>DataSet<ept id=\"p4\">**</ept>.","pos":[1779,1948],"source":"If the **DeleteRule** attribute is specified in the **keyref** element in the schema, its value is assigned to the **DeleteRule** constraint property in the **DataSet**."},{"content":"Otherwise the <bpt id=\"p1\">**</bpt>DeleteRule<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>Cascade<ept id=\"p2\">**</ept>.","pos":[1949,2009],"source":" Otherwise the **DeleteRule** property is set to **Cascade**."},{"pos":[2014,2041],"content":"<bpt id=\"p1\">**</bpt>msdata:AcceptRejectRule<ept id=\"p1\">**</ept>","source":"**msdata:AcceptRejectRule**"},{"content":"If the <bpt id=\"p1\">**</bpt>AcceptRejectRule<ept id=\"p1\">**</ept> attribute is specified in the <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> element in the schema, its value is assigned to the <bpt id=\"p3\">**</bpt>AcceptRejectRule<ept id=\"p3\">**</ept> constraint property in the <bpt id=\"p4\">**</bpt>DataSet<ept id=\"p4\">**</ept>.","pos":[2042,2223],"source":"If the **AcceptRejectRule** attribute is specified in the **keyref** element in the schema, its value is assigned to the **AcceptRejectRule** constraint property in the **DataSet**."},{"content":"Otherwise the <bpt id=\"p1\">**</bpt>AcceptRejectRule<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>None<ept id=\"p2\">**</ept>.","pos":[2224,2287],"source":" Otherwise the **AcceptRejectRule** property is set to **None**."},{"pos":[2295,2523],"content":"The following example contains a schema that specifies the <bpt id=\"p1\">**</bpt>key<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>keyref<ept id=\"p2\">**</ept> relationships between the <bpt id=\"p3\">**</bpt>OrderNumber<ept id=\"p3\">**</ept> child element of the <bpt id=\"p4\">**</bpt>Order<ept id=\"p4\">**</ept> element and the <bpt id=\"p5\">**</bpt>OrderNo<ept id=\"p5\">**</ept> child element of the <bpt id=\"p6\">**</bpt>OrderDetail<ept id=\"p6\">**</ept> element.","source":"The following example contains a schema that specifies the **key** and **keyref** relationships between the **OrderNumber** child element of the **Order** element and the **OrderNo** child element of the **OrderDetail** element."},{"pos":[2530,2680],"content":"In the example, the <bpt id=\"p1\">**</bpt>OrderNumber<ept id=\"p1\">**</ept> child element of the <bpt id=\"p2\">**</bpt>OrderDetail<ept id=\"p2\">**</ept> element refers to the <bpt id=\"p3\">**</bpt>OrderNo<ept id=\"p3\">**</ept> key child element of the <bpt id=\"p4\">**</bpt>Order<ept id=\"p4\">**</ept> element.","source":"In the example, the **OrderNumber** child element of the **OrderDetail** element refers to the **OrderNo** key child element of the **Order** element."},{"pos":[3932,4047],"content":"The XML Schema definition language (XSD) schema mapping process produces the following <bpt id=\"p1\">**</bpt>DataSet<ept id=\"p1\">**</ept> with two tables:","source":"The XML Schema definition language (XSD) schema mapping process produces the following **DataSet** with two tables:"},{"pos":[4136,4199],"content":"In addition, the <bpt id=\"p1\">**</bpt>DataSet<ept id=\"p1\">**</ept> defines the following constraints:","source":"In addition, the **DataSet** defines the following constraints:"},{"pos":[4209,4252],"content":"A unique constraint on the <bpt id=\"p1\">**</bpt>Order<ept id=\"p1\">**</ept> table.","source":"A unique constraint on the **Order** table."},{"content":"A relationship between the <bpt id=\"p1\">**</bpt>Order<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>OrderDetail<ept id=\"p2\">**</ept> tables.","pos":[4434,4498],"source":"A relationship between the **Order** and **OrderDetail** tables."},{"content":"The <bpt id=\"p1\">**</bpt>Nested<ept id=\"p1\">**</ept> property is set to <bpt id=\"p2\">**</bpt>False<ept id=\"p2\">**</ept> because the two elements are not nested in the schema.","pos":[4499,4597],"source":" The **Nested** property is set to **False** because the two elements are not nested in the schema."},{"pos":[4888,4942],"content":"A foreign key constraint on the <bpt id=\"p1\">**</bpt>OrderDetail<ept id=\"p1\">**</ept> table.","source":"A foreign key constraint on the **OrderDetail** table."},{"pos":[5160,5168],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5172,5364],"content":"<bpt id=\"p1\">[</bpt>Mapping XML Schema (XSD) Constraints to DataSet Constraints<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/mapping-xml-schema-xsd-constraints-to-dataset-constraints.md)</ept>","source":"[Mapping XML Schema (XSD) Constraints to DataSet Constraints](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/mapping-xml-schema-xsd-constraints-to-dataset-constraints.md)"},{"pos":[5367,5541],"content":"<bpt id=\"p1\">[</bpt>Generating DataSet Relations from XML Schema (XSD)<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/generating-dataset-relations-from-xml-schema-xsd.md)</ept>","source":"[Generating DataSet Relations from XML Schema (XSD)](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/generating-dataset-relations-from-xml-schema-xsd.md)"},{"pos":[5544,5648],"content":"<bpt id=\"p1\">[</bpt>ADO.NET Managed Providers and DataSet Developer Center<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=217917)</ept>","source":"[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)"}]}