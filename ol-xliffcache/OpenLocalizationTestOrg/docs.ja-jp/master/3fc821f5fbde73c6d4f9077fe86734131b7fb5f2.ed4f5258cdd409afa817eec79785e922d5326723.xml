{"content":"---\ntitle: \"Routing Contracts | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 9ceea7ae-ea19-4cf9-ba4f-d071e236546d\ncaps.latest.revision: 7\nauthor: \"wadepickett\"\nms.author: \"wpickett\"\nmanager: \"wpickett\"\n---\n# Routing Contracts\nRouting contracts define the message patterns that the Routing Service can process.  Each contract is typeless and allows the service to receive a message without knowledge of the message schema or action. This allows the Routing Service to generically route messages without additional configuration for the specifics of the underlying messages being routed.  \n  \n## Routing Contracts  \n Because the Routing Service accepts a generic WCF Message object, the most important consideration when selecting a contract is the shape of the channel that will be used when communicating with the clients and services. When processing messages, the Routing Service uses symmetrical message pumps, so generally the shape of the inbound contract must match the shape of the outbound contract. However, there are cases where the Service Model’s dispatcher can modify the shapes, such as when the dispatcher converts a duplex channel into a request-reply channel, or removes the session support from a channel when it is not required and is not being used (that is, when **SessionMode.Allowed**, converting an **IInputSessionChannel** into an **IInputChannel**).  \n  \n To support these message pumps, the Routing Service provides contracts in the <xref:System.ServiceModel.Routing> namespace, which must be used when defining the service endpoints used by the Routing Service. These contracts are typeless, which allows the receipt of any message type or action, and allows the Routing Service to handle messages without knowledge of the specific message schema. For more information about the contracts used by the Routing Service, see [Routing Contracts](../../../../docs/framework/wcf/feature-details/routing-contracts.md).  \n  \n The contracts provided by the Routing Service are located in the <xref:System.ServiceModel.Routing> namespace, and are described in the following table.  \n  \n|Contract|Shape|Channel Shape|  \n|--------------|-----------|-------------------|  \n|<xref:System.ServiceModel.Routing.ISimplexDatagramRouter>|SessionMode = SessionMode.Allowed<br /><br /> AsyncPattern = true<br /><br /> IsOneWay = true|IInputChannel -> IOutputChannel|  \n|<xref:System.ServiceModel.Routing.ISimplexSessionRouter>|SessionMode = SessionMode.Required<br /><br /> AsyncPattern = true<br /><br /> IsOneWay = true|IInputSessionChannel -> IOutputSessionChannel|  \n|<xref:System.ServiceModel.Routing.IRequestReplyRouter>|SessionMode = SessionMode.Allowed<br /><br /> AsyncPattern = true|IReplyChannel -> IRequestChannel|  \n|<xref:System.ServiceModel.Routing.IDuplexSessionRouter>|SessionMode=SessionMode.Required<br /><br /> CallbackContract=typeof(ISimplexSession)<br /><br /> AsyncPattern = true<br /><br /> IsOneWay = true<br /><br /> TransactionFlow(TransactionFlowOption.Allowed)|IDuplexSessionChannel -> IDuplexSessionChannel|  \n  \n## See Also  \n [Routing Service](http://msdn.microsoft.com/en-us/5ac8718c-bcef-456f-bfd5-1e60a30d6eaa)   \n [Routing Introduction](../../../../docs/framework/wcf/feature-details/routing-introduction.md)","nodes":[{"pos":[4,346],"nodes":[{"content":"Routing Contracts | Microsoft Docs","nodes":[{"pos":[0,34],"content":"Routing Contracts | Microsoft Docs","nodes":[{"content":"Routing Contracts | Microsoft Docs","pos":[0,34]}]}],"pos":[6,43],"yaml":true}],"content":"title: \"Routing Contracts | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 9ceea7ae-ea19-4cf9-ba4f-d071e236546d\ncaps.latest.revision: 7\nauthor: \"wadepickett\"\nms.author: \"wpickett\"\nmanager: \"wpickett\"","yamlblock":true},{"pos":[353,370],"content":"Routing Contracts","linkify":"Routing Contracts","nodes":[{"content":"Routing Contracts","pos":[0,17]}]},{"content":"Routing contracts define the message patterns that the Routing Service can process.","pos":[371,454]},{"content":"Each contract is typeless and allows the service to receive a message without knowledge of the message schema or action.","pos":[456,576]},{"content":"This allows the Routing Service to generically route messages without additional configuration for the specifics of the underlying messages being routed.","pos":[577,730]},{"pos":[739,756],"content":"Routing Contracts","linkify":"Routing Contracts","nodes":[{"content":"Routing Contracts","pos":[0,17]}]},{"content":"Because the Routing Service accepts a generic WCF Message object, the most important consideration when selecting a contract is the shape of the channel that will be used when communicating with the clients and services.","pos":[760,980]},{"content":"When processing messages, the Routing Service uses symmetrical message pumps, so generally the shape of the inbound contract must match the shape of the outbound contract.","pos":[981,1152]},{"content":"However, there are cases where the Service Model’s dispatcher can modify the shapes, such as when the dispatcher converts a duplex channel into a request-reply channel, or removes the session support from a channel when it is not required and is not being used (that is, when <bpt id=\"p1\">**</bpt>SessionMode.Allowed<ept id=\"p1\">**</ept>, converting an <bpt id=\"p2\">**</bpt>IInputSessionChannel<ept id=\"p2\">**</ept> into an <bpt id=\"p3\">**</bpt>IInputChannel<ept id=\"p3\">**</ept>).","pos":[1153,1520],"source":" However, there are cases where the Service Model’s dispatcher can modify the shapes, such as when the dispatcher converts a duplex channel into a request-reply channel, or removes the session support from a channel when it is not required and is not being used (that is, when **SessionMode.Allowed**, converting an **IInputSessionChannel** into an **IInputChannel**)."},{"content":"To support these message pumps, the Routing Service provides contracts in the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Routing&gt;</ph> namespace, which must be used when defining the service endpoints used by the Routing Service.","pos":[1527,1734],"source":"To support these message pumps, the Routing Service provides contracts in the <xref:System.ServiceModel.Routing> namespace, which must be used when defining the service endpoints used by the Routing Service."},{"content":"These contracts are typeless, which allows the receipt of any message type or action, and allows the Routing Service to handle messages without knowledge of the specific message schema.","pos":[1735,1920]},{"content":"For more information about the contracts used by the Routing Service, see <bpt id=\"p1\">[</bpt>Routing Contracts<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/routing-contracts.md)</ept>.","pos":[1921,2084],"source":" For more information about the contracts used by the Routing Service, see [Routing Contracts](../../../../docs/framework/wcf/feature-details/routing-contracts.md)."},{"content":"The contracts provided by the Routing Service are located in the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Routing&gt;</ph> namespace, and are described in the following table.","pos":[2091,2243],"source":"The contracts provided by the Routing Service are located in the <xref:System.ServiceModel.Routing> namespace, and are described in the following table."},{"content":"Contract","pos":[2250,2258]},{"content":"Shape","pos":[2259,2264]},{"content":"Channel Shape","pos":[2265,2278]},{"content":"SessionMode = SessionMode.Allowed","pos":[2392,2425]},{"content":"AsyncPattern = true","pos":[2438,2457]},{"content":"IsOneWay = true","pos":[2470,2485]},{"content":"IInputChannel -&gt; IOutputChannel","pos":[2486,2517],"source":"IInputChannel -> IOutputChannel"},{"content":"SessionMode = SessionMode.Required","pos":[2579,2613]},{"content":"AsyncPattern = true","pos":[2626,2645]},{"content":"IsOneWay = true","pos":[2658,2673]},{"content":"IInputSessionChannel -&gt; IOutputSessionChannel","pos":[2674,2719],"source":"IInputSessionChannel -> IOutputSessionChannel"},{"content":"SessionMode = SessionMode.Allowed","pos":[2779,2812]},{"content":"AsyncPattern = true","pos":[2825,2844]},{"content":"IReplyChannel -&gt; IRequestChannel","pos":[2845,2877],"source":"IReplyChannel -> IRequestChannel"},{"content":"SessionMode=SessionMode.Required","pos":[2938,2970]},{"content":"CallbackContract=typeof(ISimplexSession)","pos":[2983,3023]},{"content":"AsyncPattern = true","pos":[3036,3055]},{"content":"IsOneWay = true","pos":[3068,3083]},{"content":"TransactionFlow(TransactionFlowOption.Allowed)","pos":[3096,3142]},{"content":"IDuplexSessionChannel -&gt; IDuplexSessionChannel","pos":[3143,3189],"source":"IDuplexSessionChannel -> IDuplexSessionChannel"},{"pos":[3199,3207],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Routing Service<ept id=\"p1\">](http://msdn.microsoft.com/en-us/5ac8718c-bcef-456f-bfd5-1e60a30d6eaa)</ept><ph id=\"ph1\"> </ph>","pos":[3211,3299],"source":"[Routing Service](http://msdn.microsoft.com/en-us/5ac8718c-bcef-456f-bfd5-1e60a30d6eaa) "},{"content":"<bpt id=\"p1\">[</bpt>Routing Introduction<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/routing-introduction.md)</ept>","pos":[3303,3397],"source":"[Routing Introduction](../../../../docs/framework/wcf/feature-details/routing-introduction.md)"}]}