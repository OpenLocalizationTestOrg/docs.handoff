{"content":"---\ntitle: \"Optimizing Performance: Data Binding\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"binding data [WPF], performance\"\n  - \"data binding [WPF], performance\"\nms.assetid: 1506a35d-c009-43db-9f1e-4e230ad5be73\n---\n# Optimizing Performance: Data Binding\n[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding provides a simple and consistent way for applications to present and interact with data. Elements can be bound to data from a variety of data sources in the form of [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects and [!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)].  \n  \n This topic provides data binding performance recommendations.  \n\n<a name=\"HowDataBindingReferencesAreResolved\"></a>   \n## How Data Binding References are Resolved  \n Before discussing data binding performance issues, it is worthwhile to explore how the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding engine resolves object references for binding.  \n  \n The source of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding can be any [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object. You can bind to properties, sub-properties, or indexers of a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object. The binding references are resolved by using either Microsoft .NET Framework reflection or an <xref:System.ComponentModel.ICustomTypeDescriptor>. Here are three methods for resolving object references for binding.  \n  \n The first method involves using reflection. In this case, the <xref:System.Reflection.PropertyInfo> object is used to discover the attributes of the property and provides access to property metadata. When using the <xref:System.ComponentModel.ICustomTypeDescriptor> interface, the data binding engine uses this interface to access the property values. The <xref:System.ComponentModel.ICustomTypeDescriptor> interface is especially useful in cases where the object does not have a static set of properties.  \n  \n Property change notifications can be provided either by implementing the <xref:System.ComponentModel.INotifyPropertyChanged> interface or by using the change notifications associated with the <xref:System.ComponentModel.TypeDescriptor>. However, the preferred strategy for implementing property change notifications is to use <xref:System.ComponentModel.INotifyPropertyChanged>.  \n  \n If the source object is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object and the source property is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] property, the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding engine has to first use reflection on the source object to get the <xref:System.ComponentModel.TypeDescriptor>, and then query for a <xref:System.ComponentModel.PropertyDescriptor>. This sequence of reflection operations is potentially very time-consuming from a performance perspective.  \n  \n The second method for resolving object references involves a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] source object that implements the <xref:System.ComponentModel.INotifyPropertyChanged> interface, and a source property that is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] property. In this case, the data binding engine uses reflection directly on the source type and gets the required property. This is still not the optimal method, but it will cost less in working set requirements than the first method.  \n  \n The third method for resolving object references involves a source object that is a <xref:System.Windows.DependencyObject> and a source property that is a <xref:System.Windows.DependencyProperty>. In this case, the data binding engine does not need to use reflection. Instead, the property engine and the data binding engine together resolve the property reference independently. This is the optimal method for resolving object references used for data binding.  \n  \n The table below compares the speed of data binding the <xref:System.Windows.Controls.TextBlock.Text%2A> property of one thousand <xref:System.Windows.Controls.TextBlock> elements using these three methods.  \n  \n|**Binding the Text property of a TextBlock**|**Binding time (ms)**|**Render time -- includes binding (ms)**|  \n|--------------------------------------------------|-----------------------------|--------------------------------------------------|  \n|To a property of a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object|115|314|  \n|To a property of a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object which implements <xref:System.ComponentModel.INotifyPropertyChanged>|115|305|  \n|To a <xref:System.Windows.DependencyProperty> of a <xref:System.Windows.DependencyObject>.|90|263|  \n  \n<a name=\"Binding_to_Large_CLR_Objects\"></a>   \n## Binding to Large CLR Objects  \n There is a significant performance impact when you data bind to a single [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object with thousands of properties. You can minimize this impact by dividing the single object into multiple [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects with fewer properties. The table shows the binding and rendering times for data binding to a single large [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object versus multiple smaller objects.  \n  \n|**Data binding 1000 TextBlock objects**|**Binding time (ms)**|**Render time -- includes binding (ms)**|  \n|---------------------------------------------|-----------------------------|--------------------------------------------------|  \n|To a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object with 1000 properties|950|1200|  \n|To 1000 [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects with one property|115|314|  \n  \n<a name=\"Binding_to_an_ItemsSource\"></a>   \n## Binding to an ItemsSource  \n Consider a scenario in which you have a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object that holds a list of employees that you want to display in a <xref:System.Windows.Controls.ListBox>. To create a correspondence between these two objects, you would bind your employee list to the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property of the <xref:System.Windows.Controls.ListBox>. However, suppose you have a new employee joining your group. You might think that in order to insert this new person into your bound <xref:System.Windows.Controls.ListBox> values, you would simply add this person to your employee list and expect this change to be recognized by the data binding engine automatically. That assumption would prove false; in actuality, the change will not be reflected in the <xref:System.Windows.Controls.ListBox> automatically. This is because the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object does not automatically raise a collection changed event. In order to get the <xref:System.Windows.Controls.ListBox> to pick up the changes, you would have to recreate your list of employees and re-attach it to the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property of the <xref:System.Windows.Controls.ListBox>. While this solution works, it introduces a huge performance impact. Each time you reassign the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> of <xref:System.Windows.Controls.ListBox> to a new object, the <xref:System.Windows.Controls.ListBox> first throws away its previous items and regenerates its entire list. The performance impact is magnified if your <xref:System.Windows.Controls.ListBox> maps to a complex <xref:System.Windows.DataTemplate>.  \n  \n A very efficient solution to this problem is to make your employee list an <xref:System.Collections.ObjectModel.ObservableCollection%601>. An <xref:System.Collections.ObjectModel.ObservableCollection%601> object raises a change notification which the data binding engine can receive. The event adds or removes an item from an <xref:System.Windows.Controls.ItemsControl> without the need to regenerate the entire list.  \n  \n The table below shows the time it takes to update the <xref:System.Windows.Controls.ListBox> (with UI virtualization turned off) when one item is added. The number in the first row represents the elapsed time when the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object is bound to <xref:System.Windows.Controls.ListBox> element's <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A>. The number in the second row represents the elapsed time when an <xref:System.Collections.ObjectModel.ObservableCollection%601> is bound to the <xref:System.Windows.Controls.ListBox> element's <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A>. Note the significant time savings using the <xref:System.Collections.ObjectModel.ObservableCollection%601> data binding strategy.  \n  \n|**Data binding the ItemsSource**|**Update time for 1 item (ms)**|  \n|--------------------------------------|---------------------------------------|  \n|To a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object|1656|  \n|To an <xref:System.Collections.ObjectModel.ObservableCollection%601>|20|  \n  \n<a name=\"Binding_IList_to_ItemsControl_not_IEnumerable\"></a>   \n## Bind IList to ItemsControl not IEnumerable  \n If you have a choice between binding an <xref:System.Collections.Generic.IList%601> or an <xref:System.Collections.IEnumerable> to an <xref:System.Windows.Controls.ItemsControl> object, choose the <xref:System.Collections.Generic.IList%601> object. Binding <xref:System.Collections.IEnumerable> to an <xref:System.Windows.Controls.ItemsControl> forces [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to create a wrapper <xref:System.Collections.Generic.IList%601> object, which means your performance is impacted by the unnecessary overhead of a second object.  \n  \n<a name=\"Do_not_Convert_CLR_objects_to_Xml_Just_For_Data_Binding\"></a>   \n## Do not Convert CLR objects to XML Just for Data Binding.  \n [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] allows you to data bind to [!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] content; however, data binding to [!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] content is slower than data binding to [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects. Do not convert [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object data to XML if the only purpose is for data binding.  \n  \n## See also\n\n- [Optimizing WPF Application Performance](optimizing-wpf-application-performance.md)\n- [Planning for Application Performance](planning-for-application-performance.md)\n- [Taking Advantage of Hardware](optimizing-performance-taking-advantage-of-hardware.md)\n- [Layout and Design](optimizing-performance-layout-and-design.md)\n- [2D Graphics and Imaging](optimizing-performance-2d-graphics-and-imaging.md)\n- [Object Behavior](optimizing-performance-object-behavior.md)\n- [Application Resources](optimizing-performance-application-resources.md)\n- [Text](optimizing-performance-text.md)\n- [Other Performance Recommendations](optimizing-performance-other-recommendations.md)\n- [Data Binding Overview](../data/data-binding-overview.md)\n- [Walkthrough: Caching Application Data in a WPF Application](walkthrough-caching-application-data-in-a-wpf-application.md)\n","nodes":[{"pos":[4,218],"embed":true,"restype":"x-metadata","content":"title: \"Optimizing Performance: Data Binding\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"binding data [WPF], performance\"\n  - \"data binding [WPF], performance\"\nms.assetid: 1506a35d-c009-43db-9f1e-4e230ad5be73","nodes":[{"content":"Optimizing Performance: Data Binding","nodes":[{"pos":[0,36],"content":"Optimizing Performance: Data Binding","nodes":[{"content":"Optimizing Performance: Data Binding","pos":[0,36]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[225,261],"content":"Optimizing Performance: Data Binding","linkify":"Optimizing Performance: Data Binding","nodes":[{"content":"Optimizing Performance: Data Binding","pos":[0,36]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]</ph> data binding provides a simple and consistent way for applications to present and interact with data.","pos":[262,443],"source":"[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding provides a simple and consistent way for applications to present and interact with data."},{"content":"Elements can be bound to data from a variety of data sources in the form of <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> objects and <ph id=\"ph2\">[!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)]</ph>.","pos":[444,670],"source":" Elements can be bound to data from a variety of data sources in the form of [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects and [!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)]."},{"content":"This topic provides data binding performance recommendations.","pos":[677,738]},{"pos":[799,839],"content":"How Data Binding References are Resolved","linkify":"How Data Binding References are Resolved","nodes":[{"content":"How Data Binding References are Resolved","pos":[0,40]}]},{"pos":[843,1069],"content":"Before discussing data binding performance issues, it is worthwhile to explore how the <ph id=\"ph1\">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]</ph> data binding engine resolves object references for binding.","source":"Before discussing data binding performance issues, it is worthwhile to explore how the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding engine resolves object references for binding."},{"content":"The source of a <ph id=\"ph1\">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]</ph> data binding can be any <ph id=\"ph2\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object.","pos":[1076,1273],"source":"The source of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding can be any [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object."},{"content":"You can bind to properties, sub-properties, or indexers of a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object.","pos":[1274,1412],"source":" You can bind to properties, sub-properties, or indexers of a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object."},{"content":"The binding references are resolved by using either Microsoft .NET Framework reflection or an <ph id=\"ph1\">&lt;xref:System.ComponentModel.ICustomTypeDescriptor&gt;</ph>.","pos":[1413,1558],"source":" The binding references are resolved by using either Microsoft .NET Framework reflection or an <xref:System.ComponentModel.ICustomTypeDescriptor>."},{"content":"Here are three methods for resolving object references for binding.","pos":[1559,1626]},{"content":"The first method involves using reflection.","pos":[1633,1676]},{"content":"In this case, the <ph id=\"ph1\">&lt;xref:System.Reflection.PropertyInfo&gt;</ph> object is used to discover the attributes of the property and provides access to property metadata.","pos":[1677,1832],"source":" In this case, the <xref:System.Reflection.PropertyInfo> object is used to discover the attributes of the property and provides access to property metadata."},{"content":"When using the <ph id=\"ph1\">&lt;xref:System.ComponentModel.ICustomTypeDescriptor&gt;</ph> interface, the data binding engine uses this interface to access the property values.","pos":[1833,1984],"source":" When using the <xref:System.ComponentModel.ICustomTypeDescriptor> interface, the data binding engine uses this interface to access the property values."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ComponentModel.ICustomTypeDescriptor&gt;</ph> interface is especially useful in cases where the object does not have a static set of properties.","pos":[1985,2138],"source":" The <xref:System.ComponentModel.ICustomTypeDescriptor> interface is especially useful in cases where the object does not have a static set of properties."},{"content":"Property change notifications can be provided either by implementing the <ph id=\"ph1\">&lt;xref:System.ComponentModel.INotifyPropertyChanged&gt;</ph> interface or by using the change notifications associated with the <ph id=\"ph2\">&lt;xref:System.ComponentModel.TypeDescriptor&gt;</ph>.","pos":[2145,2381],"source":"Property change notifications can be provided either by implementing the <xref:System.ComponentModel.INotifyPropertyChanged> interface or by using the change notifications associated with the <xref:System.ComponentModel.TypeDescriptor>."},{"content":"However, the preferred strategy for implementing property change notifications is to use <ph id=\"ph1\">&lt;xref:System.ComponentModel.INotifyPropertyChanged&gt;</ph>.","pos":[2382,2523],"source":" However, the preferred strategy for implementing property change notifications is to use <xref:System.ComponentModel.INotifyPropertyChanged>."},{"content":"If the source object is a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object and the source property is a <ph id=\"ph2\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> property, the <ph id=\"ph3\">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]</ph> data binding engine has to first use reflection on the source object to get the <ph id=\"ph4\">&lt;xref:System.ComponentModel.TypeDescriptor&gt;</ph>, and then query for a <ph id=\"ph5\">&lt;xref:System.ComponentModel.PropertyDescriptor&gt;</ph>.","pos":[2530,3020],"source":"If the source object is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object and the source property is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] property, the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] data binding engine has to first use reflection on the source object to get the <xref:System.ComponentModel.TypeDescriptor>, and then query for a <xref:System.ComponentModel.PropertyDescriptor>."},{"content":"This sequence of reflection operations is potentially very time-consuming from a performance perspective.","pos":[3021,3126]},{"content":"The second method for resolving object references involves a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> source object that implements the <ph id=\"ph2\">&lt;xref:System.ComponentModel.INotifyPropertyChanged&gt;</ph> interface, and a source property that is a <ph id=\"ph3\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> property.","pos":[3133,3472],"source":"The second method for resolving object references involves a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] source object that implements the <xref:System.ComponentModel.INotifyPropertyChanged> interface, and a source property that is a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] property."},{"content":"In this case, the data binding engine uses reflection directly on the source type and gets the required property.","pos":[3473,3586]},{"content":"This is still not the optimal method, but it will cost less in working set requirements than the first method.","pos":[3587,3697]},{"content":"The third method for resolving object references involves a source object that is a <ph id=\"ph1\">&lt;xref:System.Windows.DependencyObject&gt;</ph> and a source property that is a <ph id=\"ph2\">&lt;xref:System.Windows.DependencyProperty&gt;</ph>.","pos":[3704,3900],"source":"The third method for resolving object references involves a source object that is a <xref:System.Windows.DependencyObject> and a source property that is a <xref:System.Windows.DependencyProperty>."},{"content":"In this case, the data binding engine does not need to use reflection.","pos":[3901,3971]},{"content":"Instead, the property engine and the data binding engine together resolve the property reference independently.","pos":[3972,4083]},{"content":"This is the optimal method for resolving object references used for data binding.","pos":[4084,4165]},{"pos":[4172,4377],"content":"The table below compares the speed of data binding the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.TextBlock.Text%2A&gt;</ph> property of one thousand <ph id=\"ph2\">&lt;xref:System.Windows.Controls.TextBlock&gt;</ph> elements using these three methods.","source":"The table below compares the speed of data binding the <xref:System.Windows.Controls.TextBlock.Text%2A> property of one thousand <xref:System.Windows.Controls.TextBlock> elements using these three methods."},{"pos":[4384,4428],"content":"<bpt id=\"p1\">**</bpt>Binding the Text property of a TextBlock<ept id=\"p1\">**</ept>","source":"**Binding the Text property of a TextBlock**"},{"pos":[4429,4450],"content":"<bpt id=\"p1\">**</bpt>Binding time (ms)<ept id=\"p1\">**</ept>","source":"**Binding time (ms)**"},{"pos":[4451,4491],"content":"<bpt id=\"p1\">**</bpt>Render time -- includes binding (ms)<ept id=\"p1\">**</ept>","source":"**Render time -- includes binding (ms)**"},{"pos":[4632,4727],"content":"To a property of a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object","source":"To a property of a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object"},{"content":"115","pos":[4728,4731]},{"content":"314","pos":[4732,4735]},{"pos":[4740,4904],"content":"To a property of a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object which implements <ph id=\"ph2\">&lt;xref:System.ComponentModel.INotifyPropertyChanged&gt;</ph>","source":"To a property of a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object which implements <xref:System.ComponentModel.INotifyPropertyChanged>"},{"content":"115","pos":[4905,4908]},{"content":"305","pos":[4909,4912]},{"pos":[4917,5007],"content":"To a <ph id=\"ph1\">&lt;xref:System.Windows.DependencyProperty&gt;</ph> of a <ph id=\"ph2\">&lt;xref:System.Windows.DependencyObject&gt;</ph>.","source":"To a <xref:System.Windows.DependencyProperty> of a <xref:System.Windows.DependencyObject>."},{"content":"90","pos":[5008,5010]},{"content":"263","pos":[5011,5014]},{"pos":[5071,5099],"content":"Binding to Large CLR Objects","linkify":"Binding to Large CLR Objects","nodes":[{"content":"Binding to Large CLR Objects","pos":[0,28]}]},{"content":"There is a significant performance impact when you data bind to a single <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object with thousands of properties.","pos":[5103,5282],"source":"There is a significant performance impact when you data bind to a single [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object with thousands of properties."},{"content":"You can minimize this impact by dividing the single object into multiple <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> objects with fewer properties.","pos":[5283,5456],"source":" You can minimize this impact by dividing the single object into multiple [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects with fewer properties."},{"content":"The table shows the binding and rendering times for data binding to a single large <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object versus multiple smaller objects.","pos":[5457,5649],"source":" The table shows the binding and rendering times for data binding to a single large [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object versus multiple smaller objects."},{"pos":[5656,5695],"content":"<bpt id=\"p1\">**</bpt>Data binding 1000 TextBlock objects<ept id=\"p1\">**</ept>","source":"**Data binding 1000 TextBlock objects**"},{"pos":[5696,5717],"content":"<bpt id=\"p1\">**</bpt>Binding time (ms)<ept id=\"p1\">**</ept>","source":"**Binding time (ms)**"},{"pos":[5718,5758],"content":"<bpt id=\"p1\">**</bpt>Render time -- includes binding (ms)<ept id=\"p1\">**</ept>","source":"**Render time -- includes binding (ms)**"},{"pos":[5894,5996],"content":"To a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object with 1000 properties","source":"To a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object with 1000 properties"},{"content":"950","pos":[5997,6000]},{"content":"1200","pos":[6001,6005]},{"pos":[6010,6113],"content":"To 1000 <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> objects with one property","source":"To 1000 [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects with one property"},{"content":"115","pos":[6114,6117]},{"content":"314","pos":[6118,6121]},{"pos":[6175,6200],"content":"Binding to an ItemsSource","linkify":"Binding to an ItemsSource","nodes":[{"content":"Binding to an ItemsSource","pos":[0,25]}]},{"content":"Consider a scenario in which you have a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> object that holds a list of employees that you want to display in a <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph>.","pos":[6204,6464],"source":"Consider a scenario in which you have a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object that holds a list of employees that you want to display in a <xref:System.Windows.Controls.ListBox>."},{"content":"To create a correspondence between these two objects, you would bind your employee list to the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl.ItemsSource%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph>.","pos":[6465,6674],"source":" To create a correspondence between these two objects, you would bind your employee list to the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property of the <xref:System.Windows.Controls.ListBox>."},{"content":"However, suppose you have a new employee joining your group.","pos":[6675,6735]},{"content":"You might think that in order to insert this new person into your bound <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> values, you would simply add this person to your employee list and expect this change to be recognized by the data binding engine automatically.","pos":[6736,6991],"source":" You might think that in order to insert this new person into your bound <xref:System.Windows.Controls.ListBox> values, you would simply add this person to your employee list and expect this change to be recognized by the data binding engine automatically."},{"content":"That assumption would prove false; in actuality, the change will not be reflected in the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> automatically.","pos":[6992,7134],"source":" That assumption would prove false; in actuality, the change will not be reflected in the <xref:System.Windows.Controls.ListBox> automatically."},{"content":"This is because the <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> object does not automatically raise a collection changed event.","pos":[7135,7331],"source":" This is because the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object does not automatically raise a collection changed event."},{"content":"In order to get the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> to pick up the changes, you would have to recreate your list of employees and re-attach it to the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ItemsControl.ItemsSource%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph>.","pos":[7332,7603],"source":" In order to get the <xref:System.Windows.Controls.ListBox> to pick up the changes, you would have to recreate your list of employees and re-attach it to the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property of the <xref:System.Windows.Controls.ListBox>."},{"content":"While this solution works, it introduces a huge performance impact.","pos":[7604,7671]},{"content":"Each time you reassign the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl.ItemsSource%2A&gt;</ph> of <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> to a new object, the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> first throws away its previous items and regenerates its entire list.","pos":[7672,7929],"source":" Each time you reassign the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> of <xref:System.Windows.Controls.ListBox> to a new object, the <xref:System.Windows.Controls.ListBox> first throws away its previous items and regenerates its entire list."},{"content":"The performance impact is magnified if your <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> maps to a complex <ph id=\"ph2\">&lt;xref:System.Windows.DataTemplate&gt;</ph>.","pos":[7930,8066],"source":" The performance impact is magnified if your <xref:System.Windows.Controls.ListBox> maps to a complex <xref:System.Windows.DataTemplate>."},{"content":"A very efficient solution to this problem is to make your employee list an <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph>.","pos":[8073,8211],"source":"A very efficient solution to this problem is to make your employee list an <xref:System.Collections.ObjectModel.ObservableCollection%601>."},{"content":"An <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph> object raises a change notification which the data binding engine can receive.","pos":[8212,8356],"source":" An <xref:System.Collections.ObjectModel.ObservableCollection%601> object raises a change notification which the data binding engine can receive."},{"content":"The event adds or removes an item from an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> without the need to regenerate the entire list.","pos":[8357,8490],"source":" The event adds or removes an item from an <xref:System.Windows.Controls.ItemsControl> without the need to regenerate the entire list."},{"content":"The table below shows the time it takes to update the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> (with UI virtualization turned off) when one item is added.","pos":[8497,8649],"source":"The table below shows the time it takes to update the <xref:System.Windows.Controls.ListBox> (with UI virtualization turned off) when one item is added."},{"content":"The number in the first row represents the elapsed time when the <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> object is bound to <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> element's <ph id=\"ph4\">&lt;xref:System.Windows.Controls.ItemsControl.ItemsSource%2A&gt;</ph>.","pos":[8650,8955],"source":" The number in the first row represents the elapsed time when the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object is bound to <xref:System.Windows.Controls.ListBox> element's <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A>."},{"content":"The number in the second row represents the elapsed time when an <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph> is bound to the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ListBox&gt;</ph> element's <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ItemsControl.ItemsSource%2A&gt;</ph>.","pos":[8956,9208],"source":" The number in the second row represents the elapsed time when an <xref:System.Collections.ObjectModel.ObservableCollection%601> is bound to the <xref:System.Windows.Controls.ListBox> element's <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A>."},{"content":"Note the significant time savings using the <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph> data binding strategy.","pos":[9209,9338],"source":" Note the significant time savings using the <xref:System.Collections.ObjectModel.ObservableCollection%601> data binding strategy."},{"pos":[9345,9377],"content":"<bpt id=\"p1\">**</bpt>Data binding the ItemsSource<ept id=\"p1\">**</ept>","source":"**Data binding the ItemsSource**"},{"pos":[9378,9409],"content":"<bpt id=\"p1\">**</bpt>Update time for 1 item (ms)<ept id=\"p1\">**</ept>","source":"**Update time for 1 item (ms)**"},{"pos":[9497,9621],"content":"To a <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> object","source":"To a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] <xref:System.Collections.Generic.List%601> object"},{"content":"1656","pos":[9622,9626]},{"pos":[9631,9699],"content":"To an <ph id=\"ph1\">&lt;xref:System.Collections.ObjectModel.ObservableCollection%601&gt;</ph>","source":"To an <xref:System.Collections.ObjectModel.ObservableCollection%601>"},{"content":"20","pos":[9700,9702]},{"pos":[9776,9818],"content":"Bind IList to ItemsControl not IEnumerable","linkify":"Bind IList to ItemsControl not IEnumerable","nodes":[{"content":"Bind IList to ItemsControl not IEnumerable","pos":[0,42]}]},{"content":"If you have a choice between binding an <ph id=\"ph1\">&lt;xref:System.Collections.Generic.IList%601&gt;</ph> or an <ph id=\"ph2\">&lt;xref:System.Collections.IEnumerable&gt;</ph> to an <ph id=\"ph3\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> object, choose the <ph id=\"ph4\">&lt;xref:System.Collections.Generic.IList%601&gt;</ph> object.","pos":[9822,10070],"source":"If you have a choice between binding an <xref:System.Collections.Generic.IList%601> or an <xref:System.Collections.IEnumerable> to an <xref:System.Windows.Controls.ItemsControl> object, choose the <xref:System.Collections.Generic.IList%601> object."},{"content":"Binding <ph id=\"ph1\">&lt;xref:System.Collections.IEnumerable&gt;</ph> to an <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ItemsControl&gt;</ph> forces <ph id=\"ph3\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> to create a wrapper <ph id=\"ph4\">&lt;xref:System.Collections.Generic.IList%601&gt;</ph> object, which means your performance is impacted by the unnecessary overhead of a second object.","pos":[10071,10416],"source":" Binding <xref:System.Collections.IEnumerable> to an <xref:System.Windows.Controls.ItemsControl> forces [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to create a wrapper <xref:System.Collections.Generic.IList%601> object, which means your performance is impacted by the unnecessary overhead of a second object."},{"pos":[10499,10555],"content":"Do not Convert CLR objects to XML Just for Data Binding.","linkify":"Do not Convert CLR objects to XML Just for Data Binding.","nodes":[{"content":"Do not Convert CLR objects to XML Just for Data Binding.","pos":[0,56]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> allows you to data bind to <ph id=\"ph2\">[!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)]</ph> content; however, data binding to <ph id=\"ph3\">[!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)]</ph> content is slower than data binding to <ph id=\"ph4\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> objects.","pos":[10559,10955],"source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] allows you to data bind to [!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] content; however, data binding to [!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] content is slower than data binding to [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] objects."},{"content":"Do not convert <ph id=\"ph1\">[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]</ph> object data to XML if the only purpose is for data binding.","pos":[10956,11100],"source":" Do not convert [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object data to XML if the only purpose is for data binding."},{"pos":[11109,11117],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[11121,11204],"content":"<bpt id=\"p1\">[</bpt>Optimizing WPF Application Performance<ept id=\"p1\">](optimizing-wpf-application-performance.md)</ept>","source":"[Optimizing WPF Application Performance](optimizing-wpf-application-performance.md)"},{"pos":[11207,11286],"content":"<bpt id=\"p1\">[</bpt>Planning for Application Performance<ept id=\"p1\">](planning-for-application-performance.md)</ept>","source":"[Planning for Application Performance](planning-for-application-performance.md)"},{"pos":[11289,11375],"content":"<bpt id=\"p1\">[</bpt>Taking Advantage of Hardware<ept id=\"p1\">](optimizing-performance-taking-advantage-of-hardware.md)</ept>","source":"[Taking Advantage of Hardware](optimizing-performance-taking-advantage-of-hardware.md)"},{"pos":[11378,11442],"content":"<bpt id=\"p1\">[</bpt>Layout and Design<ept id=\"p1\">](optimizing-performance-layout-and-design.md)</ept>","source":"[Layout and Design](optimizing-performance-layout-and-design.md)"},{"pos":[11445,11521],"content":"<bpt id=\"p1\">[</bpt>2D Graphics and Imaging<ept id=\"p1\">](optimizing-performance-2d-graphics-and-imaging.md)</ept>","source":"[2D Graphics and Imaging](optimizing-performance-2d-graphics-and-imaging.md)"},{"pos":[11524,11584],"content":"<bpt id=\"p1\">[</bpt>Object Behavior<ept id=\"p1\">](optimizing-performance-object-behavior.md)</ept>","source":"[Object Behavior](optimizing-performance-object-behavior.md)"},{"pos":[11587,11659],"content":"<bpt id=\"p1\">[</bpt>Application Resources<ept id=\"p1\">](optimizing-performance-application-resources.md)</ept>","source":"[Application Resources](optimizing-performance-application-resources.md)"},{"pos":[11662,11700],"content":"<bpt id=\"p1\">[</bpt>Text<ept id=\"p1\">](optimizing-performance-text.md)</ept>","source":"[Text](optimizing-performance-text.md)"},{"pos":[11703,11787],"content":"<bpt id=\"p1\">[</bpt>Other Performance Recommendations<ept id=\"p1\">](optimizing-performance-other-recommendations.md)</ept>","source":"[Other Performance Recommendations](optimizing-performance-other-recommendations.md)"},{"pos":[11790,11847],"content":"<bpt id=\"p1\">[</bpt>Data Binding Overview<ept id=\"p1\">](../data/data-binding-overview.md)</ept>","source":"[Data Binding Overview](../data/data-binding-overview.md)"},{"pos":[11850,11972],"content":"<bpt id=\"p1\">[</bpt>Walkthrough: Caching Application Data in a WPF Application<ept id=\"p1\">](walkthrough-caching-application-data-in-a-wpf-application.md)</ept>","source":"[Walkthrough: Caching Application Data in a WPF Application](walkthrough-caching-application-data-in-a-wpf-application.md)"}]}