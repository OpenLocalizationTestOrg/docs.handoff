{"content":"---\ntitle: \"Workflow Control Endpoint\"\nms.date: \"03/30/2017\"\nms.assetid: 1b883334-1590-4fbb-b0d6-65197efe0700\n---\n# Workflow Control Endpoint\nThe workflow control endpoint allows developers to call control operations to remotely control workflow instances hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost>. This feature can be used to programmatically perform control operations like suspend, resume, and terminate.  \n  \n> [!WARNING]\n>  If using the workflow control endpoint within a transaction and the workflow being controlled contains a <xref:System.Activities.Statements.Persist> activity, the workflow instance will hang until the transaction times out.  \n  \n## Workflow Instance Management  \n [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines a new contract called <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>. This contract defines a series of control operations that allow you remotely control workflow instances hosted by <xref:System.ServiceModel.Activities.WorkflowServiceHost>. <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> is a standard endpoint that provides an implementation of the <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> contract. <xref:System.ServiceModel.Activities.WorkflowControlClient> is a class that is used to send the control operations to the <xref:System.ServiceModel.Activities.WorkflowControlEndpoint>.  \n  \n Workflow instances can be in one of the following states:  \n  \n Active  \n The state of a workflow instance before it reaches the completed state and when it is not in the suspended state. While in this state, the workflow instance runs and processes application messages.  \n  \n Suspended  \n While in this state, the workflow instance does not run even if there are activities that have not started running or have partially run.  \n  \n Completed  \n The final state of a workflow instance. The workflow instance cannot run after reaching the completed state.  \n  \n## IWorkflowInstanceManagement  \n The <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> interface defines a set of control operations with synchronous and asynchronous versions. The transacted versions require use of a transaction-aware binding. The following table lists the control operations supported.  \n  \n|Control Operation|Description|  \n|-----------------------|-----------------|  \n|Abort|Forcefully stops the execution of the workflow instance.|  \n|Cancel|Transitions a workflow instance from the active or suspended state to the completed state.|  \n|Run|Provides a workflow instance the opportunity to execute.|  \n|Suspend|Transitions a workflow instance from the active state to the suspended state.|  \n|Terminate|Transitions a workflow instance from the active or suspended state to the completed state.|  \n|Unsuspend|Transitions a workflow instance from the suspended state to the active state.|  \n|TransactedCancel|Performs the Cancel operation under a transaction (flowed in from the client or created locally). If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.|  \n|TransactedRun|Performs the Run operation under a transaction (flowed in from the client or created locally). If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.|  \n|TransactedSuspend|Performs the Suspend operation under a transaction (flowed in from the client or created locally). If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.|  \n|TransactedTerminate|Performs the Terminate operation under a transaction (flowed in from the client or created locally). If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.|  \n|TransactedUnsuspend|Performs the Unsuspend operation under a transaction (flowed in from the client or created locally). If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.|  \n  \n The <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> contract does not provide a means to create a new workflow instance, only to manage existing workflow instances. For more information about remotely creating a new workflow instance, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md).  \n  \n## WorkflowControlEndpoint  \n <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> is a standard endpoint with a fixed contract, <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>. When added to a <xref:System.ServiceModel.Activities.WorkflowServiceHost> instance, this endpoint can then be used to send command operations to any workflow instance hosted by the host instance. For more information about standard endpoints, see [Standard Endpoints](../../../../docs/framework/wcf/feature-details/standard-endpoints.md).  \n  \n## WorkflowControlClient  \n <xref:System.ServiceModel.Activities.WorkflowControlClient> is a class that allows you to send control messages to a <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> on a <xref:System.ServiceModel.Activities.WorkflowServiceHost>. It contains a method for each of the operations supported by the <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> contract except for the transacted operations. <xref:System.ServiceModel.Activities.WorkflowControlClient> uses the ambient transaction to determine whether a transacted operation should be used.\n","nodes":[{"pos":[4,109],"embed":true,"restype":"x-metadata","content":"title: \"Workflow Control Endpoint\"\nms.date: \"03/30/2017\"\nms.assetid: 1b883334-1590-4fbb-b0d6-65197efe0700","nodes":[{"content":"Workflow Control Endpoint","nodes":[{"pos":[0,25],"content":"Workflow Control Endpoint","nodes":[{"content":"Workflow Control Endpoint","pos":[0,25]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[116,141],"content":"Workflow Control Endpoint","linkify":"Workflow Control Endpoint","nodes":[{"content":"Workflow Control Endpoint","pos":[0,25]}]},{"content":"The workflow control endpoint allows developers to call control operations to remotely control workflow instances hosted using <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.","pos":[142,327],"source":"The workflow control endpoint allows developers to call control operations to remotely control workflow instances hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost>."},{"content":"This feature can be used to programmatically perform control operations like suspend, resume, and terminate.","pos":[328,436]},{"pos":[444,681],"content":"[!WARNING]\n If using the workflow control endpoint within a transaction and the workflow being controlled contains a <xref:System.Activities.Statements.Persist> activity, the workflow instance will hang until the transaction times out.","leadings":["","> "],"nodes":[{"content":"If using the workflow control endpoint within a transaction and the workflow being controlled contains a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Persist&gt;</ph> activity, the workflow instance will hang until the transaction times out.","pos":[12,235],"source":"If using the workflow control endpoint within a transaction and the workflow being controlled contains a <xref:System.Activities.Statements.Persist> activity, the workflow instance will hang until the transaction times out."}]},{"pos":[690,718],"content":"Workflow Instance Management","linkify":"Workflow Instance Management","nodes":[{"content":"Workflow Instance Management","pos":[0,28]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph> defines a new contract called <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.IWorkflowInstanceManagement&gt;</ph>.","pos":[722,896],"source":"[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines a new contract called <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>."},{"content":"This contract defines a series of control operations that allow you remotely control workflow instances hosted by <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.","pos":[897,1069],"source":" This contract defines a series of control operations that allow you remotely control workflow instances hosted by <xref:System.ServiceModel.Activities.WorkflowServiceHost>."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowControlEndpoint&gt;</ph> is a standard endpoint that provides an implementation of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.IWorkflowInstanceManagement&gt;</ph> contract.","pos":[1070,1269],"source":"<xref:System.ServiceModel.Activities.WorkflowControlEndpoint> is a standard endpoint that provides an implementation of the <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> contract."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowControlClient&gt;</ph> is a class that is used to send the control operations to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.WorkflowControlEndpoint&gt;</ph>.","pos":[1270,1454],"source":"<xref:System.ServiceModel.Activities.WorkflowControlClient> is a class that is used to send the control operations to the <xref:System.ServiceModel.Activities.WorkflowControlEndpoint>."},{"content":"Workflow instances can be in one of the following states:","pos":[1461,1518]},{"content":"Active","pos":[1525,1531]},{"content":"The state of a workflow instance before it reaches the completed state and when it is not in the suspended state.","pos":[1535,1648]},{"content":"While in this state, the workflow instance runs and processes application messages.","pos":[1649,1732]},{"content":"Suspended","pos":[1739,1748]},{"content":"While in this state, the workflow instance does not run even if there are activities that have not started running or have partially run.","pos":[1752,1889]},{"content":"Completed","pos":[1896,1905]},{"content":"The final state of a workflow instance.","pos":[1909,1948]},{"content":"The workflow instance cannot run after reaching the completed state.","pos":[1949,2017]},{"pos":[2026,2053],"content":"IWorkflowInstanceManagement","linkify":"IWorkflowInstanceManagement","nodes":[{"content":"IWorkflowInstanceManagement","pos":[0,27]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.IWorkflowInstanceManagement&gt;</ph> interface defines a set of control operations with synchronous and asynchronous versions.","pos":[2057,2216],"source":"The <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> interface defines a set of control operations with synchronous and asynchronous versions."},{"content":"The transacted versions require use of a transaction-aware binding.","pos":[2217,2284]},{"content":"The following table lists the control operations supported.","pos":[2285,2344]},{"content":"Control Operation","pos":[2351,2368]},{"content":"Description","pos":[2369,2380]},{"content":"Abort","pos":[2431,2436]},{"content":"Forcefully stops the execution of the workflow instance.","pos":[2437,2493]},{"content":"Cancel","pos":[2498,2504]},{"content":"Transitions a workflow instance from the active or suspended state to the completed state.","pos":[2505,2595]},{"content":"Run","pos":[2600,2603]},{"content":"Provides a workflow instance the opportunity to execute.","pos":[2604,2660]},{"content":"Suspend","pos":[2665,2672]},{"content":"Transitions a workflow instance from the active state to the suspended state.","pos":[2673,2750]},{"content":"Terminate","pos":[2755,2764]},{"content":"Transitions a workflow instance from the active or suspended state to the completed state.","pos":[2765,2855]},{"content":"Unsuspend","pos":[2860,2869]},{"content":"Transitions a workflow instance from the suspended state to the active state.","pos":[2870,2947]},{"content":"TransactedCancel","pos":[2952,2968]},{"content":"Performs the Cancel operation under a transaction (flowed in from the client or created locally).","pos":[2969,3066]},{"content":"If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.","pos":[3067,3210]},{"content":"TransactedRun","pos":[3215,3228]},{"content":"Performs the Run operation under a transaction (flowed in from the client or created locally).","pos":[3229,3323]},{"content":"If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.","pos":[3324,3467]},{"content":"TransactedSuspend","pos":[3472,3489]},{"content":"Performs the Suspend operation under a transaction (flowed in from the client or created locally).","pos":[3490,3588]},{"content":"If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.","pos":[3589,3732]},{"content":"TransactedTerminate","pos":[3737,3756]},{"content":"Performs the Terminate operation under a transaction (flowed in from the client or created locally).","pos":[3757,3857]},{"content":"If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.","pos":[3858,4001]},{"content":"TransactedUnsuspend","pos":[4006,4025]},{"content":"Performs the Unsuspend operation under a transaction (flowed in from the client or created locally).","pos":[4026,4126]},{"content":"If the system maintains the durable state of the workflow instance, the workflow instance must be persisted during execution of this operation.","pos":[4127,4270]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.IWorkflowInstanceManagement&gt;</ph> contract does not provide a means to create a new workflow instance, only to manage existing workflow instances.","pos":[4278,4460],"source":"The <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> contract does not provide a means to create a new workflow instance, only to manage existing workflow instances."},{"content":"For more information about remotely creating a new workflow instance, see <bpt id=\"p1\">[</bpt>Workflow Service Host Extensibility<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</ept>.","pos":[4461,4660],"source":" For more information about remotely creating a new workflow instance, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)."},{"pos":[4669,4692],"content":"WorkflowControlEndpoint","linkify":"WorkflowControlEndpoint","nodes":[{"content":"WorkflowControlEndpoint","pos":[0,23]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowControlEndpoint&gt;</ph> is a standard endpoint with a fixed contract, <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.IWorkflowInstanceManagement&gt;</ph>.","pos":[4696,4870],"source":"<xref:System.ServiceModel.Activities.WorkflowControlEndpoint> is a standard endpoint with a fixed contract, <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>."},{"content":"When added to a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph> instance, this endpoint can then be used to send command operations to any workflow instance hosted by the host instance.","pos":[4871,5066],"source":" When added to a <xref:System.ServiceModel.Activities.WorkflowServiceHost> instance, this endpoint can then be used to send command operations to any workflow instance hosted by the host instance."},{"content":"For more information about standard endpoints, see <bpt id=\"p1\">[</bpt>Standard Endpoints<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/standard-endpoints.md)</ept>.","pos":[5067,5209],"source":" For more information about standard endpoints, see [Standard Endpoints](../../../../docs/framework/wcf/feature-details/standard-endpoints.md)."},{"pos":[5218,5239],"content":"WorkflowControlClient","linkify":"WorkflowControlClient","nodes":[{"content":"WorkflowControlClient","pos":[0,21]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowControlClient&gt;</ph> is a class that allows you to send control messages to a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.WorkflowControlEndpoint&gt;</ph> on a <ph id=\"ph3\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.","pos":[5243,5485],"source":"<xref:System.ServiceModel.Activities.WorkflowControlClient> is a class that allows you to send control messages to a <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> on a <xref:System.ServiceModel.Activities.WorkflowServiceHost>."},{"content":"It contains a method for each of the operations supported by the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.IWorkflowInstanceManagement&gt;</ph> contract except for the transacted operations.","pos":[5486,5663],"source":" It contains a method for each of the operations supported by the <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> contract except for the transacted operations."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.WorkflowControlClient&gt;</ph> uses the ambient transaction to determine whether a transacted operation should be used.","pos":[5664,5812],"source":"<xref:System.ServiceModel.Activities.WorkflowControlClient> uses the ambient transaction to determine whether a transacted operation should be used."}]}