{"content":"---\ntitle: \"Forward-Compatible Data Contracts | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nhelpviewer_keywords: \n  - \"data contracts [WCF], forward compatibility\"\nms.assetid: 413c9044-26f8-4ecb-968c-18495ea52cd9\ncaps.latest.revision: 21\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Forward-Compatible Data Contracts\nA feature of the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] data contract system is that contracts can evolve over time in nonbreaking ways. That is, a client with an older version of a data contract can communicate with a service with a newer version of the same data contract, or a client with a newer version of a data contract can communicate with an older version of the same data contract. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Best Practices: Data Contract Versioning](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md).  \n  \n You can apply most of the versioning features on an as-needed basis when new versions of an existing data contract are created. However, one versioning feature, *round-tripping*, must be built into the type from the first version in order to work properly.  \n  \n## Round-Tripping  \n Round-tripping occurs when data passes from a new version to an old version and back to the new version of a data contract. Round-tripping guarantees that no data is lost. Enabling round-tripping makes the type forward-compatible with any future changes supported by the data contract versioning model.  \n  \n To enable round-tripping for a particular type, the type must implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface. The interface contains one property, <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> (returning the <xref:System.Runtime.Serialization.ExtensionDataObject> type). The property stores any data from future versions of the data contract that is unknown to the current version.  \n  \n### Example  \n The following data contract is not forward-compatible with future changes.  \n  \n [!code-csharp[C_DataContract#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#7)]\n [!code-vb[C_DataContract#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#7)]  \n  \n To make the type compatible with future changes (such as adding a new data member named \"phoneNumber\"), implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.  \n  \n [!code-csharp[C_DataContract#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#8)]\n [!code-vb[C_DataContract#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#8)]  \n  \n When the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastructure encounters data that is not part of the original data contract, the data is stored in the property and preserved. It is not processed in any other way except for temporary storage. If the object is returned back to where it originated, the original (unknown) data is also returned. Therefore, the data has made a round trip to and from the originating endpoint without loss. Note, however, that if the originating endpoint required the data to be processed, that expectation is unmet, and the endpoint must somehow detect and accommodate the change.  \n  \n The <xref:System.Runtime.Serialization.ExtensionDataObject> type contains no public methods or properties. Thus, it is impossible to get direct access to the data stored inside the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property.  \n  \n The round-tripping feature may be turned off, either by setting `ignoreExtensionDataObject` to `true` in the <xref:System.Runtime.Serialization.DataContractSerializer> constructor or by setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property to `true` on the <xref:System.ServiceModel.ServiceBehaviorAttribute>. When this feature is off, the deserializer will not populate the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property, and the serializer will not emit the contents of the property.  \n  \n## See Also  \n <xref:System.Runtime.Serialization.IExtensibleDataObject>   \n <xref:System.Runtime.Serialization.ExtensionDataObject>   \n [Data Contract Versioning](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md)   \n [Best Practices: Data Contract Versioning](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)","nodes":[{"pos":[4,460],"nodes":[{"content":"Forward-Compatible Data Contracts | Microsoft Docs","nodes":[{"pos":[0,50],"content":"Forward-Compatible Data Contracts | Microsoft Docs","nodes":[{"content":"Forward-Compatible Data Contracts | Microsoft Docs","pos":[0,50]}]}],"pos":[6,59],"yaml":true}],"content":"title: \"Forward-Compatible Data Contracts | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nhelpviewer_keywords: \n  - \"data contracts [WCF], forward compatibility\"\nms.assetid: 413c9044-26f8-4ecb-968c-18495ea52cd9\ncaps.latest.revision: 21\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[467,500],"content":"Forward-Compatible Data Contracts","linkify":"Forward-Compatible Data Contracts","nodes":[{"content":"Forward-Compatible Data Contracts","pos":[0,33]}]},{"content":"A feature of the <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> data contract system is that contracts can evolve over time in nonbreaking ways.","pos":[501,654],"source":"A feature of the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] data contract system is that contracts can evolve over time in nonbreaking ways."},{"content":"That is, a client with an older version of a data contract can communicate with a service with a newer version of the same data contract, or a client with a newer version of a data contract can communicate with an older version of the same data contract.","pos":[655,909]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Best Practices: Data Contract Versioning<ept id=\"p1\">](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)</ept>.","pos":[910,1087],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Best Practices: Data Contract Versioning](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)."},{"content":"You can apply most of the versioning features on an as-needed basis when new versions of an existing data contract are created.","pos":[1094,1221]},{"content":"However, one versioning feature, <bpt id=\"p1\">*</bpt>round-tripping<ept id=\"p1\">*</ept>, must be built into the type from the first version in order to work properly.","pos":[1222,1350],"source":" However, one versioning feature, *round-tripping*, must be built into the type from the first version in order to work properly."},{"pos":[1359,1373],"content":"Round-Tripping","linkify":"Round-Tripping","nodes":[{"content":"Round-Tripping","pos":[0,14]}]},{"content":"Round-tripping occurs when data passes from a new version to an old version and back to the new version of a data contract.","pos":[1377,1500]},{"content":"Round-tripping guarantees that no data is lost.","pos":[1501,1548]},{"content":"Enabling round-tripping makes the type forward-compatible with any future changes supported by the data contract versioning model.","pos":[1549,1679]},{"content":"To enable round-tripping for a particular type, the type must implement the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IExtensibleDataObject&gt;</ph> interface.","pos":[1686,1830],"source":"To enable round-tripping for a particular type, the type must implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface."},{"content":"The interface contains one property, <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A&gt;</ph> (returning the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.ExtensionDataObject&gt;</ph> type).","pos":[1831,2020],"source":" The interface contains one property, <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> (returning the <xref:System.Runtime.Serialization.ExtensionDataObject> type)."},{"content":"The property stores any data from future versions of the data contract that is unknown to the current version.","pos":[2021,2131]},{"pos":[2141,2148],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following data contract is not forward-compatible with future changes.","pos":[2152,2226]},{"pos":[2233,2466],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_DataContract#7<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#7)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_DataContract#7<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#7)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_DataContract#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#7)]\n [!code-vb[C_DataContract#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#7)]"},{"content":"To make the type compatible with future changes (such as adding a new data member named \"phoneNumber\"), implement the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IExtensibleDataObject&gt;</ph> interface.","pos":[2473,2659],"source":"To make the type compatible with future changes (such as adding a new data member named \"phoneNumber\"), implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface."},{"pos":[2666,2899],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_DataContract#8<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#8)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>C_DataContract#8<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#8)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[C_DataContract#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#8)]\n [!code-vb[C_DataContract#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#8)]"},{"content":"When the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> infrastructure encounters data that is not part of the original data contract, the data is stored in the property and preserved.","pos":[2906,3099],"source":"When the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastructure encounters data that is not part of the original data contract, the data is stored in the property and preserved."},{"content":"It is not processed in any other way except for temporary storage.","pos":[3100,3166]},{"content":"If the object is returned back to where it originated, the original (unknown) data is also returned.","pos":[3167,3267]},{"content":"Therefore, the data has made a round trip to and from the originating endpoint without loss.","pos":[3268,3360]},{"content":"Note, however, that if the originating endpoint required the data to be processed, that expectation is unmet, and the endpoint must somehow detect and accommodate the change.","pos":[3361,3535]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ExtensionDataObject&gt;</ph> type contains no public methods or properties.","pos":[3542,3648],"source":"The <xref:System.Runtime.Serialization.ExtensionDataObject> type contains no public methods or properties."},{"content":"Thus, it is impossible to get direct access to the data stored inside the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A&gt;</ph> property.","pos":[3649,3807],"source":" Thus, it is impossible to get direct access to the data stored inside the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property."},{"content":"The round-tripping feature may be turned off, either by setting <ph id=\"ph1\">`ignoreExtensionDataObject`</ph> to <ph id=\"ph2\">`true`</ph> in the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> constructor or by setting the <ph id=\"ph4\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A&gt;</ph> property to <ph id=\"ph5\">`true`</ph> on the <ph id=\"ph6\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph>.","pos":[3814,4171],"source":"The round-tripping feature may be turned off, either by setting `ignoreExtensionDataObject` to `true` in the <xref:System.Runtime.Serialization.DataContractSerializer> constructor or by setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property to `true` on the <xref:System.ServiceModel.ServiceBehaviorAttribute>."},{"content":"When this feature is off, the deserializer will not populate the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A&gt;</ph> property, and the serializer will not emit the contents of the property.","pos":[4172,4384],"source":" When this feature is off, the deserializer will not populate the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property, and the serializer will not emit the contents of the property."},{"pos":[4393,4401],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IExtensibleDataObject&gt;</ph>","pos":[4405,4462],"source":"<xref:System.Runtime.Serialization.IExtensibleDataObject> "},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ExtensionDataObject&gt;</ph>","pos":[4467,4522],"source":"<xref:System.Runtime.Serialization.ExtensionDataObject> "},{"content":"<bpt id=\"p1\">[</bpt>Data Contract Versioning<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md)</ept><ph id=\"ph1\"> </ph>","pos":[4527,4630],"source":"[Data Contract Versioning](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md) "},{"content":"<bpt id=\"p1\">[</bpt>Best Practices: Data Contract Versioning<ept id=\"p1\">](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)</ept>","pos":[4634,4751],"source":"[Best Practices: Data Contract Versioning](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)"}]}