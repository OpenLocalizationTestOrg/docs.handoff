{"content":"---\ntitle: \"Building My First Claims-Aware WCF Service\"\nms.date: \"03/30/2017\"\nms.assetid: e0e6d091-9a97-4888-8f2c-cbcee42d90ee\nauthor: \"BrucePerlerMS\"\n---\n# Building My First Claims-Aware WCF Service\n## Applies To  \n  \n-   Windows Identity Foundation (WIF)  \n  \n-   Windows Communication Foundation (WCF)  \n  \n## Overview  \n This topic outlines the scenario of building claims-aware WCF services using WIF. There are usually three participants in a claims-aware web service scenario: the web service itself, the end user, and the Security Token Service (STS). The following figure describes this scenario:  \n  \n ![Diagram showing WIF Basic Claims Aware WCF Service components.](./media/building-my-first-claims-aware-wcf-service/windows-identify-foundation-basic-claims-aware-windows-communication-foundation-service.gif)  \n  \n1.  The WCF service client (sometimes called agent) uses WIF to send credentials to the STS and upon successful authentication, the agent is issued a token by the STS.  \n  \n2.  The agent sends this STS-issued token to the WCF service.  \n  \n3.  The claims-aware WCF service is configured to trust the STS and the tokens it issues. The claims-aware WCF service uses WIF to validate the token and to parse it. Developers use the appropriate WIF API and types, for example, **ClaimsPrincipal** for the application’s needs, such as implementing authorization for it.  \n  \n Starting from .NET 4.5, WIF is part of the .NET Framework package. Having the WIF classes directly available in the framework allows a much deeper integration of claims-based identity in .NET, making it easier to use claims. With WIF 4.5, you do not need to install any out-of-band components in order to start developing claims-aware web applications. WIF classes are now spread across various assemblies, the main ones being System.Security.Claims, System.IdentityModel and System.IdentityModel.Services.  \n  \n STS is a service that issues tokens upon successful authentication. Microsoft offers two industry standard STS’s:  \n  \n-   [Active Directory Federation Services (AD FS) 2.0](https://go.microsoft.com/fwlink/?LinkID=247516)\n  \n-   [Windows Azure Access Control Service (ACS)](https://go.microsoft.com/fwlink/?LinkID=247517)\n  \n AD FS 2.0 is part of the Windows Server R2 and can be used as an STS for on-premise scenarios. Azure Active Directory Access Control (also known as Access Control Service or ACS) is a cloud service, offered as part of Microsoft Azure. For testing or educational purposes, you can also use other STS’s in order to build your claims-aware applications. For example, you can use the Local Development STS that is part of the [Identity and Access Tool for Visual Studio](https://go.microsoft.com/fwlink/?LinkID=245849) which is freely available online.  \n  \n To build your first claims-aware WCF service using WIF, see [How To: Enable WIF for a WCF Web Service Application](../../../docs/framework/security/how-to-enable-wif-for-a-wcf-web-service-application.md).\n  \n## See also\n\n- [Getting Started With WIF](../../../docs/framework/security/getting-started-with-wif.md)\n","nodes":[{"pos":[4,150],"embed":true,"restype":"x-metadata","content":"title: \"Building My First Claims-Aware WCF Service\"\nms.date: \"03/30/2017\"\nms.assetid: e0e6d091-9a97-4888-8f2c-cbcee42d90ee\nauthor: \"BrucePerlerMS\"","nodes":[{"content":"Building My First Claims-Aware WCF Service","nodes":[{"pos":[0,42],"content":"Building My First Claims-Aware WCF Service","nodes":[{"content":"Building My First Claims-Aware WCF Service","pos":[0,42]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[157,199],"content":"Building My First Claims-Aware WCF Service","linkify":"Building My First Claims-Aware WCF Service","nodes":[{"content":"Building My First Claims-Aware WCF Service","pos":[0,42]}]},{"pos":[203,213],"content":"Applies To","linkify":"Applies To","nodes":[{"content":"Applies To","pos":[0,10]}]},{"content":"Windows Identity Foundation (WIF)","pos":[223,256]},{"content":"Windows Communication Foundation (WCF)","pos":[266,304]},{"pos":[313,321],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"This topic outlines the scenario of building claims-aware WCF services using WIF.","pos":[325,406]},{"content":"There are usually three participants in a claims-aware web service scenario: the web service itself, the end user, and the Security Token Service (STS).","pos":[407,559]},{"content":"The following figure describes this scenario:","pos":[560,605]},{"content":"Diagram showing WIF Basic Claims Aware WCF Service components.","pos":[614,676]},{"content":"The WCF service client (sometimes called agent) uses WIF to send credentials to the STS and upon successful authentication, the agent is issued a token by the STS.","pos":[831,994]},{"content":"The agent sends this STS-issued token to the WCF service.","pos":[1004,1061]},{"content":"The claims-aware WCF service is configured to trust the STS and the tokens it issues.","pos":[1071,1156]},{"content":"The claims-aware WCF service uses WIF to validate the token and to parse it.","pos":[1157,1233]},{"content":"Developers use the appropriate WIF API and types, for example, <bpt id=\"p1\">**</bpt>ClaimsPrincipal<ept id=\"p1\">**</ept> for the application’s needs, such as implementing authorization for it.","pos":[1234,1388],"source":" Developers use the appropriate WIF API and types, for example, **ClaimsPrincipal** for the application’s needs, such as implementing authorization for it."},{"content":"Starting from .NET 4.5, WIF is part of the .NET Framework package.","pos":[1395,1461]},{"content":"Having the WIF classes directly available in the framework allows a much deeper integration of claims-based identity in .NET, making it easier to use claims.","pos":[1462,1619]},{"content":"With WIF 4.5, you do not need to install any out-of-band components in order to start developing claims-aware web applications.","pos":[1620,1747]},{"content":"WIF classes are now spread across various assemblies, the main ones being System.Security.Claims, System.IdentityModel and System.IdentityModel.Services.","pos":[1748,1901]},{"content":"STS is a service that issues tokens upon successful authentication.","pos":[1908,1975]},{"content":"Microsoft offers two industry standard STS’s:","pos":[1976,2021]},{"pos":[2031,2129],"content":"<bpt id=\"p1\">[</bpt>Active Directory Federation Services (AD FS) 2.0<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=247516)</ept>","source":"[Active Directory Federation Services (AD FS) 2.0](https://go.microsoft.com/fwlink/?LinkID=247516)"},{"pos":[2137,2229],"content":"<bpt id=\"p1\">[</bpt>Windows Azure Access Control Service (ACS)<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=247517)</ept>","source":"[Windows Azure Access Control Service (ACS)](https://go.microsoft.com/fwlink/?LinkID=247517)"},{"content":"AD FS 2.0 is part of the Windows Server R2 and can be used as an STS for on-premise scenarios.","pos":[2234,2328]},{"content":"Azure Active Directory Access Control (also known as Access Control Service or ACS) is a cloud service, offered as part of Microsoft Azure.","pos":[2329,2468]},{"content":"For testing or educational purposes, you can also use other STS’s in order to build your claims-aware applications.","pos":[2469,2584]},{"content":"For example, you can use the Local Development STS that is part of the <bpt id=\"p1\">[</bpt>Identity and Access Tool for Visual Studio<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=245849)</ept> which is freely available online.","pos":[2585,2782],"source":" For example, you can use the Local Development STS that is part of the [Identity and Access Tool for Visual Studio](https://go.microsoft.com/fwlink/?LinkID=245849) which is freely available online."},{"pos":[2789,2993],"content":"To build your first claims-aware WCF service using WIF, see <bpt id=\"p1\">[</bpt>How To: Enable WIF for a WCF Web Service Application<ept id=\"p1\">](../../../docs/framework/security/how-to-enable-wif-for-a-wcf-web-service-application.md)</ept>.","source":"To build your first claims-aware WCF service using WIF, see [How To: Enable WIF for a WCF Web Service Application](../../../docs/framework/security/how-to-enable-wif-for-a-wcf-web-service-application.md)."},{"pos":[3000,3008],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3012,3100],"content":"<bpt id=\"p1\">[</bpt>Getting Started With WIF<ept id=\"p1\">](../../../docs/framework/security/getting-started-with-wif.md)</ept>","source":"[Getting Started With WIF](../../../docs/framework/security/getting-started-with-wif.md)"}]}