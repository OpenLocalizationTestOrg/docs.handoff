{"content":"---\ntitle: \"Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: a7875f26-0da8-4afe-9846-7a21778f757b\ncaps.latest.revision: 4\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting\nIn the [!INCLUDE[net_v451](../../../includes/net-v451-md.md)], an exception is thrown if the available memory on the web server is less than the percentage specified by the [minFreeMemoryPercentageToActivateService](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) configuration setting. In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], this setting was ignored.  \n  \n## Impact  \n In most cases, the impact of observing the [minFreeMemoryPercentageToActivateService](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) setting is desirable: It improves system stability by preventing the <xref:System.OutOfMemoryException> exceptions that can occur when a Windows Communication Foundation (WCF) service is started on a system that has constrained memory.  \n  \n However, in some cases, a service that previously started successfully may be unable to start. In that case, a detailed error message appears:  \n  \n```Output  \nMemory gates checking failed because the free memory (nnnn bytes) is less than nn% of total memory. As a result, the service will not be available for incoming requests. To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element.  \n```  \n  \n## Mitigation  \n To revert to the previous behavior where the [minFreeMemoryPercentageToActivateService](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) setting was ignored, modify the web.config file as follows:  \n  \n```  \n  \n<serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"   \n                           minFreeMemoryPercentageToActivateService=\"0\">  \n   <serviceActivations>  \n   ...  \n   </serviceActivations>  \n</serviceHostingEnvironment>  \n  \n```  \n  \n## See Also  \n [Runtime Changes](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-5-1.md)","nodes":[{"pos":[12,101],"content":"Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting | Microsoft Docs","pos":[0,89]}]},{"pos":[404,476],"content":"Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting","linkify":"Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting","nodes":[{"content":"Mitigation: minFreeMemoryPercentageToActiveService Configuration Setting","pos":[0,72]}]},{"content":"In the <ph id=\"ph1\">[!INCLUDE[net_v451](../../../includes/net-v451-md.md)]</ph>, an exception is thrown if the available memory on the web server is less than the percentage specified by the <bpt id=\"p1\">[</bpt>minFreeMemoryPercentageToActivateService<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md)</ept> configuration setting.","pos":[477,800],"source":"In the [!INCLUDE[net_v451](../../../includes/net-v451-md.md)], an exception is thrown if the available memory on the web server is less than the percentage specified by the [minFreeMemoryPercentageToActivateService](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) configuration setting."},{"content":"In the <ph id=\"ph1\">[!INCLUDE[net_v45](../../../includes/net-v45-md.md)]</ph>, this setting was ignored.","pos":[801,887],"source":" In the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], this setting was ignored."},{"pos":[896,902],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"pos":[906,1312],"content":"In most cases, the impact of observing the <bpt id=\"p1\">[</bpt>minFreeMemoryPercentageToActivateService<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md)</ept> setting is desirable: It improves system stability by preventing the <ph id=\"ph1\">&lt;xref:System.OutOfMemoryException&gt;</ph> exceptions that can occur when a Windows Communication Foundation (WCF) service is started on a system that has constrained memory.","source":"In most cases, the impact of observing the [minFreeMemoryPercentageToActivateService](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) setting is desirable: It improves system stability by preventing the <xref:System.OutOfMemoryException> exceptions that can occur when a Windows Communication Foundation (WCF) service is started on a system that has constrained memory."},{"content":"However, in some cases, a service that previously started successfully may be unable to start.","pos":[1319,1413]},{"content":"In that case, a detailed error message appears:","pos":[1414,1461]},{"pos":[1831,1841],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"pos":[1845,2077],"content":"To revert to the previous behavior where the <bpt id=\"p1\">[</bpt>minFreeMemoryPercentageToActivateService<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md)</ept> setting was ignored, modify the web.config file as follows:","source":"To revert to the previous behavior where the [minFreeMemoryPercentageToActivateService](../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) setting was ignored, modify the web.config file as follows:"},{"pos":[2340,2348],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[2352,2456],"content":"<bpt id=\"p1\">[</bpt>Runtime Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-5-1.md)</ept>","source":"[Runtime Changes](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-5-1.md)"}]}