{"content":"---\ntitle: \"How to: Subscribe to and Unsubscribe from Events - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"event handlers [C#], creating\"\n  - \"Code Editor, event handlers\"\n  - \"events [C#], creating using the IDE\"\nms.assetid: 6319f39f-282c-4173-8a62-6c4657cf51cd\n---\n# How to: Subscribe to and Unsubscribe from Events (C# Programming Guide)\nYou subscribe to an event that is published by another class when you want to write custom code that is called when that event is raised. For example, you might subscribe to a button's `click` event in order to make your application do something useful when the user clicks the button.  \n  \n### To subscribe to events by using the Visual Studio IDE  \n  \n1.  If you cannot see the **Properties** window, in **Design** view, right-click the form or control for which you want to create an event handler, and select **Properties**.  \n  \n2.  On top of the **Properties** window, click the **Events** icon.  \n  \n3.  Double-click the event that you want to create, for example the `Load` event.  \n  \n     Visual C# creates an empty event handler method and adds it to your code. Alternatively you can add the code manually in **Code** view. For example, the following lines of code declare an event handler method that will be called when the `Form` class raises the `Load` event.  \n  \n     [!code-csharp[csProgGuideEvents#11](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideEvents/CS/Events.cs#11)]  \n  \n     The line of code that is required to subscribe to the event is also automatically generated in the `InitializeComponent` method in the Form1.Designer.cs file in your project. It resembles this:  \n  \n    ```csharp\n    this.Load += new System.EventHandler(this.Form1_Load);  \n    ```  \n  \n### To subscribe to events programmatically  \n  \n1.  Define an event handler method whose signature matches the delegate signature for the event. For example, if the event is based on the <xref:System.EventHandler> delegate type, the following code represents the method stub:  \n  \n    ```csharp\n    void HandleCustomEvent(object sender, CustomEventArgs a)  \n    {  \n       // Do something useful here.  \n    }  \n    ```  \n  \n2.  Use the addition assignment operator (`+=`) to attach your event handler to the event. In the following example, assume that an object named `publisher` has an event named `RaiseCustomEvent`. Note that the subscriber class needs a reference to the publisher class in order to subscribe to its events.  \n  \n    ```csharp\n    publisher.RaiseCustomEvent += HandleCustomEvent;  \n    ```  \n  \n     Note that the previous syntax is new in C# 2.0. It is exactly equivalent to the C# 1.0 syntax in which the encapsulating delegate must be explicitly created by using the `new` keyword:  \n  \n    ```csharp\n    publisher.RaiseCustomEvent += new CustomEventHandler(HandleCustomEvent);  \n    ```  \n  \n     An event handler can also be added by using a lambda expression:  \n  \n    ```csharp\n    public Form1()  \n    {  \n        InitializeComponent();  \n        // Use a lambda expression to define an event handler.  \n        this.Click += (s,e) => { MessageBox.Show(  \n           ((MouseEventArgs)e).Location.ToString());};  \n    }  \n    ```  \n  \n     For more information, see [How to: Use Lambda Expressions Outside LINQ](../../../csharp/programming-guide/statements-expressions-operators/how-to-use-lambda-expressions-outside-linq.md).  \n  \n### To subscribe to events by using an anonymous method  \n  \n-   If you will not have to unsubscribe to an event later, you can use the addition assignment operator (`+=`) to attach an anonymous method to the event. In the following example, assume that an object named `publisher` has an event named `RaiseCustomEvent` and that a `CustomEventArgs` class has also been defined to carry some kind of specialized event information. Note that the subscriber class needs a reference to `publisher` in order to subscribe to its events.  \n  \n    ```csharp\n    publisher.RaiseCustomEvent += delegate(object o, CustomEventArgs e)  \n    {  \n      string s = o.ToString() + \" \" + e.ToString();  \n      Console.WriteLine(s);  \n    };  \n    ```  \n  \n     It is important to notice that you cannot easily unsubscribe from an event if you used an anonymous function to subscribe to it. To unsubscribe in this scenario, it is necessary to go back to the code where you subscribe to the event, store the anonymous method in a delegate variable, and then add the delegate to the event. In general, we recommend that you do not use anonymous functions to subscribe to events if you will have to unsubscribe from the event at some later point in your code. For more information about anonymous functions, see [Anonymous Functions](../../../csharp/programming-guide/statements-expressions-operators/anonymous-functions.md).  \n  \n## Unsubscribing  \n To prevent your event handler from being invoked when the event is raised, unsubscribe from the event. In order to prevent resource leaks, you should unsubscribe from events before you dispose of a subscriber object. Until you unsubscribe from an event, the multicast delegate that underlies the event in the publishing object has a reference to the delegate that encapsulates the subscriber's event handler. As long as the publishing object holds that reference, garbage collection will not delete your subscriber object.  \n  \n#### To unsubscribe from an event  \n  \n-   Use the subtraction assignment operator (`-=`) to unsubscribe from an event:  \n  \n    ```csharp\n    publisher.RaiseCustomEvent -= HandleCustomEvent;  \n    ```  \n  \n     When all subscribers have unsubscribed from an event, the event instance in the publisher class is set to `null`.  \n  \n## See also\n\n- [Events](../../../csharp/programming-guide/events/index.md)\n- [event](../../../csharp/language-reference/keywords/event.md)\n- [How to: Publish Events that Conform to .NET Framework Guidelines](../../../csharp/programming-guide/events/how-to-publish-events-that-conform-to-net-framework-guidelines.md)\n- [-= Operator (C# Reference)](../../language-reference/operators/subtraction-assignment-operator.md)\n- [+= Operator](../../../csharp/language-reference/operators/addition-assignment-operator.md)\n","nodes":[{"pos":[4,307],"embed":true,"restype":"x-metadata","content":"title: \"How to: Subscribe to and Unsubscribe from Events - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"event handlers [C#], creating\"\n  - \"Code Editor, event handlers\"\n  - \"events [C#], creating using the IDE\"\nms.assetid: 6319f39f-282c-4173-8a62-6c4657cf51cd","nodes":[{"content":"How to: Subscribe to and Unsubscribe from Events - C# Programming Guide","nodes":[{"pos":[0,71],"content":"How to: Subscribe to and Unsubscribe from Events - C# Programming Guide","nodes":[{"content":"How to: Subscribe to and Unsubscribe from Events - C# Programming Guide","pos":[0,71]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[314,385],"content":"How to: Subscribe to and Unsubscribe from Events (C# Programming Guide)","linkify":"How to: Subscribe to and Unsubscribe from Events (C# Programming Guide)","nodes":[{"content":"How to: Subscribe to and Unsubscribe from Events (C# Programming Guide)","pos":[0,71]}]},{"content":"You subscribe to an event that is published by another class when you want to write custom code that is called when that event is raised.","pos":[386,523]},{"content":"For example, you might subscribe to a button's <ph id=\"ph1\">`click`</ph> event in order to make your application do something useful when the user clicks the button.","pos":[524,671],"source":" For example, you might subscribe to a button's `click` event in order to make your application do something useful when the user clicks the button."},{"pos":[681,734],"content":"To subscribe to events by using the Visual Studio IDE","linkify":"To subscribe to events by using the Visual Studio IDE","nodes":[{"content":"To subscribe to events by using the Visual Studio IDE","pos":[0,53]}]},{"pos":[744,914],"content":"If you cannot see the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> window, in <bpt id=\"p2\">**</bpt>Design<ept id=\"p2\">**</ept> view, right-click the form or control for which you want to create an event handler, and select <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept>.","source":"If you cannot see the **Properties** window, in **Design** view, right-click the form or control for which you want to create an event handler, and select **Properties**."},{"pos":[924,987],"content":"On top of the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> window, click the <bpt id=\"p2\">**</bpt>Events<ept id=\"p2\">**</ept> icon.","source":"On top of the **Properties** window, click the **Events** icon."},{"pos":[997,1074],"content":"Double-click the event that you want to create, for example the <ph id=\"ph1\">`Load`</ph> event.","source":"Double-click the event that you want to create, for example the `Load` event."},{"content":"Visual C# creates an empty event handler method and adds it to your code.","pos":[1085,1158]},{"content":"Alternatively you can add the code manually in <bpt id=\"p1\">**</bpt>Code<ept id=\"p1\">**</ept> view.","pos":[1159,1220],"source":" Alternatively you can add the code manually in **Code** view."},{"content":"For example, the following lines of code declare an event handler method that will be called when the <ph id=\"ph1\">`Form`</ph> class raises the <ph id=\"ph2\">`Load`</ph> event.","pos":[1221,1360],"source":" For example, the following lines of code declare an event handler method that will be called when the `Form` class raises the `Load` event."},{"content":"The line of code that is required to subscribe to the event is also automatically generated in the <ph id=\"ph1\">`InitializeComponent`</ph> method in the Form1.Designer.cs file in your project.","pos":[1500,1674],"source":"The line of code that is required to subscribe to the event is also automatically generated in the `InitializeComponent` method in the Form1.Designer.cs file in your project."},{"content":"It resembles this:","pos":[1675,1693]},{"pos":[1791,1830],"content":"To subscribe to events programmatically","linkify":"To subscribe to events programmatically","nodes":[{"content":"To subscribe to events programmatically","pos":[0,39]}]},{"content":"Define an event handler method whose signature matches the delegate signature for the event.","pos":[1840,1932]},{"content":"For example, if the event is based on the <ph id=\"ph1\">&lt;xref:System.EventHandler&gt;</ph> delegate type, the following code represents the method stub:","pos":[1933,2063],"source":" For example, if the event is based on the <xref:System.EventHandler> delegate type, the following code represents the method stub:"},{"content":"Use the addition assignment operator (<ph id=\"ph1\">`+=`</ph>) to attach your event handler to the event.","pos":[2217,2303],"source":"Use the addition assignment operator (`+=`) to attach your event handler to the event."},{"content":"In the following example, assume that an object named <ph id=\"ph1\">`publisher`</ph> has an event named <ph id=\"ph2\">`RaiseCustomEvent`</ph>.","pos":[2304,2408],"source":" In the following example, assume that an object named `publisher` has an event named `RaiseCustomEvent`."},{"content":"Note that the subscriber class needs a reference to the publisher class in order to subscribe to its events.","pos":[2409,2517]},{"content":"Note that the previous syntax is new in C# 2.0.","pos":[2610,2657]},{"content":"It is exactly equivalent to the C# 1.0 syntax in which the encapsulating delegate must be explicitly created by using the <ph id=\"ph1\">`new`</ph> keyword:","pos":[2658,2794],"source":" It is exactly equivalent to the C# 1.0 syntax in which the encapsulating delegate must be explicitly created by using the `new` keyword:"},{"content":"An event handler can also be added by using a lambda expression:","pos":[2911,2975]},{"pos":[3257,3443],"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Use Lambda Expressions Outside LINQ<ept id=\"p1\">](../../../csharp/programming-guide/statements-expressions-operators/how-to-use-lambda-expressions-outside-linq.md)</ept>.","source":"For more information, see [How to: Use Lambda Expressions Outside LINQ](../../../csharp/programming-guide/statements-expressions-operators/how-to-use-lambda-expressions-outside-linq.md)."},{"pos":[3453,3504],"content":"To subscribe to events by using an anonymous method","linkify":"To subscribe to events by using an anonymous method","nodes":[{"content":"To subscribe to events by using an anonymous method","pos":[0,51]}]},{"content":"If you will not have to unsubscribe to an event later, you can use the addition assignment operator (<ph id=\"ph1\">`+=`</ph>) to attach an anonymous method to the event.","pos":[3514,3664],"source":"If you will not have to unsubscribe to an event later, you can use the addition assignment operator (`+=`) to attach an anonymous method to the event."},{"content":"In the following example, assume that an object named <ph id=\"ph1\">`publisher`</ph> has an event named <ph id=\"ph2\">`RaiseCustomEvent`</ph> and that a <ph id=\"ph3\">`CustomEventArgs`</ph> class has also been defined to carry some kind of specialized event information.","pos":[3665,3878],"source":" In the following example, assume that an object named `publisher` has an event named `RaiseCustomEvent` and that a `CustomEventArgs` class has also been defined to carry some kind of specialized event information."},{"content":"Note that the subscriber class needs a reference to <ph id=\"ph1\">`publisher`</ph> in order to subscribe to its events.","pos":[3879,3979],"source":" Note that the subscriber class needs a reference to `publisher` in order to subscribe to its events."},{"content":"It is important to notice that you cannot easily unsubscribe from an event if you used an anonymous function to subscribe to it.","pos":[4192,4320]},{"content":"To unsubscribe in this scenario, it is necessary to go back to the code where you subscribe to the event, store the anonymous method in a delegate variable, and then add the delegate to the event.","pos":[4321,4517]},{"content":"In general, we recommend that you do not use anonymous functions to subscribe to events if you will have to unsubscribe from the event at some later point in your code.","pos":[4518,4686]},{"content":"For more information about anonymous functions, see <bpt id=\"p1\">[</bpt>Anonymous Functions<ept id=\"p1\">](../../../csharp/programming-guide/statements-expressions-operators/anonymous-functions.md)</ept>.","pos":[4687,4852],"source":" For more information about anonymous functions, see [Anonymous Functions](../../../csharp/programming-guide/statements-expressions-operators/anonymous-functions.md)."},{"pos":[4861,4874],"content":"Unsubscribing","linkify":"Unsubscribing","nodes":[{"content":"Unsubscribing","pos":[0,13]}]},{"content":"To prevent your event handler from being invoked when the event is raised, unsubscribe from the event.","pos":[4878,4980]},{"content":"In order to prevent resource leaks, you should unsubscribe from events before you dispose of a subscriber object.","pos":[4981,5094]},{"content":"Until you unsubscribe from an event, the multicast delegate that underlies the event in the publishing object has a reference to the delegate that encapsulates the subscriber's event handler.","pos":[5095,5286]},{"content":"As long as the publishing object holds that reference, garbage collection will not delete your subscriber object.","pos":[5287,5400]},{"pos":[5411,5439],"content":"To unsubscribe from an event","linkify":"To unsubscribe from an event","nodes":[{"content":"To unsubscribe from an event","pos":[0,28]}]},{"pos":[5449,5525],"content":"Use the subtraction assignment operator (<ph id=\"ph1\">`-=`</ph>) to unsubscribe from an event:","source":"Use the subtraction assignment operator (`-=`) to unsubscribe from an event:"},{"pos":[5618,5731],"content":"When all subscribers have unsubscribed from an event, the event instance in the publisher class is set to <ph id=\"ph1\">`null`</ph>.","source":"When all subscribers have unsubscribed from an event, the event instance in the publisher class is set to `null`."},{"pos":[5740,5748],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5752,5811],"content":"<bpt id=\"p1\">[</bpt>Events<ept id=\"p1\">](../../../csharp/programming-guide/events/index.md)</ept>","source":"[Events](../../../csharp/programming-guide/events/index.md)"},{"pos":[5814,5875],"content":"<bpt id=\"p1\">[</bpt>event<ept id=\"p1\">](../../../csharp/language-reference/keywords/event.md)</ept>","source":"[event](../../../csharp/language-reference/keywords/event.md)"},{"pos":[5878,6052],"content":"<bpt id=\"p1\">[</bpt>How to: Publish Events that Conform to .NET Framework Guidelines<ept id=\"p1\">](../../../csharp/programming-guide/events/how-to-publish-events-that-conform-to-net-framework-guidelines.md)</ept>","source":"[How to: Publish Events that Conform to .NET Framework Guidelines](../../../csharp/programming-guide/events/how-to-publish-events-that-conform-to-net-framework-guidelines.md)"},{"pos":[6055,6154],"content":"<bpt id=\"p1\">[</bpt>-= Operator (C# Reference)<ept id=\"p1\">](../../language-reference/operators/subtraction-assignment-operator.md)</ept>","source":"[-= Operator (C# Reference)](../../language-reference/operators/subtraction-assignment-operator.md)"},{"pos":[6157,6248],"content":"<bpt id=\"p1\">[</bpt>+= Operator<ept id=\"p1\">](../../../csharp/language-reference/operators/addition-assignment-operator.md)</ept>","source":"[+= Operator](../../../csharp/language-reference/operators/addition-assignment-operator.md)"}]}