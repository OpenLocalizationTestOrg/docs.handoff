{"content":"---\ntitle: \"Serialization Limitations of XamlWriter.Save\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"XamlWriter.Save [WPF], serialization limitations of\"\n  - \"limitations of XamlWriter.Save\"\n  - \"serialization limitations of XamlWriter.Save\"\nms.assetid: f86acc91-2b67-4039-8555-505734491d36\n---\n# Serialization Limitations of XamlWriter.Save\nThe [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] <xref:System.Windows.Markup.XamlWriter.Save%2A> can be used to serialize the contents of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application as a [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] file. However, there are some notable limitations in exactly what is serialized. These limitations and some general considerations are documented in this topic.  \n\n<a name=\"Run_Time__Not_Design_Time_Representation\"></a>   \n## Run-Time, Not Design-Time Representation  \n The basic philosophy of what is serialized by a call to <xref:System.Windows.Markup.XamlWriter.Save%2A> is that the result will be a representation of the object being serialized, at run-time. Many design-time properties of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file may already be optimized or lost by the time that the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is loaded as in-memory objects, and are not preserved when you call <xref:System.Windows.Markup.XamlWriter.Save%2A> to serialize. The serialized result is an effective representation of the constructed logical tree of the application, but not necessarily of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that produced it. These issues make it extremely difficult to use the <xref:System.Windows.Markup.XamlWriter.Save%2A> serialization as part of an extensive [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] design surface.  \n  \n<a name=\"Serialization_is_Self_Contained\"></a>   \n## Serialization is Self-Contained  \n The serialized output of <xref:System.Windows.Markup.XamlWriter.Save%2A> is self-contained; everything that is serialized is contained inside a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] single page, with a single root element, and no external references other than [!INCLUDE[TLA2#tla_uri#plural](../../../../includes/tla2sharptla-urisharpplural-md.md)]. For instance, if your page referenced resources from application resources, these will appear as if they were a component of the page being serialized.  \n  \n<a name=\"Extension_References_are_Dereferenced\"></a>   \n## Extension References are Dereferenced  \n Common references to objects made by various markup extension formats, such as `StaticResource` or `Binding`, will be dereferenced by the serialization process. These were already dereferenced at the time that in-memory objects were created by the application runtime, and the <xref:System.Windows.Markup.XamlWriter.Save%2A> logic does not revisit the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] to restore such references to the serialized output. This potentially freezes any databound or resource obtained value to be the value last used by the run-time representation, with only limited or indirect ability to distinguish such a value from any other value set locally. Images are also serialized as object references to images as they exist in the project, rather than as original source references, losing whatever filename or [!INCLUDE[TLA2#tla_uri](../../../../includes/tla2sharptla-uri-md.md)] was originally referenced. Even resources declared within the same page are seen serialized into the point where they were referenced, rather than being preserved as a key of a resource collection.  \n  \n<a name=\"Event_Handling_is_Not_Preserved\"></a>   \n## Event Handling is Not Preserved  \n When event handlers that are added through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] are serialized, they are not preserved. [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] without code-behind (and also without the related x:Code mechanism) has no way of serializing runtime procedural logic. Because serialization is self-contained and limited to the logical tree, there is no facility for storing the event handlers. As a result, event handler attributes, both the attribute itself and the string value that names the handler, are removed from the output [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].  \n  \n<a name=\"Realistic_Scenarios_for_Use_of_XAMLWriter_Save\"></a>   \n## Realistic Scenarios for Use of XAMLWriter.Save  \n While the limitations listed here are fairly substantial, there are still several appropriate scenarios for using <xref:System.Windows.Markup.XamlWriter.Save%2A> for serialization.  \n  \n-   Vector or graphical output: The output of the rendered area can be used to reproduce the same vector or graphics when reloaded.  \n  \n-   Rich text and flow documents: Text and all element formatting and element containment within it is preserved in the output. This can be useful for mechanisms that approximate a clipboard functionality.  \n  \n-   Preserving business object data: If you have stored data in custom elements, such as [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] data, so long as your business objects follow basic [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rules such as providing custom constructors and conversion for by-reference property values, these business objects can be perpetuated through serialization.\n","nodes":[{"pos":[4,296],"embed":true,"restype":"x-metadata","content":"title: \"Serialization Limitations of XamlWriter.Save\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"XamlWriter.Save [WPF], serialization limitations of\"\n  - \"limitations of XamlWriter.Save\"\n  - \"serialization limitations of XamlWriter.Save\"\nms.assetid: f86acc91-2b67-4039-8555-505734491d36","nodes":[{"content":"Serialization Limitations of XamlWriter.Save","nodes":[{"pos":[0,44],"content":"Serialization Limitations of XamlWriter.Save","nodes":[{"content":"Serialization Limitations of XamlWriter.Save","pos":[0,44]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[303,347],"content":"Serialization Limitations of XamlWriter.Save","linkify":"Serialization Limitations of XamlWriter.Save","nodes":[{"content":"Serialization Limitations of XamlWriter.Save","pos":[0,44]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)]</ph> <ph id=\"ph2\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> can be used to serialize the contents of a <ph id=\"ph3\">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]</ph> application as a <ph id=\"ph4\">[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]</ph> file.","pos":[348,683],"source":"The [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] <xref:System.Windows.Markup.XamlWriter.Save%2A> can be used to serialize the contents of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] application as a [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] file."},{"content":"However, there are some notable limitations in exactly what is serialized.","pos":[684,758]},{"content":"These limitations and some general considerations are documented in this topic.","pos":[759,838]},{"pos":[904,944],"content":"Run-Time, Not Design-Time Representation","linkify":"Run-Time, Not Design-Time Representation","nodes":[{"content":"Run-Time, Not Design-Time Representation","pos":[0,40]}]},{"content":"The basic philosophy of what is serialized by a call to <ph id=\"ph1\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> is that the result will be a representation of the object being serialized, at run-time.","pos":[948,1140],"source":"The basic philosophy of what is serialized by a call to <xref:System.Windows.Markup.XamlWriter.Save%2A> is that the result will be a representation of the object being serialized, at run-time."},{"content":"Many design-time properties of the original <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> file may already be optimized or lost by the time that the <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> is loaded as in-memory objects, and are not preserved when you call <ph id=\"ph3\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> to serialize.","pos":[1141,1517],"source":" Many design-time properties of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file may already be optimized or lost by the time that the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is loaded as in-memory objects, and are not preserved when you call <xref:System.Windows.Markup.XamlWriter.Save%2A> to serialize."},{"content":"The serialized result is an effective representation of the constructed logical tree of the application, but not necessarily of the original <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> that produced it.","pos":[1518,1748],"source":" The serialized result is an effective representation of the constructed logical tree of the application, but not necessarily of the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that produced it."},{"content":"These issues make it extremely difficult to use the <ph id=\"ph1\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> serialization as part of an extensive <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> design surface.","pos":[1749,1974],"source":" These issues make it extremely difficult to use the <xref:System.Windows.Markup.XamlWriter.Save%2A> serialization as part of an extensive [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] design surface."},{"pos":[2033,2064],"content":"Serialization is Self-Contained","linkify":"Serialization is Self-Contained","nodes":[{"content":"Serialization is Self-Contained","pos":[0,31]}]},{"content":"The serialized output of <ph id=\"ph1\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> is self-contained; everything that is serialized is contained inside a <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> single page, with a single root element, and no external references other than <ph id=\"ph3\">[!INCLUDE[TLA2#tla_uri#plural](../../../../includes/tla2sharptla-urisharpplural-md.md)]</ph>.","pos":[2068,2451],"source":"The serialized output of <xref:System.Windows.Markup.XamlWriter.Save%2A> is self-contained; everything that is serialized is contained inside a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] single page, with a single root element, and no external references other than [!INCLUDE[TLA2#tla_uri#plural](../../../../includes/tla2sharptla-urisharpplural-md.md)]."},{"content":"For instance, if your page referenced resources from application resources, these will appear as if they were a component of the page being serialized.","pos":[2452,2603]},{"pos":[2668,2705],"content":"Extension References are Dereferenced","linkify":"Extension References are Dereferenced","nodes":[{"content":"Extension References are Dereferenced","pos":[0,37]}]},{"content":"Common references to objects made by various markup extension formats, such as <ph id=\"ph1\">`StaticResource`</ph> or <ph id=\"ph2\">`Binding`</ph>, will be dereferenced by the serialization process.","pos":[2709,2869],"source":"Common references to objects made by various markup extension formats, such as `StaticResource` or `Binding`, will be dereferenced by the serialization process."},{"content":"These were already dereferenced at the time that in-memory objects were created by the application runtime, and the <ph id=\"ph1\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> logic does not revisit the original <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> to restore such references to the serialized output.","pos":[2870,3194],"source":" These were already dereferenced at the time that in-memory objects were created by the application runtime, and the <xref:System.Windows.Markup.XamlWriter.Save%2A> logic does not revisit the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] to restore such references to the serialized output."},{"content":"This potentially freezes any databound or resource obtained value to be the value last used by the run-time representation, with only limited or indirect ability to distinguish such a value from any other value set locally.","pos":[3195,3418]},{"content":"Images are also serialized as object references to images as they exist in the project, rather than as original source references, losing whatever filename or <ph id=\"ph1\">[!INCLUDE[TLA2#tla_uri](../../../../includes/tla2sharptla-uri-md.md)]</ph> was originally referenced.","pos":[3419,3674],"source":" Images are also serialized as object references to images as they exist in the project, rather than as original source references, losing whatever filename or [!INCLUDE[TLA2#tla_uri](../../../../includes/tla2sharptla-uri-md.md)] was originally referenced."},{"content":"Even resources declared within the same page are seen serialized into the point where they were referenced, rather than being preserved as a key of a resource collection.","pos":[3675,3845]},{"pos":[3904,3935],"content":"Event Handling is Not Preserved","linkify":"Event Handling is Not Preserved","nodes":[{"content":"Event Handling is Not Preserved","pos":[0,31]}]},{"content":"When event handlers that are added through <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> are serialized, they are not preserved.","pos":[3939,4093],"source":"When event handlers that are added through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] are serialized, they are not preserved."},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> without code-behind (and also without the related x:Code mechanism) has no way of serializing runtime procedural logic.","pos":[4094,4285],"source":"[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] without code-behind (and also without the related x:Code mechanism) has no way of serializing runtime procedural logic."},{"content":"Because serialization is self-contained and limited to the logical tree, there is no facility for storing the event handlers.","pos":[4286,4411]},{"content":"As a result, event handler attributes, both the attribute itself and the string value that names the handler, are removed from the output <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph>.","pos":[4412,4622],"source":" As a result, event handler attributes, both the attribute itself and the string value that names the handler, are removed from the output [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]."},{"pos":[4696,4742],"content":"Realistic Scenarios for Use of XAMLWriter.Save","linkify":"Realistic Scenarios for Use of XAMLWriter.Save","nodes":[{"content":"Realistic Scenarios for Use of XAMLWriter.Save","pos":[0,46]}]},{"pos":[4746,4926],"content":"While the limitations listed here are fairly substantial, there are still several appropriate scenarios for using <ph id=\"ph1\">&lt;xref:System.Windows.Markup.XamlWriter.Save%2A&gt;</ph> for serialization.","source":"While the limitations listed here are fairly substantial, there are still several appropriate scenarios for using <xref:System.Windows.Markup.XamlWriter.Save%2A> for serialization."},{"content":"Vector or graphical output: The output of the rendered area can be used to reproduce the same vector or graphics when reloaded.","pos":[4936,5063]},{"content":"Rich text and flow documents: Text and all element formatting and element containment within it is preserved in the output.","pos":[5073,5196]},{"content":"This can be useful for mechanisms that approximate a clipboard functionality.","pos":[5197,5274]},{"pos":[5284,5720],"content":"Preserving business object data: If you have stored data in custom elements, such as <ph id=\"ph1\">[!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)]</ph> data, so long as your business objects follow basic <ph id=\"ph2\">[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]</ph> rules such as providing custom constructors and conversion for by-reference property values, these business objects can be perpetuated through serialization.","source":"Preserving business object data: If you have stored data in custom elements, such as [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] data, so long as your business objects follow basic [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rules such as providing custom constructors and conversion for by-reference property values, these business objects can be perpetuated through serialization."}]}