{"content":"---\ntitle: \"Retrieving Objects from the Identity Cache | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 96c13903-ccb6-4a0e-ab6a-8ca955ca314d\ncaps.latest.revision: 2\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"\n---\n# Retrieving Objects from the Identity Cache\nThis topic describes the types of LINQ to SQL queries that return an object from the identity cache that is managed by the <xref:System.Data.Linq.DataContext>.  \n  \n In LINQ to SQL, one of the ways in which the <xref:System.Data.Linq.DataContext> manages objects is by logging object identities in an identity cache as queries are executed. In some cases, LINQ to SQL will attempt to retrieve an object from the identity cache before executing a query in the database.  \n  \n In general, for a LINQ to SQL query to return an object from the identity cache, the query must be based on the primary key of an object and must return a single object. In particular, the query must be in one of the general forms shown below.  \n  \n> [!NOTE]\n>  Pre-compiled queries will not return objects from the identity cache. For more information about pre-compiled queries, see <xref:System.Data.Linq.CompiledQuery> and [How to: Store and Reuse Queries](../../../../../../docs/framework/data/adonet/sql/linq/how-to-store-and-reuse-queries.md).  \n  \n A query must be in one of the following general forms to retrieve an object from the identity cache:  \n  \n-   <xref:System.Data.Linq.Table%601> `.Function1(` `predicate` `)`  \n  \n-   <xref:System.Data.Linq.Table%601> `.Function1(` `predicate` `).Function2()`  \n  \n In these general forms, `Function1`, `Function2`, and `predicate` are defined as follows.  \n  \n `Function1` can be any of the following:  \n  \n-   <xref:System.Linq.Queryable.Where%2A>  \n  \n-   <xref:System.Linq.Queryable.First%2A>  \n  \n-   <xref:System.Linq.Queryable.FirstOrDefault%2A>  \n  \n-   <xref:System.Linq.Queryable.Single%2A>  \n  \n-   <xref:System.Linq.Queryable.SingleOrDefault%2A>  \n  \n `Function2` can be any of the following:  \n  \n-   <xref:System.Linq.Queryable.First%2A>  \n  \n-   <xref:System.Linq.Queryable.FirstOrDefault%2A>  \n  \n-   <xref:System.Linq.Queryable.Single%2A>  \n  \n-   <xref:System.Linq.Queryable.SingleOrDefault%2A>  \n  \n `predicate` must be an expression in which the object's primary key property is set to a constant value. If an object has a primary key defined by more than one property, each primary key property must be set to a constant value. The following are examples of the form `predicate` must take:  \n  \n-   `c => c.PK == constant_value`  \n  \n-   `c => c.PK1 == constant_value1 && c=> c.PK2 == constant_value2`  \n  \n## Example  \n The following code provides examples of the types of LINQ to SQL queries that retrieve an object from the identity cache.  \n  \n [!code-csharp[L2S_QueryCache#1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/l2s_querycache/cs/program.cs#1)]\n [!code-vb[L2S_QueryCache#1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/l2s_querycache/vb/module1.vb#1)]  \n  \n## See Also  \n [Query Concepts](../../../../../../docs/framework/data/adonet/sql/linq/query-concepts.md)   \n [Object Identity](../../../../../../docs/framework/data/adonet/sql/linq/object-identity.md)   \n [Background Information](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)   \n [Object Identity](../../../../../../docs/framework/data/adonet/sql/linq/object-identity.md)","nodes":[{"pos":[4,373],"nodes":[{"content":"Retrieving Objects from the Identity Cache | Microsoft Docs","nodes":[{"pos":[0,59],"content":"Retrieving Objects from the Identity Cache | Microsoft Docs","nodes":[{"content":"Retrieving Objects from the Identity Cache | Microsoft Docs","pos":[0,59]}]}],"pos":[6,68],"yaml":true}],"content":"title: \"Retrieving Objects from the Identity Cache | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 96c13903-ccb6-4a0e-ab6a-8ca955ca314d\ncaps.latest.revision: 2\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"","yamlblock":true},{"pos":[380,422],"content":"Retrieving Objects from the Identity Cache","linkify":"Retrieving Objects from the Identity Cache","nodes":[{"content":"Retrieving Objects from the Identity Cache","pos":[0,42]}]},{"content":"This topic describes the types of LINQ to SQL queries that return an object from the identity cache that is managed by the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph>.","pos":[423,582],"source":"This topic describes the types of LINQ to SQL queries that return an object from the identity cache that is managed by the <xref:System.Data.Linq.DataContext>."},{"content":"In LINQ to SQL, one of the ways in which the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> manages objects is by logging object identities in an identity cache as queries are executed.","pos":[589,763],"source":"In LINQ to SQL, one of the ways in which the <xref:System.Data.Linq.DataContext> manages objects is by logging object identities in an identity cache as queries are executed."},{"content":"In some cases, LINQ to SQL will attempt to retrieve an object from the identity cache before executing a query in the database.","pos":[764,891]},{"content":"In general, for a LINQ to SQL query to return an object from the identity cache, the query must be based on the primary key of an object and must return a single object.","pos":[898,1067]},{"content":"In particular, the query must be in one of the general forms shown below.","pos":[1068,1141]},{"pos":[1149,1448],"content":"[!NOTE]\n Pre-compiled queries will not return objects from the identity cache. For more information about pre-compiled queries, see <xref:System.Data.Linq.CompiledQuery> and [How to: Store and Reuse Queries](../../../../../../docs/framework/data/adonet/sql/linq/how-to-store-and-reuse-queries.md).","leadings":["","> "],"nodes":[{"content":"Pre-compiled queries will not return objects from the identity cache. For more information about pre-compiled queries, see <xref:System.Data.Linq.CompiledQuery> and [How to: Store and Reuse Queries](../../../../../../docs/framework/data/adonet/sql/linq/how-to-store-and-reuse-queries.md).","pos":[9,297],"nodes":[{"content":"Pre-compiled queries will not return objects from the identity cache.","pos":[0,69]},{"content":"For more information about pre-compiled queries, see <ph id=\"ph1\">&lt;xref:System.Data.Linq.CompiledQuery&gt;</ph> and <bpt id=\"p1\">[</bpt>How to: Store and Reuse Queries<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/how-to-store-and-reuse-queries.md)</ept>.","pos":[70,288],"source":" For more information about pre-compiled queries, see <xref:System.Data.Linq.CompiledQuery> and [How to: Store and Reuse Queries](../../../../../../docs/framework/data/adonet/sql/linq/how-to-store-and-reuse-queries.md)."}]}]},{"content":"A query must be in one of the following general forms to retrieve an object from the identity cache:","pos":[1455,1555]},{"pos":[1565,1628],"content":"<ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601&gt;</ph> <ph id=\"ph2\">`.Function1(`</ph> <ph id=\"ph3\">`predicate`</ph> <ph id=\"ph4\">`)`</ph>","source":"<xref:System.Data.Linq.Table%601> `.Function1(` `predicate` `)`"},{"pos":[1638,1713],"content":"<ph id=\"ph1\">&lt;xref:System.Data.Linq.Table%601&gt;</ph> <ph id=\"ph2\">`.Function1(`</ph> <ph id=\"ph3\">`predicate`</ph> <ph id=\"ph4\">`).Function2()`</ph>","source":"<xref:System.Data.Linq.Table%601> `.Function1(` `predicate` `).Function2()`"},{"pos":[1720,1809],"content":"In these general forms, <ph id=\"ph1\">`Function1`</ph>, <ph id=\"ph2\">`Function2`</ph>, and <ph id=\"ph3\">`predicate`</ph> are defined as follows.","source":"In these general forms, `Function1`, `Function2`, and `predicate` are defined as follows."},{"pos":[1816,1856],"content":"<ph id=\"ph1\">`Function1`</ph> can be any of the following:","source":"`Function1` can be any of the following:"},{"pos":[2118,2158],"content":"<ph id=\"ph1\">`Function2`</ph> can be any of the following:","source":"`Function2` can be any of the following:"},{"content":"<ph id=\"ph1\">`predicate`</ph> must be an expression in which the object's primary key property is set to a constant value.","pos":[2373,2477],"source":"`predicate` must be an expression in which the object's primary key property is set to a constant value."},{"content":"If an object has a primary key defined by more than one property, each primary key property must be set to a constant value.","pos":[2478,2602]},{"content":"The following are examples of the form <ph id=\"ph1\">`predicate`</ph> must take:","pos":[2603,2664],"source":" The following are examples of the form `predicate` must take:"},{"pos":[2785,2792],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code provides examples of the types of LINQ to SQL queries that retrieve an object from the identity cache.","pos":[2796,2917]},{"pos":[2924,3173],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>L2S_QueryCache#1<ept id=\"p2\">](../../../../../../samples/snippets/csharp/VS_Snippets_Data/l2s_querycache/cs/program.cs#1)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>L2S_QueryCache#1<ept id=\"p4\">](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/l2s_querycache/vb/module1.vb#1)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[L2S_QueryCache#1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/l2s_querycache/cs/program.cs#1)]\n [!code-vb[L2S_QueryCache#1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/l2s_querycache/vb/module1.vb#1)]"},{"pos":[3182,3190],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Query Concepts<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/query-concepts.md)</ept><ph id=\"ph1\"> </ph>","pos":[3194,3284],"source":"[Query Concepts](../../../../../../docs/framework/data/adonet/sql/linq/query-concepts.md) "},{"content":"<bpt id=\"p1\">[</bpt>Object Identity<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/object-identity.md)</ept><ph id=\"ph1\"> </ph>","pos":[3288,3380],"source":"[Object Identity](../../../../../../docs/framework/data/adonet/sql/linq/object-identity.md) "},{"content":"<bpt id=\"p1\">[</bpt>Background Information<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)</ept><ph id=\"ph1\"> </ph>","pos":[3384,3490],"source":"[Background Information](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md) "},{"content":"<bpt id=\"p1\">[</bpt>Object Identity<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/object-identity.md)</ept>","pos":[3494,3585],"source":"[Object Identity](../../../../../../docs/framework/data/adonet/sql/linq/object-identity.md)"}]}