{"content":"---\ntitle: \"Migrating WSE 3.0 Web Services to WCF\"\nms.date: \"03/30/2017\"\nms.assetid: 7bc5fff7-a2b2-4dbc-86cc-ecf73653dcdc\n---\n# Migrating WSE 3.0 Web Services to WCF\nThe benefits of migrating WSE 3.0 Web services to Windows Communication Foundation (WCF) include improved performance and the support of additional transports, additional security scenarios, and WS-* specifications. A Web service that is migrated from WSE 3.0 to WCF can experience up to a 200% to 400% performance improvement. For more information about the transports supported by WCF, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md). For a list of the scenarios supported by WCF, see [Common Security Scenarios](../../../../docs/framework/wcf/feature-details/common-security-scenarios.md). For a list of the specifications that are supported by WCF, see [Web Services Protocols Interoperability Guide](../../../../docs/framework/wcf/feature-details/web-services-protocols-interoperability-guide.md).  \n  \n The following sections provide guidance on how to migrate a specific feature of a WSE 3.0 Web service to WCF.  \n  \n## General  \n WSE 3.0 and WCF applications include wire-level interoperability and a common set of terminology. WSE 3.0 and WCF applications are wire-level interoperable based on the set of WS-* specifications that they both support. When a WSE 3.0 or WCF application is developed there is a common set of terminology, such as the names of the turnkey security assertions in WSE and the authentication modes.  \n  \n Although there are many similar aspects between the WCF and ASP.NET or WSE 3.0 programming models, they are different. For details about the WCF programming model, see [Basic Programming Lifecycle](../../../../docs/framework/wcf/basic-programming-lifecycle.md).  \n  \n> [!NOTE]\n>  To migrate a WSE Web service to WCF the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool can be used to generate a client. That client however contains interfaces and classes that can be used as a starting point for a WCF service too. The interfaces that are generated have the <xref:System.ServiceModel.OperationContractAttribute> attribute applied to the members of the contract with the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to `*`. When a WSE client calls a Web service with this setting, the following exception is thrown: **Web.Services3.ResponseProcessingException: WSE910: An error happened during the processing of a response message, and you can find the error in the inner exception**. To mitigate this, set the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property of the <xref:System.ServiceModel.OperationContractAttribute> attribute to a non-`null` value, such as `http://Microsoft.WCF.Documentation/ResponseToOCAMethod`.  \n  \n## Security  \n  \n### WSE 3.0 Web services that are secured using a policy file  \n WCF services can use a configuration file to secure a service and that mechanism is similar to a WSE 3.0 policy file. In WSE 3.0 when securing a Web service using a policy file, you use either a turnkey security assertion or a custom policy assertion. The turnkey security assertions map closely to the authentication mode of a WCF security binding element. Not only are the WCF authentication modes and WSE 3.0 turnkey security assertions named the same or similarly, they secure the messages using the same credential types. For instance, the `usernameForCertificate` turnkey security assertion in WSE 3.0 maps to the `UsernameForCertificate` authentication mode in WCF. The following code examples demonstrate how a minimal policy that uses the `usernameForCertificate` turnkey security assertion in WSE 3.0 maps to a `UsernameForCertificate` authentication mode in WCF in a custom binding.  \n  \n **WSE 3.0**  \n  \n```xml  \n<policies>  \n  <policy name=\"MyPolicy\">  \n    <usernameForCertificate messageProtectionOrder=\"SignBeforeEncrypt\"  \n                            requireDeriveKeys=\"true\"/>  \n  </policy>  \n</policies>  \n```  \n  \n **WCF**  \n  \n```xml  \n<customBinding>  \n  <binding name=\"MyBinding\">  \n    <security authenticationMode=\"UserNameForCertificate\"   \n              messageProtectionOrder=\"SignBeforeEncrypt\"  \n              requireDerivedKeys=\"true\"/>  \n  </binding>  \n</customBinding>  \n```  \n  \n To migrate the security settings of a WSE 3.0 Web service that are specified in a policy file to WCF, a custom binding must be created in a configuration file and the turnkey security assertion must be set to its equivalent authentication mode. Additionally, the custom binding must be configured to use the August 2004 WS-Addressing specification when WSE 3.0 clients communicate with the service. When the migrated WCF service does not require communication with WSE 3.0 clients and must only maintain security parity, consider using the WCF system-defined bindings with appropriate security settings instead of creating a custom binding.  \n  \n The following table lists the mapping between a WSE 3.0 policy file and the equivalent custom binding in WCF.  \n  \n|WSE 3.0 Turnkey Security Assertion|WCF custom binding configuration|  \n|----------------------------------------|--------------------------------------|  \n|\\<usernameOverTransportSecurity />|`<customBinding>   <binding name=\"MyBinding\">     <security authenticationMode=\"UserNameOverTransport\" />     <textMessageEncoding messageVersion=\"Soap12WSAddressingAugust2004\" />   </binding> </customBinding>`|  \n|\\<mutualCertificate10Security />|`<customBinding>   <binding name=\"MyBinding\">     <security messageSecurityVersion=\"WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10\" authenticationMode=\"MutualCertificate\" />     <textMessageEncoding messageVersion=\"Soap12WSAddressingAugust2004\" />   </binding> </customBinding>`|  \n|\\<usernameForCertificateSecurity />|`<customBinding>   <binding name=\"MyBinding\">     <security authenticationMode=\"UsernameForCertificate\"/>     <textMessageEncoding messageVersion=\"Soap12WSAddressingAugust2004\" />   </binding> </customBinding>`|  \n|\\<anonymousForCertificateSecurity />|`<customBinding>   <binding name=\"MyBinding\">     <security authenticationMode=\"AnonymousForCertificate\"/>     <textMessageEncoding messageVersion=\"Soap12WSAddressingAugust2004\" />   </binding> </customBinding>`|  \n|\\<kerberosSecurity />|`<customBinding>   <binding name=\"MyBinding\">     <security authenticationMode=\"Kerberos\"/>     <textMessageEncoding messageVersion=\"Soap12WSAddressingAugust2004\" />   </binding> </customBinding>`|  \n|\\<mutualCertificate11Security />|`<customBinding>   <binding name=\"MyBinding\">     <security authenticationMode=\"MutualCertificate\"/>     <textMessageEncoding messageVersion=\"Soap12WSAddressingAugust2004\" />   </binding> </customBinding>`|  \n  \n For more information about creating custom bindings in WCF, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md).  \n  \n### WSE 3.0 Web services that are secured using application code  \n Whether WSE 3.0 or WCF is used, the security requirements can be specified in application code instead of in configuration. In WSE 3.0, this is accomplished by creating a class that derives from the `Policy` class and then by adding the requirements by calling the `Add` method. For more details about specifying the security requirements in code, see [How to: Secure a Web Service Without Using a Policy File](https://go.microsoft.com/fwlink/?LinkId=73747). In WCF, to specify security requirements in code, create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class and add an instance of a <xref:System.ServiceModel.Channels.SecurityBindingElement> to the <xref:System.ServiceModel.Channels.BindingElementCollection>. The security assertion requirements are set using the static authentication mode helper methods of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class. For more details about specifying security requirements in code using WCF, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md) and [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).  \n  \n### WSE 3.0 Custom Policy Assertion  \n In WSE 3.0 there are two types of custom policy assertions: those that secure a SOAP message and those that do not secure a SOAP message. Policy assertions that secure SOAP messages derive from WSE 3.0 `SecurityPolicyAssertion` class and the conceptual equivalent in WCF is the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.  \n  \n An important point to note is that the WSE 3.0 turnkey security assertions are a subset of the WCF authentication modes. If you have created a custom policy assertion in WSE 3.0, there may be an equivalent WCF authentication mode. For example, WSE 3.0 does not provide a CertificateOverTransport security assertion that is the equivalent to `UsernameOverTransport` turnkey security assertion, but uses an X.509 certificate for client authentication purposes. If you have defined your own custom policy assertion for this scenario, WCF makes the migration straightforward. WCF defines an authentication mode for this scenario, so you can take advantage of the static authentication mode helper methods to configure a WCF<xref:System.ServiceModel.Channels.SecurityBindingElement>.  \n  \n When there is not a WCF authentication mode that is equivalent to a custom policy assertion that secures SOAP messages, derive a class from <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>WCF classes and specify the equivalent binding element. For more details, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).  \n  \n To convert a custom policy assertion that does not secure a SOAP message, see [Filtering](../../../../docs/framework/wcf/feature-details/filtering.md) and the sample [Custom Message Interceptor](../../../../docs/framework/wcf/samples/custom-message-interceptor.md).  \n  \n### WSE 3.0 Custom Security Token  \n The WCF programming model for creating a custom token is different than WSE 3.0. For details about creating a custom token in WSE, see [Creating Custom Security Tokens](https://go.microsoft.com/fwlink/?LinkID=73750). For details about creating a custom token in WCF, see [How to: Create a Custom Token](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md).  \n  \n### WSE 3.0 Custom Token Manager  \n The programming model for creating a custom token manager is different in WCF than WSE 3.0. For details about how to create a custom token manager and the other components that are required for a custom security token, see [How to: Create a Custom Token](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md).  \n  \n> [!NOTE]\n>  If you have created a custom `UsernameToken` security token manager, WCF provides an easier mechanism to specify the authentication logic than creating a custom security token manager. For more details, see [How to: Use a Custom User Name and Password Validator](../../../../docs/framework/wcf/feature-details/how-to-use-a-custom-user-name-and-password-validator.md).  \n  \n### WSE 3.0 Web services that use MTOM encoded SOAP messages  \n Like a WSE 3 application, a WCF application can specify the MTOM message encoding in configuration. To migrate this setting, add the [\\<mtomMessageEncoding>](../../../../docs/framework/configure-apps/file-schema/wcf/mtommessageencoding.md) to the binding for the service. The following code example demonstrates how MTOM encoding is specified in WSE 3.0 for a service that is equivalent in WCF.  \n  \n **WSE 3.0**  \n  \n```xml  \n<messaging>  \n    <mtom clientMode=\"On\"/>  \n</messaging>  \n```  \n  \n **WCF**  \n  \n```xml  \n<customBinding>  \n  <binding name=\"MyBinding\">  \n    <mtomMessageEncoding/>  \n  </binding>  \n</customBinding>  \n```  \n  \n## Messaging  \n  \n### WSE 3.0 Applications that use the WSE Messaging API  \n When the WSE Messaging API is used to gain direct access to the XML that is communicated between the client and Web service, the application can be converted to use \"Plain Old XML\" (POX). For more details about POX, see [Interoperability with POX Applications](../../../../docs/framework/wcf/feature-details/interoperability-with-pox-applications.md). For more details about the WSE Messaging API, see [Sending and Receiving SOAP Messages Using WSE Messaging API](https://go.microsoft.com/fwlink/?LinkID=73755).  \n  \n## Transports  \n  \n### TCP  \n By default, WSE 3.0 clients and Web services that send SOAP messages using the TCP transport do not interoperate with WCF clients and Web services. This incompatibility is due to differences in the framing used in the TCP protocol and for performance reasons. However, a WCF sample details how to implement a custom TCP session that interoperates with WSE 3.0. For details about this sample, see [Transport: WSE 3.0 TCP Interoperability](../../../../docs/framework/wcf/samples/transport-wse-3-0-tcp-interoperability.md).  \n  \n To specify that a WCF application uses the TCP transport, use the [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md).  \n  \n### Custom Transport  \n The equivalent of a WSE 3.0 custom transport in WCF is a channel extension. For details about creating a channel extension, see [Extending the Channel Layer](../../../../docs/framework/wcf/extending/extending-the-channel-layer.md).  \n  \n## See also\n\n- [Basic Programming Lifecycle](../../../../docs/framework/wcf/basic-programming-lifecycle.md)\n- [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md)\n- [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)\n- [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)\n","nodes":[{"pos":[4,121],"embed":true,"restype":"x-metadata","content":"title: \"Migrating WSE 3.0 Web Services to WCF\"\nms.date: \"03/30/2017\"\nms.assetid: 7bc5fff7-a2b2-4dbc-86cc-ecf73653dcdc","nodes":[{"content":"Migrating WSE 3.0 Web Services to WCF","nodes":[{"pos":[0,37],"content":"Migrating WSE 3.0 Web Services to WCF","nodes":[{"content":"Migrating WSE 3.0 Web Services to WCF","pos":[0,37]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[128,165],"content":"Migrating WSE 3.0 Web Services to WCF","linkify":"Migrating WSE 3.0 Web Services to WCF","nodes":[{"content":"Migrating WSE 3.0 Web Services to WCF","pos":[0,37]}]},{"content":"The benefits of migrating WSE 3.0 Web services to Windows Communication Foundation (WCF) include improved performance and the support of additional transports, additional security scenarios, and WS-* specifications.","pos":[166,381]},{"content":"A Web service that is migrated from WSE 3.0 to WCF can experience up to a 200% to 400% performance improvement.","pos":[382,493]},{"content":"For more information about the transports supported by WCF, see <bpt id=\"p1\">[</bpt>Choosing a Transport<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md)</ept>.","pos":[494,653],"source":" For more information about the transports supported by WCF, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md)."},{"content":"For a list of the scenarios supported by WCF, see <bpt id=\"p1\">[</bpt>Common Security Scenarios<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/common-security-scenarios.md)</ept>.","pos":[654,809],"source":" For a list of the scenarios supported by WCF, see [Common Security Scenarios](../../../../docs/framework/wcf/feature-details/common-security-scenarios.md)."},{"content":"For a list of the specifications that are supported by WCF, see <bpt id=\"p1\">[</bpt>Web Services Protocols Interoperability Guide<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/web-services-protocols-interoperability-guide.md)</ept>.","pos":[810,1019],"source":" For a list of the specifications that are supported by WCF, see [Web Services Protocols Interoperability Guide](../../../../docs/framework/wcf/feature-details/web-services-protocols-interoperability-guide.md)."},{"content":"The following sections provide guidance on how to migrate a specific feature of a WSE 3.0 Web service to WCF.","pos":[1026,1135]},{"pos":[1144,1151],"content":"General","linkify":"General","nodes":[{"content":"General","pos":[0,7]}]},{"content":"WSE 3.0 and WCF applications include wire-level interoperability and a common set of terminology.","pos":[1155,1252]},{"content":"WSE 3.0 and WCF applications are wire-level interoperable based on the set of WS-* specifications that they both support.","pos":[1253,1374]},{"content":"When a WSE 3.0 or WCF application is developed there is a common set of terminology, such as the names of the turnkey security assertions in WSE and the authentication modes.","pos":[1375,1549]},{"content":"Although there are many similar aspects between the WCF and ASP.NET or WSE 3.0 programming models, they are different.","pos":[1556,1674]},{"content":"For details about the WCF programming model, see <bpt id=\"p1\">[</bpt>Basic Programming Lifecycle<ept id=\"p1\">](../../../../docs/framework/wcf/basic-programming-lifecycle.md)</ept>.","pos":[1675,1817],"source":" For details about the WCF programming model, see [Basic Programming Lifecycle](../../../../docs/framework/wcf/basic-programming-lifecycle.md)."},{"pos":[1825,2929],"content":"[!NOTE]\n To migrate a WSE Web service to WCF the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool can be used to generate a client. That client however contains interfaces and classes that can be used as a starting point for a WCF service too. The interfaces that are generated have the <xref:System.ServiceModel.OperationContractAttribute> attribute applied to the members of the contract with the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to `*`. When a WSE client calls a Web service with this setting, the following exception is thrown: **Web.Services3.ResponseProcessingException: WSE910: An error happened during the processing of a response message, and you can find the error in the inner exception**. To mitigate this, set the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property of the <xref:System.ServiceModel.OperationContractAttribute> attribute to a non-`null` value, such as `http://Microsoft.WCF.Documentation/ResponseToOCAMethod`.","leadings":["","> "],"nodes":[{"content":"To migrate a WSE Web service to WCF the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool can be used to generate a client. That client however contains interfaces and classes that can be used as a starting point for a WCF service too. The interfaces that are generated have the <xref:System.ServiceModel.OperationContractAttribute> attribute applied to the members of the contract with the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to `*`. When a WSE client calls a Web service with this setting, the following exception is thrown: **Web.Services3.ResponseProcessingException: WSE910: An error happened during the processing of a response message, and you can find the error in the inner exception**. To mitigate this, set the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property of the <xref:System.ServiceModel.OperationContractAttribute> attribute to a non-`null` value, such as `http://Microsoft.WCF.Documentation/ResponseToOCAMethod`.","pos":[9,1102],"nodes":[{"content":"To migrate a WSE Web service to WCF the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> tool can be used to generate a client.","pos":[0,211],"source":"To migrate a WSE Web service to WCF the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool can be used to generate a client."},{"content":"That client however contains interfaces and classes that can be used as a starting point for a WCF service too.","pos":[212,323]},{"content":"The interfaces that are generated have the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationContractAttribute&gt;</ph> attribute applied to the members of the contract with the <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A&gt;</ph> property set to <ph id=\"ph3\">`*`</ph>.","pos":[324,568],"source":" The interfaces that are generated have the <xref:System.ServiceModel.OperationContractAttribute> attribute applied to the members of the contract with the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to `*`."},{"content":"When a WSE client calls a Web service with this setting, the following exception is thrown: <bpt id=\"p1\">**</bpt>Web.Services3.ResponseProcessingException: WSE910: An error happened during the processing of a response message, and you can find the error in the inner exception<ept id=\"p1\">**</ept>.","pos":[569,829],"source":" When a WSE client calls a Web service with this setting, the following exception is thrown: **Web.Services3.ResponseProcessingException: WSE910: An error happened during the processing of a response message, and you can find the error in the inner exception**."},{"content":"To mitigate this, set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationContractAttribute&gt;</ph> attribute to a non-<ph id=\"ph3\">`null`</ph> value, such as <ph id=\"ph4\">`http://Microsoft.WCF.Documentation/ResponseToOCAMethod`</ph>.","pos":[830,1093],"source":" To mitigate this, set the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property of the <xref:System.ServiceModel.OperationContractAttribute> attribute to a non-`null` value, such as `http://Microsoft.WCF.Documentation/ResponseToOCAMethod`."}]}]},{"pos":[2938,2946],"content":"Security","linkify":"Security","nodes":[{"content":"Security","pos":[0,8]}]},{"pos":[2956,3013],"content":"WSE 3.0 Web services that are secured using a policy file","linkify":"WSE 3.0 Web services that are secured using a policy file","nodes":[{"content":"WSE 3.0 Web services that are secured using a policy file","pos":[0,57]}]},{"content":"WCF services can use a configuration file to secure a service and that mechanism is similar to a WSE 3.0 policy file.","pos":[3017,3134]},{"content":"In WSE 3.0 when securing a Web service using a policy file, you use either a turnkey security assertion or a custom policy assertion.","pos":[3135,3268]},{"content":"The turnkey security assertions map closely to the authentication mode of a WCF security binding element.","pos":[3269,3374]},{"content":"Not only are the WCF authentication modes and WSE 3.0 turnkey security assertions named the same or similarly, they secure the messages using the same credential types.","pos":[3375,3543]},{"content":"For instance, the <ph id=\"ph1\">`usernameForCertificate`</ph> turnkey security assertion in WSE 3.0 maps to the <ph id=\"ph2\">`UsernameForCertificate`</ph> authentication mode in WCF.","pos":[3544,3689],"source":" For instance, the `usernameForCertificate` turnkey security assertion in WSE 3.0 maps to the `UsernameForCertificate` authentication mode in WCF."},{"content":"The following code examples demonstrate how a minimal policy that uses the <ph id=\"ph1\">`usernameForCertificate`</ph> turnkey security assertion in WSE 3.0 maps to a <ph id=\"ph2\">`UsernameForCertificate`</ph> authentication mode in WCF in a custom binding.","pos":[3690,3910],"source":" The following code examples demonstrate how a minimal policy that uses the `usernameForCertificate` turnkey security assertion in WSE 3.0 maps to a `UsernameForCertificate` authentication mode in WCF in a custom binding."},{"pos":[3917,3928],"content":"<bpt id=\"p1\">**</bpt>WSE 3.0<ept id=\"p1\">**</ept>","source":"**WSE 3.0**"},{"pos":[4153,4160],"content":"<bpt id=\"p1\">**</bpt>WCF<ept id=\"p1\">**</ept>","source":"**WCF**"},{"content":"To migrate the security settings of a WSE 3.0 Web service that are specified in a policy file to WCF, a custom binding must be created in a configuration file and the turnkey security assertion must be set to its equivalent authentication mode.","pos":[4432,4676]},{"content":"Additionally, the custom binding must be configured to use the August 2004 WS-Addressing specification when WSE 3.0 clients communicate with the service.","pos":[4677,4830]},{"content":"When the migrated WCF service does not require communication with WSE 3.0 clients and must only maintain security parity, consider using the WCF system-defined bindings with appropriate security settings instead of creating a custom binding.","pos":[4831,5072]},{"content":"The following table lists the mapping between a WSE 3.0 policy file and the equivalent custom binding in WCF.","pos":[5079,5188]},{"content":"WSE 3.0 Turnkey Security Assertion","pos":[5195,5229]},{"content":"WCF custom binding configuration","pos":[5230,5262]},{"content":"<ph id=\"ph1\">\\&lt;</ph>usernameOverTransportSecurity /&gt;","pos":[5351,5385],"source":"\\<usernameOverTransportSecurity />"},{"content":"<ph id=\"ph1\">\\&lt;</ph>mutualCertificate10Security /&gt;","pos":[5601,5633],"source":"\\<mutualCertificate10Security />"},{"content":"<ph id=\"ph1\">\\&lt;</ph>usernameForCertificateSecurity /&gt;","pos":[5974,6009],"source":"\\<usernameForCertificateSecurity />"},{"content":"<ph id=\"ph1\">\\&lt;</ph>anonymousForCertificateSecurity /&gt;","pos":[6225,6261],"source":"\\<anonymousForCertificateSecurity />"},{"content":"<ph id=\"ph1\">\\&lt;</ph>kerberosSecurity /&gt;","pos":[6478,6499],"source":"\\<kerberosSecurity />"},{"content":"<ph id=\"ph1\">\\&lt;</ph>mutualCertificate11Security /&gt;","pos":[6701,6733],"source":"\\<mutualCertificate11Security />"},{"pos":[6947,7090],"content":"For more information about creating custom bindings in WCF, see <bpt id=\"p1\">[</bpt>Custom Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/extending/custom-bindings.md)</ept>.","source":"For more information about creating custom bindings in WCF, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md)."},{"pos":[7100,7160],"content":"WSE 3.0 Web services that are secured using application code","linkify":"WSE 3.0 Web services that are secured using application code","nodes":[{"content":"WSE 3.0 Web services that are secured using application code","pos":[0,60]}]},{"content":"Whether WSE 3.0 or WCF is used, the security requirements can be specified in application code instead of in configuration.","pos":[7164,7287]},{"content":"In WSE 3.0, this is accomplished by creating a class that derives from the <ph id=\"ph1\">`Policy`</ph> class and then by adding the requirements by calling the <ph id=\"ph2\">`Add`</ph> method.","pos":[7288,7442],"source":" In WSE 3.0, this is accomplished by creating a class that derives from the `Policy` class and then by adding the requirements by calling the `Add` method."},{"content":"For more details about specifying the security requirements in code, see <bpt id=\"p1\">[</bpt>How to: Secure a Web Service Without Using a Policy File<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=73747)</ept>.","pos":[7443,7622],"source":" For more details about specifying the security requirements in code, see [How to: Secure a Web Service Without Using a Policy File](https://go.microsoft.com/fwlink/?LinkId=73747)."},{"content":"In WCF, to specify security requirements in code, create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.BindingElementCollection&gt;</ph> class and add an instance of a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> to the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Channels.BindingElementCollection&gt;</ph>.","pos":[7623,7918],"source":" In WCF, to specify security requirements in code, create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class and add an instance of a <xref:System.ServiceModel.Channels.SecurityBindingElement> to the <xref:System.ServiceModel.Channels.BindingElementCollection>."},{"content":"The security assertion requirements are set using the static authentication mode helper methods of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> class.","pos":[7919,8087],"source":" The security assertion requirements are set using the static authentication mode helper methods of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class."},{"content":"For more details about specifying security requirements in code using WCF, see <bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept> and <bpt id=\"p2\">[</bpt>How to: Create a SecurityBindingElement for a Specified Authentication Mode<ept id=\"p2\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)</ept>.","pos":[8088,8557],"source":" For more details about specifying security requirements in code using WCF, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md) and [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)."},{"pos":[8567,8598],"content":"WSE 3.0 Custom Policy Assertion","linkify":"WSE 3.0 Custom Policy Assertion","nodes":[{"content":"WSE 3.0 Custom Policy Assertion","pos":[0,31]}]},{"content":"In WSE 3.0 there are two types of custom policy assertions: those that secure a SOAP message and those that do not secure a SOAP message.","pos":[8602,8739]},{"content":"Policy assertions that secure SOAP messages derive from WSE 3.0 <ph id=\"ph1\">`SecurityPolicyAssertion`</ph> class and the conceptual equivalent in WCF is the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> class.","pos":[8740,8945],"source":" Policy assertions that secure SOAP messages derive from WSE 3.0 `SecurityPolicyAssertion` class and the conceptual equivalent in WCF is the <xref:System.ServiceModel.Channels.SecurityBindingElement> class."},{"content":"An important point to note is that the WSE 3.0 turnkey security assertions are a subset of the WCF authentication modes.","pos":[8952,9072]},{"content":"If you have created a custom policy assertion in WSE 3.0, there may be an equivalent WCF authentication mode.","pos":[9073,9182]},{"content":"For example, WSE 3.0 does not provide a CertificateOverTransport security assertion that is the equivalent to <ph id=\"ph1\">`UsernameOverTransport`</ph> turnkey security assertion, but uses an X.509 certificate for client authentication purposes.","pos":[9183,9410],"source":" For example, WSE 3.0 does not provide a CertificateOverTransport security assertion that is the equivalent to `UsernameOverTransport` turnkey security assertion, but uses an X.509 certificate for client authentication purposes."},{"content":"If you have defined your own custom policy assertion for this scenario, WCF makes the migration straightforward.","pos":[9411,9523]},{"content":"WCF defines an authentication mode for this scenario, so you can take advantage of the static authentication mode helper methods to configure a WCF<ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph>.","pos":[9524,9730],"source":" WCF defines an authentication mode for this scenario, so you can take advantage of the static authentication mode helper methods to configure a WCF<xref:System.ServiceModel.Channels.SecurityBindingElement>."},{"content":"When there is not a WCF authentication mode that is equivalent to a custom policy assertion that secures SOAP messages, derive a class from <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.TransportSecurityBindingElement&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement&gt;</ph>WCF classes and specify the equivalent binding element.","pos":[9737,10140],"source":"When there is not a WCF authentication mode that is equivalent to a custom policy assertion that secures SOAP messages, derive a class from <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>WCF classes and specify the equivalent binding element."},{"content":"For more details, see <bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>.","pos":[10141,10345],"source":" For more details, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)."},{"pos":[10352,10617],"content":"To convert a custom policy assertion that does not secure a SOAP message, see <bpt id=\"p1\">[</bpt>Filtering<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/filtering.md)</ept> and the sample <bpt id=\"p2\">[</bpt>Custom Message Interceptor<ept id=\"p2\">](../../../../docs/framework/wcf/samples/custom-message-interceptor.md)</ept>.","source":"To convert a custom policy assertion that does not secure a SOAP message, see [Filtering](../../../../docs/framework/wcf/feature-details/filtering.md) and the sample [Custom Message Interceptor](../../../../docs/framework/wcf/samples/custom-message-interceptor.md)."},{"pos":[10627,10656],"content":"WSE 3.0 Custom Security Token","linkify":"WSE 3.0 Custom Security Token","nodes":[{"content":"WSE 3.0 Custom Security Token","pos":[0,29]}]},{"content":"The WCF programming model for creating a custom token is different than WSE 3.0.","pos":[10660,10740]},{"content":"For details about creating a custom token in WSE, see <bpt id=\"p1\">[</bpt>Creating Custom Security Tokens<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=73750)</ept>.","pos":[10741,10876],"source":" For details about creating a custom token in WSE, see [Creating Custom Security Tokens](https://go.microsoft.com/fwlink/?LinkID=73750)."},{"content":"For details about creating a custom token in WCF, see <bpt id=\"p1\">[</bpt>How to: Create a Custom Token<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md)</ept>.","pos":[10877,11037],"source":" For details about creating a custom token in WCF, see [How to: Create a Custom Token](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md)."},{"pos":[11047,11075],"content":"WSE 3.0 Custom Token Manager","linkify":"WSE 3.0 Custom Token Manager","nodes":[{"content":"WSE 3.0 Custom Token Manager","pos":[0,28]}]},{"content":"The programming model for creating a custom token manager is different in WCF than WSE 3.0.","pos":[11079,11170]},{"content":"For details about how to create a custom token manager and the other components that are required for a custom security token, see <bpt id=\"p1\">[</bpt>How to: Create a Custom Token<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md)</ept>.","pos":[11171,11408],"source":" For details about how to create a custom token manager and the other components that are required for a custom security token, see [How to: Create a Custom Token](../../../../docs/framework/wcf/extending/how-to-create-a-custom-token.md)."},{"pos":[11416,11794],"content":"[!NOTE]\n If you have created a custom `UsernameToken` security token manager, WCF provides an easier mechanism to specify the authentication logic than creating a custom security token manager. For more details, see [How to: Use a Custom User Name and Password Validator](../../../../docs/framework/wcf/feature-details/how-to-use-a-custom-user-name-and-password-validator.md).","leadings":["","> "],"nodes":[{"content":"If you have created a custom `UsernameToken` security token manager, WCF provides an easier mechanism to specify the authentication logic than creating a custom security token manager. For more details, see [How to: Use a Custom User Name and Password Validator](../../../../docs/framework/wcf/feature-details/how-to-use-a-custom-user-name-and-password-validator.md).","pos":[9,376],"nodes":[{"content":"If you have created a custom <ph id=\"ph1\">`UsernameToken`</ph> security token manager, WCF provides an easier mechanism to specify the authentication logic than creating a custom security token manager.","pos":[0,184],"source":"If you have created a custom `UsernameToken` security token manager, WCF provides an easier mechanism to specify the authentication logic than creating a custom security token manager."},{"content":"For more details, see <bpt id=\"p1\">[</bpt>How to: Use a Custom User Name and Password Validator<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-a-custom-user-name-and-password-validator.md)</ept>.","pos":[185,367],"source":" For more details, see [How to: Use a Custom User Name and Password Validator](../../../../docs/framework/wcf/feature-details/how-to-use-a-custom-user-name-and-password-validator.md)."}]}]},{"pos":[11804,11860],"content":"WSE 3.0 Web services that use MTOM encoded SOAP messages","linkify":"WSE 3.0 Web services that use MTOM encoded SOAP messages","nodes":[{"content":"WSE 3.0 Web services that use MTOM encoded SOAP messages","pos":[0,56]}]},{"content":"Like a WSE 3 application, a WCF application can specify the MTOM message encoding in configuration.","pos":[11864,11963]},{"content":"To migrate this setting, add the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>mtomMessageEncoding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/mtommessageencoding.md)</ept> to the binding for the service.","pos":[11964,12135],"source":" To migrate this setting, add the [\\<mtomMessageEncoding>](../../../../docs/framework/configure-apps/file-schema/wcf/mtommessageencoding.md) to the binding for the service."},{"content":"The following code example demonstrates how MTOM encoding is specified in WSE 3.0 for a service that is equivalent in WCF.","pos":[12136,12258]},{"pos":[12265,12276],"content":"<bpt id=\"p1\">**</bpt>WSE 3.0<ept id=\"p1\">**</ept>","source":"**WSE 3.0**"},{"pos":[12360,12367],"content":"<bpt id=\"p1\">**</bpt>WCF<ept id=\"p1\">**</ept>","source":"**WCF**"},{"pos":[12506,12515],"content":"Messaging","linkify":"Messaging","nodes":[{"content":"Messaging","pos":[0,9]}]},{"pos":[12525,12576],"content":"WSE 3.0 Applications that use the WSE Messaging API","linkify":"WSE 3.0 Applications that use the WSE Messaging API","nodes":[{"content":"WSE 3.0 Applications that use the WSE Messaging API","pos":[0,51]}]},{"content":"When the WSE Messaging API is used to gain direct access to the XML that is communicated between the client and Web service, the application can be converted to use \"Plain Old XML\" (POX).","pos":[12580,12767]},{"content":"For more details about POX, see <bpt id=\"p1\">[</bpt>Interoperability with POX Applications<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/interoperability-with-pox-applications.md)</ept>.","pos":[12768,12931],"source":" For more details about POX, see [Interoperability with POX Applications](../../../../docs/framework/wcf/feature-details/interoperability-with-pox-applications.md)."},{"content":"For more details about the WSE Messaging API, see <bpt id=\"p1\">[</bpt>Sending and Receiving SOAP Messages Using WSE Messaging API<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkID=73755)</ept>.","pos":[12932,13091],"source":" For more details about the WSE Messaging API, see [Sending and Receiving SOAP Messages Using WSE Messaging API](https://go.microsoft.com/fwlink/?LinkID=73755)."},{"pos":[13100,13110],"content":"Transports","linkify":"Transports","nodes":[{"content":"Transports","pos":[0,10]}]},{"pos":[13120,13123],"content":"TCP","linkify":"TCP","nodes":[{"content":"TCP","pos":[0,3]}]},{"content":"By default, WSE 3.0 clients and Web services that send SOAP messages using the TCP transport do not interoperate with WCF clients and Web services.","pos":[13127,13274]},{"content":"This incompatibility is due to differences in the framing used in the TCP protocol and for performance reasons.","pos":[13275,13386]},{"content":"However, a WCF sample details how to implement a custom TCP session that interoperates with WSE 3.0.","pos":[13387,13487]},{"content":"For details about this sample, see <bpt id=\"p1\">[</bpt>Transport: WSE 3.0 TCP Interoperability<ept id=\"p1\">](../../../../docs/framework/wcf/samples/transport-wse-3-0-tcp-interoperability.md)</ept>.","pos":[13488,13647],"source":" For details about this sample, see [Transport: WSE 3.0 TCP Interoperability](../../../../docs/framework/wcf/samples/transport-wse-3-0-tcp-interoperability.md)."},{"pos":[13654,13815],"content":"To specify that a WCF application uses the TCP transport, use the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>netTcpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md)</ept>.","source":"To specify that a WCF application uses the TCP transport, use the [\\<netTcpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/nettcpbinding.md)."},{"pos":[13825,13841],"content":"Custom Transport","linkify":"Custom Transport","nodes":[{"content":"Custom Transport","pos":[0,16]}]},{"content":"The equivalent of a WSE 3.0 custom transport in WCF is a channel extension.","pos":[13845,13920]},{"content":"For details about creating a channel extension, see <bpt id=\"p1\">[</bpt>Extending the Channel Layer<ept id=\"p1\">](../../../../docs/framework/wcf/extending/extending-the-channel-layer.md)</ept>.","pos":[13921,14076],"source":" For details about creating a channel extension, see [Extending the Channel Layer](../../../../docs/framework/wcf/extending/extending-the-channel-layer.md)."},{"pos":[14085,14093],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[14097,14189],"content":"<bpt id=\"p1\">[</bpt>Basic Programming Lifecycle<ept id=\"p1\">](../../../../docs/framework/wcf/basic-programming-lifecycle.md)</ept>","source":"[Basic Programming Lifecycle](../../../../docs/framework/wcf/basic-programming-lifecycle.md)"},{"pos":[14192,14270],"content":"<bpt id=\"p1\">[</bpt>Custom Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/extending/custom-bindings.md)</ept>","source":"[Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md)"},{"pos":[14273,14454],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>","source":"[How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)"},{"pos":[14457,14660],"content":"<bpt id=\"p1\">[</bpt>How to: Create a SecurityBindingElement for a Specified Authentication Mode<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)</ept>","source":"[How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)"}]}