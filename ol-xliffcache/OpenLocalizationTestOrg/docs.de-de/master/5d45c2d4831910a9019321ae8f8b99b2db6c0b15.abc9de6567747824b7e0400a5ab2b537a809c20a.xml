{"content":"---\ntitle: \"How to: Configure Idle Behavior with WorkflowServiceHost | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 1bb93652-d687-46ff-bff6-69ecdcf97437\ncaps.latest.revision: 12\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Configure Idle Behavior with WorkflowServiceHost\nWorkflows go idle when they encounter a bookmark that must be resumed by some external stimulus, for example when the workflow instance is waiting for a message to be delivered using a <xref:System.ServiceModel.Activities.Receive> activity. <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> is a behavior that allows you to specify the time between when a service instance goes idle and when the instance is persisted or unloaded. It contains two properties that enable you to set these time spans. <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> specifies the time span between when a workflow service instance goes idle and when the workflow service instance is persisted. <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> specifies the time span between when a workflow service instance goes idle and when the workflow service instance is unloaded, where unload means persisting the instance to the instance store and removing it from memory. This topic explains how to configure the <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> in a configuration file.  \n  \n### To configure WorkflowIdleBehavior  \n  \n1.  Add a <`workflowIdle`> element to the <`behavior`> element within the <`serviceBehaviors`> element as shown in the following example.  \n  \n    ```xml  \n    <behaviors>  \n      <serviceBehaviors>  \n        <behavior name=\"\">  \n          <workflowIdle timeToUnload=\"0:05:0\" timeToPersist=\"0:04:0\"/>   \n        </behavior>  \n      </serviceBehaviors>  \n    </behaviors>  \n  \n    ```  \n  \n     The `timeToUnload` attribute specifies the time period between when a workflow service instance goes idle and when the workflow service is unloaded. The `timeToPersist` attribute specifies the time period between when a workflow service instance goes idle and when the workflow service instance is persisted. The default value for `timeToUnload` is 1 minute. The default value for `timeToPersist` is <xref:System.TimeSpan.MaxValue>. If you want to keep idle instances in memory but persist them for robustness, set values so that `timeToPersist` < `timeToUnload`. If you want to prevent idle instances from being unloaded, set `timeToUnload` to <xref:System.TimeSpan.MaxValue>. [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior>, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)  \n  \n    > [!NOTE]\n    >  The preceding configuration sample is using simplified configuration. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).  \n  \n### To change idle behavior in code  \n  \n-   The following example changes the time to wait before persisting and unloading programmatically.  \n  \n     [!code-csharp[Wf_SvcHost_Idle_persist#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/wf_svchost_idle_persist/cs/source.cs#1)]\n     [!code-vb[Wf_SvcHost_Idle_persist#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/wf_svchost_idle_persist/vb/source.vb#1)]  \n  \n## See Also  \n [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)   \n [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md)   \n [Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)","nodes":[{"pos":[4,377],"embed":true,"restype":"x-metadata","content":"title: \"How to: Configure Idle Behavior with WorkflowServiceHost | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 1bb93652-d687-46ff-bff6-69ecdcf97437\ncaps.latest.revision: 12\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"How to: Configure Idle Behavior with WorkflowServiceHost | Microsoft Docs","nodes":[{"pos":[0,73],"content":"How to: Configure Idle Behavior with WorkflowServiceHost | Microsoft Docs","nodes":[{"content":"How to: Configure Idle Behavior with WorkflowServiceHost | Microsoft Docs","pos":[0,73]}]}],"path":["title"]}],"yml":true},{"pos":[384,440],"content":"How to: Configure Idle Behavior with WorkflowServiceHost","linkify":"How to: Configure Idle Behavior with WorkflowServiceHost","nodes":[{"content":"How to: Configure Idle Behavior with WorkflowServiceHost","pos":[0,56]}]},{"content":"Workflows go idle when they encounter a bookmark that must be resumed by some external stimulus, for example when the workflow instance is waiting for a message to be delivered using a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> activity.","pos":[441,681],"source":"Workflows go idle when they encounter a bookmark that must be resumed by some external stimulus, for example when the workflow instance is waiting for a message to be delivered using a <xref:System.ServiceModel.Activities.Receive> activity."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior&gt;</ph> is a behavior that allows you to specify the time between when a service instance goes idle and when the instance is persisted or unloaded.","pos":[682,892],"source":" <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> is a behavior that allows you to specify the time between when a service instance goes idle and when the instance is persisted or unloaded."},{"content":"It contains two properties that enable you to set these time spans.","pos":[893,960]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A&gt;</ph> specifies the time span between when a workflow service instance goes idle and when the workflow service instance is persisted.","pos":[961,1176],"source":" <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToPersist%2A> specifies the time span between when a workflow service instance goes idle and when the workflow service instance is persisted."},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A&gt;</ph> specifies the time span between when a workflow service instance goes idle and when the workflow service instance is unloaded, where unload means persisting the instance to the instance store and removing it from memory.","pos":[1177,1484],"source":" <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior.TimeToUnload%2A> specifies the time span between when a workflow service instance goes idle and when the workflow service instance is unloaded, where unload means persisting the instance to the instance store and removing it from memory."},{"content":"This topic explains how to configure the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior&gt;</ph> in a configuration file.","pos":[1485,1621],"source":" This topic explains how to configure the <xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior> in a configuration file."},{"pos":[1631,1664],"content":"To configure WorkflowIdleBehavior","linkify":"To configure WorkflowIdleBehavior","nodes":[{"content":"To configure WorkflowIdleBehavior","pos":[0,33]}]},{"pos":[1674,1807],"content":"Add a &lt;<ph id=\"ph1\">`workflowIdle`</ph>&gt; element to the &lt;<ph id=\"ph2\">`behavior`</ph>&gt; element within the &lt;<ph id=\"ph3\">`serviceBehaviors`</ph>&gt; element as shown in the following example.","source":"Add a <`workflowIdle`> element to the <`behavior`> element within the <`serviceBehaviors`> element as shown in the following example."},{"content":"The <ph id=\"ph1\">`timeToUnload`</ph> attribute specifies the time period between when a workflow service instance goes idle and when the workflow service is unloaded.","pos":[2064,2212],"source":"The `timeToUnload` attribute specifies the time period between when a workflow service instance goes idle and when the workflow service is unloaded."},{"content":"The <ph id=\"ph1\">`timeToPersist`</ph> attribute specifies the time period between when a workflow service instance goes idle and when the workflow service instance is persisted.","pos":[2213,2372],"source":" The `timeToPersist` attribute specifies the time period between when a workflow service instance goes idle and when the workflow service instance is persisted."},{"content":"The default value for <ph id=\"ph1\">`timeToUnload`</ph> is 1 minute.","pos":[2373,2422],"source":" The default value for `timeToUnload` is 1 minute."},{"content":"The default value for <ph id=\"ph1\">`timeToPersist`</ph> is <ph id=\"ph2\">&lt;xref:System.TimeSpan.MaxValue&gt;</ph>.","pos":[2423,2496],"source":" The default value for `timeToPersist` is <xref:System.TimeSpan.MaxValue>."},{"content":"If you want to keep idle instances in memory but persist them for robustness, set values so that <ph id=\"ph1\">`timeToPersist`</ph><ph id=\"ph2\"> &lt; </ph><ph id=\"ph3\">`timeToUnload`</ph>.","pos":[2497,2627],"source":" If you want to keep idle instances in memory but persist them for robustness, set values so that `timeToPersist` < `timeToUnload`."},{"content":"If you want to prevent idle instances from being unloaded, set <ph id=\"ph1\">`timeToUnload`</ph> to <ph id=\"ph2\">&lt;xref:System.TimeSpan.MaxValue&gt;</ph>.","pos":[2628,2741],"source":" If you want to prevent idle instances from being unloaded, set `timeToUnload` to <xref:System.TimeSpan.MaxValue>."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph><ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior&gt;</ph>, see <bpt id=\"p1\">[</bpt>Workflow Service Host Extensibility<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</ept>","pos":[2742,2997],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)]<xref:System.ServiceModel.Activities.Description.WorkflowIdleBehavior>, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)"},{"pos":[3009,3240],"content":"[!NOTE]\nThe preceding configuration sample is using simplified configuration. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","leadings":["","    >  "],"nodes":[{"content":"The preceding configuration sample is using simplified configuration. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","pos":[8,224],"nodes":[{"content":"The preceding configuration sample is using simplified configuration.","pos":[0,69]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept>.","pos":[70,216],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md)."}]}]},{"pos":[3250,3281],"content":"To change idle behavior in code","linkify":"To change idle behavior in code","nodes":[{"content":"To change idle behavior in code","pos":[0,31]}]},{"content":"The following example changes the time to wait before persisting and unloading programmatically.","pos":[3291,3387]},{"pos":[3398,3671],"content":"[!code-csharp[Wf_SvcHost_Idle_persist#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/wf_svchost_idle_persist/cs/source.cs#1)]\n [!code-vb[Wf_SvcHost_Idle_persist#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/wf_svchost_idle_persist/vb/source.vb#1)]","leadings":["","    "],"nodes":[]},{"pos":[3680,3688],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Workflow Service Host Extensibility<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</ept><ph id=\"ph1\"> </ph>","pos":[3692,3817],"source":"[Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md) "},{"content":"<bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept><ph id=\"ph1\"> </ph>","pos":[3821,3908],"source":"[Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md) "},{"content":"<bpt id=\"p1\">[</bpt>Workflow Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-services.md)</ept>","pos":[3912,4000],"source":"[Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)"}]}