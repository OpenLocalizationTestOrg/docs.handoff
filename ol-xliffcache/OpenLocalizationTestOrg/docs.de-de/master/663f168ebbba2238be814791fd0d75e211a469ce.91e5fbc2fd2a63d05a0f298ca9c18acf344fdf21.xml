{"content":"---\ntitle: \"DataContract Surrogate\"\nms.date: \"03/30/2017\"\nms.assetid: b0188f3c-00a9-4cf0-a887-a2284c8fb014\n---\n# DataContract Surrogate\nThis sample demonstrates how processes like serialization, deserialization, schema export, and schema import can be customized using a data contract surrogate class. This sample shows how to use a surrogate in a client and server scenario where data is serialized and transmitted between a Windows Communication Foundation (WCF) client and service.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The sample uses the following service contract:  \n  \n```  \n[ServiceContract(Namespace = \"http://Microsoft.ServiceModel.Samples\")]  \n[AllowNonSerializableTypes]  \npublic interface IPersonnelDataService  \n{  \n    [OperationContract]  \n    void AddEmployee(Employee employee);  \n  \n    [OperationContract]  \n    Employee GetEmployee(string name);  \n}  \n```  \n  \n The `AddEmployee` operation allows users to add data about new employees and the `GetEmployee` operation supports search for employees based on name.  \n  \n These operations use the following data type:  \n  \n```  \n[DataContract(Namespace = \"http://Microsoft.ServiceModel.Samples\")]  \nclass Employee  \n{  \n    [DataMember]  \n    public DateTime dateHired;  \n  \n    [DataMember]  \n    public Decimal salary;  \n  \n    [DataMember]  \n    public Person person;  \n}  \n```  \n  \n In the `Employee` type, the `Person` class (shown in the following sample code) cannot be serialized by the <xref:System.Runtime.Serialization.DataContractSerializer> because it is not a valid data contract class.  \n  \n```  \npublic class Person  \n{  \n    public string firstName;  \n  \n    public string lastName;  \n  \n    public int age;  \n  \n    public Person() { }  \n}  \n```  \n  \n You can apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the `Person` class, but this is not always possible. For example, the `Person` class can be defined in a separate assembly over which you have no control.  \n  \n Given this restriction, one way to serialize the `Person` class is to substitute it with another class that is marked with <xref:System.Runtime.Serialization.DataContractAttribute> and copy over necessary data to the new class. The objective is to make the `Person` class appear as a DataContract to the <xref:System.Runtime.Serialization.DataContractSerializer>. Note that this is one way to serialize non-data contract classes.  \n  \n The sample logically replaces the `Person` class with a different class named `PersonSurrogated`.  \n  \n```  \n[DataContract(Name=\"Person\", Namespace = \"http://Microsoft.ServiceModel.Samples\")]  \npublic class PersonSurrogated  \n{  \n    [DataMember]  \n    public string FirstName;  \n  \n    [DataMember]  \n    public string LastName;  \n  \n    [DataMember]  \n    public int Age;  \n}  \n```  \n  \n The data contract surrogate is used to achieve this replacement. A data contract surrogate is a class that implements <xref:System.Runtime.Serialization.IDataContractSurrogate>. In this sample, the `AllowNonSerializableTypesSurrogate` class implements this interface.  \n  \n In the interface implementation, the first task is to establish a type mapping from `Person` to `PersonSurrogated`. This is used both at serialization time as well as at schema export time. This mapping is achieved by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%28System.Type%29> method.  \n  \n```  \npublic Type GetDataContractType(Type type)  \n{  \n    if (typeof(Person).IsAssignableFrom(type))  \n    {  \n        return typeof(PersonSurrogated);  \n    }  \n    return type;  \n}  \n```  \n  \n The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%28System.Object%2CSystem.Type%29> method maps a `Person` instance to a `PersonSurrogated` instance during serialization, as shown in the following sample code.  \n  \n```  \npublic object GetObjectToSerialize(object obj, Type targetType)  \n{  \n    if (obj is Person)  \n    {  \n        Person person = (Person)obj;  \n        PersonSurrogated personSurrogated = new PersonSurrogated();  \n        personSurrogated.FirstName = person.firstName;  \n        personSurrogated.LastName = person.lastName;  \n        personSurrogated.Age = person.age;  \n        return personSurrogated;  \n    }  \n    return obj;  \n}  \n```  \n  \n The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%28System.Object%2CSystem.Type%29> method provides the reverse mapping for deserialization, as shown in the following sample code.  \n  \n```  \npublic object GetDeserializedObject(object obj,   \nType targetType)  \n{  \n    if (obj is PersonSurrogated)  \n    {  \n        PersonSurrogated personSurrogated = (PersonSurrogated)obj;  \n        Person person = new Person();  \n        person.firstName = personSurrogated.FirstName;  \n        person.lastName = personSurrogated.LastName;  \n        person.age = personSurrogated.Age;  \n        return person;  \n    }  \n    return obj;  \n}  \n```  \n  \n To map the `PersonSurrogated` data contract to the existing `Person` class during schema import, the sample implements the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%28System.String%2CSystem.String%2CSystem.Object%29> method, as shown in the following sample code.  \n  \n```  \npublic Type GetReferencedTypeOnImport(string typeName,   \n               string typeNamespace, object customData)  \n{  \nif (  \ntypeNamespace.Equals(\"http://schemas.datacontract.org/2004/07/DCSurrogateSample\")  \n)  \n    {  \n         if (typeName.Equals(\"PersonSurrogated\"))  \n        {  \n             return typeof(Person);  \n        }  \n     }  \n     return null;  \n}  \n```  \n  \n The following sample code completes the implementation of the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.  \n  \n```  \npublic System.CodeDom.CodeTypeDeclaration ProcessImportedType(  \n          System.CodeDom.CodeTypeDeclaration typeDeclaration,   \n          System.CodeDom.CodeCompileUnit compileUnit)  \n{  \n    return typeDeclaration;  \n}  \npublic object GetCustomDataToExport(Type clrType,   \n                               Type dataContractType)  \n{  \n    return null;  \n}  \n  \npublic object GetCustomDataToExport(  \nSystem.Reflection.MemberInfo memberInfo, Type dataContractType)  \n{  \n    return null;  \n}  \npublic void GetKnownCustomDataTypes(  \n        KnownTypeCollection customDataTypes)  \n{  \n    // It does not matter what we do here.  \n    throw new NotImplementedException();  \n}  \n```  \n  \n In this sample, the surrogate is enabled in ServiceModel by an attribute called `AllowNonSerializableTypesAttribute`. Developers would need to apply this attribute on their service contract as shown on the `IPersonnelDataService` service contract above. This attribute implements `IContractBehavior` and sets up the surrogate on operations in its `ApplyClientBehavior` and `ApplyDispatchBehavior` methods.  \n  \n The attribute is not necessary in this case - it is used for demonstration purposes in this sample. Users can alternatively enable a surrogate by manually adding a similar `IContractBehavior`, `IEndpointBehavior` or `IOperationBehavior` using code or using configuration.  \n  \n The `IContractBehavior` implementation looks for operations that use DataContract by checking if they have a `DataContractSerializerOperationBehavior` registered. If they do, it sets the `DataContractSurrogate` property on that behavior. The following sample code shows how this is done. Setting the surrogate on this operation behavior enables it for serialization and deserialization.  \n  \n```  \npublic void ApplyClientBehavior(ContractDescription description, ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime proxy)  \n{  \n    foreach (OperationDescription opDesc in description.Operations)  \n    {  \n        ApplyDataContractSurrogate(opDesc);  \n    }  \n}  \n  \npublic void ApplyDispatchBehavior(ContractDescription description, ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.DispatchRuntime dispatch)  \n{  \n    foreach (OperationDescription opDesc in description.Operations)  \n    {  \n        ApplyDataContractSurrogate(opDesc);  \n    }  \n}  \n  \nprivate static void ApplyDataContractSurrogate(OperationDescription description)  \n{  \n    DataContractSerializerOperationBehavior dcsOperationBehavior = description.Behaviors.Find<DataContractSerializerOperationBehavior>();  \n    if (dcsOperationBehavior != null)  \n    {  \n        if (dcsOperationBehavior.DataContractSurrogate == null)  \n            dcsOperationBehavior.DataContractSurrogate = new AllowNonSerializableTypesSurrogate();  \n    }  \n}  \n```  \n  \n Additional steps need to be taken to plug in the surrogate for use during metadata generation. One mechanism to do this is to provide an `IWsdlExportExtension` which is what this sample demonstrates. Another way is to modify the `WsdlExporter` directly.  \n  \n The `AllowNonSerializableTypesAttribute` attribute implements `IWsdlExportExtension` and `IContractBehavior`. The extension can be either an `IContractBehavior` or `IEndpointBehavior` in this case. Its `IWsdlExportExtension.ExportContract` method implementation enables the surrogate by adding it to the `XsdDataContractExporter` used during schema generation for DataContract. The following code snippet shows how to do this.  \n  \n```  \npublic void ExportContract(WsdlExporter exporter, WsdlContractConversionContext context)  \n{  \n    if (exporter == null)  \n        throw new ArgumentNullException(\"exporter\");  \n  \n    object dataContractExporter;  \n    XsdDataContractExporter xsdDCExporter;  \n    if (!exporter.State.TryGetValue(typeof(XsdDataContractExporter), out dataContractExporter))  \n    {  \n        xsdDCExporter = new XsdDataContractExporter(exporter.GeneratedXmlSchemas);  \n        exporter.State.Add(typeof(XsdDataContractExporter), xsdDCExporter);  \n    }  \n    else  \n    {  \n        xsdDCExporter = (XsdDataContractExporter)dataContractExporter;  \n    }  \n    if (xsdDCExporter.Options == null)  \n        xsdDCExporter.Options = new ExportOptions();  \n  \n    if (xsdDCExporter.Options.DataContractSurrogate == null)  \n        xsdDCExporter.Options.DataContractSurrogate = new AllowNonSerializableTypesSurrogate();  \n}  \n```  \n  \n When you run the sample, the client calls AddEmployee followed by a GetEmployee call to check if the first call was successful. The result of the GetEmployee operation request is displayed in the client console window. The GetEmployee operation must succeed in finding the employee and print \"found\".  \n  \n> [!NOTE]\n>  This sample shows how to plug in a surrogate for serialize, deserialize and metadata generation. It does not show how to plug in a surrogate for code generation from metadata. To see a sample of how a surrogate can be used to plug into client code generation, see the [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md) sample.  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Extensibility\\DataContract`  \n","nodes":[{"pos":[4,106],"embed":true,"restype":"x-metadata","content":"title: \"DataContract Surrogate\"\nms.date: \"03/30/2017\"\nms.assetid: b0188f3c-00a9-4cf0-a887-a2284c8fb014","nodes":[{"content":"DataContract Surrogate","nodes":[{"pos":[0,22],"content":"DataContract Surrogate","nodes":[{"content":"DataContract Surrogate","pos":[0,22]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[113,135],"content":"DataContract Surrogate","linkify":"DataContract Surrogate","nodes":[{"content":"DataContract Surrogate","pos":[0,22]}]},{"content":"This sample demonstrates how processes like serialization, deserialization, schema export, and schema import can be customized using a data contract surrogate class.","pos":[136,301]},{"content":"This sample shows how to use a surrogate in a client and server scenario where data is serialized and transmitted between a Windows Communication Foundation (WCF) client and service.","pos":[302,484]},{"pos":[492,599],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The sample uses the following service contract:","pos":[606,653]},{"pos":[966,1115],"content":"The <ph id=\"ph1\">`AddEmployee`</ph> operation allows users to add data about new employees and the <ph id=\"ph2\">`GetEmployee`</ph> operation supports search for employees based on name.","source":"The `AddEmployee` operation allows users to add data about new employees and the `GetEmployee` operation supports search for employees based on name."},{"content":"These operations use the following data type:","pos":[1122,1167]},{"pos":[1437,1650],"content":"In the <ph id=\"ph1\">`Employee`</ph> type, the <ph id=\"ph2\">`Person`</ph> class (shown in the following sample code) cannot be serialized by the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph> because it is not a valid data contract class.","source":"In the `Employee` type, the `Person` class (shown in the following sample code) cannot be serialized by the <xref:System.Runtime.Serialization.DataContractSerializer> because it is not a valid data contract class."},{"content":"You can apply the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> attribute to the <ph id=\"ph2\">`Person`</ph> class, but this is not always possible.","pos":[1820,1961],"source":"You can apply the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the `Person` class, but this is not always possible."},{"content":"For example, the <ph id=\"ph1\">`Person`</ph> class can be defined in a separate assembly over which you have no control.","pos":[1962,2063],"source":" For example, the `Person` class can be defined in a separate assembly over which you have no control."},{"content":"Given this restriction, one way to serialize the <ph id=\"ph1\">`Person`</ph> class is to substitute it with another class that is marked with <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> and copy over necessary data to the new class.","pos":[2070,2297],"source":"Given this restriction, one way to serialize the `Person` class is to substitute it with another class that is marked with <xref:System.Runtime.Serialization.DataContractAttribute> and copy over necessary data to the new class."},{"content":"The objective is to make the <ph id=\"ph1\">`Person`</ph> class appear as a DataContract to the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractSerializer&gt;</ph>.","pos":[2298,2433],"source":" The objective is to make the `Person` class appear as a DataContract to the <xref:System.Runtime.Serialization.DataContractSerializer>."},{"content":"Note that this is one way to serialize non-data contract classes.","pos":[2434,2499]},{"pos":[2506,2603],"content":"The sample logically replaces the <ph id=\"ph1\">`Person`</ph> class with a different class named <ph id=\"ph2\">`PersonSurrogated`</ph>.","source":"The sample logically replaces the `Person` class with a different class named `PersonSurrogated`."},{"content":"The data contract surrogate is used to achieve this replacement.","pos":[2896,2960]},{"content":"A data contract surrogate is a class that implements <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate&gt;</ph>.","pos":[2961,3073],"source":" A data contract surrogate is a class that implements <xref:System.Runtime.Serialization.IDataContractSurrogate>."},{"content":"In this sample, the <ph id=\"ph1\">`AllowNonSerializableTypesSurrogate`</ph> class implements this interface.","pos":[3074,3163],"source":" In this sample, the `AllowNonSerializableTypesSurrogate` class implements this interface."},{"content":"In the interface implementation, the first task is to establish a type mapping from <ph id=\"ph1\">`Person`</ph> to <ph id=\"ph2\">`PersonSurrogated`</ph>.","pos":[3170,3285],"source":"In the interface implementation, the first task is to establish a type mapping from `Person` to `PersonSurrogated`."},{"content":"This is used both at serialization time as well as at schema export time.","pos":[3286,3359]},{"content":"This mapping is achieved by implementing the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%28System.Type%29&gt;</ph> method.","pos":[3360,3508],"source":" This mapping is achieved by implementing the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDataContractType%28System.Type%29> method."},{"pos":[3710,3952],"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%28System.Object%2CSystem.Type%29&gt;</ph> method maps a <ph id=\"ph2\">`Person`</ph> instance to a <ph id=\"ph3\">`PersonSurrogated`</ph> instance during serialization, as shown in the following sample code.","source":"The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetObjectToSerialize%28System.Object%2CSystem.Type%29> method maps a `Person` instance to a `PersonSurrogated` instance during serialization, as shown in the following sample code."},{"pos":[4408,4621],"content":"The <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%28System.Object%2CSystem.Type%29&gt;</ph> method provides the reverse mapping for deserialization, as shown in the following sample code.","source":"The <xref:System.Runtime.Serialization.IDataContractSurrogate.GetDeserializedObject%28System.Object%2CSystem.Type%29> method provides the reverse mapping for deserialization, as shown in the following sample code."},{"pos":[5081,5386],"content":"To map the <ph id=\"ph1\">`PersonSurrogated`</ph> data contract to the existing <ph id=\"ph2\">`Person`</ph> class during schema import, the sample implements the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%28System.String%2CSystem.String%2CSystem.Object%29&gt;</ph> method, as shown in the following sample code.","source":"To map the `PersonSurrogated` data contract to the existing `Person` class during schema import, the sample implements the <xref:System.Runtime.Serialization.IDataContractSurrogate.GetReferencedTypeOnImport%28System.String%2CSystem.String%2CSystem.Object%29> method, as shown in the following sample code."},{"pos":[5778,5909],"content":"The following sample code completes the implementation of the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate&gt;</ph> interface.","source":"The following sample code completes the implementation of the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface."},{"content":"In this sample, the surrogate is enabled in ServiceModel by an attribute called <ph id=\"ph1\">`AllowNonSerializableTypesAttribute`</ph>.","pos":[6608,6725],"source":"In this sample, the surrogate is enabled in ServiceModel by an attribute called `AllowNonSerializableTypesAttribute`."},{"content":"Developers would need to apply this attribute on their service contract as shown on the <ph id=\"ph1\">`IPersonnelDataService`</ph> service contract above.","pos":[6726,6861],"source":" Developers would need to apply this attribute on their service contract as shown on the `IPersonnelDataService` service contract above."},{"content":"This attribute implements <ph id=\"ph1\">`IContractBehavior`</ph> and sets up the surrogate on operations in its <ph id=\"ph2\">`ApplyClientBehavior`</ph> and <ph id=\"ph3\">`ApplyDispatchBehavior`</ph> methods.","pos":[6862,7013],"source":" This attribute implements `IContractBehavior` and sets up the surrogate on operations in its `ApplyClientBehavior` and `ApplyDispatchBehavior` methods."},{"content":"The attribute is not necessary in this case - it is used for demonstration purposes in this sample.","pos":[7020,7119]},{"content":"Users can alternatively enable a surrogate by manually adding a similar <ph id=\"ph1\">`IContractBehavior`</ph>, <ph id=\"ph2\">`IEndpointBehavior`</ph> or <ph id=\"ph3\">`IOperationBehavior`</ph> using code or using configuration.","pos":[7120,7291],"source":" Users can alternatively enable a surrogate by manually adding a similar `IContractBehavior`, `IEndpointBehavior` or `IOperationBehavior` using code or using configuration."},{"content":"The <ph id=\"ph1\">`IContractBehavior`</ph> implementation looks for operations that use DataContract by checking if they have a <ph id=\"ph2\">`DataContractSerializerOperationBehavior`</ph> registered.","pos":[7298,7460],"source":"The `IContractBehavior` implementation looks for operations that use DataContract by checking if they have a `DataContractSerializerOperationBehavior` registered."},{"content":"If they do, it sets the <ph id=\"ph1\">`DataContractSurrogate`</ph> property on that behavior.","pos":[7461,7535],"source":" If they do, it sets the `DataContractSurrogate` property on that behavior."},{"content":"The following sample code shows how this is done.","pos":[7536,7585]},{"content":"Setting the surrogate on this operation behavior enables it for serialization and deserialization.","pos":[7586,7684]},{"content":"Additional steps need to be taken to plug in the surrogate for use during metadata generation.","pos":[8743,8837]},{"content":"One mechanism to do this is to provide an <ph id=\"ph1\">`IWsdlExportExtension`</ph> which is what this sample demonstrates.","pos":[8838,8942],"source":" One mechanism to do this is to provide an `IWsdlExportExtension` which is what this sample demonstrates."},{"content":"Another way is to modify the <ph id=\"ph1\">`WsdlExporter`</ph> directly.","pos":[8943,8996],"source":" Another way is to modify the `WsdlExporter` directly."},{"content":"The <ph id=\"ph1\">`AllowNonSerializableTypesAttribute`</ph> attribute implements <ph id=\"ph2\">`IWsdlExportExtension`</ph> and <ph id=\"ph3\">`IContractBehavior`</ph>.","pos":[9003,9112],"source":"The `AllowNonSerializableTypesAttribute` attribute implements `IWsdlExportExtension` and `IContractBehavior`."},{"content":"The extension can be either an <ph id=\"ph1\">`IContractBehavior`</ph> or <ph id=\"ph2\">`IEndpointBehavior`</ph> in this case.","pos":[9113,9200],"source":" The extension can be either an `IContractBehavior` or `IEndpointBehavior` in this case."},{"content":"Its <ph id=\"ph1\">`IWsdlExportExtension.ExportContract`</ph> method implementation enables the surrogate by adding it to the <ph id=\"ph2\">`XsdDataContractExporter`</ph> used during schema generation for DataContract.","pos":[9201,9380],"source":" Its `IWsdlExportExtension.ExportContract` method implementation enables the surrogate by adding it to the `XsdDataContractExporter` used during schema generation for DataContract."},{"content":"The following code snippet shows how to do this.","pos":[9381,9429]},{"content":"When you run the sample, the client calls AddEmployee followed by a GetEmployee call to check if the first call was successful.","pos":[10353,10480]},{"content":"The result of the GetEmployee operation request is displayed in the client console window.","pos":[10481,10571]},{"content":"The GetEmployee operation must succeed in finding the employee and print \"found\".","pos":[10572,10653]},{"pos":[10661,11040],"content":"[!NOTE]\n This sample shows how to plug in a surrogate for serialize, deserialize and metadata generation. It does not show how to plug in a surrogate for code generation from metadata. To see a sample of how a surrogate can be used to plug into client code generation, see the [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md) sample.","leadings":["","> "],"nodes":[{"content":"This sample shows how to plug in a surrogate for serialize, deserialize and metadata generation. It does not show how to plug in a surrogate for code generation from metadata. To see a sample of how a surrogate can be used to plug into client code generation, see the [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md) sample.","pos":[9,377],"nodes":[{"content":"This sample shows how to plug in a surrogate for serialize, deserialize and metadata generation.","pos":[0,96]},{"content":"It does not show how to plug in a surrogate for code generation from metadata.","pos":[97,175]},{"content":"To see a sample of how a surrogate can be used to plug into client code generation, see the <bpt id=\"p1\">[</bpt>Custom WSDL Publication<ept id=\"p1\">](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md)</ept> sample.","pos":[176,368],"source":" To see a sample of how a surrogate can be used to plug into client code generation, see the [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md) sample."}]}]},{"pos":[11050,11086],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[11096,11295],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[11305,11493],"content":"To build the C# edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[11503,11711],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[11719,11851],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[11905,12215],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[12216,12266]}]}