{"content":"---\ntitle: \"Using Performance Counters\"\nms.date: \"03/30/2017\"\nms.assetid: 00a787af-1876-473c-a48d-f52b51e28a3f\n---\n# Using Performance Counters\nThis sample demonstrates how to access Windows Communication Foundation (WCF) performance counters and how to create user-defined performance counters. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n In this sample, the client calls the four methods of the `ICalculator` service. The client continues to do this until it is interrupted by the user. The service remains unchanged.  \n  \n Performance counters are enabled in the diagnostics section of the Web.config file for the service, as shown in the following sample configuration.  \n  \n```xml  \n<configuration>  \n  <system.serviceModel>  \n    <diagnostics performanceCounters=\"All\" />   \n  </system.serviceModel>  \n</configuration>  \n```  \n  \n This task can also be done using the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md).  \n  \n When performance counters are enabled, the entire suite of WCF performance counters is enabled for the service. The .NET Framework automatically maintains performance data at three levels: `ServiceModelService`, `ServiceModelEndpoint` and `ServiceModelOperation`. Each of these levels has performance counters such as \"Calls\", \"Calls per Second\", and \"Security Calls Not Authorized\".  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-computer configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n### To view performance data  \n  \n1.  Start the Performance Monitor Tool by clicking **Start**, **Run…**, enter `perfmon` and click **OK,** or from Control Panel, select **Administrative Tools** and double-click **Performance**.  \n  \n    > [!NOTE]\n    >  You cannot add counters until the sample code is running.  \n  \n2.  Remove the performance counters that are listed by selecting them and pressing the Delete key.  \n  \n3.  Add WCF counters by right-clicking the graph pane and selecting **Add Counters**. In the **Add Counters** dialog box, select **ServiceModelOperation 3.0.0.0, ServiceModelEndpoint 3.0.0.0, or ServiceModelService 3.0.0.0** in the Performance object drop down list box. Select the counters you want to view from the list.  \n  \n    > [!NOTE]\n    >  There are no WCF performance counters for a service if there are no WCF services running on the computer.  \n  \n### To use the Configuration Editor to enable counters  \n  \n1.  Open an instance of the SvcConfigEditor.exe.  \n  \n2.  On the File menu, click **Open** and then click **Config file…**.  \n  \n3.  Navigate to the sample application's service folder and open the Web.config file.  \n  \n4.  Click **Diagnostics** on the Configuration tree.  \n  \n5.  Toggle **Performance Counter** in the **Diagnostics** window to show 'All'.  \n  \n6.  Save the configuration file and exit the editor.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Management\\PerfCounters`  \n  \n## See also\n\n- [AppFabric Monitoring Samples](https://go.microsoft.com/fwlink/?LinkId=193959)\n","nodes":[{"pos":[4,110],"embed":true,"restype":"x-metadata","content":"title: \"Using Performance Counters\"\nms.date: \"03/30/2017\"\nms.assetid: 00a787af-1876-473c-a48d-f52b51e28a3f","nodes":[{"content":"Using Performance Counters","nodes":[{"pos":[0,26],"content":"Using Performance Counters","nodes":[{"content":"Using Performance Counters","pos":[0,26]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[117,143],"content":"Using Performance Counters","linkify":"Using Performance Counters","nodes":[{"content":"Using Performance Counters","pos":[0,26]}]},{"content":"This sample demonstrates how to access Windows Communication Foundation (WCF) performance counters and how to create user-defined performance counters.","pos":[144,295]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>.","pos":[296,408],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md)."},{"pos":[416,523],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"In this sample, the client calls the four methods of the <ph id=\"ph1\">`ICalculator`</ph> service.","pos":[530,609],"source":"In this sample, the client calls the four methods of the `ICalculator` service."},{"content":"The client continues to do this until it is interrupted by the user.","pos":[610,678]},{"content":"The service remains unchanged.","pos":[679,709]},{"content":"Performance counters are enabled in the diagnostics section of the Web.config file for the service, as shown in the following sample configuration.","pos":[716,863]},{"pos":[1027,1195],"content":"This task can also be done using the <bpt id=\"p1\">[</bpt>Configuration Editor Tool (SvcConfigEditor.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md)</ept>.","source":"This task can also be done using the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md)."},{"content":"When performance counters are enabled, the entire suite of WCF performance counters is enabled for the service.","pos":[1202,1313]},{"content":"The .NET Framework automatically maintains performance data at three levels: <ph id=\"ph1\">`ServiceModelService`</ph>, <ph id=\"ph2\">`ServiceModelEndpoint`</ph> and <ph id=\"ph3\">`ServiceModelOperation`</ph>.","pos":[1314,1465],"source":" The .NET Framework automatically maintains performance data at three levels: `ServiceModelService`, `ServiceModelEndpoint` and `ServiceModelOperation`."},{"content":"Each of these levels has performance counters such as \"Calls\", \"Calls per Second\", and \"Security Calls Not Authorized\".","pos":[1466,1585]},{"pos":[1595,1631],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[1641,1840],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[1850,2059],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[2069,2278],"content":"To run the sample in a single- or cross-computer configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-computer configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[2288,2312],"content":"To view performance data","linkify":"To view performance data","nodes":[{"content":"To view performance data","pos":[0,24]}]},{"pos":[2322,2512],"content":"Start the Performance Monitor Tool by clicking <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Run…<ept id=\"p2\">**</ept>, enter <ph id=\"ph1\">`perfmon`</ph> and click <bpt id=\"p3\">**</bpt>OK,<ept id=\"p3\">**</ept> or from Control Panel, select <bpt id=\"p4\">**</bpt>Administrative Tools<ept id=\"p4\">**</ept> and double-click <bpt id=\"p5\">**</bpt>Performance<ept id=\"p5\">**</ept>.","source":"Start the Performance Monitor Tool by clicking **Start**, **Run…**, enter `perfmon` and click **OK,** or from Control Panel, select **Administrative Tools** and double-click **Performance**."},{"pos":[2524,2596],"content":"[!NOTE]\nYou cannot add counters until the sample code is running.","leadings":["","    >  "],"nodes":[{"content":"You cannot add counters until the sample code is running.","pos":[8,65]}]},{"content":"Remove the performance counters that are listed by selecting them and pressing the Delete key.","pos":[2606,2700]},{"content":"Add WCF counters by right-clicking the graph pane and selecting <bpt id=\"p1\">**</bpt>Add Counters<ept id=\"p1\">**</ept>.","pos":[2710,2791],"source":"Add WCF counters by right-clicking the graph pane and selecting **Add Counters**."},{"content":"In the <bpt id=\"p1\">**</bpt>Add Counters<ept id=\"p1\">**</ept> dialog box, select <bpt id=\"p2\">**</bpt>ServiceModelOperation 3.0.0.0, ServiceModelEndpoint 3.0.0.0, or ServiceModelService 3.0.0.0<ept id=\"p2\">**</ept> in the Performance object drop down list box.","pos":[2792,2976],"source":" In the **Add Counters** dialog box, select **ServiceModelOperation 3.0.0.0, ServiceModelEndpoint 3.0.0.0, or ServiceModelService 3.0.0.0** in the Performance object drop down list box."},{"content":"Select the counters you want to view from the list.","pos":[2977,3028]},{"pos":[3040,3160],"content":"[!NOTE]\nThere are no WCF performance counters for a service if there are no WCF services running on the computer.","leadings":["","    >  "],"nodes":[{"content":"There are no WCF performance counters for a service if there are no WCF services running on the computer.","pos":[8,113]}]},{"pos":[3170,3220],"content":"To use the Configuration Editor to enable counters","linkify":"To use the Configuration Editor to enable counters","nodes":[{"content":"To use the Configuration Editor to enable counters","pos":[0,50]}]},{"content":"Open an instance of the SvcConfigEditor.exe.","pos":[3230,3274]},{"pos":[3284,3349],"content":"On the File menu, click <bpt id=\"p1\">**</bpt>Open<ept id=\"p1\">**</ept> and then click <bpt id=\"p2\">**</bpt>Config file…<ept id=\"p2\">**</ept>.","source":"On the File menu, click **Open** and then click **Config file…**."},{"content":"Navigate to the sample application's service folder and open the Web.config file.","pos":[3359,3440]},{"pos":[3450,3498],"content":"Click <bpt id=\"p1\">**</bpt>Diagnostics<ept id=\"p1\">**</ept> on the Configuration tree.","source":"Click **Diagnostics** on the Configuration tree."},{"pos":[3508,3583],"content":"Toggle <bpt id=\"p1\">**</bpt>Performance Counter<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>Diagnostics<ept id=\"p2\">**</ept> window to show 'All'.","source":"Toggle **Performance Counter** in the **Diagnostics** window to show 'All'."},{"content":"Save the configuration file and exit the editor.","pos":[3593,3641]},{"pos":[3649,3782],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[14,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[0,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3836,4146],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4147,4197]},{"pos":[4283,4291],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4295,4373],"content":"<bpt id=\"p1\">[</bpt>AppFabric Monitoring Samples<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=193959)</ept>","source":"[AppFabric Monitoring Samples](https://go.microsoft.com/fwlink/?LinkId=193959)"}]}