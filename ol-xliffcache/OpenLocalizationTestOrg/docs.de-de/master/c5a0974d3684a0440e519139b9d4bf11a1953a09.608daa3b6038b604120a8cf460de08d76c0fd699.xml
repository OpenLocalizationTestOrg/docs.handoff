{"content":"---\ntitle: \"Asynchronous Programming Model (APM) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: dotnet-standard\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"ending asynchronous operations\"\n  - \"starting asynchronous operations\"\n  - \"beginning asynchronous operations\"\n  - \"asynchronous programming, ending operations\"\n  - \"asynchronous programming\"\n  - \"stopping asynchronous operations\"\n  - \"asynchronous programming, beginning operations\"\nms.assetid: c9b3501e-6bc6-40f9-8efd-4b6d9e39ccf0\ncaps.latest.revision: 13\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# Asynchronous Programming Model (APM)\nAn asynchronous operation that uses the <xref:System.IAsyncResult> design pattern is implemented as two methods named **Begin** *OperationName* and **End** *OperationName* that begin and end the asynchronous operation *OperationName* respectively. For example, the <xref:System.IO.FileStream> class provides the <xref:System.IO.FileStream.BeginRead%2A> and <xref:System.IO.FileStream.EndRead%2A> methods to asynchronously read bytes from a file. These methods implement the asynchronous version of the <xref:System.IO.FileStream.Read%2A> method.  \n  \n> [!NOTE]\n>  Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming. For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).  \n  \n After calling **Begin** *OperationName*, an application can continue executing instructions on the calling thread while the asynchronous operation takes place on a different thread. For each call to **Begin** *OperationName*, the application should also call **End** *OperationName* to get the results of the operation.  \n  \n## Beginning an Asynchronous Operation  \n The **Begin** *OperationName* method begins asynchronous operation *OperationName* and returns an object that implements the <xref:System.IAsyncResult> interface. <xref:System.IAsyncResult> objects store information about an asynchronous operation. The following table shows information about an asynchronous operation.  \n  \n|Member|Description|  \n|------------|-----------------|  \n|<xref:System.IAsyncResult.AsyncState%2A>|An optional application-specific object that contains information about the asynchronous operation.|  \n|<xref:System.IAsyncResult.AsyncWaitHandle%2A>|A <xref:System.Threading.WaitHandle> that can be used to block application execution until the asynchronous operation completes.|  \n|<xref:System.IAsyncResult.CompletedSynchronously%2A>|A value that indicates whether the asynchronous operation completed on the thread used to call **Begin** *OperationName* instead of completing on a separate <xref:System.Threading.ThreadPool> thread.|  \n|<xref:System.IAsyncResult.IsCompleted%2A>|A value that indicates whether the asynchronous operation has completed.|  \n  \n A **Begin** *OperationName* method takes any parameters declared in the signature of the synchronous version of the method that are passed by value or by reference. Any out parameters are not part of the **Begin** *OperationName* method signature. The **Begin** *OperationName* method signature also includes two additional parameters. The first of these defines an <xref:System.AsyncCallback> delegate that references a method that is called when the asynchronous operation completes. The caller can specify `null` (`Nothing` in Visual Basic) if it does not want a method invoked when the operation completes. The second additional parameter is a user-defined object. This object can be used to pass application-specific state information to the method invoked when the asynchronous operation completes. If a **Begin** *OperationName* method takes additional operation-specific parameters, such as a byte array to store bytes read from a file, the <xref:System.AsyncCallback> and application state object are the last parameters in the **Begin** *OperationName* method signature.  \n  \n **Begin** *OperationName* returns control to the calling thread immediately. If the **Begin** *OperationName* method throws exceptions, the exceptions are thrown before the asynchronous operation is started. If the **Begin** *OperationName* method throws exceptions, the callback method is not invoked.  \n  \n## Ending an Asynchronous Operation  \n The **End** *OperationName* method ends asynchronous operation *OperationName*. The return value of the **End** *OperationName* method is the same type returned by its synchronous counterpart and is specific to the asynchronous operation. For example, the <xref:System.IO.FileStream.EndRead%2A> method returns the number of bytes read from a <xref:System.IO.FileStream> and the <xref:System.Net.Dns.EndGetHostByName%2A> method returns an <xref:System.Net.IPHostEntry> object that contains information about a host computer. The **End** *OperationName* method takes any out or ref parameters declared in the signature of the synchronous version of the method. In addition to the parameters from the synchronous method, the **End** *OperationName* method also includes an <xref:System.IAsyncResult> parameter. Callers must pass the instance returned by the corresponding call to **Begin** *OperationName*.  \n  \n If the asynchronous operation represented by the <xref:System.IAsyncResult> object has not completed when **End** *OperationName* is called, **End** *OperationName* blocks the calling thread until the asynchronous operation is complete. Exceptions thrown by the asynchronous operation are thrown from the **End** *OperationName* method. The effect of calling the **End** *OperationName* method multiple times with the same <xref:System.IAsyncResult> is not defined. Likewise, calling the **End** *OperationName* method with an <xref:System.IAsyncResult> that was not returned by the related Begin method is also not defined.  \n  \n> [!NOTE]\n>  For either of the undefined scenarios, implementers should consider throwing <xref:System.InvalidOperationException>.  \n  \n> [!NOTE]\n>  Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <xref:System.IAsyncResult.IsCompleted%2A> to true, calling the asynchronous callback method (if one was specified) and signaling the <xref:System.IAsyncResult.AsyncWaitHandle%2A>.  \n  \n Application developers have several design choices for accessing the results of the asynchronous operation. The correct choice depends on whether the application has instructions that can execute while the operation completes. If an application cannot perform any additional work until it receives the results of the asynchronous operation, the application must block until the results are available. To block until an asynchronous operation completes, you can use one of the following approaches:  \n  \n-   Call **End** *OperationName* from the application’s main thread, blocking application execution until the operation is complete. For an example that illustrates this technique, see [Blocking Application Execution by Ending an Async Operation](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md).  \n  \n-   Use the <xref:System.IAsyncResult.AsyncWaitHandle%2A> to block application execution until one or more operations are complete. For an example that illustrates this technique, see [Blocking Application Execution Using an AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md).  \n  \n Applications that do not need to block while the asynchronous operation completes can use one of the following approaches:  \n  \n-   Poll for operation completion status by checking the <xref:System.IAsyncResult.IsCompleted%2A> property periodically and calling **End** *OperationName* when the operation is complete. For an example that illustrates this technique, see [Polling for the Status of an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md).  \n  \n-   Use an <xref:System.AsyncCallback> delegate to specify a method to be invoked when the operation is complete. For an example that illustrates this technique, see [Using an AsyncCallback Delegate to End an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md).  \n  \n## See Also  \n [Event-based Asynchronous Pattern (EAP)](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)   \n [Calling Synchronous Methods Asynchronously](../../../docs/standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)   \n [Using an AsyncCallback Delegate and State Object](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-and-state-object.md)","nodes":[{"pos":[12,65],"content":"Asynchronous Programming Model (APM) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Asynchronous Programming Model (APM) | Microsoft Docs","pos":[0,53]}]},{"pos":[668,704],"content":"Asynchronous Programming Model (APM)","linkify":"Asynchronous Programming Model (APM)","nodes":[{"content":"Asynchronous Programming Model (APM)","pos":[0,36]}]},{"content":"An asynchronous operation that uses the <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> design pattern is implemented as two methods named <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> and <bpt id=\"p3\">**</bpt>End<ept id=\"p3\">**</ept> <bpt id=\"p4\">*</bpt>OperationName<ept id=\"p4\">*</ept> that begin and end the asynchronous operation <bpt id=\"p5\">*</bpt>OperationName<ept id=\"p5\">*</ept> respectively.","pos":[705,952],"source":"An asynchronous operation that uses the <xref:System.IAsyncResult> design pattern is implemented as two methods named **Begin** *OperationName* and **End** *OperationName* that begin and end the asynchronous operation *OperationName* respectively."},{"content":"For example, the <ph id=\"ph1\">&lt;xref:System.IO.FileStream&gt;</ph> class provides the <ph id=\"ph2\">&lt;xref:System.IO.FileStream.BeginRead%2A&gt;</ph> and <ph id=\"ph3\">&lt;xref:System.IO.FileStream.EndRead%2A&gt;</ph> methods to asynchronously read bytes from a file.","pos":[953,1150],"source":" For example, the <xref:System.IO.FileStream> class provides the <xref:System.IO.FileStream.BeginRead%2A> and <xref:System.IO.FileStream.EndRead%2A> methods to asynchronously read bytes from a file."},{"content":"These methods implement the asynchronous version of the <ph id=\"ph1\">&lt;xref:System.IO.FileStream.Read%2A&gt;</ph> method.","pos":[1151,1250],"source":" These methods implement the asynchronous version of the <xref:System.IO.FileStream.Read%2A> method."},{"pos":[1258,1667],"content":"[!NOTE]\n Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming. For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).","leadings":["","> "],"nodes":[{"content":" Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming. For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).","pos":[8,407],"nodes":[{"content":"Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming.","pos":[1,126]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Task Parallel Library (TPL)<ept id=\"p1\">](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)</ept> and <bpt id=\"p2\">[</bpt>Task-based Asynchronous Pattern (TAP)<ept id=\"p2\">](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)</ept>).","pos":[127,399],"source":" For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md))."}]}]},{"content":"After calling <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept>, an application can continue executing instructions on the calling thread while the asynchronous operation takes place on a different thread.","pos":[1674,1855],"source":"After calling **Begin** *OperationName*, an application can continue executing instructions on the calling thread while the asynchronous operation takes place on a different thread."},{"content":"For each call to <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept>, the application should also call <bpt id=\"p3\">**</bpt>End<ept id=\"p3\">**</ept> <bpt id=\"p4\">*</bpt>OperationName<ept id=\"p4\">*</ept> to get the results of the operation.","pos":[1856,1993],"source":" For each call to **Begin** *OperationName*, the application should also call **End** *OperationName* to get the results of the operation."},{"pos":[2002,2037],"content":"Beginning an Asynchronous Operation","linkify":"Beginning an Asynchronous Operation","nodes":[{"content":"Beginning an Asynchronous Operation","pos":[0,35]}]},{"content":"The <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method begins asynchronous operation <bpt id=\"p3\">*</bpt>OperationName<ept id=\"p3\">*</ept> and returns an object that implements the <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> interface.","pos":[2041,2203],"source":"The **Begin** *OperationName* method begins asynchronous operation *OperationName* and returns an object that implements the <xref:System.IAsyncResult> interface."},{"content":"<ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> objects store information about an asynchronous operation.","pos":[2204,2289],"source":"<xref:System.IAsyncResult> objects store information about an asynchronous operation."},{"content":"The following table shows information about an asynchronous operation.","pos":[2290,2360]},{"content":"Member","pos":[2367,2373]},{"content":"Description","pos":[2374,2385]},{"content":"An optional application-specific object that contains information about the asynchronous operation.","pos":[2466,2565]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Threading.WaitHandle&gt;</ph> that can be used to block application execution until the asynchronous operation completes.","pos":[2616,2744],"source":"A <xref:System.Threading.WaitHandle> that can be used to block application execution until the asynchronous operation completes."},{"pos":[2802,3001],"content":"A value that indicates whether the asynchronous operation completed on the thread used to call <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> instead of completing on a separate <ph id=\"ph1\">&lt;xref:System.Threading.ThreadPool&gt;</ph> thread.","source":"A value that indicates whether the asynchronous operation completed on the thread used to call **Begin** *OperationName* instead of completing on a separate <xref:System.Threading.ThreadPool> thread."},{"content":"A value that indicates whether the asynchronous operation has completed.","pos":[3048,3120]},{"content":"A <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method takes any parameters declared in the signature of the synchronous version of the method that are passed by value or by reference.","pos":[3128,3292],"source":"A **Begin** *OperationName* method takes any parameters declared in the signature of the synchronous version of the method that are passed by value or by reference."},{"content":"Any out parameters are not part of the <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method signature.","pos":[3293,3375],"source":" Any out parameters are not part of the **Begin** *OperationName* method signature."},{"content":"The <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method signature also includes two additional parameters.","pos":[3376,3463],"source":" The **Begin** *OperationName* method signature also includes two additional parameters."},{"content":"The first of these defines an <ph id=\"ph1\">&lt;xref:System.AsyncCallback&gt;</ph> delegate that references a method that is called when the asynchronous operation completes.","pos":[3464,3613],"source":" The first of these defines an <xref:System.AsyncCallback> delegate that references a method that is called when the asynchronous operation completes."},{"content":"The caller can specify <ph id=\"ph1\">`null`</ph> (<ph id=\"ph2\">`Nothing`</ph> in Visual Basic) if it does not want a method invoked when the operation completes.","pos":[3614,3738],"source":" The caller can specify `null` (`Nothing` in Visual Basic) if it does not want a method invoked when the operation completes."},{"content":"The second additional parameter is a user-defined object.","pos":[3739,3796]},{"content":"This object can be used to pass application-specific state information to the method invoked when the asynchronous operation completes.","pos":[3797,3932]},{"content":"If a <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method takes additional operation-specific parameters, such as a byte array to store bytes read from a file, the <ph id=\"ph1\">&lt;xref:System.AsyncCallback&gt;</ph> and application state object are the last parameters in the <bpt id=\"p3\">**</bpt>Begin<ept id=\"p3\">**</ept> <bpt id=\"p4\">*</bpt>OperationName<ept id=\"p4\">*</ept> method signature.","pos":[3933,4208],"source":" If a **Begin** *OperationName* method takes additional operation-specific parameters, such as a byte array to store bytes read from a file, the <xref:System.AsyncCallback> and application state object are the last parameters in the **Begin** *OperationName* method signature."},{"content":"<bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> returns control to the calling thread immediately.","pos":[4215,4291],"source":"**Begin** *OperationName* returns control to the calling thread immediately."},{"content":"If the <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method throws exceptions, the exceptions are thrown before the asynchronous operation is started.","pos":[4292,4422],"source":" If the **Begin** *OperationName* method throws exceptions, the exceptions are thrown before the asynchronous operation is started."},{"content":"If the <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method throws exceptions, the callback method is not invoked.","pos":[4423,4517],"source":" If the **Begin** *OperationName* method throws exceptions, the callback method is not invoked."},{"pos":[4526,4558],"content":"Ending an Asynchronous Operation","linkify":"Ending an Asynchronous Operation","nodes":[{"content":"Ending an Asynchronous Operation","pos":[0,32]}]},{"content":"The <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method ends asynchronous operation <bpt id=\"p3\">*</bpt>OperationName<ept id=\"p3\">*</ept>.","pos":[4562,4641],"source":"The **End** *OperationName* method ends asynchronous operation *OperationName*."},{"content":"The return value of the <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method is the same type returned by its synchronous counterpart and is specific to the asynchronous operation.","pos":[4642,4800],"source":" The return value of the **End** *OperationName* method is the same type returned by its synchronous counterpart and is specific to the asynchronous operation."},{"content":"For example, the <ph id=\"ph1\">&lt;xref:System.IO.FileStream.EndRead%2A&gt;</ph> method returns the number of bytes read from a <ph id=\"ph2\">&lt;xref:System.IO.FileStream&gt;</ph> and the <ph id=\"ph3\">&lt;xref:System.Net.Dns.EndGetHostByName%2A&gt;</ph> method returns an <ph id=\"ph4\">&lt;xref:System.Net.IPHostEntry&gt;</ph> object that contains information about a host computer.","pos":[4801,5085],"source":" For example, the <xref:System.IO.FileStream.EndRead%2A> method returns the number of bytes read from a <xref:System.IO.FileStream> and the <xref:System.Net.Dns.EndGetHostByName%2A> method returns an <xref:System.Net.IPHostEntry> object that contains information about a host computer."},{"content":"The <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method takes any out or ref parameters declared in the signature of the synchronous version of the method.","pos":[5086,5220],"source":" The **End** *OperationName* method takes any out or ref parameters declared in the signature of the synchronous version of the method."},{"content":"In addition to the parameters from the synchronous method, the <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method also includes an <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> parameter.","pos":[5221,5369],"source":" In addition to the parameters from the synchronous method, the **End** *OperationName* method also includes an <xref:System.IAsyncResult> parameter."},{"content":"Callers must pass the instance returned by the corresponding call to <bpt id=\"p1\">**</bpt>Begin<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept>.","pos":[5370,5465],"source":" Callers must pass the instance returned by the corresponding call to **Begin** *OperationName*."},{"content":"If the asynchronous operation represented by the <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> object has not completed when <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> is called, <bpt id=\"p3\">**</bpt>End<ept id=\"p3\">**</ept> <bpt id=\"p4\">*</bpt>OperationName<ept id=\"p4\">*</ept> blocks the calling thread until the asynchronous operation is complete.","pos":[5472,5708],"source":"If the asynchronous operation represented by the <xref:System.IAsyncResult> object has not completed when **End** *OperationName* is called, **End** *OperationName* blocks the calling thread until the asynchronous operation is complete."},{"content":"Exceptions thrown by the asynchronous operation are thrown from the <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method.","pos":[5709,5808],"source":" Exceptions thrown by the asynchronous operation are thrown from the **End** *OperationName* method."},{"content":"The effect of calling the <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method multiple times with the same <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> is not defined.","pos":[5809,5937],"source":" The effect of calling the **End** *OperationName* method multiple times with the same <xref:System.IAsyncResult> is not defined."},{"content":"Likewise, calling the <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> method with an <ph id=\"ph1\">&lt;xref:System.IAsyncResult&gt;</ph> that was not returned by the related Begin method is also not defined.","pos":[5938,6096],"source":" Likewise, calling the **End** *OperationName* method with an <xref:System.IAsyncResult> that was not returned by the related Begin method is also not defined."},{"pos":[6104,6232],"content":"[!NOTE]\n For either of the undefined scenarios, implementers should consider throwing <xref:System.InvalidOperationException>.","leadings":["","> "],"nodes":[{"content":"For either of the undefined scenarios, implementers should consider throwing <ph id=\"ph1\">&lt;xref:System.InvalidOperationException&gt;</ph>.","pos":[9,126],"source":" For either of the undefined scenarios, implementers should consider throwing <xref:System.InvalidOperationException>."}]},{"pos":[6240,6544],"content":"[!NOTE]\n Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <xref:System.IAsyncResult.IsCompleted%2A> to true, calling the asynchronous callback method (if one was specified) and signaling the <xref:System.IAsyncResult.AsyncWaitHandle%2A>.","leadings":["","> "],"nodes":[{"content":"Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <ph id=\"ph1\">&lt;xref:System.IAsyncResult.IsCompleted%2A&gt;</ph> to true, calling the asynchronous callback method (if one was specified) and signaling the <ph id=\"ph2\">&lt;xref:System.IAsyncResult.AsyncWaitHandle%2A&gt;</ph>.","pos":[9,302],"source":" Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <xref:System.IAsyncResult.IsCompleted%2A> to true, calling the asynchronous callback method (if one was specified) and signaling the <xref:System.IAsyncResult.AsyncWaitHandle%2A>."}]},{"content":"Application developers have several design choices for accessing the results of the asynchronous operation.","pos":[6551,6658]},{"content":"The correct choice depends on whether the application has instructions that can execute while the operation completes.","pos":[6659,6777]},{"content":"If an application cannot perform any additional work until it receives the results of the asynchronous operation, the application must block until the results are available.","pos":[6778,6951]},{"content":"To block until an asynchronous operation completes, you can use one of the following approaches:","pos":[6952,7048]},{"content":"Call <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> from the application’s main thread, blocking application execution until the operation is complete.","pos":[7058,7186],"source":"Call **End** *OperationName* from the application’s main thread, blocking application execution until the operation is complete."},{"content":"For an example that illustrates this technique, see <bpt id=\"p1\">[</bpt>Blocking Application Execution by Ending an Async Operation<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md)</ept>.","pos":[7187,7422],"source":" For an example that illustrates this technique, see [Blocking Application Execution by Ending an Async Operation](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md)."},{"content":"Use the <ph id=\"ph1\">&lt;xref:System.IAsyncResult.AsyncWaitHandle%2A&gt;</ph> to block application execution until one or more operations are complete.","pos":[7432,7559],"source":"Use the <xref:System.IAsyncResult.AsyncWaitHandle%2A> to block application execution until one or more operations are complete."},{"content":"For an example that illustrates this technique, see <bpt id=\"p1\">[</bpt>Blocking Application Execution Using an AsyncWaitHandle<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md)</ept>.","pos":[7560,7787],"source":" For an example that illustrates this technique, see [Blocking Application Execution Using an AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md)."},{"content":"Applications that do not need to block while the asynchronous operation completes can use one of the following approaches:","pos":[7794,7916]},{"content":"Poll for operation completion status by checking the <ph id=\"ph1\">&lt;xref:System.IAsyncResult.IsCompleted%2A&gt;</ph> property periodically and calling <bpt id=\"p1\">**</bpt>End<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>OperationName<ept id=\"p2\">*</ept> when the operation is complete.","pos":[7926,8110],"source":"Poll for operation completion status by checking the <xref:System.IAsyncResult.IsCompleted%2A> property periodically and calling **End** *OperationName* when the operation is complete."},{"content":"For an example that illustrates this technique, see <bpt id=\"p1\">[</bpt>Polling for the Status of an Asynchronous Operation<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md)</ept>.","pos":[8111,8330],"source":" For an example that illustrates this technique, see [Polling for the Status of an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md)."},{"content":"Use an <ph id=\"ph1\">&lt;xref:System.AsyncCallback&gt;</ph> delegate to specify a method to be invoked when the operation is complete.","pos":[8340,8449],"source":"Use an <xref:System.AsyncCallback> delegate to specify a method to be invoked when the operation is complete."},{"content":"For an example that illustrates this technique, see <bpt id=\"p1\">[</bpt>Using an AsyncCallback Delegate to End an Asynchronous Operation<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md)</ept>.","pos":[8450,8695],"source":" For an example that illustrates this technique, see [Using an AsyncCallback Delegate to End an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md)."},{"pos":[8704,8712],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Event-based Asynchronous Pattern (EAP)<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)</ept><ph id=\"ph1\"> </ph>","pos":[8716,8855],"source":"[Event-based Asynchronous Pattern (EAP)](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Calling Synchronous Methods Asynchronously<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)</ept><ph id=\"ph1\"> </ph>","pos":[8858,9008],"source":" [Calling Synchronous Methods Asynchronously](../../../docs/standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Using an AsyncCallback Delegate and State Object<ept id=\"p1\">](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-and-state-object.md)</ept>","pos":[9011,9172],"source":" [Using an AsyncCallback Delegate and State Object](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-and-state-object.md)"}]}