{"content":"---\ntitle: \"Exporting Custom Metadata for a WCF Extension\"\nms.date: \"03/30/2017\"\nms.assetid: 53c93882-f8ba-4192-965b-787b5e3f09c0\n---\n# Exporting Custom Metadata for a WCF Extension\nIn Windows Communication Foundation (WCF), metadata export is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service. Custom metadata consists of XML elements that the system-provided metadata exporters cannot export. Typically, this includes custom WSDL elements for user-defined behaviors and binding elements and policy assertions about the capabilities and requirements of bindings and contracts.  \n  \n This section describes exporting custom WSDL or policy assertions, and does not focus on the exporting process itself. For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-constructed, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).  \n  \n## Overview  \n When metadata is published using the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> is examined and XSD and WSDL -- including policy assertions -- are generated for all contracts and bindings that WCF can support using system-provided attributes and bindings. However, custom behavior attributes or binding elements require support before they can be exported properly.  \n  \n This section describes:  \n  \n1.  How to implement and use the <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> interface, which exposes the WSDL generation data to you prior to publishing the WSDL.  \n  \n2.  How to implement and use the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface, which exposes the policy data to you prior to exporting the policy assertions in WSDL data.  \n  \n For more information about importing custom WSDL and policy assertions, see [Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md).  \n  \n## Exporting Custom WSDL Elements  \n Implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> on an operation behavior, contract behavior, endpoint behavior or binding element (<xref:System.ServiceModel.Description.IOperationBehavior>, <xref:System.ServiceModel.Description.IContractBehavior>, <xref:System.ServiceModel.Description.IEndpointBehavior>, or <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> respectively) and insert the behaviors or binding elements into the description of the service that you are trying to export. (For more information about inserting behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)). The <xref:System.ServiceModel.Description.IWsdlExportExtension> is called for each endpoint and each endpoint exports the contract first if it has not already been exported. You can participate in either export process, depending upon your needs:  \n  \n-   Use the <xref:System.ServiceModel.Description.WsdlContractConversionContext> to modify the exported metadata in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.  \n  \n-   Use the <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> to modify the exported metadata for the endpoint in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method.  \n  \n The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations within the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> instance that is being exported.  The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations with the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> instance that is being exported.  \n  \n For more information, see [How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md) and the sample [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md).  \n  \n## Exporting Custom Policy Assertions  \n Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension> on a <xref:System.ServiceModel.Channels.BindingElement> and add the binding element to the binding to write custom policy assertions about binding support and contract capabilities into the WSDL. The <xref:System.ServiceModel.Description.IPolicyExportExtension> is called once when exporting the implemented binding element in a binding and passes the <xref:System.ServiceModel.Description.PolicyConversionContext> to the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method. You can use the methods on the <xref:System.ServiceModel.Description.PolicyConversionContext> instance to add to the policy assertions attached to the WSDL binding at the message, operation or endpoint subjects.  \n  \n For more information, see [How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md).  \n  \n## See also\n\n- [How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)\n- [How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)\n- [Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)\n","nodes":[{"pos":[4,129],"embed":true,"restype":"x-metadata","content":"title: \"Exporting Custom Metadata for a WCF Extension\"\nms.date: \"03/30/2017\"\nms.assetid: 53c93882-f8ba-4192-965b-787b5e3f09c0","nodes":[{"content":"Exporting Custom Metadata for a WCF Extension","nodes":[{"pos":[0,45],"content":"Exporting Custom Metadata for a WCF Extension","nodes":[{"content":"Exporting Custom Metadata for a WCF Extension","pos":[0,45]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[136,181],"content":"Exporting Custom Metadata for a WCF Extension","linkify":"Exporting Custom Metadata for a WCF Extension","nodes":[{"content":"Exporting Custom Metadata for a WCF Extension","pos":[0,45]}]},{"content":"In Windows Communication Foundation (WCF), metadata export is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service.","pos":[182,411]},{"content":"Custom metadata consists of XML elements that the system-provided metadata exporters cannot export.","pos":[412,511]},{"content":"Typically, this includes custom WSDL elements for user-defined behaviors and binding elements and policy assertions about the capabilities and requirements of bindings and contracts.","pos":[512,694]},{"content":"This section describes exporting custom WSDL or policy assertions, and does not focus on the exporting process itself.","pos":[701,819]},{"content":"For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-constructed, see <bpt id=\"p1\">[</bpt>Exporting and Importing Metadata<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md)</ept>.","pos":[820,1091],"source":" For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-constructed, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md)."},{"pos":[1100,1108],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"When metadata is published using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType&gt;</ph>, the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType&gt;</ph> is examined and XSD and WSDL -- including policy assertions -- are generated for all contracts and bindings that WCF can support using system-provided attributes and bindings.","pos":[1112,1508],"source":"When metadata is published using the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> is examined and XSD and WSDL -- including policy assertions -- are generated for all contracts and bindings that WCF can support using system-provided attributes and bindings."},{"content":"However, custom behavior attributes or binding elements require support before they can be exported properly.","pos":[1509,1618]},{"content":"This section describes:","pos":[1625,1648]},{"pos":[1658,1862],"content":"How to implement and use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType&gt;</ph> interface, which exposes the WSDL generation data to you prior to publishing the WSDL.","source":"How to implement and use the <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> interface, which exposes the WSDL generation data to you prior to publishing the WSDL."},{"pos":[1872,2094],"content":"How to implement and use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType&gt;</ph> interface, which exposes the policy data to you prior to exporting the policy assertions in WSDL data.","source":"How to implement and use the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface, which exposes the policy data to you prior to exporting the policy assertions in WSDL data."},{"pos":[2101,2316],"content":"For more information about importing custom WSDL and policy assertions, see <bpt id=\"p1\">[</bpt>Importing Custom Metadata for a WCF Extension<ept id=\"p1\">](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)</ept>.","source":"For more information about importing custom WSDL and policy assertions, see [Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)."},{"pos":[2325,2355],"content":"Exporting Custom WSDL Elements","linkify":"Exporting Custom WSDL Elements","nodes":[{"content":"Exporting Custom WSDL Elements","pos":[0,30]}]},{"content":"Implement the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension&gt;</ph> on an operation behavior, contract behavior, endpoint behavior or binding element (<ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.IOperationBehavior&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.IContractBehavior&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.ServiceModel.Description.IEndpointBehavior&gt;</ph>, or <ph id=\"ph5\">&lt;xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType&gt;</ph> respectively) and insert the behaviors or binding elements into the description of the service that you are trying to export.","pos":[2359,2899],"source":"Implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> on an operation behavior, contract behavior, endpoint behavior or binding element (<xref:System.ServiceModel.Description.IOperationBehavior>, <xref:System.ServiceModel.Description.IContractBehavior>, <xref:System.ServiceModel.Description.IEndpointBehavior>, or <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> respectively) and insert the behaviors or binding elements into the description of the service that you are trying to export."},{"content":"(For more information about inserting behaviors, see <bpt id=\"p1\">[</bpt>Configuring and Extending the Runtime with Behaviors<ept id=\"p1\">](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)</ept>).","pos":[2900,3107],"source":" (For more information about inserting behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md))."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension&gt;</ph> is called for each endpoint and each endpoint exports the contract first if it has not already been exported.","pos":[3108,3281],"source":" The <xref:System.ServiceModel.Description.IWsdlExportExtension> is called for each endpoint and each endpoint exports the contract first if it has not already been exported."},{"content":"You can participate in either export process, depending upon your needs:","pos":[3282,3354]},{"pos":[3364,3565],"content":"Use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.WsdlContractConversionContext&gt;</ph> to modify the exported metadata in the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A&gt;</ph> method.","source":"Use the <xref:System.ServiceModel.Description.WsdlContractConversionContext> to modify the exported metadata in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method."},{"pos":[3575,3793],"content":"Use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.WsdlEndpointConversionContext&gt;</ph> to modify the exported metadata for the endpoint in the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A&gt;</ph> method.","source":"Use the <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> to modify the exported metadata for the endpoint in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A&gt;</ph> method is called on all <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension&gt;</ph> implementations within the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType&gt;</ph> instance that is being exported.","pos":[3800,4113],"source":"The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations within the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> instance that is being exported."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A&gt;</ph> method is called on all <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.IWsdlExportExtension&gt;</ph> implementations with the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType&gt;</ph> instance that is being exported.","pos":[4115,4422],"source":"  The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations with the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> instance that is being exported."},{"pos":[4429,4663],"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Export Custom WSDL<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)</ept> and the sample <bpt id=\"p2\">[</bpt>Custom WSDL Publication<ept id=\"p2\">](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md)</ept>.","source":"For more information, see [How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md) and the sample [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md)."},{"pos":[4672,4706],"content":"Exporting Custom Policy Assertions","linkify":"Exporting Custom Policy Assertions","nodes":[{"content":"Exporting Custom Policy Assertions","pos":[0,34]}]},{"content":"Implement the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IPolicyExportExtension&gt;</ph> on a <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.BindingElement&gt;</ph> and add the binding element to the binding to write custom policy assertions about binding support and contract capabilities into the WSDL.","pos":[4710,4981],"source":"Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension> on a <xref:System.ServiceModel.Channels.BindingElement> and add the binding element to the binding to write custom policy assertions about binding support and contract capabilities into the WSDL."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IPolicyExportExtension&gt;</ph> is called once when exporting the implemented binding element in a binding and passes the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.PolicyConversionContext&gt;</ph> to the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A&gt;</ph> method.","pos":[4982,5293],"source":" The <xref:System.ServiceModel.Description.IPolicyExportExtension> is called once when exporting the implemented binding element in a binding and passes the <xref:System.ServiceModel.Description.PolicyConversionContext> to the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method."},{"content":"You can use the methods on the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.PolicyConversionContext&gt;</ph> instance to add to the policy assertions attached to the WSDL binding at the message, operation or endpoint subjects.","pos":[5294,5505],"source":" You can use the methods on the <xref:System.ServiceModel.Description.PolicyConversionContext> instance to add to the policy assertions attached to the WSDL binding at the message, operation or endpoint subjects."},{"pos":[5512,5664],"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Export Custom Policy Assertions<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)</ept>.","source":"For more information, see [How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)."},{"pos":[5673,5681],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5685,5784],"content":"<bpt id=\"p1\">[</bpt>How to: Export Custom WSDL<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)</ept>","source":"[How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)"},{"pos":[5787,5912],"content":"<bpt id=\"p1\">[</bpt>How to: Export Custom Policy Assertions<ept id=\"p1\">](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)</ept>","source":"[How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)"},{"pos":[5915,6053],"content":"<bpt id=\"p1\">[</bpt>Importing Custom Metadata for a WCF Extension<ept id=\"p1\">](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)</ept>","source":"[Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)"}]}