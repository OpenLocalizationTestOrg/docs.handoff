{"content":"---\ntitle: \"How to: Create a Publisher Policy\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"publisher policy assembly\"\n  - \"publisher policy files\"\n  - \"GAC (global assembly cache), publisher policy assembly\"\n  - \"global assembly cache, publisher policy assembly\"\nms.assetid: 8046bc5d-2fa9-4277-8a5e-6dcc96c281d9\n---\n# How to: Create a Publisher Policy\nVendors of assemblies can state that applications should use a newer version of an assembly by including a publisher policy file with the upgraded assembly. The publisher policy file specifies assembly redirection and code base settings, and uses the same format as an application configuration file. The publisher policy file is compiled into an assembly and placed in the global assembly cache.  \n  \n There are three steps involved in creating a publisher policy:  \n  \n1.  Create a publisher policy file.  \n  \n2.  Create a publisher policy assembly.  \n  \n3.  Add the publisher policy assembly to the global assembly cache.  \n  \n The schema for publisher policy is described in [Redirecting Assembly Versions](../../../docs/framework/configure-apps/redirect-assembly-versions.md). The following example shows a publisher policy file that redirects one version of `myAssembly` to another.  \n  \n```xml  \n<configuration>  \n   <runtime>  \n      <assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\">  \n       <dependentAssembly>  \n         <assemblyIdentity name=\"myAssembly\"  \n                           publicKeyToken=\"32ab4ba45e0a69a1\"  \n                           culture=\"en-us\" />  \n         <!-- Redirecting to version 2.0.0.0 of the assembly. -->  \n         <bindingRedirect oldVersion=\"1.0.0.0\"  \n                          newVersion=\"2.0.0.0\"/>  \n       </dependentAssembly>  \n      </assemblyBinding>  \n   </runtime>  \n</configuration>  \n```  \n  \n To learn how to specify a code base, see [Specifying an Assembly's Location](../../../docs/framework/configure-apps/specify-assembly-location.md).  \n  \n## Creating the Publisher Policy Assembly  \n Use the [Assembly Linker (Al.exe)](../../../docs/framework/tools/al-exe-assembly-linker.md) to create the publisher policy assembly.  \n  \n#### To create a publisher policy assembly  \n  \n1.  Type the following command at the command prompt:  \n  \n     **al /link:** *publisherPolicyFile* **/out:** *publisherPolicyAssemblyFile* **/keyfile:** *keyPairFile* **/platform:** *processorArchitecture*  \n  \n     In this command:  \n  \n    -   The *publisherPolicyFile* argument is the name of the publisher policy file.  \n  \n    -   The *publisherPolicyAssemblyFile* argument is the name of the publisher policy assembly that results from this command. The assembly file name must follow the format:  \n  \n         **policy.** *majorNumber* **.** *minorNumber* **.** *mainAssemblyName* **.dll**  \n  \n    -   The *keyPairFile* argument is the name of the file containing the key pair. You must sign the assembly and publisher policy assembly with the same key pair.  \n  \n    -   The *processorArchitecture* argument identifies the platform targeted by a processor-specific assembly.  \n  \n        > [!NOTE]\n        >  The ability to target a specific processor architecture is new in the .NET Framework version 2.0.  \n  \n     The following command creates a publisher policy assembly called `policy.1.0.myAssembly` from a publisher policy file called `pub.config`, assigns a strong name to the assembly using the key pair in the `sgKey.snk` file, and specifies that the assembly targets the x86 processor architecture.  \n  \n    ```  \n    al /link:pub.config /out:policy.1.0.myAssembly.dll /keyfile:sgKey.snk /platform:x86  \n    ```  \n  \n     The publisher policy assembly must match the processor architecture of the assembly that it applies to. Thus, if your assembly has a <xref:System.Reflection.AssemblyName.ProcessorArchitecture%2A> value of <xref:System.Reflection.ProcessorArchitecture.MSIL>, the publisher policy assembly for that assembly must be created with `/platform:anycpu`. You must provide a separate publisher policy assembly for each processor-specific assembly.  \n  \n     A consequence of this rule is that in order to change the processor architecture for an assembly, you must change the major or minor component of the version number, so that you can supply a new publisher policy assembly with the correct processor architecture. The old publisher policy assembly cannot service your assembly once your assembly has a different processor architecture.  \n  \n     Another consequence is that the version 2.0 linker cannot be used to create a publisher policy assembly for an assembly compiled using earlier versions of the .NET Framework, because it always specifies processor architecture.  \n  \n## Adding the Publisher Policy Assembly to the Global Assembly Cache  \n Use the [Global Assembly Cache tool (Gacutil.exe)](../../../docs/framework/tools/gacutil-exe-gac-tool.md) to add the publisher policy assembly to the global assembly cache.  \n  \n#### To add the publisher policy assembly to the global assembly cache  \n  \n1.  Type the following command at the command prompt:  \n  \n     **gacutil /i**  *publisherPolicyAssemblyFile*  \n  \n     The following command adds `policy.1.0.myAssembly.dll` to the global assembly cache.  \n  \n    ```  \n    gacutil /i policy.1.0.myAssembly.dll  \n    ```  \n  \n    > [!IMPORTANT]\n    >  The publisher policy assembly cannot be added to the global assembly cache unless the original publisher policy file is located in the same directory as the assembly.  \n  \n## See also\n\n- [Programming with Assemblies](../../../docs/framework/app-domains/programming-with-assemblies.md)\n- [How the Runtime Locates Assemblies](../../../docs/framework/deployment/how-the-runtime-locates-assemblies.md)\n- [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md)\n- [Runtime Settings Schema](../../../docs/framework/configure-apps/file-schema/runtime/index.md)\n- [Configuration File Schema](../../../docs/framework/configure-apps/file-schema/index.md)\n- [Redirecting Assembly Versions](../../../docs/framework/configure-apps/redirect-assembly-versions.md)\n","nodes":[{"pos":[4,316],"embed":true,"restype":"x-metadata","content":"title: \"How to: Create a Publisher Policy\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"publisher policy assembly\"\n  - \"publisher policy files\"\n  - \"GAC (global assembly cache), publisher policy assembly\"\n  - \"global assembly cache, publisher policy assembly\"\nms.assetid: 8046bc5d-2fa9-4277-8a5e-6dcc96c281d9","nodes":[{"content":"How to: Create a Publisher Policy","nodes":[{"pos":[0,33],"content":"How to: Create a Publisher Policy","nodes":[{"content":"How to: Create a Publisher Policy","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[323,356],"content":"How to: Create a Publisher Policy","linkify":"How to: Create a Publisher Policy","nodes":[{"content":"How to: Create a Publisher Policy","pos":[0,33]}]},{"content":"Vendors of assemblies can state that applications should use a newer version of an assembly by including a publisher policy file with the upgraded assembly.","pos":[357,513]},{"content":"The publisher policy file specifies assembly redirection and code base settings, and uses the same format as an application configuration file.","pos":[514,657]},{"content":"The publisher policy file is compiled into an assembly and placed in the global assembly cache.","pos":[658,753]},{"content":"There are three steps involved in creating a publisher policy:","pos":[760,822]},{"content":"Create a publisher policy file.","pos":[832,863]},{"content":"Create a publisher policy assembly.","pos":[873,908]},{"content":"Add the publisher policy assembly to the global assembly cache.","pos":[918,981]},{"content":"The schema for publisher policy is described in <bpt id=\"p1\">[</bpt>Redirecting Assembly Versions<ept id=\"p1\">](../../../docs/framework/configure-apps/redirect-assembly-versions.md)</ept>.","pos":[988,1138],"source":"The schema for publisher policy is described in [Redirecting Assembly Versions](../../../docs/framework/configure-apps/redirect-assembly-versions.md)."},{"content":"The following example shows a publisher policy file that redirects one version of <ph id=\"ph1\">`myAssembly`</ph> to another.","pos":[1139,1245],"source":" The following example shows a publisher policy file that redirects one version of `myAssembly` to another."},{"pos":[1817,1963],"content":"To learn how to specify a code base, see <bpt id=\"p1\">[</bpt>Specifying an Assembly's Location<ept id=\"p1\">](../../../docs/framework/configure-apps/specify-assembly-location.md)</ept>.","source":"To learn how to specify a code base, see [Specifying an Assembly's Location](../../../docs/framework/configure-apps/specify-assembly-location.md)."},{"pos":[1972,2010],"content":"Creating the Publisher Policy Assembly","linkify":"Creating the Publisher Policy Assembly","nodes":[{"content":"Creating the Publisher Policy Assembly","pos":[0,38]}]},{"pos":[2014,2146],"content":"Use the <bpt id=\"p1\">[</bpt>Assembly Linker (Al.exe)<ept id=\"p1\">](../../../docs/framework/tools/al-exe-assembly-linker.md)</ept> to create the publisher policy assembly.","source":"Use the [Assembly Linker (Al.exe)](../../../docs/framework/tools/al-exe-assembly-linker.md) to create the publisher policy assembly."},{"pos":[2157,2194],"content":"To create a publisher policy assembly","linkify":"To create a publisher policy assembly","nodes":[{"content":"To create a publisher policy assembly","pos":[0,37]}]},{"content":"Type the following command at the command prompt:","pos":[2204,2253]},{"pos":[2264,2406],"content":"<bpt id=\"p1\">**</bpt>al /link:<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>publisherPolicyFile<ept id=\"p2\">*</ept> <bpt id=\"p3\">**</bpt>/out:<ept id=\"p3\">**</ept> <bpt id=\"p4\">*</bpt>publisherPolicyAssemblyFile<ept id=\"p4\">*</ept> <bpt id=\"p5\">**</bpt>/keyfile:<ept id=\"p5\">**</ept> <bpt id=\"p6\">*</bpt>keyPairFile<ept id=\"p6\">*</ept> <bpt id=\"p7\">**</bpt>/platform:<ept id=\"p7\">**</ept> <bpt id=\"p8\">*</bpt>processorArchitecture<ept id=\"p8\">*</ept>","source":"**al /link:** *publisherPolicyFile* **/out:** *publisherPolicyAssemblyFile* **/keyfile:** *keyPairFile* **/platform:** *processorArchitecture*"},{"content":"In this command:","pos":[2417,2433]},{"pos":[2447,2523],"content":"The <bpt id=\"p1\">*</bpt>publisherPolicyFile<ept id=\"p1\">*</ept> argument is the name of the publisher policy file.","source":"The *publisherPolicyFile* argument is the name of the publisher policy file."},{"content":"The <bpt id=\"p1\">*</bpt>publisherPolicyAssemblyFile<ept id=\"p1\">*</ept> argument is the name of the publisher policy assembly that results from this command.","pos":[2537,2656],"source":"The *publisherPolicyAssemblyFile* argument is the name of the publisher policy assembly that results from this command."},{"content":"The assembly file name must follow the format:","pos":[2657,2703]},{"content":"<bpt id=\"p1\">**</bpt>policy.<ept id=\"p1\">**</ept>","pos":[2718,2729],"source":"**policy.**"},{"content":"<bpt id=\"p1\">*</bpt>majorNumber<ept id=\"p1\">*</ept> <bpt id=\"p2\">**</bpt>.<ept id=\"p2\">**</ept>","pos":[2730,2749],"source":"*majorNumber* **.**"},{"content":"<bpt id=\"p1\">*</bpt>minorNumber<ept id=\"p1\">*</ept> <bpt id=\"p2\">**</bpt>.<ept id=\"p2\">**</ept>","pos":[2750,2769],"source":"*minorNumber* **.**"},{"content":"<bpt id=\"p1\">*</bpt>mainAssemblyName<ept id=\"p1\">*</ept> <bpt id=\"p2\">**</bpt>.dll<ept id=\"p2\">**</ept>","pos":[2770,2797],"source":"*mainAssemblyName* **.dll**"},{"content":"The <bpt id=\"p1\">*</bpt>keyPairFile<ept id=\"p1\">*</ept> argument is the name of the file containing the key pair.","pos":[2811,2886],"source":"The *keyPairFile* argument is the name of the file containing the key pair."},{"content":"You must sign the assembly and publisher policy assembly with the same key pair.","pos":[2887,2967]},{"pos":[2981,3084],"content":"The <bpt id=\"p1\">*</bpt>processorArchitecture<ept id=\"p1\">*</ept> argument identifies the platform targeted by a processor-specific assembly.","source":"The *processorArchitecture* argument identifies the platform targeted by a processor-specific assembly."},{"pos":[3100,3216],"content":"[!NOTE]\nThe ability to target a specific processor architecture is new in the .NET Framework version 2.0.","leadings":["","        >  "],"nodes":[{"content":"The ability to target a specific processor architecture is new in the .NET Framework version 2.0.","pos":[8,105]}]},{"pos":[3227,3519],"content":"The following command creates a publisher policy assembly called <ph id=\"ph1\">`policy.1.0.myAssembly`</ph> from a publisher policy file called <ph id=\"ph2\">`pub.config`</ph>, assigns a strong name to the assembly using the key pair in the <ph id=\"ph3\">`sgKey.snk`</ph> file, and specifies that the assembly targets the x86 processor architecture.","source":"The following command creates a publisher policy assembly called `policy.1.0.myAssembly` from a publisher policy file called `pub.config`, assigns a strong name to the assembly using the key pair in the `sgKey.snk` file, and specifies that the assembly targets the x86 processor architecture."},{"content":"The publisher policy assembly must match the processor architecture of the assembly that it applies to.","pos":[3643,3746]},{"content":"Thus, if your assembly has a <ph id=\"ph1\">&lt;xref:System.Reflection.AssemblyName.ProcessorArchitecture%2A&gt;</ph> value of <ph id=\"ph2\">&lt;xref:System.Reflection.ProcessorArchitecture.MSIL&gt;</ph>, the publisher policy assembly for that assembly must be created with <ph id=\"ph3\">`/platform:anycpu`</ph>.","pos":[3747,3989],"source":" Thus, if your assembly has a <xref:System.Reflection.AssemblyName.ProcessorArchitecture%2A> value of <xref:System.Reflection.ProcessorArchitecture.MSIL>, the publisher policy assembly for that assembly must be created with `/platform:anycpu`."},{"content":"You must provide a separate publisher policy assembly for each processor-specific assembly.","pos":[3990,4081]},{"content":"A consequence of this rule is that in order to change the processor architecture for an assembly, you must change the major or minor component of the version number, so that you can supply a new publisher policy assembly with the correct processor architecture.","pos":[4092,4353]},{"content":"The old publisher policy assembly cannot service your assembly once your assembly has a different processor architecture.","pos":[4354,4475]},{"content":"Another consequence is that the version 2.0 linker cannot be used to create a publisher policy assembly for an assembly compiled using earlier versions of the .NET Framework, because it always specifies processor architecture.","pos":[4486,4712]},{"pos":[4721,4786],"content":"Adding the Publisher Policy Assembly to the Global Assembly Cache","linkify":"Adding the Publisher Policy Assembly to the Global Assembly Cache","nodes":[{"content":"Adding the Publisher Policy Assembly to the Global Assembly Cache","pos":[0,65]}]},{"pos":[4790,4962],"content":"Use the <bpt id=\"p1\">[</bpt>Global Assembly Cache tool (Gacutil.exe)<ept id=\"p1\">](../../../docs/framework/tools/gacutil-exe-gac-tool.md)</ept> to add the publisher policy assembly to the global assembly cache.","source":"Use the [Global Assembly Cache tool (Gacutil.exe)](../../../docs/framework/tools/gacutil-exe-gac-tool.md) to add the publisher policy assembly to the global assembly cache."},{"pos":[4973,5038],"content":"To add the publisher policy assembly to the global assembly cache","linkify":"To add the publisher policy assembly to the global assembly cache","nodes":[{"content":"To add the publisher policy assembly to the global assembly cache","pos":[0,65]}]},{"content":"Type the following command at the command prompt:","pos":[5048,5097]},{"pos":[5108,5153],"content":"<bpt id=\"p1\">**</bpt>gacutil /i<ept id=\"p1\">**</ept>  <bpt id=\"p2\">*</bpt>publisherPolicyAssemblyFile<ept id=\"p2\">*</ept>","source":"**gacutil /i**  *publisherPolicyAssemblyFile*"},{"pos":[5164,5248],"content":"The following command adds <ph id=\"ph1\">`policy.1.0.myAssembly.dll`</ph> to the global assembly cache.","source":"The following command adds `policy.1.0.myAssembly.dll` to the global assembly cache."},{"pos":[5326,5512],"content":"[!IMPORTANT]\nThe publisher policy assembly cannot be added to the global assembly cache unless the original publisher policy file is located in the same directory as the assembly.","leadings":["","    >  "],"nodes":[{"content":"The publisher policy assembly cannot be added to the global assembly cache unless the original publisher policy file is located in the same directory as the assembly.","pos":[13,179]}]},{"pos":[5521,5529],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5533,5630],"content":"<bpt id=\"p1\">[</bpt>Programming with Assemblies<ept id=\"p1\">](../../../docs/framework/app-domains/programming-with-assemblies.md)</ept>","source":"[Programming with Assemblies](../../../docs/framework/app-domains/programming-with-assemblies.md)"},{"pos":[5633,5743],"content":"<bpt id=\"p1\">[</bpt>How the Runtime Locates Assemblies<ept id=\"p1\">](../../../docs/framework/deployment/how-the-runtime-locates-assemblies.md)</ept>","source":"[How the Runtime Locates Assemblies](../../../docs/framework/deployment/how-the-runtime-locates-assemblies.md)"},{"pos":[5746,5842],"content":"<bpt id=\"p1\">[</bpt>Configuring Apps by using Configuration Files<ept id=\"p1\">](../../../docs/framework/configure-apps/index.md)</ept>","source":"[Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md)"},{"pos":[5845,5939],"content":"<bpt id=\"p1\">[</bpt>Runtime Settings Schema<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/index.md)</ept>","source":"[Runtime Settings Schema](../../../docs/framework/configure-apps/file-schema/runtime/index.md)"},{"pos":[5942,6030],"content":"<bpt id=\"p1\">[</bpt>Configuration File Schema<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/index.md)</ept>","source":"[Configuration File Schema](../../../docs/framework/configure-apps/file-schema/index.md)"},{"pos":[6033,6134],"content":"<bpt id=\"p1\">[</bpt>Redirecting Assembly Versions<ept id=\"p1\">](../../../docs/framework/configure-apps/redirect-assembly-versions.md)</ept>","source":"[Redirecting Assembly Versions](../../../docs/framework/configure-apps/redirect-assembly-versions.md)"}]}