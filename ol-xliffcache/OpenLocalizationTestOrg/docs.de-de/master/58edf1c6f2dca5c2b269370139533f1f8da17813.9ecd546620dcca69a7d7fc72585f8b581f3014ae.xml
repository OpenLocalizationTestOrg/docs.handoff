{"content":"---\ntitle: \"How to: Create and Initialize Trace Listeners\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"initializing trace listeners\"\n  - \"trace listeners, creating\"\n  - \"trace listeners, initializing\"\n  - \"tracing [.NET Framework], trace listeners\"\n  - \"logs, trace listeners\"\nms.assetid: 21726de1-61ee-4fdc-9dd0-3be49324d066\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# How to: Create and Initialize Trace Listeners\nThe <xref:System.Diagnostics.Debug?displayProperty=nameWithType> and <xref:System.Diagnostics.Trace?displayProperty=nameWithType> classes send messages to objects called listeners that receive and process these messages. One such listener, the <xref:System.Diagnostics.DefaultTraceListener?displayProperty=nameWithType>, is automatically created and initialized when tracing or debugging is enabled. If you want <xref:System.Diagnostics.Trace> or <xref:System.Diagnostics.Debug> output to be directed to any additional sources, you must create and initialize additional trace listeners.  \n  \n The listeners you create should reflect your application's needs. For example, if you want a text record of all trace output, create a <xref:System.Diagnostics.TextWriterTraceListener> listener, which writes all output to a new text file when it is enabled. On the other hand, if you want to view output only during application execution, create a <xref:System.Diagnostics.ConsoleTraceListener> listener, which directs all output to a console window. The <xref:System.Diagnostics.EventLogTraceListener> can direct trace output to an event log. For more information, see [Trace Listeners](../../../docs/framework/debug-trace-profile/trace-listeners.md).  \n  \n You can create trace listeners in an [application configuration file](../../../docs/framework/configure-apps/index.md) or in your code. We recommend the use of application configuration files, because they let you add, modify, or remove trace listeners without having to change your code.  \n  \n### To create and use a trace listener by using a configuration file  \n  \n1.  Declare your trace listener in your application configuration file. If the listener you are creating requires any other objects, declare them as well. The following example shows how to create a listener called `myListener` that writes to the text file `TextWriterOutput.log`.  \n  \n    ```xml  \n    <configuration>  \n      <system.diagnostics>  \n        <trace autoflush=\"false\" indentsize=\"4\">  \n          <listeners>  \n            <add name=\"myListener\" type=\"System.Diagnostics.TextWriterTraceListener\" initializeData=\"TextWriterOutput.log\" />  \n            <remove name=\"Default\" />  \n          </listeners>  \n        </trace>  \n      </system.diagnostics>  \n    </configuration>  \n    ```  \n  \n2.  Use the <xref:System.Diagnostics.Trace> class in your code to write a message to the trace listeners.  \n  \n    ```vb  \n    Trace.TraceInformation(\"Test message.\")  \n    ' You must close or flush the trace to empty the output buffer.  \n    Trace.Flush()  \n    ```  \n  \n    ```csharp  \n    Trace.TraceInformation(\"Test message.\");  \n    // You must close or flush the trace to empty the output buffer.  \n    Trace.Flush();  \n    ```  \n  \n### To create and use a trace listener in code  \n  \n-   Add the trace listener to the <xref:System.Diagnostics.Trace.Listeners%2A> collection and send trace information to the listeners.  \n  \n    ```vb  \n    Trace.Listeners.Add(New TextWriterTraceListener(\"TextWriterOutput.log\", \"myListener\"))  \n    Trace.TraceInformation(\"Test message.\")  \n    ' You must close or flush the trace to empty the output buffer.  \n    Trace.Flush()  \n    ```  \n  \n    ```csharp  \n    Trace.Listeners.Add(new TextWriterTraceListener(\"TextWriterOutput.log\", \"myListener\"));  \n    Trace.TraceInformation(\"Test message.\");  \n    // You must close or flush the trace to empty the output buffer.  \n    Trace.Flush();  \n    ```  \n  \n     - or -  \n  \n-   If you do not want your listener to receive trace output, do not add it to the <xref:System.Diagnostics.Trace.Listeners%2A> collection. You can emit output through a listener independent of the <xref:System.Diagnostics.Trace.Listeners%2A> collection by calling the listener's own output methods. The following example shows how to write a line to a listener that is not in the <xref:System.Diagnostics.Trace.Listeners%2A> collection.  \n  \n    ```vb  \n    Dim myListener As New TextWriterTraceListener(\"TextWriterOutput.log\", \"myListener\")  \n    myListener.WriteLine(\"Test message.\")  \n    ' You must close or flush the trace listener to empty the output buffer.  \n    myListener.Flush()  \n    ```  \n  \n    ```csharp  \n    TextWriterTraceListener myListener = new TextWriterTraceListener(\"TextWriterOutput.log\", \"myListener\");  \n    myListener.WriteLine(\"Test message.\");  \n    // You must close or flush the trace listener to empty the output buffer.  \n    myListener.Flush();  \n    ```  \n  \n## See also\n\n- [Trace Listeners](../../../docs/framework/debug-trace-profile/trace-listeners.md)\n- [Trace Switches](../../../docs/framework/debug-trace-profile/trace-switches.md)\n- [How to: Add Trace Statements to Application Code](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md)\n- [Tracing and Instrumenting Applications](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)\n","nodes":[{"pos":[4,401],"embed":true,"restype":"x-metadata","content":"title: \"How to: Create and Initialize Trace Listeners\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"initializing trace listeners\"\n  - \"trace listeners, creating\"\n  - \"trace listeners, initializing\"\n  - \"tracing [.NET Framework], trace listeners\"\n  - \"logs, trace listeners\"\nms.assetid: 21726de1-61ee-4fdc-9dd0-3be49324d066\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"How to: Create and Initialize Trace Listeners","nodes":[{"pos":[0,45],"content":"How to: Create and Initialize Trace Listeners","nodes":[{"content":"How to: Create and Initialize Trace Listeners","pos":[0,45]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[408,453],"content":"How to: Create and Initialize Trace Listeners","linkify":"How to: Create and Initialize Trace Listeners","nodes":[{"content":"How to: Create and Initialize Trace Listeners","pos":[0,45]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Diagnostics.Debug?displayProperty=nameWithType&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Diagnostics.Trace?displayProperty=nameWithType&gt;</ph> classes send messages to objects called listeners that receive and process these messages.","pos":[454,674],"source":"The <xref:System.Diagnostics.Debug?displayProperty=nameWithType> and <xref:System.Diagnostics.Trace?displayProperty=nameWithType> classes send messages to objects called listeners that receive and process these messages."},{"content":"One such listener, the <ph id=\"ph1\">&lt;xref:System.Diagnostics.DefaultTraceListener?displayProperty=nameWithType&gt;</ph>, is automatically created and initialized when tracing or debugging is enabled.","pos":[675,853],"source":" One such listener, the <xref:System.Diagnostics.DefaultTraceListener?displayProperty=nameWithType>, is automatically created and initialized when tracing or debugging is enabled."},{"content":"If you want <ph id=\"ph1\">&lt;xref:System.Diagnostics.Trace&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Diagnostics.Debug&gt;</ph> output to be directed to any additional sources, you must create and initialize additional trace listeners.","pos":[854,1040],"source":" If you want <xref:System.Diagnostics.Trace> or <xref:System.Diagnostics.Debug> output to be directed to any additional sources, you must create and initialize additional trace listeners."},{"content":"The listeners you create should reflect your application's needs.","pos":[1047,1112]},{"content":"For example, if you want a text record of all trace output, create a <ph id=\"ph1\">&lt;xref:System.Diagnostics.TextWriterTraceListener&gt;</ph> listener, which writes all output to a new text file when it is enabled.","pos":[1113,1304],"source":" For example, if you want a text record of all trace output, create a <xref:System.Diagnostics.TextWriterTraceListener> listener, which writes all output to a new text file when it is enabled."},{"content":"On the other hand, if you want to view output only during application execution, create a <ph id=\"ph1\">&lt;xref:System.Diagnostics.ConsoleTraceListener&gt;</ph> listener, which directs all output to a console window.","pos":[1305,1497],"source":" On the other hand, if you want to view output only during application execution, create a <xref:System.Diagnostics.ConsoleTraceListener> listener, which directs all output to a console window."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Diagnostics.EventLogTraceListener&gt;</ph> can direct trace output to an event log.","pos":[1498,1590],"source":" The <xref:System.Diagnostics.EventLogTraceListener> can direct trace output to an event log."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Trace Listeners<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/trace-listeners.md)</ept>.","pos":[1591,1699],"source":" For more information, see [Trace Listeners](../../../docs/framework/debug-trace-profile/trace-listeners.md)."},{"content":"You can create trace listeners in an <bpt id=\"p1\">[</bpt>application configuration file<ept id=\"p1\">](../../../docs/framework/configure-apps/index.md)</ept> or in your code.","pos":[1706,1841],"source":"You can create trace listeners in an [application configuration file](../../../docs/framework/configure-apps/index.md) or in your code."},{"content":"We recommend the use of application configuration files, because they let you add, modify, or remove trace listeners without having to change your code.","pos":[1842,1994]},{"pos":[2004,2068],"content":"To create and use a trace listener by using a configuration file","linkify":"To create and use a trace listener by using a configuration file","nodes":[{"content":"To create and use a trace listener by using a configuration file","pos":[0,64]}]},{"content":"Declare your trace listener in your application configuration file.","pos":[2078,2145]},{"content":"If the listener you are creating requires any other objects, declare them as well.","pos":[2146,2228]},{"content":"The following example shows how to create a listener called <ph id=\"ph1\">`myListener`</ph> that writes to the text file <ph id=\"ph2\">`TextWriterOutput.log`</ph>.","pos":[2229,2354],"source":" The following example shows how to create a listener called `myListener` that writes to the text file `TextWriterOutput.log`."},{"pos":[2781,2882],"content":"Use the <ph id=\"ph1\">&lt;xref:System.Diagnostics.Trace&gt;</ph> class in your code to write a message to the trace listeners.","source":"Use the <xref:System.Diagnostics.Trace> class in your code to write a message to the trace listeners."},{"pos":[3221,3263],"content":"To create and use a trace listener in code","linkify":"To create and use a trace listener in code","nodes":[{"content":"To create and use a trace listener in code","pos":[0,42]}]},{"pos":[3273,3403],"content":"Add the trace listener to the <ph id=\"ph1\">&lt;xref:System.Diagnostics.Trace.Listeners%2A&gt;</ph> collection and send trace information to the listeners.","source":"Add the trace listener to the <xref:System.Diagnostics.Trace.Listeners%2A> collection and send trace information to the listeners."},{"content":"or -","pos":[3932,3936]},{"content":"If you do not want your listener to receive trace output, do not add it to the <ph id=\"ph1\">&lt;xref:System.Diagnostics.Trace.Listeners%2A&gt;</ph> collection.","pos":[3946,4081],"source":"If you do not want your listener to receive trace output, do not add it to the <xref:System.Diagnostics.Trace.Listeners%2A> collection."},{"content":"You can emit output through a listener independent of the <ph id=\"ph1\">&lt;xref:System.Diagnostics.Trace.Listeners%2A&gt;</ph> collection by calling the listener's own output methods.","pos":[4082,4241],"source":" You can emit output through a listener independent of the <xref:System.Diagnostics.Trace.Listeners%2A> collection by calling the listener's own output methods."},{"content":"The following example shows how to write a line to a listener that is not in the <ph id=\"ph1\">&lt;xref:System.Diagnostics.Trace.Listeners%2A&gt;</ph> collection.","pos":[4242,4379],"source":" The following example shows how to write a line to a listener that is not in the <xref:System.Diagnostics.Trace.Listeners%2A> collection."},{"pos":[4941,4949],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4953,5034],"content":"<bpt id=\"p1\">[</bpt>Trace Listeners<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/trace-listeners.md)</ept>","source":"[Trace Listeners](../../../docs/framework/debug-trace-profile/trace-listeners.md)"},{"pos":[5037,5116],"content":"<bpt id=\"p1\">[</bpt>Trace Switches<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/trace-switches.md)</ept>","source":"[Trace Switches](../../../docs/framework/debug-trace-profile/trace-switches.md)"},{"pos":[5119,5265],"content":"<bpt id=\"p1\">[</bpt>How to: Add Trace Statements to Application Code<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md)</ept>","source":"[How to: Add Trace Statements to Application Code](../../../docs/framework/debug-trace-profile/how-to-add-trace-statements-to-application-code.md)"},{"pos":[5268,5395],"content":"<bpt id=\"p1\">[</bpt>Tracing and Instrumenting Applications<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)</ept>","source":"[Tracing and Instrumenting Applications](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)"}]}