{"content":"---\ntitle: \"How to: Specify the Security Context for Services | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"Windows Service applications, security\"\n  - \"security [Visual Studio], contexts\"\n  - \"contexts, Visual Studio security\"\n  - \"security [Visual Studio], service applications\"\n  - \"ServiceProcessInstaller class, security context\"\n  - \"services, security\"\n  - \"ServiceInstaller class, security context\"\nms.assetid: 02187c7b-dbf2-45f2-96c2-e11010225a22\ncaps.latest.revision: 10\nauthor: \"ghogen\"\nms.author: \"ghogen\"\nmanager: \"douge\"\n---\n# How to: Specify the Security Context for Services\nBy default, services run in a different security context than that of the logged-in user. Services run in the context of the default system account, called `LocalSystem`, which gives them different access privileges to system resources than the user. You can change this behavior to specify a different user account under which your service should run.  \n  \n You set the security context by manipulating the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> property for the process within which the service runs. This property allows you to set the service to one of four account types:  \n  \n-   `User`, which causes the system to prompt for a valid user name and password when the service is installed and runs in the context of an account specified by a single user on the network;  \n  \n-   `LocalService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents anonymous credentials to any remote server;  \n  \n-   `LocalSystem`, which runs in the context of an account that provides extensive local privileges, and presents the computer's credentials to any remote server;  \n  \n-   `NetworkService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents the computer's credentials to any remote server.  \n  \n For more information, see the <xref:System.ServiceProcess.ServiceAccount> enumeration.  \n  \n### To specify the security context for a service  \n  \n1.  After creating your service, add the necessary installers for it. For more information, see [How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md).  \n  \n2.  In the designer, access the `ProjectInstaller` class and click the service process installer for the service you are working with.  \n  \n    > [!NOTE]\n    >  For every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains. In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>.  \n  \n3.  In the **Properties** window, set the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> to the appropriate value.  \n  \n## See Also  \n [Introduction to Windows Service Applications](../../../docs/framework/windows-services/introduction-to-windows-service-applications.md)   \n [How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)   \n [How to: Create Windows Services](../../../docs/framework/windows-services/how-to-create-windows-services.md)","nodes":[{"pos":[4,695],"nodes":[{"content":"How to: Specify the Security Context for Services | Microsoft Docs","nodes":[{"pos":[0,66],"content":"How to: Specify the Security Context for Services | Microsoft Docs","nodes":[{"content":"How to: Specify the Security Context for Services | Microsoft Docs","pos":[0,66]}]}],"pos":[6,75],"yaml":true}],"content":"title: \"How to: Specify the Security Context for Services | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"Windows Service applications, security\"\n  - \"security [Visual Studio], contexts\"\n  - \"contexts, Visual Studio security\"\n  - \"security [Visual Studio], service applications\"\n  - \"ServiceProcessInstaller class, security context\"\n  - \"services, security\"\n  - \"ServiceInstaller class, security context\"\nms.assetid: 02187c7b-dbf2-45f2-96c2-e11010225a22\ncaps.latest.revision: 10\nauthor: \"ghogen\"\nms.author: \"ghogen\"\nmanager: \"douge\"","yamlblock":true},{"pos":[702,751],"content":"How to: Specify the Security Context for Services","linkify":"How to: Specify the Security Context for Services","nodes":[{"content":"How to: Specify the Security Context for Services","pos":[0,49]}]},{"content":"By default, services run in a different security context than that of the logged-in user.","pos":[752,841]},{"content":"Services run in the context of the default system account, called <ph id=\"ph1\">`LocalSystem`</ph>, which gives them different access privileges to system resources than the user.","pos":[842,1002],"source":" Services run in the context of the default system account, called `LocalSystem`, which gives them different access privileges to system resources than the user."},{"content":"You can change this behavior to specify a different user account under which your service should run.","pos":[1003,1104]},{"content":"You set the security context by manipulating the <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A&gt;</ph> property for the process within which the service runs.","pos":[1111,1279],"source":"You set the security context by manipulating the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> property for the process within which the service runs."},{"content":"This property allows you to set the service to one of four account types:","pos":[1280,1353]},{"pos":[1363,1550],"content":"<ph id=\"ph1\">`User`</ph>, which causes the system to prompt for a valid user name and password when the service is installed and runs in the context of an account specified by a single user on the network;","source":"`User`, which causes the system to prompt for a valid user name and password when the service is installed and runs in the context of an account specified by a single user on the network;"},{"pos":[1560,1730],"content":"<ph id=\"ph1\">`LocalService`</ph>, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents anonymous credentials to any remote server;","source":"`LocalService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents anonymous credentials to any remote server;"},{"pos":[1740,1898],"content":"<ph id=\"ph1\">`LocalSystem`</ph>, which runs in the context of an account that provides extensive local privileges, and presents the computer's credentials to any remote server;","source":"`LocalSystem`, which runs in the context of an account that provides extensive local privileges, and presents the computer's credentials to any remote server;"},{"pos":[1908,2085],"content":"<ph id=\"ph1\">`NetworkService`</ph>, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents the computer's credentials to any remote server.","source":"`NetworkService`, which runs in the context of an account that acts as a non-privileged user on the local computer, and presents the computer's credentials to any remote server."},{"content":"For more information, see the <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceAccount&gt;</ph> enumeration.","pos":[2092,2178],"source":"For more information, see the <xref:System.ServiceProcess.ServiceAccount> enumeration."},{"pos":[2188,2233],"content":"To specify the security context for a service","linkify":"To specify the security context for a service","nodes":[{"content":"To specify the security context for a service","pos":[0,45]}]},{"content":"After creating your service, add the necessary installers for it.","pos":[2243,2308]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Add Installers to Your Service Application<ept id=\"p1\">](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)</ept>.","pos":[2309,2483],"source":" For more information, see [How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)."},{"pos":[2493,2623],"content":"In the designer, access the <ph id=\"ph1\">`ProjectInstaller`</ph> class and click the service process installer for the service you are working with.","source":"In the designer, access the `ProjectInstaller` class and click the service process installer for the service you are working with."},{"pos":[2635,2978],"content":"[!NOTE]\nFor every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains. In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>.","leadings":["","    >  "],"nodes":[{"content":"For every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains. In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>.","pos":[8,336],"nodes":[{"content":"For every service application, there are at least two installation components in the <ph id=\"ph1\">`ProjectInstaller`</ph> class — one that installs the processes for all services in the project, and one installer for each service the application contains.","pos":[0,237],"source":"For every service application, there are at least two installation components in the `ProjectInstaller` class — one that installs the processes for all services in the project, and one installer for each service the application contains."},{"content":"In this instance, you want to select <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceProcessInstaller&gt;</ph>.","pos":[238,328],"source":" In this instance, you want to select <xref:System.ServiceProcess.ServiceProcessInstaller>."}]}]},{"pos":[2988,3115],"content":"In the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> window, set the <ph id=\"ph1\">&lt;xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A&gt;</ph> to the appropriate value.","source":"In the **Properties** window, set the <xref:System.ServiceProcess.ServiceProcessInstaller.Account%2A> to the appropriate value."},{"pos":[3124,3132],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Introduction to Windows Service Applications<ept id=\"p1\">](../../../docs/framework/windows-services/introduction-to-windows-service-applications.md)</ept><ph id=\"ph1\"> </ph>","pos":[3136,3273],"source":"[Introduction to Windows Service Applications](../../../docs/framework/windows-services/introduction-to-windows-service-applications.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Add Installers to Your Service Application<ept id=\"p1\">](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md)</ept><ph id=\"ph1\"> </ph>","pos":[3277,3425],"source":"[How to: Add Installers to Your Service Application](../../../docs/framework/windows-services/how-to-add-installers-to-your-service-application.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Create Windows Services<ept id=\"p1\">](../../../docs/framework/windows-services/how-to-create-windows-services.md)</ept>","pos":[3429,3538],"source":"[How to: Create Windows Services](../../../docs/framework/windows-services/how-to-create-windows-services.md)"}]}