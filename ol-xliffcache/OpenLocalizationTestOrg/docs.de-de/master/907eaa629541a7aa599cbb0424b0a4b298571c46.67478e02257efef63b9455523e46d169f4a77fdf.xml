{"content":"---\ntitle: \"Imperative | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 4f7ce807-c0e4-407a-92a6-22abafb40b51\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Imperative\nThis sample demonstrates how to define a <<!--zz xref:System.ServiceModel.WsHttpBinding --> `xref:System.ServiceModel.WsHttpBinding`> for a service using code, instead of defining the `wsHttpBinding` binding in configuration. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n The following code demonstrates how to define a binding imperatively in code.  \n  \n```  \npublic static void Main()  \n{  \n    WSHttpBinding binding = new WSHttpBinding();  \n    binding.Name = \"binding1\";  \n    binding.HostNameComparisonMode =  \n        HostNameComparisonMode.StrongWildcard;  \n    binding.Security.Mode = SecurityMode.Message;  \n    binding.ReliableSession.Enabled = false;  \n    binding.TransactionFlow = false;  \n  \n    Uri baseAddress =   \n        new Uri(\"http://localhost:8000/servicemodelsamples/service\");  \n  \n    // Create a ServiceHost for the CalculatorService type and provide the base address.  \n    using(ServiceHost serviceHost = new ServiceHost(typeof(CalculatorService), baseAddress))  \n    {  \n        serviceHost.AddServiceEndpoint(typeof(ICalculator),   \n                                       binding, baseAddress);  \n        // Open the ServiceHostBase to create listeners and start listening for messages.  \n        serviceHost.Open();  \n  \n        // The service can now be accessed.  \n        Console.WriteLine(\"The service is ready.\");  \n        Console.WriteLine(\"Press <ENTER> to terminate service.\");  \n        Console.WriteLine();  \n        Console.ReadLine();  \n        // Close the ServiceHostBase to shutdown the service.  \n        serviceHost.Close();                        \n    }             \n}  \n  \n```  \n  \n The client creates a channel to communicate with the service as shown in the following sample code.  \n  \n```  \nWSHttpBinding binding = new WSHttpBinding();  \nbinding.Name = \"binding1\";  \nbinding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;  \nbinding.Security.Mode = SecurityMode.Message;  \nbinding.ReliableSession.Enabled = false;  \nbinding.TransactionFlow = false;  \n  \nString url = \"http://localhost:8000/servicemodelsamples/service\";  \nEndpointAddress address = new EndpointAddress(url);  \nChannelFactory<ICalculator> channelFactory = new ChannelFactory<ICalculator>(binding,address);  \nICalculator channel = channelFactory.CreateChannel();  \n  \n```  \n  \n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```  \n  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\Imperative`  \n  \n## See Also","nodes":[{"pos":[4,331],"embed":true,"restype":"x-metadata","content":"title: \"Imperative | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 4f7ce807-c0e4-407a-92a6-22abafb40b51\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"Imperative | Microsoft Docs","nodes":[{"pos":[0,27],"content":"Imperative | Microsoft Docs","nodes":[{"content":"Imperative | Microsoft Docs","pos":[0,27]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[338,348],"content":"Imperative","linkify":"Imperative","nodes":[{"content":"Imperative","pos":[0,10]}]},{"content":"This sample demonstrates how to define a &lt;","pos":[349,391],"source":"This sample demonstrates how to define a <"},{"content":"<ph id=\"ph1\">`xref:System.ServiceModel.WsHttpBinding`</ph>&gt; for a service using code, instead of defining the <ph id=\"ph2\">`wsHttpBinding`</ph> binding in configuration.","pos":[441,574],"source":"`xref:System.ServiceModel.WsHttpBinding`> for a service using code, instead of defining the `wsHttpBinding` binding in configuration."},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept> that implements a calculator service.","pos":[575,724],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service."},{"pos":[732,839],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The following code demonstrates how to define a binding imperatively in code.","pos":[846,923]},{"content":"The client creates a channel to communicate with the service as shown in the following sample code.","pos":[2208,2307]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[2886,2991]},{"content":"Press ENTER in the client window to shut down the client.","pos":[2992,3049]},{"pos":[3236,3272],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3282,3477],"content":"Be sure you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3487,3696],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[3706,3914],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[3922,4054],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[4108,4434],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4435,4485]},{"pos":[4567,4575],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}