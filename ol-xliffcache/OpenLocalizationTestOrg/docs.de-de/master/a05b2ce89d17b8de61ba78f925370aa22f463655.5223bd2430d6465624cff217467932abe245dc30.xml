{"content":"---\ntitle: \"Query Projections (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords:\n  - \"projection [WCF Data Services]\"\n  - \"WCF Data Services, projection\"\n  - \"query projection [WCF Data Services]\"\n  - \"WCF Data Services, querying\"\nms.assetid: a09f4985-9f0d-48c8-b183-83d67a3dfe5f\n---\n\n# Query Projections (WCF Data Services)\n\nProjection provides a mechanism in the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] to reduce the amount of data in the feed returned by a query by specifying that only certain properties of an entity are returned in the response. For more information, see [OData: Select System Query Option ($select)](https://go.microsoft.com/fwlink/?LinkId=186076).\n\nThis topic describes how to define a query projection, what the requirements are for entity and non-entity types, making updates to projected results, creating projected types, and lists some projection considerations.\n\n## Defining a Query Projection\n\nYou can add a projection clause to a query either by using the `$select` query option in a URI or by using the [select](~/docs/csharp/language-reference/keywords/select-clause.md) clause ([Select](~/docs/visual-basic/language-reference/queries/select-clause.md) in Visual Basic) in a LINQ query. Returned entity data can be projected into either entity types or non-entity types on the client. Examples in this topic demonstrate how to use the `select` clause in a LINQ query.\n\n> [!IMPORTANT]\n> Data loss might occur in the data service when you save updates that were made to projected types. For more information, see [Projection Considerations](#considerations).\n\n## Requirements for Entity and Non-Entity Types\n\nEntity types must have one or more identity properties that make up the entity key. Entity types are defined on clients in one of the following ways:\n\n- By applying the <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> to the type.\n\n- When the type has a property named `ID`.\n\n- When the type has a property named *type*`ID`, where *type* is the name of the type.\n\nBy default, when you project query results into a type defined at the client, the properties requested in the projection must exist in the client type. However, when you specify a value of `true` for the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, properties specified in the projection are not required to occur in the client type.\n\n### Making Updates to Projected Results\n\nWhen you project query results into entity types on the client, the <xref:System.Data.Services.Client.DataServiceContext> can track those objects with updates to be sent back to the data service when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called. However, updates that are made to data projected into non-entity types on the client cannot be sent back to the data service. This is because without a key to identify the entity instance, the data service cannot update the correct entity in the data source. Non-entity types are not attached to the <xref:System.Data.Services.Client.DataServiceContext>.\n\nWhen one or more properties of an entity type defined in the data service do not occur in the client type into which the entity is projected, inserts of new entities will not contain these missing properties. In this case, updates that are made to existing entities will **also** not include these missing properties. When a value exists for such a property, the update resets it to the default value for the property, as defined in the data source.\n\n### Creating Projected Types\n\nThe following example uses an anonymous LINQ query that projects the address-related properties of the `Customers` type into a new `CustomerAddress` type, which is defined on the client and is attributed as an entity type:\n\n[!code-csharp[Astoria Northwind Client#SelectCustomerAddressSpecific](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#selectcustomeraddressspecific)]\n[!code-vb[Astoria Northwind Client#SelectCustomerAddressSpecific](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#selectcustomeraddressspecific)]\n\nIn this example, the object initializer pattern is used to create a new instance of the `CustomerAddress` type instead of calling a constructor. Constructors are not supported when projecting into entity types, but they can be used when projecting into non-entity and anonymous types. Because `CustomerAddress` is an entity type, changes can be made and sent back to the data service.\n\nAlso, the data from the `Customer` type is projected into an instance of the `CustomerAddress` entity type instead of an anonymous type. Projection into anonymous types is supported, but the data is read-only because anonymous types are treated as non-entity types.\n\nThe <xref:System.Data.Services.Client.MergeOption> settings of the <xref:System.Data.Services.Client.DataServiceContext> are used for identity resolution during query projection. This means that if an instance of the `Customer` type already exists in the <xref:System.Data.Services.Client.DataServiceContext>, an instance of `CustomerAddress` with the same identity will follow the identity resolution rules set by the <xref:System.Data.Services.Client.MergeOption>\n\nThe following describes the behaviors when projecting results into entity and non-entity types:\n\n**Creating a new projected instance by using initializers**\n\n- Example:\n\n   [!code-csharp[Astoria Northwind Client#ProjectWithInitializer](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#projectwithinitializer)]\n   [!code-vb[Astoria Northwind Client#ProjectWithInitializer](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#projectwithinitializer)]\n\n- Entity type: Supported\n\n- Non-entity type: Supported\n\n**Creating a new projected instance by using constructors**\n\n- Example:\n\n   [!code-csharp[Astoria Northwind Client#ProjectWithConstructor](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#projectwithconstructor)]\n   [!code-vb[Astoria Northwind Client#ProjectWithConstructor](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#projectwithconstructor)]\n\n- Entity type: A <xref:System.NotSupportedException> is raised.\n\n- Non-entity type: Supported\n\n**Using projection to transform a property value**\n\n- Example:\n\n   [!code-csharp[Astoria Northwind Client#ProjectWithTransform](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#projectwithtransform)]\n   [!code-vb[Astoria Northwind Client#ProjectWithTransform](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#projectwithtransform)]\n\n- Entity type: This transformation is not supported for entity types because it can lead to confusion and potentially overwriting the data in the data source that belongs to another entity. A <xref:System.NotSupportedException> is raised.\n\n- Non-entity type: Supported\n\n<a name=\"considerations\"></a>\n\n## Projection Considerations\n\nThe following additional considerations apply when defining a query projection.\n\n- When you define custom feeds for the Atom format, you must make sure that all entity properties that have custom mappings defined are included in the projection. When a mapped entity property is not included in the projection, data loss might occur. For more information, see [Feed Customization](../../../../docs/framework/data/wcf/feed-customization-wcf-data-services.md).\n\n- When inserts are made to a projected type that does not contain all of the properties of the entity in the data model of the data service, the properties not included in the projection at the client are set to their default values.\n\n- When updates are made to a projected type that does not contain all of the properties of the entity in the data model of the data service, existing values not included in the projection on the client will be overwritten with uninitialized default values.\n\n- When a projection includes a complex property, the entire complex object must be returned.\n\n- When a projection includes a navigation property, the related objects are loaded implicitly without having to call the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method. The <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method is not supported for use in a projected query.\n\n- Query projections queries on the client are translated to use the `$select` query option in the request URI. When a query with projection is executed against a previous version of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] that does not support the `$select` query option, an error is returned. This can also happen when the <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> of the <xref:System.Data.Services.DataServiceBehavior> for the data service is set to a value of <xref:System.Data.Services.Common.DataServiceProtocolVersion.V1>. For more information, see [Data Service Versioning](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).\n\nFor more information, see [How to: Project Query Results](../../../../docs/framework/data/wcf/how-to-project-query-results-wcf-data-services.md).\n\n## See also\n\n- [Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)\n","nodes":[{"pos":[4,325],"embed":true,"restype":"x-metadata","content":"title: \"Query Projections (WCF Data Services)\"\nms.date: \"03/30/2017\"\ndev_langs:\n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords:\n  - \"projection [WCF Data Services]\"\n  - \"WCF Data Services, projection\"\n  - \"query projection [WCF Data Services]\"\n  - \"WCF Data Services, querying\"\nms.assetid: a09f4985-9f0d-48c8-b183-83d67a3dfe5f","nodes":[{"content":"Query Projections (WCF Data Services)","nodes":[{"pos":[0,37],"content":"Query Projections (WCF Data Services)","nodes":[{"content":"Query Projections (WCF Data Services)","pos":[0,37]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[333,370],"content":"Query Projections (WCF Data Services)","linkify":"Query Projections (WCF Data Services)","nodes":[{"content":"Query Projections (WCF Data Services)","pos":[0,37]}]},{"content":"Projection provides a mechanism in the <ph id=\"ph1\">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</ph> to reduce the amount of data in the feed returned by a query by specifying that only certain properties of an entity are returned in the response.","pos":[372,621],"source":"Projection provides a mechanism in the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] to reduce the amount of data in the feed returned by a query by specifying that only certain properties of an entity are returned in the response."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>OData: Select System Query Option ($select)<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=186076)</ept>.","pos":[622,742],"source":" For more information, see [OData: Select System Query Option ($select)](https://go.microsoft.com/fwlink/?LinkId=186076)."},{"content":"This topic describes how to define a query projection, what the requirements are for entity and non-entity types, making updates to projected results, creating projected types, and lists some projection considerations.","pos":[744,962]},{"pos":[967,994],"content":"Defining a Query Projection","linkify":"Defining a Query Projection","nodes":[{"content":"Defining a Query Projection","pos":[0,27]}]},{"content":"You can add a projection clause to a query either by using the <ph id=\"ph1\">`$select`</ph> query option in a URI or by using the <bpt id=\"p1\">[</bpt>select<ept id=\"p1\">](~/docs/csharp/language-reference/keywords/select-clause.md)</ept> clause (<bpt id=\"p2\">[</bpt>Select<ept id=\"p2\">](~/docs/visual-basic/language-reference/queries/select-clause.md)</ept> in Visual Basic) in a LINQ query.","pos":[996,1291],"source":"You can add a projection clause to a query either by using the `$select` query option in a URI or by using the [select](~/docs/csharp/language-reference/keywords/select-clause.md) clause ([Select](~/docs/visual-basic/language-reference/queries/select-clause.md) in Visual Basic) in a LINQ query."},{"content":"Returned entity data can be projected into either entity types or non-entity types on the client.","pos":[1292,1389]},{"content":"Examples in this topic demonstrate how to use the <ph id=\"ph1\">`select`</ph> clause in a LINQ query.","pos":[1390,1472],"source":" Examples in this topic demonstrate how to use the `select` clause in a LINQ query."},{"pos":[1476,1661],"content":"[!IMPORTANT]\nData loss might occur in the data service when you save updates that were made to projected types. For more information, see [Projection Considerations](#considerations).","leadings":["","> "],"nodes":[{"content":"Data loss might occur in the data service when you save updates that were made to projected types. For more information, see [Projection Considerations](#considerations).","pos":[13,183],"nodes":[{"content":"Data loss might occur in the data service when you save updates that were made to projected types.","pos":[0,98]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Projection Considerations<ept id=\"p1\">](#considerations)</ept>.","pos":[99,170],"source":" For more information, see [Projection Considerations](#considerations)."}]}]},{"pos":[1666,1710],"content":"Requirements for Entity and Non-Entity Types","linkify":"Requirements for Entity and Non-Entity Types","nodes":[{"content":"Requirements for Entity and Non-Entity Types","pos":[0,44]}]},{"content":"Entity types must have one or more identity properties that make up the entity key.","pos":[1712,1795]},{"content":"Entity types are defined on clients in one of the following ways:","pos":[1796,1861]},{"pos":[1865,2017],"content":"By applying the <ph id=\"ph1\">&lt;xref:System.Data.Services.Common.DataServiceKeyAttribute&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Data.Services.Common.DataServiceEntityAttribute&gt;</ph> to the type.","source":"By applying the <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> to the type."},{"pos":[2021,2061],"content":"When the type has a property named <ph id=\"ph1\">`ID`</ph>.","source":"When the type has a property named `ID`."},{"pos":[2065,2149],"content":"When the type has a property named <bpt id=\"p1\">*</bpt>type<ept id=\"p1\">*</ept><ph id=\"ph1\">`ID`</ph>, where <bpt id=\"p2\">*</bpt>type<ept id=\"p2\">*</ept> is the name of the type.","source":"When the type has a property named *type*`ID`, where *type* is the name of the type."},{"content":"By default, when you project query results into a type defined at the client, the properties requested in the projection must exist in the client type.","pos":[2151,2302]},{"content":"However, when you specify a value of <ph id=\"ph1\">`true`</ph> for the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A&gt;</ph> property of the <ph id=\"ph3\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>, properties specified in the projection are not required to occur in the client type.","pos":[2303,2591],"source":" However, when you specify a value of `true` for the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, properties specified in the projection are not required to occur in the client type."},{"pos":[2597,2632],"content":"Making Updates to Projected Results","linkify":"Making Updates to Projected Results","nodes":[{"content":"Making Updates to Projected Results","pos":[0,35]}]},{"content":"When you project query results into entity types on the client, the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> can track those objects with updates to be sent back to the data service when the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A&gt;</ph> method is called.","pos":[2634,2924],"source":"When you project query results into entity types on the client, the <xref:System.Data.Services.Client.DataServiceContext> can track those objects with updates to be sent back to the data service when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called."},{"content":"However, updates that are made to data projected into non-entity types on the client cannot be sent back to the data service.","pos":[2925,3050]},{"content":"This is because without a key to identify the entity instance, the data service cannot update the correct entity in the data source.","pos":[3051,3183]},{"content":"Non-entity types are not attached to the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>.","pos":[3184,3279],"source":" Non-entity types are not attached to the <xref:System.Data.Services.Client.DataServiceContext>."},{"content":"When one or more properties of an entity type defined in the data service do not occur in the client type into which the entity is projected, inserts of new entities will not contain these missing properties.","pos":[3281,3489]},{"content":"In this case, updates that are made to existing entities will <bpt id=\"p1\">**</bpt>also<ept id=\"p1\">**</ept> not include these missing properties.","pos":[3490,3598],"source":" In this case, updates that are made to existing entities will **also** not include these missing properties."},{"content":"When a value exists for such a property, the update resets it to the default value for the property, as defined in the data source.","pos":[3599,3730]},{"pos":[3736,3760],"content":"Creating Projected Types","linkify":"Creating Projected Types","nodes":[{"content":"Creating Projected Types","pos":[0,24]}]},{"pos":[3762,3984],"content":"The following example uses an anonymous LINQ query that projects the address-related properties of the <ph id=\"ph1\">`Customers`</ph> type into a new <ph id=\"ph2\">`CustomerAddress`</ph> type, which is defined on the client and is attributed as an entity type:","source":"The following example uses an anonymous LINQ query that projects the address-related properties of the `Customers` type into a new `CustomerAddress` type, which is defined on the client and is attributed as an entity type:"},{"content":"In this example, the object initializer pattern is used to create a new instance of the <ph id=\"ph1\">`CustomerAddress`</ph> type instead of calling a constructor.","pos":[4354,4498],"source":"In this example, the object initializer pattern is used to create a new instance of the `CustomerAddress` type instead of calling a constructor."},{"content":"Constructors are not supported when projecting into entity types, but they can be used when projecting into non-entity and anonymous types.","pos":[4499,4638]},{"content":"Because <ph id=\"ph1\">`CustomerAddress`</ph> is an entity type, changes can be made and sent back to the data service.","pos":[4639,4738],"source":" Because `CustomerAddress` is an entity type, changes can be made and sent back to the data service."},{"content":"Also, the data from the <ph id=\"ph1\">`Customer`</ph> type is projected into an instance of the <ph id=\"ph2\">`CustomerAddress`</ph> entity type instead of an anonymous type.","pos":[4740,4876],"source":"Also, the data from the `Customer` type is projected into an instance of the `CustomerAddress` entity type instead of an anonymous type."},{"content":"Projection into anonymous types is supported, but the data is read-only because anonymous types are treated as non-entity types.","pos":[4877,5005]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.MergeOption&gt;</ph> settings of the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph> are used for identity resolution during query projection.","pos":[5007,5185],"source":"The <xref:System.Data.Services.Client.MergeOption> settings of the <xref:System.Data.Services.Client.DataServiceContext> are used for identity resolution during query projection."},{"content":"This means that if an instance of the <ph id=\"ph1\">`Customer`</ph> type already exists in the <ph id=\"ph2\">&lt;xref:System.Data.Services.Client.DataServiceContext&gt;</ph>, an instance of <ph id=\"ph3\">`CustomerAddress`</ph> with the same identity will follow the identity resolution rules set by the <ph id=\"ph4\">&lt;xref:System.Data.Services.Client.MergeOption&gt;</ph>","pos":[5186,5472],"source":" This means that if an instance of the `Customer` type already exists in the <xref:System.Data.Services.Client.DataServiceContext>, an instance of `CustomerAddress` with the same identity will follow the identity resolution rules set by the <xref:System.Data.Services.Client.MergeOption>"},{"content":"The following describes the behaviors when projecting results into entity and non-entity types:","pos":[5474,5569]},{"pos":[5571,5630],"content":"<bpt id=\"p1\">**</bpt>Creating a new projected instance by using initializers<ept id=\"p1\">**</ept>","source":"**Creating a new projected instance by using initializers**"},{"content":"Example:","pos":[5634,5642]},{"pos":[5647,5988],"content":"[!code-csharp[Astoria Northwind Client#ProjectWithInitializer](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#projectwithinitializer)]\n [!code-vb[Astoria Northwind Client#ProjectWithInitializer](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#projectwithinitializer)]","leadings":["","  "],"nodes":[]},{"content":"Entity type: Supported","pos":[5992,6014]},{"content":"Non-entity type: Supported","pos":[6018,6044]},{"pos":[6046,6105],"content":"<bpt id=\"p1\">**</bpt>Creating a new projected instance by using constructors<ept id=\"p1\">**</ept>","source":"**Creating a new projected instance by using constructors**"},{"content":"Example:","pos":[6109,6117]},{"pos":[6122,6463],"content":"[!code-csharp[Astoria Northwind Client#ProjectWithConstructor](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#projectwithconstructor)]\n [!code-vb[Astoria Northwind Client#ProjectWithConstructor](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#projectwithconstructor)]","leadings":["","  "],"nodes":[]},{"pos":[6467,6528],"content":"Entity type: A <ph id=\"ph1\">&lt;xref:System.NotSupportedException&gt;</ph> is raised.","source":"Entity type: A <xref:System.NotSupportedException> is raised."},{"content":"Non-entity type: Supported","pos":[6532,6558]},{"pos":[6560,6610],"content":"<bpt id=\"p1\">**</bpt>Using projection to transform a property value<ept id=\"p1\">**</ept>","source":"**Using projection to transform a property value**"},{"content":"Example:","pos":[6614,6622]},{"pos":[6627,6960],"content":"[!code-csharp[Astoria Northwind Client#ProjectWithTransform](~/samples/snippets/csharp/VS_Snippets_Misc/astoria northwind client/cs/source.cs#projectwithtransform)]\n [!code-vb[Astoria Northwind Client#ProjectWithTransform](~/samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind client/vb/source.vb#projectwithtransform)]","leadings":["","  "],"nodes":[]},{"content":"Entity type: This transformation is not supported for entity types because it can lead to confusion and potentially overwriting the data in the data source that belongs to another entity.","pos":[6964,7151]},{"content":"A <ph id=\"ph1\">&lt;xref:System.NotSupportedException&gt;</ph> is raised.","pos":[7152,7200],"source":" A <xref:System.NotSupportedException> is raised."},{"content":"Non-entity type: Supported","pos":[7204,7230]},{"pos":[7266,7291],"content":"Projection Considerations","linkify":"Projection Considerations","nodes":[{"content":"Projection Considerations","pos":[0,25]}]},{"content":"The following additional considerations apply when defining a query projection.","pos":[7293,7372]},{"content":"When you define custom feeds for the Atom format, you must make sure that all entity properties that have custom mappings defined are included in the projection.","pos":[7376,7537]},{"content":"When a mapped entity property is not included in the projection, data loss might occur.","pos":[7538,7625]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Feed Customization<ept id=\"p1\">](../../../../docs/framework/data/wcf/feed-customization-wcf-data-services.md)</ept>.","pos":[7626,7750],"source":" For more information, see [Feed Customization](../../../../docs/framework/data/wcf/feed-customization-wcf-data-services.md)."},{"content":"When inserts are made to a projected type that does not contain all of the properties of the entity in the data model of the data service, the properties not included in the projection at the client are set to their default values.","pos":[7754,7985]},{"content":"When updates are made to a projected type that does not contain all of the properties of the entity in the data model of the data service, existing values not included in the projection on the client will be overwritten with uninitialized default values.","pos":[7989,8243]},{"content":"When a projection includes a complex property, the entire complex object must be returned.","pos":[8247,8337]},{"content":"When a projection includes a navigation property, the related objects are loaded implicitly without having to call the <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A&gt;</ph> method.","pos":[8341,8533],"source":"When a projection includes a navigation property, the related objects are loaded implicitly without having to call the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A&gt;</ph> method is not supported for use in a projected query.","pos":[8534,8657],"source":" The <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method is not supported for use in a projected query."},{"content":"Query projections queries on the client are translated to use the <ph id=\"ph1\">`$select`</ph> query option in the request URI.","pos":[8661,8769],"source":"Query projections queries on the client are translated to use the `$select` query option in the request URI."},{"content":"When a query with projection is executed against a previous version of <ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> that does not support the <ph id=\"ph2\">`$select`</ph> query option, an error is returned.","pos":[8770,8972],"source":" When a query with projection is executed against a previous version of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] that does not support the `$select` query option, an error is returned."},{"content":"This can also happen when the <ph id=\"ph1\">&lt;xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A&gt;</ph> of the <ph id=\"ph2\">&lt;xref:System.Data.Services.DataServiceBehavior&gt;</ph> for the data service is set to a value of <ph id=\"ph3\">&lt;xref:System.Data.Services.Common.DataServiceProtocolVersion.V1&gt;</ph>.","pos":[8973,9235],"source":" This can also happen when the <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> of the <xref:System.Data.Services.DataServiceBehavior> for the data service is set to a value of <xref:System.Data.Services.Common.DataServiceProtocolVersion.V1>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Data Service Versioning<ept id=\"p1\">](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md)</ept>.","pos":[9236,9370],"source":" For more information, see [Data Service Versioning](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md)."},{"pos":[9372,9517],"content":"For more information, see <bpt id=\"p1\">[</bpt>How to: Project Query Results<ept id=\"p1\">](../../../../docs/framework/data/wcf/how-to-project-query-results-wcf-data-services.md)</ept>.","source":"For more information, see [How to: Project Query Results](../../../../docs/framework/data/wcf/how-to-project-query-results-wcf-data-services.md)."},{"pos":[9522,9530],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[9534,9645],"content":"<bpt id=\"p1\">[</bpt>Querying the Data Service<ept id=\"p1\">](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)</ept>","source":"[Querying the Data Service](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)"}]}