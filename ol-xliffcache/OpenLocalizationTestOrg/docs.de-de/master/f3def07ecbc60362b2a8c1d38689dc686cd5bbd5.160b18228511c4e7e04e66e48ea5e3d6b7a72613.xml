{"content":"---\ntitle: \"Programming Model Item Tree\"\nms.date: \"03/30/2017\"\nms.assetid: 0229efde-19ac-4bdc-a187-c6227a7bd1a5\n---\n# Programming Model Item Tree\nThis sample demonstrates how to navigate the <xref:System.Activities.Presentation.Model.ModelItem> tree using declarative data binding from the Windows Presentation Foundation (WPF) Tree View.\n\n## Sample Details\n The <xref:System.Activities.Presentation.Model.ModelItem> tree is the abstraction that is used by the [!INCLUDE[wfd1](../../../../includes/wfd1-md.md)] infrastructure to expose the data about the underlying instance being edited. The following illustration is a depiction of the various layers of infrastructure within the [!INCLUDE[wfd2](../../../../includes/wfd2-md.md)].\n\n ![Diagram that shows the Workflow Designer architecture.](./media/programming-model-item-tree/workflow-designer-architecture.jpg)\n\n A <xref:System.Activities.Presentation.Model.ModelItem> consists of a pointer to the underlying value, as well as a collection of <xref:System.Activities.Presentation.Model.ModelProperty> objects. A <xref:System.Activities.Presentation.Model.ModelProperty> object in turn, consists of data such as the name and type of the property and then a pointer to the value, which in turn, is another <xref:System.Activities.Presentation.Model.ModelItem>. A value converter is used to manipulate some of the <xref:System.Activities.Presentation.Model.ModelItem>s returned from a <xref:System.Activities.Presentation.Model.ModelProperty> to make them appear correctly in the tree view. The sample then demonstrates how to imperatively program against the <xref:System.Activities.Presentation.Model.ModelItem> tree using the imperative syntax, as seen in the following example.\n\n```csharp\nModelItem mi = wd.Context.Services.GetService<ModelService>().Root;\nModelProperty mp = mi.Properties[\"Activities\"];\nmp.Collection.Add(new Persist());\nModelItem justAdded = mp.Collection.Last();\njustAdded.Properties[\"DisplayName\"].SetValue(\"new name\");\n```\n\n#### To use this sample\n\n1.  Open the ProgrammingModelItemTree.sln solution in Visual Studio 2010.\n\n2.  Build the solution by selecting **Build Solution** from the **Build** menu.\n\n3.  Press F5 to run the application. The [!INCLUDE[avalon2](../../../../includes/avalon2-md.md)] form is then displayed.\n\n4.  Click the **Load WF** button to load the <xref:System.Activities.Presentation.Model.ModelItem> and bind it to the tree view.\n\n5.  Clicking the **Change Model Item Tree** button executes the preceding code to add an item into the tree and set a property.\n\n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Designer\\ProgrammingModelItemTree`  \n  \n## See also\n\n- <xref:System.Windows.Data.IValueConverter>\n","nodes":[{"pos":[4,111],"embed":true,"restype":"x-metadata","content":"title: \"Programming Model Item Tree\"\nms.date: \"03/30/2017\"\nms.assetid: 0229efde-19ac-4bdc-a187-c6227a7bd1a5","nodes":[{"content":"Programming Model Item Tree","nodes":[{"pos":[0,27],"content":"Programming Model Item Tree","nodes":[{"content":"Programming Model Item Tree","pos":[0,27]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[118,145],"content":"Programming Model Item Tree","linkify":"Programming Model Item Tree","nodes":[{"content":"Programming Model Item Tree","pos":[0,27]}]},{"pos":[146,338],"content":"This sample demonstrates how to navigate the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree using declarative data binding from the Windows Presentation Foundation (WPF) Tree View.","source":"This sample demonstrates how to navigate the <xref:System.Activities.Presentation.Model.ModelItem> tree using declarative data binding from the Windows Presentation Foundation (WPF) Tree View."},{"pos":[343,357],"content":"Sample Details","linkify":"Sample Details","nodes":[{"content":"Sample Details","pos":[0,14]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree is the abstraction that is used by the <ph id=\"ph2\">[!INCLUDE[wfd1](../../../../includes/wfd1-md.md)]</ph> infrastructure to expose the data about the underlying instance being edited.","pos":[359,588],"source":"The <xref:System.Activities.Presentation.Model.ModelItem> tree is the abstraction that is used by the [!INCLUDE[wfd1](../../../../includes/wfd1-md.md)] infrastructure to expose the data about the underlying instance being edited."},{"content":"The following illustration is a depiction of the various layers of infrastructure within the <ph id=\"ph1\">[!INCLUDE[wfd2](../../../../includes/wfd2-md.md)]</ph>.","pos":[589,732],"source":" The following illustration is a depiction of the various layers of infrastructure within the [!INCLUDE[wfd2](../../../../includes/wfd2-md.md)]."},{"content":"Diagram that shows the Workflow Designer architecture.","pos":[737,791]},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> consists of a pointer to the underlying value, as well as a collection of <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelProperty&gt;</ph> objects.","pos":[867,1063],"source":"A <xref:System.Activities.Presentation.Model.ModelItem> consists of a pointer to the underlying value, as well as a collection of <xref:System.Activities.Presentation.Model.ModelProperty> objects."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelProperty&gt;</ph> object in turn, consists of data such as the name and type of the property and then a pointer to the value, which in turn, is another <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph>.","pos":[1064,1312],"source":" A <xref:System.Activities.Presentation.Model.ModelProperty> object in turn, consists of data such as the name and type of the property and then a pointer to the value, which in turn, is another <xref:System.Activities.Presentation.Model.ModelItem>."},{"content":"A value converter is used to manipulate some of the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph>s returned from a <ph id=\"ph2\">&lt;xref:System.Activities.Presentation.Model.ModelProperty&gt;</ph> to make them appear correctly in the tree view.","pos":[1313,1541],"source":" A value converter is used to manipulate some of the <xref:System.Activities.Presentation.Model.ModelItem>s returned from a <xref:System.Activities.Presentation.Model.ModelProperty> to make them appear correctly in the tree view."},{"content":"The sample then demonstrates how to imperatively program against the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> tree using the imperative syntax, as seen in the following example.","pos":[1542,1732],"source":" The sample then demonstrates how to imperatively program against the <xref:System.Activities.Presentation.Model.ModelItem> tree using the imperative syntax, as seen in the following example."},{"pos":[2006,2024],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"content":"Open the ProgrammingModelItemTree.sln solution in Visual Studio 2010.","pos":[2030,2099]},{"pos":[2105,2180],"content":"Build the solution by selecting <bpt id=\"p1\">**</bpt>Build Solution<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>Build<ept id=\"p2\">**</ept> menu.","source":"Build the solution by selecting **Build Solution** from the **Build** menu."},{"content":"Press F5 to run the application.","pos":[2186,2218]},{"content":"The <ph id=\"ph1\">[!INCLUDE[avalon2](../../../../includes/avalon2-md.md)]</ph> form is then displayed.","pos":[2219,2302],"source":" The [!INCLUDE[avalon2](../../../../includes/avalon2-md.md)] form is then displayed."},{"pos":[2308,2432],"content":"Click the <bpt id=\"p1\">**</bpt>Load WF<ept id=\"p1\">**</ept> button to load the <ph id=\"ph1\">&lt;xref:System.Activities.Presentation.Model.ModelItem&gt;</ph> and bind it to the tree view.","source":"Click the **Load WF** button to load the <xref:System.Activities.Presentation.Model.ModelItem> and bind it to the tree view."},{"pos":[2438,2561],"content":"Clicking the <bpt id=\"p1\">**</bpt>Change Model Item Tree<ept id=\"p1\">**</ept> button executes the preceding code to add an item into the tree and set a property.","source":"Clicking the **Change Model Item Tree** button executes the preceding code to add an item into the tree and set a property."},{"pos":[2565,2698],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[14,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[0,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2752,3062],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3063,3113]},{"pos":[3208,3216],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]}]}