{"content":"---\ntitle: \"WS Dual Http\"\nms.date: \"03/30/2017\"\nms.assetid: 9997eba5-29ec-48db-86f3-fa77b241fb1a\n---\n# WS Dual Http\nThe Dual Http sample demonstrates how to configure the `WSDualHttpBinding` binding. This sample consists of a client console program (.exe) and a service library (.dll) hosted by Internet Information Services (IIS). The service implements a duplex contract. The contract is defined by the `ICalculatorDuplex` interface, which exposes math operations (Add, Subtract, Multiply, and Divide). In this sample, the `ICalculatorDuplex` interface allows the client to perform math operations, calculating a running result over the session. Independently, the service returns results on the `ICalculatorDuplexCallback` interface. A duplex contract requires a session, because a context must be established to correlate the set of messages being sent between client and service. The `WSDualHttpBinding` binding supports duplex communication.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Binding\\WS\\DualHttp`  \n  \n To configure a service endpoint with the `WSDualHttpBinding`, specify the binding in the endpoint configuration as shown.  \n  \n```xml  \n<endpoint address=\"\"  \n         binding=\"wsDualHttpBinding\"  \n         contract=\"Microsoft.ServiceModel.Samples.ICalculatorDuplex\" />  \n```  \n  \n On the client, you must configure an address that the server can use to connect to the client as shown in the following sample configuration.  \n  \n```xml  \n<system.serviceModel>  \n  <client>  \n    <endpoint address=  \n         \"http://localhost/servicemodelsamples/service.svc\"   \n         binding=\"wsDualHttpBinding\"   \n         bindingConfiguration=\"Binding1\"   \n         contract=\"Microsoft.ServiceModel.Samples.ICalculatorDuplex\" />  \n  </client>  \n  \n  <bindings>  \n    <!-- Configure a WSDualHttpBinding that supports duplex -->  \n    <!-- communication. -->  \n    <wsDualHttpBinding>  \n      <binding name=\"Binding1\"  \n               clientBaseAddress=\"http://localhost:8000/myClient/\"  \n               useDefaultWebProxy=\"true\"  \n               bypassProxyOnLocal=\"false\">  \n      </binding>  \n    </wsDualHttpBinding>  \n  </bindings>  \n</system.serviceModel>  \n```  \n  \n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```  \nPress <ENTER> to terminate client once the output is displayed.  \n  \nResult(100)  \nResult(50)  \nResult(882.5)  \nResult(441.25)  \nEquation(0 + 100 - 50 * 17.65 / 2 = 441.25)  \n```  \n  \n When you run the sample, you see the messages returned to the client on the callback interface sent from the service. Each intermediate result is displayed, followed by the entire equation upon completion of all operations. Press ENTER to shut down the client.  \n  \n### To set up, build, and run the sample  \n  \n1.  Install [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 4.0 using the following command.  \n  \n    ```  \n    %windir%\\Microsoft.NET\\Framework\\v4.0.XXXXX\\aspnet_regiis.exe /i /enable  \n    ```  \n  \n2.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n3.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n4.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n    > [!IMPORTANT]\n    >  When running the client in a cross-machine configuration, be sure to replace localhost in both the `address` attribute of the [\\<endpoint> of \\<client>](../../configure-apps/file-schema/wcf/endpoint-of-client.md) element and the `clientBaseAddress` attribute of the [\\<binding>](../../../../docs/framework/misc/binding.md) element of the [\\<wsDualHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsdualhttpbinding.md) element with the name of the appropriate machine, as shown:  \n  \n    ```xml  \n    <client>  \n        <endpoint name = \"\"  \n          address=  \n         \"http://service_machine_name/servicemodelsamples/service.svc\"  \n        />  \n    </client>  \n    ...  \n    <wsDualHttpBinding>  \n        <binding name=\"DuplexBinding\" clientBaseAddress=  \n            \"http://client_machine_name:8000/myClient/\">  \n        </binding>  \n    </wsDualHttpBinding>  \n    ```  \n","nodes":[{"pos":[4,96],"embed":true,"restype":"x-metadata","content":"title: \"WS Dual Http\"\nms.date: \"03/30/2017\"\nms.assetid: 9997eba5-29ec-48db-86f3-fa77b241fb1a","nodes":[{"content":"WS Dual Http","nodes":[{"pos":[0,12],"content":"WS Dual Http","nodes":[{"content":"WS Dual Http","pos":[0,12]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[103,115],"content":"WS Dual Http","linkify":"WS Dual Http","nodes":[{"content":"WS Dual Http","pos":[0,12]}]},{"content":"The Dual Http sample demonstrates how to configure the <ph id=\"ph1\">`WSDualHttpBinding`</ph> binding.","pos":[116,199],"source":"The Dual Http sample demonstrates how to configure the `WSDualHttpBinding` binding."},{"content":"This sample consists of a client console program (.exe) and a service library (.dll) hosted by Internet Information Services (IIS).","pos":[200,331]},{"content":"The service implements a duplex contract.","pos":[332,373]},{"content":"The contract is defined by the <ph id=\"ph1\">`ICalculatorDuplex`</ph> interface, which exposes math operations (Add, Subtract, Multiply, and Divide).","pos":[374,504],"source":" The contract is defined by the `ICalculatorDuplex` interface, which exposes math operations (Add, Subtract, Multiply, and Divide)."},{"content":"In this sample, the <ph id=\"ph1\">`ICalculatorDuplex`</ph> interface allows the client to perform math operations, calculating a running result over the session.","pos":[505,647],"source":" In this sample, the `ICalculatorDuplex` interface allows the client to perform math operations, calculating a running result over the session."},{"content":"Independently, the service returns results on the <ph id=\"ph1\">`ICalculatorDuplexCallback`</ph> interface.","pos":[648,736],"source":" Independently, the service returns results on the `ICalculatorDuplexCallback` interface."},{"content":"A duplex contract requires a session, because a context must be established to correlate the set of messages being sent between client and service.","pos":[737,884]},{"content":"The <ph id=\"ph1\">`WSDualHttpBinding`</ph> binding supports duplex communication.","pos":[885,947],"source":" The `WSDualHttpBinding` binding supports duplex communication."},{"pos":[955,1062],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"pos":[1070,1202],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1256,1566],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[1567,1617]},{"pos":[1697,1818],"content":"To configure a service endpoint with the <ph id=\"ph1\">`WSDualHttpBinding`</ph>, specify the binding in the endpoint configuration as shown.","source":"To configure a service endpoint with the `WSDualHttpBinding`, specify the binding in the endpoint configuration as shown."},{"content":"On the client, you must configure an address that the server can use to connect to the client as shown in the following sample configuration.","pos":[1979,2120]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[2859,2964]},{"content":"Press ENTER in the client window to shut down the client.","pos":[2965,3022]},{"content":"When you run the sample, you see the messages returned to the client on the callback interface sent from the service.","pos":[3219,3336]},{"content":"Each intermediate result is displayed, followed by the entire equation upon completion of all operations.","pos":[3337,3442]},{"content":"Press ENTER to shut down the client.","pos":[3443,3479]},{"pos":[3489,3525],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3535,3633],"content":"Install <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> 4.0 using the following command.","source":"Install [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 4.0 using the following command."},{"pos":[3745,3944],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[3954,4163],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4173,4381],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[4393,4913],"content":"[!IMPORTANT]\nWhen running the client in a cross-machine configuration, be sure to replace localhost in both the `address` attribute of the [\\<endpoint> of \\<client>](../../configure-apps/file-schema/wcf/endpoint-of-client.md) element and the `clientBaseAddress` attribute of the [\\<binding>](../../../../docs/framework/misc/binding.md) element of the [\\<wsDualHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsdualhttpbinding.md) element with the name of the appropriate machine, as shown:","leadings":["","    >  "],"nodes":[{"content":"When running the client in a cross-machine configuration, be sure to replace localhost in both the <ph id=\"ph1\">`address`</ph> attribute of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>endpoint&gt; of <ph id=\"ph3\">\\&lt;</ph>client&gt;<ept id=\"p1\">](../../configure-apps/file-schema/wcf/endpoint-of-client.md)</ept> element and the <ph id=\"ph4\">`clientBaseAddress`</ph> attribute of the <bpt id=\"p2\">[</bpt><ph id=\"ph5\">\\&lt;</ph>binding&gt;<ept id=\"p2\">](../../../../docs/framework/misc/binding.md)</ept> element of the <bpt id=\"p3\">[</bpt><ph id=\"ph6\">\\&lt;</ph>wsDualHttpBinding&gt;<ept id=\"p3\">](../../../../docs/framework/configure-apps/file-schema/wcf/wsdualhttpbinding.md)</ept> element with the name of the appropriate machine, as shown:","pos":[13,513],"source":"When running the client in a cross-machine configuration, be sure to replace localhost in both the `address` attribute of the [\\<endpoint> of \\<client>](../../configure-apps/file-schema/wcf/endpoint-of-client.md) element and the `clientBaseAddress` attribute of the [\\<binding>](../../../../docs/framework/misc/binding.md) element of the [\\<wsDualHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsdualhttpbinding.md) element with the name of the appropriate machine, as shown:"}]}]}