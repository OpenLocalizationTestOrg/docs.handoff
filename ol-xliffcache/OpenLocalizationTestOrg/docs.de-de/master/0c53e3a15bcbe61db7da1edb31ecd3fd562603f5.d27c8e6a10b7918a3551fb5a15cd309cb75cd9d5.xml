{"content":"---\ntitle: \"Loading a DataSet from XML\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 49c083b7-a5ed-41cf-aabc-5aaba96f00e6\n---\n# Loading a DataSet from XML\nThe contents of an ADO.NET <xref:System.Data.DataSet> can be created from an XML stream or document. In addition, with the .NET Framework you have great flexibility over what information is loaded from XML, and how the schema or relational structure of the <xref:System.Data.DataSet> is created.  \n  \n To fill a <xref:System.Data.DataSet> with data from XML, use the **ReadXml** method of the <xref:System.Data.DataSet> object. The **ReadXml** method reads from a file, a stream, or an **XmlReader**, and takes as arguments the source of the XML plus an optional **XmlReadMode** argument. For more information about the **XmlReader**, see [Reading XML Data with XmlTextReader](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tfz3cz6w(v=vs.100)). The **ReadXml** method reads the contents of the XML stream or document and loads the <xref:System.Data.DataSet> with data. It will also create the relational schema of the <xref:System.Data.DataSet> depending on the **XmlReadMode** specified and whether or not a relational schema already exists.  \n  \n The following table describes the options for the **XmlReadMode** argument.  \n  \n|Option|Description|  \n|------------|-----------------|  \n|**Auto**|This is the default. Examines the XML and chooses the most appropriate option in the following order:<br /><br /> -   If the XML is a DiffGram, **DiffGram** is used.<br />-   If the <xref:System.Data.DataSet> contains a schema or the XML contains an inline schema, **ReadSchema** is used.<br />-   If the <xref:System.Data.DataSet> does not contain a schema and the XML does not contain an inline schema, **InferSchema** is used.<br /><br /> If you know the format of the XML being read, for best performance it is recommended that you set an explicit **XmlReadMode**, rather than accept the **Auto** default.|  \n|**ReadSchema**|Reads any inline schema and loads the data and schema.<br /><br /> If the <xref:System.Data.DataSet> already contains a schema, new tables are added from the inline schema to the existing schema in the <xref:System.Data.DataSet>. If any tables in the inline schema already exist in the <xref:System.Data.DataSet>, an exception is thrown. You will not be able to modify the schema of an existing table using **XmlReadMode.ReadSchema**.<br /><br /> If the <xref:System.Data.DataSet> does not contain a schema, and there is no inline schema, no data is read.<br /><br /> Inline schema can be defined using XML Schema definition language (XSD) schema. For details about writing inline schema as XML Schema, see [Deriving DataSet Relational Structure from XML Schema (XSD)](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/deriving-dataset-relational-structure-from-xml-schema-xsd.md).|  \n|**IgnoreSchema**|Ignores any inline schema and loads the data into the existing <xref:System.Data.DataSet> schema. Any data that does not match the existing schema is discarded. If no schema exists in the <xref:System.Data.DataSet>, no data is loaded.<br /><br /> If the data is a DiffGram, **IgnoreSchema** has the same functionality as **DiffGram** *.*|  \n|**InferSchema**|Ignores any inline schema and infers the schema per the structure of the XML data, then loads the data.<br /><br /> If the <xref:System.Data.DataSet> already contains a schema, the current schema is extended by adding columns to existing tables. Extra tables will not be added if there are not existing tables. An exception is thrown if an inferred table already exists with a different namespace, or if any inferred columns conflict with existing columns.<br /><br /> For details about how **ReadXmlSchema** infers a schema from an XML document, see [Inferring DataSet Relational Structure from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/inferring-dataset-relational-structure-from-xml.md).|  \n|**DiffGram**|Reads a DiffGram and adds the data to the current schema. **DiffGram** merges new rows with existing rows where the unique identifier values match. See \"Merging Data from XML\" at the end of this topic. For more information about DiffGrams, see [DiffGrams](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md).|  \n|**Fragment**|Continues reading multiple XML fragments until the end of the stream is reached. Fragments that match the <xref:System.Data.DataSet> schema are appended to the appropriate tables. Fragments that do not match the <xref:System.Data.DataSet> schema are discarded.|  \n  \n> [!NOTE]\n>  If you pass an **XmlReader** to **ReadXml** that is positioned part of the way into an XML document, **ReadXml** will read to the next element node and will treat that as the root element, reading until the end of the element node only. This does not apply if you specify **XmlReadMode.Fragment**.  \n  \n## DTD Entities  \n If your XML contains entities defined in a document type definition (DTD) schema, an exception will be thrown if you attempt to load a <xref:System.Data.DataSet> by passing a file name, stream, or non-validating **XmlReader** to **ReadXml**. Instead, you must create an **XmlValidatingReader**, with **EntityHandling** set to **EntityHandling.ExpandEntities**, and pass your **XmlValidatingReader** to **ReadXml**. The **XmlValidatingReader** will expand the entities prior to being read by the <xref:System.Data.DataSet>.  \n  \n The following code examples show how to load a <xref:System.Data.DataSet> from an XML stream. The first example shows a file name being passed to the **ReadXml** method. The second example shows a string that contains XML being loaded using a <xref:System.IO.StringReader>.  \n  \n```vb  \nDim dataSet As DataSet = New DataSet  \ndataSet.ReadXml(\"input.xml\", XmlReadMode.ReadSchema)  \n```  \n  \n```csharp  \nDataSet dataSet = new DataSet();  \ndataSet.ReadXml(\"input.xml\", XmlReadMode.ReadSchema);  \n```  \n  \n```vb  \nDim dataSet As DataSet = New DataSet  \nDim dataTable As DataTable = New DataTable(\"table1\")  \ndataTable.Columns.Add(\"col1\", Type.GetType(\"System.String\"))  \ndataSet.Tables.Add(dataTable)  \n  \nDim xmlData As String = \"<XmlDS><table1><col1>Value1</col1></table1><table1><col1>Value2</col1></table1></XmlDS>\"  \n  \nDim xmlSR As System.IO.StringReader = New System.IO.StringReader(xmlData)  \n  \ndataSet.ReadXml(xmlSR, XmlReadMode.IgnoreSchema)  \n```  \n  \n```csharp  \nDataSet dataSet = new DataSet();  \nDataTable dataTable = new DataTable(\"table1\");  \ndataTable.Columns.Add(\"col1\", typeof(string));  \ndataSet.Tables.Add(dataTable);  \n  \nstring xmlData = \"<XmlDS><table1><col1>Value1</col1></table1><table1><col1>Value2</col1></table1></XmlDS>\";  \n  \nSystem.IO.StringReader xmlSR = new System.IO.StringReader(xmlData);  \n  \ndataSet.ReadXml(xmlSR, XmlReadMode.IgnoreSchema);  \n```  \n  \n> [!NOTE]\n>  If you call **ReadXml** to load a very large file, you may encounter slow performance. To ensure best performance for **ReadXml**, on a large file, call the <xref:System.Data.DataTable.BeginLoadData%2A> method for each table in the <xref:System.Data.DataSet>, and then call **ReadXml**. Finally, call <xref:System.Data.DataTable.EndLoadData%2A> for each table in the <xref:System.Data.DataSet>, as shown in the following example.  \n  \n```vb  \nDim dataTable As DataTable  \n  \nFor Each dataTable In dataSet.Tables  \n   dataTable.BeginLoadData()  \nNext  \n  \ndataSet.ReadXml(\"file.xml\")  \n  \nFor Each dataTable in dataSet.Tables  \n   dataTable.EndLoadData()  \nNext  \n```  \n  \n```csharp  \nforeach (DataTable dataTable in dataSet.Tables)  \n   dataTable.BeginLoadData();  \n  \ndataSet.ReadXml(\"file.xml\");   \n  \nforeach (DataTable dataTable in dataSet.Tables)  \n   dataTable.EndLoadData();  \n```  \n  \n> [!NOTE]\n>  If the XSD schema for your <xref:System.Data.DataSet> includes a **targetNamespace**, data may not be read, and you may encounter exceptions, when calling **ReadXml** to load the <xref:System.Data.DataSet> with XML that contains elements with no qualifying namespace. To read unqualified elements in this case, set **elementFormDefault** equal to \"qualified\" in your XSD schema. For example:  \n  \n```xml  \n<xsd:schema id=\"customDataSet\"   \n  elementFormDefault=\"qualified\"  \n  targetNamespace=\"http://www.tempuri.org/customDataSet.xsd\"   \n  xmlns=\"http://www.tempuri.org/customDataSet.xsd\"   \n  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"   \n  xmlns:msdata=\"urn:schemas-microsoft-com:xml-msdata\">  \n</xsd:schema>  \n```  \n  \n## Merging Data from XML  \n If the <xref:System.Data.DataSet> already contains data, the new data from the XML is added to the data already present in the <xref:System.Data.DataSet>. **ReadXml** does not merge from the XML into the <xref:System.Data.DataSet> any row information with matching primary keys. To overwrite existing row information with new information from XML, use **ReadXml** to create a new <xref:System.Data.DataSet>, and then <xref:System.Data.DataSet.Merge%2A> the new <xref:System.Data.DataSet> into the existing <xref:System.Data.DataSet>. Note that loading a DiffGram using **ReadXML** with an **XmlReadMode** of **DiffGram** will merge rows that have the same unique identifier.  \n  \n## See also\n\n- <xref:System.Data.DataSet.Merge%2A?displayProperty=nameWithType>\n- [Using XML in a DataSet](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md)\n- [DiffGrams](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md)\n- [Deriving DataSet Relational Structure from XML Schema (XSD)](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/deriving-dataset-relational-structure-from-xml-schema-xsd.md)\n- [Inferring DataSet Relational Structure from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/inferring-dataset-relational-structure-from-xml.md)\n- [Loading DataSet Schema Information from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-dataset-schema-information-from-xml.md)\n- [DataSets, DataTables, and DataViews](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md)\n- [ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)\n","nodes":[{"pos":[4,144],"embed":true,"restype":"x-metadata","content":"title: \"Loading a DataSet from XML\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 49c083b7-a5ed-41cf-aabc-5aaba96f00e6","nodes":[{"content":"Loading a DataSet from XML","nodes":[{"pos":[0,26],"content":"Loading a DataSet from XML","nodes":[{"content":"Loading a DataSet from XML","pos":[0,26]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[151,177],"content":"Loading a DataSet from XML","linkify":"Loading a DataSet from XML","nodes":[{"content":"Loading a DataSet from XML","pos":[0,26]}]},{"content":"The contents of an ADO.NET <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> can be created from an XML stream or document.","pos":[178,278],"source":"The contents of an ADO.NET <xref:System.Data.DataSet> can be created from an XML stream or document."},{"content":"In addition, with the .NET Framework you have great flexibility over what information is loaded from XML, and how the schema or relational structure of the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> is created.","pos":[279,473],"source":" In addition, with the .NET Framework you have great flexibility over what information is loaded from XML, and how the schema or relational structure of the <xref:System.Data.DataSet> is created."},{"content":"To fill a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> with data from XML, use the <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> method of the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph> object.","pos":[480,605],"source":"To fill a <xref:System.Data.DataSet> with data from XML, use the **ReadXml** method of the <xref:System.Data.DataSet> object."},{"content":"The <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> method reads from a file, a stream, or an <bpt id=\"p2\">**</bpt>XmlReader<ept id=\"p2\">**</ept>, and takes as arguments the source of the XML plus an optional <bpt id=\"p3\">**</bpt>XmlReadMode<ept id=\"p3\">**</ept> argument.","pos":[606,766],"source":" The **ReadXml** method reads from a file, a stream, or an **XmlReader**, and takes as arguments the source of the XML plus an optional **XmlReadMode** argument."},{"content":"For more information about the <bpt id=\"p1\">**</bpt>XmlReader<ept id=\"p1\">**</ept>, see <bpt id=\"p2\">[</bpt>Reading XML Data with XmlTextReader<ept id=\"p2\">](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tfz3cz6w(v=vs.100))</ept>.","pos":[767,944],"source":" For more information about the **XmlReader**, see [Reading XML Data with XmlTextReader](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/tfz3cz6w(v=vs.100))."},{"content":"The <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> method reads the contents of the XML stream or document and loads the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> with data.","pos":[945,1068],"source":" The **ReadXml** method reads the contents of the XML stream or document and loads the <xref:System.Data.DataSet> with data."},{"content":"It will also create the relational schema of the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> depending on the <bpt id=\"p1\">**</bpt>XmlReadMode<ept id=\"p1\">**</ept> specified and whether or not a relational schema already exists.","pos":[1069,1242],"source":" It will also create the relational schema of the <xref:System.Data.DataSet> depending on the **XmlReadMode** specified and whether or not a relational schema already exists."},{"pos":[1249,1324],"content":"The following table describes the options for the <bpt id=\"p1\">**</bpt>XmlReadMode<ept id=\"p1\">**</ept> argument.","source":"The following table describes the options for the **XmlReadMode** argument."},{"content":"Option","pos":[1331,1337]},{"content":"Description","pos":[1338,1349]},{"pos":[1389,1397],"content":"<bpt id=\"p1\">**</bpt>Auto<ept id=\"p1\">**</ept>","source":"**Auto**"},{"content":"This is the default.","pos":[1398,1418]},{"content":"Examines the XML and chooses the most appropriate option in the following order:","pos":[1419,1499]},{"content":"-   If the XML is a DiffGram, <bpt id=\"p1\">**</bpt>DiffGram<ept id=\"p1\">**</ept> is used.","pos":[1512,1563],"source":"-   If the XML is a DiffGram, **DiffGram** is used."},{"content":"-   If the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> contains a schema or the XML contains an inline schema, <bpt id=\"p1\">**</bpt>ReadSchema<ept id=\"p1\">**</ept> is used.","pos":[1569,1686],"source":"-   If the <xref:System.Data.DataSet> contains a schema or the XML contains an inline schema, **ReadSchema** is used."},{"content":"-   If the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> does not contain a schema and the XML does not contain an inline schema, <bpt id=\"p1\">**</bpt>InferSchema<ept id=\"p1\">**</ept> is used.","pos":[1692,1827],"source":"-   If the <xref:System.Data.DataSet> does not contain a schema and the XML does not contain an inline schema, **InferSchema** is used."},{"content":"If you know the format of the XML being read, for best performance it is recommended that you set an explicit <bpt id=\"p1\">**</bpt>XmlReadMode<ept id=\"p1\">**</ept>, rather than accept the <bpt id=\"p2\">**</bpt>Auto<ept id=\"p2\">**</ept> default.","pos":[1840,2007],"source":"If you know the format of the XML being read, for best performance it is recommended that you set an explicit **XmlReadMode**, rather than accept the **Auto** default."},{"pos":[2012,2026],"content":"<bpt id=\"p1\">**</bpt>ReadSchema<ept id=\"p1\">**</ept>","source":"**ReadSchema**"},{"content":"Reads any inline schema and loads the data and schema.","pos":[2027,2081]},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> already contains a schema, new tables are added from the inline schema to the existing schema in the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[2094,2256],"source":"If the <xref:System.Data.DataSet> already contains a schema, new tables are added from the inline schema to the existing schema in the <xref:System.Data.DataSet>."},{"content":"If any tables in the inline schema already exist in the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>, an exception is thrown.","pos":[2257,2364],"source":" If any tables in the inline schema already exist in the <xref:System.Data.DataSet>, an exception is thrown."},{"content":"You will not be able to modify the schema of an existing table using <bpt id=\"p1\">**</bpt>XmlReadMode.ReadSchema<ept id=\"p1\">**</ept>.","pos":[2365,2461],"source":" You will not be able to modify the schema of an existing table using **XmlReadMode.ReadSchema**."},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> does not contain a schema, and there is no inline schema, no data is read.","pos":[2474,2582],"source":"If the <xref:System.Data.DataSet> does not contain a schema, and there is no inline schema, no data is read."},{"content":"Inline schema can be defined using XML Schema definition language (XSD) schema.","pos":[2595,2674]},{"content":"For details about writing inline schema as XML Schema, see <bpt id=\"p1\">[</bpt>Deriving DataSet Relational Structure from XML Schema (XSD)<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/deriving-dataset-relational-structure-from-xml-schema-xsd.md)</ept>.","pos":[2675,2927],"source":" For details about writing inline schema as XML Schema, see [Deriving DataSet Relational Structure from XML Schema (XSD)](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/deriving-dataset-relational-structure-from-xml-schema-xsd.md)."},{"pos":[2932,2948],"content":"<bpt id=\"p1\">**</bpt>IgnoreSchema<ept id=\"p1\">**</ept>","source":"**IgnoreSchema**"},{"content":"Ignores any inline schema and loads the data into the existing <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> schema.","pos":[2949,3046],"source":"Ignores any inline schema and loads the data into the existing <xref:System.Data.DataSet> schema."},{"content":"Any data that does not match the existing schema is discarded.","pos":[3047,3109]},{"content":"If no schema exists in the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>, no data is loaded.","pos":[3110,3183],"source":" If no schema exists in the <xref:System.Data.DataSet>, no data is loaded."},{"content":"If the data is a DiffGram, <bpt id=\"p1\">**</bpt>IgnoreSchema<ept id=\"p1\">**</ept> has the same functionality as <bpt id=\"p2\">**</bpt>DiffGram<ept id=\"p2\">**</ept> <bpt id=\"p3\">*</bpt>.<ept id=\"p3\">*</ept>","pos":[3196,3286],"source":"If the data is a DiffGram, **IgnoreSchema** has the same functionality as **DiffGram** *.*"},{"pos":[3291,3306],"content":"<bpt id=\"p1\">**</bpt>InferSchema<ept id=\"p1\">**</ept>","source":"**InferSchema**"},{"content":"Ignores any inline schema and infers the schema per the structure of the XML data, then loads the data.","pos":[3307,3410]},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> already contains a schema, the current schema is extended by adding columns to existing tables.","pos":[3423,3552],"source":"If the <xref:System.Data.DataSet> already contains a schema, the current schema is extended by adding columns to existing tables."},{"content":"Extra tables will not be added if there are not existing tables.","pos":[3553,3617]},{"content":"An exception is thrown if an inferred table already exists with a different namespace, or if any inferred columns conflict with existing columns.","pos":[3618,3763]},{"content":"For details about how <bpt id=\"p1\">**</bpt>ReadXmlSchema<ept id=\"p1\">**</ept> infers a schema from an XML document, see <bpt id=\"p2\">[</bpt>Inferring DataSet Relational Structure from XML<ept id=\"p2\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/inferring-dataset-relational-structure-from-xml.md)</ept>.","pos":[3776,4029],"source":"For details about how **ReadXmlSchema** infers a schema from an XML document, see [Inferring DataSet Relational Structure from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/inferring-dataset-relational-structure-from-xml.md)."},{"pos":[4034,4046],"content":"<bpt id=\"p1\">**</bpt>DiffGram<ept id=\"p1\">**</ept>","source":"**DiffGram**"},{"content":"Reads a DiffGram and adds the data to the current schema.","pos":[4047,4104]},{"content":"<bpt id=\"p1\">**</bpt>DiffGram<ept id=\"p1\">**</ept> merges new rows with existing rows where the unique identifier values match.","pos":[4105,4194],"source":"**DiffGram** merges new rows with existing rows where the unique identifier values match."},{"content":"See \"Merging Data from XML\" at the end of this topic.","pos":[4195,4248]},{"content":"For more information about DiffGrams, see <bpt id=\"p1\">[</bpt>DiffGrams<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md)</ept>.","pos":[4249,4386],"source":" For more information about DiffGrams, see [DiffGrams](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md)."},{"pos":[4391,4403],"content":"<bpt id=\"p1\">**</bpt>Fragment<ept id=\"p1\">**</ept>","source":"**Fragment**"},{"content":"Continues reading multiple XML fragments until the end of the stream is reached.","pos":[4404,4484]},{"content":"Fragments that match the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> schema are appended to the appropriate tables.","pos":[4485,4583],"source":" Fragments that match the <xref:System.Data.DataSet> schema are appended to the appropriate tables."},{"content":"Fragments that do not match the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> schema are discarded.","pos":[4584,4664],"source":" Fragments that do not match the <xref:System.Data.DataSet> schema are discarded."},{"pos":[4673,4981],"content":"[!NOTE]\n If you pass an **XmlReader** to **ReadXml** that is positioned part of the way into an XML document, **ReadXml** will read to the next element node and will treat that as the root element, reading until the end of the element node only. This does not apply if you specify **XmlReadMode.Fragment**.","leadings":["","> "],"nodes":[{"content":"If you pass an **XmlReader** to **ReadXml** that is positioned part of the way into an XML document, **ReadXml** will read to the next element node and will treat that as the root element, reading until the end of the element node only. This does not apply if you specify **XmlReadMode.Fragment**.","pos":[9,306],"nodes":[{"content":"If you pass an <bpt id=\"p1\">**</bpt>XmlReader<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>ReadXml<ept id=\"p2\">**</ept> that is positioned part of the way into an XML document, <bpt id=\"p3\">**</bpt>ReadXml<ept id=\"p3\">**</ept> will read to the next element node and will treat that as the root element, reading until the end of the element node only.","pos":[0,236],"source":"If you pass an **XmlReader** to **ReadXml** that is positioned part of the way into an XML document, **ReadXml** will read to the next element node and will treat that as the root element, reading until the end of the element node only."},{"content":"This does not apply if you specify <bpt id=\"p1\">**</bpt>XmlReadMode.Fragment<ept id=\"p1\">**</ept>.","pos":[237,297],"source":" This does not apply if you specify **XmlReadMode.Fragment**."}]}]},{"pos":[4990,5002],"content":"DTD Entities","linkify":"DTD Entities","nodes":[{"content":"DTD Entities","pos":[0,12]}]},{"content":"If your XML contains entities defined in a document type definition (DTD) schema, an exception will be thrown if you attempt to load a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> by passing a file name, stream, or non-validating <bpt id=\"p1\">**</bpt>XmlReader<ept id=\"p1\">**</ept> to <bpt id=\"p2\">**</bpt>ReadXml<ept id=\"p2\">**</ept>.","pos":[5006,5247],"source":"If your XML contains entities defined in a document type definition (DTD) schema, an exception will be thrown if you attempt to load a <xref:System.Data.DataSet> by passing a file name, stream, or non-validating **XmlReader** to **ReadXml**."},{"content":"Instead, you must create an <bpt id=\"p1\">**</bpt>XmlValidatingReader<ept id=\"p1\">**</ept>, with <bpt id=\"p2\">**</bpt>EntityHandling<ept id=\"p2\">**</ept> set to <bpt id=\"p3\">**</bpt>EntityHandling.ExpandEntities<ept id=\"p3\">**</ept>, and pass your <bpt id=\"p4\">**</bpt>XmlValidatingReader<ept id=\"p4\">**</ept> to <bpt id=\"p5\">**</bpt>ReadXml<ept id=\"p5\">**</ept>.","pos":[5248,5420],"source":" Instead, you must create an **XmlValidatingReader**, with **EntityHandling** set to **EntityHandling.ExpandEntities**, and pass your **XmlValidatingReader** to **ReadXml**."},{"content":"The <bpt id=\"p1\">**</bpt>XmlValidatingReader<ept id=\"p1\">**</ept> will expand the entities prior to being read by the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[5421,5528],"source":" The **XmlValidatingReader** will expand the entities prior to being read by the <xref:System.Data.DataSet>."},{"content":"The following code examples show how to load a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> from an XML stream.","pos":[5535,5628],"source":"The following code examples show how to load a <xref:System.Data.DataSet> from an XML stream."},{"content":"The first example shows a file name being passed to the <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> method.","pos":[5629,5704],"source":" The first example shows a file name being passed to the **ReadXml** method."},{"content":"The second example shows a string that contains XML being loaded using a <ph id=\"ph1\">&lt;xref:System.IO.StringReader&gt;</ph>.","pos":[5705,5808],"source":" The second example shows a string that contains XML being loaded using a <xref:System.IO.StringReader>."},{"pos":[6925,7365],"content":"[!NOTE]\n If you call **ReadXml** to load a very large file, you may encounter slow performance. To ensure best performance for **ReadXml**, on a large file, call the <xref:System.Data.DataTable.BeginLoadData%2A> method for each table in the <xref:System.Data.DataSet>, and then call **ReadXml**. Finally, call <xref:System.Data.DataTable.EndLoadData%2A> for each table in the <xref:System.Data.DataSet>, as shown in the following example.","leadings":["","> "],"nodes":[{"content":"If you call **ReadXml** to load a very large file, you may encounter slow performance. To ensure best performance for **ReadXml**, on a large file, call the <xref:System.Data.DataTable.BeginLoadData%2A> method for each table in the <xref:System.Data.DataSet>, and then call **ReadXml**. Finally, call <xref:System.Data.DataTable.EndLoadData%2A> for each table in the <xref:System.Data.DataSet>, as shown in the following example.","pos":[9,438],"nodes":[{"content":"If you call <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> to load a very large file, you may encounter slow performance.","pos":[0,86],"source":"If you call **ReadXml** to load a very large file, you may encounter slow performance."},{"content":"To ensure best performance for <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept>, on a large file, call the <ph id=\"ph1\">&lt;xref:System.Data.DataTable.BeginLoadData%2A&gt;</ph> method for each table in the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph>, and then call <bpt id=\"p2\">**</bpt>ReadXml<ept id=\"p2\">**</ept>.","pos":[87,286],"source":" To ensure best performance for **ReadXml**, on a large file, call the <xref:System.Data.DataTable.BeginLoadData%2A> method for each table in the <xref:System.Data.DataSet>, and then call **ReadXml**."},{"content":"Finally, call <ph id=\"ph1\">&lt;xref:System.Data.DataTable.EndLoadData%2A&gt;</ph> for each table in the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph>, as shown in the following example.","pos":[287,429],"source":" Finally, call <xref:System.Data.DataTable.EndLoadData%2A> for each table in the <xref:System.Data.DataSet>, as shown in the following example."}]}]},{"pos":[7831,8233],"content":"[!NOTE]\n If the XSD schema for your <xref:System.Data.DataSet> includes a **targetNamespace**, data may not be read, and you may encounter exceptions, when calling **ReadXml** to load the <xref:System.Data.DataSet> with XML that contains elements with no qualifying namespace. To read unqualified elements in this case, set **elementFormDefault** equal to \"qualified\" in your XSD schema. For example:","leadings":["","> "],"nodes":[{"content":"If the XSD schema for your <xref:System.Data.DataSet> includes a **targetNamespace**, data may not be read, and you may encounter exceptions, when calling **ReadXml** to load the <xref:System.Data.DataSet> with XML that contains elements with no qualifying namespace. To read unqualified elements in this case, set **elementFormDefault** equal to \"qualified\" in your XSD schema. For example:","pos":[9,400],"nodes":[{"content":"If the XSD schema for your <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> includes a <bpt id=\"p1\">**</bpt>targetNamespace<ept id=\"p1\">**</ept>, data may not be read, and you may encounter exceptions, when calling <bpt id=\"p2\">**</bpt>ReadXml<ept id=\"p2\">**</ept> to load the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph> with XML that contains elements with no qualifying namespace.","pos":[0,267],"source":"If the XSD schema for your <xref:System.Data.DataSet> includes a **targetNamespace**, data may not be read, and you may encounter exceptions, when calling **ReadXml** to load the <xref:System.Data.DataSet> with XML that contains elements with no qualifying namespace."},{"content":"To read unqualified elements in this case, set <bpt id=\"p1\">**</bpt>elementFormDefault<ept id=\"p1\">**</ept> equal to \"qualified\" in your XSD schema.","pos":[268,378],"source":" To read unqualified elements in this case, set **elementFormDefault** equal to \"qualified\" in your XSD schema."},{"content":"For example:","pos":[379,391]}]}]},{"pos":[8570,8591],"content":"Merging Data from XML","linkify":"Merging Data from XML","nodes":[{"content":"Merging Data from XML","pos":[0,21]}]},{"content":"If the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> already contains data, the new data from the XML is added to the data already present in the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[8595,8749],"source":"If the <xref:System.Data.DataSet> already contains data, the new data from the XML is added to the data already present in the <xref:System.Data.DataSet>."},{"content":"<bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> does not merge from the XML into the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> any row information with matching primary keys.","pos":[8750,8873],"source":"**ReadXml** does not merge from the XML into the <xref:System.Data.DataSet> any row information with matching primary keys."},{"content":"To overwrite existing row information with new information from XML, use <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> to create a new <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>, and then <ph id=\"ph2\">&lt;xref:System.Data.DataSet.Merge%2A&gt;</ph> the new <ph id=\"ph3\">&lt;xref:System.Data.DataSet&gt;</ph> into the existing <ph id=\"ph4\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[8874,9128],"source":" To overwrite existing row information with new information from XML, use **ReadXml** to create a new <xref:System.Data.DataSet>, and then <xref:System.Data.DataSet.Merge%2A> the new <xref:System.Data.DataSet> into the existing <xref:System.Data.DataSet>."},{"content":"Note that loading a DiffGram using <bpt id=\"p1\">**</bpt>ReadXML<ept id=\"p1\">**</ept> with an <bpt id=\"p2\">**</bpt>XmlReadMode<ept id=\"p2\">**</ept> of <bpt id=\"p3\">**</bpt>DiffGram<ept id=\"p3\">**</ept> will merge rows that have the same unique identifier.","pos":[9129,9269],"source":" Note that loading a DiffGram using **ReadXML** with an **XmlReadMode** of **DiffGram** will merge rows that have the same unique identifier."},{"pos":[9278,9286],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[9357,9477],"content":"<bpt id=\"p1\">[</bpt>Using XML in a DataSet<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md)</ept>","source":"[Using XML in a DataSet](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md)"},{"pos":[9480,9574],"content":"<bpt id=\"p1\">[</bpt>DiffGrams<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md)</ept>","source":"[DiffGrams](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/diffgrams.md)"},{"pos":[9577,9769],"content":"<bpt id=\"p1\">[</bpt>Deriving DataSet Relational Structure from XML Schema (XSD)<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/deriving-dataset-relational-structure-from-xml-schema-xsd.md)</ept>","source":"[Deriving DataSet Relational Structure from XML Schema (XSD)](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/deriving-dataset-relational-structure-from-xml-schema-xsd.md)"},{"pos":[9772,9942],"content":"<bpt id=\"p1\">[</bpt>Inferring DataSet Relational Structure from XML<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/inferring-dataset-relational-structure-from-xml.md)</ept>","source":"[Inferring DataSet Relational Structure from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/inferring-dataset-relational-structure-from-xml.md)"},{"pos":[9945,10107],"content":"<bpt id=\"p1\">[</bpt>Loading DataSet Schema Information from XML<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-dataset-schema-information-from-xml.md)</ept>","source":"[Loading DataSet Schema Information from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-dataset-schema-information-from-xml.md)"},{"pos":[10110,10226],"content":"<bpt id=\"p1\">[</bpt>DataSets, DataTables, and DataViews<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md)</ept>","source":"[DataSets, DataTables, and DataViews](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md)"},{"pos":[10229,10333],"content":"<bpt id=\"p1\">[</bpt>ADO.NET Managed Providers and DataSet Developer Center<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=217917)</ept>","source":"[ADO.NET Managed Providers and DataSet Developer Center](https://go.microsoft.com/fwlink/?LinkId=217917)"}]}