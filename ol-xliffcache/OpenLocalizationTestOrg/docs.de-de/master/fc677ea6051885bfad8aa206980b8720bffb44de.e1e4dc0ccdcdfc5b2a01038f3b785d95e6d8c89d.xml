{"content":"---\ntitle: \"DiffGrams | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 037f3991-7bbc-424b-b52e-8b03585d3e34\ncaps.latest.revision: 4\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"\n---\n# DiffGrams\nA DiffGram is an XML format that identifies current and original versions of data elements. The <xref:System.Data.DataSet> uses the DiffGram format to load and persist its contents, and to serialize its contents for transport across a network connection. When a <xref:System.Data.DataSet> is written as a DiffGram, it populates the DiffGram with all the necessary information to accurately recreate the contents, though not the schema, of the <xref:System.Data.DataSet>, including column values from both the **Original** and **Current** row versions, row error information, and row order.  \n  \n When sending and retrieving a <xref:System.Data.DataSet> from an XML Web service, the DiffGram format is implicitly used. Additionally, when loading the contents of a <xref:System.Data.DataSet> from XML using the **ReadXml** method, or when writing the contents of a <xref:System.Data.DataSet> in XML using the **WriteXml** method, you can specify that the contents be read or written as a DiffGram. For more information, see [Loading a DataSet from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-a-dataset-from-xml.md) and [Writing DataSet Contents as XML Data](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-contents-as-xml-data.md).  \n  \n While the DiffGram format is primarily used by the .NET Framework as a serialization format for the contents of a <xref:System.Data.DataSet>, you can also use DiffGrams to modify data in tables in a Microsoft SQL Server database.  \n  \n A Diffgram is generated by writing the contents of all tables to a **\\<diffgram>** element.  \n  \n### To generate a Diffgram  \n  \n1.  Generate a list of Root tables (that is, tables without any parent).  \n  \n2.  For each table and its descendants in the list, write out the current version of all rows in the first Diffgram section.  \n  \n3.  For each table in the <xref:System.Data.DataSet>, write out the original version of all rows, if any, in the **\\<before>** section of the Diffgram.  \n  \n4.  For rows that have errors, write the error content in the **\\<errors>** section of the Diffgram.  \n  \n A Diffgram is processed in order from beginning of the XML file to the end.  \n  \n### To process a Diffgram  \n  \n1.  Process the first section of the Diffgram that contains the current version of the rows.  \n  \n2.  Process the second or the **\\<before>** section that contains the original row version of modified and deleted rows.  \n  \n    > [!NOTE]\n    >  If a row is marked deleted, the delete operation can delete the row's descendants as well, depending on the `Cascade` property of the current <xref:System.Data.DataSet>.  \n  \n3.  Process the **\\<errors>** section. Set the error information for the specified row and column for each item in this section.  \n  \n> [!NOTE]\n>  If you set the <xref:System.Data.XmlWriteMode> to Diffgram, the content of the target <xref:System.Data.DataSet> and the original <xref:System.Data.DataSet> may differ.  \n  \n## DiffGram Format  \n The DiffGram format is divided into three sections: the current data, the original (or \"before\") data, and an errors section, as shown in the following example.  \n  \n```  \n<?xml version=\"1.0\"?>  \n<diffgr:diffgram   \n         xmlns:msdata=\"urn:schemas-microsoft-com:xml-msdata\"  \n         xmlns:diffgr=\"urn:schemas-microsoft-com:xml-diffgram-v1\"  \n         xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">  \n  \n   <DataInstance>  \n   </DataInstance>  \n  \n  <diffgr:before>  \n  </diffgr:before>  \n  \n  <diffgr:errors>  \n  </diffgr:errors>  \n</diffgr:diffgram>  \n```  \n  \n The DiffGram format consists of the following blocks of data:  \n  \n **\\<**  ***DataInstance***  **>**  \n The name of this element, ***DataInstance***, is used for explanation purposes in this documentation. A ***DataInstance*** element represents a <xref:System.Data.DataSet> or a row of a <xref:System.Data.DataTable>. Instead of *DataInstance*, the element would contain the name of the <xref:System.Data.DataSet> or <xref:System.Data.DataTable>. This block of the DiffGram format contains the current data, whether it has been modified or not. An element, or row, that has been modified is identified with the **diffgr:hasChanges** annotation.  \n  \n **\\<diffgr:before>**  \n This block of the DiffGram format contains the original version of a row. Elements in this block are matched to elements in the ***DataInstance*** block using the **diffgr:id** annotation.  \n  \n **\\<diffgr:errors>**  \n This block of the DiffGram format contains error information for a particular row in the ***DataInstance*** block. Elements in this block are matched to elements in the ***DataInstance*** block using the **diffgr:id** annotation.  \n  \n## DiffGram Annotations  \n DiffGrams use several annotations to relate elements from the different DiffGram blocks that represent different row versions or error information in the <xref:System.Data.DataSet>.  \n  \n The following table describes the DiffGram annotations that are defined in the DiffGram namespace **urn:schemas-microsoft-com:xml-diffgram-v1**.  \n  \n|Annotation|Description|  \n|----------------|-----------------|  \n|**id**|Used to pair the elements in the **\\<diffgr:before>** and **\\<diffgr:errors>** blocks to elements in the **\\<** ***DataInstance*** **>** block. Values with the **diffgr:id** annotation are in the form *[TableName][RowIdentifier]*. For example: `<Customers diffgr:id=\"Customers1\">`.|  \n|**parentId**|Identifies which element from the **\\<** ***DataInstance*** **>** block is the parent element of the current element. Values with the **diffgr:parentId** annotation are in the form *[TableName][RowIdentifier]*. For example: `<Orders diffgr:parentId=\"Customers1\">`.|  \n|**hasChanges**|Identifies a row in the **\\<** ***DataInstance*** **>** block as modified. The **hasChanges** annotation can have one of the following two values:<br /><br /> **inserted**<br /> Identifies an **Added** row.<br /><br /> **modified**<br /> Identifies a **Modified** row that contains an **Original** row version in the **\\<diffgr:before>** block. Note that **Deleted** rows will have an **Original** row version in the **\\<diffgr:before>** block, but there will be no annotated element in the **\\<** ***DataInstance*** **>** block.|  \n|**hasErrors**|Identifies a row in the **\\<** ***DataInstance*** **>** block with a **RowError**. The error element is placed in the **\\<diffgr:errors>** block.|  \n|**Error**|Contains the text of the **RowError** for a particular element in the **\\<diffgr:errors>** block.|  \n  \n The <xref:System.Data.DataSet> includes additional annotations when reading or writing its contents as a DiffGram. The following table describes these additional annotations, which are defined in the namespace **urn:schemas-microsoft-com:xml-msdata**.  \n  \n|Annotation|Description|  \n|----------------|-----------------|  \n|**RowOrder**|Preserves the row order of the original data and identifies the index of a row in a particular <xref:System.Data.DataTable>.|  \n|**Hidden**|Identifies a column as having a **ColumnMapping** property set to **MappingType.Hidden**. The attribute is written in the format **msdata:hidden** *[ColumnName]*=\"*value*\". For example: `<Customers diffgr:id=\"Customers1\" msdata:hiddenContactTitle=\"Owner\">`.<br /><br /> Note that hidden columns are only written as a DiffGram attribute if they contain data. Otherwise, they are ignored.|  \n  \n## Sample DiffGram  \n An example of the DiffGram format is shown below. This example shows the result of an update to a row in a table before the changes have been committed. The row with a CustomerID of \"ALFKI\" has been modified, but not updated. As a result, there is a **Current** row with a **diffgr:id** of \"Customers1\" in the **\\<** ***DataInstance*** **>** block, and an **Original** row with a **diffgr:id** of \"Customers1\" in the **\\<diffgr:before>** block. The row with a CustomerID of \"ANATR\" includes a **RowError**, so it is annotated with `diffgr:hasErrors=\"true\"` and there is a related element in the **\\<diffgr:errors>** block.  \n  \n```  \n<diffgr:diffgram xmlns:msdata=\"urn:schemas-microsoft-com:xml-msdata\" xmlns:diffgr=\"urn:schemas-microsoft-com:xml-diffgram-v1\">  \n  <CustomerDataSet>  \n    <Customers diffgr:id=\"Customers1\" msdata:rowOrder=\"0\" diffgr:hasChanges=\"modified\">  \n      <CustomerID>ALFKI</CustomerID>  \n      <CompanyName>New Company</CompanyName>  \n    </Customers>  \n    <Customers diffgr:id=\"Customers2\" msdata:rowOrder=\"1\" diffgram:hasErrors=\"true\">  \n      <CustomerID>ANATR</CustomerID>  \n      <CompanyName>Ana Trujillo Emparedados y Helados</CompanyName>  \n    </Customers>  \n    <Customers diffgr:id=\"Customers3\" msdata:rowOrder=\"2\">  \n      <CustomerID>ANTON</CustomerID>  \n      <CompanyName>Antonio Moreno Taquera</CompanyName>  \n    </Customers>  \n    <Customers diffgr:id=\"Customers4\" msdata:rowOrder=\"3\">  \n      <CustomerID>AROUT</CustomerID>  \n      <CompanyName>Around the Horn</CompanyName>  \n    </Customers>  \n  </CustomerDataSet>  \n  <diffgr:before>  \n    <Customers diffgr:id=\"Customers1\" msdata:rowOrder=\"0\">  \n      <CustomerID>ALFKI</CustomerID>  \n      <CompanyName>Alfreds Futterkiste</CompanyName>  \n    </Customers>  \n  </diffgr:before>  \n  <diffgr:errors>  \n    <Customers diffgr:id=\"Customers2\" diffgr:Error=\"An optimistic concurrency violation has occurred for this row.\"/>  \n  </diffgr:errors>  \n</diffgr:diffgram>  \n```  \n  \n## See Also  \n [Using XML in a DataSet](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md)   \n [Loading a DataSet from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-a-dataset-from-xml.md)   \n [Writing DataSet Contents as XML Data](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-contents-as-xml-data.md)   \n [DataSets, DataTables, and DataViews](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md)   \n [ADO.NET Managed Providers and DataSet Developer Center](http://go.microsoft.com/fwlink/?LinkId=217917)","nodes":[{"pos":[4,340],"nodes":[{"content":"DiffGrams | Microsoft Docs","nodes":[{"pos":[0,26],"content":"DiffGrams | Microsoft Docs","nodes":[{"content":"DiffGrams | Microsoft Docs","pos":[0,26]}]}],"pos":[6,35],"yaml":true}],"content":"title: \"DiffGrams | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 037f3991-7bbc-424b-b52e-8b03585d3e34\ncaps.latest.revision: 4\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"","yamlblock":true},{"pos":[347,356],"content":"DiffGrams","linkify":"DiffGrams","nodes":[{"content":"DiffGrams","pos":[0,9]}]},{"content":"A DiffGram is an XML format that identifies current and original versions of data elements.","pos":[357,448]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> uses the DiffGram format to load and persist its contents, and to serialize its contents for transport across a network connection.","pos":[449,611],"source":" The <xref:System.Data.DataSet> uses the DiffGram format to load and persist its contents, and to serialize its contents for transport across a network connection."},{"content":"When a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> is written as a DiffGram, it populates the DiffGram with all the necessary information to accurately recreate the contents, though not the schema, of the <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph>, including column values from both the <bpt id=\"p1\">**</bpt>Original<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Current<ept id=\"p2\">**</ept> row versions, row error information, and row order.","pos":[612,946],"source":" When a <xref:System.Data.DataSet> is written as a DiffGram, it populates the DiffGram with all the necessary information to accurately recreate the contents, though not the schema, of the <xref:System.Data.DataSet>, including column values from both the **Original** and **Current** row versions, row error information, and row order."},{"content":"When sending and retrieving a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> from an XML Web service, the DiffGram format is implicitly used.","pos":[953,1074],"source":"When sending and retrieving a <xref:System.Data.DataSet> from an XML Web service, the DiffGram format is implicitly used."},{"content":"Additionally, when loading the contents of a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> from XML using the <bpt id=\"p1\">**</bpt>ReadXml<ept id=\"p1\">**</ept> method, or when writing the contents of a <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph> in XML using the <bpt id=\"p2\">**</bpt>WriteXml<ept id=\"p2\">**</ept> method, you can specify that the contents be read or written as a DiffGram.","pos":[1075,1352],"source":" Additionally, when loading the contents of a <xref:System.Data.DataSet> from XML using the **ReadXml** method, or when writing the contents of a <xref:System.Data.DataSet> in XML using the **WriteXml** method, you can specify that the contents be read or written as a DiffGram."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Loading a DataSet from XML<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-a-dataset-from-xml.md)</ept> and <bpt id=\"p2\">[</bpt>Writing DataSet Contents as XML Data<ept id=\"p2\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-contents-as-xml-data.md)</ept>.","pos":[1353,1661],"source":" For more information, see [Loading a DataSet from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-a-dataset-from-xml.md) and [Writing DataSet Contents as XML Data](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-contents-as-xml-data.md)."},{"content":"While the DiffGram format is primarily used by the .NET Framework as a serialization format for the contents of a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>, you can also use DiffGrams to modify data in tables in a Microsoft SQL Server database.","pos":[1668,1897],"source":"While the DiffGram format is primarily used by the .NET Framework as a serialization format for the contents of a <xref:System.Data.DataSet>, you can also use DiffGrams to modify data in tables in a Microsoft SQL Server database."},{"pos":[1904,1995],"content":"A Diffgram is generated by writing the contents of all tables to a <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgram&gt;<ept id=\"p1\">**</ept> element.","source":"A Diffgram is generated by writing the contents of all tables to a **\\<diffgram>** element."},{"pos":[2005,2027],"content":"To generate a Diffgram","linkify":"To generate a Diffgram","nodes":[{"content":"To generate a Diffgram","pos":[0,22]}]},{"content":"Generate a list of Root tables (that is, tables without any parent).","pos":[2037,2105]},{"content":"For each table and its descendants in the list, write out the current version of all rows in the first Diffgram section.","pos":[2115,2235]},{"pos":[2245,2392],"content":"For each table in the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>, write out the original version of all rows, if any, in the <bpt id=\"p1\">**</bpt><ph id=\"ph2\">\\&lt;</ph>before&gt;<ept id=\"p1\">**</ept> section of the Diffgram.","source":"For each table in the <xref:System.Data.DataSet>, write out the original version of all rows, if any, in the **\\<before>** section of the Diffgram."},{"pos":[2402,2498],"content":"For rows that have errors, write the error content in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>errors&gt;<ept id=\"p1\">**</ept> section of the Diffgram.","source":"For rows that have errors, write the error content in the **\\<errors>** section of the Diffgram."},{"content":"A Diffgram is processed in order from beginning of the XML file to the end.","pos":[2505,2580]},{"pos":[2590,2611],"content":"To process a Diffgram","linkify":"To process a Diffgram","nodes":[{"content":"To process a Diffgram","pos":[0,21]}]},{"content":"Process the first section of the Diffgram that contains the current version of the rows.","pos":[2621,2709]},{"pos":[2719,2835],"content":"Process the second or the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>before&gt;<ept id=\"p1\">**</ept> section that contains the original row version of modified and deleted rows.","source":"Process the second or the **\\<before>** section that contains the original row version of modified and deleted rows."},{"pos":[2847,3031],"content":"[!NOTE]\nIf a row is marked deleted, the delete operation can delete the row's descendants as well, depending on the `Cascade` property of the current <xref:System.Data.DataSet>.","leadings":["","    >  "],"nodes":[{"content":"If a row is marked deleted, the delete operation can delete the row's descendants as well, depending on the <ph id=\"ph1\">`Cascade`</ph> property of the current <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[8,177],"source":"If a row is marked deleted, the delete operation can delete the row's descendants as well, depending on the `Cascade` property of the current <xref:System.Data.DataSet>."}]},{"content":"Process the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>errors&gt;<ept id=\"p1\">**</ept> section.","pos":[3041,3075],"source":"Process the **\\<errors>** section."},{"content":"Set the error information for the specified row and column for each item in this section.","pos":[3076,3165]},{"pos":[3173,3352],"content":"[!NOTE]\n If you set the <xref:System.Data.XmlWriteMode> to Diffgram, the content of the target <xref:System.Data.DataSet> and the original <xref:System.Data.DataSet> may differ.","leadings":["","> "],"nodes":[{"content":"If you set the <ph id=\"ph1\">&lt;xref:System.Data.XmlWriteMode&gt;</ph> to Diffgram, the content of the target <ph id=\"ph2\">&lt;xref:System.Data.DataSet&gt;</ph> and the original <ph id=\"ph3\">&lt;xref:System.Data.DataSet&gt;</ph> may differ.","pos":[9,177],"source":"If you set the <xref:System.Data.XmlWriteMode> to Diffgram, the content of the target <xref:System.Data.DataSet> and the original <xref:System.Data.DataSet> may differ."}]},{"pos":[3361,3376],"content":"DiffGram Format","linkify":"DiffGram Format","nodes":[{"content":"DiffGram Format","pos":[0,15]}]},{"content":"The DiffGram format is divided into three sections: the current data, the original (or \"before\") data, and an errors section, as shown in the following example.","pos":[3380,3540]},{"content":"The DiffGram format consists of the following blocks of data:","pos":[3947,4008]},{"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph><ept id=\"p1\">**</ept>  <bpt id=\"p2\">***</bpt>DataInstance<ept id=\"p2\">***</ept>  <bpt id=\"p3\">**</bpt><ph id=\"ph2\">&gt;</ph><ept id=\"p3\">**</ept>","pos":[4015,4048],"source":"**\\<**  ***DataInstance***  **>**"},{"content":"The name of this element, <bpt id=\"p1\">***</bpt>DataInstance<ept id=\"p1\">***</ept>, is used for explanation purposes in this documentation.","pos":[4052,4153],"source":"The name of this element, ***DataInstance***, is used for explanation purposes in this documentation."},{"content":"A <bpt id=\"p1\">***</bpt>DataInstance<ept id=\"p1\">***</ept> element represents a <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> or a row of a <ph id=\"ph2\">&lt;xref:System.Data.DataTable&gt;</ph>.","pos":[4154,4266],"source":" A ***DataInstance*** element represents a <xref:System.Data.DataSet> or a row of a <xref:System.Data.DataTable>."},{"content":"Instead of <bpt id=\"p1\">*</bpt>DataInstance<ept id=\"p1\">*</ept>, the element would contain the name of the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Data.DataTable&gt;</ph>.","pos":[4267,4395],"source":" Instead of *DataInstance*, the element would contain the name of the <xref:System.Data.DataSet> or <xref:System.Data.DataTable>."},{"content":"This block of the DiffGram format contains the current data, whether it has been modified or not.","pos":[4396,4493]},{"content":"An element, or row, that has been modified is identified with the <bpt id=\"p1\">**</bpt>diffgr:hasChanges<ept id=\"p1\">**</ept> annotation.","pos":[4494,4593],"source":" An element, or row, that has been modified is identified with the **diffgr:hasChanges** annotation."},{"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:before&gt;<ept id=\"p1\">**</ept>","pos":[4600,4620],"source":"**\\<diffgr:before>**"},{"content":"This block of the DiffGram format contains the original version of a row.","pos":[4624,4697]},{"content":"Elements in this block are matched to elements in the <bpt id=\"p1\">***</bpt>DataInstance<ept id=\"p1\">***</ept> block using the <bpt id=\"p2\">**</bpt>diffgr:id<ept id=\"p2\">**</ept> annotation.","pos":[4698,4812],"source":" Elements in this block are matched to elements in the ***DataInstance*** block using the **diffgr:id** annotation."},{"content":"<bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:errors&gt;<ept id=\"p1\">**</ept>","pos":[4819,4839],"source":"**\\<diffgr:errors>**"},{"content":"This block of the DiffGram format contains error information for a particular row in the <bpt id=\"p1\">***</bpt>DataInstance<ept id=\"p1\">***</ept> block.","pos":[4843,4957],"source":"This block of the DiffGram format contains error information for a particular row in the ***DataInstance*** block."},{"content":"Elements in this block are matched to elements in the <bpt id=\"p1\">***</bpt>DataInstance<ept id=\"p1\">***</ept> block using the <bpt id=\"p2\">**</bpt>diffgr:id<ept id=\"p2\">**</ept> annotation.","pos":[4958,5072],"source":" Elements in this block are matched to elements in the ***DataInstance*** block using the **diffgr:id** annotation."},{"pos":[5081,5101],"content":"DiffGram Annotations","linkify":"DiffGram Annotations","nodes":[{"content":"DiffGram Annotations","pos":[0,20]}]},{"content":"DiffGrams use several annotations to relate elements from the different DiffGram blocks that represent different row versions or error information in the <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph>.","pos":[5105,5286],"source":"DiffGrams use several annotations to relate elements from the different DiffGram blocks that represent different row versions or error information in the <xref:System.Data.DataSet>."},{"pos":[5293,5437],"content":"The following table describes the DiffGram annotations that are defined in the DiffGram namespace <bpt id=\"p1\">**</bpt>urn:schemas-microsoft-com:xml-diffgram-v1<ept id=\"p1\">**</ept>.","source":"The following table describes the DiffGram annotations that are defined in the DiffGram namespace **urn:schemas-microsoft-com:xml-diffgram-v1**."},{"content":"Annotation","pos":[5444,5454]},{"content":"Description","pos":[5455,5466]},{"pos":[5510,5516],"content":"<bpt id=\"p1\">**</bpt>id<ept id=\"p1\">**</ept>","source":"**id**"},{"content":"Used to pair the elements in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:before&gt;<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt><ph id=\"ph2\">\\&lt;</ph>diffgr:errors&gt;<ept id=\"p2\">**</ept> blocks to elements in the <bpt id=\"p3\">**</bpt><ph id=\"ph3\">\\&lt;</ph><ept id=\"p3\">**</ept> <bpt id=\"p4\">***</bpt>DataInstance<ept id=\"p4\">***</ept> <bpt id=\"p5\">**</bpt><ph id=\"ph4\">&gt;</ph><ept id=\"p5\">**</ept> block.","pos":[5517,5660],"source":"Used to pair the elements in the **\\<diffgr:before>** and **\\<diffgr:errors>** blocks to elements in the **\\<** ***DataInstance*** **>** block."},{"content":"Values with the <bpt id=\"p1\">**</bpt>diffgr:id<ept id=\"p1\">**</ept> annotation are in the form <bpt id=\"p2\">*</bpt>[TableName][RowIdentifier]<ept id=\"p2\">*</ept>.","pos":[5661,5747],"source":" Values with the **diffgr:id** annotation are in the form *[TableName][RowIdentifier]*."},{"content":"For example: <ph id=\"ph1\">`&lt;Customers diffgr:id=\"Customers1\"&gt;`</ph>.","pos":[5748,5798],"source":" For example: `<Customers diffgr:id=\"Customers1\">`."},{"pos":[5803,5815],"content":"<bpt id=\"p1\">**</bpt>parentId<ept id=\"p1\">**</ept>","source":"**parentId**"},{"content":"Identifies which element from the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph><ept id=\"p1\">**</ept> <bpt id=\"p2\">***</bpt>DataInstance<ept id=\"p2\">***</ept> <bpt id=\"p3\">**</bpt><ph id=\"ph2\">&gt;</ph><ept id=\"p3\">**</ept> block is the parent element of the current element.","pos":[5816,5933],"source":"Identifies which element from the **\\<** ***DataInstance*** **>** block is the parent element of the current element."},{"content":"Values with the <bpt id=\"p1\">**</bpt>diffgr:parentId<ept id=\"p1\">**</ept> annotation are in the form <bpt id=\"p2\">*</bpt>[TableName][RowIdentifier]<ept id=\"p2\">*</ept>.","pos":[5934,6026],"source":" Values with the **diffgr:parentId** annotation are in the form *[TableName][RowIdentifier]*."},{"content":"For example: <ph id=\"ph1\">`&lt;Orders diffgr:parentId=\"Customers1\"&gt;`</ph>.","pos":[6027,6080],"source":" For example: `<Orders diffgr:parentId=\"Customers1\">`."},{"pos":[6085,6099],"content":"<bpt id=\"p1\">**</bpt>hasChanges<ept id=\"p1\">**</ept>","source":"**hasChanges**"},{"content":"Identifies a row in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph><ept id=\"p1\">**</ept> <bpt id=\"p2\">***</bpt>DataInstance<ept id=\"p2\">***</ept> <bpt id=\"p3\">**</bpt><ph id=\"ph2\">&gt;</ph><ept id=\"p3\">**</ept> block as modified.","pos":[6100,6174],"source":"Identifies a row in the **\\<** ***DataInstance*** **>** block as modified."},{"content":"The <bpt id=\"p1\">**</bpt>hasChanges<ept id=\"p1\">**</ept> annotation can have one of the following two values:","pos":[6175,6246],"source":" The **hasChanges** annotation can have one of the following two values:"},{"content":"<bpt id=\"p1\">**</bpt>inserted<ept id=\"p1\">**</ept>","pos":[6259,6271],"source":"**inserted**"},{"content":"Identifies an <bpt id=\"p1\">**</bpt>Added<ept id=\"p1\">**</ept> row.","pos":[6278,6306],"source":"Identifies an **Added** row."},{"content":"<bpt id=\"p1\">**</bpt>modified<ept id=\"p1\">**</ept>","pos":[6319,6331],"source":"**modified**"},{"content":"Identifies a <bpt id=\"p1\">**</bpt>Modified<ept id=\"p1\">**</ept> row that contains an <bpt id=\"p2\">**</bpt>Original<ept id=\"p2\">**</ept> row version in the <bpt id=\"p3\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:before&gt;<ept id=\"p3\">**</ept> block.","pos":[6338,6444],"source":"Identifies a **Modified** row that contains an **Original** row version in the **\\<diffgr:before>** block."},{"content":"Note that <bpt id=\"p1\">**</bpt>Deleted<ept id=\"p1\">**</ept> rows will have an <bpt id=\"p2\">**</bpt>Original<ept id=\"p2\">**</ept> row version in the <bpt id=\"p3\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:before&gt;<ept id=\"p3\">**</ept> block, but there will be no annotated element in the <bpt id=\"p4\">**</bpt><ph id=\"ph2\">\\&lt;</ph><ept id=\"p4\">**</ept> <bpt id=\"p5\">***</bpt>DataInstance<ept id=\"p5\">***</ept> <bpt id=\"p6\">**</bpt><ph id=\"ph3\">&gt;</ph><ept id=\"p6\">**</ept> block.","pos":[6445,6629],"source":" Note that **Deleted** rows will have an **Original** row version in the **\\<diffgr:before>** block, but there will be no annotated element in the **\\<** ***DataInstance*** **>** block."},{"pos":[6634,6647],"content":"<bpt id=\"p1\">**</bpt>hasErrors<ept id=\"p1\">**</ept>","source":"**hasErrors**"},{"content":"Identifies a row in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph><ept id=\"p1\">**</ept> <bpt id=\"p2\">***</bpt>DataInstance<ept id=\"p2\">***</ept> <bpt id=\"p3\">**</bpt><ph id=\"ph2\">&gt;</ph><ept id=\"p3\">**</ept> block with a <bpt id=\"p4\">**</bpt>RowError<ept id=\"p4\">**</ept>.","pos":[6648,6730],"source":"Identifies a row in the **\\<** ***DataInstance*** **>** block with a **RowError**."},{"content":"The error element is placed in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:errors&gt;<ept id=\"p1\">**</ept> block.","pos":[6731,6793],"source":" The error element is placed in the **\\<diffgr:errors>** block."},{"pos":[6798,6807],"content":"<bpt id=\"p1\">**</bpt>Error<ept id=\"p1\">**</ept>","source":"**Error**"},{"pos":[6808,6905],"content":"Contains the text of the <bpt id=\"p1\">**</bpt>RowError<ept id=\"p1\">**</ept> for a particular element in the <bpt id=\"p2\">**</bpt><ph id=\"ph1\">\\&lt;</ph>diffgr:errors&gt;<ept id=\"p2\">**</ept> block.","source":"Contains the text of the **RowError** for a particular element in the **\\<diffgr:errors>** block."},{"content":"The <ph id=\"ph1\">&lt;xref:System.Data.DataSet&gt;</ph> includes additional annotations when reading or writing its contents as a DiffGram.","pos":[6913,7027],"source":"The <xref:System.Data.DataSet> includes additional annotations when reading or writing its contents as a DiffGram."},{"content":"The following table describes these additional annotations, which are defined in the namespace <bpt id=\"p1\">**</bpt>urn:schemas-microsoft-com:xml-msdata<ept id=\"p1\">**</ept>.","pos":[7028,7164],"source":" The following table describes these additional annotations, which are defined in the namespace **urn:schemas-microsoft-com:xml-msdata**."},{"content":"Annotation","pos":[7171,7181]},{"content":"Description","pos":[7182,7193]},{"pos":[7237,7249],"content":"<bpt id=\"p1\">**</bpt>RowOrder<ept id=\"p1\">**</ept>","source":"**RowOrder**"},{"content":"Preserves the row order of the original data and identifies the index of a row in a particular <ph id=\"ph1\">&lt;xref:System.Data.DataTable&gt;</ph>.","pos":[7250,7374],"source":"Preserves the row order of the original data and identifies the index of a row in a particular <xref:System.Data.DataTable>."},{"pos":[7379,7389],"content":"<bpt id=\"p1\">**</bpt>Hidden<ept id=\"p1\">**</ept>","source":"**Hidden**"},{"content":"Identifies a column as having a <bpt id=\"p1\">**</bpt>ColumnMapping<ept id=\"p1\">**</ept> property set to <bpt id=\"p2\">**</bpt>MappingType.Hidden<ept id=\"p2\">**</ept>.","pos":[7390,7479],"source":"Identifies a column as having a **ColumnMapping** property set to **MappingType.Hidden**."},{"content":"The attribute is written in the format <bpt id=\"p1\">**</bpt>msdata:hidden<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>[ColumnName]<ept id=\"p2\">*</ept>=\"<bpt id=\"p3\">*</bpt>value<ept id=\"p3\">*</ept>\".","pos":[7480,7562],"source":" The attribute is written in the format **msdata:hidden** *[ColumnName]*=\"*value*\"."},{"content":"For example: <ph id=\"ph1\">`&lt;Customers diffgr:id=\"Customers1\" msdata:hiddenContactTitle=\"Owner\"&gt;`</ph>.","pos":[7563,7647],"source":" For example: `<Customers diffgr:id=\"Customers1\" msdata:hiddenContactTitle=\"Owner\">`."},{"content":"Note that hidden columns are only written as a DiffGram attribute if they contain data.","pos":[7660,7747]},{"content":"Otherwise, they are ignored.","pos":[7748,7776]},{"pos":[7786,7801],"content":"Sample DiffGram","linkify":"Sample DiffGram","nodes":[{"content":"Sample DiffGram","pos":[0,15]}]},{"content":"An example of the DiffGram format is shown below.","pos":[7805,7854]},{"content":"This example shows the result of an update to a row in a table before the changes have been committed.","pos":[7855,7957]},{"content":"The row with a CustomerID of \"ALFKI\" has been modified, but not updated.","pos":[7958,8030]},{"content":"As a result, there is a <bpt id=\"p1\">**</bpt>Current<ept id=\"p1\">**</ept> row with a <bpt id=\"p2\">**</bpt>diffgr:id<ept id=\"p2\">**</ept> of \"Customers1\" in the <bpt id=\"p3\">**</bpt><ph id=\"ph1\">\\&lt;</ph><ept id=\"p3\">**</ept> <bpt id=\"p4\">***</bpt>DataInstance<ept id=\"p4\">***</ept> <bpt id=\"p5\">**</bpt><ph id=\"ph2\">&gt;</ph><ept id=\"p5\">**</ept> block, and an <bpt id=\"p6\">**</bpt>Original<ept id=\"p6\">**</ept> row with a <bpt id=\"p7\">**</bpt>diffgr:id<ept id=\"p7\">**</ept> of \"Customers1\" in the <bpt id=\"p8\">**</bpt><ph id=\"ph3\">\\&lt;</ph>diffgr:before&gt;<ept id=\"p8\">**</ept> block.","pos":[8031,8249],"source":" As a result, there is a **Current** row with a **diffgr:id** of \"Customers1\" in the **\\<** ***DataInstance*** **>** block, and an **Original** row with a **diffgr:id** of \"Customers1\" in the **\\<diffgr:before>** block."},{"content":"The row with a CustomerID of \"ANATR\" includes a <bpt id=\"p1\">**</bpt>RowError<ept id=\"p1\">**</ept>, so it is annotated with <ph id=\"ph1\">`diffgr:hasErrors=\"true\"`</ph> and there is a related element in the <bpt id=\"p2\">**</bpt><ph id=\"ph2\">\\&lt;</ph>diffgr:errors&gt;<ept id=\"p2\">**</ept> block.","pos":[8250,8427],"source":" The row with a CustomerID of \"ANATR\" includes a **RowError**, so it is annotated with `diffgr:hasErrors=\"true\"` and there is a related element in the **\\<diffgr:errors>** block."},{"pos":[9779,9787],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Using XML in a DataSet<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md)</ept><ph id=\"ph1\"> </ph>","pos":[9791,9912],"source":"[Using XML in a DataSet](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/using-xml-in-a-dataset.md) "},{"content":"<bpt id=\"p1\">[</bpt>Loading a DataSet from XML<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-a-dataset-from-xml.md)</ept><ph id=\"ph1\"> </ph>","pos":[9916,10045],"source":"[Loading a DataSet from XML](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/loading-a-dataset-from-xml.md) "},{"content":"<bpt id=\"p1\">[</bpt>Writing DataSet Contents as XML Data<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-contents-as-xml-data.md)</ept><ph id=\"ph1\"> </ph>","pos":[10049,10198],"source":"[Writing DataSet Contents as XML Data](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/writing-dataset-contents-as-xml-data.md) "},{"content":"<bpt id=\"p1\">[</bpt>DataSets, DataTables, and DataViews<ept id=\"p1\">](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md)</ept><ph id=\"ph1\"> </ph>","pos":[10202,10319],"source":"[DataSets, DataTables, and DataViews](../../../../../docs/framework/data/adonet/dataset-datatable-dataview/index.md) "},{"content":"<bpt id=\"p1\">[</bpt>ADO.NET Managed Providers and DataSet Developer Center<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=217917)</ept>","pos":[10323,10426],"source":"[ADO.NET Managed Providers and DataSet Developer Center](http://go.microsoft.com/fwlink/?LinkId=217917)"}]}