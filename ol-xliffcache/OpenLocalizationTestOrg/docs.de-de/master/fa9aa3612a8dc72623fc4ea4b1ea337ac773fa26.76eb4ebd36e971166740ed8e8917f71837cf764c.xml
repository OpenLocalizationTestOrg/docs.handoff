{"content":"---\ntitle: \"Tutorial: Use a Windows Communication Foundation client\"\nms.date: 03/19/2019\nhelpviewer_keywords:\n  - \"WCF clients [WCF], using\"\ndev_langs:\n - CSharp\n - VB\nms.assetid: 190349fc-0573-49c7-bb85-8e316df7f31f\n---\n# Tutorial: Use a Windows Communication Foundation client\n\nThis tutorial describes the last of five tasks required to create a basic Windows Communication Foundation (WCF) application. For an overview of the tutorials, see [Tutorial: Get started with Windows Communication Foundation applications](getting-started-tutorial.md).\n\nAfter you've created and configured a Windows Communication Foundation (WCF) proxy, you create a client instance and compile the client application. You then use it to communicate with the WCF service. \n\nIn this tutorial, you learn how to:\n> [!div class=\"checklist\"]\n> - Add code to use the WCF client.\n> - Test the WCF client.\n\n## Add code to use the WCF client\n\nThe client code does the following steps:\n- Instantiates the WCF client.\n- Calls the service operations from the generated proxy.\n- Closes the client after the operation call is completed.\n\nOpen the **Program.cs** or **Module1.vb** file from the **GettingStartedClient** project and replace its code with the following code:\n\n```csharp\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing GettingStartedClient.ServiceReference1;\n\nnamespace GettingStartedClient\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            //Step 1: Create an instance of the WCF proxy.\n            CalculatorClient client = new CalculatorClient();\n\n            // Step 2: Call the service operations.\n            // Call the Add service operation.\n            double value1 = 100.00D;\n            double value2 = 15.99D;\n            double result = client.Add(value1, value2);\n            Console.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result);\n\n            // Call the Subtract service operation.\n            value1 = 145.00D;\n            value2 = 76.54D;\n            result = client.Subtract(value1, value2);\n            Console.WriteLine(\"Subtract({0},{1}) = {2}\", value1, value2, result);\n\n            // Call the Multiply service operation.\n            value1 = 9.00D;\n            value2 = 81.25D;\n            result = client.Multiply(value1, value2);\n            Console.WriteLine(\"Multiply({0},{1}) = {2}\", value1, value2, result);\n\n            // Call the Divide service operation.\n            value1 = 22.00D;\n            value2 = 7.00D;\n            result = client.Divide(value1, value2);\n            Console.WriteLine(\"Divide({0},{1}) = {2}\", value1, value2, result);\n\n            // Step 3: Close the client to gracefully close the connection and clean up resources.\n            Console.WriteLine(\"\\nPress <Enter> to terminate the client.\");\n            Console.ReadLine();\n            client.Close();\n        }\n    }\n}\n```\n\n```vb\nImports System\nImports System.Collections.Generic\nImports System.Text\nImports System.ServiceModel\nImports GettingStartedClient.ServiceReference1\n\nModule Module1\n\n    Sub Main()\n        ' Step 1: Create an instance of the WCF proxy.\n        Dim Client As New CalculatorClient()\n\n        ' Step 2: Call the service operations.\n        ' Call the Add service operation.\n        Dim value1 As Double = 100D\n        Dim value2 As Double = 15.99D\n        Dim result As Double = Client.Add(value1, value2)\n        Console.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result)\n\n        ' Call the Subtract service operation.\n        value1 = 145D\n        value2 = 76.54D\n        result = Client.Subtract(value1, value2)\n        Console.WriteLine(\"Subtract({0},{1}) = {2}\", value1, value2, result)\n\n        ' Call the Multiply service operation.\n        value1 = 9D\n        value2 = 81.25D\n        result = Client.Multiply(value1, value2)\n        Console.WriteLine(\"Multiply({0},{1}) = {2}\", value1, value2, result)\n\n        ' Call the Divide service operation.\n        value1 = 22D\n        value2 = 7D\n        result = Client.Divide(value1, value2)\n        Console.WriteLine(\"Divide({0},{1}) = {2}\", value1, value2, result)\n\n        ' Step 3: Close the client to gracefully close the connection and clean up resources.\n        Console.WriteLine()\n        Console.WriteLine(\"Press <Enter> to terminate the client.\")\n        Console.ReadLine()\n        Client.Close()\n\n    End Sub\n\nEnd Module\n```\n\nNotice the `using` (for Visual C#) or `Imports` (for Visual Basic) statement that imports `GettingStartedClient.ServiceReference1`. This statement imports the code that Visual Studio generated with the **Add Service Reference** function. The code instantiates the WCF proxy and calls each of the service operations that the calculator service exposes. It then closes the proxy and ends the program.\n\n## Test the WCF client\n\n### Test the application from Visual Studio\n\n1. Save and build the solution.\n\n2. Select the **GettingStartedLib** folder, and then select **Set as Startup Project** from the shortcut menu.\n\n3. From **Startup Projects**, select **GettingStartedLib** from the drop-down list, then select **Run** or press **F5**.\n\n### Test the application from a command prompt\n\n1. Open a command prompt as an administrator, and then navigate to your Visual Studio solution directory. \n\n2. To start the service: Enter *GettingStartedHost\\bin\\Debug\\GettingStartedHost.exe*.\n\n3. To start the client: Open another command prompt, navigate to your Visual Studio solution directory, then enter *GettingStartedClient\\bin\\Debug\\GettingStartedClient.exe*.\n\n   *GettingStartedHost.exe* produces the following output:\n\n   ```text\n   The service is ready.\n   Press <Enter> to terminate the service.\n\n   Received Add(100,15.99)\n   Return: 115.99\n   Received Subtract(145,76.54)\n   Return: 68.46\n   Received Multiply(9,81.25)\n   Return: 731.25\n   Received Divide(22,7)\n   Return: 3.14285714285714\n   ```\n\n   *GettingStartedClient.exe* produces the following output:\n\n   ```text\n   Add(100,15.99) = 115.99\n   Subtract(145,76.54) = 68.46\n   Multiply(9,81.25) = 731.25\n   Divide(22,7) = 3.14285714285714\n\n   Press <Enter> to terminate the client.\n   ```\n\n## Next steps\n\nYou've now completed all the tasks in the WCF get started tutorial. In this tutorial, you learned how to:\n\nIn this tutorial, you learn how to:\n> [!div class=\"checklist\"]\n> - Add code to use the WCF client.\n> - Test the WCF client.\n\nIf you have problems or errors in any of the steps, follow the steps in the troubleshooting article to fix them.\n\n> [!div class=\"nextstepaction\"]\n> [Troubleshoot the Get started with WCF tutorials](troubleshooting-the-getting-started-tutorial.md)\n","nodes":[{"pos":[4,216],"embed":true,"restype":"x-metadata","content":"title: \"Tutorial: Use a Windows Communication Foundation client\"\nms.date: 03/19/2019\nhelpviewer_keywords:\n  - \"WCF clients [WCF], using\"\ndev_langs:\n - CSharp\n - VB\nms.assetid: 190349fc-0573-49c7-bb85-8e316df7f31f","nodes":[{"content":"Tutorial: Use a Windows Communication Foundation client","nodes":[{"pos":[0,55],"content":"Tutorial: Use a Windows Communication Foundation client","nodes":[{"content":"Tutorial: Use a Windows Communication Foundation client","pos":[0,55]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[223,278],"content":"Tutorial: Use a Windows Communication Foundation client","linkify":"Tutorial: Use a Windows Communication Foundation client","nodes":[{"content":"Tutorial: Use a Windows Communication Foundation client","pos":[0,55]}]},{"content":"This tutorial describes the last of five tasks required to create a basic Windows Communication Foundation (WCF) application.","pos":[280,405]},{"content":"For an overview of the tutorials, see <bpt id=\"p1\">[</bpt>Tutorial: Get started with Windows Communication Foundation applications<ept id=\"p1\">](getting-started-tutorial.md)</ept>.","pos":[406,548],"source":" For an overview of the tutorials, see [Tutorial: Get started with Windows Communication Foundation applications](getting-started-tutorial.md)."},{"content":"After you've created and configured a Windows Communication Foundation (WCF) proxy, you create a client instance and compile the client application.","pos":[550,698]},{"content":"You then use it to communicate with the WCF service.","pos":[699,751]},{"content":"In this tutorial, you learn how to:","pos":[754,789]},{"content":"Add code to use the WCF client.","pos":[821,852]},{"content":"Test the WCF client.","pos":[857,877]},{"pos":[882,912],"content":"Add code to use the WCF client","linkify":"Add code to use the WCF client","nodes":[{"content":"Add code to use the WCF client","pos":[0,30]}]},{"content":"The client code does the following steps:","pos":[914,955]},{"content":"Instantiates the WCF client.","pos":[958,986]},{"content":"Calls the service operations from the generated proxy.","pos":[989,1043]},{"content":"Closes the client after the operation call is completed.","pos":[1046,1102]},{"pos":[1104,1238],"content":"Open the <bpt id=\"p1\">**</bpt>Program.cs<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Module1.vb<ept id=\"p2\">**</ept> file from the <bpt id=\"p3\">**</bpt>GettingStartedClient<ept id=\"p3\">**</ept> project and replace its code with the following code:","source":"Open the **Program.cs** or **Module1.vb** file from the **GettingStartedClient** project and replace its code with the following code:"},{"content":"Notice the <ph id=\"ph1\">`using`</ph> (for Visual C#) or <ph id=\"ph2\">`Imports`</ph> (for Visual Basic) statement that imports <ph id=\"ph3\">`GettingStartedClient.ServiceReference1`</ph>.","pos":[4404,4535],"source":"Notice the `using` (for Visual C#) or `Imports` (for Visual Basic) statement that imports `GettingStartedClient.ServiceReference1`."},{"content":"This statement imports the code that Visual Studio generated with the <bpt id=\"p1\">**</bpt>Add Service Reference<ept id=\"p1\">**</ept> function.","pos":[4536,4641],"source":" This statement imports the code that Visual Studio generated with the **Add Service Reference** function."},{"content":"The code instantiates the WCF proxy and calls each of the service operations that the calculator service exposes.","pos":[4642,4755]},{"content":"It then closes the proxy and ends the program.","pos":[4756,4802]},{"pos":[4807,4826],"content":"Test the WCF client","linkify":"Test the WCF client","nodes":[{"content":"Test the WCF client","pos":[0,19]}]},{"pos":[4832,4871],"content":"Test the application from Visual Studio","linkify":"Test the application from Visual Studio","nodes":[{"content":"Test the application from Visual Studio","pos":[0,39]}]},{"content":"Save and build the solution.","pos":[4876,4904]},{"pos":[4909,5016],"content":"Select the <bpt id=\"p1\">**</bpt>GettingStartedLib<ept id=\"p1\">**</ept> folder, and then select <bpt id=\"p2\">**</bpt>Set as Startup Project<ept id=\"p2\">**</ept> from the shortcut menu.","source":"Select the **GettingStartedLib** folder, and then select **Set as Startup Project** from the shortcut menu."},{"pos":[5021,5138],"content":"From <bpt id=\"p1\">**</bpt>Startup Projects<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>GettingStartedLib<ept id=\"p2\">**</ept> from the drop-down list, then select <bpt id=\"p3\">**</bpt>Run<ept id=\"p3\">**</ept> or press <bpt id=\"p4\">**</bpt>F5<ept id=\"p4\">**</ept>.","source":"From **Startup Projects**, select **GettingStartedLib** from the drop-down list, then select **Run** or press **F5**."},{"pos":[5144,5186],"content":"Test the application from a command prompt","linkify":"Test the application from a command prompt","nodes":[{"content":"Test the application from a command prompt","pos":[0,42]}]},{"content":"Open a command prompt as an administrator, and then navigate to your Visual Studio solution directory.","pos":[5191,5293]},{"pos":[5299,5381],"content":"To start the service: Enter <bpt id=\"p1\">*</bpt>GettingStartedHost\\bin\\Debug\\GettingStartedHost.exe<ept id=\"p1\">*</ept>.","source":"To start the service: Enter *GettingStartedHost\\bin\\Debug\\GettingStartedHost.exe*."},{"pos":[5386,5556],"content":"To start the client: Open another command prompt, navigate to your Visual Studio solution directory, then enter <bpt id=\"p1\">*</bpt>GettingStartedClient\\bin\\Debug\\GettingStartedClient.exe<ept id=\"p1\">*</ept>.","source":"To start the client: Open another command prompt, navigate to your Visual Studio solution directory, then enter *GettingStartedClient\\bin\\Debug\\GettingStartedClient.exe*."},{"pos":[5561,5616],"content":"<bpt id=\"p1\">*</bpt>GettingStartedHost.exe<ept id=\"p1\">*</ept> produces the following output:","source":"*GettingStartedHost.exe* produces the following output:"},{"pos":[5904,5961],"content":"<bpt id=\"p1\">*</bpt>GettingStartedClient.exe<ept id=\"p1\">*</ept> produces the following output:","source":"*GettingStartedClient.exe* produces the following output:"},{"pos":[6151,6161],"content":"Next steps","linkify":"Next steps","nodes":[{"content":"Next steps","pos":[0,10]}]},{"content":"You've now completed all the tasks in the WCF get started tutorial.","pos":[6163,6230]},{"content":"In this tutorial, you learned how to:","pos":[6231,6268]},{"content":"In this tutorial, you learn how to:","pos":[6270,6305]},{"content":"Add code to use the WCF client.","pos":[6337,6368]},{"content":"Test the WCF client.","pos":[6373,6393]},{"content":"If you have problems or errors in any of the steps, follow the steps in the troubleshooting article to fix them.","pos":[6395,6507]},{"pos":[6511,6641],"content":"[!div class=\"nextstepaction\"]\n[Troubleshoot the Get started with WCF tutorials](troubleshooting-the-getting-started-tutorial.md)","leadings":["","> "],"nodes":[{"content":"<bpt id=\"p1\">[</bpt>Troubleshoot the Get started with WCF tutorials<ept id=\"p1\">](troubleshooting-the-getting-started-tutorial.md)</ept>","pos":[30,128],"source":"[Troubleshoot the Get started with WCF tutorials](troubleshooting-the-getting-started-tutorial.md)"}]}]}