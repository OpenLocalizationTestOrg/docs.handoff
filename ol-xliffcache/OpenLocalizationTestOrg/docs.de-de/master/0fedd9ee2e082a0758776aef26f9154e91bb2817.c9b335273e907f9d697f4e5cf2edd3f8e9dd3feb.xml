{"content":"---\ntitle: \"Specifying Client Run-Time Behavior | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"behaviors [WCF], system-provided client\"\nms.assetid: d16d3405-be70-4edb-8f62-b5f614ddeca5\ncaps.latest.revision: 8\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Specifying Client Run-Time Behavior\n[!INCLUDE[indigo1](../../../includes/indigo1-md.md)] clients, like [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] services, can be configured to modify the run-time behavior to suit the client application. Three attributes are available for specifying client run-time behavior. Duplex client callback objects can use the <xref:System.ServiceModel.CallbackBehaviorAttribute> and <xref:System.ServiceModel.Description.CallbackDebugBehavior> attributes to modify their run-time behavior. The other attribute, <xref:System.ServiceModel.Description.ClientViaBehavior>, can be used to separate the logical destination from the immediate network destination. In addition, duplex client callback types can use some of the service-side behaviors. [!INCLUDE[crdefault](../../../includes/crdefault-md.md)][Specifying Service Run-Time Behavior](../../../docs/framework/wcf/specifying-service-run-time-behavior.md).  \n  \n## Using the CallbackBehaviorAttribute  \n You can configure or extend the execution behavior of a callback contract implementation in a client application by using the <xref:System.ServiceModel.CallbackBehaviorAttribute> class. This attribute performs a similar function for the callback class as the <xref:System.ServiceModel.ServiceBehaviorAttribute> class, with the exception of instancing behavior and transaction settings.  \n  \n The <xref:System.ServiceModel.CallbackBehaviorAttribute> class must be applied to the class that implements the callback contract. If applied to a nonduplex contract implementation, an <xref:System.InvalidOperationException> exception is thrown at run time. The following code example shows a <xref:System.ServiceModel.CallbackBehaviorAttribute> class on a callback object that uses the <xref:System.Threading.SynchronizationContext> object to determine the thread to marshal to, the <xref:System.ServiceModel.CallbackBehaviorAttribute.ValidateMustUnderstand%2A> property to enforce message validation, and the <xref:System.ServiceModel.CallbackBehaviorAttribute.IncludeExceptionDetailInFaults%2A> property to return exceptions as <xref:System.ServiceModel.FaultException> objects to the service for debugging purposes.  \n  \n [!code-csharp[CallbackBehaviorAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/callbackbehaviorattribute/cs/client.cs#3)]\n [!code-vb[CallbackBehaviorAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/callbackbehaviorattribute/vb/client.vb#3)]  \n  \n## Using CallbackDebugBehavior to Enable the Flow of Managed Exception Information  \n You can enable the flow of managed exception information in a client callback object back to the service for debugging purposes by setting the <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> property to `true` either programmatically or from an application configuration file.  \n  \n Returning managed exception information to services can be a security risk because exception details expose information about the internal client implementation that  unauthorized services could use. In addition, although the <xref:System.ServiceModel.Description.CallbackDebugBehavior> properties can also be set programmatically, it can be easy to forget to disable <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> when deploying.  \n  \n Because of the security issues involved, it is strongly recommended that:  \n  \n-   You use an application configuration file to set the value of the <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> property to `true`.  \n  \n-   You do so only in controlled debugging scenarios.  \n  \n The following code example shows a client configuration file that instructs [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] to return managed exception information from a client callback object in SOAP messages.  \n  \n [!code-xml[SCA.CallbackContract#4](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.callbackcontract/cs/client.exe.config#4)]   \n \n## Using the ClientViaBehavior Behavior  \n You can use the <xref:System.ServiceModel.Description.ClientViaBehavior> behavior to specify the Uniform Resource Identifier for which the transport channel should be created. Use this behavior when the immediate network destination is not the intended processor of the message. This enables multiple-hop conversations when the calling application does not necessarily know the ultimate destination or when the destination `Via` header is not an address.  \n  \n## See Also  \n [Specifying Service Run-Time Behavior](../../../docs/framework/wcf/specifying-service-run-time-behavior.md)","nodes":[{"pos":[4,423],"embed":true,"restype":"x-metadata","content":"title: \"Specifying Client Run-Time Behavior | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"behaviors [WCF], system-provided client\"\nms.assetid: d16d3405-be70-4edb-8f62-b5f614ddeca5\ncaps.latest.revision: 8\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"Specifying Client Run-Time Behavior | Microsoft Docs","nodes":[{"pos":[0,52],"content":"Specifying Client Run-Time Behavior | Microsoft Docs","nodes":[{"content":"Specifying Client Run-Time Behavior | Microsoft Docs","pos":[0,52]}]}],"path":["title"]}],"yml":true},{"pos":[430,465],"content":"Specifying Client Run-Time Behavior","linkify":"Specifying Client Run-Time Behavior","nodes":[{"content":"Specifying Client Run-Time Behavior","pos":[0,35]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo1](../../../includes/indigo1-md.md)]</ph> clients, like <ph id=\"ph2\">[!INCLUDE[indigo1](../../../includes/indigo1-md.md)]</ph> services, can be configured to modify the run-time behavior to suit the client application.","pos":[466,677],"source":"[!INCLUDE[indigo1](../../../includes/indigo1-md.md)] clients, like [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] services, can be configured to modify the run-time behavior to suit the client application."},{"content":"Three attributes are available for specifying client run-time behavior.","pos":[678,749]},{"content":"Duplex client callback objects can use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.CallbackBehaviorAttribute&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.CallbackDebugBehavior&gt;</ph> attributes to modify their run-time behavior.","pos":[750,956],"source":" Duplex client callback objects can use the <xref:System.ServiceModel.CallbackBehaviorAttribute> and <xref:System.ServiceModel.Description.CallbackDebugBehavior> attributes to modify their run-time behavior."},{"content":"The other attribute, <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ClientViaBehavior&gt;</ph>, can be used to separate the logical destination from the immediate network destination.","pos":[957,1123],"source":" The other attribute, <xref:System.ServiceModel.Description.ClientViaBehavior>, can be used to separate the logical destination from the immediate network destination."},{"content":"In addition, duplex client callback types can use some of the service-side behaviors.","pos":[1124,1209]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Specifying Service Run-Time Behavior<ept id=\"p1\">](../../../docs/framework/wcf/specifying-service-run-time-behavior.md)</ept>.","pos":[1210,1374],"source":"[!INCLUDE[crdefault](../../../includes/crdefault-md.md)][Specifying Service Run-Time Behavior](../../../docs/framework/wcf/specifying-service-run-time-behavior.md)."},{"pos":[1383,1418],"content":"Using the CallbackBehaviorAttribute","linkify":"Using the CallbackBehaviorAttribute","nodes":[{"content":"Using the CallbackBehaviorAttribute","pos":[0,35]}]},{"content":"You can configure or extend the execution behavior of a callback contract implementation in a client application by using the <ph id=\"ph1\">&lt;xref:System.ServiceModel.CallbackBehaviorAttribute&gt;</ph> class.","pos":[1422,1607],"source":"You can configure or extend the execution behavior of a callback contract implementation in a client application by using the <xref:System.ServiceModel.CallbackBehaviorAttribute> class."},{"content":"This attribute performs a similar function for the callback class as the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> class, with the exception of instancing behavior and transaction settings.","pos":[1608,1807],"source":" This attribute performs a similar function for the callback class as the <xref:System.ServiceModel.ServiceBehaviorAttribute> class, with the exception of instancing behavior and transaction settings."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.CallbackBehaviorAttribute&gt;</ph> class must be applied to the class that implements the callback contract.","pos":[1814,1944],"source":"The <xref:System.ServiceModel.CallbackBehaviorAttribute> class must be applied to the class that implements the callback contract."},{"content":"If applied to a nonduplex contract implementation, an <ph id=\"ph1\">&lt;xref:System.InvalidOperationException&gt;</ph> exception is thrown at run time.","pos":[1945,2071],"source":" If applied to a nonduplex contract implementation, an <xref:System.InvalidOperationException> exception is thrown at run time."},{"content":"The following code example shows a <ph id=\"ph1\">&lt;xref:System.ServiceModel.CallbackBehaviorAttribute&gt;</ph> class on a callback object that uses the <ph id=\"ph2\">&lt;xref:System.Threading.SynchronizationContext&gt;</ph> object to determine the thread to marshal to, the <ph id=\"ph3\">&lt;xref:System.ServiceModel.CallbackBehaviorAttribute.ValidateMustUnderstand%2A&gt;</ph> property to enforce message validation, and the <ph id=\"ph4\">&lt;xref:System.ServiceModel.CallbackBehaviorAttribute.IncludeExceptionDetailInFaults%2A&gt;</ph> property to return exceptions as <ph id=\"ph5\">&lt;xref:System.ServiceModel.FaultException&gt;</ph> objects to the service for debugging purposes.","pos":[2072,2633],"source":" The following code example shows a <xref:System.ServiceModel.CallbackBehaviorAttribute> class on a callback object that uses the <xref:System.Threading.SynchronizationContext> object to determine the thread to marshal to, the <xref:System.ServiceModel.CallbackBehaviorAttribute.ValidateMustUnderstand%2A> property to enforce message validation, and the <xref:System.ServiceModel.CallbackBehaviorAttribute.IncludeExceptionDetailInFaults%2A> property to return exceptions as <xref:System.ServiceModel.FaultException> objects to the service for debugging purposes."},{"pos":[2920,2999],"content":"Using CallbackDebugBehavior to Enable the Flow of Managed Exception Information","linkify":"Using CallbackDebugBehavior to Enable the Flow of Managed Exception Information","nodes":[{"content":"Using CallbackDebugBehavior to Enable the Flow of Managed Exception Information","pos":[0,79]}]},{"pos":[3003,3326],"content":"You can enable the flow of managed exception information in a client callback object back to the service for debugging purposes by setting the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A&gt;</ph> property to <ph id=\"ph2\">`true`</ph> either programmatically or from an application configuration file.","source":"You can enable the flow of managed exception information in a client callback object back to the service for debugging purposes by setting the <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> property to `true` either programmatically or from an application configuration file."},{"content":"Returning managed exception information to services can be a security risk because exception details expose information about the internal client implementation that  unauthorized services could use.","pos":[3333,3532]},{"content":"In addition, although the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.CallbackDebugBehavior&gt;</ph> properties can also be set programmatically, it can be easy to forget to disable <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A&gt;</ph> when deploying.","pos":[3533,3811],"source":" In addition, although the <xref:System.ServiceModel.Description.CallbackDebugBehavior> properties can also be set programmatically, it can be easy to forget to disable <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> when deploying."},{"content":"Because of the security issues involved, it is strongly recommended that:","pos":[3818,3891]},{"pos":[3901,4081],"content":"You use an application configuration file to set the value of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A&gt;</ph> property to <ph id=\"ph2\">`true`</ph>.","source":"You use an application configuration file to set the value of the <xref:System.ServiceModel.Description.CallbackDebugBehavior.IncludeExceptionDetailInFaults%2A> property to `true`."},{"content":"You do so only in controlled debugging scenarios.","pos":[4091,4140]},{"pos":[4147,4363],"content":"The following code example shows a client configuration file that instructs <ph id=\"ph1\">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]</ph> to return managed exception information from a client callback object in SOAP messages.","source":"The following code example shows a client configuration file that instructs [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] to return managed exception information from a client callback object in SOAP messages."},{"pos":[4508,4544],"content":"Using the ClientViaBehavior Behavior","linkify":"Using the ClientViaBehavior Behavior","nodes":[{"content":"Using the ClientViaBehavior Behavior","pos":[0,36]}]},{"content":"You can use the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ClientViaBehavior&gt;</ph> behavior to specify the Uniform Resource Identifier for which the transport channel should be created.","pos":[4548,4723],"source":"You can use the <xref:System.ServiceModel.Description.ClientViaBehavior> behavior to specify the Uniform Resource Identifier for which the transport channel should be created."},{"content":"Use this behavior when the immediate network destination is not the intended processor of the message.","pos":[4724,4826]},{"content":"This enables multiple-hop conversations when the calling application does not necessarily know the ultimate destination or when the destination <ph id=\"ph1\">`Via`</ph> header is not an address.","pos":[4827,5002],"source":" This enables multiple-hop conversations when the calling application does not necessarily know the ultimate destination or when the destination `Via` header is not an address."},{"pos":[5011,5019],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[5023,5130],"content":"<bpt id=\"p1\">[</bpt>Specifying Service Run-Time Behavior<ept id=\"p1\">](../../../docs/framework/wcf/specifying-service-run-time-behavior.md)</ept>","source":"[Specifying Service Run-Time Behavior](../../../docs/framework/wcf/specifying-service-run-time-behavior.md)"}]}