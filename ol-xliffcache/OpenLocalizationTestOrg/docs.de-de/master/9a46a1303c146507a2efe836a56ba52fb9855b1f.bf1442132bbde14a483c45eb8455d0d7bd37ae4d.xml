{"content":"---\ntitle: \"Activity Relationships Validation | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 6f11a34e-ed67-4bce-88ce-7e96bbb4d052\ncaps.latest.revision: 8\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Activity Relationships Validation\nThis sample consists of three activities, `CreateCity`, `CreateState`, and `CreateCountry`. `CreateCity` must be inside a `CreateState` activity, and `CreateState` must be inside a `CreateCountry` activity. For the purpose of this sample, the validation logic is in code for the `CreateState` activity, and in XAML for the `CreateCity` activity. Both constraints have the same behavior.  \n  \n The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] provides the following three helper activities that allow the developer to validate relationships between activities:  \n  \n <xref:System.Activities.Validation.GetParentChain>  \n Provides the collection of all activities that belong to the parent of the current node  \n  \n <xref:System.Activities.Validation.GetChildSubtree>  \n Provides the collection of all activities that belong to the sub-tree of the current node, excluding the current node  \n  \n <xref:System.Activities.Validation.GetWorkflowTree>  \n Provides the collection of all activities in the same tree as the current node  \n  \n In the sample, a <xref:System.Activities.Statements.ForEach%601> activity is used to walk through the collection returned by <xref:System.Activities.Validation.GetParentChain>. For every element in the collection, its type is compared to `CreateCountry` (or `CreateState` if `CreateCity` is being validated), and when a match is found the result flag is set to `true`. Finally, an <xref:System.Activities.Validation.AssertValidation> is used to generate a validation error if the result flag is set to `false`.  \n  \n### To use this sample  \n  \n1.  Open the ContainmentValidation.sln sample solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n2.  Build the solution.  \n  \n3.  Press CTRL + F5 to launch the program.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing:  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory:  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Validation\\ActivityRelationships`  \n  \n## See Also","nodes":[{"pos":[12,62],"content":"Activity Relationships Validation | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Activity Relationships Validation | Microsoft Docs","pos":[0,50]}]},{"pos":[327,360],"content":"Activity Relationships Validation","linkify":"Activity Relationships Validation","nodes":[{"content":"Activity Relationships Validation","pos":[0,33]}]},{"content":"This sample consists of three activities, <ph id=\"ph1\">`CreateCity`</ph>, <ph id=\"ph2\">`CreateState`</ph>, and <ph id=\"ph3\">`CreateCountry`</ph>.","pos":[361,452],"source":"This sample consists of three activities, `CreateCity`, `CreateState`, and `CreateCountry`."},{"content":"<ph id=\"ph1\">`CreateCity`</ph> must be inside a <ph id=\"ph2\">`CreateState`</ph> activity, and <ph id=\"ph3\">`CreateState`</ph> must be inside a <ph id=\"ph4\">`CreateCountry`</ph> activity.","pos":[453,567],"source":"`CreateCity` must be inside a `CreateState` activity, and `CreateState` must be inside a `CreateCountry` activity."},{"content":"For the purpose of this sample, the validation logic is in code for the <ph id=\"ph1\">`CreateState`</ph> activity, and in XAML for the <ph id=\"ph2\">`CreateCity`</ph> activity.","pos":[568,706],"source":" For the purpose of this sample, the validation logic is in code for the `CreateState` activity, and in XAML for the `CreateCity` activity."},{"content":"Both constraints have the same behavior.","pos":[707,747]},{"pos":[754,953],"content":"The <ph id=\"ph1\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph> provides the following three helper activities that allow the developer to validate relationships between activities:","source":"The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] provides the following three helper activities that allow the developer to validate relationships between activities:"},{"content":"Provides the collection of all activities that belong to the parent of the current node","pos":[1014,1101]},{"content":"Provides the collection of all activities that belong to the sub-tree of the current node, excluding the current node","pos":[1163,1280]},{"content":"Provides the collection of all activities in the same tree as the current node","pos":[1342,1420]},{"content":"In the sample, a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.ForEach%601&gt;</ph> activity is used to walk through the collection returned by <ph id=\"ph2\">&lt;xref:System.Activities.Validation.GetParentChain&gt;</ph>.","pos":[1427,1603],"source":"In the sample, a <xref:System.Activities.Statements.ForEach%601> activity is used to walk through the collection returned by <xref:System.Activities.Validation.GetParentChain>."},{"content":"For every element in the collection, its type is compared to <ph id=\"ph1\">`CreateCountry`</ph> (or <ph id=\"ph2\">`CreateState`</ph> if <ph id=\"ph3\">`CreateCity`</ph> is being validated), and when a match is found the result flag is set to <ph id=\"ph4\">`true`</ph>.","pos":[1604,1795],"source":" For every element in the collection, its type is compared to `CreateCountry` (or `CreateState` if `CreateCity` is being validated), and when a match is found the result flag is set to `true`."},{"content":"Finally, an <ph id=\"ph1\">&lt;xref:System.Activities.Validation.AssertValidation&gt;</ph> is used to generate a validation error if the result flag is set to <ph id=\"ph2\">`false`</ph>.","pos":[1796,1937],"source":" Finally, an <xref:System.Activities.Validation.AssertValidation> is used to generate a validation error if the result flag is set to `false`."},{"pos":[1947,1965],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[1975,2083],"content":"Open the ContainmentValidation.sln sample solution in <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","source":"Open the ContainmentValidation.sln sample solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"content":"Build the solution.","pos":[2093,2112]},{"content":"Press CTRL + F5 to launch the program.","pos":[2122,2160]},{"pos":[2168,2301],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing:","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing:","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing:","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2355,2681],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory:","pos":[2682,2732]},{"pos":[2826,2834],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}