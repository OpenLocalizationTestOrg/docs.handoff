{"content":"---\ntitle: Nullable reference types\ndescription: This article provides an overview of nullable reference types, added in C# 8. You'll learn how the feature provides safety against null reference exceptions, for new and existing projects.\nms.date: 02/19/2019\n---\n# Nullable reference types\n\nC# 8.0 introduces **nullable reference types** and **non-nullable reference types** that enable you to make important statements about the properties for reference type variables:\n\n- **A reference is not supposed to be null**. When variables aren't supposed to be null, the compiler enforces rules that ensure it is safe to dereference these variables without first checking that it isn't null:\n  - The variable must be initialized to a non-null value.\n  - The variable can never be assigned the value `null`.\n- **A reference may be null**. When variables may be null, the compiler enforces different rules to ensure that you've correctly checked for a null reference:\n  - The variable may only be dereferenced when the compiler can guarantee that the value isn't null.\n  - These variables may be initialized with the default `null` value and may be assigned the value `null` in other code.\n\nThis new feature provides significant benefits over the handling of reference variables in earlier versions of C# where the design intent couldn't be determined from the variable declaration. The compiler didn't provide safety against null reference exceptions for reference types:\n\n- **A reference can be null**. No warnings are issued when a reference type is initialized to null, or later assigned to null.\n- **A reference is assumed to be not null**. The compiler doesn't issue any warnings when reference types are dereferenced. (With nullable references,  the compiler issues warnings whenever you dereference a variable that may be null).\n\nWith the addition of nullable reference types, you can declare your intent more clearly. The `null` value is the correct way to represent that a variable doesn't refer to a value. Don't use this feature to remove all `null` values from your code. Rather, you should declare your intent to the compiler and other developers that read your code. By declaring your intent, the compiler informs you when you write code that is inconsistent with that intent.\n\nA **nullable reference type** is noted using the same syntax as [nullable value types](programming-guide/nullable-types/index.md): a `?` is appended to the type of the variable. For example, the following variable declaration represents a nullable string variable, `name`:\n\n```csharp\nstring? name;\n```\n\nAny variable where the `?` is not appended to the type name is a **non-nullable reference type**. That includes all reference type variables in existing code when you have enabled this feature.\n\nThe compiler uses static analysis to determine if a nullable reference is known to be non-null. The compiler warns you if you dereference a nullable reference when it may be null. You can override this behavior by using the **null-forgiving operator** (`!`) following a variable name. For example, if you know the `name` variable isn't null but the compiler issues a warning, you can write the following code to override the compiler's analysis:\n\n```csharp\nname!.Length;\n```\n\nYou can read details about this operator in the [draft nullable reference types](../../_csharplang/proposals/csharp-8.0/nullable-reference-types-specification.md#the-null-forgiving-operator) specification proposal on GitHub.\n\n## Nullability of types\n\nAny reference type can have one of four *nullabilities*, which describes when warnings are generated:\n\n- *Nonnullable*: Null can't be assigned to variables of this type. Variables of this type don't need to be null-checked before dereferencing.\n- *Nullable*: Null can be assigned to variables of this type. Dereferencing variables of this type without first checking for `null` causes a warning.\n- *Oblivious*: This is the pre-C# 8 state. Variables of this type can be dereferenced or assigned without warnings.\n- *Unknown*: This is generally for type parameters where constraints don't tell the compiler that the type must be *nullable* or *nonnullable*.\n\nThe nullability of a type in a variable declaration is controlled by the *nullable context* in which the variable is declared.\n\n## Nullable contexts\n\nNullable contexts enable fine-grained control for how the compiler interprets reference type variables. The **nullable annotation context** of any given source line is `enabled` or `disabled`. You can think of the pre-C# 8 compiler as compiling all your code in a `disabled` nullable context: Any reference type may be null. The **nullable warnings context** may be set to `enabled`, `disabled`, or `safeonly`. The nullable warnings context specifies the warnings generated by the compiler using its flow analysis.\n\nThe nullable annotation context and nullable warning context can be set for a project using the `NullableContextOptions` element in your `csproj` file. This element configures how the compiler interprets the nullability of types and what warnings are generated. Valid settings are:\n\n- `enable`: The nullable annotation context is **enabled**. The nullable warning context is **enabled**.\n  - Variables of a reference type, `string` for example, are non-nullable.  All nullability warnings are enabled.\n- `disable`: The nullable annotation context is **disabled**. The nullable warning context is **disabled**.\n  - Variables of a reference type are oblivious, just like earlier versions of C#. All nullability warnings are disabled.\n- `safeonly`: The nullable annotation context is **enabled**. The nullable warning context is **safeonly**.\n  - Variables of a reference type are nonnullable. All safety nullability warnings are enabled.\n- `warnings`: The nullable annotation context is **disabled**. The nullable warning context is **enabled**.\n  - Variables of a reference type are oblivious. All nullability warnings are enabled.\n- `safeonlywarnings`: The nullable annotation context is **disabled**. The nullable warning context is **safeonly**.\n  - Variables of a reference type are oblivious. All safety nullability warnings are enabled.\n\nYou can also use directives to set these same contexts anywhere in your project:\n\n- `#nullable enable`: Sets the nullable annotation context and nullable warning context to **enabled**.\n- `#nullable disable`: Sets the nullable annotation context and nullable warning context to **disabled**.\n- `#nullable safeonly`: Set the nullable annotation context to **enabled**, and the warning context to **safeonly**.\n- `#nullable restore`: Restores the nullable annotation context and nullable warning context to the project settings.\n- `#pragma warning disable nullable`: Set the nullable warning context to **disabled**.\n- `#pragma warning enable nullable`: Set the nullable warning context to **enabled**.\n- `#pragma warning restore nullable`: Restores the nullable warning context to the project settings.\n- `#pragma warning safeonly nullable`: Sets the nullable warning context to **safeonly**.\n\nThe default nullable annotation and warning contexts are `disabled`. That decision means that your existing code compiles without changes and without generating any new warnings.\n\nThe differences between the `enabled` and `safeonly` nullable warning contexts are warnings for assigning a nullable reference to a non-nullable reference. The following assignment generates a warning in an `enabled` warning context, but not a `safeonly` warning context. However, the second line, where `s` is dereferenced, generates a warning in a `safeonly` context:\n\n```csharp\nstring s = null; // warning when nullable warning context is enabled.\nvar txt = s.ToString(); // warning when nullable warnings context is safeonly, or enabled.\n```\n\n### Nullable annotation context\n\nThe compiler uses the following rules in a disabled nullable annotation context:\n\n- You can't declare nullable references in a disabled context.\n- All reference variables may be assigned to null.\n- No warnings are generated when a variable of a reference type is dereferenced.\n- The null-forgiving operator may not be used in a disabled context.\n\nThe behavior is the same as previous versions of C#.\n\nThe compiler uses the following rules in an enabled nullable annotation context:\n\n- Any variable of a reference type is a **non-nullable reference**.\n- Any non-nullable reference may be dereferenced safely.\n- Any nullable reference type (noted by `?` after the type in the variable declaration) may be null. Static analysis determines if the value is known to be non-null when it is dereferenced. If not, the compiler warns you.\n- You can use the null-forgiving operator to declare that a nullable reference isn't null.\n\nIn an enabled nullable annotation context, the `?` character appended to a reference type declares a **nullable reference type**. The **null forgiveness operator** (`!`) may be appended to an expression to declare that the expression isn't null.\n\n## Nullable warning context\n\nThe nullable warning context is distinct from the nullable annotation context. Warnings can be enabled even when the new annotations are disabled. The compiler uses static flow analysis to determine the **null state** of any reference. The null state is either **not null** or **maybe null** when the *nullable warning context* isn't **disabled**. If you dereference a reference when the compiler has determined it's **maybe null**, the compiler warns you. The state of a reference is **maybe null** unless the compiler can determine one of two conditions:\n\n1. The variable has been definitely assigned to a non-null value.\n1. The variable or expression has been checked against null before de-referencing it.\n\nThe compiler generates warnings whenever you dereference a variable or expression in a **maybe null** state when the nullable warning context is `enabled` or `safeonly`. Furthermore, warnings are generated when a **maybe null** variable or expression is assigned to a nonnullable reference type when the nullable annotation context is `enabled`.\n\n## Learn more\n\n- [Draft Nullable reference specification](https://github.com/dotnet/csharplang/blob/master/proposals/csharp-8.0/nullable-reference-types-specification.md)\n- [Intro to nullable references tutorial](tutorials/nullable-reference-types.md)\n- [Migrate an existing codebase to nullable references](tutorials/upgrade-to-nullable-references.md)\n","nodes":[{"pos":[4,257],"embed":true,"restype":"x-metadata","content":"title: Nullable reference types\ndescription: This article provides an overview of nullable reference types, added in C# 8. You'll learn how the feature provides safety against null reference exceptions, for new and existing projects.\nms.date: 02/19/2019","nodes":[{"content":"Nullable reference types","nodes":[{"pos":[0,24],"content":"Nullable reference types","nodes":[{"content":"Nullable reference types","pos":[0,24]}]}],"path":["title"],"nosxs":false},{"content":"This article provides an overview of nullable reference types, added in C# 8. You'll learn how the feature provides safety against null reference exceptions, for new and existing projects.","nodes":[{"pos":[0,188],"content":"This article provides an overview of nullable reference types, added in C# 8. You'll learn how the feature provides safety against null reference exceptions, for new and existing projects.","nodes":[{"content":"This article provides an overview of nullable reference types, added in C# 8. You'll learn how the feature provides safety against null reference exceptions, for new and existing projects.","pos":[0,188],"nodes":[{"content":"This article provides an overview of nullable reference types, added in C# 8.","pos":[0,77]},{"content":"You'll learn how the feature provides safety against null reference exceptions, for new and existing projects.","pos":[78,188]}]}]}],"path":["description"],"nosxs":false}],"yml":true},{"pos":[264,288],"content":"Nullable reference types","linkify":"Nullable reference types","nodes":[{"content":"Nullable reference types","pos":[0,24]}]},{"pos":[290,469],"content":"C# 8.0 introduces <bpt id=\"p1\">**</bpt>nullable reference types<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>non-nullable reference types<ept id=\"p2\">**</ept> that enable you to make important statements about the properties for reference type variables:","source":"C# 8.0 introduces **nullable reference types** and **non-nullable reference types** that enable you to make important statements about the properties for reference type variables:"},{"content":"<bpt id=\"p1\">**</bpt>A reference is not supposed to be null<ept id=\"p1\">**</ept>.","pos":[473,516],"source":"**A reference is not supposed to be null**."},{"content":"When variables aren't supposed to be null, the compiler enforces rules that ensure it is safe to dereference these variables without first checking that it isn't null:","pos":[517,684]},{"content":"The variable must be initialized to a non-null value.","pos":[689,742]},{"pos":[747,799],"content":"The variable can never be assigned the value <ph id=\"ph1\">`null`</ph>.","source":"The variable can never be assigned the value `null`."},{"content":"<bpt id=\"p1\">**</bpt>A reference may be null<ept id=\"p1\">**</ept>.","pos":[802,830],"source":"**A reference may be null**."},{"content":"When variables may be null, the compiler enforces different rules to ensure that you've correctly checked for a null reference:","pos":[831,958]},{"content":"The variable may only be dereferenced when the compiler can guarantee that the value isn't null.","pos":[963,1059]},{"pos":[1064,1180],"content":"These variables may be initialized with the default <ph id=\"ph1\">`null`</ph> value and may be assigned the value <ph id=\"ph2\">`null`</ph> in other code.","source":"These variables may be initialized with the default `null` value and may be assigned the value `null` in other code."},{"content":"This new feature provides significant benefits over the handling of reference variables in earlier versions of C# where the design intent couldn't be determined from the variable declaration.","pos":[1182,1373]},{"content":"The compiler didn't provide safety against null reference exceptions for reference types:","pos":[1374,1463]},{"content":"<bpt id=\"p1\">**</bpt>A reference can be null<ept id=\"p1\">**</ept>.","pos":[1467,1495],"source":"**A reference can be null**."},{"content":"No warnings are issued when a reference type is initialized to null, or later assigned to null.","pos":[1496,1591]},{"content":"<bpt id=\"p1\">**</bpt>A reference is assumed to be not null<ept id=\"p1\">**</ept>.","pos":[1594,1636],"source":"**A reference is assumed to be not null**."},{"content":"The compiler doesn't issue any warnings when reference types are dereferenced.","pos":[1637,1715]},{"content":"(With nullable references,  the compiler issues warnings whenever you dereference a variable that may be null).","pos":[1716,1827]},{"content":"With the addition of nullable reference types, you can declare your intent more clearly.","pos":[1829,1917]},{"content":"The <ph id=\"ph1\">`null`</ph> value is the correct way to represent that a variable doesn't refer to a value.","pos":[1918,2008],"source":" The `null` value is the correct way to represent that a variable doesn't refer to a value."},{"content":"Don't use this feature to remove all <ph id=\"ph1\">`null`</ph> values from your code.","pos":[2009,2075],"source":" Don't use this feature to remove all `null` values from your code."},{"content":"Rather, you should declare your intent to the compiler and other developers that read your code.","pos":[2076,2172]},{"content":"By declaring your intent, the compiler informs you when you write code that is inconsistent with that intent.","pos":[2173,2282]},{"content":"A <bpt id=\"p1\">**</bpt>nullable reference type<ept id=\"p1\">**</ept> is noted using the same syntax as <bpt id=\"p2\">[</bpt>nullable value types<ept id=\"p2\">](programming-guide/nullable-types/index.md)</ept>: a <ph id=\"ph1\">`?`</ph> is appended to the type of the variable.","pos":[2284,2461],"source":"A **nullable reference type** is noted using the same syntax as [nullable value types](programming-guide/nullable-types/index.md): a `?` is appended to the type of the variable."},{"content":"For example, the following variable declaration represents a nullable string variable, <ph id=\"ph1\">`name`</ph>:","pos":[2462,2556],"source":" For example, the following variable declaration represents a nullable string variable, `name`:"},{"content":"Any variable where the <ph id=\"ph1\">`?`</ph> is not appended to the type name is a <bpt id=\"p1\">**</bpt>non-nullable reference type<ept id=\"p1\">**</ept>.","pos":[2587,2684],"source":"Any variable where the `?` is not appended to the type name is a **non-nullable reference type**."},{"content":"That includes all reference type variables in existing code when you have enabled this feature.","pos":[2685,2780]},{"content":"The compiler uses static analysis to determine if a nullable reference is known to be non-null.","pos":[2782,2877]},{"content":"The compiler warns you if you dereference a nullable reference when it may be null.","pos":[2878,2961]},{"content":"You can override this behavior by using the <bpt id=\"p1\">**</bpt>null-forgiving operator<ept id=\"p1\">**</ept> (<ph id=\"ph1\">`!`</ph>) following a variable name.","pos":[2962,3066],"source":" You can override this behavior by using the **null-forgiving operator** (`!`) following a variable name."},{"content":"For example, if you know the <ph id=\"ph1\">`name`</ph> variable isn't null but the compiler issues a warning, you can write the following code to override the compiler's analysis:","pos":[3067,3227],"source":" For example, if you know the `name` variable isn't null but the compiler issues a warning, you can write the following code to override the compiler's analysis:"},{"pos":[3258,3482],"content":"You can read details about this operator in the <bpt id=\"p1\">[</bpt>draft nullable reference types<ept id=\"p1\">](../../_csharplang/proposals/csharp-8.0/nullable-reference-types-specification.md#the-null-forgiving-operator)</ept> specification proposal on GitHub.","source":"You can read details about this operator in the [draft nullable reference types](../../_csharplang/proposals/csharp-8.0/nullable-reference-types-specification.md#the-null-forgiving-operator) specification proposal on GitHub."},{"pos":[3487,3507],"content":"Nullability of types","linkify":"Nullability of types","nodes":[{"content":"Nullability of types","pos":[0,20]}]},{"pos":[3509,3610],"content":"Any reference type can have one of four <bpt id=\"p1\">*</bpt>nullabilities<ept id=\"p1\">*</ept>, which describes when warnings are generated:","source":"Any reference type can have one of four *nullabilities*, which describes when warnings are generated:"},{"content":"<bpt id=\"p1\">*</bpt>Nonnullable<ept id=\"p1\">*</ept>: Null can't be assigned to variables of this type.","pos":[3614,3678],"source":"*Nonnullable*: Null can't be assigned to variables of this type."},{"content":"Variables of this type don't need to be null-checked before dereferencing.","pos":[3679,3753]},{"content":"<bpt id=\"p1\">*</bpt>Nullable<ept id=\"p1\">*</ept>: Null can be assigned to variables of this type.","pos":[3756,3815],"source":"*Nullable*: Null can be assigned to variables of this type."},{"content":"Dereferencing variables of this type without first checking for <ph id=\"ph1\">`null`</ph> causes a warning.","pos":[3816,3904],"source":" Dereferencing variables of this type without first checking for `null` causes a warning."},{"content":"<bpt id=\"p1\">*</bpt>Oblivious<ept id=\"p1\">*</ept>: This is the pre-C# 8 state.","pos":[3907,3947],"source":"*Oblivious*: This is the pre-C# 8 state."},{"content":"Variables of this type can be dereferenced or assigned without warnings.","pos":[3948,4020]},{"pos":[4023,4164],"content":"<bpt id=\"p1\">*</bpt>Unknown<ept id=\"p1\">*</ept>: This is generally for type parameters where constraints don't tell the compiler that the type must be <bpt id=\"p2\">*</bpt>nullable<ept id=\"p2\">*</ept> or <bpt id=\"p3\">*</bpt>nonnullable<ept id=\"p3\">*</ept>.","source":"*Unknown*: This is generally for type parameters where constraints don't tell the compiler that the type must be *nullable* or *nonnullable*."},{"pos":[4166,4292],"content":"The nullability of a type in a variable declaration is controlled by the <bpt id=\"p1\">*</bpt>nullable context<ept id=\"p1\">*</ept> in which the variable is declared.","source":"The nullability of a type in a variable declaration is controlled by the *nullable context* in which the variable is declared."},{"pos":[4297,4314],"content":"Nullable contexts","linkify":"Nullable contexts","nodes":[{"content":"Nullable contexts","pos":[0,17]}]},{"content":"Nullable contexts enable fine-grained control for how the compiler interprets reference type variables.","pos":[4316,4419]},{"content":"The <bpt id=\"p1\">**</bpt>nullable annotation context<ept id=\"p1\">**</ept> of any given source line is <ph id=\"ph1\">`enabled`</ph> or <ph id=\"ph2\">`disabled`</ph>.","pos":[4420,4508],"source":" The **nullable annotation context** of any given source line is `enabled` or `disabled`."},{"content":"You can think of the pre-C# 8 compiler as compiling all your code in a <ph id=\"ph1\">`disabled`</ph> nullable context: Any reference type may be null.","pos":[4509,4640],"source":" You can think of the pre-C# 8 compiler as compiling all your code in a `disabled` nullable context: Any reference type may be null."},{"content":"The <bpt id=\"p1\">**</bpt>nullable warnings context<ept id=\"p1\">**</ept> may be set to <ph id=\"ph1\">`enabled`</ph>, <ph id=\"ph2\">`disabled`</ph>, or <ph id=\"ph3\">`safeonly`</ph>.","pos":[4641,4726],"source":" The **nullable warnings context** may be set to `enabled`, `disabled`, or `safeonly`."},{"content":"The nullable warnings context specifies the warnings generated by the compiler using its flow analysis.","pos":[4727,4830]},{"content":"The nullable annotation context and nullable warning context can be set for a project using the <ph id=\"ph1\">`NullableContextOptions`</ph> element in your <ph id=\"ph2\">`csproj`</ph> file.","pos":[4832,4983],"source":"The nullable annotation context and nullable warning context can be set for a project using the `NullableContextOptions` element in your `csproj` file."},{"content":"This element configures how the compiler interprets the nullability of types and what warnings are generated.","pos":[4984,5093]},{"content":"Valid settings are:","pos":[5094,5113]},{"content":"<ph id=\"ph1\">`enable`</ph>: The nullable annotation context is <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>.","pos":[5117,5174],"source":"`enable`: The nullable annotation context is **enabled**."},{"content":"The nullable warning context is <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>.","pos":[5175,5219],"source":" The nullable warning context is **enabled**."},{"content":"Variables of a reference type, <ph id=\"ph1\">`string`</ph> for example, are non-nullable.","pos":[5224,5294],"source":"Variables of a reference type, `string` for example, are non-nullable."},{"content":"All nullability warnings are enabled.","pos":[5296,5333]},{"content":"<ph id=\"ph1\">`disable`</ph>: The nullable annotation context is <bpt id=\"p1\">**</bpt>disabled<ept id=\"p1\">**</ept>.","pos":[5336,5395],"source":"`disable`: The nullable annotation context is **disabled**."},{"content":"The nullable warning context is <bpt id=\"p1\">**</bpt>disabled<ept id=\"p1\">**</ept>.","pos":[5396,5441],"source":" The nullable warning context is **disabled**."},{"content":"Variables of a reference type are oblivious, just like earlier versions of C#.","pos":[5446,5524]},{"content":"All nullability warnings are disabled.","pos":[5525,5563]},{"content":"<ph id=\"ph1\">`safeonly`</ph>: The nullable annotation context is <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>.","pos":[5566,5625],"source":"`safeonly`: The nullable annotation context is **enabled**."},{"content":"The nullable warning context is <bpt id=\"p1\">**</bpt>safeonly<ept id=\"p1\">**</ept>.","pos":[5626,5671],"source":" The nullable warning context is **safeonly**."},{"content":"Variables of a reference type are nonnullable.","pos":[5676,5722]},{"content":"All safety nullability warnings are enabled.","pos":[5723,5767]},{"content":"<ph id=\"ph1\">`warnings`</ph>: The nullable annotation context is <bpt id=\"p1\">**</bpt>disabled<ept id=\"p1\">**</ept>.","pos":[5770,5830],"source":"`warnings`: The nullable annotation context is **disabled**."},{"content":"The nullable warning context is <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>.","pos":[5831,5875],"source":" The nullable warning context is **enabled**."},{"content":"Variables of a reference type are oblivious.","pos":[5880,5924]},{"content":"All nullability warnings are enabled.","pos":[5925,5962]},{"content":"<ph id=\"ph1\">`safeonlywarnings`</ph>: The nullable annotation context is <bpt id=\"p1\">**</bpt>disabled<ept id=\"p1\">**</ept>.","pos":[5965,6033],"source":"`safeonlywarnings`: The nullable annotation context is **disabled**."},{"content":"The nullable warning context is <bpt id=\"p1\">**</bpt>safeonly<ept id=\"p1\">**</ept>.","pos":[6034,6079],"source":" The nullable warning context is **safeonly**."},{"content":"Variables of a reference type are oblivious.","pos":[6084,6128]},{"content":"All safety nullability warnings are enabled.","pos":[6129,6173]},{"content":"You can also use directives to set these same contexts anywhere in your project:","pos":[6175,6255]},{"pos":[6259,6360],"content":"<ph id=\"ph1\">`#nullable enable`</ph>: Sets the nullable annotation context and nullable warning context to <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>.","source":"`#nullable enable`: Sets the nullable annotation context and nullable warning context to **enabled**."},{"pos":[6363,6466],"content":"<ph id=\"ph1\">`#nullable disable`</ph>: Sets the nullable annotation context and nullable warning context to <bpt id=\"p1\">**</bpt>disabled<ept id=\"p1\">**</ept>.","source":"`#nullable disable`: Sets the nullable annotation context and nullable warning context to **disabled**."},{"pos":[6469,6583],"content":"<ph id=\"ph1\">`#nullable safeonly`</ph>: Set the nullable annotation context to <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>, and the warning context to <bpt id=\"p2\">**</bpt>safeonly<ept id=\"p2\">**</ept>.","source":"`#nullable safeonly`: Set the nullable annotation context to **enabled**, and the warning context to **safeonly**."},{"pos":[6586,6701],"content":"<ph id=\"ph1\">`#nullable restore`</ph>: Restores the nullable annotation context and nullable warning context to the project settings.","source":"`#nullable restore`: Restores the nullable annotation context and nullable warning context to the project settings."},{"pos":[6704,6789],"content":"<ph id=\"ph1\">`#pragma warning disable nullable`</ph>: Set the nullable warning context to <bpt id=\"p1\">**</bpt>disabled<ept id=\"p1\">**</ept>.","source":"`#pragma warning disable nullable`: Set the nullable warning context to **disabled**."},{"pos":[6792,6875],"content":"<ph id=\"ph1\">`#pragma warning enable nullable`</ph>: Set the nullable warning context to <bpt id=\"p1\">**</bpt>enabled<ept id=\"p1\">**</ept>.","source":"`#pragma warning enable nullable`: Set the nullable warning context to **enabled**."},{"pos":[6878,6976],"content":"<ph id=\"ph1\">`#pragma warning restore nullable`</ph>: Restores the nullable warning context to the project settings.","source":"`#pragma warning restore nullable`: Restores the nullable warning context to the project settings."},{"pos":[6979,7066],"content":"<ph id=\"ph1\">`#pragma warning safeonly nullable`</ph>: Sets the nullable warning context to <bpt id=\"p1\">**</bpt>safeonly<ept id=\"p1\">**</ept>.","source":"`#pragma warning safeonly nullable`: Sets the nullable warning context to **safeonly**."},{"content":"The default nullable annotation and warning contexts are <ph id=\"ph1\">`disabled`</ph>.","pos":[7068,7136],"source":"The default nullable annotation and warning contexts are `disabled`."},{"content":"That decision means that your existing code compiles without changes and without generating any new warnings.","pos":[7137,7246]},{"content":"The differences between the <ph id=\"ph1\">`enabled`</ph> and <ph id=\"ph2\">`safeonly`</ph> nullable warning contexts are warnings for assigning a nullable reference to a non-nullable reference.","pos":[7248,7403],"source":"The differences between the `enabled` and `safeonly` nullable warning contexts are warnings for assigning a nullable reference to a non-nullable reference."},{"content":"The following assignment generates a warning in an <ph id=\"ph1\">`enabled`</ph> warning context, but not a <ph id=\"ph2\">`safeonly`</ph> warning context.","pos":[7404,7519],"source":" The following assignment generates a warning in an `enabled` warning context, but not a `safeonly` warning context."},{"content":"However, the second line, where <ph id=\"ph1\">`s`</ph> is dereferenced, generates a warning in a <ph id=\"ph2\">`safeonly`</ph> context:","pos":[7520,7617],"source":" However, the second line, where `s` is dereferenced, generates a warning in a `safeonly` context:"},{"pos":[7799,7826],"content":"Nullable annotation context","linkify":"Nullable annotation context","nodes":[{"content":"Nullable annotation context","pos":[0,27]}]},{"content":"The compiler uses the following rules in a disabled nullable annotation context:","pos":[7828,7908]},{"content":"You can't declare nullable references in a disabled context.","pos":[7912,7972]},{"content":"All reference variables may be assigned to null.","pos":[7975,8023]},{"content":"No warnings are generated when a variable of a reference type is dereferenced.","pos":[8026,8104]},{"content":"The null-forgiving operator may not be used in a disabled context.","pos":[8107,8173]},{"content":"The behavior is the same as previous versions of C#.","pos":[8175,8227]},{"content":"The compiler uses the following rules in an enabled nullable annotation context:","pos":[8229,8309]},{"pos":[8313,8378],"content":"Any variable of a reference type is a <bpt id=\"p1\">**</bpt>non-nullable reference<ept id=\"p1\">**</ept>.","source":"Any variable of a reference type is a **non-nullable reference**."},{"content":"Any non-nullable reference may be dereferenced safely.","pos":[8381,8435]},{"content":"Any nullable reference type (noted by <ph id=\"ph1\">`?`</ph> after the type in the variable declaration) may be null.","pos":[8438,8536],"source":"Any nullable reference type (noted by `?` after the type in the variable declaration) may be null."},{"content":"Static analysis determines if the value is known to be non-null when it is dereferenced.","pos":[8537,8625]},{"content":"If not, the compiler warns you.","pos":[8626,8657]},{"content":"You can use the null-forgiving operator to declare that a nullable reference isn't null.","pos":[8660,8748]},{"content":"In an enabled nullable annotation context, the <ph id=\"ph1\">`?`</ph> character appended to a reference type declares a <bpt id=\"p1\">**</bpt>nullable reference type<ept id=\"p1\">**</ept>.","pos":[8750,8879],"source":"In an enabled nullable annotation context, the `?` character appended to a reference type declares a **nullable reference type**."},{"content":"The <bpt id=\"p1\">**</bpt>null forgiveness operator<ept id=\"p1\">**</ept> (<ph id=\"ph1\">`!`</ph>) may be appended to an expression to declare that the expression isn't null.","pos":[8880,8995],"source":" The **null forgiveness operator** (`!`) may be appended to an expression to declare that the expression isn't null."},{"pos":[9000,9024],"content":"Nullable warning context","linkify":"Nullable warning context","nodes":[{"content":"Nullable warning context","pos":[0,24]}]},{"content":"The nullable warning context is distinct from the nullable annotation context.","pos":[9026,9104]},{"content":"Warnings can be enabled even when the new annotations are disabled.","pos":[9105,9172]},{"content":"The compiler uses static flow analysis to determine the <bpt id=\"p1\">**</bpt>null state<ept id=\"p1\">**</ept> of any reference.","pos":[9173,9261],"source":" The compiler uses static flow analysis to determine the **null state** of any reference."},{"content":"The null state is either <bpt id=\"p1\">**</bpt>not null<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>maybe null<ept id=\"p2\">**</ept> when the <bpt id=\"p3\">*</bpt>nullable warning context<ept id=\"p3\">*</ept> isn't <bpt id=\"p4\">**</bpt>disabled<ept id=\"p4\">**</ept>.","pos":[9262,9373],"source":" The null state is either **not null** or **maybe null** when the *nullable warning context* isn't **disabled**."},{"content":"If you dereference a reference when the compiler has determined it's <bpt id=\"p1\">**</bpt>maybe null<ept id=\"p1\">**</ept>, the compiler warns you.","pos":[9374,9482],"source":" If you dereference a reference when the compiler has determined it's **maybe null**, the compiler warns you."},{"content":"The state of a reference is <bpt id=\"p1\">**</bpt>maybe null<ept id=\"p1\">**</ept> unless the compiler can determine one of two conditions:","pos":[9483,9582],"source":" The state of a reference is **maybe null** unless the compiler can determine one of two conditions:"},{"content":"The variable has been definitely assigned to a non-null value.","pos":[9587,9649]},{"content":"The variable or expression has been checked against null before de-referencing it.","pos":[9653,9735]},{"content":"The compiler generates warnings whenever you dereference a variable or expression in a <bpt id=\"p1\">**</bpt>maybe null<ept id=\"p1\">**</ept> state when the nullable warning context is <ph id=\"ph1\">`enabled`</ph> or <ph id=\"ph2\">`safeonly`</ph>.","pos":[9737,9906],"source":"The compiler generates warnings whenever you dereference a variable or expression in a **maybe null** state when the nullable warning context is `enabled` or `safeonly`."},{"content":"Furthermore, warnings are generated when a <bpt id=\"p1\">**</bpt>maybe null<ept id=\"p1\">**</ept> variable or expression is assigned to a nonnullable reference type when the nullable annotation context is <ph id=\"ph1\">`enabled`</ph>.","pos":[9907,10082],"source":" Furthermore, warnings are generated when a **maybe null** variable or expression is assigned to a nonnullable reference type when the nullable annotation context is `enabled`."},{"pos":[10087,10097],"content":"Learn more","linkify":"Learn more","nodes":[{"content":"Learn more","pos":[0,10]}]},{"pos":[10101,10254],"content":"<bpt id=\"p1\">[</bpt>Draft Nullable reference specification<ept id=\"p1\">](https://github.com/dotnet/csharplang/blob/master/proposals/csharp-8.0/nullable-reference-types-specification.md)</ept>","source":"[Draft Nullable reference specification](https://github.com/dotnet/csharplang/blob/master/proposals/csharp-8.0/nullable-reference-types-specification.md)"},{"pos":[10257,10335],"content":"<bpt id=\"p1\">[</bpt>Intro to nullable references tutorial<ept id=\"p1\">](tutorials/nullable-reference-types.md)</ept>","source":"[Intro to nullable references tutorial](tutorials/nullable-reference-types.md)"},{"pos":[10338,10436],"content":"<bpt id=\"p1\">[</bpt>Migrate an existing codebase to nullable references<ept id=\"p1\">](tutorials/upgrade-to-nullable-references.md)</ept>","source":"[Migrate an existing codebase to nullable references](tutorials/upgrade-to-nullable-references.md)"}]}