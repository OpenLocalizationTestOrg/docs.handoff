{"content":"---\ntitle: \"How to: Use the ASP.NET Role Provider with a Service | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 88d33a81-8ac7-48de-978c-5c5b1257951e\ncaps.latest.revision: 8\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Use the ASP.NET Role Provider with a Service\nThe [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider (in conjunction with the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] membership provider) is a feature that enables [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] developers to create Web sites that allow users to create an account with a site and to be assigned roles for authorization purposes. With this feature, any user can establish an account with the site, and log in for exclusive access to the site and its services. This is in contrast to Windows security, which requires users to have accounts in a Windows domain. Instead, any user who supplies his or her credentials (the user name/password combination) can use the site and its services.  \n  \n For a sample application, see [Membership and Role Provider](../../../../docs/framework/wcf/samples/membership-and-role-provider.md). [!INCLUDE[crabout](../../../../includes/crabout-md.md)] the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] membership provider feature, see [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md).  \n  \n The role provider feature uses a SQL Server database to store user information. [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] developers can take advantage of these features for security purposes. When integrated into a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application, users must supply a user name/password combination to the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client application. To enable [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to use the database, you must create an instance of the <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> class, set its <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.PrincipalPermissionMode%2A> property to <xref:System.ServiceModel.Description.PrincipalPermissionMode>, and add the instance to the collection of behaviors to the <xref:System.ServiceModel.ServiceHost> that is hosting the service.  \n  \n### To configure the role provider  \n  \n1.  In the Web.config file, under the <`system.web`> element, add a <`roleManager`> element and set its `enabled` attribute to `true`.  \n  \n2.  Set the `defaultProvider` attribute to `SqlRoleProvider`.  \n  \n3.  As a child to the <`roleManager`> element, add a <`providers`> element.  \n  \n4.  As a child to the <`providers`> element, add an <`add`> element with the following attributes set to appropriate values: `name`, `type`, `connectionStringName`, and `applicationName`, as shown in the following example.  \n  \n    ```  \n    <!-- Configure the Sql Role Provider. -->  \n    <roleManager enabled =\"true\"   \n     defaultProvider =\"SqlRoleProvider\" >  \n       <providers>  \n         <add name =\"SqlRoleProvider\"   \n           type=\"System.Web.Security.SqlRoleProvider\"   \n           connectionStringName=\"SqlConn\"   \n           applicationName=\"MembershipAndRoleProviderSample\"/>  \n       </providers>  \n    </roleManager>  \n    ```  \n  \n### To configure the service to use the role provider  \n  \n1.  In the Web.config file, add a [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element.  \n  \n2.  Add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element to the <`system.ServiceModel`> element.  \n  \n3.  Add a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the <`behaviors`> element.  \n  \n4.  Add a [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-endpointbehaviors.md) element and set the `name` attribute to an appropriate value.  \n  \n5.  Add a [\\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) to the <`behavior`> element.  \n  \n6.  Set the `principalPermissionMode` attribute to `UseAspNetRoles`.  \n  \n7.  Set the `roleProviderName` attribute to `SqlRoleProvider`. The following example shows a fragment of the configuration.  \n  \n    ```  \n    <behaviors>  \n     <serviceBehaviors>  \n      <behavior name=\"CalculatorServiceBehavior\">  \n       <serviceAuthorization principalPermissionMode =\"UseAspNetRoles\"  \n                             roleProviderName =\"SqlRoleProvider\" />  \n      </behavior>  \n     </serviceBehaviors>  \n    </behaviors>  \n    ```  \n  \n## See Also  \n [Membership and Role Provider](../../../../docs/framework/wcf/samples/membership-and-role-provider.md)   \n [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)","nodes":[{"pos":[12,81],"content":"How to: Use the ASP.NET Role Provider with a Service | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Use the ASP.NET Role Provider with a Service | Microsoft Docs","pos":[0,69]}]},{"pos":[379,431],"content":"How to: Use the ASP.NET Role Provider with a Service","linkify":"How to: Use the ASP.NET Role Provider with a Service","nodes":[{"content":"How to: Use the ASP.NET Role Provider with a Service","pos":[0,52]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> role provider (in conjunction with the <ph id=\"ph2\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> membership provider) is a feature that enables <ph id=\"ph3\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> developers to create Web sites that allow users to create an account with a site and to be assigned roles for authorization purposes.","pos":[432,829],"source":"The [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider (in conjunction with the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] membership provider) is a feature that enables [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] developers to create Web sites that allow users to create an account with a site and to be assigned roles for authorization purposes."},{"content":"With this feature, any user can establish an account with the site, and log in for exclusive access to the site and its services.","pos":[830,959]},{"content":"This is in contrast to Windows security, which requires users to have accounts in a Windows domain.","pos":[960,1059]},{"content":"Instead, any user who supplies his or her credentials (the user name/password combination) can use the site and its services.","pos":[1060,1185]},{"content":"For a sample application, see <bpt id=\"p1\">[</bpt>Membership and Role Provider<ept id=\"p1\">](../../../../docs/framework/wcf/samples/membership-and-role-provider.md)</ept>.","pos":[1192,1325],"source":"For a sample application, see [Membership and Role Provider](../../../../docs/framework/wcf/samples/membership-and-role-provider.md)."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> the <ph id=\"ph2\">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]</ph> membership provider feature, see <bpt id=\"p1\">[</bpt>How to: Use the ASP.NET Membership Provider<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)</ept>.","pos":[1326,1616],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] membership provider feature, see [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)."},{"content":"The role provider feature uses a SQL Server database to store user information.","pos":[1623,1702]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> developers can take advantage of these features for security purposes.","pos":[1703,1829],"source":"[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] developers can take advantage of these features for security purposes."},{"content":"When integrated into a <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> application, users must supply a user name/password combination to the <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> client application.","pos":[1830,2055],"source":" When integrated into a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application, users must supply a user name/password combination to the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client application."},{"content":"To enable <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> to use the database, you must create an instance of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.ServiceAuthorizationBehavior&gt;</ph> class, set its <ph id=\"ph3\">&lt;xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.PrincipalPermissionMode%2A&gt;</ph> property to <ph id=\"ph4\">&lt;xref:System.ServiceModel.Description.PrincipalPermissionMode&gt;</ph>, and add the instance to the collection of behaviors to the <ph id=\"ph5\">&lt;xref:System.ServiceModel.ServiceHost&gt;</ph> that is hosting the service.","pos":[2056,2558],"source":" To enable [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to use the database, you must create an instance of the <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> class, set its <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.PrincipalPermissionMode%2A> property to <xref:System.ServiceModel.Description.PrincipalPermissionMode>, and add the instance to the collection of behaviors to the <xref:System.ServiceModel.ServiceHost> that is hosting the service."},{"pos":[2568,2598],"content":"To configure the role provider","linkify":"To configure the role provider","nodes":[{"content":"To configure the role provider","pos":[0,30]}]},{"pos":[2608,2738],"content":"In the Web.config file, under the &lt;<ph id=\"ph1\">`system.web`</ph>&gt; element, add a &lt;<ph id=\"ph2\">`roleManager`</ph>&gt; element and set its <ph id=\"ph3\">`enabled`</ph> attribute to <ph id=\"ph4\">`true`</ph>.","source":"In the Web.config file, under the <`system.web`> element, add a <`roleManager`> element and set its `enabled` attribute to `true`."},{"pos":[2748,2805],"content":"Set the <ph id=\"ph1\">`defaultProvider`</ph> attribute to <ph id=\"ph2\">`SqlRoleProvider`</ph>.","source":"Set the `defaultProvider` attribute to `SqlRoleProvider`."},{"pos":[2815,2886],"content":"As a child to the &lt;<ph id=\"ph1\">`roleManager`</ph>&gt; element, add a &lt;<ph id=\"ph2\">`providers`</ph>&gt; element.","source":"As a child to the <`roleManager`> element, add a <`providers`> element."},{"pos":[2896,3114],"content":"As a child to the &lt;<ph id=\"ph1\">`providers`</ph>&gt; element, add an &lt;<ph id=\"ph2\">`add`</ph>&gt; element with the following attributes set to appropriate values: <ph id=\"ph3\">`name`</ph>, <ph id=\"ph4\">`type`</ph>, <ph id=\"ph5\">`connectionStringName`</ph>, and <ph id=\"ph6\">`applicationName`</ph>, as shown in the following example.","source":"As a child to the <`providers`> element, add an <`add`> element with the following attributes set to appropriate values: `name`, `type`, `connectionStringName`, and `applicationName`, as shown in the following example."},{"pos":[3547,3596],"content":"To configure the service to use the role provider","linkify":"To configure the service to use the role provider","nodes":[{"content":"To configure the service to use the role provider","pos":[0,49]}]},{"pos":[3606,3751],"content":"In the Web.config file, add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>system.serviceModel&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md)</ept> element.","source":"In the Web.config file, add a [\\<system.serviceModel>](../../../../docs/framework/configure-apps/file-schema/wcf/system-servicemodel.md) element."},{"pos":[3761,3901],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behaviors&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md)</ept> element to the &lt;<ph id=\"ph2\">`system.ServiceModel`</ph>&gt; element.","source":"Add a [\\<behaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/behaviors.md) element to the <`system.ServiceModel`> element."},{"pos":[3911,4047],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceBehaviors&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)</ept> to the &lt;<ph id=\"ph2\">`behaviors`</ph>&gt; element.","source":"Add a [\\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md) to the <`behaviors`> element."},{"pos":[4057,4230],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>behavior&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-endpointbehaviors.md)</ept> element and set the <ph id=\"ph2\">`name`</ph> attribute to an appropriate value.","source":"Add a [\\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-endpointbehaviors.md) element and set the `name` attribute to an appropriate value."},{"pos":[4240,4391],"content":"Add a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>serviceAuthorization&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md)</ept> to the &lt;<ph id=\"ph2\">`behavior`</ph>&gt; element.","source":"Add a [\\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) to the <`behavior`> element."},{"pos":[4401,4465],"content":"Set the <ph id=\"ph1\">`principalPermissionMode`</ph> attribute to <ph id=\"ph2\">`UseAspNetRoles`</ph>.","source":"Set the `principalPermissionMode` attribute to `UseAspNetRoles`."},{"content":"Set the <ph id=\"ph1\">`roleProviderName`</ph> attribute to <ph id=\"ph2\">`SqlRoleProvider`</ph>.","pos":[4475,4533],"source":"Set the `roleProviderName` attribute to `SqlRoleProvider`."},{"content":"The following example shows a fragment of the configuration.","pos":[4534,4594]},{"pos":[4931,4939],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Membership and Role Provider<ept id=\"p1\">](../../../../docs/framework/wcf/samples/membership-and-role-provider.md)</ept><ph id=\"ph1\"> </ph>","pos":[4943,5046],"source":"[Membership and Role Provider](../../../../docs/framework/wcf/samples/membership-and-role-provider.md) "},{"content":"<bpt id=\"p1\"> [</bpt>How to: Use the ASP.NET Membership Provider<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)</ept>","pos":[5049,5188],"source":" [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)"}]}