{"content":"---\ntitle: \"How to: Define a Service Operation (WCF Data Services) | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework-oob\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nhelpviewer_keywords: \n  - \"Service Operations [WCF Data Services]\"\n  - \"WCF Data Services, service operations\"\nms.assetid: dfcd3cb1-2f07-4d0b-b16a-6b056c4f45fa\ncaps.latest.revision: 2\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Define a Service Operation (WCF Data Services)\n[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] expose methods that are defined on the server as service operations. Service operations allow a data service to provide access through a URI to a method that is defined on the server. To define a service operation, apply the [`WebGet]` or `[WebInvoke]` attribute to the method. To support query operators, the service operation must return an <xref:System.Linq.IQueryable%601> instance. Service operations may access the underlying data source through the <xref:System.Data.Services.DataService%601.CurrentDataSource%2A> property on the <xref:System.Data.Services.DataService%601>. For more information, see [Service Operations](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md).  \n  \n The example in this topic defines a service operation named `GetOrdersByCity` that returns a filtered <xref:System.Linq.IQueryable%601> instance of `Orders` and related `Order_Details` objects. The example accesses the <xref:System.Data.Objects.ObjectContext> instance that is the data source for the Northwind sample data service. This service is created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md).  \n  \n### To define a service operation in the Northwind data service  \n  \n1.  In the Northwind data service project, open the Northwind.svc file.  \n  \n2.  In the `Northwind` class, define a service operation method named `GetOrdersByCity` as follows:  \n  \n     [!code-csharp[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationdef)]\n     [!code-vb[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationdef)]  \n  \n3.  In the `InitializeService` method of the `Northwind` class, add the following code to enable access to the service operation:  \n  \n     [!code-csharp[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationconfig)]\n     [!code-vb[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationconfig)]  \n  \n### To query the GetOrdersByCity service operation  \n  \n-   In a Web browser, enter one of the following URIs to invoke the service operation that is defined in the following example:  \n  \n    -   `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'`  \n  \n    -   `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'&$top=2`  \n  \n    -   `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'&$expand=Order_Details&$orderby=RequiredDate desc`  \n  \n## Example  \n The following example implements a service operation named `GetOrderByCity` on the Northwind data service. This operation uses the ADO.NET Entity Framework to return a set of `Orders` and related `Order_Details` objects as an <xref:System.Linq.IQueryable%601> instance based on the provided city name.  \n  \n> [!NOTE]\n>  Query operators are supported on this service operation endpoint because the method returns an <xref:System.Linq.IQueryable%601> instance.  \n  \n [!code-csharp[Astoria Northwind Service#ServiceOperation](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperation)]\n [!code-vb[Astoria Northwind Service#ServiceOperation](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperation)]  \n  \n## See Also  \n [Defining WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)","nodes":[{"pos":[12,83],"content":"How to: Define a Service Operation (WCF Data Services) | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Define a Service Operation (WCF Data Services) | Microsoft Docs","pos":[0,71]}]},{"pos":[496,550],"content":"How to: Define a Service Operation (WCF Data Services)","linkify":"How to: Define a Service Operation (WCF Data Services)","nodes":[{"content":"How to: Define a Service Operation (WCF Data Services)","pos":[0,54]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</ph> expose methods that are defined on the server as service operations.","pos":[551,679],"source":"[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] expose methods that are defined on the server as service operations."},{"content":"Service operations allow a data service to provide access through a URI to a method that is defined on the server.","pos":[680,794]},{"content":"To define a service operation, apply the [<ph id=\"ph1\">`WebGet]`</ph> or <ph id=\"ph2\">`[WebInvoke]`</ph> attribute to the method.","pos":[795,888],"source":" To define a service operation, apply the [`WebGet]` or `[WebInvoke]` attribute to the method."},{"content":"To support query operators, the service operation must return an <ph id=\"ph1\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance.","pos":[889,997],"source":" To support query operators, the service operation must return an <xref:System.Linq.IQueryable%601> instance."},{"content":"Service operations may access the underlying data source through the <ph id=\"ph1\">&lt;xref:System.Data.Services.DataService%601.CurrentDataSource%2A&gt;</ph> property on the <ph id=\"ph2\">&lt;xref:System.Data.Services.DataService%601&gt;</ph>.","pos":[998,1192],"source":" Service operations may access the underlying data source through the <xref:System.Data.Services.DataService%601.CurrentDataSource%2A> property on the <xref:System.Data.Services.DataService%601>."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Service Operations<ept id=\"p1\">](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md)</ept>.","pos":[1193,1317],"source":" For more information, see [Service Operations](../../../../docs/framework/data/wcf/service-operations-wcf-data-services.md)."},{"content":"The example in this topic defines a service operation named <ph id=\"ph1\">`GetOrdersByCity`</ph> that returns a filtered <ph id=\"ph2\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance of <ph id=\"ph3\">`Orders`</ph> and related <ph id=\"ph4\">`Order_Details`</ph> objects.","pos":[1324,1517],"source":"The example in this topic defines a service operation named `GetOrdersByCity` that returns a filtered <xref:System.Linq.IQueryable%601> instance of `Orders` and related `Order_Details` objects."},{"content":"The example accesses the <ph id=\"ph1\">&lt;xref:System.Data.Objects.ObjectContext&gt;</ph> instance that is the data source for the Northwind sample data service.","pos":[1518,1655],"source":" The example accesses the <xref:System.Data.Objects.ObjectContext> instance that is the data source for the Northwind sample data service."},{"content":"This service is created when you complete the <bpt id=\"p1\">[</bpt>WCF Data Services quickstart<ept id=\"p1\">](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)</ept>.","pos":[1656,1802],"source":" This service is created when you complete the [WCF Data Services quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)."},{"pos":[1812,1871],"content":"To define a service operation in the Northwind data service","linkify":"To define a service operation in the Northwind data service","nodes":[{"content":"To define a service operation in the Northwind data service","pos":[0,59]}]},{"content":"In the Northwind data service project, open the Northwind.svc file.","pos":[1881,1948]},{"pos":[1958,2053],"content":"In the <ph id=\"ph1\">`Northwind`</ph> class, define a service operation method named <ph id=\"ph2\">`GetOrdersByCity`</ph> as follows:","source":"In the `Northwind` class, define a service operation method named `GetOrdersByCity` as follows:"},{"pos":[2064,2435],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Service#ServiceOperationDef<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationdef)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Northwind Service#ServiceOperationDef<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationdef)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationdef)]\n [!code-vb[Astoria Northwind Service#ServiceOperationDef](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationdef)]"},{"pos":[2445,2570],"content":"In the <ph id=\"ph1\">`InitializeService`</ph> method of the <ph id=\"ph2\">`Northwind`</ph> class, add the following code to enable access to the service operation:","source":"In the `InitializeService` method of the `Northwind` class, add the following code to enable access to the service operation:"},{"pos":[2581,2964],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Service#ServiceOperationConfig<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationconfig)</ept><ept id=\"p1\">]</ept>  <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Northwind Service#ServiceOperationConfig<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationconfig)</ept><ept id=\"p3\">]</ept>","leadings":["","    "],"source":"[!code-csharp[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperationconfig)]\n [!code-vb[Astoria Northwind Service#ServiceOperationConfig](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperationconfig)]"},{"pos":[2974,3020],"content":"To query the GetOrdersByCity service operation","linkify":"To query the GetOrdersByCity service operation","nodes":[{"content":"To query the GetOrdersByCity service operation","pos":[0,46]}]},{"content":"In a Web browser, enter one of the following URIs to invoke the service operation that is defined in the following example:","pos":[3030,3153]},{"pos":[3464,3471],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example implements a service operation named <ph id=\"ph1\">`GetOrderByCity`</ph> on the Northwind data service.","pos":[3475,3581],"source":"The following example implements a service operation named `GetOrderByCity` on the Northwind data service."},{"content":"This operation uses the ADO.NET Entity Framework to return a set of <ph id=\"ph1\">`Orders`</ph> and related <ph id=\"ph2\">`Order_Details`</ph> objects as an <ph id=\"ph3\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance based on the provided city name.","pos":[3582,3776],"source":" This operation uses the ADO.NET Entity Framework to return a set of `Orders` and related `Order_Details` objects as an <xref:System.Linq.IQueryable%601> instance based on the provided city name."},{"pos":[3784,3933],"content":"[!NOTE]\n Query operators are supported on this service operation endpoint because the method returns an <xref:System.Linq.IQueryable%601> instance.","leadings":["","> "],"nodes":[{"content":"Query operators are supported on this service operation endpoint because the method returns an <ph id=\"ph1\">&lt;xref:System.Linq.IQueryable%601&gt;</ph> instance.","pos":[9,147],"source":" Query operators are supported on this service operation endpoint because the method returns an <xref:System.Linq.IQueryable%601> instance."}]},{"pos":[3940,4295],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>Astoria Northwind Service#ServiceOperation<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperation)</ept><ept id=\"p1\">]</ept> <bpt id=\"p3\">[!code-vb</bpt><bpt id=\"p4\">[</bpt>Astoria Northwind Service#ServiceOperation<ept id=\"p4\">](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperation)</ept><ept id=\"p3\">]</ept>","source":"[!code-csharp[Astoria Northwind Service#ServiceOperation](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria northwind service/cs/northwind2.svc.cs#serviceoperation)]\n [!code-vb[Astoria Northwind Service#ServiceOperation](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria northwind service/vb/northwind2.svc.vb#serviceoperation)]"},{"pos":[4304,4312],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[4316,4411],"content":"<bpt id=\"p1\">[</bpt>Defining WCF Data Services<ept id=\"p1\">](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)</ept>","source":"[Defining WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)"}]}