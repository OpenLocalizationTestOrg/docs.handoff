{"content":"---\ntitle: \"Policy Activity in .NET Framework 4.5 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 8e375e0c-d7c1-4d69-88ab-36d52db0aa7e\ncaps.latest.revision: 15\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Policy Activity in .NET Framework 4.5\nThe Policy4 activity allows [!INCLUDE[wf2](../../../../includes/wf2-md.md)] in [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] (WF 3.5) <xref:System.Workflow.Activities.Rules.RuleSet> objects to be used in [!INCLUDE[wf2](../../../../includes/wf2-md.md)] in [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] (WF 4.5) directly by using the rules engine that is shipped in WF 3.5. By using this activity, you can create and execute a WF 3.5 <xref:System.Workflow.Activities.Rules.RuleSet>. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] WF 3.5 Rules Engine included as part of Windows Workflow Foundation, please read Introduction to the Windows Workflow Foundation Rules Engine. For more information about migrating rules to WF in [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)], please read [Migration Guidance](../../../../docs/framework/windows-workflow-foundation/migration-guidance.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Scenario\\ActivityLibrary\\Rules-Policy4`  \n  \n## Projects in this Sample  \n  \n|Project Name|Description|Main Files|  \n|------------------|-----------------|----------------|  \n|Policy4|Contains the Policy4 activity and its [!INCLUDE[wf1](../../../../includes/wf1-md.md)] designer.|**Policy4.cs**: Policy4 activity definition.<br /><br /> **PolicyDesigner.xaml**: Custom designer for Policy4 activity. It uses the rules editor ([RuleSetDialog Class](http://go.microsoft.com/fwlink/?LinkId=150378)) from [!INCLUDE[wf1](../../../../includes/wf1-md.md)] rules engine.|  \n|ImperativeCodeClientSample|Sample client application that configures and runs a workflow using a Policy4 application using imperative C# code (no [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Designer used).|**ApplyDiscount.rules**: File with [!INCLUDE[wf1](../../../../includes/wf1-md.md)] rule definitions.<br /><br /> **Order.cs**: Type that represents a customer order. Rules are applied to objects of this type.<br /><br /> **Program.cs**: Configures and runs a workflow that has a Policy4 activity to apply rules defined in ApplyDiscount.rules to instances of Order objects.<br /><br /> **App.config**: Configuration file with the path of the rules file.|  \n|DesignerClientSample|Sample client application that configures and runs a workflow using a Policy4 application in the [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Designer.|**Sequence1.xaml**: Sequential workflow that uses a Policy4 activity to perform rule evaluations.<br /><br /> `Program.cs`: Runs an instance of the workflow defined in Sequence1.xaml.|  \n  \n## The Policy4 Activity  \n The Policy4 activity is a class that derives from <xref:System.Activities.NativeActivity%601> that allows workflows to execute [!INCLUDE[wf1](../../../../includes/wf1-md.md)] RuleSets. The following code example is a simplified definition of the public OM of the activity.  \n  \n```csharp  \npublic class Policy4Activity<TResult>: NativeActivity<TResult>  \n{  \n    public RuleSet RuleSet  \n  \n    [IsRequired]  \n    public InArgument Input  \n  \n    public OutArgument<ValidationErrorCollection> ValidationErrors  \n}  \n  \n```  \n  \n|Property|Description|  \n|--------------|-----------------|  \n|RuleSet|The WF [RuleSet Class](http://go.microsoft.com/fwlink/?LinkId=150379) for .NET Framework 3.5 to be evaluated when the activity is executed.|  \n|TargetObject|The object against which the Rules in the [RuleSet Class](http://go.microsoft.com/fwlink/?LinkId=150379) are evaluated.|  \n|ValidationError|The list of validation errors returned by the [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Rule Engine for .NET Framework 3.5 when validating the [RuleSet Class](http://go.microsoft.com/fwlink/?LinkId=150379) against the target object before execution.|  \n  \n## Policy4 Activity Designer  \n The Policy4 designer adds the capability to configure a Policy4 activity without the need to write code. After building the solution, it can be found in the toolbox in the section **Microsoft.Samples.Activities.Rules**.  \n  \n The WF Designer allows you to configure a target object and a RuleSet. When the **Edit RuleSet** button is clicked, the WF [RuleSetDialog Class](http://go.microsoft.com/fwlink/?LinkId=150378) for [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] is displayed. This dialog is the re-hosted [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] Rules Editor. Use the editor to create and edit the rules that the Policy4 activity executes.  \n  \n## Using this Sample  \n No special set up is required to run this sample. Just open the solution in Visual Studio, and press F5 to run the application.  \n  \n This sample contains two client applications: ImperativeCodeClientSample and DesignerClientSample. The ImperativeCodeClientSample client shows how to configure and run the Policy40 activity using C# imperative code. The DesignerClientSample shows how to configure and run the Policy4 activity using the designer.  \n  \n#### To run the ImperativeCodeClientSample client application  \n  \n1.  Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the Policy4Sample.sln solution file.  \n  \n2.  In **Solution Explorer**, right-click the **ImperativeCodeClientSample** project and then select **Set as startup project**.  \n  \n3.  To run the project, press CTRL+F5.  \n  \n#### To run the ImperativeCodeClientSample client application  \n  \n1.  Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the Policy4Sample.sln solution file.  \n  \n2.  In **Solution Explorer**, right-click the **DesignerClientSample** project.  \n  \n    -   Select **Set as startup project**.  \n  \n3.  To compile the project, press CTRL+SHIFT+B.  \n  \n4.  To run the project, press CTRL+F5.  \n  \n## See Also","nodes":[{"pos":[12,66],"content":"Policy Activity in .NET Framework 4.5 | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Policy Activity in .NET Framework 4.5 | Microsoft Docs","pos":[0,54]}]},{"pos":[332,369],"content":"Policy Activity in .NET Framework 4.5","linkify":"Policy Activity in .NET Framework 4.5","nodes":[{"content":"Policy Activity in .NET Framework 4.5","pos":[0,37]}]},{"content":"The Policy4 activity allows <ph id=\"ph1\">[!INCLUDE[wf2](../../../../includes/wf2-md.md)]</ph> in <ph id=\"ph2\">[!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)]</ph> (WF 3.5) <ph id=\"ph3\">&lt;xref:System.Workflow.Activities.Rules.RuleSet&gt;</ph> objects to be used in <ph id=\"ph4\">[!INCLUDE[wf2](../../../../includes/wf2-md.md)]</ph> in <ph id=\"ph5\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph> (WF 4.5) directly by using the rules engine that is shipped in WF 3.5.","pos":[370,793],"source":"The Policy4 activity allows [!INCLUDE[wf2](../../../../includes/wf2-md.md)] in [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] (WF 3.5) <xref:System.Workflow.Activities.Rules.RuleSet> objects to be used in [!INCLUDE[wf2](../../../../includes/wf2-md.md)] in [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] (WF 4.5) directly by using the rules engine that is shipped in WF 3.5."},{"content":"By using this activity, you can create and execute a WF 3.5 <ph id=\"ph1\">&lt;xref:System.Workflow.Activities.Rules.RuleSet&gt;</ph>.","pos":[794,902],"source":" By using this activity, you can create and execute a WF 3.5 <xref:System.Workflow.Activities.Rules.RuleSet>."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> WF 3.5 Rules Engine included as part of Windows Workflow Foundation, please read Introduction to the Windows Workflow Foundation Rules Engine.","pos":[903,1101],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] WF 3.5 Rules Engine included as part of Windows Workflow Foundation, please read Introduction to the Windows Workflow Foundation Rules Engine."},{"content":"For more information about migrating rules to WF in <ph id=\"ph1\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph>, please read <bpt id=\"p1\">[</bpt>Migration Guidance<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/migration-guidance.md)</ept>.","pos":[1102,1344],"source":" For more information about migrating rules to WF in [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)], please read [Migration Guidance](../../../../docs/framework/windows-workflow-foundation/migration-guidance.md)."},{"pos":[1352,1484],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1538,1864],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[1865,1915]},{"pos":[2009,2032],"content":"Projects in this Sample","linkify":"Projects in this Sample","nodes":[{"content":"Projects in this Sample","pos":[0,23]}]},{"content":"Project Name","pos":[2039,2051]},{"content":"Description","pos":[2052,2063]},{"content":"Main Files","pos":[2064,2074]},{"content":"Policy4","pos":[2137,2144]},{"pos":[2145,2240],"content":"Contains the Policy4 activity and its <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> designer.","source":"Contains the Policy4 activity and its [!INCLUDE[wf1](../../../../includes/wf1-md.md)] designer."},{"content":"<bpt id=\"p1\">**</bpt>Policy4.cs<ept id=\"p1\">**</ept>: Policy4 activity definition.","pos":[2241,2285],"source":"**Policy4.cs**: Policy4 activity definition."},{"content":"<bpt id=\"p1\">**</bpt>PolicyDesigner.xaml<ept id=\"p1\">**</ept>: Custom designer for Policy4 activity.","pos":[2298,2360],"source":"**PolicyDesigner.xaml**: Custom designer for Policy4 activity."},{"content":"It uses the rules editor (<bpt id=\"p1\">[</bpt>RuleSetDialog Class<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150378)</ept>) from <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> rules engine.","pos":[2361,2523],"source":" It uses the rules editor ([RuleSetDialog Class](http://go.microsoft.com/fwlink/?LinkId=150378)) from [!INCLUDE[wf1](../../../../includes/wf1-md.md)] rules engine."},{"content":"ImperativeCodeClientSample","pos":[2528,2554]},{"pos":[2555,2737],"content":"Sample client application that configures and runs a workflow using a Policy4 application using imperative C# code (no <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> Designer used).","source":"Sample client application that configures and runs a workflow using a Policy4 application using imperative C# code (no [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Designer used)."},{"content":"<bpt id=\"p1\">**</bpt>ApplyDiscount.rules<ept id=\"p1\">**</ept>: File with <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> rule definitions.","pos":[2738,2838],"source":"**ApplyDiscount.rules**: File with [!INCLUDE[wf1](../../../../includes/wf1-md.md)] rule definitions."},{"content":"<bpt id=\"p1\">**</bpt>Order.cs<ept id=\"p1\">**</ept>: Type that represents a customer order.","pos":[2851,2903],"source":"**Order.cs**: Type that represents a customer order."},{"content":"Rules are applied to objects of this type.","pos":[2904,2946]},{"content":"<bpt id=\"p1\">**</bpt>Program.cs<ept id=\"p1\">**</ept>: Configures and runs a workflow that has a Policy4 activity to apply rules defined in ApplyDiscount.rules to instances of Order objects.","pos":[2959,3110],"source":"**Program.cs**: Configures and runs a workflow that has a Policy4 activity to apply rules defined in ApplyDiscount.rules to instances of Order objects."},{"content":"<bpt id=\"p1\">**</bpt>App.config<ept id=\"p1\">**</ept>: Configuration file with the path of the rules file.","pos":[3123,3190],"source":"**App.config**: Configuration file with the path of the rules file."},{"content":"DesignerClientSample","pos":[3195,3215]},{"pos":[3216,3370],"content":"Sample client application that configures and runs a workflow using a Policy4 application in the <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> Designer.","source":"Sample client application that configures and runs a workflow using a Policy4 application in the [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Designer."},{"content":"<bpt id=\"p1\">**</bpt>Sequence1.xaml<ept id=\"p1\">**</ept>: Sequential workflow that uses a Policy4 activity to perform rule evaluations.","pos":[3371,3468],"source":"**Sequence1.xaml**: Sequential workflow that uses a Policy4 activity to perform rule evaluations."},{"content":"<ph id=\"ph1\">`Program.cs`</ph>: Runs an instance of the workflow defined in Sequence1.xaml.","pos":[3481,3554],"source":"`Program.cs`: Runs an instance of the workflow defined in Sequence1.xaml."},{"pos":[3564,3584],"content":"The Policy4 Activity","linkify":"The Policy4 Activity","nodes":[{"content":"The Policy4 Activity","pos":[0,20]}]},{"content":"The Policy4 activity is a class that derives from <ph id=\"ph1\">&lt;xref:System.Activities.NativeActivity%601&gt;</ph> that allows workflows to execute <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> RuleSets.","pos":[3588,3772],"source":"The Policy4 activity is a class that derives from <xref:System.Activities.NativeActivity%601> that allows workflows to execute [!INCLUDE[wf1](../../../../includes/wf1-md.md)] RuleSets."},{"content":"The following code example is a simplified definition of the public OM of the activity.","pos":[3773,3860]},{"content":"Property","pos":[4117,4125]},{"content":"Description","pos":[4126,4137]},{"content":"RuleSet","pos":[4179,4186]},{"pos":[4187,4326],"content":"The WF <bpt id=\"p1\">[</bpt>RuleSet Class<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150379)</ept> for .NET Framework 3.5 to be evaluated when the activity is executed.","source":"The WF [RuleSet Class](http://go.microsoft.com/fwlink/?LinkId=150379) for .NET Framework 3.5 to be evaluated when the activity is executed."},{"content":"TargetObject","pos":[4331,4343]},{"pos":[4344,4463],"content":"The object against which the Rules in the <bpt id=\"p1\">[</bpt>RuleSet Class<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150379)</ept> are evaluated.","source":"The object against which the Rules in the [RuleSet Class](http://go.microsoft.com/fwlink/?LinkId=150379) are evaluated."},{"content":"ValidationError","pos":[4468,4483]},{"pos":[4484,4739],"content":"The list of validation errors returned by the <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> Rule Engine for .NET Framework 3.5 when validating the <bpt id=\"p1\">[</bpt>RuleSet Class<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150379)</ept> against the target object before execution.","source":"The list of validation errors returned by the [!INCLUDE[wf1](../../../../includes/wf1-md.md)] Rule Engine for .NET Framework 3.5 when validating the [RuleSet Class](http://go.microsoft.com/fwlink/?LinkId=150379) against the target object before execution."},{"pos":[4749,4774],"content":"Policy4 Activity Designer","linkify":"Policy4 Activity Designer","nodes":[{"content":"Policy4 Activity Designer","pos":[0,25]}]},{"content":"The Policy4 designer adds the capability to configure a Policy4 activity without the need to write code.","pos":[4778,4882]},{"content":"After building the solution, it can be found in the toolbox in the section <bpt id=\"p1\">**</bpt>Microsoft.Samples.Activities.Rules<ept id=\"p1\">**</ept>.","pos":[4883,4997],"source":" After building the solution, it can be found in the toolbox in the section **Microsoft.Samples.Activities.Rules**."},{"content":"The WF Designer allows you to configure a target object and a RuleSet.","pos":[5004,5074]},{"content":"When the <bpt id=\"p1\">**</bpt>Edit RuleSet<ept id=\"p1\">**</ept> button is clicked, the WF <bpt id=\"p2\">[</bpt>RuleSetDialog Class<ept id=\"p2\">](http://go.microsoft.com/fwlink/?LinkId=150378)</ept> for <ph id=\"ph1\">[!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)]</ph> is displayed.","pos":[5075,5281],"source":" When the **Edit RuleSet** button is clicked, the WF [RuleSetDialog Class](http://go.microsoft.com/fwlink/?LinkId=150378) for [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] is displayed."},{"content":"This dialog is the re-hosted <ph id=\"ph1\">[!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)]</ph> Rules Editor.","pos":[5282,5392],"source":" This dialog is the re-hosted [!INCLUDE[netfx35_short](../../../../includes/netfx35-short-md.md)] Rules Editor."},{"content":"Use the editor to create and edit the rules that the Policy4 activity executes.","pos":[5393,5472]},{"pos":[5481,5498],"content":"Using this Sample","linkify":"Using this Sample","nodes":[{"content":"Using this Sample","pos":[0,17]}]},{"content":"No special set up is required to run this sample.","pos":[5502,5551]},{"content":"Just open the solution in Visual Studio, and press F5 to run the application.","pos":[5552,5629]},{"content":"This sample contains two client applications: ImperativeCodeClientSample and DesignerClientSample.","pos":[5636,5734]},{"content":"The ImperativeCodeClientSample client shows how to configure and run the Policy40 activity using C# imperative code.","pos":[5735,5851]},{"content":"The DesignerClientSample shows how to configure and run the Policy4 activity using the designer.","pos":[5852,5948]},{"pos":[5959,6015],"content":"To run the ImperativeCodeClientSample client application","linkify":"To run the ImperativeCodeClientSample client application","nodes":[{"content":"To run the ImperativeCodeClientSample client application","pos":[0,56]}]},{"pos":[6025,6145],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>, open the Policy4Sample.sln solution file.","source":"Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the Policy4Sample.sln solution file."},{"pos":[6155,6279],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the <bpt id=\"p2\">**</bpt>ImperativeCodeClientSample<ept id=\"p2\">**</ept> project and then select <bpt id=\"p3\">**</bpt>Set as startup project<ept id=\"p3\">**</ept>.","source":"In **Solution Explorer**, right-click the **ImperativeCodeClientSample** project and then select **Set as startup project**."},{"content":"To run the project, press CTRL+F5.","pos":[6289,6323]},{"pos":[6334,6390],"content":"To run the ImperativeCodeClientSample client application","linkify":"To run the ImperativeCodeClientSample client application","nodes":[{"content":"To run the ImperativeCodeClientSample client application","pos":[0,56]}]},{"pos":[6400,6520],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>, open the Policy4Sample.sln solution file.","source":"Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the Policy4Sample.sln solution file."},{"pos":[6530,6605],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the <bpt id=\"p2\">**</bpt>DesignerClientSample<ept id=\"p2\">**</ept> project.","source":"In **Solution Explorer**, right-click the **DesignerClientSample** project."},{"pos":[6619,6653],"content":"Select <bpt id=\"p1\">**</bpt>Set as startup project<ept id=\"p1\">**</ept>.","source":"Select **Set as startup project**."},{"content":"To compile the project, press CTRL+SHIFT+B.","pos":[6663,6706]},{"content":"To run the project, press CTRL+F5.","pos":[6716,6750]},{"pos":[6759,6767],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}