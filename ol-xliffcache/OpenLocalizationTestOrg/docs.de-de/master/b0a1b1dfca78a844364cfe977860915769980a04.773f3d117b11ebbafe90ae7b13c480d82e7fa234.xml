{"content":"---\ntitle: \"Imperative\"\nms.date: \"03/30/2017\"\nms.assetid: 4f7ce807-c0e4-407a-92a6-22abafb40b51\n---\n# Imperative\n\nThis sample demonstrates how to define a <xref:System.ServiceModel.WSHttpBinding> for a service using code, instead of defining the `wsHttpBinding` binding in configuration. This sample is based on the [Getting Started](getting-started-sample.md) that implements a calculator service.\n\n> [!NOTE]\n> The setup procedure and build instructions for this sample are located at the end of this topic.\n\nThe following code demonstrates how to define a binding imperatively in code.\n\n```csharp\npublic static void Main()\n{\n    WSHttpBinding binding = new WSHttpBinding();\n    binding.Name = \"binding1\";\n    binding.HostNameComparisonMode =\n        HostNameComparisonMode.StrongWildcard;\n    binding.Security.Mode = SecurityMode.Message;\n    binding.ReliableSession.Enabled = false;\n    binding.TransactionFlow = false;\n\n    Uri baseAddress =\n        new Uri(\"http://localhost:8000/servicemodelsamples/service\");\n\n    // Create a ServiceHost for the CalculatorService type and provide the base address.\n    using(ServiceHost serviceHost = new ServiceHost(typeof(CalculatorService), baseAddress))\n    {\n        serviceHost.AddServiceEndpoint(typeof(ICalculator), \n                                       binding, baseAddress);\n        // Open the ServiceHostBase to create listeners and start listening for messages.\n        serviceHost.Open();\n\n        // The service can now be accessed.\n        Console.WriteLine(\"The service is ready.\");\n        Console.WriteLine(\"Press <ENTER> to terminate service.\");\n        Console.WriteLine();\n        Console.ReadLine();\n        // Close the ServiceHostBase to shutdown the service.\n        serviceHost.Close();\n    }\n}\n```\n\n The client creates a channel to communicate with the service as shown in the following sample code.\n\n```csharp\nWSHttpBinding binding = new WSHttpBinding();\nbinding.Name = \"binding1\";\nbinding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;\nbinding.Security.Mode = SecurityMode.Message;\nbinding.ReliableSession.Enabled = false;\nbinding.TransactionFlow = false;\n\nString url = \"http://localhost:8000/servicemodelsamples/service\";\nEndpointAddress address = new EndpointAddress(url);\nChannelFactory<ICalculator> channelFactory = new ChannelFactory<ICalculator>(binding,address);\nICalculator channel = channelFactory.CreateChannel();\n```\n\n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.\n\n```console\nAdd(100,15.99) = 115.99\nSubtract(145,76.54) = 68.46\nMultiply(9,81.25) = 731.25\nDivide(22,7) = 3.14285714285714\n\nPress <ENTER> to terminate client.\n```\n\n## To set up, build, and run the sample\n\n1. Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).\n\n2. To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](building-the-samples.md).\n\n3. To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](running-the-samples.md).\n\n> [!IMPORTANT]\n> The samples may already be installed on your machine. Check for the following (default) directory before continuing.\n>\n> `<InstallDrive>:\\WF_WCF_Samples`\n>\n> If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.\n>\n> `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\Imperative`","nodes":[{"pos":[4,94],"embed":true,"restype":"x-metadata","content":"title: \"Imperative\"\nms.date: \"03/30/2017\"\nms.assetid: 4f7ce807-c0e4-407a-92a6-22abafb40b51","nodes":[{"content":"Imperative","nodes":[{"pos":[0,10],"content":"Imperative","nodes":[{"content":"Imperative","pos":[0,10]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[101,111],"content":"Imperative","linkify":"Imperative","nodes":[{"content":"Imperative","pos":[0,10]}]},{"content":"This sample demonstrates how to define a <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> for a service using code, instead of defining the <ph id=\"ph2\">`wsHttpBinding`</ph> binding in configuration.","pos":[113,286],"source":"This sample demonstrates how to define a <xref:System.ServiceModel.WSHttpBinding> for a service using code, instead of defining the `wsHttpBinding` binding in configuration."},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](getting-started-sample.md)</ept> that implements a calculator service.","pos":[287,397],"source":" This sample is based on the [Getting Started](getting-started-sample.md) that implements a calculator service."},{"pos":[401,507],"content":"[!NOTE]\nThe setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[8,104]}]},{"content":"The following code demonstrates how to define a binding imperatively in code.","pos":[509,586]},{"content":"The client creates a channel to communicate with the service as shown in the following sample code.","pos":[1770,1869]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[2419,2524]},{"content":"Press ENTER in the client window to shut down the client.","pos":[2525,2582]},{"pos":[2750,2786],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2791,2947],"content":"Be sure you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[2952,3122],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](building-the-samples.md)."},{"pos":[3127,3296],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](running-the-samples.md)."},{"pos":[3300,3431],"content":"[!IMPORTANT]\nThe samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,129],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3473,3783],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3784,3834]}]}