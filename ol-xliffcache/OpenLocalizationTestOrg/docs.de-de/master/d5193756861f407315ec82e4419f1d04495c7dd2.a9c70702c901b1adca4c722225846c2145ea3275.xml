{"content":"---\ntitle: \"Replacing a Principal Object\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"principal objects, replacing\"\n  - \"security [.NET Framework], replacing principal objects\"\n  - \"security [.NET Framework], principals\"\nms.assetid: c323687e-b196-487b-beba-f38f9b3f961b\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# Replacing a Principal Object\nApplications that provide authentication services must be able to replace the **Principal** object (<xref:System.Security.Principal.IPrincipal>) for a given thread. Furthermore, the security system must help protect the ability to replace **Principal** objects because a maliciously attached, incorrect **Principal** compromises the security of your application by claiming an untrue identity or role. Therefore, applications that require the ability to replace **Principal** objects must be granted the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> object for principal control. (Note that this permission is not required for performing role-based security checks or for creating **Principal** objects.)  \n  \n The current **Principal** object can be replaced by performing the following tasks:  \n  \n1.  Create the replacement **Principal** object and associated **Identity** object.  \n  \n2.  Attach the new **Principal** object to the call context.  \n  \n## Example  \n The following example shows how to create a generic principal object and use it to set the principal of a thread.  \n  \n [!code-csharp[SetCurrentPrincipal#1](../../../samples/snippets/csharp/VS_Snippets_CLR/SetCurrentPrincipal/CS/program.cs#1)]\n [!code-vb[SetCurrentPrincipal#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/SetCurrentPrincipal/VB/program.vb#1)]  \n  \n## See also\n\n- <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType>\n- [Principal and Identity Objects](../../../docs/standard/security/principal-and-identity-objects.md)\n","nodes":[{"pos":[4,376],"embed":true,"restype":"x-metadata","content":"title: \"Replacing a Principal Object\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"principal objects, replacing\"\n  - \"security [.NET Framework], replacing principal objects\"\n  - \"security [.NET Framework], principals\"\nms.assetid: c323687e-b196-487b-beba-f38f9b3f961b\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"Replacing a Principal Object","nodes":[{"pos":[0,28],"content":"Replacing a Principal Object","nodes":[{"content":"Replacing a Principal Object","pos":[0,28]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[383,411],"content":"Replacing a Principal Object","linkify":"Replacing a Principal Object","nodes":[{"content":"Replacing a Principal Object","pos":[0,28]}]},{"content":"Applications that provide authentication services must be able to replace the <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object (<ph id=\"ph1\">&lt;xref:System.Security.Principal.IPrincipal&gt;</ph>) for a given thread.","pos":[412,576],"source":"Applications that provide authentication services must be able to replace the **Principal** object (<xref:System.Security.Principal.IPrincipal>) for a given thread."},{"content":"Furthermore, the security system must help protect the ability to replace <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> objects because a maliciously attached, incorrect <bpt id=\"p2\">**</bpt>Principal<ept id=\"p2\">**</ept> compromises the security of your application by claiming an untrue identity or role.","pos":[577,813],"source":" Furthermore, the security system must help protect the ability to replace **Principal** objects because a maliciously attached, incorrect **Principal** compromises the security of your application by claiming an untrue identity or role."},{"content":"Therefore, applications that require the ability to replace <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> objects must be granted the <ph id=\"ph1\">&lt;xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType&gt;</ph> object for principal control.","pos":[814,1028],"source":" Therefore, applications that require the ability to replace **Principal** objects must be granted the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> object for principal control."},{"content":"(Note that this permission is not required for performing role-based security checks or for creating <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> objects.)","pos":[1029,1153],"source":" (Note that this permission is not required for performing role-based security checks or for creating **Principal** objects.)"},{"pos":[1160,1243],"content":"The current <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object can be replaced by performing the following tasks:","source":"The current **Principal** object can be replaced by performing the following tasks:"},{"pos":[1253,1332],"content":"Create the replacement <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object and associated <bpt id=\"p2\">**</bpt>Identity<ept id=\"p2\">**</ept> object.","source":"Create the replacement **Principal** object and associated **Identity** object."},{"pos":[1342,1398],"content":"Attach the new <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object to the call context.","source":"Attach the new **Principal** object to the call context."},{"pos":[1407,1414],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example shows how to create a generic principal object and use it to set the principal of a thread.","pos":[1418,1531]},{"pos":[1796,1804],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[1893,1992],"content":"<bpt id=\"p1\">[</bpt>Principal and Identity Objects<ept id=\"p1\">](../../../docs/standard/security/principal-and-identity-objects.md)</ept>","source":"[Principal and Identity Objects](../../../docs/standard/security/principal-and-identity-objects.md)"}]}