{"content":"---\ntitle: \"volatile - C# Reference\"\nms.custom: seodec18\n\nms.date: 10/24/2018\nf1_keywords: \n  - \"volatile_CSharpKeyword\"\n  - \"volatile\"\nhelpviewer_keywords: \n  - \"volatile keyword [C#]\"\nms.assetid: 78089bc7-7b38-4cfd-9e49-87ac036af009\n---\n# volatile (C# Reference)\n\nThe `volatile` keyword indicates that a field might be modified by multiple threads that are executing at the same time. The compiler, the runtime system, and even hardware may rearrange reads and writes to memory locations for performance reasons. Fields that are declared `volatile` are not subject to these optimizations. Adding the `volatile` modifier ensures that all threads will observe volatile writes performed by any other thread in the order in which they were performed. There is no guarantee of a single total ordering of volatile writes as seen from all threads of execution.\n\nThe `volatile` keyword can be applied to fields of these types:\n\n- Reference types.\n- Pointer types (in an unsafe context). Note that although the pointer itself can be volatile, the object that it points to cannot. In other words, you cannot declare a \"pointer to volatile.\"\n- Simple types such as `sbyte`, `byte`, `short`, `ushort`, `int`, `uint`, `char`, `float`, and `bool`.\n- An `enum` type with one of the following base types: `byte`, `sbyte`, `short`, `ushort`, `int`, or `uint`.\n- Generic type parameters known to be reference types.\n- <xref:System.IntPtr> and <xref:System.UIntPtr>.\n\nOther types, including `double` and `long`, cannot be marked `volatile` because reads and writes to fields of those types cannot be guaranteed to be atomic. To protect multi-threaded access to those types of fields, use the <xref:System.Threading.Interlocked> class members or protect access using the [`lock`](lock-statement.md) statement.\n\nThe `volatile` keyword can only be applied to fields of a `class` or `struct`. Local variables cannot be declared `volatile`.\n\n## Example\n\nThe following example shows how to declare a public field variable as `volatile`.\n\n[!code-csharp[declareVolatile](~/samples/snippets/csharp/language-reference/keywords/volatile/Program.cs#Declaration)]\n\nThe following example demonstrates how an auxiliary or worker thread can be created and used to perform processing in parallel with that of the primary thread. For more information about multithreading, see [Managed Threading](../../../standard/threading/index.md).\n\n[!code-csharp[declareVolatile](~/samples/snippets/csharp/language-reference/keywords/volatile/Program.cs#Volatile)]\n\nWith the `volatile` modifier added to the declaration of `_shouldStop` in place, you'll always get the same results (similar to the excerpt shown in the preceding code). However, without that modifier on the `_shouldStop` member, the behavior is unpredictable. The `DoWork` method may optimize the member access, resulting in reading stale data. Because of the nature of multi-threaded programming, the number of stale reads is unpredictable. Different runs of the program will produce somewhat different results.\n\n## C# language specification\n\n[!INCLUDE[CSharplangspec](~/includes/csharplangspec-md.md)]\n\n## See also\n\n- [C# language specification: volatile keyword](../../../../_csharplang/spec/classes.md#volatile-fields)\n- [C# Reference](../index.md)\n- [C# Programming Guide](../../programming-guide/index.md)\n- [C# Keywords](index.md)\n- [Modifiers](modifiers.md)\n- [lock statement](lock-statement.md)\n- <xref:System.Threading.Interlocked>","nodes":[{"pos":[4,234],"embed":true,"restype":"x-metadata","content":"title: \"volatile - C# Reference\"\nms.custom: seodec18\n\nms.date: 10/24/2018\nf1_keywords: \n  - \"volatile_CSharpKeyword\"\n  - \"volatile\"\nhelpviewer_keywords: \n  - \"volatile keyword [C#]\"\nms.assetid: 78089bc7-7b38-4cfd-9e49-87ac036af009","nodes":[{"content":"volatile - C# Reference","nodes":[{"pos":[0,23],"content":"volatile - C# Reference","nodes":[{"content":"volatile - C# Reference","pos":[0,23]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[241,264],"content":"volatile (C# Reference)","linkify":"volatile (C# Reference)","nodes":[{"content":"volatile (C# Reference)","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">`volatile`</ph> keyword indicates that a field might be modified by multiple threads that are executing at the same time.","pos":[266,386],"source":"The `volatile` keyword indicates that a field might be modified by multiple threads that are executing at the same time."},{"content":"The compiler, the runtime system, and even hardware may rearrange reads and writes to memory locations for performance reasons.","pos":[387,514]},{"content":"Fields that are declared <ph id=\"ph1\">`volatile`</ph> are not subject to these optimizations.","pos":[515,590],"source":" Fields that are declared `volatile` are not subject to these optimizations."},{"content":"Adding the <ph id=\"ph1\">`volatile`</ph> modifier ensures that all threads will observe volatile writes performed by any other thread in the order in which they were performed.","pos":[591,748],"source":" Adding the `volatile` modifier ensures that all threads will observe volatile writes performed by any other thread in the order in which they were performed."},{"content":"There is no guarantee of a single total ordering of volatile writes as seen from all threads of execution.","pos":[749,855]},{"pos":[857,920],"content":"The <ph id=\"ph1\">`volatile`</ph> keyword can be applied to fields of these types:","source":"The `volatile` keyword can be applied to fields of these types:"},{"content":"Reference types.","pos":[924,940]},{"content":"Pointer types (in an unsafe context).","pos":[943,980]},{"content":"Note that although the pointer itself can be volatile, the object that it points to cannot.","pos":[981,1072]},{"content":"In other words, you cannot declare a \"pointer to volatile.\"","pos":[1073,1132]},{"pos":[1135,1235],"content":"Simple types such as <ph id=\"ph1\">`sbyte`</ph>, <ph id=\"ph2\">`byte`</ph>, <ph id=\"ph3\">`short`</ph>, <ph id=\"ph4\">`ushort`</ph>, <ph id=\"ph5\">`int`</ph>, <ph id=\"ph6\">`uint`</ph>, <ph id=\"ph7\">`char`</ph>, <ph id=\"ph8\">`float`</ph>, and <ph id=\"ph9\">`bool`</ph>.","source":"Simple types such as `sbyte`, `byte`, `short`, `ushort`, `int`, `uint`, `char`, `float`, and `bool`."},{"pos":[1238,1344],"content":"An <ph id=\"ph1\">`enum`</ph> type with one of the following base types: <ph id=\"ph2\">`byte`</ph>, <ph id=\"ph3\">`sbyte`</ph>, <ph id=\"ph4\">`short`</ph>, <ph id=\"ph5\">`ushort`</ph>, <ph id=\"ph6\">`int`</ph>, or <ph id=\"ph7\">`uint`</ph>.","source":"An `enum` type with one of the following base types: `byte`, `sbyte`, `short`, `ushort`, `int`, or `uint`."},{"content":"Generic type parameters known to be reference types.","pos":[1347,1399]},{"pos":[1402,1449],"content":"<ph id=\"ph1\">&lt;xref:System.IntPtr&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.UIntPtr&gt;</ph>.","source":"<xref:System.IntPtr> and <xref:System.UIntPtr>."},{"content":"Other types, including <ph id=\"ph1\">`double`</ph> and <ph id=\"ph2\">`long`</ph>, cannot be marked <ph id=\"ph3\">`volatile`</ph> because reads and writes to fields of those types cannot be guaranteed to be atomic.","pos":[1451,1607],"source":"Other types, including `double` and `long`, cannot be marked `volatile` because reads and writes to fields of those types cannot be guaranteed to be atomic."},{"content":"To protect multi-threaded access to those types of fields, use the <ph id=\"ph1\">&lt;xref:System.Threading.Interlocked&gt;</ph> class members or protect access using the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">`lock`</ph><ept id=\"p1\">](lock-statement.md)</ept> statement.","pos":[1608,1791],"source":" To protect multi-threaded access to those types of fields, use the <xref:System.Threading.Interlocked> class members or protect access using the [`lock`](lock-statement.md) statement."},{"content":"The <ph id=\"ph1\">`volatile`</ph> keyword can only be applied to fields of a <ph id=\"ph2\">`class`</ph> or <ph id=\"ph3\">`struct`</ph>.","pos":[1793,1871],"source":"The `volatile` keyword can only be applied to fields of a `class` or `struct`."},{"content":"Local variables cannot be declared <ph id=\"ph1\">`volatile`</ph>.","pos":[1872,1918],"source":" Local variables cannot be declared `volatile`."},{"pos":[1923,1930],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1932,2013],"content":"The following example shows how to declare a public field variable as <ph id=\"ph1\">`volatile`</ph>.","source":"The following example shows how to declare a public field variable as `volatile`."},{"content":"The following example demonstrates how an auxiliary or worker thread can be created and used to perform processing in parallel with that of the primary thread.","pos":[2135,2294]},{"content":"For more information about multithreading, see <bpt id=\"p1\">[</bpt>Managed Threading<ept id=\"p1\">](../../../standard/threading/index.md)</ept>.","pos":[2295,2400],"source":" For more information about multithreading, see [Managed Threading](../../../standard/threading/index.md)."},{"content":"With the <ph id=\"ph1\">`volatile`</ph> modifier added to the declaration of <ph id=\"ph2\">`_shouldStop`</ph> in place, you'll always get the same results (similar to the excerpt shown in the preceding code).","pos":[2519,2688],"source":"With the `volatile` modifier added to the declaration of `_shouldStop` in place, you'll always get the same results (similar to the excerpt shown in the preceding code)."},{"content":"However, without that modifier on the <ph id=\"ph1\">`_shouldStop`</ph> member, the behavior is unpredictable.","pos":[2689,2779],"source":" However, without that modifier on the `_shouldStop` member, the behavior is unpredictable."},{"content":"The <ph id=\"ph1\">`DoWork`</ph> method may optimize the member access, resulting in reading stale data.","pos":[2780,2864],"source":" The `DoWork` method may optimize the member access, resulting in reading stale data."},{"content":"Because of the nature of multi-threaded programming, the number of stale reads is unpredictable.","pos":[2865,2961]},{"content":"Different runs of the program will produce somewhat different results.","pos":[2962,3032]},{"pos":[3037,3062],"content":"C# language specification","linkify":"C# language specification","nodes":[{"content":"C# language specification","pos":[0,25]}]},{"pos":[3128,3136],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3140,3242],"content":"<bpt id=\"p1\">[</bpt>C# language specification: volatile keyword<ept id=\"p1\">](../../../../_csharplang/spec/classes.md#volatile-fields)</ept>","source":"[C# language specification: volatile keyword](../../../../_csharplang/spec/classes.md#volatile-fields)"},{"pos":[3245,3272],"content":"<bpt id=\"p1\">[</bpt>C# Reference<ept id=\"p1\">](../index.md)</ept>","source":"[C# Reference](../index.md)"},{"pos":[3275,3331],"content":"<bpt id=\"p1\">[</bpt>C# Programming Guide<ept id=\"p1\">](../../programming-guide/index.md)</ept>","source":"[C# Programming Guide](../../programming-guide/index.md)"},{"pos":[3334,3357],"content":"<bpt id=\"p1\">[</bpt>C# Keywords<ept id=\"p1\">](index.md)</ept>","source":"[C# Keywords](index.md)"},{"pos":[3360,3385],"content":"<bpt id=\"p1\">[</bpt>Modifiers<ept id=\"p1\">](modifiers.md)</ept>","source":"[Modifiers](modifiers.md)"},{"pos":[3388,3423],"content":"<bpt id=\"p1\">[</bpt>lock statement<ept id=\"p1\">](lock-statement.md)</ept>","source":"[lock statement](lock-statement.md)"}]}