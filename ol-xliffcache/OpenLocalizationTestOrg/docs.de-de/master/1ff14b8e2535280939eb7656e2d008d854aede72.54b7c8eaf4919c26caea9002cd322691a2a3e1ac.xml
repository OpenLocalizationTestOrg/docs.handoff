{"content":"---\ntitle: \"Toolbox Service | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 742212d0-445e-41ed-9739-9ee848ce7f1b\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Toolbox Service\nThis sample demonstrates how to update the [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] Toolbox activities based on the context of the workflow. The sample contains a workflow that changes the toolbox contents based on whether a custom activity is selected.  \n  \n## Discussion  \n During workflow authoring, customers generally want their Toolbox to be context sensitive. For example, the user may want to ensure that the Toolbox shows a few additional activities when a specific activity is added to the workflow. If the activities are removed from the workflow, the toolbox should react appropriately based on the domain requirements.  \n  \n In a re-hosted workflow designer, you control the Toolbox control and can ensure that based on the Model changes in the workflow, the host triggers appropriate changes in the Toolbox control. However, in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], the toolbox is not controlled by the user and thus an interface is required to modify its contents. `IActivityToolboxService` is that interface.  \n  \n The API provides the following four methods.  \n  \n```  \npublic interface IActivityToolboxService   \n{   \n        void AddCategory(string categoryName);   \n        void RemoveCategory(string categoryName);   \n        void AddItem(string qualifiedTypeName, string categoryName);   \n        void RemoveItem(string qualifiedTypeName, string categoryName);   \n        IList<string> EnumCategories();   \n        IList<string> EnumItems(string categoryName);   \n}  \n```  \n  \n#### To set up, build, and run the sample  \n  \n1.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the WorkflowSimulator.sln solution file.  \n  \n2.  Build the solution by pressing CTRL+SHIFT+B.  \n  \n3.  Open the Workflow.xaml file.  \n  \n4.  Add a **CustomActivity** by dragging and dropping it from the toolbox. Notice that an additional Toolbox category called: **New WF Category** with an additional activity **Assign**.  \n  \n5.  Now unselect the **CustomActivity** by dragging another activity into it.  \n  \n6.  The item **Assign** in the category **New WF Category** under Toolbox is now removed. Also, because there are no more items left in the category, the category is removed as well.  \n  \n7.  Select the **CustomActivity** again and the category and **Assign** activity is added back.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Designer\\IActivityToolboxService`","nodes":[{"pos":[12,44],"content":"Toolbox Service | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Toolbox Service | Microsoft Docs","pos":[0,32]}]},{"pos":[309,324],"content":"Toolbox Service","linkify":"Toolbox Service","nodes":[{"content":"Toolbox Service","pos":[0,15]}]},{"content":"This sample demonstrates how to update the <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph> Toolbox activities based on the context of the workflow.","pos":[325,478],"source":"This sample demonstrates how to update the [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] Toolbox activities based on the context of the workflow."},{"content":"The sample contains a workflow that changes the toolbox contents based on whether a custom activity is selected.","pos":[479,591]},{"pos":[600,610],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"During workflow authoring, customers generally want their Toolbox to be context sensitive.","pos":[614,704]},{"content":"For example, the user may want to ensure that the Toolbox shows a few additional activities when a specific activity is added to the workflow.","pos":[705,847]},{"content":"If the activities are removed from the workflow, the toolbox should react appropriately based on the domain requirements.","pos":[848,969]},{"content":"In a re-hosted workflow designer, you control the Toolbox control and can ensure that based on the Model changes in the workflow, the host triggers appropriate changes in the Toolbox control.","pos":[976,1167]},{"content":"However, in <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, the toolbox is not controlled by the user and thus an interface is required to modify its contents.","pos":[1168,1334],"source":" However, in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], the toolbox is not controlled by the user and thus an interface is required to modify its contents."},{"content":"<ph id=\"ph1\">`IActivityToolboxService`</ph> is that interface.","pos":[1335,1379],"source":"`IActivityToolboxService` is that interface."},{"content":"The API provides the following four methods.","pos":[1386,1430]},{"pos":[1859,1895],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[1905,2011],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the WorkflowSimulator.sln solution file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the WorkflowSimulator.sln solution file."},{"content":"Build the solution by pressing CTRL+SHIFT+B.","pos":[2021,2065]},{"content":"Open the Workflow.xaml file.","pos":[2075,2103]},{"content":"Add a <bpt id=\"p1\">**</bpt>CustomActivity<ept id=\"p1\">**</ept> by dragging and dropping it from the toolbox.","pos":[2113,2183],"source":"Add a **CustomActivity** by dragging and dropping it from the toolbox."},{"content":"Notice that an additional Toolbox category called: <bpt id=\"p1\">**</bpt>New WF Category<ept id=\"p1\">**</ept> with an additional activity <bpt id=\"p2\">**</bpt>Assign<ept id=\"p2\">**</ept>.","pos":[2184,2294],"source":" Notice that an additional Toolbox category called: **New WF Category** with an additional activity **Assign**."},{"pos":[2304,2377],"content":"Now unselect the <bpt id=\"p1\">**</bpt>CustomActivity<ept id=\"p1\">**</ept> by dragging another activity into it.","source":"Now unselect the **CustomActivity** by dragging another activity into it."},{"content":"The item <bpt id=\"p1\">**</bpt>Assign<ept id=\"p1\">**</ept> in the category <bpt id=\"p2\">**</bpt>New WF Category<ept id=\"p2\">**</ept> under Toolbox is now removed.","pos":[2387,2472],"source":"The item **Assign** in the category **New WF Category** under Toolbox is now removed."},{"content":"Also, because there are no more items left in the category, the category is removed as well.","pos":[2473,2565]},{"pos":[2575,2666],"content":"Select the <bpt id=\"p1\">**</bpt>CustomActivity<ept id=\"p1\">**</ept> again and the category and <bpt id=\"p2\">**</bpt>Assign<ept id=\"p2\">**</ept> activity is added back.","source":"Select the **CustomActivity** again and the category and **Assign** activity is added back."},{"pos":[2674,2806],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2860,3186],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3187,3237]}]}