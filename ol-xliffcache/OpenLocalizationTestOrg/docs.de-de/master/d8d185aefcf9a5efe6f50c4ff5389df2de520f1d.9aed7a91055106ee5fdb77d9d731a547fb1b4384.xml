{"content":"---\ntitle: \"Custom Binding Imperative\"\nms.date: \"03/30/2017\"\nms.assetid: 6e13bf96-5de0-4476-b646-5f150774418d\n---\n# Custom Binding Imperative\nThe sample demonstrates how to write imperative code to define and use custom bindings without using a configuration file or a Windows Communication Foundation (WCF) generated client. This sample combines the features provided by the HTTP transport and the reliable session channel to create a reliable HTTP-based binding. This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n On both the client and the service, a custom binding is created that contains two binding elements (Reliable Session and HTTP):  \n\n```csharp\nReliableSessionBindingElement reliableSession = new ReliableSessionBindingElement();  \nreliableSession.Ordered = true;  \n  \nHttpTransportBindingElement httpTransport = new HttpTransportBindingElement();  \nhttpTransport.AuthenticationScheme = System.Net.AuthenticationSchemes.Anonymous;  \nhttpTransport.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;  \n  \nCustomBinding binding = new CustomBinding(reliableSession, httpTransport);  \n```\n  \n On the service, the binding is used by adding an endpoint to the ServiceHost:  \n\n```csharp\nserviceHost.AddServiceEndpoint(typeof(ICalculator), binding, \"\");  \n```\n\n On the client, the binding is used by a <xref:System.ServiceModel.ChannelFactory> to create a channel to the service:  \n\n```csharp\nEndpointAddress address = new EndpointAddress(\"http://localhost:8000/servicemodelsamples/service\");  \nChannelFactory<ICalculator> channelFactory = new ChannelFactory<ICalculator>(binding, address);  \nICalculator channel = channelFactory.CreateChannel();  \n```\n\n This channel is then used to interact with the service:  \n\n```csharp\n// Call the Add service operation.  \ndouble value1 = 100.00D;  \ndouble value2 = 15.99D;  \ndouble result = channel.Add(value1, value2);  \nConsole.WriteLine(\"Add({0},{1}) = {2}\", value1, value2, result);  \n```\n\n When you run the sample, the operation requests and responses are displayed in the client console window. Press ENTER in the client window to shut down the client.  \n  \n```  \nAdd(100,15.99) = 115.99  \nSubtract(145,76.54) = 68.46  \nMultiply(9,81.25) = 731.25  \nDivide(22,7) = 3.14285714285714  \n  \nPress <ENTER> to terminate client.  \n```  \n  \n### To set up, build, and run the sample  \n  \n1.  Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Binding\\Custom\\Imperative`  \n  \n## See also\n\n- [Custom Binding Samples](custom-binding.md)\n","nodes":[{"pos":[4,109],"embed":true,"restype":"x-metadata","content":"title: \"Custom Binding Imperative\"\nms.date: \"03/30/2017\"\nms.assetid: 6e13bf96-5de0-4476-b646-5f150774418d","nodes":[{"content":"Custom Binding Imperative","nodes":[{"pos":[0,25],"content":"Custom Binding Imperative","nodes":[{"content":"Custom Binding Imperative","pos":[0,25]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[116,141],"content":"Custom Binding Imperative","linkify":"Custom Binding Imperative","nodes":[{"content":"Custom Binding Imperative","pos":[0,25]}]},{"content":"The sample demonstrates how to write imperative code to define and use custom bindings without using a configuration file or a Windows Communication Foundation (WCF) generated client.","pos":[142,325]},{"content":"This sample combines the features provided by the HTTP transport and the reliable session channel to create a reliable HTTP-based binding.","pos":[326,464]},{"content":"This sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept> that implements a calculator service.","pos":[465,614],"source":" This sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md) that implements a calculator service."},{"pos":[622,729],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"On both the client and the service, a custom binding is created that contains two binding elements (Reliable Session and HTTP):","pos":[736,863]},{"content":"On the service, the binding is used by adding an endpoint to the ServiceHost:","pos":[1333,1410]},{"pos":[1498,1615],"content":"On the client, the binding is used by a <ph id=\"ph1\">&lt;xref:System.ServiceModel.ChannelFactory&gt;</ph> to create a channel to the service:","source":"On the client, the binding is used by a <xref:System.ServiceModel.ChannelFactory> to create a channel to the service:"},{"content":"This channel is then used to interact with the service:","pos":[1891,1946]},{"content":"When you run the sample, the operation requests and responses are displayed in the client console window.","pos":[2170,2275]},{"content":"Press ENTER in the client window to shut down the client.","pos":[2276,2333]},{"pos":[2517,2553],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[2563,2758],"content":"Be sure you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Be sure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[2768,2977],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[2987,3195],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[3203,3335],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3389,3699],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[3700,3750]},{"pos":[3837,3845],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3849,3892],"content":"<bpt id=\"p1\">[</bpt>Custom Binding Samples<ept id=\"p1\">](custom-binding.md)</ept>","source":"[Custom Binding Samples](custom-binding.md)"}]}