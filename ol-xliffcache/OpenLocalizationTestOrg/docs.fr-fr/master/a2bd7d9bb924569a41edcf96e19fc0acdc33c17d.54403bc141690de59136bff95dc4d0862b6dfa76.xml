{"content":"---\ntitle: \"Ordered Processing of Messages in Single Concurrency Mode | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: a90f5662-a796-46cd-ae33-30a4072838af\ncaps.latest.revision: 2\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Ordered Processing of Messages in Single Concurrency Mode\nWCF makes no guarantees about the order in which messages are processed, unless the underlying channel is sessionful.  For instance, a WCF service that uses MsmqInputChannel, which is not a sessionful channel, will fail to process messages in order. There are some circumstances where a developer may want the in order processing behavior but not want to use sessions. This topic describes how to configure this behavior when a service is running in Single Concurrency Mode.  \n  \n## In-order Message Processing  \n A new attribute called <xref:System.ServiceModel.ServiceBehaviorAttribute.EnsureOrderedDispatch%2A> has been added to the <xref:System.ServiceModel.ServiceBehaviorAttribute>. When <xref:System.ServiceModel.ServiceBehaviorAttribute.EnsureOrderedDispatch%2A> is set to true and <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> is set to <xref:System.ServiceModel.ConcurrencyMode> messages sent to the service will be processed in order. The following code snippet illustrates how to set these attributes.  \n  \n```  \n[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, EnsureOrderedDispatch = true )]  \n    class Service : IService  \n    {  \n         // ...  \n    }  \n  \n```  \n  \n If <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> is set to any other value, an <xref:System.InvalidOperationException> is thrown.  \n  \n## See Also  \n [Sessions, Instancing, and Concurrency](../../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md)   \n [Concurrency](../../../../docs/framework/wcf/samples/concurrency.md)","nodes":[{"pos":[4,377],"nodes":[{"content":"Ordered Processing of Messages in Single Concurrency Mode | Microsoft Docs","nodes":[{"pos":[0,74],"content":"Ordered Processing of Messages in Single Concurrency Mode | Microsoft Docs","nodes":[{"content":"Ordered Processing of Messages in Single Concurrency Mode | Microsoft Docs","pos":[0,74]}]}],"pos":[6,83],"yaml":true}],"content":"title: \"Ordered Processing of Messages in Single Concurrency Mode | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: a90f5662-a796-46cd-ae33-30a4072838af\ncaps.latest.revision: 2\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[384,441],"content":"Ordered Processing of Messages in Single Concurrency Mode","linkify":"Ordered Processing of Messages in Single Concurrency Mode","nodes":[{"content":"Ordered Processing of Messages in Single Concurrency Mode","pos":[0,57]}]},{"content":"WCF makes no guarantees about the order in which messages are processed, unless the underlying channel is sessionful.","pos":[442,559]},{"content":"For instance, a WCF service that uses MsmqInputChannel, which is not a sessionful channel, will fail to process messages in order.","pos":[561,691]},{"content":"There are some circumstances where a developer may want the in order processing behavior but not want to use sessions.","pos":[692,810]},{"content":"This topic describes how to configure this behavior when a service is running in Single Concurrency Mode.","pos":[811,916]},{"pos":[925,952],"content":"In-order Message Processing","linkify":"In-order Message Processing","nodes":[{"content":"In-order Message Processing","pos":[0,27]}]},{"content":"A new attribute called <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.EnsureOrderedDispatch%2A&gt;</ph> has been added to the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph>.","pos":[956,1130],"source":"A new attribute called <xref:System.ServiceModel.ServiceBehaviorAttribute.EnsureOrderedDispatch%2A> has been added to the <xref:System.ServiceModel.ServiceBehaviorAttribute>."},{"content":"When <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.EnsureOrderedDispatch%2A&gt;</ph> is set to true and <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A&gt;</ph> is set to <ph id=\"ph3\">&lt;xref:System.ServiceModel.ConcurrencyMode&gt;</ph> messages sent to the service will be processed in order.","pos":[1131,1412],"source":" When <xref:System.ServiceModel.ServiceBehaviorAttribute.EnsureOrderedDispatch%2A> is set to true and <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> is set to <xref:System.ServiceModel.ConcurrencyMode> messages sent to the service will be processed in order."},{"content":"The following code snippet illustrates how to set these attributes.","pos":[1413,1480]},{"content":"If <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A&gt;</ph> is set to any other value, an <ph id=\"ph2\">&lt;xref:System.InvalidOperationException&gt;</ph> is thrown.","pos":[1663,1817],"source":"If <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> is set to any other value, an <xref:System.InvalidOperationException> is thrown."},{"pos":[1826,1834],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Sessions, Instancing, and Concurrency<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md)</ept><ph id=\"ph1\"> </ph>","pos":[1838,1965],"source":"[Sessions, Instancing, and Concurrency](../../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md) "},{"content":"<bpt id=\"p1\">[</bpt>Concurrency<ept id=\"p1\">](../../../../docs/framework/wcf/samples/concurrency.md)</ept>","pos":[1969,2037],"source":"[Concurrency](../../../../docs/framework/wcf/samples/concurrency.md)"}]}