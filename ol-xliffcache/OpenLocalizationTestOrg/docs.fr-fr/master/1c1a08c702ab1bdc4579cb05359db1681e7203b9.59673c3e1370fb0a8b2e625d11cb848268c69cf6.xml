{"content":"---\ntitle: \"How to: Control Service Instancing\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: e0b12b34-8004-443a-a46d-83a5c00f2601\n---\n# How to: Control Service Instancing\nSetting the instance mode of a service enables you to specify when a <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> (and its associated user-defined service object) is created. See the <xref:System.ServiceModel.InstanceContextMode> enumeration for the possible modes. For more information about behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md). For working examples, see [Behaviors](../../../../docs/framework/wcf/samples/behaviors.md).  \n  \n### To control the service instance lifetime using code  \n  \n1.  Apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> to the service class.  \n  \n2.  Set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property to one of the following values: <xref:System.ServiceModel.InstanceContextMode.PerCall>, <xref:System.ServiceModel.InstanceContextMode.PerSession>, or <xref:System.ServiceModel.InstanceContextMode.Single>.  \n  \n     [!code-csharp[C_ControlServiceInstancing#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#1)]\n     [!code-vb[C_ControlServiceInstancing#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#1)]  \n  \n## Example  \n The following code example sets the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property of the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to <xref:System.ServiceModel.InstanceContextMode.PerCall>.  \n  \n [!code-csharp[c_ControlServiceInstancing#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#2)]\n [!code-vb[c_ControlServiceInstancing#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#2)]  \n  \n## See also\n\n- <xref:System.ServiceModel.ServiceBehaviorAttribute>\n- <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A>\n- <xref:System.ServiceModel.InstanceContextMode>\n- [Service: Behaviors Samples](../samples/behaviors.md)\n","nodes":[{"pos":[4,152],"embed":true,"restype":"x-metadata","content":"title: \"How to: Control Service Instancing\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: e0b12b34-8004-443a-a46d-83a5c00f2601","nodes":[{"content":"How to: Control Service Instancing","nodes":[{"pos":[0,34],"content":"How to: Control Service Instancing","nodes":[{"content":"How to: Control Service Instancing","pos":[0,34]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[159,193],"content":"How to: Control Service Instancing","linkify":"How to: Control Service Instancing","nodes":[{"content":"How to: Control Service Instancing","pos":[0,34]}]},{"content":"Setting the instance mode of a service enables you to specify when a <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType&gt;</ph> (and its associated user-defined service object) is created.","pos":[194,395],"source":"Setting the instance mode of a service enables you to specify when a <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> (and its associated user-defined service object) is created."},{"content":"See the <ph id=\"ph1\">&lt;xref:System.ServiceModel.InstanceContextMode&gt;</ph> enumeration for the possible modes.","pos":[396,486],"source":" See the <xref:System.ServiceModel.InstanceContextMode> enumeration for the possible modes."},{"content":"For more information about behaviors, see <bpt id=\"p1\">[</bpt>Configuring and Extending the Runtime with Behaviors<ept id=\"p1\">](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)</ept>.","pos":[487,682],"source":" For more information about behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)."},{"content":"For working examples, see <bpt id=\"p1\">[</bpt>Behaviors<ept id=\"p1\">](../../../../docs/framework/wcf/samples/behaviors.md)</ept>.","pos":[683,774],"source":" For working examples, see [Behaviors](../../../../docs/framework/wcf/samples/behaviors.md)."},{"pos":[784,835],"content":"To control the service instance lifetime using code","linkify":"To control the service instance lifetime using code","nodes":[{"content":"To control the service instance lifetime using code","pos":[0,51]}]},{"pos":[845,928],"content":"Apply the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> to the service class.","source":"Apply the <xref:System.ServiceModel.ServiceBehaviorAttribute> to the service class."},{"pos":[938,1234],"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A&gt;</ph> property to one of the following values: <ph id=\"ph2\">&lt;xref:System.ServiceModel.InstanceContextMode.PerCall&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.ServiceModel.InstanceContextMode.PerSession&gt;</ph>, or <ph id=\"ph4\">&lt;xref:System.ServiceModel.InstanceContextMode.Single&gt;</ph>.","source":"Set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property to one of the following values: <xref:System.ServiceModel.InstanceContextMode.PerCall>, <xref:System.ServiceModel.InstanceContextMode.PerSession>, or <xref:System.ServiceModel.InstanceContextMode.Single>."},{"pos":[1245,1530],"content":"[!code-csharp[C_ControlServiceInstancing#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_controlserviceinstancing/cs/source.cs#1)]\n [!code-vb[C_ControlServiceInstancing#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_controlserviceinstancing/vb/source.vb#1)]","leadings":["","    "],"nodes":[]},{"pos":[1539,1546],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[1550,1797],"content":"The following code example sets the <ph id=\"ph1\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute&gt;</ph> attribute to <ph id=\"ph3\">&lt;xref:System.ServiceModel.InstanceContextMode.PerCall&gt;</ph>.","source":"The following code example sets the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property of the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to <xref:System.ServiceModel.InstanceContextMode.PerCall>."},{"pos":[2094,2102],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2286,2339],"content":"<bpt id=\"p1\">[</bpt>Service: Behaviors Samples<ept id=\"p1\">](../samples/behaviors.md)</ept>","source":"[Service: Behaviors Samples](../samples/behaviors.md)"}]}