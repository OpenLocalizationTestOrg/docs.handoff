{"content":"---\ntitle: \"Walkthrough: Writing Queries in C# (LINQ)\"\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"LINQ [C#], walkthroughs\"\n  - \"LINQ [C#], writing queries\"\n  - \"queries [LINQ in C#], writing\"\n  - \"writing LINQ queries\"\nms.assetid: 2962a610-419a-4276-9ec8-4b7f2af0c081\n---\n# Walkthrough: Writing Queries in C# (LINQ)\nThis walkthrough demonstrates the C# language features that are used to write LINQ query expressions.  \n  \n## Create a C# Project  \n  \n> [!NOTE]\n>  The following instructions are for Visual Studio. If you are using a different development environment, create a console project with a reference to System.Core.dll and a `using` directive for the <xref:System.Linq?displayProperty=nameWithType> namespace.  \n  \n#### To create a project in Visual Studio  \n  \n1.  Start Visual Studio.  \n  \n2.  On the menu bar, choose **File**, **New**, **Project**.  \n  \n     The **New Project** dialog box opens.  \n  \n3.  Expand **Installed**, expand **Templates**, expand **Visual C#**, and then choose **Console Application**.  \n  \n4.  In the **Name** text box, enter a different name or accept the default name, and then choose the **OK** button.  \n  \n     The new project appears in **Solution Explorer**.  \n  \n5.  Notice that your project has a reference to System.Core.dll and a `using` directive for the <xref:System.Linq?displayProperty=nameWithType> namespace.  \n  \n## Create an in-Memory Data Source  \n The data source for the queries is a simple list of `Student` objects. Each `Student` record has a first name, last name, and an array of integers that represents their test scores in the class. Copy this code into your project. Note the following characteristics:  \n  \n-   The `Student` class consists of auto-implemented properties.  \n  \n-   Each student in the list is initialized with an object initializer.  \n  \n-   The list itself is initialized with a collection initializer.  \n  \n This whole data structure will be initialized and instantiated without explicit calls to any constructor or explicit member access. For more information about these new features, see [Auto-Implemented Properties](../../../../csharp/programming-guide/classes-and-structs/auto-implemented-properties.md) and [Object and Collection Initializers](../../../../csharp/programming-guide/classes-and-structs/object-and-collection-initializers.md).  \n  \n#### To add the data source  \n  \n-   Add the `Student` class and the initialized list of students to the `Program` class in your project.  \n  \n     [!code-csharp[CsLinqGettingStarted#11](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#11)]  \n  \n#### To add a new Student to the Students list  \n  \n1.  Add a new `Student` to the `Students` list and use a name and test scores of your choice. Try typing all the new student information in order to better learn the syntax for the object initializer.  \n  \n## Create the Query  \n  \n#### To create a simple query  \n  \n-   In the application's `Main` method, create a simple query that, when it is executed, will produce a list of all students whose score on the first test was greater than 90. Note that because the whole `Student` object is selected, the type of the query is `IEnumerable<Student>`. Although the code could also use implicit typing by using the [var](../../../../csharp/language-reference/keywords/var.md) keyword, explicit typing is used to clearly illustrate results. (For more information about `var`, see [Implicitly Typed Local Variables](../../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md).)  \n  \n     Note also that the query's range variable, `student`, serves as a reference to each `Student` in the source, providing member access for each object.  \n  \n [!code-csharp[CsLINQGettingStarted#12](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#12)]  \n  \n## Execute the Query  \n  \n#### To execute the query  \n  \n1.  Now write the `foreach` loop that will cause the query to execute. Note the following about the code:  \n  \n    -   Each element in the returned sequence is accessed through the iteration variable in the `foreach` loop.  \n  \n    -   The type of this variable is `Student`, and the type of the query variable is compatible, `IEnumerable<Student>`.  \n  \n2.  After you have added this code, build and run the application to see the results in the **Console** window.  \n  \n [!code-csharp[CsLINQGettingStarted#13](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#13)]  \n  \n#### To add another filter condition  \n  \n1.  You can combine multiple Boolean conditions in the `where` clause in order to further refine a query. The following code adds a condition so that the query returns those students whose first score was over 90 and whose last score was less than 80. The `where` clause should resemble the following code.  \n  \n    ```csharp\n    where student.Scores[0] > 90 && student.Scores[3] < 80  \n    ```  \n  \n     For more information, see [where clause](../../../../csharp/language-reference/keywords/where-clause.md).  \n  \n## Modify the Query  \n  \n#### To order the results  \n  \n1.  It will be easier to scan the results if they are in some kind of order. You can order the returned sequence by any accessible field in the source elements. For example, the following `orderby` clause orders the results in alphabetical order from A to Z according to the last name of each student. Add the following `orderby` clause to your query, right after the `where` statement and before the `select` statement:  \n  \n    ```csharp\n    orderby student.Last ascending  \n    ```  \n  \n2.  Now change the `orderby` clause so that it orders the results in reverse order according to the score on the first test, from the highest score to the lowest score.  \n  \n    ```csharp\n    orderby student.Scores[0] descending  \n    ```  \n  \n3.  Change the `WriteLine` format string so that you can see the scores:  \n  \n    ```csharp\n    Console.WriteLine(\"{0}, {1} {2}\", student.Last, student.First, student.Scores[0]);  \n    ```  \n  \n     For more information, see [orderby clause](../../../../csharp/language-reference/keywords/orderby-clause.md).  \n  \n#### To group the results  \n  \n1.  Grouping is a powerful capability in query expressions. A query with a group clause produces a sequence of groups, and each group itself contains a `Key` and a sequence that consists of all the members of that group. The following new query groups the students by using the first letter of their last name as the key.  \n  \n     [!code-csharp[CsLINQGettingStarted#14](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#14)]  \n  \n2.  Note that the type of the query has now changed. It now produces a sequence of groups that have a `char` type as a key, and a sequence of `Student` objects. Because the type of the query has changed, the following code changes the `foreach` execution loop also:  \n  \n     [!code-csharp[CsLINQGettingStarted#15](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#15)]  \n  \n3.  Run the application and view the results in the **Console** window.  \n  \n     For more information, see [group clause](../../../../csharp/language-reference/keywords/group-clause.md).  \n  \n#### To make the variables implicitly typed  \n  \n1.  Explicitly coding `IEnumerables` of `IGroupings` can quickly become tedious. You can write the same query and `foreach` loop much more conveniently by using `var`. The `var` keyword does not change the types of your objects; it just instructs the compiler to infer the types. Change the type of `studentQuery` and the iteration variable `group` to `var` and rerun the query. Note that in the inner `foreach` loop, the iteration variable is still typed as `Student`, and the query works just as before. Change the `s` iteration variable to `var` and run the query again. You see that you get exactly the same results.  \n  \n     [!code-csharp[CsLINQGettingStarted#16](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#16)]  \n  \n     For more information about [var](../../../../csharp/language-reference/keywords/var.md), see [Implicitly Typed Local Variables](../../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md).  \n  \n#### To order the groups by their key value  \n  \n1.  When you run the previous query, you notice that the groups are not in alphabetical order. To change this, you must provide an `orderby` clause after the `group` clause. But to use an `orderby` clause, you first need an identifier that serves as a reference to the groups created by the `group` clause. You provide the identifier by using the `into` keyword, as follows:  \n  \n     [!code-csharp[csLINQGettingStarted#17](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#17)]  \n  \n     When you run this query, you will see the groups are now sorted in alphabetical order.  \n  \n#### To introduce an identifier by using let  \n  \n1.  You can use the `let` keyword to introduce an identifier for any expression result in the query expression. This identifier can be a convenience, as in the following example, or it can enhance performance by storing the results of an expression so that it does not have to be calculated multiple times.  \n  \n     [!code-csharp[csLINQGettingStarted#18](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#18)]  \n  \n     For more information, see [let clause](../../../../csharp/language-reference/keywords/let-clause.md).  \n  \n#### To use method syntax in a query expression  \n  \n1.  As described in [Query Syntax and Method Syntax in LINQ](../../../../csharp/programming-guide/concepts/linq/query-syntax-and-method-syntax-in-linq.md), some query operations can only be expressed by using method syntax. The following code calculates the total score for each `Student` in the source sequence, and then calls the `Average()` method on the results of that query to calculate the average score of the class.\n  \n     [!code-csharp[csLINQGettingStarted#19](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#19)]  \n  \n#### To transform or project in the select clause  \n  \n1.  It is very common for a query to produce a sequence whose elements differ from the elements in the source sequences. Delete or comment out your previous query and execution loop, and replace it with the following code. Note that the query returns a sequence of strings (not `Students`), and this fact is reflected in the `foreach` loop.  \n  \n     [!code-csharp[csLINQGettingStarted#20](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#20)]  \n  \n2.  Code earlier in this walkthrough indicated that the average class score is approximately 334. To produce a sequence of `Students` whose total score is greater than the class average, together with their `Student ID`, you can use an anonymous type in the `select` statement:  \n  \n     [!code-csharp[csLINQGettingStarted#21](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#21)]  \n  \n## Next Steps  \n After you are familiar with the basic aspects of working with queries in C#, you are ready to read the documentation and samples for the specific type of LINQ provider you are interested in:  \n  \n [LINQ to SQL](../../../../../docs/framework/data/adonet/sql/linq/index.md)  \n  \n [LINQ to DataSet](../../../../framework/data/adonet/linq-to-dataset.md)  \n  \n [LINQ to XML (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-xml.md)  \n  \n [LINQ to Objects (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-objects.md)  \n  \n## See also\n\n- [Language-Integrated Query (LINQ) (C#)](../../../../csharp/programming-guide/concepts/linq/index.md)\n- [Getting Started with LINQ in C#](../../../../csharp/programming-guide/concepts/linq/getting-started-with-linq.md)\n- [LINQ Query Expressions](../../../../csharp/programming-guide/linq-query-expressions/index.md)\n","nodes":[{"pos":[4,271],"embed":true,"restype":"x-metadata","content":"title: \"Walkthrough: Writing Queries in C# (LINQ)\"\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"LINQ [C#], walkthroughs\"\n  - \"LINQ [C#], writing queries\"\n  - \"queries [LINQ in C#], writing\"\n  - \"writing LINQ queries\"\nms.assetid: 2962a610-419a-4276-9ec8-4b7f2af0c081","nodes":[{"content":"Walkthrough: Writing Queries in C# (LINQ)","nodes":[{"pos":[0,41],"content":"Walkthrough: Writing Queries in C# (LINQ)","nodes":[{"content":"Walkthrough: Writing Queries in C# (LINQ)","pos":[0,41]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[278,319],"content":"Walkthrough: Writing Queries in C# (LINQ)","linkify":"Walkthrough: Writing Queries in C# (LINQ)","nodes":[{"content":"Walkthrough: Writing Queries in C# (LINQ)","pos":[0,41]}]},{"content":"This walkthrough demonstrates the C# language features that are used to write LINQ query expressions.","pos":[320,421]},{"pos":[430,449],"content":"Create a C# Project","linkify":"Create a C# Project","nodes":[{"content":"Create a C# Project","pos":[0,19]}]},{"pos":[457,723],"content":"[!NOTE]\n The following instructions are for Visual Studio. If you are using a different development environment, create a console project with a reference to System.Core.dll and a `using` directive for the <xref:System.Linq?displayProperty=nameWithType> namespace.","leadings":["","> "],"nodes":[{"content":"The following instructions are for Visual Studio. If you are using a different development environment, create a console project with a reference to System.Core.dll and a `using` directive for the <xref:System.Linq?displayProperty=nameWithType> namespace.","pos":[9,264],"nodes":[{"content":"The following instructions are for Visual Studio.","pos":[0,49]},{"content":"If you are using a different development environment, create a console project with a reference to System.Core.dll and a <ph id=\"ph1\">`using`</ph> directive for the <ph id=\"ph2\">&lt;xref:System.Linq?displayProperty=nameWithType&gt;</ph> namespace.","pos":[50,255],"source":" If you are using a different development environment, create a console project with a reference to System.Core.dll and a `using` directive for the <xref:System.Linq?displayProperty=nameWithType> namespace."}]}]},{"pos":[734,770],"content":"To create a project in Visual Studio","linkify":"To create a project in Visual Studio","nodes":[{"content":"To create a project in Visual Studio","pos":[0,36]}]},{"content":"Start Visual Studio.","pos":[780,800]},{"pos":[810,865],"content":"On the menu bar, choose <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Project<ept id=\"p3\">**</ept>.","source":"On the menu bar, choose **File**, **New**, **Project**."},{"pos":[876,913],"content":"The <bpt id=\"p1\">**</bpt>New Project<ept id=\"p1\">**</ept> dialog box opens.","source":"The **New Project** dialog box opens."},{"pos":[923,1029],"content":"Expand <bpt id=\"p1\">**</bpt>Installed<ept id=\"p1\">**</ept>, expand <bpt id=\"p2\">**</bpt>Templates<ept id=\"p2\">**</ept>, expand <bpt id=\"p3\">**</bpt>Visual C#<ept id=\"p3\">**</ept>, and then choose <bpt id=\"p4\">**</bpt>Console Application<ept id=\"p4\">**</ept>.","source":"Expand **Installed**, expand **Templates**, expand **Visual C#**, and then choose **Console Application**."},{"pos":[1039,1150],"content":"In the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> text box, enter a different name or accept the default name, and then choose the <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept> button.","source":"In the **Name** text box, enter a different name or accept the default name, and then choose the **OK** button."},{"pos":[1161,1210],"content":"The new project appears in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>.","source":"The new project appears in **Solution Explorer**."},{"pos":[1220,1370],"content":"Notice that your project has a reference to System.Core.dll and a <ph id=\"ph1\">`using`</ph> directive for the <ph id=\"ph2\">&lt;xref:System.Linq?displayProperty=nameWithType&gt;</ph> namespace.","source":"Notice that your project has a reference to System.Core.dll and a `using` directive for the <xref:System.Linq?displayProperty=nameWithType> namespace."},{"pos":[1379,1410],"content":"Create an in-Memory Data Source","linkify":"Create an in-Memory Data Source","nodes":[{"content":"Create an in-Memory Data Source","pos":[0,31]}]},{"content":"The data source for the queries is a simple list of <ph id=\"ph1\">`Student`</ph> objects.","pos":[1414,1484],"source":"The data source for the queries is a simple list of `Student` objects."},{"content":"Each <ph id=\"ph1\">`Student`</ph> record has a first name, last name, and an array of integers that represents their test scores in the class.","pos":[1485,1608],"source":" Each `Student` record has a first name, last name, and an array of integers that represents their test scores in the class."},{"content":"Copy this code into your project.","pos":[1609,1642]},{"content":"Note the following characteristics:","pos":[1643,1678]},{"pos":[1688,1748],"content":"The <ph id=\"ph1\">`Student`</ph> class consists of auto-implemented properties.","source":"The `Student` class consists of auto-implemented properties."},{"content":"Each student in the list is initialized with an object initializer.","pos":[1758,1825]},{"content":"The list itself is initialized with a collection initializer.","pos":[1835,1896]},{"content":"This whole data structure will be initialized and instantiated without explicit calls to any constructor or explicit member access.","pos":[1903,2034]},{"content":"For more information about these new features, see <bpt id=\"p1\">[</bpt>Auto-Implemented Properties<ept id=\"p1\">](../../../../csharp/programming-guide/classes-and-structs/auto-implemented-properties.md)</ept> and <bpt id=\"p2\">[</bpt>Object and Collection Initializers<ept id=\"p2\">](../../../../csharp/programming-guide/classes-and-structs/object-and-collection-initializers.md)</ept>.","pos":[2035,2342],"source":" For more information about these new features, see [Auto-Implemented Properties](../../../../csharp/programming-guide/classes-and-structs/auto-implemented-properties.md) and [Object and Collection Initializers](../../../../csharp/programming-guide/classes-and-structs/object-and-collection-initializers.md)."},{"pos":[2353,2375],"content":"To add the data source","linkify":"To add the data source","nodes":[{"content":"To add the data source","pos":[0,22]}]},{"pos":[2385,2485],"content":"Add the <ph id=\"ph1\">`Student`</ph> class and the initialized list of students to the <ph id=\"ph2\">`Program`</ph> class in your project.","source":"Add the `Student` class and the initialized list of students to the `Program` class in your project."},{"pos":[2631,2672],"content":"To add a new Student to the Students list","linkify":"To add a new Student to the Students list","nodes":[{"content":"To add a new Student to the Students list","pos":[0,41]}]},{"content":"Add a new <ph id=\"ph1\">`Student`</ph> to the <ph id=\"ph2\">`Students`</ph> list and use a name and test scores of your choice.","pos":[2682,2771],"source":"Add a new `Student` to the `Students` list and use a name and test scores of your choice."},{"content":"Try typing all the new student information in order to better learn the syntax for the object initializer.","pos":[2772,2878]},{"pos":[2887,2903],"content":"Create the Query","linkify":"Create the Query","nodes":[{"content":"Create the Query","pos":[0,16]}]},{"pos":[2914,2938],"content":"To create a simple query","linkify":"To create a simple query","nodes":[{"content":"To create a simple query","pos":[0,24]}]},{"content":"In the application's <ph id=\"ph1\">`Main`</ph> method, create a simple query that, when it is executed, will produce a list of all students whose score on the first test was greater than 90.","pos":[2948,3119],"source":"In the application's `Main` method, create a simple query that, when it is executed, will produce a list of all students whose score on the first test was greater than 90."},{"content":"Note that because the whole <ph id=\"ph1\">`Student`</ph> object is selected, the type of the query is <ph id=\"ph2\">`IEnumerable&lt;Student&gt;`</ph>.","pos":[3120,3226],"source":" Note that because the whole `Student` object is selected, the type of the query is `IEnumerable<Student>`."},{"content":"Although the code could also use implicit typing by using the <bpt id=\"p1\">[</bpt>var<ept id=\"p1\">](../../../../csharp/language-reference/keywords/var.md)</ept> keyword, explicit typing is used to clearly illustrate results.","pos":[3227,3413],"source":" Although the code could also use implicit typing by using the [var](../../../../csharp/language-reference/keywords/var.md) keyword, explicit typing is used to clearly illustrate results."},{"content":"(For more information about <ph id=\"ph1\">`var`</ph>, see <bpt id=\"p1\">[</bpt>Implicitly Typed Local Variables<ept id=\"p1\">](../../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md)</ept>.)","pos":[3414,3583],"source":" (For more information about `var`, see [Implicitly Typed Local Variables](../../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md).)"},{"pos":[3594,3743],"content":"Note also that the query's range variable, <ph id=\"ph1\">`student`</ph>, serves as a reference to each <ph id=\"ph2\">`Student`</ph> in the source, providing member access for each object.","source":"Note also that the query's range variable, `student`, serves as a reference to each `Student` in the source, providing member access for each object."},{"pos":[3883,3900],"content":"Execute the Query","linkify":"Execute the Query","nodes":[{"content":"Execute the Query","pos":[0,17]}]},{"pos":[3911,3931],"content":"To execute the query","linkify":"To execute the query","nodes":[{"content":"To execute the query","pos":[0,20]}]},{"content":"Now write the <ph id=\"ph1\">`foreach`</ph> loop that will cause the query to execute.","pos":[3941,4007],"source":"Now write the `foreach` loop that will cause the query to execute."},{"content":"Note the following about the code:","pos":[4008,4042]},{"pos":[4056,4159],"content":"Each element in the returned sequence is accessed through the iteration variable in the <ph id=\"ph1\">`foreach`</ph> loop.","source":"Each element in the returned sequence is accessed through the iteration variable in the `foreach` loop."},{"pos":[4173,4286],"content":"The type of this variable is <ph id=\"ph1\">`Student`</ph>, and the type of the query variable is compatible, <ph id=\"ph2\">`IEnumerable&lt;Student&gt;`</ph>.","source":"The type of this variable is `Student`, and the type of the query variable is compatible, `IEnumerable<Student>`."},{"pos":[4296,4403],"content":"After you have added this code, build and run the application to see the results in the <bpt id=\"p1\">**</bpt>Console<ept id=\"p1\">**</ept> window.","source":"After you have added this code, build and run the application to see the results in the **Console** window."},{"pos":[4545,4576],"content":"To add another filter condition","linkify":"To add another filter condition","nodes":[{"content":"To add another filter condition","pos":[0,31]}]},{"content":"You can combine multiple Boolean conditions in the <ph id=\"ph1\">`where`</ph> clause in order to further refine a query.","pos":[4586,4687],"source":"You can combine multiple Boolean conditions in the `where` clause in order to further refine a query."},{"content":"The following code adds a condition so that the query returns those students whose first score was over 90 and whose last score was less than 80.","pos":[4688,4833]},{"content":"The <ph id=\"ph1\">`where`</ph> clause should resemble the following code.","pos":[4834,4888],"source":" The `where` clause should resemble the following code."},{"pos":[4987,5092],"content":"For more information, see <bpt id=\"p1\">[</bpt>where clause<ept id=\"p1\">](../../../../csharp/language-reference/keywords/where-clause.md)</ept>.","source":"For more information, see [where clause](../../../../csharp/language-reference/keywords/where-clause.md)."},{"pos":[5101,5117],"content":"Modify the Query","linkify":"Modify the Query","nodes":[{"content":"Modify the Query","pos":[0,16]}]},{"pos":[5128,5148],"content":"To order the results","linkify":"To order the results","nodes":[{"content":"To order the results","pos":[0,20]}]},{"content":"It will be easier to scan the results if they are in some kind of order.","pos":[5158,5230]},{"content":"You can order the returned sequence by any accessible field in the source elements.","pos":[5231,5314]},{"content":"For example, the following <ph id=\"ph1\">`orderby`</ph> clause orders the results in alphabetical order from A to Z according to the last name of each student.","pos":[5315,5455],"source":" For example, the following `orderby` clause orders the results in alphabetical order from A to Z according to the last name of each student."},{"content":"Add the following <ph id=\"ph1\">`orderby`</ph> clause to your query, right after the <ph id=\"ph2\">`where`</ph> statement and before the <ph id=\"ph3\">`select`</ph> statement:","pos":[5456,5574],"source":" Add the following `orderby` clause to your query, right after the `where` statement and before the `select` statement:"},{"pos":[5648,5812],"content":"Now change the <ph id=\"ph1\">`orderby`</ph> clause so that it orders the results in reverse order according to the score on the first test, from the highest score to the lowest score.","source":"Now change the `orderby` clause so that it orders the results in reverse order according to the score on the first test, from the highest score to the lowest score."},{"pos":[5892,5960],"content":"Change the <ph id=\"ph1\">`WriteLine`</ph> format string so that you can see the scores:","source":"Change the `WriteLine` format string so that you can see the scores:"},{"pos":[6087,6196],"content":"For more information, see <bpt id=\"p1\">[</bpt>orderby clause<ept id=\"p1\">](../../../../csharp/language-reference/keywords/orderby-clause.md)</ept>.","source":"For more information, see [orderby clause](../../../../csharp/language-reference/keywords/orderby-clause.md)."},{"pos":[6207,6227],"content":"To group the results","linkify":"To group the results","nodes":[{"content":"To group the results","pos":[0,20]}]},{"content":"Grouping is a powerful capability in query expressions.","pos":[6237,6292]},{"content":"A query with a group clause produces a sequence of groups, and each group itself contains a <ph id=\"ph1\">`Key`</ph> and a sequence that consists of all the members of that group.","pos":[6293,6453],"source":" A query with a group clause produces a sequence of groups, and each group itself contains a `Key` and a sequence that consists of all the members of that group."},{"content":"The following new query groups the students by using the first letter of their last name as the key.","pos":[6454,6554]},{"content":"Note that the type of the query has now changed.","pos":[6699,6747]},{"content":"It now produces a sequence of groups that have a <ph id=\"ph1\">`char`</ph> type as a key, and a sequence of <ph id=\"ph2\">`Student`</ph> objects.","pos":[6748,6855],"source":" It now produces a sequence of groups that have a `char` type as a key, and a sequence of `Student` objects."},{"content":"Because the type of the query has changed, the following code changes the <ph id=\"ph1\">`foreach`</ph> execution loop also:","pos":[6856,6960],"source":" Because the type of the query has changed, the following code changes the `foreach` execution loop also:"},{"pos":[7105,7172],"content":"Run the application and view the results in the <bpt id=\"p1\">**</bpt>Console<ept id=\"p1\">**</ept> window.","source":"Run the application and view the results in the **Console** window."},{"pos":[7183,7288],"content":"For more information, see <bpt id=\"p1\">[</bpt>group clause<ept id=\"p1\">](../../../../csharp/language-reference/keywords/group-clause.md)</ept>.","source":"For more information, see [group clause](../../../../csharp/language-reference/keywords/group-clause.md)."},{"pos":[7299,7337],"content":"To make the variables implicitly typed","linkify":"To make the variables implicitly typed","nodes":[{"content":"To make the variables implicitly typed","pos":[0,38]}]},{"content":"Explicitly coding <ph id=\"ph1\">`IEnumerables`</ph> of <ph id=\"ph2\">`IGroupings`</ph> can quickly become tedious.","pos":[7347,7423],"source":"Explicitly coding `IEnumerables` of `IGroupings` can quickly become tedious."},{"content":"You can write the same query and <ph id=\"ph1\">`foreach`</ph> loop much more conveniently by using <ph id=\"ph2\">`var`</ph>.","pos":[7424,7510],"source":" You can write the same query and `foreach` loop much more conveniently by using `var`."},{"content":"The <ph id=\"ph1\">`var`</ph> keyword does not change the types of your objects; it just instructs the compiler to infer the types.","pos":[7511,7622],"source":" The `var` keyword does not change the types of your objects; it just instructs the compiler to infer the types."},{"content":"Change the type of <ph id=\"ph1\">`studentQuery`</ph> and the iteration variable <ph id=\"ph2\">`group`</ph> to <ph id=\"ph3\">`var`</ph> and rerun the query.","pos":[7623,7721],"source":" Change the type of `studentQuery` and the iteration variable `group` to `var` and rerun the query."},{"content":"Note that in the inner <ph id=\"ph1\">`foreach`</ph> loop, the iteration variable is still typed as <ph id=\"ph2\">`Student`</ph>, and the query works just as before.","pos":[7722,7848],"source":" Note that in the inner `foreach` loop, the iteration variable is still typed as `Student`, and the query works just as before."},{"content":"Change the <ph id=\"ph1\">`s`</ph> iteration variable to <ph id=\"ph2\">`var`</ph> and run the query again.","pos":[7849,7916],"source":" Change the `s` iteration variable to `var` and run the query again."},{"content":"You see that you get exactly the same results.","pos":[7917,7963]},{"pos":[8109,8331],"content":"For more information about <bpt id=\"p1\">[</bpt>var<ept id=\"p1\">](../../../../csharp/language-reference/keywords/var.md)</ept>, see <bpt id=\"p2\">[</bpt>Implicitly Typed Local Variables<ept id=\"p2\">](../../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md)</ept>.","source":"For more information about [var](../../../../csharp/language-reference/keywords/var.md), see [Implicitly Typed Local Variables](../../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md)."},{"pos":[8342,8380],"content":"To order the groups by their key value","linkify":"To order the groups by their key value","nodes":[{"content":"To order the groups by their key value","pos":[0,38]}]},{"content":"When you run the previous query, you notice that the groups are not in alphabetical order.","pos":[8390,8480]},{"content":"To change this, you must provide an <ph id=\"ph1\">`orderby`</ph> clause after the <ph id=\"ph2\">`group`</ph> clause.","pos":[8481,8559],"source":" To change this, you must provide an `orderby` clause after the `group` clause."},{"content":"But to use an <ph id=\"ph1\">`orderby`</ph> clause, you first need an identifier that serves as a reference to the groups created by the <ph id=\"ph2\">`group`</ph> clause.","pos":[8560,8692],"source":" But to use an `orderby` clause, you first need an identifier that serves as a reference to the groups created by the `group` clause."},{"content":"You provide the identifier by using the <ph id=\"ph1\">`into`</ph> keyword, as follows:","pos":[8693,8760],"source":" You provide the identifier by using the `into` keyword, as follows:"},{"content":"When you run this query, you will see the groups are now sorted in alphabetical order.","pos":[8906,8992]},{"pos":[9003,9042],"content":"To introduce an identifier by using let","linkify":"To introduce an identifier by using let","nodes":[{"content":"To introduce an identifier by using let","pos":[0,39]}]},{"content":"You can use the <ph id=\"ph1\">`let`</ph> keyword to introduce an identifier for any expression result in the query expression.","pos":[9052,9159],"source":"You can use the `let` keyword to introduce an identifier for any expression result in the query expression."},{"content":"This identifier can be a convenience, as in the following example, or it can enhance performance by storing the results of an expression so that it does not have to be calculated multiple times.","pos":[9160,9354]},{"pos":[9500,9601],"content":"For more information, see <bpt id=\"p1\">[</bpt>let clause<ept id=\"p1\">](../../../../csharp/language-reference/keywords/let-clause.md)</ept>.","source":"For more information, see [let clause](../../../../csharp/language-reference/keywords/let-clause.md)."},{"pos":[9612,9654],"content":"To use method syntax in a query expression","linkify":"To use method syntax in a query expression","nodes":[{"content":"To use method syntax in a query expression","pos":[0,42]}]},{"content":"As described in <bpt id=\"p1\">[</bpt>Query Syntax and Method Syntax in LINQ<ept id=\"p1\">](../../../../csharp/programming-guide/concepts/linq/query-syntax-and-method-syntax-in-linq.md)</ept>, some query operations can only be expressed by using method syntax.","pos":[9664,9883],"source":"As described in [Query Syntax and Method Syntax in LINQ](../../../../csharp/programming-guide/concepts/linq/query-syntax-and-method-syntax-in-linq.md), some query operations can only be expressed by using method syntax."},{"content":"The following code calculates the total score for each <ph id=\"ph1\">`Student`</ph> in the source sequence, and then calls the <ph id=\"ph2\">`Average()`</ph> method on the results of that query to calculate the average score of the class.","pos":[9884,10084],"source":" The following code calculates the total score for each `Student` in the source sequence, and then calls the `Average()` method on the results of that query to calculate the average score of the class."},{"pos":[10228,10272],"content":"To transform or project in the select clause","linkify":"To transform or project in the select clause","nodes":[{"content":"To transform or project in the select clause","pos":[0,44]}]},{"content":"It is very common for a query to produce a sequence whose elements differ from the elements in the source sequences.","pos":[10282,10398]},{"content":"Delete or comment out your previous query and execution loop, and replace it with the following code.","pos":[10399,10500]},{"content":"Note that the query returns a sequence of strings (not <ph id=\"ph1\">`Students`</ph>), and this fact is reflected in the <ph id=\"ph2\">`foreach`</ph> loop.","pos":[10501,10618],"source":" Note that the query returns a sequence of strings (not `Students`), and this fact is reflected in the `foreach` loop."},{"content":"Code earlier in this walkthrough indicated that the average class score is approximately 334.","pos":[10763,10856]},{"content":"To produce a sequence of <ph id=\"ph1\">`Students`</ph> whose total score is greater than the class average, together with their <ph id=\"ph2\">`Student ID`</ph>, you can use an anonymous type in the <ph id=\"ph3\">`select`</ph> statement:","pos":[10857,11036],"source":" To produce a sequence of `Students` whose total score is greater than the class average, together with their `Student ID`, you can use an anonymous type in the `select` statement:"},{"pos":[11180,11190],"content":"Next Steps","linkify":"Next Steps","nodes":[{"content":"Next Steps","pos":[0,10]}]},{"content":"After you are familiar with the basic aspects of working with queries in C#, you are ready to read the documentation and samples for the specific type of LINQ provider you are interested in:","pos":[11194,11384]},{"pos":[11391,11465],"content":"<bpt id=\"p1\">[</bpt>LINQ to SQL<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/linq/index.md)</ept>","source":"[LINQ to SQL](../../../../../docs/framework/data/adonet/sql/linq/index.md)"},{"pos":[11472,11543],"content":"<bpt id=\"p1\">[</bpt>LINQ to DataSet<ept id=\"p1\">](../../../../framework/data/adonet/linq-to-dataset.md)</ept>","source":"[LINQ to DataSet](../../../../framework/data/adonet/linq-to-dataset.md)"},{"pos":[11550,11635],"content":"<bpt id=\"p1\">[</bpt>LINQ to XML (C#)<ept id=\"p1\">](../../../../csharp/programming-guide/concepts/linq/linq-to-xml.md)</ept>","source":"[LINQ to XML (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-xml.md)"},{"pos":[11642,11735],"content":"<bpt id=\"p1\">[</bpt>LINQ to Objects (C#)<ept id=\"p1\">](../../../../csharp/programming-guide/concepts/linq/linq-to-objects.md)</ept>","source":"[LINQ to Objects (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-objects.md)"},{"pos":[11744,11752],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[11756,11856],"content":"<bpt id=\"p1\">[</bpt>Language-Integrated Query (LINQ) (C#)<ept id=\"p1\">](../../../../csharp/programming-guide/concepts/linq/index.md)</ept>","source":"[Language-Integrated Query (LINQ) (C#)](../../../../csharp/programming-guide/concepts/linq/index.md)"},{"pos":[11859,11973],"content":"<bpt id=\"p1\">[</bpt>Getting Started with LINQ in C#<ept id=\"p1\">](../../../../csharp/programming-guide/concepts/linq/getting-started-with-linq.md)</ept>","source":"[Getting Started with LINQ in C#](../../../../csharp/programming-guide/concepts/linq/getting-started-with-linq.md)"},{"pos":[11976,12070],"content":"<bpt id=\"p1\">[</bpt>LINQ Query Expressions<ept id=\"p1\">](../../../../csharp/programming-guide/linq-query-expressions/index.md)</ept>","source":"[LINQ Query Expressions](../../../../csharp/programming-guide/linq-query-expressions/index.md)"}]}