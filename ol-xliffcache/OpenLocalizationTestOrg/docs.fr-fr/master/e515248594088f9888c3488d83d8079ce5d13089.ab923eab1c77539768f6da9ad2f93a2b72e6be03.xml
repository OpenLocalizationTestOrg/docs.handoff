{"content":"---\ntitle: \"Fault Handling in a Flowchart Activity Using TryCatch\"\nms.date: \"03/30/2017\"\nms.assetid: 50922964-bfe0-4ba8-9422-0e7220d514fd\n---\n# Fault Handling in a Flowchart Activity Using TryCatch\nThis sample shows how the <xref:System.Activities.Statements.TryCatch> activity can be used within a complex control flow activity.\n\n In this sample, a promotion code and number of children are passed as variables to a <xref:System.Activities.Statements.Flowchart> activity that calculates a discount based on formulae that correspond to the promotion code. The sample includes imperative code and workflow designer versions of the sample.\n\n The following table details the variables for the `CreateFlowchartWithFaults` activity.\n\n|Parameters|Description|\n|----------------|-----------------|\n|promoCode|The promotion code. Type: String<br /><br /> The possible values with description in parentheses:<br /><br /> -   Single (Single)<br />-   MNK (Married with no kids.)<br />-   MWK (Married with kids.)|\n|numKids|The number of children. Type: int|\n\n The `CreateFlowchartWithFaults` activity uses a <xref:System.Activities.Statements.FlowSwitch%601> activity that switches on the `promoCode` argument and calculates the discount using the following formula.\n\n|Value of `promoCode`|Discount (%)|\n|--------------------------|--------------------|\n|Single|10|\n|MNK|15|\n|MWK|15 + (1 – 1/`numberOfKids`)\\*10 **Note:**  Potentially, this calculation can throw a <xref:System.DivideByZeroException>. So, the discount calculation is wrapped in a <xref:System.Activities.Statements.TryCatch> activity that catches the <xref:System.DivideByZeroException> exception and sets the discount to zero.|\n\n#### To use this sample\n\n1.  Using Visual Studio 2010, open the FlowchartWithFaultHandling.sln solution file.\n\n2.  To build the solution, press CTRL+SHIFT+B.\n\n3.  To run the solution, press F5.\n\n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Built-InActivities\\FlowChartWithFaultHandling`  \n  \n## See also\n\n- [Flowchart Workflows](../flowchart-workflows.md)\n- [Exceptions](../exceptions.md)\n","nodes":[{"pos":[4,137],"embed":true,"restype":"x-metadata","content":"title: \"Fault Handling in a Flowchart Activity Using TryCatch\"\nms.date: \"03/30/2017\"\nms.assetid: 50922964-bfe0-4ba8-9422-0e7220d514fd","nodes":[{"content":"Fault Handling in a Flowchart Activity Using TryCatch","nodes":[{"pos":[0,53],"content":"Fault Handling in a Flowchart Activity Using TryCatch","nodes":[{"content":"Fault Handling in a Flowchart Activity Using TryCatch","pos":[0,53]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[144,197],"content":"Fault Handling in a Flowchart Activity Using TryCatch","linkify":"Fault Handling in a Flowchart Activity Using TryCatch","nodes":[{"content":"Fault Handling in a Flowchart Activity Using TryCatch","pos":[0,53]}]},{"pos":[198,329],"content":"This sample shows how the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> activity can be used within a complex control flow activity.","source":"This sample shows how the <xref:System.Activities.Statements.TryCatch> activity can be used within a complex control flow activity."},{"content":"In this sample, a promotion code and number of children are passed as variables to a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Flowchart&gt;</ph> activity that calculates a discount based on formulae that correspond to the promotion code.","pos":[332,555],"source":"In this sample, a promotion code and number of children are passed as variables to a <xref:System.Activities.Statements.Flowchart> activity that calculates a discount based on formulae that correspond to the promotion code."},{"content":"The sample includes imperative code and workflow designer versions of the sample.","pos":[556,637]},{"pos":[640,727],"content":"The following table details the variables for the <ph id=\"ph1\">`CreateFlowchartWithFaults`</ph> activity.","source":"The following table details the variables for the `CreateFlowchartWithFaults` activity."},{"content":"Parameters","pos":[730,740]},{"content":"Description","pos":[741,752]},{"content":"promoCode","pos":[792,801]},{"content":"The promotion code.","pos":[802,821]},{"content":"Type: String","pos":[822,834]},{"content":"The possible values with description in parentheses:","pos":[847,899]},{"content":"-   Single (Single)","pos":[912,931]},{"content":"-   MNK (Married with no kids.)","pos":[937,968]},{"content":"-   MWK (Married with kids.)","pos":[974,1002]},{"content":"numKids","pos":[1005,1012]},{"content":"The number of children.","pos":[1013,1036]},{"content":"Type: int","pos":[1037,1046]},{"pos":[1050,1256],"content":"The <ph id=\"ph1\">`CreateFlowchartWithFaults`</ph> activity uses a <ph id=\"ph2\">&lt;xref:System.Activities.Statements.FlowSwitch%601&gt;</ph> activity that switches on the <ph id=\"ph3\">`promoCode`</ph> argument and calculates the discount using the following formula.","source":"The `CreateFlowchartWithFaults` activity uses a <xref:System.Activities.Statements.FlowSwitch%601> activity that switches on the `promoCode` argument and calculates the discount using the following formula."},{"pos":[1259,1279],"content":"Value of <ph id=\"ph1\">`promoCode`</ph>","source":"Value of `promoCode`"},{"content":"Discount (%)","pos":[1280,1292]},{"content":"Single","pos":[1345,1351]},{"content":"10","pos":[1352,1354]},{"content":"MNK","pos":[1357,1360]},{"content":"15","pos":[1361,1363]},{"content":"MWK","pos":[1366,1369]},{"content":"15 + (1 – 1/<ph id=\"ph1\">`numberOfKids`</ph>)<ph id=\"ph2\">\\*</ph>10 <bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  Potentially, this calculation can throw a <ph id=\"ph3\">&lt;xref:System.DivideByZeroException&gt;</ph>.","pos":[1370,1491],"source":"15 + (1 – 1/`numberOfKids`)\\*10 **Note:**  Potentially, this calculation can throw a <xref:System.DivideByZeroException>."},{"content":"So, the discount calculation is wrapped in a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.TryCatch&gt;</ph> activity that catches the <ph id=\"ph2\">&lt;xref:System.DivideByZeroException&gt;</ph> exception and sets the discount to zero.","pos":[1492,1684],"source":" So, the discount calculation is wrapped in a <xref:System.Activities.Statements.TryCatch> activity that catches the <xref:System.DivideByZeroException> exception and sets the discount to zero."},{"pos":[1692,1710],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"content":"Using Visual Studio 2010, open the FlowchartWithFaultHandling.sln solution file.","pos":[1716,1796]},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[1802,1844]},{"content":"To run the solution, press F5.","pos":[1850,1880]},{"pos":[1884,2017],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[14,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[0,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2071,2381],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[2382,2432]},{"pos":[2539,2547],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2551,2599],"content":"<bpt id=\"p1\">[</bpt>Flowchart Workflows<ept id=\"p1\">](../flowchart-workflows.md)</ept>","source":"[Flowchart Workflows](../flowchart-workflows.md)"},{"pos":[2602,2632],"content":"<bpt id=\"p1\">[</bpt>Exceptions<ept id=\"p1\">](../exceptions.md)</ept>","source":"[Exceptions](../exceptions.md)"}]}