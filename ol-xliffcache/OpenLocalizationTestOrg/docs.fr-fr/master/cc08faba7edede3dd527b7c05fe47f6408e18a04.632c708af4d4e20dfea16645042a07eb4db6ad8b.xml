{"content":"---\ntitle: \"How to: Configure Network Tracing\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"formatting [.NET Framework], network tracing\"\n  - \"network tracing, configuring\"\n  - \"level attribute\"\n  - \"app.config files, network tracing\"\n  - \"configuration files [.NET Framework], network tracing\"\n  - \"protocol-level trace output\"\n  - \"application configuration files, network tracing\"\n  - \"sockets, trace output\"\nms.assetid: 5ef9fe4b-8d3d-490e-9259-1d014b2181af\n---\n# How to: Configure Network Tracing\nThe application or computer configuration file holds the settings that determine the format and content of network traces. Before performing this procedure, be sure tracing is enabled. For information about enabling tracing, see [Enabling Network Tracing](../../../docs/framework/network-programming/enabling-network-tracing.md).  \n  \n The computer configuration file, machine.config, is stored in the %Windir%\\Microsoft.NET\\Framework folder in the directory where Windows was installed. There is a separate machine.config file in the folders under %Windir%\\Microsoft.NET\\Framework for each version of the .NET Framework installed on the computer (for example, C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\machine.config or C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Config\\machine.config.).  \n  \n These settings can also be made in the configuration file for the application, which has precedence over the computer configuration file.  \n  \n### To configure network tracing  \n  \n-   Add the following lines to the appropriate configuration file. The values and options for these settings are described in the tables below.  \n  \n    ```xml  \n    <configuration>  \n      <system.diagnostics>  \n        <sources>  \n          <source name=\"System.Net\" tracemode=\"includehex\" maxdatasize=\"1024\">  \n            <listeners>  \n              <add name=\"System.Net\"/>  \n            </listeners>  \n          </source>  \n          <source name=\"System.Net.Cache\">  \n            <listeners>  \n              <add name=\"System.Net\"/>  \n            </listeners>  \n          </source>  \n          <source name=\"System.Net.Http\">  \n            <listeners>  \n              <add name=\"System.Net\"/>  \n            </listeners>  \n          </source>  \n          <source name=\"System.Net.Sockets\">  \n            <listeners>  \n              <add name=\"System.Net\"/>  \n            </listeners>  \n          </source>  \n          <source name=\"System.Net.WebSockets\">  \n            <listeners>  \n              <add name=\"System.Net\"/>  \n            </listeners>  \n          </source>  \n        </sources>  \n        <switches>  \n          <add name=\"System.Net\" value=\"Verbose\"/>  \n          <add name=\"System.Net.Cache\" value=\"Verbose\"/>  \n          <add name=\"System.Net.Http\" value=\"Verbose\"/>  \n          <add name=\"System.Net.Sockets\" value=\"Verbose\"/>  \n          <add name=\"System.Net.WebSockets\" value=\"Verbose\"/>  \n        </switches>  \n        <sharedListeners>  \n          <add name=\"System.Net\"  \n            type=\"System.Diagnostics.TextWriterTraceListener\"  \n            initializeData=\"network.log\"\n            traceOutputOptions=\"ProcessId, DateTime\" \n          />  \n        </sharedListeners>  \n        <trace autoflush=\"true\"/>  \n      </system.diagnostics>  \n    </configuration>  \n    ```  \n  \n When you add a name to the `<switches>` block, the trace output includes information from some methods related to the name. The following table describes the output.  \n  \n|Name|Output from|  \n|----------|-----------------|  \n|`System.Net.Sockets`|Some public methods of the <xref:System.Net.Sockets.Socket>, <xref:System.Net.Sockets.TcpListener>, <xref:System.Net.Sockets.TcpClient>, and <xref:System.Net.Dns> classes|  \n|`System.Net`|Some public methods of the <xref:System.Net.HttpWebRequest>, <xref:System.Net.HttpWebResponse>, <xref:System.Net.FtpWebRequest>, and <xref:System.Net.FtpWebResponse> classes, and SSL debug information (invalid certificates, missing issuers list, and client certificate errors.)|  \n|`System.Net.HttpListener`|Some public methods of the <xref:System.Net.HttpListener>, <xref:System.Net.HttpListenerRequest>, and <xref:System.Net.HttpListenerResponse> classes.|  \n|`System.Net.Cache`|Some private and internal methods in `System.Net.Cache`.|  \n|`System.Net.Http`|Some public methods of the  <xref:System.Net.Http.HttpClient>,  <xref:System.Net.Http.DelegatingHandler>,  <xref:System.Net.Http.HttpClientHandler>, <xref:System.Net.Http.HttpMessageHandler>,  <xref:System.Net.Http.MessageProcessingHandler>, and  <xref:System.Net.Http.WebRequestHandler> classes.|  \n|`System.Net.WebSockets.WebSocket`|Some public methods of the <xref:System.Net.WebSockets.ClientWebSocket> and <xref:System.Net.WebSockets.WebSocket> classes.|  \n  \n The attributes listed in the following table configure trace output.  \n  \n|Attribute name|Attribute value|  \n|--------------------|---------------------|  \n|`Value`|Required <xref:System.String> attribute. Sets the verbosity of the output. Legitimate values are `Critical`, `Error`, `Verbose`, `Warning`, and `Information`.<br /><br /> This attribute must be set on the \\<add name> element of the \\<switches> element as shown in the example. An exception is thrown if this attribute is set on the \\<source> element.|  \n|`maxdatasize`|Optional <xref:System.Int32> attribute. Sets the maximum number of bytes of network data included in each line trace. The default value is 1024.<br /><br /> This attribute must be set on the \\<source> element as shown in the example. An exception is thrown if this attribute is set on an element under the \\<switches> element.|  \n|`Tracemode`|Optional <xref:System.String> attribute. Set to `includehex` to show protocol traces in hexadecimal and text format. Set to `protocolonly` to show only text. The default value is `includehex`.<br /><br /> This attribute must be set on the \\<switches> element as shown in the example. An exception is thrown if this attribute is set on an element under the \\<source> element.|  \n  \n## See also\n\n- [Interpreting Network Tracing](../../../docs/framework/network-programming/interpreting-network-tracing.md)\n- [Network Tracing in the .NET Framework](../../../docs/framework/network-programming/network-tracing.md)\n- [Enabling Network Tracing](../../../docs/framework/network-programming/enabling-network-tracing.md)\n- [Tracing and Instrumenting Applications](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)\n","nodes":[{"pos":[4,464],"embed":true,"restype":"x-metadata","content":"title: \"How to: Configure Network Tracing\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"formatting [.NET Framework], network tracing\"\n  - \"network tracing, configuring\"\n  - \"level attribute\"\n  - \"app.config files, network tracing\"\n  - \"configuration files [.NET Framework], network tracing\"\n  - \"protocol-level trace output\"\n  - \"application configuration files, network tracing\"\n  - \"sockets, trace output\"\nms.assetid: 5ef9fe4b-8d3d-490e-9259-1d014b2181af","nodes":[{"content":"How to: Configure Network Tracing","nodes":[{"pos":[0,33],"content":"How to: Configure Network Tracing","nodes":[{"content":"How to: Configure Network Tracing","pos":[0,33]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[471,504],"content":"How to: Configure Network Tracing","linkify":"How to: Configure Network Tracing","nodes":[{"content":"How to: Configure Network Tracing","pos":[0,33]}]},{"content":"The application or computer configuration file holds the settings that determine the format and content of network traces.","pos":[505,627]},{"content":"Before performing this procedure, be sure tracing is enabled.","pos":[628,689]},{"content":"For information about enabling tracing, see <bpt id=\"p1\">[</bpt>Enabling Network Tracing<ept id=\"p1\">](../../../docs/framework/network-programming/enabling-network-tracing.md)</ept>.","pos":[690,834],"source":" For information about enabling tracing, see [Enabling Network Tracing](../../../docs/framework/network-programming/enabling-network-tracing.md)."},{"content":"The computer configuration file, machine.config, is stored in the %Windir%\\Microsoft.NET\\Framework folder in the directory where Windows was installed.","pos":[841,992]},{"content":"There is a separate machine.config file in the folders under %Windir%\\Microsoft.NET\\Framework for each version of the .NET Framework installed on the computer (for example, C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\machine.config or C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Config\\machine.config.).","pos":[993,1302]},{"content":"These settings can also be made in the configuration file for the application, which has precedence over the computer configuration file.","pos":[1309,1446]},{"pos":[1456,1484],"content":"To configure network tracing","linkify":"To configure network tracing","nodes":[{"content":"To configure network tracing","pos":[0,28]}]},{"content":"Add the following lines to the appropriate configuration file.","pos":[1494,1556]},{"content":"The values and options for these settings are described in the tables below.","pos":[1557,1633]},{"content":"When you add a name to the <ph id=\"ph1\">`&lt;switches&gt;`</ph> block, the trace output includes information from some methods related to the name.","pos":[3298,3421],"source":"When you add a name to the `<switches>` block, the trace output includes information from some methods related to the name."},{"content":"The following table describes the output.","pos":[3422,3463]},{"content":"Name","pos":[3470,3474]},{"content":"Output from","pos":[3475,3486]},{"pos":[3545,3715],"content":"Some public methods of the <ph id=\"ph1\">&lt;xref:System.Net.Sockets.Socket&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Net.Sockets.TcpListener&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Net.Sockets.TcpClient&gt;</ph>, and <ph id=\"ph4\">&lt;xref:System.Net.Dns&gt;</ph> classes","source":"Some public methods of the <xref:System.Net.Sockets.Socket>, <xref:System.Net.Sockets.TcpListener>, <xref:System.Net.Sockets.TcpClient>, and <xref:System.Net.Dns> classes"},{"pos":[3733,4010],"content":"Some public methods of the <ph id=\"ph1\">&lt;xref:System.Net.HttpWebRequest&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Net.HttpWebResponse&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.Net.FtpWebRequest&gt;</ph>, and <ph id=\"ph4\">&lt;xref:System.Net.FtpWebResponse&gt;</ph> classes, and SSL debug information (invalid certificates, missing issuers list, and client certificate errors.)","source":"Some public methods of the <xref:System.Net.HttpWebRequest>, <xref:System.Net.HttpWebResponse>, <xref:System.Net.FtpWebRequest>, and <xref:System.Net.FtpWebResponse> classes, and SSL debug information (invalid certificates, missing issuers list, and client certificate errors.)"},{"pos":[4041,4190],"content":"Some public methods of the <ph id=\"ph1\">&lt;xref:System.Net.HttpListener&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Net.HttpListenerRequest&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Net.HttpListenerResponse&gt;</ph> classes.","source":"Some public methods of the <xref:System.Net.HttpListener>, <xref:System.Net.HttpListenerRequest>, and <xref:System.Net.HttpListenerResponse> classes."},{"pos":[4214,4270],"content":"Some private and internal methods in <ph id=\"ph1\">`System.Net.Cache`</ph>.","source":"Some private and internal methods in `System.Net.Cache`."},{"pos":[4293,4589],"content":"Some public methods of the  <ph id=\"ph1\">&lt;xref:System.Net.Http.HttpClient&gt;</ph>,  <ph id=\"ph2\">&lt;xref:System.Net.Http.DelegatingHandler&gt;</ph>,  <ph id=\"ph3\">&lt;xref:System.Net.Http.HttpClientHandler&gt;</ph>, <ph id=\"ph4\">&lt;xref:System.Net.Http.HttpMessageHandler&gt;</ph>,  <ph id=\"ph5\">&lt;xref:System.Net.Http.MessageProcessingHandler&gt;</ph>, and  <ph id=\"ph6\">&lt;xref:System.Net.Http.WebRequestHandler&gt;</ph> classes.","source":"Some public methods of the  <xref:System.Net.Http.HttpClient>,  <xref:System.Net.Http.DelegatingHandler>,  <xref:System.Net.Http.HttpClientHandler>, <xref:System.Net.Http.HttpMessageHandler>,  <xref:System.Net.Http.MessageProcessingHandler>, and  <xref:System.Net.Http.WebRequestHandler> classes."},{"pos":[4628,4751],"content":"Some public methods of the <ph id=\"ph1\">&lt;xref:System.Net.WebSockets.ClientWebSocket&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Net.WebSockets.WebSocket&gt;</ph> classes.","source":"Some public methods of the <xref:System.Net.WebSockets.ClientWebSocket> and <xref:System.Net.WebSockets.WebSocket> classes."},{"content":"The attributes listed in the following table configure trace output.","pos":[4759,4827]},{"content":"Attribute name","pos":[4834,4848]},{"content":"Attribute value","pos":[4849,4864]},{"content":"Required <ph id=\"ph1\">&lt;xref:System.String&gt;</ph> attribute.","pos":[4924,4964],"source":"Required <xref:System.String> attribute."},{"content":"Sets the verbosity of the output.","pos":[4965,4998]},{"content":"Legitimate values are <ph id=\"ph1\">`Critical`</ph>, <ph id=\"ph2\">`Error`</ph>, <ph id=\"ph3\">`Verbose`</ph>, <ph id=\"ph4\">`Warning`</ph>, and <ph id=\"ph5\">`Information`</ph>.","pos":[4999,5082],"source":" Legitimate values are `Critical`, `Error`, `Verbose`, `Warning`, and `Information`."},{"content":"This attribute must be set on the <ph id=\"ph1\">\\&lt;</ph>add name&gt; element of the <ph id=\"ph2\">\\&lt;</ph>switches&gt; element as shown in the example.","pos":[5095,5200],"source":"This attribute must be set on the \\<add name> element of the \\<switches> element as shown in the example."},{"content":"An exception is thrown if this attribute is set on the <ph id=\"ph1\">\\&lt;</ph>source&gt; element.","pos":[5201,5274],"source":" An exception is thrown if this attribute is set on the \\<source> element."},{"content":"Optional <ph id=\"ph1\">&lt;xref:System.Int32&gt;</ph> attribute.","pos":[5293,5332],"source":"Optional <xref:System.Int32> attribute."},{"content":"Sets the maximum number of bytes of network data included in each line trace.","pos":[5333,5410]},{"content":"The default value is 1024.","pos":[5411,5437]},{"content":"This attribute must be set on the <ph id=\"ph1\">\\&lt;</ph>source&gt; element as shown in the example.","pos":[5450,5526],"source":"This attribute must be set on the \\<source> element as shown in the example."},{"content":"An exception is thrown if this attribute is set on an element under the <ph id=\"ph1\">\\&lt;</ph>switches&gt; element.","pos":[5527,5619],"source":" An exception is thrown if this attribute is set on an element under the \\<switches> element."},{"content":"Optional <ph id=\"ph1\">&lt;xref:System.String&gt;</ph> attribute.","pos":[5636,5676],"source":"Optional <xref:System.String> attribute."},{"content":"Set to <ph id=\"ph1\">`includehex`</ph> to show protocol traces in hexadecimal and text format.","pos":[5677,5752],"source":" Set to `includehex` to show protocol traces in hexadecimal and text format."},{"content":"Set to <ph id=\"ph1\">`protocolonly`</ph> to show only text.","pos":[5753,5793],"source":" Set to `protocolonly` to show only text."},{"content":"The default value is <ph id=\"ph1\">`includehex`</ph>.","pos":[5794,5828],"source":" The default value is `includehex`."},{"content":"This attribute must be set on the <ph id=\"ph1\">\\&lt;</ph>switches&gt; element as shown in the example.","pos":[5841,5919],"source":"This attribute must be set on the \\<switches> element as shown in the example."},{"content":"An exception is thrown if this attribute is set on an element under the <ph id=\"ph1\">\\&lt;</ph>source&gt; element.","pos":[5920,6010],"source":" An exception is thrown if this attribute is set on an element under the \\<source> element."},{"pos":[6020,6028],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6032,6139],"content":"<bpt id=\"p1\">[</bpt>Interpreting Network Tracing<ept id=\"p1\">](../../../docs/framework/network-programming/interpreting-network-tracing.md)</ept>","source":"[Interpreting Network Tracing](../../../docs/framework/network-programming/interpreting-network-tracing.md)"},{"pos":[6142,6245],"content":"<bpt id=\"p1\">[</bpt>Network Tracing in the .NET Framework<ept id=\"p1\">](../../../docs/framework/network-programming/network-tracing.md)</ept>","source":"[Network Tracing in the .NET Framework](../../../docs/framework/network-programming/network-tracing.md)"},{"pos":[6248,6347],"content":"<bpt id=\"p1\">[</bpt>Enabling Network Tracing<ept id=\"p1\">](../../../docs/framework/network-programming/enabling-network-tracing.md)</ept>","source":"[Enabling Network Tracing](../../../docs/framework/network-programming/enabling-network-tracing.md)"},{"pos":[6350,6477],"content":"<bpt id=\"p1\">[</bpt>Tracing and Instrumenting Applications<ept id=\"p1\">](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)</ept>","source":"[Tracing and Instrumenting Applications](../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)"}]}