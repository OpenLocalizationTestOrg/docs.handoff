{"content":"---\ntitle: \"Mitigation: Path Normalization\"\nms.date: \"03/30/2017\"\nms.assetid: 158d47b1-ba6d-4fa6-8963-a012666bdc31\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Mitigation: Path Normalization\nStarting with apps the target  the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization in the .NET Framework has changed.  \n  \n## What is path normalization?  \n Normalizing a path involves modifying the string that identifies a path or file so that it conforms to a valid path on the target operating system. Normalization typically involves:  \n  \n-   Canonicalizing component and directory separators.  \n  \n-   Applying the current directory to a relative path.  \n  \n-   Evaluating the relative directory (`.`) or the parent directory (`..`) in a path.  \n  \n-   Trimming specified characters.  \n  \n## The changes  \n Starting with apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization has changed in the following ways:  \n  \n-   The runtime defers to the operating system's [GetFullPathName](/windows/desktop/api/fileapi/nf-fileapi-getfullpathnamea) function to normalize paths.  \n  \n-   Normalization no longer involves trimming the end of directory segments (such as a space at the end of a directory name).  \n  \n-   Support for device path syntax in full trust, including  `\\\\.\\` and, for file I/O APIs   in mscorlib.dll, `\\\\?\\`.  \n  \n-   The runtime does not validate device syntax paths.  \n  \n-   The use of device syntax to access alternate data streams is supported.  \n  \n## Impact  \n For apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later, these changes are on  by default. They should improve performance while allowing methods to access previously inaccessible paths.  \n  \n Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and earlier versions but are running under the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later are unaffected by this change.  \n  \n## Mitigation  \n Apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can opt out of this change and use legacy normalization by adding the following to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file:  \n  \n```xml  \n<runtime>  \n    <AppContextSwitchOverrides value=\"Switch.System.IO.UseLegacyPathHandling=true\" />    \n</runtime>  \n```  \n  \n Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] or earlier but are running on the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can enable the changes to path normalization by adding the following line to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application .configuration file:  \n  \n```xml  \n<runtime>  \n    <AppContextSwitchOverrides value=\"Switch.System.IO.UseLegacyPathHandling=false\" />    \n</runtime>  \n```  \n  \n## See also\n\n- [Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)\n","nodes":[{"pos":[4,154],"embed":true,"restype":"x-metadata","content":"title: \"Mitigation: Path Normalization\"\nms.date: \"03/30/2017\"\nms.assetid: 158d47b1-ba6d-4fa6-8963-a012666bdc31\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Mitigation: Path Normalization","nodes":[{"pos":[0,30],"content":"Mitigation: Path Normalization","nodes":[{"content":"Mitigation: Path Normalization","pos":[0,30]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[161,191],"content":"Mitigation: Path Normalization","linkify":"Mitigation: Path Normalization","nodes":[{"content":"Mitigation: Path Normalization","pos":[0,30]}]},{"pos":[192,336],"content":"Starting with apps the target  the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, path normalization in the .NET Framework has changed.","source":"Starting with apps the target  the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization in the .NET Framework has changed."},{"pos":[345,372],"content":"What is path normalization?","linkify":"What is path normalization?","nodes":[{"content":"What is path normalization?","pos":[0,27]}]},{"content":"Normalizing a path involves modifying the string that identifies a path or file so that it conforms to a valid path on the target operating system.","pos":[376,523]},{"content":"Normalization typically involves:","pos":[524,557]},{"content":"Canonicalizing component and directory separators.","pos":[567,617]},{"content":"Applying the current directory to a relative path.","pos":[627,677]},{"pos":[687,768],"content":"Evaluating the relative directory (<ph id=\"ph1\">`.`</ph>) or the parent directory (<ph id=\"ph2\">`..`</ph>) in a path.","source":"Evaluating the relative directory (`.`) or the parent directory (`..`) in a path."},{"content":"Trimming specified characters.","pos":[778,808]},{"pos":[817,828],"content":"The changes","linkify":"The changes","nodes":[{"content":"The changes","pos":[0,11]}]},{"pos":[832,976],"content":"Starting with apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph>, path normalization has changed in the following ways:","source":"Starting with apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], path normalization has changed in the following ways:"},{"pos":[986,1135],"content":"The runtime defers to the operating system's <bpt id=\"p1\">[</bpt>GetFullPathName<ept id=\"p1\">](/windows/desktop/api/fileapi/nf-fileapi-getfullpathnamea)</ept> function to normalize paths.","source":"The runtime defers to the operating system's [GetFullPathName](/windows/desktop/api/fileapi/nf-fileapi-getfullpathnamea) function to normalize paths."},{"content":"Normalization no longer involves trimming the end of directory segments (such as a space at the end of a directory name).","pos":[1145,1266]},{"pos":[1276,1389],"content":"Support for device path syntax in full trust, including  <ph id=\"ph1\">`\\\\.\\`</ph> and, for file I/O APIs   in mscorlib.dll, <ph id=\"ph2\">`\\\\?\\`</ph>.","source":"Support for device path syntax in full trust, including  `\\\\.\\` and, for file I/O APIs   in mscorlib.dll, `\\\\?\\`."},{"content":"The runtime does not validate device syntax paths.","pos":[1399,1449]},{"content":"The use of device syntax to access alternate data streams is supported.","pos":[1459,1530]},{"pos":[1539,1545],"content":"Impact","linkify":"Impact","nodes":[{"content":"Impact","pos":[0,6]}]},{"content":"For apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later, these changes are on  by default.","pos":[1549,1672],"source":"For apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later, these changes are on  by default."},{"content":"They should improve performance while allowing methods to access previously inaccessible paths.","pos":[1673,1768]},{"pos":[1775,1992],"content":"Apps that target the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> and earlier versions but are running under the <ph id=\"ph2\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later are unaffected by this change.","source":"Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] and earlier versions but are running under the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later are unaffected by this change."},{"pos":[2001,2011],"content":"Mitigation","linkify":"Mitigation","nodes":[{"content":"Mitigation","pos":[0,10]}]},{"pos":[2015,2325],"content":"Apps that target the <ph id=\"ph1\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later can opt out of this change and use legacy normalization by adding the following to the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of the application configuration file:","source":"Apps that target the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can opt out of this change and use legacy normalization by adding the following to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application configuration file:"},{"pos":[2465,2859],"content":"Apps that target the <ph id=\"ph1\">[!INCLUDE[net_v461](../../../includes/net-v461-md.md)]</ph> or earlier but are running on the <ph id=\"ph2\">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)]</ph> or later can enable the changes to path normalization by adding the following line to the <bpt id=\"p1\">[</bpt><ph id=\"ph3\">\\&lt;</ph>runtime&gt;<ept id=\"p1\">](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md)</ept> section of the application .configuration file:","source":"Apps that target the [!INCLUDE[net_v461](../../../includes/net-v461-md.md)] or earlier but are running on the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)] or later can enable the changes to path normalization by adding the following line to the [\\<runtime>](../../../docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of the application .configuration file:"},{"pos":[3002,3010],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3014,3126],"content":"<bpt id=\"p1\">[</bpt>Retargeting Changes<ept id=\"p1\">](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)</ept>","source":"[Retargeting Changes](../../../docs/framework/migration-guide/retargeting-changes-in-the-net-framework-4-6-2.md)"}]}