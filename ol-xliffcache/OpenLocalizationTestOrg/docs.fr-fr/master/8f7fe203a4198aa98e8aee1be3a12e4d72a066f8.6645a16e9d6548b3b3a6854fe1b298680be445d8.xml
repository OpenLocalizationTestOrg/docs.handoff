{"content":"---\ntitle: \"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost\"\nms.date: \"03/30/2017\"\nms.assetid: 51b25c86-292c-43e4-8d13-273d2badc8ad\n---\n# How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost\nThe <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> is a behavior that enables you to specify the action to take if an unhandled exception occurs within a workflow hosted in <xref:System.ServiceModel.Activities.WorkflowServiceHost>. This topic shows how to configure this behavior in a configuration file.  \n  \n### To configure WorkflowUnhandledExceptionBehavior  \n  \n1.  Add a <`workflowUnhandledException`> element in a <`behavior`> element within a <`serviceBehaviors`> element, using the `action` attribute to specify the action to take when an unhandled exception occurs as shown in the following example.  \n  \n    ```xml  \n    <behaviors>  \n      <serviceBehaviors>  \n        <behavior name=\"\">  \n          <workflowUnhandledException action=\"abandonAndSuspend\"/>   \n        </behavior>  \n      </serviceBehaviors>  \n    </behaviors>  \n    ```  \n  \n    > [!NOTE]\n    >  The preceding configuration sample is using simplified configuration. For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).  \n  \n     This behavior can be configured in code as shown in the following example.  \n  \n    ```csharp  \n    host.Description.Behaviors.Add(new WorkflowUnhandledExceptionBehavior { Action = WorkflowUnhandledExceptionAction.AbandonAndSuspend });  \n    ```  \n  \n     The `action` attribute of the <`workflowUnhandledException`> element can be set to one of the following values:  \n  \n     **abandon**  \n     Aborts the instance in memory without touching the persisted instance state (that is, roll back to the last persist point).  \n  \n     **abandonAndSuspend**  \n     Aborts the instance in memory and updates the persisted instance to be suspended.  \n  \n     **cancel**  \n     Calls cancellation handlers for the instance and then completes the instance in memory, which may also remove it from the instance store  \n  \n     **terminate**  \n     Completes the instance in memory and removes it from the instance store.  \n  \n     For more information about <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md).  \n  \n## See also\n\n- [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)\n- [Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)\n","nodes":[{"pos":[4,164],"embed":true,"restype":"x-metadata","content":"title: \"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost\"\nms.date: \"03/30/2017\"\nms.assetid: 51b25c86-292c-43e4-8d13-273d2badc8ad","nodes":[{"content":"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost","nodes":[{"pos":[0,80],"content":"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost","nodes":[{"content":"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost","pos":[0,80]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[171,251],"content":"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost","linkify":"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost","nodes":[{"content":"How to: Configure Workflow Unhandled Exception Behavior with WorkflowServiceHost","pos":[0,80]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior&gt;</ph> is a behavior that enables you to specify the action to take if an unhandled exception occurs within a workflow hosted in <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.","pos":[252,521],"source":"The <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> is a behavior that enables you to specify the action to take if an unhandled exception occurs within a workflow hosted in <xref:System.ServiceModel.Activities.WorkflowServiceHost>."},{"content":"This topic shows how to configure this behavior in a configuration file.","pos":[522,594]},{"pos":[604,651],"content":"To configure WorkflowUnhandledExceptionBehavior","linkify":"To configure WorkflowUnhandledExceptionBehavior","nodes":[{"content":"To configure WorkflowUnhandledExceptionBehavior","pos":[0,47]}]},{"pos":[661,899],"content":"Add a &lt;<ph id=\"ph1\">`workflowUnhandledException`</ph>&gt; element in a &lt;<ph id=\"ph2\">`behavior`</ph>&gt; element within a &lt;<ph id=\"ph3\">`serviceBehaviors`</ph>&gt; element, using the <ph id=\"ph4\">`action`</ph> attribute to specify the action to take when an unhandled exception occurs as shown in the following example.","source":"Add a <`workflowUnhandledException`> element in a <`behavior`> element within a <`serviceBehaviors`> element, using the `action` attribute to specify the action to take when an unhandled exception occurs as shown in the following example."},{"pos":[1150,1348],"content":"[!NOTE]\nThe preceding configuration sample is using simplified configuration. For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","leadings":["","    >  "],"nodes":[{"content":"The preceding configuration sample is using simplified configuration. For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","pos":[8,191],"nodes":[{"content":"The preceding configuration sample is using simplified configuration.","pos":[0,69]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept>.","pos":[70,183],"source":" For more information, see [Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md)."}]}]},{"content":"This behavior can be configured in code as shown in the following example.","pos":[1359,1433]},{"pos":[1615,1726],"content":"The <ph id=\"ph1\">`action`</ph> attribute of the &lt;<ph id=\"ph2\">`workflowUnhandledException`</ph>&gt; element can be set to one of the following values:","source":"The `action` attribute of the <`workflowUnhandledException`> element can be set to one of the following values:"},{"pos":[1737,1879],"content":"**abandon**  \n Aborts the instance in memory without touching the persisted instance state (that is, roll back to the last persist point).","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>abandon<ept id=\"p1\">**</ept>","pos":[0,11],"source":"**abandon**"},{"content":"Aborts the instance in memory without touching the persisted instance state (that is, roll back to the last persist point).","pos":[15,138]}]},{"pos":[1890,2000],"content":"**abandonAndSuspend**  \n Aborts the instance in memory and updates the persisted instance to be suspended.","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>abandonAndSuspend<ept id=\"p1\">**</ept>","pos":[0,21],"source":"**abandonAndSuspend**"},{"content":"Aborts the instance in memory and updates the persisted instance to be suspended.","pos":[25,106]}]},{"pos":[2011,2165],"content":"**cancel**  \n Calls cancellation handlers for the instance and then completes the instance in memory, which may also remove it from the instance store","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>cancel<ept id=\"p1\">**</ept>","pos":[0,10],"source":"**cancel**"},{"content":"Calls cancellation handlers for the instance and then completes the instance in memory, which may also remove it from the instance store","pos":[14,150]}]},{"pos":[2176,2269],"content":"**terminate**  \n Completes the instance in memory and removes it from the instance store.","leadings":["","    "],"nodes":[{"content":"<bpt id=\"p1\">**</bpt>terminate<ept id=\"p1\">**</ept>","pos":[0,13],"source":"**terminate**"},{"content":"Completes the instance in memory and removes it from the instance store.","pos":[17,89]}]},{"pos":[2280,2522],"content":"For more information about <ph id=\"ph1\">&lt;xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior&gt;</ph>, see <bpt id=\"p1\">[</bpt>Workflow Service Host Extensibility<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</ept>.","source":"For more information about <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, see [Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)."},{"pos":[2531,2539],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[2543,2667],"content":"<bpt id=\"p1\">[</bpt>Workflow Service Host Extensibility<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)</ept>","source":"[Workflow Service Host Extensibility](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md)"},{"pos":[2670,2758],"content":"<bpt id=\"p1\">[</bpt>Workflow Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-services.md)</ept>","source":"[Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)"}]}