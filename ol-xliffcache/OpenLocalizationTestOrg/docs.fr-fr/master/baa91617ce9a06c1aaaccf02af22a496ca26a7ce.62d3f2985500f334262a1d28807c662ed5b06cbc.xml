{"content":"---\ntitle: \"Cache Policy Interaction—Maximum Age and Maximum Staleness | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"maximum staleness\"\n  - \"freshness of cached resources\"\n  - \"time, cached resources\"\n  - \"maximum age policy\"\n  - \"staleness of cached resources\"\n  - \"age of cached resources\"\nms.assetid: 7f775925-89a1-4956-ba90-c869c1749a94\ncaps.latest.revision: 11\nauthor: \"mcleblanc\"\nms.author: \"markl\"\nmanager: \"markl\"\n---\n# Cache Policy Interaction—Maximum Age and Maximum Staleness\nTo help ensure that the freshest content is returned to the client application, the interaction of client cache policy and server revalidation requirements always results in the most conservative cache policy. All the examples in this topic illustrate the cache policy for a resource that is cached on January 1 and expires on January 4.  \n  \n In the following examples, the maximum staleness value (`maxStale`) is used in conjunction with a maximum age (`maxAge`):  \n  \n-   If the cache policy sets `maxAge` = 5 days and does not specify a `maxStale` value, according to the `maxAge` value, the content is usable until January 6. However, according to the server's revalidation requirements, the content expires on January 4. Because the content expiration date is more conservative (sooner), it takes precedence over the `maxAge` policy. Therefore, the content expires on January 4 and must be revalidated even though its maximum age has not been reached.  \n  \n-   If the cache policy sets `maxAge` = 5 days and `maxStale` = 3 days, according to the `maxAge` value, the content is usable until January 6. According to the `maxStale` value, the content is usable until January 7. Therefore, the content gets revalidated on January 6.  \n  \n-   If the cache policy sets `maxAge` = 5 days and `maxStale` = 1 day, according to the `maxAge` value, the content is usable until January 6. According to the `maxStale` value, the content is usable until January 5. Therefore, the content gets revalidated on January 5.  \n  \n When the maximum age is less than the content expiration date, the more conservative caching behavior always prevails and the maximum staleness value has no effect. The following examples illustrate the effect of setting a maximum staleness (`maxStale`) value when the maximum age (`maxAge`) is reached before the content expires:  \n  \n-   If the cache policy sets `maxAge` = 1 day and does not specify a value for `maxStale` value, the content is revalidated on January 2 even though it has not expired.  \n  \n-   If the cache policy sets `maxAge` = 1 day and `maxStale` = 3 days, the content is revalidated on January 2 to enforce the more conservative policy setting.  \n  \n-   If the cache policy sets `maxAge` = 1 day and `maxStale` = 1 day, the content is revalidated on January 2.  \n  \n## See Also  \n [Cache Management for Network Applications](../../../docs/framework/network-programming/cache-management-for-network-applications.md)   \n [Cache Policy](../../../docs/framework/network-programming/cache-policy.md)   \n [Location-Based Cache Policies](../../../docs/framework/network-programming/location-based-cache-policies.md)   \n [Time-Based Cache Policies](../../../docs/framework/network-programming/time-based-cache-policies.md)   \n [Configuring Caching in Network Applications](../../../docs/framework/network-programming/configuring-caching-in-network-applications.md)   \n [Cache Policy Interaction—Maximum Age and Minimum Freshness](../../../docs/framework/network-programming/cache-policy-interaction-maximum-age-and-minimum-freshness.md)","nodes":[{"pos":[12,87],"content":"Cache Policy Interaction—Maximum Age and Maximum Staleness | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Cache Policy Interaction—Maximum Age and Maximum Staleness | Microsoft Docs","pos":[0,75]}]},{"pos":[613,671],"content":"Cache Policy Interaction—Maximum Age and Maximum Staleness","linkify":"Cache Policy Interaction—Maximum Age and Maximum Staleness","nodes":[{"content":"Cache Policy Interaction—Maximum Age and Maximum Staleness","pos":[0,58]}]},{"content":"To help ensure that the freshest content is returned to the client application, the interaction of client cache policy and server revalidation requirements always results in the most conservative cache policy.","pos":[672,881]},{"content":"All the examples in this topic illustrate the cache policy for a resource that is cached on January 1 and expires on January 4.","pos":[882,1009]},{"pos":[1016,1137],"content":"In the following examples, the maximum staleness value (<ph id=\"ph1\">`maxStale`</ph>) is used in conjunction with a maximum age (<ph id=\"ph2\">`maxAge`</ph>):","source":"In the following examples, the maximum staleness value (`maxStale`) is used in conjunction with a maximum age (`maxAge`):"},{"content":"If the cache policy sets <ph id=\"ph1\">`maxAge`</ph> = 5 days and does not specify a <ph id=\"ph2\">`maxStale`</ph> value, according to the <ph id=\"ph3\">`maxAge`</ph> value, the content is usable until January 6.","pos":[1147,1302],"source":"If the cache policy sets `maxAge` = 5 days and does not specify a `maxStale` value, according to the `maxAge` value, the content is usable until January 6."},{"content":"However, according to the server's revalidation requirements, the content expires on January 4.","pos":[1303,1398]},{"content":"Because the content expiration date is more conservative (sooner), it takes precedence over the <ph id=\"ph1\">`maxAge`</ph> policy.","pos":[1399,1511],"source":" Because the content expiration date is more conservative (sooner), it takes precedence over the `maxAge` policy."},{"content":"Therefore, the content expires on January 4 and must be revalidated even though its maximum age has not been reached.","pos":[1512,1629]},{"content":"If the cache policy sets <ph id=\"ph1\">`maxAge`</ph> = 5 days and <ph id=\"ph2\">`maxStale`</ph> = 3 days, according to the <ph id=\"ph3\">`maxAge`</ph> value, the content is usable until January 6.","pos":[1639,1778],"source":"If the cache policy sets `maxAge` = 5 days and `maxStale` = 3 days, according to the `maxAge` value, the content is usable until January 6."},{"content":"According to the <ph id=\"ph1\">`maxStale`</ph> value, the content is usable until January 7.","pos":[1779,1852],"source":" According to the `maxStale` value, the content is usable until January 7."},{"content":"Therefore, the content gets revalidated on January 6.","pos":[1853,1906]},{"content":"If the cache policy sets <ph id=\"ph1\">`maxAge`</ph> = 5 days and <ph id=\"ph2\">`maxStale`</ph> = 1 day, according to the <ph id=\"ph3\">`maxAge`</ph> value, the content is usable until January 6.","pos":[1916,2054],"source":"If the cache policy sets `maxAge` = 5 days and `maxStale` = 1 day, according to the `maxAge` value, the content is usable until January 6."},{"content":"According to the <ph id=\"ph1\">`maxStale`</ph> value, the content is usable until January 5.","pos":[2055,2128],"source":" According to the `maxStale` value, the content is usable until January 5."},{"content":"Therefore, the content gets revalidated on January 5.","pos":[2129,2182]},{"content":"When the maximum age is less than the content expiration date, the more conservative caching behavior always prevails and the maximum staleness value has no effect.","pos":[2189,2353]},{"content":"The following examples illustrate the effect of setting a maximum staleness (<ph id=\"ph1\">`maxStale`</ph>) value when the maximum age (<ph id=\"ph2\">`maxAge`</ph>) is reached before the content expires:","pos":[2354,2519],"source":" The following examples illustrate the effect of setting a maximum staleness (`maxStale`) value when the maximum age (`maxAge`) is reached before the content expires:"},{"pos":[2529,2693],"content":"If the cache policy sets <ph id=\"ph1\">`maxAge`</ph> = 1 day and does not specify a value for <ph id=\"ph2\">`maxStale`</ph> value, the content is revalidated on January 2 even though it has not expired.","source":"If the cache policy sets `maxAge` = 1 day and does not specify a value for `maxStale` value, the content is revalidated on January 2 even though it has not expired."},{"pos":[2703,2858],"content":"If the cache policy sets <ph id=\"ph1\">`maxAge`</ph> = 1 day and <ph id=\"ph2\">`maxStale`</ph> = 3 days, the content is revalidated on January 2 to enforce the more conservative policy setting.","source":"If the cache policy sets `maxAge` = 1 day and `maxStale` = 3 days, the content is revalidated on January 2 to enforce the more conservative policy setting."},{"pos":[2868,2974],"content":"If the cache policy sets <ph id=\"ph1\">`maxAge`</ph> = 1 day and <ph id=\"ph2\">`maxStale`</ph> = 1 day, the content is revalidated on January 2.","source":"If the cache policy sets `maxAge` = 1 day and `maxStale` = 1 day, the content is revalidated on January 2."},{"pos":[2983,2991],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Cache Management for Network Applications<ept id=\"p1\">](../../../docs/framework/network-programming/cache-management-for-network-applications.md)</ept><ph id=\"ph1\"> </ph>","pos":[2995,3129],"source":"[Cache Management for Network Applications](../../../docs/framework/network-programming/cache-management-for-network-applications.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Cache Policy<ept id=\"p1\">](../../../docs/framework/network-programming/cache-policy.md)</ept><ph id=\"ph1\"> </ph>","pos":[3132,3209],"source":" [Cache Policy](../../../docs/framework/network-programming/cache-policy.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Location-Based Cache Policies<ept id=\"p1\">](../../../docs/framework/network-programming/location-based-cache-policies.md)</ept><ph id=\"ph1\"> </ph>","pos":[3212,3323],"source":" [Location-Based Cache Policies](../../../docs/framework/network-programming/location-based-cache-policies.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Time-Based Cache Policies<ept id=\"p1\">](../../../docs/framework/network-programming/time-based-cache-policies.md)</ept><ph id=\"ph1\"> </ph>","pos":[3326,3429],"source":" [Time-Based Cache Policies](../../../docs/framework/network-programming/time-based-cache-policies.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Configuring Caching in Network Applications<ept id=\"p1\">](../../../docs/framework/network-programming/configuring-caching-in-network-applications.md)</ept><ph id=\"ph1\"> </ph>","pos":[3432,3571],"source":" [Configuring Caching in Network Applications](../../../docs/framework/network-programming/configuring-caching-in-network-applications.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Cache Policy Interaction—Maximum Age and Minimum Freshness<ept id=\"p1\">](../../../docs/framework/network-programming/cache-policy-interaction-maximum-age-and-minimum-freshness.md)</ept>","pos":[3574,3742],"source":" [Cache Policy Interaction—Maximum Age and Minimum Freshness](../../../docs/framework/network-programming/cache-policy-interaction-maximum-age-and-minimum-freshness.md)"}]}