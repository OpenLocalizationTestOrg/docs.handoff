{"content":"---\ntitle: \"XDR Validation with XmlSchemaCollection\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 00833027-1428-4586-83c1-42f5de3323d1\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# XDR Validation with XmlSchemaCollection\n\nIf the XML-Data Reduced (XDR) schema you are validating against is stored in the **XmlSchemaCollection**, it is associated with the namespace URI specified when the schema was added to the collection. **XmlValidatingReader** maps the namespace URI in the XML document to the schema that corresponds to that URI in the collection.\n\n> [!IMPORTANT]\n> The <xref:System.Xml.Schema.XmlSchemaCollection> class is now obsolete and has been replaced with the <xref:System.Xml.Schema.XmlSchemaSet> class. For more information about the <xref:System.Xml.Schema.XmlSchemaSet> class see, [XmlSchemaSet for Schema Compilation](xmlschemaset-for-schema-compilation.md).\n\nFor example, if the root element of the XML document is `<bookstore xmlns=\"urn:newbooks-schema\">`, when the schema is added to the **XmlSchemaCollection** it references the same namespace, as follows:\n\n```\nxsc.Add(\"urn:newbooks-schema\", \"newbooks.xdr\")\n```\n\nThe following code example creates an **XmlValidatingReader** that takes an **XmlTextReader** and adds an XDR schema, HeadCount.xdr, to the **XmlSchemaCollection**.\n\n```vb\nImports System\nImports System.IO\nImports System.Xml\nImports System.Xml.Schema\n\nNamespace ValidationSample\n\n   Class Sample\n\n      Public Shared Sub Main()\n         Dim tr As New XmlTextReader(\"HeadCount.xml\")\n         Dim vr As New XmlValidatingReader(tr)\n\n         vr.Schemas.Add(\"xdrHeadCount\", \"HeadCount.xdr\")\n         vr.ValidationType = ValidationType.XDR\n         AddHandler vr.ValidationEventHandler, AddressOf ValidationHandler\n\n         While vr.Read()\n            PrintTypeInfo(vr)\n            If vr.NodeType = XmlNodeType.Element Then\n               While vr.MoveToNextAttribute()\n                  PrintTypeInfo(vr)\n               End While\n            End If\n         End While\n         Console.WriteLine(\"Validation finished\")\n      End Sub\n      ' Main\n\n      Public Shared Sub PrintTypeInfo(vr As XmlValidatingReader)\n         If Not (vr.SchemaType Is Nothing) Then\n            If TypeOf vr.SchemaType Is XmlSchemaDatatype Or TypeOf vr.SchemaType Is XmlSchemaSimpleType Then\n               Dim value As Object = vr.ReadTypedValue()\n               Console.WriteLine(\"{0}({1},{2}):{3}\", vr.NodeType, vr.Name, value.GetType().Name, value)\n            End If\n         End If\n      End Sub\n      ' PrintTypeInfo\n\n      Public Shared Sub ValidationHandler(sender As Object, args As ValidationEventArgs)\n         Console.WriteLine(\"***Validation error\")\n         Console.WriteLine(\"Severity:{0}\", args.Severity)\n         Console.WriteLine(\"Message:{0}\", args.Message)\n      End Sub\n      ' ValidationHandler\n   End Class\n   ' Sample\nEnd Namespace\n' ValidationSample\n```\n\n```csharp\nusing System;\nusing System.IO;\nusing System.Xml;\nusing System.Xml.Schema;\n\nnamespace ValidationSample\n{\n   class Sample\n   {\n      public static void Main()\n      {\n         XmlTextReader tr = new XmlTextReader(\"HeadCount.xml\");\n         XmlValidatingReader vr = new XmlValidatingReader(tr);\n\n         vr.Schemas.Add(\"xdrHeadCount\", \"HeadCount.xdr\");\n         vr.ValidationType = ValidationType.XDR;\n         vr.ValidationEventHandler += new ValidationEventHandler (ValidationHandler);\n\n         while(vr.Read())\n         {\n            PrintTypeInfo(vr);\n            if(vr.NodeType == XmlNodeType.Element)\n            {\n               while(vr.MoveToNextAttribute())\n                  PrintTypeInfo(vr);\n            }\n         }\n         Console.WriteLine(\"Validation finished\");\n      }\n\n      public static void PrintTypeInfo(XmlValidatingReader vr)\n      {\n         if(vr.SchemaType != null)\n         {\n            if(vr.SchemaType is XmlSchemaDatatype || vr.SchemaType is XmlSchemaSimpleType)\n            {\n               object value = vr.ReadTypedValue();\n               Console.WriteLine(\"{0}({1},{2}):{3}\", vr.NodeType, vr.Name, value.GetType().Name, value);\n            }\n         }\n      }\n\n      public static void ValidationHandler(object sender, ValidationEventArgs args)\n      {\n         Console.WriteLine(\"***Validation error\");\n         Console.WriteLine(\"\\tSeverity:{0}\", args.Severity);\n         Console.WriteLine(\"\\tMessage:{0}\", args.Message);\n      }\n   }\n}\n```\n\nThe following outlines the contents of the input file, *HeadCount.xml*, to be validated:\n\n```xml\n<!--Load HeadCount.xdr in SchemaCollection for Validation-->\n<HeadCount xmlns='xdrHeadCount'>\n   <Name>Waldo Pepper</Name>\n   <Name>Red Pepper</Name>\n</HeadCount>\n```\n\nThe following outlines the contents of the XDR schema file, *HeadCount.xdr*, to be validated against:\n\n```xml\n<Schema xmlns=\"urn:schemas-microsoft-com:xml-data\" xmlns:dt=\"urn:schemas-microsoft-com:datatypes\">\n   <ElementType name=\"Name\" content=\"textOnly\"/>\n   <AttributeType name=\"Bldg\" default=\"2\"/>\n   <ElementType name=\"HeadCount\" content=\"eltOnly\">\n      <element type=\"Name\"/>\n      <attribute type=\"Bldg\"/>\n   </ElementType>\n</Schema>\n```\n\n## See also\n\n- <xref:System.Xml.XmlValidatingReader.ValidationType%2A>\n- [XmlSchemaCollection Schema Compilation](xmlschemacollection-schema-compilation.md)\n","nodes":[{"pos":[4,225],"embed":true,"restype":"x-metadata","content":"title: \"XDR Validation with XmlSchemaCollection\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nms.assetid: 00833027-1428-4586-83c1-42f5de3323d1\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"XDR Validation with XmlSchemaCollection","nodes":[{"pos":[0,39],"content":"XDR Validation with XmlSchemaCollection","nodes":[{"content":"XDR Validation with XmlSchemaCollection","pos":[0,39]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[232,271],"content":"XDR Validation with XmlSchemaCollection","linkify":"XDR Validation with XmlSchemaCollection","nodes":[{"content":"XDR Validation with XmlSchemaCollection","pos":[0,39]}]},{"content":"If the XML-Data Reduced (XDR) schema you are validating against is stored in the <bpt id=\"p1\">**</bpt>XmlSchemaCollection<ept id=\"p1\">**</ept>, it is associated with the namespace URI specified when the schema was added to the collection.","pos":[273,473],"source":"If the XML-Data Reduced (XDR) schema you are validating against is stored in the **XmlSchemaCollection**, it is associated with the namespace URI specified when the schema was added to the collection."},{"content":"<bpt id=\"p1\">**</bpt>XmlValidatingReader<ept id=\"p1\">**</ept> maps the namespace URI in the XML document to the schema that corresponds to that URI in the collection.","pos":[474,602],"source":"**XmlValidatingReader** maps the namespace URI in the XML document to the schema that corresponds to that URI in the collection."},{"pos":[606,926],"content":"[!IMPORTANT]\nThe <xref:System.Xml.Schema.XmlSchemaCollection> class is now obsolete and has been replaced with the <xref:System.Xml.Schema.XmlSchemaSet> class. For more information about the <xref:System.Xml.Schema.XmlSchemaSet> class see, [XmlSchemaSet for Schema Compilation](xmlschemaset-for-schema-compilation.md).","leadings":["","> "],"nodes":[{"content":"The <xref:System.Xml.Schema.XmlSchemaCollection> class is now obsolete and has been replaced with the <xref:System.Xml.Schema.XmlSchemaSet> class. For more information about the <xref:System.Xml.Schema.XmlSchemaSet> class see, [XmlSchemaSet for Schema Compilation](xmlschemaset-for-schema-compilation.md).","pos":[13,318],"nodes":[{"content":"The <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaCollection&gt;</ph> class is now obsolete and has been replaced with the <ph id=\"ph2\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> class.","pos":[0,146],"source":"The <xref:System.Xml.Schema.XmlSchemaCollection> class is now obsolete and has been replaced with the <xref:System.Xml.Schema.XmlSchemaSet> class."},{"content":"For more information about the <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> class see, <bpt id=\"p1\">[</bpt>XmlSchemaSet for Schema Compilation<ept id=\"p1\">](xmlschemaset-for-schema-compilation.md)</ept>.","pos":[147,305],"source":" For more information about the <xref:System.Xml.Schema.XmlSchemaSet> class see, [XmlSchemaSet for Schema Compilation](xmlschemaset-for-schema-compilation.md)."}]}]},{"pos":[928,1128],"content":"For example, if the root element of the XML document is <ph id=\"ph1\">`&lt;bookstore xmlns=\"urn:newbooks-schema\"&gt;`</ph>, when the schema is added to the <bpt id=\"p1\">**</bpt>XmlSchemaCollection<ept id=\"p1\">**</ept> it references the same namespace, as follows:","source":"For example, if the root element of the XML document is `<bookstore xmlns=\"urn:newbooks-schema\">`, when the schema is added to the **XmlSchemaCollection** it references the same namespace, as follows:"},{"pos":[1186,1350],"content":"The following code example creates an <bpt id=\"p1\">**</bpt>XmlValidatingReader<ept id=\"p1\">**</ept> that takes an <bpt id=\"p2\">**</bpt>XmlTextReader<ept id=\"p2\">**</ept> and adds an XDR schema, HeadCount.xdr, to the <bpt id=\"p3\">**</bpt>XmlSchemaCollection<ept id=\"p3\">**</ept>.","source":"The following code example creates an **XmlValidatingReader** that takes an **XmlTextReader** and adds an XDR schema, HeadCount.xdr, to the **XmlSchemaCollection**."},{"pos":[4433,4521],"content":"The following outlines the contents of the input file, <bpt id=\"p1\">*</bpt>HeadCount.xml<ept id=\"p1\">*</ept>, to be validated:","source":"The following outlines the contents of the input file, *HeadCount.xml*, to be validated:"},{"pos":[4698,4799],"content":"The following outlines the contents of the XDR schema file, <bpt id=\"p1\">*</bpt>HeadCount.xdr<ept id=\"p1\">*</ept>, to be validated against:","source":"The following outlines the contents of the XDR schema file, *HeadCount.xdr*, to be validated against:"},{"pos":[5148,5156],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5218,5301],"content":"<bpt id=\"p1\">[</bpt>XmlSchemaCollection Schema Compilation<ept id=\"p1\">](xmlschemacollection-schema-compilation.md)</ept>","source":"[XmlSchemaCollection Schema Compilation](xmlschemacollection-schema-compilation.md)"}]}