{"content":"---\ntitle: \"Walkthrough: Querying Across Relationships (C#)\"\nms.date: \"03/30/2017\"\nms.assetid: 552abeb1-18f2-4e93-a9c6-ef7b2db30c32\n---\n# Walkthrough: Querying Across Relationships (C#)\nThis walkthrough demonstrates the use of [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] *associations* to represent foreign-key relationships in the database.  \n  \n [!INCLUDE[note_settings_general](../../../../../../includes/note-settings-general-md.md)]  \n  \n This walkthrough was written by using Visual C# Development Settings.  \n  \n## Prerequisites  \n You must have completed [Walkthrough: Simple Object Model and Query (C#)](../../../../../../docs/framework/data/adonet/sql/linq/walkthrough-simple-object-model-and-query-csharp.md). This walkthrough builds on that one, including the presence of the northwnd.mdf file in c:\\linqtest5.  \n  \n## Overview  \n This walkthrough consists of three main tasks:  \n  \n-   Adding an entity class to represent the Orders table in the sample Northwind database.  \n  \n-   Supplementing annotations to the `Customer` class to enhance the relationship between the `Customer` and `Order` classes.  \n  \n-   Creating and running a query to test obtaining `Order` information by using the `Customer` class.  \n  \n## Mapping Relationships Across Tables  \n After the `Customer` class definition, create the `Order` entity class definition that includes the following code, which indicates that `Order.Customer` relates as a foreign key to `Customer.CustomerID`.  \n  \n#### To add the Order entity class  \n  \n-   Type or paste the following code after the `Customer` class:  \n  \n     [!code-csharp[DLinqWalk2CS#1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqWalk2CS/cs/Program.cs#1)]  \n  \n## Annotating the Customer Class  \n In this step, you annotate the `Customer` class to indicate its relationship to the `Order` class. (This addition is not strictly necessary, because defining the relationship in either direction is sufficient to create the link. But adding this annotation does enable you to easily navigate objects in either direction.)  \n  \n#### To annotate the Customer class  \n  \n-   Type or paste the following code into the `Customer` class:  \n  \n     [!code-csharp[DLinqWalk2CS#2](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqWalk2CS/cs/Program.cs#2)]  \n  \n## Creating and Running a Query Across the Customer-Order Relationship  \n You can now access `Order` objects directly from the `Customer` objects, or in the opposite order. You do not need an explicit *join* between customers and orders.  \n  \n#### To access Order objects by using Customer objects  \n  \n1.  Modify the `Main` method by typing or pasting the following code into the method:  \n  \n     [!code-csharp[DLinqWalk2CS#3](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqWalk2CS/cs/Program.cs#3)]  \n  \n2.  Press F5 to debug your application.  \n  \n    > [!NOTE]\n    >  You can eliminate the SQL code in the Console window by commenting out `db.Log = Console.Out;`.  \n  \n3.  Press Enter in the Console window to stop debugging.  \n  \n## Creating a Strongly Typed View of Your Database  \n It is much easier to start with a strongly typed view of your database. By strongly typing the <xref:System.Data.Linq.DataContext> object, you do not need calls to <xref:System.Data.Linq.DataContext.GetTable%2A>. You can use strongly typed tables in all your queries when you use the strongly typed <xref:System.Data.Linq.DataContext> object.  \n  \n In the following steps, you will create `Customers` as a strongly typed table that maps to the Customers table in the database.  \n  \n#### To strongly type the DataContext object  \n  \n1.  Add the following code above the `Customer` class declaration.  \n  \n     [!code-csharp[DLinqWalk2CS#4](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqWalk2CS/cs/Program.cs#4)]  \n  \n2.  Modify the `Main` method to use the strongly typed <xref:System.Data.Linq.DataContext> as follows:  \n  \n     [!code-csharp[DLinqWalk2CS#5](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqWalk2CS/cs/Program.cs#5)]  \n  \n3.  Press F5 to debug your application.  \n  \n     The Console window output is:  \n  \n     `ID=WHITC`  \n  \n4.  Press Enter in the console window to stop debugging.  \n  \n## Next Steps  \n The next walkthrough ([Walkthrough: Manipulating Data (C#)](../../../../../../docs/framework/data/adonet/sql/linq/walkthrough-manipulating-data-csharp.md)) demonstrates how to manipulate data. That walkthrough does not require that you save the two walkthroughs in this series that you have already completed.  \n  \n## See also\n\n- [Learning by Walkthroughs](../../../../../../docs/framework/data/adonet/sql/linq/learning-by-walkthroughs.md)\n","nodes":[{"pos":[4,131],"embed":true,"restype":"x-metadata","content":"title: \"Walkthrough: Querying Across Relationships (C#)\"\nms.date: \"03/30/2017\"\nms.assetid: 552abeb1-18f2-4e93-a9c6-ef7b2db30c32","nodes":[{"content":"Walkthrough: Querying Across Relationships (C#)","nodes":[{"pos":[0,47],"content":"Walkthrough: Querying Across Relationships (C#)","nodes":[{"content":"Walkthrough: Querying Across Relationships (C#)","pos":[0,47]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[138,185],"content":"Walkthrough: Querying Across Relationships (C#)","linkify":"Walkthrough: Querying Across Relationships (C#)","nodes":[{"content":"Walkthrough: Querying Across Relationships (C#)","pos":[0,47]}]},{"pos":[186,365],"content":"This walkthrough demonstrates the use of <ph id=\"ph1\">[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]</ph> <bpt id=\"p1\">*</bpt>associations<ept id=\"p1\">*</ept> to represent foreign-key relationships in the database.","source":"This walkthrough demonstrates the use of [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] *associations* to represent foreign-key relationships in the database."},{"content":"This walkthrough was written by using Visual C# Development Settings.","pos":[468,537]},{"pos":[546,559],"content":"Prerequisites","linkify":"Prerequisites","nodes":[{"content":"Prerequisites","pos":[0,13]}]},{"content":"You must have completed <bpt id=\"p1\">[</bpt>Walkthrough: Simple Object Model and Query (C#)<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/walkthrough-simple-object-model-and-query-csharp.md)</ept>.","pos":[563,744],"source":"You must have completed [Walkthrough: Simple Object Model and Query (C#)](../../../../../../docs/framework/data/adonet/sql/linq/walkthrough-simple-object-model-and-query-csharp.md)."},{"content":"This walkthrough builds on that one, including the presence of the northwnd.mdf file in c:\\linqtest5.","pos":[745,846]},{"pos":[855,863],"content":"Overview","linkify":"Overview","nodes":[{"content":"Overview","pos":[0,8]}]},{"content":"This walkthrough consists of three main tasks:","pos":[867,913]},{"content":"Adding an entity class to represent the Orders table in the sample Northwind database.","pos":[923,1009]},{"pos":[1019,1140],"content":"Supplementing annotations to the <ph id=\"ph1\">`Customer`</ph> class to enhance the relationship between the <ph id=\"ph2\">`Customer`</ph> and <ph id=\"ph3\">`Order`</ph> classes.","source":"Supplementing annotations to the `Customer` class to enhance the relationship between the `Customer` and `Order` classes."},{"pos":[1150,1247],"content":"Creating and running a query to test obtaining <ph id=\"ph1\">`Order`</ph> information by using the <ph id=\"ph2\">`Customer`</ph> class.","source":"Creating and running a query to test obtaining `Order` information by using the `Customer` class."},{"pos":[1256,1291],"content":"Mapping Relationships Across Tables","linkify":"Mapping Relationships Across Tables","nodes":[{"content":"Mapping Relationships Across Tables","pos":[0,35]}]},{"pos":[1295,1499],"content":"After the <ph id=\"ph1\">`Customer`</ph> class definition, create the <ph id=\"ph2\">`Order`</ph> entity class definition that includes the following code, which indicates that <ph id=\"ph3\">`Order.Customer`</ph> relates as a foreign key to <ph id=\"ph4\">`Customer.CustomerID`</ph>.","source":"After the `Customer` class definition, create the `Order` entity class definition that includes the following code, which indicates that `Order.Customer` relates as a foreign key to `Customer.CustomerID`."},{"pos":[1510,1539],"content":"To add the Order entity class","linkify":"To add the Order entity class","nodes":[{"content":"To add the Order entity class","pos":[0,29]}]},{"pos":[1549,1609],"content":"Type or paste the following code after the <ph id=\"ph1\">`Customer`</ph> class:","source":"Type or paste the following code after the `Customer` class:"},{"pos":[1748,1777],"content":"Annotating the Customer Class","linkify":"Annotating the Customer Class","nodes":[{"content":"Annotating the Customer Class","pos":[0,29]}]},{"content":"In this step, you annotate the <ph id=\"ph1\">`Customer`</ph> class to indicate its relationship to the <ph id=\"ph2\">`Order`</ph> class.","pos":[1781,1879],"source":"In this step, you annotate the `Customer` class to indicate its relationship to the `Order` class."},{"content":"(This addition is not strictly necessary, because defining the relationship in either direction is sufficient to create the link.","pos":[1880,2009]},{"content":"But adding this annotation does enable you to easily navigate objects in either direction.)","pos":[2010,2101]},{"pos":[2112,2142],"content":"To annotate the Customer class","linkify":"To annotate the Customer class","nodes":[{"content":"To annotate the Customer class","pos":[0,30]}]},{"pos":[2152,2211],"content":"Type or paste the following code into the <ph id=\"ph1\">`Customer`</ph> class:","source":"Type or paste the following code into the `Customer` class:"},{"pos":[2350,2417],"content":"Creating and Running a Query Across the Customer-Order Relationship","linkify":"Creating and Running a Query Across the Customer-Order Relationship","nodes":[{"content":"Creating and Running a Query Across the Customer-Order Relationship","pos":[0,67]}]},{"content":"You can now access <ph id=\"ph1\">`Order`</ph> objects directly from the <ph id=\"ph2\">`Customer`</ph> objects, or in the opposite order.","pos":[2421,2519],"source":"You can now access `Order` objects directly from the `Customer` objects, or in the opposite order."},{"content":"You do not need an explicit <bpt id=\"p1\">*</bpt>join<ept id=\"p1\">*</ept> between customers and orders.","pos":[2520,2584],"source":" You do not need an explicit *join* between customers and orders."},{"pos":[2595,2644],"content":"To access Order objects by using Customer objects","linkify":"To access Order objects by using Customer objects","nodes":[{"content":"To access Order objects by using Customer objects","pos":[0,49]}]},{"pos":[2654,2735],"content":"Modify the <ph id=\"ph1\">`Main`</ph> method by typing or pasting the following code into the method:","source":"Modify the `Main` method by typing or pasting the following code into the method:"},{"content":"Press F5 to debug your application.","pos":[2875,2910]},{"pos":[2922,3032],"content":"[!NOTE]\nYou can eliminate the SQL code in the Console window by commenting out `db.Log = Console.Out;`.","leadings":["","    >  "],"nodes":[{"content":"You can eliminate the SQL code in the Console window by commenting out <ph id=\"ph1\">`db.Log = Console.Out;`</ph>.","pos":[8,103],"source":"You can eliminate the SQL code in the Console window by commenting out `db.Log = Console.Out;`."}]},{"content":"Press Enter in the Console window to stop debugging.","pos":[3042,3094]},{"pos":[3103,3150],"content":"Creating a Strongly Typed View of Your Database","linkify":"Creating a Strongly Typed View of Your Database","nodes":[{"content":"Creating a Strongly Typed View of Your Database","pos":[0,47]}]},{"content":"It is much easier to start with a strongly typed view of your database.","pos":[3154,3225]},{"content":"By strongly typing the <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> object, you do not need calls to <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext.GetTable%2A&gt;</ph>.","pos":[3226,3366],"source":" By strongly typing the <xref:System.Data.Linq.DataContext> object, you do not need calls to <xref:System.Data.Linq.DataContext.GetTable%2A>."},{"content":"You can use strongly typed tables in all your queries when you use the strongly typed <ph id=\"ph1\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> object.","pos":[3367,3496],"source":" You can use strongly typed tables in all your queries when you use the strongly typed <xref:System.Data.Linq.DataContext> object."},{"pos":[3503,3630],"content":"In the following steps, you will create <ph id=\"ph1\">`Customers`</ph> as a strongly typed table that maps to the Customers table in the database.","source":"In the following steps, you will create `Customers` as a strongly typed table that maps to the Customers table in the database."},{"pos":[3641,3680],"content":"To strongly type the DataContext object","linkify":"To strongly type the DataContext object","nodes":[{"content":"To strongly type the DataContext object","pos":[0,39]}]},{"pos":[3690,3752],"content":"Add the following code above the <ph id=\"ph1\">`Customer`</ph> class declaration.","source":"Add the following code above the `Customer` class declaration."},{"pos":[3892,3990],"content":"Modify the <ph id=\"ph1\">`Main`</ph> method to use the strongly typed <ph id=\"ph2\">&lt;xref:System.Data.Linq.DataContext&gt;</ph> as follows:","source":"Modify the `Main` method to use the strongly typed <xref:System.Data.Linq.DataContext> as follows:"},{"content":"Press F5 to debug your application.","pos":[4130,4165]},{"content":"The Console window output is:","pos":[4176,4205]},{"content":"Press Enter in the console window to stop debugging.","pos":[4236,4288]},{"pos":[4297,4307],"content":"Next Steps","linkify":"Next Steps","nodes":[{"content":"Next Steps","pos":[0,10]}]},{"content":"The next walkthrough (<bpt id=\"p1\">[</bpt>Walkthrough: Manipulating Data (C#)<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/walkthrough-manipulating-data-csharp.md)</ept>) demonstrates how to manipulate data.","pos":[4311,4503],"source":"The next walkthrough ([Walkthrough: Manipulating Data (C#)](../../../../../../docs/framework/data/adonet/sql/linq/walkthrough-manipulating-data-csharp.md)) demonstrates how to manipulate data."},{"content":"That walkthrough does not require that you save the two walkthroughs in this series that you have already completed.","pos":[4504,4620]},{"pos":[4629,4637],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4641,4750],"content":"<bpt id=\"p1\">[</bpt>Learning by Walkthroughs<ept id=\"p1\">](../../../../../../docs/framework/data/adonet/sql/linq/learning-by-walkthroughs.md)</ept>","source":"[Learning by Walkthroughs](../../../../../../docs/framework/data/adonet/sql/linq/learning-by-walkthroughs.md)"}]}