{"content":"---\ntitle: \"External Activity Validation | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 49619f59-9819-484a-bcd8-5596308e8551\ncaps.latest.revision: 6\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# External Activity Validation\nThis sample shows how to add validation logic to a built-in activity that you are not the author of. The validation logic consists of enforcing that all <xref:System.Activities.Statements.If> activities present in the workflow either have their <xref:System.Activities.Statements.If.Then%2A> property set or their <xref:System.Activities.Statements.If.Else%2A> property set. Also, the validation logic includes checking that all <xref:System.Activities.Statements.Pick> activities present in the workflow have more than one branch, and if that is not the case, a warning is generated.  \n  \n## Sample details  \n This sample creates a workflow with an instance of each activity to validate: the <xref:System.Activities.Statements.If> activity and the <xref:System.Activities.Statements.Pick> activity. A <xref:System.Activities.Validation.Constraint> is created for each validation behavior. The constraints created in this sample are `ConstraintError_IfShouldHaveThenOrElse` and `ConstraintWarning_PickHasOneBranch`. Next, these constraints are added to the `AdditionalConstraints` collection of a <xref:System.Activities.Validation.ValidationSettings> instance. Finally, the `static`<xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method of <xref:System.Activities.Validation.ActivityValidationServices> is called to validate the activities in the workflow and the validation results are printed out to the console.  \n  \n> [!NOTE]\n>  You can add policy constraints to any activity. For example, you can add a policy constraint to a <xref:System.Activities.Statements.Sequence> or <xref:System.Activities.Statements.Parallel> activity.  \n  \n#### To use this sample  \n  \n1.  Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the ExternalActivityValidation.sln file.  \n  \n2.  To build the solution, press CTRL+SHIFT+B.  \n  \n3.  To run the solution, press Ctrl+F5.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Validation\\ExternalActivityValidation`  \n  \n## See Also","nodes":[{"pos":[12,57],"content":"External Activity Validation | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"External Activity Validation | Microsoft Docs","pos":[0,45]}]},{"pos":[322,350],"content":"External Activity Validation","linkify":"External Activity Validation","nodes":[{"content":"External Activity Validation","pos":[0,28]}]},{"content":"This sample shows how to add validation logic to a built-in activity that you are not the author of.","pos":[351,451]},{"content":"The validation logic consists of enforcing that all <ph id=\"ph1\">&lt;xref:System.Activities.Statements.If&gt;</ph> activities present in the workflow either have their <ph id=\"ph2\">&lt;xref:System.Activities.Statements.If.Then%2A&gt;</ph> property set or their <ph id=\"ph3\">&lt;xref:System.Activities.Statements.If.Else%2A&gt;</ph> property set.","pos":[452,725],"source":" The validation logic consists of enforcing that all <xref:System.Activities.Statements.If> activities present in the workflow either have their <xref:System.Activities.Statements.If.Then%2A> property set or their <xref:System.Activities.Statements.If.Else%2A> property set."},{"content":"Also, the validation logic includes checking that all <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activities present in the workflow have more than one branch, and if that is not the case, a warning is generated.","pos":[726,935],"source":" Also, the validation logic includes checking that all <xref:System.Activities.Statements.Pick> activities present in the workflow have more than one branch, and if that is not the case, a warning is generated."},{"pos":[944,958],"content":"Sample details","linkify":"Sample details","nodes":[{"content":"Sample details","pos":[0,14]}]},{"content":"This sample creates a workflow with an instance of each activity to validate: the <ph id=\"ph1\">&lt;xref:System.Activities.Statements.If&gt;</ph> activity and the <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Pick&gt;</ph> activity.","pos":[962,1150],"source":"This sample creates a workflow with an instance of each activity to validate: the <xref:System.Activities.Statements.If> activity and the <xref:System.Activities.Statements.Pick> activity."},{"content":"A <ph id=\"ph1\">&lt;xref:System.Activities.Validation.Constraint&gt;</ph> is created for each validation behavior.","pos":[1151,1240],"source":" A <xref:System.Activities.Validation.Constraint> is created for each validation behavior."},{"content":"The constraints created in this sample are <ph id=\"ph1\">`ConstraintError_IfShouldHaveThenOrElse`</ph> and <ph id=\"ph2\">`ConstraintWarning_PickHasOneBranch`</ph>.","pos":[1241,1366],"source":" The constraints created in this sample are `ConstraintError_IfShouldHaveThenOrElse` and `ConstraintWarning_PickHasOneBranch`."},{"content":"Next, these constraints are added to the <ph id=\"ph1\">`AdditionalConstraints`</ph> collection of a <ph id=\"ph2\">&lt;xref:System.Activities.Validation.ValidationSettings&gt;</ph> instance.","pos":[1367,1512],"source":" Next, these constraints are added to the `AdditionalConstraints` collection of a <xref:System.Activities.Validation.ValidationSettings> instance."},{"content":"Finally, the <ph id=\"ph1\">`static`</ph><ph id=\"ph2\">&lt;xref:System.Activities.Validation.ActivityValidationServices.Validate%2A&gt;</ph> method of <ph id=\"ph3\">&lt;xref:System.Activities.Validation.ActivityValidationServices&gt;</ph> is called to validate the activities in the workflow and the validation results are printed out to the console.","pos":[1513,1793],"source":" Finally, the `static`<xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method of <xref:System.Activities.Validation.ActivityValidationServices> is called to validate the activities in the workflow and the validation results are printed out to the console."},{"pos":[1801,2012],"content":"[!NOTE]\n You can add policy constraints to any activity. For example, you can add a policy constraint to a <xref:System.Activities.Statements.Sequence> or <xref:System.Activities.Statements.Parallel> activity.","leadings":["","> "],"nodes":[{"content":" You can add policy constraints to any activity. For example, you can add a policy constraint to a <xref:System.Activities.Statements.Sequence> or <xref:System.Activities.Statements.Parallel> activity.","pos":[8,209],"nodes":[{"content":"You can add policy constraints to any activity.","pos":[1,48]},{"content":"For example, you can add a policy constraint to a <ph id=\"ph1\">&lt;xref:System.Activities.Statements.Sequence&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Activities.Statements.Parallel&gt;</ph> activity.","pos":[49,201],"source":" For example, you can add a policy constraint to a <xref:System.Activities.Statements.Sequence> or <xref:System.Activities.Statements.Parallel> activity."}]}]},{"pos":[2023,2041],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[2051,2157],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>, open the ExternalActivityValidation.sln file.","source":"Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the ExternalActivityValidation.sln file."},{"content":"To build the solution, press CTRL+SHIFT+B.","pos":[2167,2209]},{"content":"To run the solution, press Ctrl+F5.","pos":[2219,2254]},{"pos":[2262,2394],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[2448,2774],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[2775,2825]},{"pos":[2924,2932],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}