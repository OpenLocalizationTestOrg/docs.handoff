{"content":"---\ntitle: \"&lt;security&gt; of &lt;customBinding&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nms.assetid: 243a5148-bbd1-447f-a8a5-6e7792c0a3f1\ncaps.latest.revision: 24\nauthor: \"BrucePerlerMS\"\nms.author: \"bruceper\"\nmanager: \"mbaldwin\"\n---\n# &lt;security&gt; of &lt;customBinding&gt;\nSpecifies the security options for a custom binding.  \n  \n \\<system.serviceModel>  \n\\<bindings>  \n\\<customBinding>  \n\\<binding>  \n\\<security>  \n  \n## Syntax  \n  \n```  \n  \n<security   \n   allowSerializedSigningTokenOnReply=\"Boolean\"  \n   authenticationMode=\"AuthenticationMode\"  \n      defaultAlgorithmSuite=\"SecurityAlgorithmSuite\"  \n   includeTimestamp=\"Boolean\"  \n      requireDerivedKeys=\"Boolean\"  \n   keyEntropyMode=\"ClientEntropy/ServerEntropy/CombinedEntropy\"   \nmessageProtectionOrder=\"SignBeforeEncrypt/SignBeforeEncryptAndEncryptSignature/EncryptBeforeSign\"  \n      messageSecurityVersion=\"WSSecurityJan2004/WSSecurityXXX2005\"  \n   requireDerivedKeys=\"Boolean\"  \n   requireSecurityContextCancellation=\"Boolean\"  \n   requireSignatureConfirmation=\"Boolean\"  \n      securityHeaderLayout=  \n              \"Strict/Lax/LaxTimestampFirst/LaxTimestampLast\"  \n   includeTimestamp=\"Boolean\">  \n   <issuedTokenParameters />  \n   <localClientSettings />  \n   <localServiceSettings />  \n   <secureConversationBootstrap />  \n</security>  \n```  \n  \n## Attributes and Elements  \n The following sections describe attributes, child elements, and parent elements  \n  \n### Attributes  \n  \n|Attribute|Description|  \n|---------------|-----------------|  \n|allowSerializedSigningTokenOnReply|Optional. A Boolean value that specifies if a serialized token can be used on reply. The default value is `false`. When using a dual binding, the setting defaults to `true`and any setting made will be ignored.|  \n|authenticationMode|Optional. Specifies the authentication mode used between the initiator and the responder. See below for all values.<br /><br /> The default is `sspiNegotiated`.|  \n|defaultAlgorithmSuite|Optional. Sets the message encryption and key-wrap algorithms. The algorithms and the key sizes are determined by the <xref:System.ServiceModel.Security.SecurityAlgorithmSuite> class. These algorithms map to those specified in the Security Policy Language (WS-SecurityPolicy) specification.<br /><br /> Possible values are shown below. The default value is `Basic256`.<br /><br /> This attribute is used when working with a different platform that opts for a set of algorithms different than the default. You should be aware of the strengths and weaknesses of the relevant algorithms when making modifications to this setting. This attribute is of type <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.|  \n|includeTimestamp|A Boolean value that specifies whether time stamps are included in each message. The default is `true`.|  \n|keyEntropyMode|Specifies the way that keys for securing messages are computed. Keys can be based on the client key material only, on the service key material only or a combination of both. Valid values are<br /><br /> -   `ClientEntropy`: The session key is based on key data provided by the client.<br />-   `ServerEntropy`: The session key is based on key data provided by the server.<br />-   `CombinedEntropy`: The session key is based on the key data provided by the client and service.<br /><br /> The default is `CombinedEntropy`.<br /><br /> This attribute is of type <xref:System.ServiceModel.Security.SecurityKeyEntropyMode>.|  \n|messageProtectionOrder|Sets the order in which message level security algorithms are applied to the message. Valid values include the following:<br /><br /> -   `SignBeforeEncrypt`: Sign first, then encrypt.<br />-   `SignBeforeEncryptAndEncryptSignature`: Sign first, encrypt, then encrypt the signature.<br />-   `EncryptBeforeSign`: Encrypt first, then sign.<br /><br /> The default value depends upon the version of WS-Security being used. The default value is `SignBeforeEncryptAndEncryptSignature` when using WS-Security 1.1. The default value is `SignBeforeEncrypt` when using WS-Security 1.0.<br /><br /> This attribute is of type <xref:System.ServiceModel.Security.MessageProtectionOrder>.|  \n|messageSecurityVersion|Optional. Sets the version of WS-Security that is used. Valid values include the following:<br /><br /> -   WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11<br />-   WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10<br />-   WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10<br /><br /> The default is WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11 and can be expressed in the XML as simply `Default`. This attribute is of type <xref:System.ServiceModel.MessageSecurityVersion>.|  \n|requireDerivedKeys|A Boolean value that specifies if keys can be derived from the original proof keys. The default is `true`.|  \n|requireSecurityContextCancellation|Optional. A Boolean value that specifies if security context should be cancelled and terminated when it is no longer needed. The default is `true`.|  \n|requireSignatureConfirmation|Optional. A Boolean value that specifies whether WS-Security signature confirmation is enabled. When set to `true`, message signatures are confirmed by the responder.  When the custom binding is configured for mutual certificates or it is configured to use issued tokens (WSS 1.1 bindings) this attribute defaults to `true`. Otherwise, the default is `false`.<br /><br /> Signature confirmation is used to confirm that the service is responding in full awareness of a request.|  \n|securityHeaderLayout|Optional. Specifies the ordering of the elements in security header. Valid values are<br /><br /> -   `Strict`: Items are added to the security header according to the general principle of \"declare before use\".<br />-   `Lax`: Items are added to the security header in any order that confirms to WSS: SOAP Message security.<br />-   `LaxWithTimestampFirst`: Items are added to the security header in any order that confirms to WSS: SOAP Message security except that the first element in the security header must be a wsse:Timestamp element.<br />-   `LaxWithTimestampLast`: Items are added to the security header in any order that confirms to WSS: SOAP Message security except that the last element in the security header must be a wsse:Timestamp element.<br /><br /> The default is `Strict`.<br /><br /> This element is of type <xref:System.ServiceModel.Channels.SecurityHeaderLayout>.|  \n  \n## authenticationMode Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|String|`AnonymousForCertificate`<br /><br /> `AnonymousForSslNegotiated`<br /><br /> `CertificateOverTransport`<br /><br /> `IssuedToken`<br /><br /> `IssuedTokenForCertificate`<br /><br /> `IssuedTokenForSslNegotiated`<br /><br /> `IssuedTokenOverTransport`<br /><br /> `Kerberos`<br /><br /> `KerberosOverTransport`<br /><br /> `MutualCertificate`<br /><br /> `MutualCertificateDuplex`<br /><br /> `MutualSslNegotiated`<br /><br /> `SecureConversation`<br /><br /> `SspiNegotiated`<br /><br /> `UserNameForCertificate`<br /><br /> `UserNameForSslNegotiated`<br /><br /> `UserNameOverTransport`<br /><br /> `SspiNegotiatedOverTransport`|  \n  \n## defaultAlgorithm Attribute  \n  \n|Value|Description|  \n|-----------|-----------------|  \n|Basic128|Use Aes128 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.|  \n|Basic192|Use Aes192 encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.|  \n|Basic256|Use Aes256 encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.|  \n|Basic256Rsa15|Use Aes256 for message encryption, Sha1 for message digest and Rsa15 for key wrap.|  \n|Basic192Rsa15|Use Aes192 for message encryption, Sha1 for message digest and Rsa15 for key wrap.|  \n|TripleDes|Use TripleDes encryption,  Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.|  \n|Basic128Rsa15|Use Aes128 for message encryption, Sha1 for message digest and Rsa15 for key wrap.|  \n|TripleDesRsa15|Use TripleDes encryption, Sha1 for message digest and Rsa15 for key wrap.|  \n|Basic128Sha256|Use Aes256 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.|  \n|Basic192Sha256|Use Aes192 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.|  \n|Basic256Sha256|Use Aes256 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.|  \n|TripleDesSha256|Use TripleDes for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.|  \n|Basic128Sha256Rsa15|Use Aes128 for message encryption, Sha256 for message digest and Rsa15 for key wrap.|  \n|Basic192Sha256Rsa15|Use Aes192 for message encryption, Sha256 for message digest and Rsa15 for key wrap.|  \n|Basic256Sha256Rsa15|Use Aes256 for message encryption, Sha256 for message digest and Rsa15 for key wrap.|  \n|TripleDesSha256Rsa15|Use TripleDes for message encryption, Sha256 for message digest and Rsa15 for key wrap.|  \n  \n### Child Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<issuedTokenParameters>](../../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenparameters.md)|Specifies a current issued token. This element is of type <xref:System.ServiceModel.Configuration.IssuedTokenParametersElement>.|  \n|[\\<localClientSettings>](../../../../../docs/framework/configure-apps/file-schema/wcf/localclientsettings-element.md)|Specifies the security settings of a local client for this binding. This element is of type <xref:System.ServiceModel.Configuration.LocalClientSecuritySettingsElement>.|  \n|[\\<localServiceSettings>](../../../../../docs/framework/configure-apps/file-schema/wcf/localservicesettings-element.md)|Specifies the security settings of a local service for this binding. This element is of type <xref:System.ServiceModel.Configuration.LocalServiceSecuritySettingsElement>.|  \n|[\\<secureConversationBootstrap>](../../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)|Specifies the default values used for initiating a secure conversation service.|  \n  \n### Parent Elements  \n  \n|Element|Description|  \n|-------------|-----------------|  \n|[\\<binding>](../../../../../docs/framework/misc/binding.md)|Defines all binding capabilities of the custom binding.|  \n  \n## Remarks  \n [!INCLUDE[crabout](../../../../../includes/crabout-md.md)] using this element, see [SecurityBindingElement Authentication Modes](../../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md) and [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).  \n  \n## Example  \n The following example demonstrates how to configure security using a custom binding. It shows how to use a custom binding to enable message-level security together with a secure transport. This is useful when a secure transport is required to transmit the messages between client and service and simultaneously the messages must be secure on the message level. This configuration is not supported by system-provided bindings.  \n  \n The service configuration defines a custom binding that supports TCP communication protected using TLS/SSL protocol, and Windows message security. The custom binding uses a service certificate to authenticate the service on the transport level and to protect the messages during the transmission between client and service. This is accomplished by the [\\<sslStreamSecurity>](../../../../../docs/framework/configure-apps/file-schema/wcf/sslstreamsecurity.md) binding element. The service's certificate is configured using a service behavior.  \n  \n Additionally, the custom binding uses message security with Windows credential type - this is the default credential type. This is accomplished by the [security](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md) binding element. Both client and service are authenticated using message-level security if Kerberos authentication mechanism is available. If the Kerberos authentication mechanism is not available, NTLM authentication is used. NTLM authenticates the client to the service but does not authenticate service to the client. The [security](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md) binding element is configured to use `SecureConversation` authenticationType, which results in the creation of a security session on both the client and the service. This is required to enable the service's duplex contract to work. For more information on running this example, see [Custom Binding Security](../../../../../docs/framework/wcf/samples/custom-binding-security.md).  \n  \n```  \n<configuration>  \n  <system.serviceModel>  \n    <services>  \n      <service   \n          name=\"Microsoft.ServiceModel.Samples.CalculatorService\"  \n          behaviorConfiguration=\"CalculatorServiceBehavior\">  \n        <host>  \n          <baseAddresses>  \n            <!-- use following base address -->  \n            <add baseAddress=\"net.tcp://localhost:8000/ServiceModelSamples/Service\"/>  \n          </baseAddresses>  \n        </host>  \n        <endpoint address=\"\"  \n                    binding=\"customBinding\"  \n                    bindingConfiguration=\"Binding1\"   \n                    contract=\"Microsoft.ServiceModel.Samples.ICalculatorDuplex\" />  \n        <!-- the mex endpoint is exposed at net.tcp://localhost:8000/ServiceModelSamples/service/mex -->  \n        <endpoint address=\"mex\"  \n                  binding=\"mexTcpBinding\"  \n                  contract=\"IMetadataExchange\" />  \n      </service>  \n    </services>  \n  \n    <bindings>  \n      <!-- configure a custom binding -->  \n      <customBinding>  \n        <binding name=\"Binding1\">  \n          <security authenticationMode=\"SecureConversation\"  \n                     requireSecurityContextCancellation=\"true\">  \n          </security>  \n          <textMessageEncoding messageVersion=\"Soap12WSAddressing10\" writeEncoding=\"utf-8\"/>  \n          <sslStreamSecurity requireClientCertificate=\"false\"/>  \n          <tcpTransport/>  \n        </binding>  \n      </customBinding>  \n    </bindings>  \n  \n    <!--For debugging purposes set the includeExceptionDetailInFaults attribute to true-->  \n    <behaviors>  \n      <serviceBehaviors>  \n        <behavior name=\"CalculatorServiceBehavior\">  \n          <serviceMetadata />  \n          <serviceDebug includeExceptionDetailInFaults=\"False\" />  \n          <serviceCredentials>  \n            <serviceCertificate findValue=\"localhost\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\"/>  \n          </serviceCredentials>  \n        </behavior>  \n      </serviceBehaviors>  \n    </behaviors>  \n  </system.serviceModel>  \n</configuration>  \n```  \n  \n## See Also  \n <xref:System.ServiceModel.Configuration.SecurityElement>   \n <xref:System.ServiceModel.Channels.SecurityBindingElement>   \n <xref:System.ServiceModel.Channels.CustomBinding>   \n [Bindings](../../../../../docs/framework/wcf/bindings.md)   \n [Extending Bindings](../../../../../docs/framework/wcf/extending/extending-bindings.md)   \n [Custom Bindings](../../../../../docs/framework/wcf/extending/custom-bindings.md)   \n [\\<customBinding>](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)   \n [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)   \n [Custom Binding Security](../../../../../docs/framework/wcf/samples/custom-binding-security.md)","nodes":[{"pos":[4,407],"embed":true,"restype":"x-metadata","content":"title: \"&lt;security&gt; of &lt;customBinding&gt; | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\nms.assetid: 243a5148-bbd1-447f-a8a5-6e7792c0a3f1\ncaps.latest.revision: 24\nauthor: \"BrucePerlerMS\"\nms.author: \"bruceper\"\nmanager: \"mbaldwin\"","nodes":[{"content":"&lt;security&gt; of &lt;customBinding&gt; | Microsoft Docs","nodes":[{"pos":[0,58],"content":"&lt;security&gt; of &lt;customBinding&gt; | Microsoft Docs","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>security<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>customBinding<ph id=\"ph4\">&amp;gt;</ph> | Microsoft Docs","pos":[0,58],"source":"&lt;security&gt; of &lt;customBinding&gt; | Microsoft Docs"}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[414,455],"content":"&lt;security&gt; of &lt;customBinding&gt;","linkify":"&lt;security&gt; of &lt;customBinding&gt;","nodes":[{"content":"<ph id=\"ph1\">&amp;lt;</ph>security<ph id=\"ph2\">&amp;gt;</ph> of <ph id=\"ph3\">&amp;lt;</ph>customBinding<ph id=\"ph4\">&amp;gt;</ph>","pos":[0,41],"source":"&lt;security&gt; of &lt;customBinding&gt;"}]},{"content":"Specifies the security options for a custom binding.","pos":[456,508]},{"content":"<ph id=\"ph1\">\\&lt;</ph>system.serviceModel&gt;","pos":[515,537],"source":"\\<system.serviceModel>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>bindings&gt;","pos":[540,551],"source":"\\<bindings>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>customBinding&gt;","pos":[554,570],"source":"\\<customBinding>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>binding&gt;","pos":[573,583],"source":"\\<binding>"},{"content":"<ph id=\"ph1\">\\&lt;</ph>security&gt;","pos":[586,597],"source":"\\<security>"},{"pos":[606,612],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1503,1526],"content":"Attributes and Elements","linkify":"Attributes and Elements","nodes":[{"content":"Attributes and Elements","pos":[0,23]}]},{"content":"The following sections describe attributes, child elements, and parent elements","pos":[1530,1609]},{"pos":[1619,1629],"content":"Attributes","linkify":"Attributes","nodes":[{"content":"Attributes","pos":[0,10]}]},{"content":"Attribute","pos":[1636,1645]},{"content":"Description","pos":[1646,1657]},{"content":"allowSerializedSigningTokenOnReply","pos":[1700,1734]},{"content":"Optional.","pos":[1735,1744]},{"content":"A Boolean value that specifies if a serialized token can be used on reply.","pos":[1745,1819]},{"content":"The default value is <ph id=\"ph1\">`false`</ph>.","pos":[1820,1849],"source":" The default value is `false`."},{"content":"When using a dual binding, the setting defaults to <ph id=\"ph1\">`true`</ph>and any setting made will be ignored.","pos":[1850,1944],"source":" When using a dual binding, the setting defaults to `true`and any setting made will be ignored."},{"content":"authenticationMode","pos":[1949,1967]},{"content":"Optional.","pos":[1968,1977]},{"content":"Specifies the authentication mode used between the initiator and the responder.","pos":[1978,2057]},{"content":"See below for all values.","pos":[2058,2083]},{"content":"The default is <ph id=\"ph1\">`sspiNegotiated`</ph>.","pos":[2096,2128],"source":"The default is `sspiNegotiated`."},{"content":"defaultAlgorithmSuite","pos":[2133,2154]},{"content":"Optional.","pos":[2155,2164]},{"content":"Sets the message encryption and key-wrap algorithms.","pos":[2165,2217]},{"content":"The algorithms and the key sizes are determined by the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.SecurityAlgorithmSuite&gt;</ph> class.","pos":[2218,2338],"source":" The algorithms and the key sizes are determined by the <xref:System.ServiceModel.Security.SecurityAlgorithmSuite> class."},{"content":"These algorithms map to those specified in the Security Policy Language (WS-SecurityPolicy) specification.","pos":[2339,2445]},{"content":"Possible values are shown below.","pos":[2458,2490]},{"content":"The default value is <ph id=\"ph1\">`Basic256`</ph>.","pos":[2491,2523],"source":" The default value is `Basic256`."},{"content":"This attribute is used when working with a different platform that opts for a set of algorithms different than the default.","pos":[2536,2659]},{"content":"You should be aware of the strengths and weaknesses of the relevant algorithms when making modifications to this setting.","pos":[2660,2781]},{"content":"This attribute is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.SecurityAlgorithmSuite&gt;</ph>.","pos":[2782,2867],"source":" This attribute is of type <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>."},{"content":"includeTimestamp","pos":[2872,2888]},{"content":"A Boolean value that specifies whether time stamps are included in each message.","pos":[2889,2969]},{"content":"The default is <ph id=\"ph1\">`true`</ph>.","pos":[2970,2992],"source":" The default is `true`."},{"content":"keyEntropyMode","pos":[2997,3011]},{"content":"Specifies the way that keys for securing messages are computed.","pos":[3012,3075]},{"content":"Keys can be based on the client key material only, on the service key material only or a combination of both.","pos":[3076,3185]},{"content":"Valid values are","pos":[3186,3202]},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`ClientEntropy`</ph>: The session key is based on key data provided by the client.","pos":[3215,3296],"source":"-   `ClientEntropy`: The session key is based on key data provided by the client."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`ServerEntropy`</ph>: The session key is based on key data provided by the server.","pos":[3302,3383],"source":"-   `ServerEntropy`: The session key is based on key data provided by the server."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`CombinedEntropy`</ph>: The session key is based on the key data provided by the client and service.","pos":[3389,3488],"source":"-   `CombinedEntropy`: The session key is based on the key data provided by the client and service."},{"content":"The default is <ph id=\"ph1\">`CombinedEntropy`</ph>.","pos":[3501,3534],"source":"The default is `CombinedEntropy`."},{"content":"This attribute is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.SecurityKeyEntropyMode&gt;</ph>.","pos":[3547,3632],"source":"This attribute is of type <xref:System.ServiceModel.Security.SecurityKeyEntropyMode>."},{"content":"messageProtectionOrder","pos":[3637,3659]},{"content":"Sets the order in which message level security algorithms are applied to the message.","pos":[3660,3745]},{"content":"Valid values include the following:","pos":[3746,3781]},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`SignBeforeEncrypt`</ph>: Sign first, then encrypt.","pos":[3794,3844],"source":"-   `SignBeforeEncrypt`: Sign first, then encrypt."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`SignBeforeEncryptAndEncryptSignature`</ph>: Sign first, encrypt, then encrypt the signature.","pos":[3850,3942],"source":"-   `SignBeforeEncryptAndEncryptSignature`: Sign first, encrypt, then encrypt the signature."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`EncryptBeforeSign`</ph>: Encrypt first, then sign.","pos":[3948,3998],"source":"-   `EncryptBeforeSign`: Encrypt first, then sign."},{"content":"The default value depends upon the version of WS-Security being used.","pos":[4011,4080]},{"content":"The default value is <ph id=\"ph1\">`SignBeforeEncryptAndEncryptSignature`</ph> when using WS-Security 1.1.","pos":[4081,4168],"source":" The default value is `SignBeforeEncryptAndEncryptSignature` when using WS-Security 1.1."},{"content":"The default value is <ph id=\"ph1\">`SignBeforeEncrypt`</ph> when using WS-Security 1.0.","pos":[4169,4237],"source":" The default value is `SignBeforeEncrypt` when using WS-Security 1.0."},{"content":"This attribute is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.MessageProtectionOrder&gt;</ph>.","pos":[4250,4335],"source":"This attribute is of type <xref:System.ServiceModel.Security.MessageProtectionOrder>."},{"content":"messageSecurityVersion","pos":[4340,4362]},{"content":"Optional.","pos":[4363,4372]},{"content":"Sets the version of WS-Security that is used.","pos":[4373,4418]},{"content":"Valid values include the following:","pos":[4419,4454]},{"content":"-   WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11","pos":[4467,4552]},{"content":"-   WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10","pos":[4558,4665]},{"content":"-   WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10","pos":[4671,4778]},{"content":"The default is WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11 and can be expressed in the XML as simply <ph id=\"ph1\">`Default`</ph>.","pos":[4791,4940],"source":"The default is WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11 and can be expressed in the XML as simply `Default`."},{"content":"This attribute is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageSecurityVersion&gt;</ph>.","pos":[4941,5017],"source":" This attribute is of type <xref:System.ServiceModel.MessageSecurityVersion>."},{"content":"requireDerivedKeys","pos":[5022,5040]},{"content":"A Boolean value that specifies if keys can be derived from the original proof keys.","pos":[5041,5124]},{"content":"The default is <ph id=\"ph1\">`true`</ph>.","pos":[5125,5147],"source":" The default is `true`."},{"content":"requireSecurityContextCancellation","pos":[5152,5186]},{"content":"Optional.","pos":[5187,5196]},{"content":"A Boolean value that specifies if security context should be cancelled and terminated when it is no longer needed.","pos":[5197,5311]},{"content":"The default is <ph id=\"ph1\">`true`</ph>.","pos":[5312,5334],"source":" The default is `true`."},{"content":"requireSignatureConfirmation","pos":[5339,5367]},{"content":"Optional.","pos":[5368,5377]},{"content":"A Boolean value that specifies whether WS-Security signature confirmation is enabled.","pos":[5378,5463]},{"content":"When set to <ph id=\"ph1\">`true`</ph>, message signatures are confirmed by the responder.","pos":[5464,5534],"source":" When set to `true`, message signatures are confirmed by the responder."},{"content":"When the custom binding is configured for mutual certificates or it is configured to use issued tokens (WSS 1.1 bindings) this attribute defaults to <ph id=\"ph1\">`true`</ph>.","pos":[5536,5692],"source":"  When the custom binding is configured for mutual certificates or it is configured to use issued tokens (WSS 1.1 bindings) this attribute defaults to `true`."},{"content":"Otherwise, the default is <ph id=\"ph1\">`false`</ph>.","pos":[5693,5727],"source":" Otherwise, the default is `false`."},{"content":"Signature confirmation is used to confirm that the service is responding in full awareness of a request.","pos":[5740,5844]},{"content":"securityHeaderLayout","pos":[5849,5869]},{"content":"Optional.","pos":[5870,5879]},{"content":"Specifies the ordering of the elements in security header.","pos":[5880,5938]},{"content":"Valid values are","pos":[5939,5955]},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`Strict`</ph>: Items are added to the security header according to the general principle of \"declare before use\".","pos":[5968,6080],"source":"-   `Strict`: Items are added to the security header according to the general principle of \"declare before use\"."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`Lax`</ph>: Items are added to the security header in any order that confirms to WSS: SOAP Message security.","pos":[6086,6193],"source":"-   `Lax`: Items are added to the security header in any order that confirms to WSS: SOAP Message security."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`LaxWithTimestampFirst`</ph>: Items are added to the security header in any order that confirms to WSS: SOAP Message security except that the first element in the security header must be a wsse:Timestamp element.","pos":[6199,6410],"source":"-   `LaxWithTimestampFirst`: Items are added to the security header in any order that confirms to WSS: SOAP Message security except that the first element in the security header must be a wsse:Timestamp element."},{"content":"<ph id=\"ph1\">-   </ph><ph id=\"ph2\">`LaxWithTimestampLast`</ph>: Items are added to the security header in any order that confirms to WSS: SOAP Message security except that the last element in the security header must be a wsse:Timestamp element.","pos":[6416,6625],"source":"-   `LaxWithTimestampLast`: Items are added to the security header in any order that confirms to WSS: SOAP Message security except that the last element in the security header must be a wsse:Timestamp element."},{"content":"The default is <ph id=\"ph1\">`Strict`</ph>.","pos":[6638,6662],"source":"The default is `Strict`."},{"content":"This element is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityHeaderLayout&gt;</ph>.","pos":[6675,6756],"source":"This element is of type <xref:System.ServiceModel.Channels.SecurityHeaderLayout>."},{"pos":[6766,6794],"content":"authenticationMode Attribute","linkify":"authenticationMode Attribute","nodes":[{"content":"authenticationMode Attribute","pos":[0,28]}]},{"content":"Value","pos":[6801,6806]},{"content":"Description","pos":[6807,6818]},{"content":"String","pos":[6857,6863]},{"pos":[7504,7530],"content":"defaultAlgorithm Attribute","linkify":"defaultAlgorithm Attribute","nodes":[{"content":"defaultAlgorithm Attribute","pos":[0,26]}]},{"content":"Value","pos":[7537,7542]},{"content":"Description","pos":[7543,7554]},{"content":"Basic128","pos":[7593,7601]},{"content":"Use Aes128 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.","pos":[7602,7682]},{"content":"Basic192","pos":[7687,7695]},{"content":"Use Aes192 encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.","pos":[7696,7772]},{"content":"Basic256","pos":[7777,7785]},{"content":"Use Aes256 encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.","pos":[7786,7862]},{"content":"Basic256Rsa15","pos":[7867,7880]},{"content":"Use Aes256 for message encryption, Sha1 for message digest and Rsa15 for key wrap.","pos":[7881,7963]},{"content":"Basic192Rsa15","pos":[7968,7981]},{"content":"Use Aes192 for message encryption, Sha1 for message digest and Rsa15 for key wrap.","pos":[7982,8064]},{"content":"TripleDes","pos":[8069,8078]},{"content":"Use TripleDes encryption,  Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.","pos":[8079,8159]},{"content":"Basic128Rsa15","pos":[8164,8177]},{"content":"Use Aes128 for message encryption, Sha1 for message digest and Rsa15 for key wrap.","pos":[8178,8260]},{"content":"TripleDesRsa15","pos":[8265,8279]},{"content":"Use TripleDes encryption, Sha1 for message digest and Rsa15 for key wrap.","pos":[8280,8353]},{"content":"Basic128Sha256","pos":[8358,8372]},{"content":"Use Aes256 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.","pos":[8373,8466]},{"content":"Basic192Sha256","pos":[8471,8485]},{"content":"Use Aes192 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.","pos":[8486,8579]},{"content":"Basic256Sha256","pos":[8584,8598]},{"content":"Use Aes256 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.","pos":[8599,8692]},{"content":"TripleDesSha256","pos":[8697,8712]},{"content":"Use TripleDes for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.","pos":[8713,8809]},{"content":"Basic128Sha256Rsa15","pos":[8814,8833]},{"content":"Use Aes128 for message encryption, Sha256 for message digest and Rsa15 for key wrap.","pos":[8834,8918]},{"content":"Basic192Sha256Rsa15","pos":[8923,8942]},{"content":"Use Aes192 for message encryption, Sha256 for message digest and Rsa15 for key wrap.","pos":[8943,9027]},{"content":"Basic256Sha256Rsa15","pos":[9032,9051]},{"content":"Use Aes256 for message encryption, Sha256 for message digest and Rsa15 for key wrap.","pos":[9052,9136]},{"content":"TripleDesSha256Rsa15","pos":[9141,9161]},{"content":"Use TripleDes for message encryption, Sha256 for message digest and Rsa15 for key wrap.","pos":[9162,9249]},{"pos":[9260,9274],"content":"Child Elements","linkify":"Child Elements","nodes":[{"content":"Child Elements","pos":[0,14]}]},{"content":"Element","pos":[9281,9288]},{"content":"Description","pos":[9289,9300]},{"pos":[9341,9454],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>issuedTokenParameters&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenparameters.md)</ept>","source":"[\\<issuedTokenParameters>](../../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenparameters.md)"},{"content":"Specifies a current issued token.","pos":[9455,9488]},{"content":"This element is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.IssuedTokenParametersElement&gt;</ph>.","pos":[9489,9583],"source":" This element is of type <xref:System.ServiceModel.Configuration.IssuedTokenParametersElement>."},{"pos":[9588,9705],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>localClientSettings&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/localclientsettings-element.md)</ept>","source":"[\\<localClientSettings>](../../../../../docs/framework/configure-apps/file-schema/wcf/localclientsettings-element.md)"},{"content":"Specifies the security settings of a local client for this binding.","pos":[9706,9773]},{"content":"This element is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.LocalClientSecuritySettingsElement&gt;</ph>.","pos":[9774,9874],"source":" This element is of type <xref:System.ServiceModel.Configuration.LocalClientSecuritySettingsElement>."},{"pos":[9879,9998],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>localServiceSettings&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/localservicesettings-element.md)</ept>","source":"[\\<localServiceSettings>](../../../../../docs/framework/configure-apps/file-schema/wcf/localservicesettings-element.md)"},{"content":"Specifies the security settings of a local service for this binding.","pos":[9999,10067]},{"content":"This element is of type <ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.LocalServiceSecuritySettingsElement&gt;</ph>.","pos":[10068,10169],"source":" This element is of type <xref:System.ServiceModel.Configuration.LocalServiceSecuritySettingsElement>."},{"pos":[10174,10299],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>secureConversationBootstrap&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)</ept>","source":"[\\<secureConversationBootstrap>](../../../../../docs/framework/configure-apps/file-schema/wcf/secureconversationbootstrap.md)"},{"content":"Specifies the default values used for initiating a secure conversation service.","pos":[10300,10379]},{"pos":[10390,10405],"content":"Parent Elements","linkify":"Parent Elements","nodes":[{"content":"Parent Elements","pos":[0,15]}]},{"content":"Element","pos":[10412,10419]},{"content":"Description","pos":[10420,10431]},{"pos":[10472,10531],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../../docs/framework/misc/binding.md)</ept>","source":"[\\<binding>](../../../../../docs/framework/misc/binding.md)"},{"content":"Defines all binding capabilities of the custom binding.","pos":[10532,10587]},{"pos":[10597,10604],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"pos":[10608,11024],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../../includes/crabout-md.md)]</ph> using this element, see <bpt id=\"p1\">[</bpt>SecurityBindingElement Authentication Modes<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md)</ept> and <bpt id=\"p2\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p2\">](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept>.","source":"[!INCLUDE[crabout](../../../../../includes/crabout-md.md)] using this element, see [SecurityBindingElement Authentication Modes](../../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md) and [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)."},{"pos":[11033,11040],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example demonstrates how to configure security using a custom binding.","pos":[11044,11128]},{"content":"It shows how to use a custom binding to enable message-level security together with a secure transport.","pos":[11129,11232]},{"content":"This is useful when a secure transport is required to transmit the messages between client and service and simultaneously the messages must be secure on the message level.","pos":[11233,11404]},{"content":"This configuration is not supported by system-provided bindings.","pos":[11405,11469]},{"content":"The service configuration defines a custom binding that supports TCP communication protected using TLS/SSL protocol, and Windows message security.","pos":[11476,11622]},{"content":"The custom binding uses a service certificate to authenticate the service on the transport level and to protect the messages during the transmission between client and service.","pos":[11623,11799]},{"content":"This is accomplished by the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>sslStreamSecurity&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/sslstreamsecurity.md)</ept> binding element.","pos":[11800,11950],"source":" This is accomplished by the [\\<sslStreamSecurity>](../../../../../docs/framework/configure-apps/file-schema/wcf/sslstreamsecurity.md) binding element."},{"content":"The service's certificate is configured using a service behavior.","pos":[11951,12016]},{"content":"Additionally, the custom binding uses message security with Windows credential type - this is the default credential type.","pos":[12023,12145]},{"content":"This is accomplished by the <bpt id=\"p1\">[</bpt>security<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md)</ept> binding element.","pos":[12146,12292],"source":" This is accomplished by the [security](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md) binding element."},{"content":"Both client and service are authenticated using message-level security if Kerberos authentication mechanism is available.","pos":[12293,12414]},{"content":"If the Kerberos authentication mechanism is not available, NTLM authentication is used.","pos":[12415,12502]},{"content":"NTLM authenticates the client to the service but does not authenticate service to the client.","pos":[12503,12596]},{"content":"The <bpt id=\"p1\">[</bpt>security<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md)</ept> binding element is configured to use <ph id=\"ph1\">`SecureConversation`</ph> authenticationType, which results in the creation of a security session on both the client and the service.","pos":[12597,12868],"source":" The [security](../../../../../docs/framework/configure-apps/file-schema/wcf/security-of-custombinding.md) binding element is configured to use `SecureConversation` authenticationType, which results in the creation of a security session on both the client and the service."},{"content":"This is required to enable the service's duplex contract to work.","pos":[12869,12934]},{"content":"For more information on running this example, see <bpt id=\"p1\">[</bpt>Custom Binding Security<ept id=\"p1\">](../../../../../docs/framework/wcf/samples/custom-binding-security.md)</ept>.","pos":[12935,13081],"source":" For more information on running this example, see [Custom Binding Security](../../../../../docs/framework/wcf/samples/custom-binding-security.md)."},{"pos":[15177,15185],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Configuration.SecurityElement&gt;</ph>","pos":[15189,15245],"source":"<xref:System.ServiceModel.Configuration.SecurityElement> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph>","pos":[15250,15308],"source":"<xref:System.ServiceModel.Channels.SecurityBindingElement> "},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.CustomBinding&gt;</ph>","pos":[15313,15362],"source":"<xref:System.ServiceModel.Channels.CustomBinding> "},{"content":"<bpt id=\"p1\">[</bpt>Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/bindings.md)</ept><ph id=\"ph1\"> </ph>","pos":[15367,15425],"source":"[Bindings](../../../../../docs/framework/wcf/bindings.md) "},{"content":"<bpt id=\"p1\">[</bpt>Extending Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/extending-bindings.md)</ept><ph id=\"ph1\"> </ph>","pos":[15429,15517],"source":"[Extending Bindings](../../../../../docs/framework/wcf/extending/extending-bindings.md) "},{"content":"<bpt id=\"p1\">[</bpt>Custom Bindings<ept id=\"p1\">](../../../../../docs/framework/wcf/extending/custom-bindings.md)</ept><ph id=\"ph1\"> </ph>","pos":[15521,15603],"source":"[Custom Bindings](../../../../../docs/framework/wcf/extending/custom-bindings.md) "},{"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>customBinding&gt;<ept id=\"p1\">](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)</ept><ph id=\"ph2\"> </ph>","pos":[15607,15705],"source":"[\\<customBinding>](../../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md) "},{"content":"<bpt id=\"p1\">[</bpt>How to: Create a Custom Binding Using the SecurityBindingElement<ept id=\"p1\">](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)</ept><ph id=\"ph1\"> </ph>","pos":[15709,15894],"source":"[How to: Create a Custom Binding Using the SecurityBindingElement](../../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md) "},{"content":"<bpt id=\"p1\">[</bpt>Custom Binding Security<ept id=\"p1\">](../../../../../docs/framework/wcf/samples/custom-binding-security.md)</ept>","pos":[15898,15993],"source":"[Custom Binding Security](../../../../../docs/framework/wcf/samples/custom-binding-security.md)"}]}