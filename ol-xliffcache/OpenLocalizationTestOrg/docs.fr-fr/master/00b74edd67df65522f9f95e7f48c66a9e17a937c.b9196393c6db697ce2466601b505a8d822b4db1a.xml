{"content":"---\ntitle: \"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)\"\nms.date: 07/20/2015\nms.assetid: 74c06201-0b1b-4b5e-b3ac-0092980614e6\n---\n# How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)\nSometimes you want to find the immediate preceding sibling to a node. Due to the difference in the semantics of positional predicates for the preceding sibling axes in XPath as opposed to [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], this is one of the more interesting comparisons.  \n  \n## Example  \n In this example, the [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)] query uses the <xref:System.Linq.Enumerable.Last%2A> operator to find the last node in the collection returned by <xref:System.Xml.Linq.XNode.ElementsBeforeSelf%2A>. By contrast, the XPath expression uses a predicate with a value of 1 to find the immediately preceding element.  \n  \n```csharp  \nXElement root = XElement.Parse(  \n    @\"<Root>  \n    <Child1/>  \n    <Child2/>  \n    <Child3/>  \n    <Child4/>  \n</Root>\");  \nXElement child4 = root.Element(\"Child4\");  \n  \n// LINQ to XML query  \nXElement el1 =  \n    child4  \n    .ElementsBeforeSelf()  \n    .Last();  \n  \n// XPath expression  \nXElement el2 =  \n    ((IEnumerable)child4  \n                 .XPathEvaluate(\"preceding-sibling::*[1]\"))  \n                 .Cast<XElement>()  \n                 .First();  \n  \nif (el1 == el2)  \n    Console.WriteLine(\"Results are identical\");  \nelse  \n    Console.WriteLine(\"Results differ\");  \nConsole.WriteLine(el1);  \n```  \n  \n This example produces the following output:  \n  \n```  \nResults are identical  \n<Child3 />  \n```  \n  \n## See also\n\n- [LINQ to XML for XPath Users (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-xml-for-xpath-users.md)\n","nodes":[{"pos":[4,151],"embed":true,"restype":"x-metadata","content":"title: \"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)\"\nms.date: 07/20/2015\nms.assetid: 74c06201-0b1b-4b5e-b3ac-0092980614e6","nodes":[{"content":"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)","nodes":[{"pos":[0,69],"content":"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)","nodes":[{"content":"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)","pos":[0,69]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[158,227],"content":"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)","linkify":"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)","nodes":[{"content":"How to: Find the Immediate Preceding Sibling (XPath-LINQ to XML) (C#)","pos":[0,69]}]},{"content":"Sometimes you want to find the immediate preceding sibling to a node.","pos":[228,297]},{"content":"Due to the difference in the semantics of positional predicates for the preceding sibling axes in XPath as opposed to <ph id=\"ph1\">[!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)]</ph>, this is one of the more interesting comparisons.","pos":[298,519],"source":" Due to the difference in the semantics of positional predicates for the preceding sibling axes in XPath as opposed to [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], this is one of the more interesting comparisons."},{"pos":[528,535],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"In this example, the <ph id=\"ph1\">[!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)]</ph> query uses the <ph id=\"ph2\">&lt;xref:System.Linq.Enumerable.Last%2A&gt;</ph> operator to find the last node in the collection returned by <ph id=\"ph3\">&lt;xref:System.Xml.Linq.XNode.ElementsBeforeSelf%2A&gt;</ph>.","pos":[539,779],"source":"In this example, the [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)] query uses the <xref:System.Linq.Enumerable.Last%2A> operator to find the last node in the collection returned by <xref:System.Xml.Linq.XNode.ElementsBeforeSelf%2A>."},{"content":"By contrast, the XPath expression uses a predicate with a value of 1 to find the immediately preceding element.","pos":[780,891]},{"content":"This example produces the following output:","pos":[1532,1575]},{"pos":[1636,1644],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[1648,1765],"content":"<bpt id=\"p1\">[</bpt>LINQ to XML for XPath Users (C#)<ept id=\"p1\">](../../../../csharp/programming-guide/concepts/linq/linq-to-xml-for-xpath-users.md)</ept>","source":"[LINQ to XML for XPath Users (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-xml-for-xpath-users.md)"}]}