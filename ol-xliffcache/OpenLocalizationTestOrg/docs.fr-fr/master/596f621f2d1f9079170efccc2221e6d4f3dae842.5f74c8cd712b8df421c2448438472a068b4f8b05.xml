{"content":"---\ntitle: \"Unwrapped Messages | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 019657bd-1f9b-4315-ad74-eaa4e7551ff6\ncaps.latest.revision: 22\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Unwrapped Messages\nThis sample demonstrates unwrapped messages. By default, the message body is formatted such that the parameters to a service operation are wrapped. The following sample shows an `Add` request message to the `ICalculator` service in wrapped mode.  \n  \n```  \n<s:Envelope   \n    xmlns:s=http://www.w3.org/2003/05/soap-envelope  \n    xmlns:a=\"http://schemas.xmlsoap.org/ws/2005/08/addressing\">  \n    <s:Header>  \n        …  \n    </s:Header>  \n    <s:Body>  \n      <Add xmlns=\"http://Microsoft.ServiceModel.Samples\">  \n        <n1>100</n1>  \n        <n2>15.99</n2>  \n      </Add>  \n    </s:Body>  \n</s:Envelope>  \n  \n```  \n  \n The `<Add>` element in the message body wraps the `n1` and `n2` parameters. In contrast, the following sample shows the equivalent message in the unwrapped mode.  \n  \n```  \n<s:Envelope   \n    xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\"   \n    xmlns:a=\"http://schemas.xmlsoap.org/ws/2005/08/addressing\">  \n    <s:Header>  \n        ….  \n    </s:Header>  \n    <s:Body>  \n      <n1 xmlns=\"http://Microsoft.ServiceModel.Samples\">100</n1>  \n      <n2 xmlns=\"http://Microsoft.ServiceModel.Samples\">15.99</n2>  \n    </s:Body>  \n  </s:Envelope>  \n</MessageLogTraceRecord>  \n  \n```  \n  \n The unwrapped message does not wrap the `n1` and `n2` parameters in a containing element, they are direct children of the soap body element.  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n In this sample, an unwrapped message is created by applying the <xref:System.ServiceModel.MessageContractAttribute> to the service operation parameter type and return value type as shown in the following sample code.  \n  \n```  \n[ServiceContract(Namespace=\"http://Microsoft.ServiceModel.Samples\")]  \npublic interface ICalculator  \n{  \n    [OperationContract]  \n    ResponseMessage Add(RequestMessage request);  \n    [OperationContract]  \n    ResponseMessage Subtract(RequestMessage request);  \n    [OperationContract]  \n    ResponseMessage Multiply(RequestMessage request);  \n    [OperationContract]  \n    ResponseMessage Divide(RequestMessage request);  \n}  \n  \n//setting IsWrapped to false means the n1 and n2  \n//members will be direct children of the soap body element  \n[MessageContract(IsWrapped = false)]  \npublic class RequestMessage  \n{  \n    [MessageBodyMember]  \n    private double n1;  \n    [MessageBodyMember]  \n    private double n2;  \n    //…  \n}  \n  \n//setting IsWrapped to false means the result  \n//member will be a direct child of the soap body element  \n[MessageContract(IsWrapped = false)]  \npublic class ResponseMessage  \n{  \n    [MessageBodyMember]  \n    private double result;  \n    //…  \n}  \n```  \n  \n To allow you to see the messages being sent and received, this sample uses tracing. In addition, the <xref:System.ServiceModel.WSHttpBinding> has been configured without security, to reduce the number of messages it logs.  \n  \n The resulting trace log (c:\\logs\\Message.log) can be viewed by using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md). To view message contents, select **Messages** in both the left and the right panes of the Service Trace Viewer tool. Trace logs in this sample are configured to be generated into the C:\\LOGS folder. Create this folder before running the sample and give the user Network Service write permissions for this directory.  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  Create a C:\\LOGS directory for logging messages. Give the user Network Service write permissions for this directory.  \n  \n3.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n4.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Contract\\Message\\Unwrapped`  \n  \n## See Also","nodes":[{"pos":[12,47],"content":"Unwrapped Messages | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Unwrapped Messages | Microsoft Docs","pos":[0,35]}]},{"pos":[346,364],"content":"Unwrapped Messages","linkify":"Unwrapped Messages","nodes":[{"content":"Unwrapped Messages","pos":[0,18]}]},{"content":"This sample demonstrates unwrapped messages.","pos":[365,409]},{"content":"By default, the message body is formatted such that the parameters to a service operation are wrapped.","pos":[410,512]},{"content":"The following sample shows an <ph id=\"ph1\">`Add`</ph> request message to the <ph id=\"ph2\">`ICalculator`</ph> service in wrapped mode.","pos":[513,610],"source":" The following sample shows an `Add` request message to the `ICalculator` service in wrapped mode."},{"content":"The <ph id=\"ph1\">`&lt;Add&gt;`</ph> element in the message body wraps the <ph id=\"ph2\">`n1`</ph> and <ph id=\"ph3\">`n2`</ph> parameters.","pos":[987,1062],"source":"The `<Add>` element in the message body wraps the `n1` and `n2` parameters."},{"content":"In contrast, the following sample shows the equivalent message in the unwrapped mode.","pos":[1063,1148]},{"pos":[1571,1711],"content":"The unwrapped message does not wrap the <ph id=\"ph1\">`n1`</ph> and <ph id=\"ph2\">`n2`</ph> parameters in a containing element, they are direct children of the soap body element.","source":"The unwrapped message does not wrap the `n1` and `n2` parameters in a containing element, they are direct children of the soap body element."},{"pos":[1719,1826],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"In this sample, an unwrapped message is created by applying the <ph id=\"ph1\">&lt;xref:System.ServiceModel.MessageContractAttribute&gt;</ph> to the service operation parameter type and return value type as shown in the following sample code.","pos":[1833,2049],"source":"In this sample, an unwrapped message is created by applying the <xref:System.ServiceModel.MessageContractAttribute> to the service operation parameter type and return value type as shown in the following sample code."},{"content":"To allow you to see the messages being sent and received, this sample uses tracing.","pos":[3059,3142]},{"content":"In addition, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> has been configured without security, to reduce the number of messages it logs.","pos":[3143,3280],"source":" In addition, the <xref:System.ServiceModel.WSHttpBinding> has been configured without security, to reduce the number of messages it logs."},{"content":"The resulting trace log (c:\\logs\\Message.log) can be viewed by using the <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)</ept>.","pos":[3287,3489],"source":"The resulting trace log (c:\\logs\\Message.log) can be viewed by using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)."},{"content":"To view message contents, select <bpt id=\"p1\">**</bpt>Messages<ept id=\"p1\">**</ept> in both the left and the right panes of the Service Trace Viewer tool.","pos":[3490,3606],"source":" To view message contents, select **Messages** in both the left and the right panes of the Service Trace Viewer tool."},{"content":"Trace logs in this sample are configured to be generated into the C:\\LOGS folder.","pos":[3607,3688]},{"content":"Create this folder before running the sample and give the user Network Service write permissions for this directory.","pos":[3689,3805]},{"pos":[3815,3851],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[3861,4060],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"content":"Create a C:\\LOGS directory for logging messages.","pos":[4070,4118]},{"content":"Give the user Network Service write permissions for this directory.","pos":[4119,4186]},{"pos":[4196,4405],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4415,4623],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[4631,4763],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[4817,5143],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5144,5194]},{"pos":[5283,5291],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}