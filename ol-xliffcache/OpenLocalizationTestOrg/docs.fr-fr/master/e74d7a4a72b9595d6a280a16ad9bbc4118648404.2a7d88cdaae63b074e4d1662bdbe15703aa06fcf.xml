{"content":"---\ntitle: \"Assembly Security Considerations\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"assemblies [.NET Framework], security\"\n  - \"signcodes\"\n  - \"names [.NET Framework], assemblies\"\n  - \"strong-named assemblies, security considerations\"\n  - \"signing assemblies\"\n  - \"assemblies [.NET Framework], signing\"\n  - \"granting permissions, assemblies\"\n  - \"assemblies [.NET Framework], strong-named\"\n  - \"names [.NET Framework], strong names\"\n  - \"permissions [.NET Framework], assemblies\"\n  - \"security [.NET Framework], assemblies\"\n  - \"integrity with assemblies\"\nms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# Assembly Security Considerations\n<a name=\"top\"></a> When you build an assembly, you can specify a set of permissions that the assembly requires to run. Whether certain permissions are granted or not granted to an assembly is based on evidence.  \n  \n There are two distinct ways evidence is used:  \n  \n-   The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution. The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.  \n  \n-   The input evidence is used unaltered as the final set of evidence used for policy resolution. The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.  \n  \n Optional permissions can be granted by the [security policy](../../../docs/framework/misc/code-access-security-basics.md) set on the computer where the assembly will run. If you want your code to handle all potential security exceptions, you can do one of the following:  \n  \n-   Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.  \n  \n-   Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.  \n  \n    > [!NOTE]\n    >  Security is a complex area, and you have many options to choose from. For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md).  \n  \n At load time, the assembly's evidence is used as input to security policy. Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed. Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name. For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.  \n  \n## Strong-Named Assemblies and Signing Tools  \n\n > [!WARNING]\n > Do not rely on strong names for security. They provide a unique identity only.\n\n You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md). Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest. Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.  \n  \n No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) important. The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate. This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.  \n  \n You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) to an assembly, or you can use either alone. The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest. A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest. Signing of an assembly using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on[SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.  \n  \n> [!NOTE]\n>  When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.  \n  \n The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built. As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest. If the two hashes do not match, the assembly fails to load.  \n  \n Because strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence. Strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates. All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.  \n  \n## See also\n\n- [Strong-Named Assemblies](../../../docs/framework/app-domains/strong-named-assemblies.md)\n- [Assemblies in the Common Language Runtime](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)\n- [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)\n","nodes":[{"pos":[4,655],"embed":true,"restype":"x-metadata","content":"title: \"Assembly Security Considerations\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"assemblies [.NET Framework], security\"\n  - \"signcodes\"\n  - \"names [.NET Framework], assemblies\"\n  - \"strong-named assemblies, security considerations\"\n  - \"signing assemblies\"\n  - \"assemblies [.NET Framework], signing\"\n  - \"granting permissions, assemblies\"\n  - \"assemblies [.NET Framework], strong-named\"\n  - \"names [.NET Framework], strong names\"\n  - \"permissions [.NET Framework], assemblies\"\n  - \"security [.NET Framework], assemblies\"\n  - \"integrity with assemblies\"\nms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"Assembly Security Considerations","nodes":[{"pos":[0,32],"content":"Assembly Security Considerations","nodes":[{"content":"Assembly Security Considerations","pos":[0,32]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[662,694],"content":"Assembly Security Considerations","linkify":"Assembly Security Considerations","nodes":[{"content":"Assembly Security Considerations","pos":[0,32]}]},{"content":"<bpt id=\"p1\">&lt;a name=\"top\"&gt;</bpt><ept id=\"p1\">&lt;/a&gt;</ept> When you build an assembly, you can specify a set of permissions that the assembly requires to run.","pos":[695,813],"source":"<a name=\"top\"></a> When you build an assembly, you can specify a set of permissions that the assembly requires to run."},{"content":"Whether certain permissions are granted or not granted to an assembly is based on evidence.","pos":[814,905]},{"content":"There are two distinct ways evidence is used:","pos":[912,957]},{"content":"The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.","pos":[967,1098]},{"content":"The methods that use this semantic include <bpt id=\"p1\">**</bpt>Assembly.Load<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Assembly.LoadFrom<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Activator.CreateInstance<ept id=\"p3\">**</ept>.","pos":[1099,1217],"source":" The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**."},{"content":"The input evidence is used unaltered as the final set of evidence used for policy resolution.","pos":[1227,1320]},{"content":"The methods that use this semantic include <bpt id=\"p1\">**</bpt>Assembly.Load(byte[])<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>AppDomain.DefineDynamicAssembly()<ept id=\"p2\">**</ept>.","pos":[1321,1432],"source":" The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**."},{"content":"Optional permissions can be granted by the <bpt id=\"p1\">[</bpt>security policy<ept id=\"p1\">](../../../docs/framework/misc/code-access-security-basics.md)</ept> set on the computer where the assembly will run.","pos":[1439,1609],"source":"Optional permissions can be granted by the [security policy](../../../docs/framework/misc/code-access-security-basics.md) set on the computer where the assembly will run."},{"content":"If you want your code to handle all potential security exceptions, you can do one of the following:","pos":[1610,1709]},{"content":"Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.","pos":[1719,1881]},{"content":"Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.","pos":[1891,2044]},{"pos":[2056,2249],"content":"[!NOTE]\nSecurity is a complex area, and you have many options to choose from. For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md).","leadings":["","    >  "],"nodes":[{"content":"Security is a complex area, and you have many options to choose from. For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md).","pos":[8,186],"nodes":[{"content":"Security is a complex area, and you have many options to choose from.","pos":[0,69]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Key Security Concepts<ept id=\"p1\">](../../../docs/standard/security/key-security-concepts.md)</ept>.","pos":[70,178],"source":" For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md)."}]}]},{"content":"At load time, the assembly's evidence is used as input to security policy.","pos":[2256,2330]},{"content":"Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.","pos":[2331,2537]},{"content":"Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.","pos":[2538,2778]},{"content":"For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.","pos":[2779,3030]},{"pos":[3039,3080],"content":"Strong-Named Assemblies and Signing Tools","linkify":"Strong-Named Assemblies and Signing Tools","nodes":[{"content":"Strong-Named Assemblies and Signing Tools","pos":[0,41]}]},{"pos":[3087,3179],"content":"[!WARNING]\nDo not rely on strong names for security. They provide a unique identity only.","leadings":[""," > "],"nodes":[{"content":"Do not rely on strong names for security. They provide a unique identity only.","pos":[11,89],"nodes":[{"content":"Do not rely on strong names for security.","pos":[0,41]},{"content":"They provide a unique identity only.","pos":[42,78]}]}]},{"content":"You can sign an assembly in two different but complementary ways: with a strong name or by using  <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept>.","pos":[3182,3354],"source":"You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)."},{"content":"Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.","pos":[3355,3466]},{"content":"Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.","pos":[3467,3611]},{"content":"No level of trust is associated with a strong name, which makes <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept> important.","pos":[3618,3766],"source":"No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) important."},{"content":"The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.","pos":[3767,3883]},{"content":"This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.","pos":[3884,4018]},{"content":"You can give both a strong name and a digital signature created using <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept> to an assembly, or you can use either alone.","pos":[4025,4213],"source":"You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) to an assembly, or you can use either alone."},{"content":"The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.","pos":[4214,4350]},{"content":"A strong name is stored in the file containing the assembly manifest, but a signature created using <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept> is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.","pos":[4351,4624],"source":" A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest."},{"content":"Signing of an assembly using <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept> can be used (with or without a strong name) when you already have a trust hierarchy that relies on<bpt id=\"p2\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p2\">](../../../docs/framework/tools/signtool-exe.md)</ept> generated signatures, or when your policy uses only the key portion and does not check a chain of trust.","pos":[4625,5004],"source":" Signing of an assembly using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on[SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust."},{"pos":[5012,5137],"content":"[!NOTE]\n When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.","leadings":["","> "],"nodes":[{"content":"When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.","pos":[9,123]}]},{"content":"The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.","pos":[5144,5357]},{"content":"As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.","pos":[5358,5462]},{"content":"If the two hashes do not match, the assembly fails to load.","pos":[5463,5522]},{"content":"Because strong naming and signing using <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept> guarantee integrity, you can base code access security policy on these two forms of assembly evidence.","pos":[5529,5745],"source":"Because strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence."},{"content":"Strong naming and signing using <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept> guarantee integrity through digital signatures and certificates.","pos":[5746,5916],"source":" Strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates."},{"content":"All the technologies mentioned—hash verification, strong naming, and signing using <bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept>—work together to ensure that the assembly has not been altered in any way.","pos":[5917,6148],"source":" All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way."},{"pos":[6157,6165],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[6169,6258],"content":"<bpt id=\"p1\">[</bpt>Strong-Named Assemblies<ept id=\"p1\">](../../../docs/framework/app-domains/strong-named-assemblies.md)</ept>","source":"[Strong-Named Assemblies](../../../docs/framework/app-domains/strong-named-assemblies.md)"},{"pos":[6261,6386],"content":"<bpt id=\"p1\">[</bpt>Assemblies in the Common Language Runtime<ept id=\"p1\">](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)</ept>","source":"[Assemblies in the Common Language Runtime](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)"},{"pos":[6389,6462],"content":"<bpt id=\"p1\">[</bpt>SignTool.exe (Sign Tool)<ept id=\"p1\">](../../../docs/framework/tools/signtool-exe.md)</ept>","source":"[SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)"}]}