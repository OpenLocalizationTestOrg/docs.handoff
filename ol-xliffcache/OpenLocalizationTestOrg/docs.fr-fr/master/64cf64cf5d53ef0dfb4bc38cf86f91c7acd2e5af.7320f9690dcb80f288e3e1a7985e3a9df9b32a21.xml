{"content":"---\ntitle: \"Setting the Use and Style properties - WCF samples\"\nms.date: \"03/30/2017\"\nms.assetid: c09a0600-116f-41cf-900a-1b7e4ea4e300\n---\n# Setting the Use and Style Properties\n\nThis sample demonstrates how to use the Use and Style properties on the <xref:System.ServiceModel.XmlSerializerFormatAttribute> and the <xref:System.ServiceModel.DataContractFormatAttribute>. These properties affect how messages are formatted. By default, the message body is formatted with the style set to <xref:System.ServiceModel.OperationFormatStyle.Document>. These settings can be specified at either the service contract level or the operation contract level.\n\n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.\n\nThe <xref:System.ServiceModel.DataContractFormatAttribute.Style%2A> style property determines how the WSDL metadata for the service is formatted. Possible values are <xref:System.ServiceModel.OperationFormatStyle.Document>, and <xref:System.ServiceModel.OperationFormatStyle.Rpc>. RPC means that the WSDL representation of messages exchanged for an operation contains parameters as if it were a remote procedure call. The following is an example.\n\n```xml\n<wsdl:message name=\"IUseAndStyleCalculator_Add_InputMessage\">\n  <wsdl:part name=\"n1\" type=\"xsd:double\"/>\n  <wsdl:part name=\"n2\" type=\"xsd:double\"/>\n</wsdl:message>\n```\n\nSetting the style to <xref:System.ServiceModel.OperationFormatStyle.Document> means that the WSDL representation contains a single element that represents the document that is exchanged for an operation as shown in the following example.\n\n```xml\n<wsdl:message name=\"IUseAndStyleCalculator_Add_InputMessage\">\n  <wsdl:part name=\"parameters\" element=\"tns:Add\"/>\n</wsdl:message>\n```\n\nThe <xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A> property determines the format of the message. Possible values are <xref:System.ServiceModel.OperationFormatUse.Literal> and <xref:System.ServiceModel.OperationFormatUse.Encoded>; the default value is <xref:System.ServiceModel.OperationFormatUse.Literal>. Literal means that the message is a literal instance of the schema in the WSDL as shown in the following Document/ Literal example.\n\n```xml\n<Add xmlns=\"http://Microsoft.ServiceModel.Samples\">\n  <n1>100</n1>\n  <n2>15.99</n2>\n</Add>\n```\n\nEncoded means that the schemas in the WSDL are abstract specifications that are encoded according to the rules found in SOAP 1.1 section 5. The following is an RPC/Encoded example.\n\n```xml\n<q1:Add xmlns:q1=\"http://Microsoft.ServiceModel.Samples\">\n  <n1 xsi:type=\"xsd:double\" xmlns=\"\">100</n1>\n  <n2 xsi:type=\"xsd:double\" xmlns=\"\">15.99</n2>\n</q1:Add>\n```\n\nThe WS-I Basic Profile 1.0 prohibits the use of <xref:System.ServiceModel.OperationFormatUse.Encoded> and you should only use it when required by legacy services. The `Encoded` message format is only available when using the XmlSerializer.\n\nTo allow you to see the messages being sent and received, this sample is based on the [Tracing and Message Logging](tracing-and-message-logging.md). The service configuration and source code have been modified to enable and utilize tracing and message logging. In addition, the <xref:System.ServiceModel.WSHttpBinding> has been configured without security, so the logged messages can be viewed in an unencrypted format. The resulting trace logs (System.ServiceModel.e2e and Message.log) should be viewed by using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../service-trace-viewer-tool-svctraceviewer-exe.md). The traces are configured to be created in the C:\\LOGS folder. Create the folder before running the sample. To view message contents in the Trace Viewer tool, select **Messages** in both the left and the right panes of the tool.\n\nThe following code shows the service contract with the <xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A> property set to <xref:System.ServiceModel.OperationFormatUse> and the format of the message body changed from the default <xref:System.ServiceModel.OperationFormatStyle> to <xref:System.ServiceModel.OperationFormatStyle.Document>.\n\n```csharp\n[ServiceContract(Namespace=\"http://Microsoft.ServiceModel.Samples\"),\nXmlSerializerFormat(Style = OperationFormatStyle.Rpc, \n                                 Use = OperationFormatUse.Encoded)]\npublic interface IUseAndStyleCalculator\n{\n    [OperationContract]\n    double Add(double n1, double n2);\n    [OperationContract]\n    double Subtract(double n1, double n2);\n    [OperationContract]\n    double Multiply(double n1, double n2);\n    [OperationContract]\n    double Divide(double n1, double n2);\n}\n```\n\nTo see the difference between the different <xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A> and <xref:System.ServiceModel.XmlSerializerFormatAttribute.Style%2A> settings, modify them in the service, regenerate the client, run the sample, and examine the c:\\logs\\message.logs file with the Service Trace Viewer tool. Also observe the impact on the metadata by viewing `http://localhost/ServiceModelSamples/service.svc?wsdl`. The metadata for services is typically broken up into multiple pages. The main wsdl page contains the WSDL bindings, but view `http://localhost/ServiceModelSamples/service.svc?wsdl=wsdl0` to observe the message definitions.\n\n## To set up, build, and run the sample\n\n1. Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).\n\n2. Create a C:\\LOGS directory for logging messages. Give the user Network Service write permissions for this directory.\n\n3. To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](building-the-samples.md).\n\n4. To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](running-the-samples.md).\n\n> [!IMPORTANT]\n> The samples may already be installed on your machine. Check for the following (default) directory before continuing.\n>\n> `<InstallDrive>:\\WF_WCF_Samples`\n>\n> If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.\n> \n> `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Contract\\Message\\UseAndStyle`","nodes":[{"pos":[4,134],"embed":true,"restype":"x-metadata","content":"title: \"Setting the Use and Style properties - WCF samples\"\nms.date: \"03/30/2017\"\nms.assetid: c09a0600-116f-41cf-900a-1b7e4ea4e300","nodes":[{"content":"Setting the Use and Style properties - WCF samples","nodes":[{"pos":[0,50],"content":"Setting the Use and Style properties - WCF samples","nodes":[{"content":"Setting the Use and Style properties - WCF samples","pos":[0,50]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[141,177],"content":"Setting the Use and Style Properties","linkify":"Setting the Use and Style Properties","nodes":[{"content":"Setting the Use and Style Properties","pos":[0,36]}]},{"content":"This sample demonstrates how to use the Use and Style properties on the <ph id=\"ph1\">&lt;xref:System.ServiceModel.XmlSerializerFormatAttribute&gt;</ph> and the <ph id=\"ph2\">&lt;xref:System.ServiceModel.DataContractFormatAttribute&gt;</ph>.","pos":[179,370],"source":"This sample demonstrates how to use the Use and Style properties on the <xref:System.ServiceModel.XmlSerializerFormatAttribute> and the <xref:System.ServiceModel.DataContractFormatAttribute>."},{"content":"These properties affect how messages are formatted.","pos":[371,422]},{"content":"By default, the message body is formatted with the style set to <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationFormatStyle.Document&gt;</ph>.","pos":[423,544],"source":" By default, the message body is formatted with the style set to <xref:System.ServiceModel.OperationFormatStyle.Document>."},{"content":"These settings can be specified at either the service contract level or the operation contract level.","pos":[545,646]},{"pos":[650,757],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.DataContractFormatAttribute.Style%2A&gt;</ph> style property determines how the WSDL metadata for the service is formatted.","pos":[759,904],"source":"The <xref:System.ServiceModel.DataContractFormatAttribute.Style%2A> style property determines how the WSDL metadata for the service is formatted."},{"content":"Possible values are <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationFormatStyle.Document&gt;</ph>, and <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationFormatStyle.Rpc&gt;</ph>.","pos":[905,1039],"source":" Possible values are <xref:System.ServiceModel.OperationFormatStyle.Document>, and <xref:System.ServiceModel.OperationFormatStyle.Rpc>."},{"content":"RPC means that the WSDL representation of messages exchanged for an operation contains parameters as if it were a remote procedure call.","pos":[1040,1176]},{"content":"The following is an example.","pos":[1177,1205]},{"pos":[1383,1620],"content":"Setting the style to <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationFormatStyle.Document&gt;</ph> means that the WSDL representation contains a single element that represents the document that is exchanged for an operation as shown in the following example.","source":"Setting the style to <xref:System.ServiceModel.OperationFormatStyle.Document> means that the WSDL representation contains a single element that represents the document that is exchanged for an operation as shown in the following example."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A&gt;</ph> property determines the format of the message.","pos":[1763,1876],"source":"The <xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A> property determines the format of the message."},{"content":"Possible values are <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationFormatUse.Literal&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationFormatUse.Encoded&gt;</ph>; the default value is <ph id=\"ph3\">&lt;xref:System.ServiceModel.OperationFormatUse.Literal&gt;</ph>.","pos":[1877,2085],"source":" Possible values are <xref:System.ServiceModel.OperationFormatUse.Literal> and <xref:System.ServiceModel.OperationFormatUse.Encoded>; the default value is <xref:System.ServiceModel.OperationFormatUse.Literal>."},{"content":"Literal means that the message is a literal instance of the schema in the WSDL as shown in the following Document/ Literal example.","pos":[2086,2217]},{"content":"Encoded means that the schemas in the WSDL are abstract specifications that are encoded according to the rules found in SOAP 1.1 section 5.","pos":[2322,2461]},{"content":"The following is an RPC/Encoded example.","pos":[2462,2502]},{"content":"The WS-I Basic Profile 1.0 prohibits the use of <ph id=\"ph1\">&lt;xref:System.ServiceModel.OperationFormatUse.Encoded&gt;</ph> and you should only use it when required by legacy services.","pos":[2678,2840],"source":"The WS-I Basic Profile 1.0 prohibits the use of <xref:System.ServiceModel.OperationFormatUse.Encoded> and you should only use it when required by legacy services."},{"content":"The <ph id=\"ph1\">`Encoded`</ph> message format is only available when using the XmlSerializer.","pos":[2841,2917],"source":" The `Encoded` message format is only available when using the XmlSerializer."},{"content":"To allow you to see the messages being sent and received, this sample is based on the <bpt id=\"p1\">[</bpt>Tracing and Message Logging<ept id=\"p1\">](tracing-and-message-logging.md)</ept>.","pos":[2919,3067],"source":"To allow you to see the messages being sent and received, this sample is based on the [Tracing and Message Logging](tracing-and-message-logging.md)."},{"content":"The service configuration and source code have been modified to enable and utilize tracing and message logging.","pos":[3068,3179]},{"content":"In addition, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> has been configured without security, so the logged messages can be viewed in an unencrypted format.","pos":[3180,3338],"source":" In addition, the <xref:System.ServiceModel.WSHttpBinding> has been configured without security, so the logged messages can be viewed in an unencrypted format."},{"content":"The resulting trace logs (System.ServiceModel.e2e and Message.log) should be viewed by using the <bpt id=\"p1\">[</bpt>Service Trace Viewer Tool (SvcTraceViewer.exe)<ept id=\"p1\">](../service-trace-viewer-tool-svctraceviewer-exe.md)</ept>.","pos":[3339,3537],"source":" The resulting trace logs (System.ServiceModel.e2e and Message.log) should be viewed by using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../service-trace-viewer-tool-svctraceviewer-exe.md)."},{"content":"The traces are configured to be created in the C:\\LOGS folder.","pos":[3538,3600]},{"content":"Create the folder before running the sample.","pos":[3601,3645]},{"content":"To view message contents in the Trace Viewer tool, select <bpt id=\"p1\">**</bpt>Messages<ept id=\"p1\">**</ept> in both the left and the right panes of the tool.","pos":[3646,3766],"source":" To view message contents in the Trace Viewer tool, select **Messages** in both the left and the right panes of the tool."},{"pos":[3768,4116],"content":"The following code shows the service contract with the <ph id=\"ph1\">&lt;xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A&gt;</ph> property set to <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationFormatUse&gt;</ph> and the format of the message body changed from the default <ph id=\"ph3\">&lt;xref:System.ServiceModel.OperationFormatStyle&gt;</ph> to <ph id=\"ph4\">&lt;xref:System.ServiceModel.OperationFormatStyle.Document&gt;</ph>.","source":"The following code shows the service contract with the <xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A> property set to <xref:System.ServiceModel.OperationFormatUse> and the format of the message body changed from the default <xref:System.ServiceModel.OperationFormatStyle> to <xref:System.ServiceModel.OperationFormatStyle.Document>."},{"content":"To see the difference between the different <ph id=\"ph1\">&lt;xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.ServiceModel.XmlSerializerFormatAttribute.Style%2A&gt;</ph> settings, modify them in the service, regenerate the client, run the sample, and examine the c:\\logs\\message.logs file with the Service Trace Viewer tool.","pos":[4630,4960],"source":"To see the difference between the different <xref:System.ServiceModel.XmlSerializerFormatAttribute.Use%2A> and <xref:System.ServiceModel.XmlSerializerFormatAttribute.Style%2A> settings, modify them in the service, regenerate the client, run the sample, and examine the c:\\logs\\message.logs file with the Service Trace Viewer tool."},{"content":"Also observe the impact on the metadata by viewing <ph id=\"ph1\">`http://localhost/ServiceModelSamples/service.svc?wsdl`</ph>.","pos":[4961,5068],"source":" Also observe the impact on the metadata by viewing `http://localhost/ServiceModelSamples/service.svc?wsdl`."},{"content":"The metadata for services is typically broken up into multiple pages.","pos":[5069,5138]},{"content":"The main wsdl page contains the WSDL bindings, but view <ph id=\"ph1\">`http://localhost/ServiceModelSamples/service.svc?wsdl=wsdl0`</ph> to observe the message definitions.","pos":[5139,5292],"source":" The main wsdl page contains the WSDL bindings, but view `http://localhost/ServiceModelSamples/service.svc?wsdl=wsdl0` to observe the message definitions."},{"pos":[5297,5333],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[5338,5498],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md)."},{"content":"Create a C:\\LOGS directory for logging messages.","pos":[5503,5551]},{"content":"Give the user Network Service write permissions for this directory.","pos":[5552,5619]},{"pos":[5624,5794],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](building-the-samples.md)."},{"pos":[5799,5968],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](running-the-samples.md)."},{"pos":[5972,6103],"content":"[!IMPORTANT]\nThe samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,129],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[6145,6455],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[6456,6506]}]}