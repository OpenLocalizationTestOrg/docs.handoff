{"content":"---\ntitle: \"Metadata Publishing Behavior\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"service behaviors, metadata publishing sample\"\n  - \"Metadata Publishing Behaviors Sample [Windows Communication Foundation]\"\nms.assetid: 78c13633-d026-4814-910e-1c801cffdac7\n---\n# Metadata Publishing Behavior\nThe Metadata Publishing Behavior sample demonstrates how to control the metadata publishing features of a service. To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for Windows Communication Foundation (WCF) services disables metadata publishing. This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration.  \n  \n> [!IMPORTANT]\n>  For clarity, this sample demonstrates how to create an unsecured metadata publishing endpoint. Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate. See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample that secures a metadata endpoint.  \n  \n The sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which implements the `ICalculator` service contract. In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).  \n  \n> [!NOTE]\n>  The setup procedure and build instructions for this sample are located at the end of this topic.  \n  \n For a service to expose metadata, the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> must be configured on the service. When this behavior is present, you can publish metadata by configuring an endpoint to expose the <xref:System.ServiceModel.Description.IMetadataExchange> contract as an implementation of a WS-MetadataExchange (MEX) protocol. As a convenience, this contract has been given the abbreviated configuration name of \"IMetadataExchange\". This sample uses the `mexHttpBinding`, which is a convenience standard binding that is equivalent to the `wsHttpBinding` with the security mode set to `None`. A relative address of \"mex\" is used in the endpoint, which when resolved against the services base address results in an endpoint address of `http://localhost/servicemodelsamples/service.svc/mex`. The following shows the behavior configuration:  \n  \n```xml  \n<behaviors>  \n  <serviceBehaviors>  \n    <behavior name=\"CalculatorServiceBehavior\">  \n      <!-- The serviceMetadata behavior publishes metadata through   \n           the IMetadataExchange contract. When this behavior is   \n           present, you can expose this contract through an endpoint   \n           as shown below. Setting httpGetEnabled to true publishes   \n           the service's WSDL at the <baseaddress>?wsdl, for example,  \n           http://localhost/servicemodelsamples/service.svc?wsdl -->  \n      <serviceMetadata httpGetEnabled=\"True\"/>  \n      <serviceDebug includeExceptionDetailInFaults=\"False\" />  \n    </behavior>  \n  </serviceBehaviors>  \n</behaviors>  \n```  \n  \n The following shows the MEX endpoint.  \n  \n```xml  \n<!-- the MEX endpoint is exposed at   \n     http://localhost/servicemodelsamples/service.svc/mex   \n     To expose the IMetadataExchange contract, you   \n     must enable the serviceMetadata behavior as demonstrated                           \n     previously. -->  \n<endpoint address=\"mex\"  \n          binding=\"mexHttpBinding\"  \n          contract=\"IMetadataExchange\" />  \n```  \n  \n This sample sets the <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A> property to `true`, which also exposes the service's metadata using HTTP GET. To enable an HTTP GET metadata endpoint, the service must have an HTTP base address. The query string `?wsdl` is used on the base address of the service to access the metadata. For example, to see the WSDL for the service in a Web browser you would use the address `http://localhost/servicemodelsamples/service.svc?wsdl`. Alternatively, you can use this behavior to expose metadata over HTTPS by setting <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpsGetEnabled%2A> to `true`. This requires an HTTPS base address.  \n  \n To access the service's MEX endpoint use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).  \n  \n `svcutil.exe /n:\"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples\" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs`  \n  \n This generates a client based on the service's metadata.  \n  \n To access the service's metadata using HTTP GET, point your browser to `http://localhost/servicemodelsamples/service.svc?wsdl`.  \n  \n If you remove this behavior and try to open the service you get an exception. This error occurs because without the behavior, the endpoint configured with the `IMetadataExchange` contract has no implementation.  \n  \n If you set `HttpGetEnabled` to `false`, you see the CalculatorService help page instead of seeing the service's metadata.  \n  \n### To set up, build, and run the sample  \n  \n1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n  \n2.  To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n  \n3.  To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\Behaviors\\Metadata`  \n","nodes":[{"pos":[4,264],"embed":true,"restype":"x-metadata","content":"title: \"Metadata Publishing Behavior\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"service behaviors, metadata publishing sample\"\n  - \"Metadata Publishing Behaviors Sample [Windows Communication Foundation]\"\nms.assetid: 78c13633-d026-4814-910e-1c801cffdac7","nodes":[{"content":"Metadata Publishing Behavior","nodes":[{"pos":[0,28],"content":"Metadata Publishing Behavior","nodes":[{"content":"Metadata Publishing Behavior","pos":[0,28]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[271,299],"content":"Metadata Publishing Behavior","linkify":"Metadata Publishing Behavior","nodes":[{"content":"Metadata Publishing Behavior","pos":[0,28]}]},{"content":"The Metadata Publishing Behavior sample demonstrates how to control the metadata publishing features of a service.","pos":[300,414]},{"content":"To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for Windows Communication Foundation (WCF) services disables metadata publishing.","pos":[415,601]},{"content":"This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration.","pos":[602,864]},{"pos":[872,1360],"content":"[!IMPORTANT]\n For clarity, this sample demonstrates how to create an unsecured metadata publishing endpoint. Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate. See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample that secures a metadata endpoint.","leadings":["","> "],"nodes":[{"content":"For clarity, this sample demonstrates how to create an unsecured metadata publishing endpoint. Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate. See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample that secures a metadata endpoint.","pos":[14,486],"nodes":[{"content":"For clarity, this sample demonstrates how to create an unsecured metadata publishing endpoint.","pos":[0,94]},{"content":"Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate.","pos":[95,301]},{"content":"See the <bpt id=\"p1\">[</bpt>Custom Secure Metadata Endpoint<ept id=\"p1\">](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md)</ept> sample for a sample that secures a metadata endpoint.","pos":[302,472],"source":" See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample that secures a metadata endpoint."}]}]},{"content":"The sample is based on the <bpt id=\"p1\">[</bpt>Getting Started<ept id=\"p1\">](../../../../docs/framework/wcf/samples/getting-started-sample.md)</ept>, which implements the <ph id=\"ph1\">`ICalculator`</ph> service contract.","pos":[1367,1531],"source":"The sample is based on the [Getting Started](../../../../docs/framework/wcf/samples/getting-started-sample.md), which implements the `ICalculator` service contract."},{"content":"In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).","pos":[1532,1656]},{"pos":[1664,1771],"content":"[!NOTE]\n The setup procedure and build instructions for this sample are located at the end of this topic.","leadings":["","> "],"nodes":[{"content":"The setup procedure and build instructions for this sample are located at the end of this topic.","pos":[9,105]}]},{"content":"For a service to expose metadata, the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior&gt;</ph> must be configured on the service.","pos":[1778,1913],"source":"For a service to expose metadata, the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> must be configured on the service."},{"content":"When this behavior is present, you can publish metadata by configuring an endpoint to expose the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.IMetadataExchange&gt;</ph> contract as an implementation of a WS-MetadataExchange (MEX) protocol.","pos":[1914,2138],"source":" When this behavior is present, you can publish metadata by configuring an endpoint to expose the <xref:System.ServiceModel.Description.IMetadataExchange> contract as an implementation of a WS-MetadataExchange (MEX) protocol."},{"content":"As a convenience, this contract has been given the abbreviated configuration name of \"IMetadataExchange\".","pos":[2139,2244]},{"content":"This sample uses the <ph id=\"ph1\">`mexHttpBinding`</ph>, which is a convenience standard binding that is equivalent to the <ph id=\"ph2\">`wsHttpBinding`</ph> with the security mode set to <ph id=\"ph3\">`None`</ph>.","pos":[2245,2403],"source":" This sample uses the `mexHttpBinding`, which is a convenience standard binding that is equivalent to the `wsHttpBinding` with the security mode set to `None`."},{"content":"A relative address of \"mex\" is used in the endpoint, which when resolved against the services base address results in an endpoint address of <ph id=\"ph1\">`http://localhost/servicemodelsamples/service.svc/mex`</ph>.","pos":[2404,2600],"source":" A relative address of \"mex\" is used in the endpoint, which when resolved against the services base address results in an endpoint address of `http://localhost/servicemodelsamples/service.svc/mex`."},{"content":"The following shows the behavior configuration:","pos":[2601,2648]},{"content":"The following shows the MEX endpoint.","pos":[3354,3391]},{"content":"This sample sets the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A&gt;</ph> property to <ph id=\"ph2\">`true`</ph>, which also exposes the service's metadata using HTTP GET.","pos":[3789,3968],"source":"This sample sets the <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpGetEnabled%2A> property to `true`, which also exposes the service's metadata using HTTP GET."},{"content":"To enable an HTTP GET metadata endpoint, the service must have an HTTP base address.","pos":[3969,4053]},{"content":"The query string <ph id=\"ph1\">`?wsdl`</ph> is used on the base address of the service to access the metadata.","pos":[4054,4145],"source":" The query string `?wsdl` is used on the base address of the service to access the metadata."},{"content":"For example, to see the WSDL for the service in a Web browser you would use the address <ph id=\"ph1\">`http://localhost/servicemodelsamples/service.svc?wsdl`</ph>.","pos":[4146,4290],"source":" For example, to see the WSDL for the service in a Web browser you would use the address `http://localhost/servicemodelsamples/service.svc?wsdl`."},{"content":"Alternatively, you can use this behavior to expose metadata over HTTPS by setting <ph id=\"ph1\">&lt;xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpsGetEnabled%2A&gt;</ph> to <ph id=\"ph2\">`true`</ph>.","pos":[4291,4465],"source":" Alternatively, you can use this behavior to expose metadata over HTTPS by setting <xref:System.ServiceModel.Description.ServiceMetadataBehavior.HttpsGetEnabled%2A> to `true`."},{"content":"This requires an HTTPS base address.","pos":[4466,4502]},{"pos":[4509,4687],"content":"To access the service's MEX endpoint use the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept>.","source":"To access the service's MEX endpoint use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)."},{"content":"This generates a client based on the service's metadata.","pos":[4865,4921]},{"pos":[4928,5055],"content":"To access the service's metadata using HTTP GET, point your browser to <ph id=\"ph1\">`http://localhost/servicemodelsamples/service.svc?wsdl`</ph>.","source":"To access the service's metadata using HTTP GET, point your browser to `http://localhost/servicemodelsamples/service.svc?wsdl`."},{"content":"If you remove this behavior and try to open the service you get an exception.","pos":[5062,5139]},{"content":"This error occurs because without the behavior, the endpoint configured with the <ph id=\"ph1\">`IMetadataExchange`</ph> contract has no implementation.","pos":[5140,5272],"source":" This error occurs because without the behavior, the endpoint configured with the `IMetadataExchange` contract has no implementation."},{"pos":[5279,5400],"content":"If you set <ph id=\"ph1\">`HttpGetEnabled`</ph> to <ph id=\"ph2\">`false`</ph>, you see the CalculatorService help page instead of seeing the service's metadata.","source":"If you set `HttpGetEnabled` to `false`, you see the CalculatorService help page instead of seeing the service's metadata."},{"pos":[5410,5446],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[5456,5655],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[5665,5874],"content":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[5884,6092],"content":"To run the sample in a single- or cross-machine configuration, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single- or cross-machine configuration, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[6100,6232],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":"The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[14,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[0,53]},{"content":"Check for the following (default) directory before continuing.","pos":[54,116]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all Windows Communication Foundation (WCF) and <ph id=\"ph1\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[6286,6596],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[6597,6647]}]}