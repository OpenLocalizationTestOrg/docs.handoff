{"content":"---\ntitle: \"How to: Serialize and Deserialize JSON Data | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 88abc1fb-8196-4ee3-a23b-c6934144d1dd\ncaps.latest.revision: 13\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Serialize and Deserialize JSON Data\nJSON (JavaScript Object Notation) is an efficient data encoding format that enables fast exchanges of small amounts of data between client browsers and AJAX-enabled Web services.  \n  \n This topic demonstrates how to serialize .NET type objects into JSON-encoded data and then deserialize data in the JSON format back into instances of .NET types using the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>. This example uses a data contract to demonstrate serialization and deserialization of a user-defined `Person` type.  \n  \n Normally, JSON serialization and deserialization is handled automatically by [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] when you use data contract types in service operations that are exposed over AJAX-enabled endpoints. However, in some cases you may need to work with JSON data directly - this is the scenario that this topic demonstrates.  \n  \n> [!NOTE]\n>  If an error occurs during serialization of an outgoing reply on the server or the reply operation throws an exception for some other reason, it may not get returned to the client as a fault.  \n  \n This topic is based on the [JSON Serialization](../../../../docs/framework/wcf/samples/json-serialization.md) sample.  \n  \n### To define the data contract for a Person  \n  \n1.  Define the data contract for `Person` by attaching the <xref:System.Runtime.Serialization.DataContractAttribute> to the class and <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to the members you want to serialize. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] data contracts, see [Designing Service Contracts](../../../../docs/framework/wcf/designing-service-contracts.md).  \n  \n    ```  \n    [DataContract]  \n        internal class Person  \n        {  \n            [DataMember]  \n            internal string name;  \n  \n            [DataMember]  \n            internal int age;  \n        }  \n    ```  \n  \n### To serialize an instance of type Person to JSON  \n  \n1.  Create an instance of the `Person` type.  \n  \n    ```  \n    Person p = new Person();  \n    p.name = \"John\";  \n    p.age = 42;  \n    ```  \n  \n2.  Serialize the `Person` object to a memory stream using the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>.  \n  \n    ```  \n    MemoryStream stream1 = new MemoryStream();  \n    DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Person));  \n    ```  \n  \n3.  Use the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer.WriteObject%2A> method to write JSON data to the stream.  \n  \n    ```  \n    ser.WriteObject(stream1, p);  \n    ```  \n  \n4.  Show the JSON output.  \n  \n    ```  \n    stream1.Position = 0;  \n    StreamReader sr = new StreamReader(stream1);  \n    Console.Write(\"JSON form of Person object: \");  \n    Console.WriteLine(sr.ReadToEnd());  \n    ```  \n  \n### To deserialize an instance of type Person from JSON  \n  \n1.  Deserialize the JSON-encoded data into a new instance of `Person` by using the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer.ReadObject%2A> method of the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>.  \n  \n    ```  \n    stream1.Position = 0;  \n    Person p2 = (Person)ser.ReadObject(stream1);  \n    ```  \n  \n2.  Show the results.  \n  \n    ```  \n    Console.Write(\"Deserialized back, got name=\");  \n    Console.Write(p2.name);  \n    Console.Write(\", age=\");  \n    Console.WriteLine(p2.age);  \n    ```  \n  \n## Example  \n  \n```  \n// Create a User object and serialize it to a JSON stream.  \npublic static string WriteFromObject()  \n{  \n    //Create User object.  \n    User user = new User(\"Bob\", 42);  \n  \n    //Create a stream to serialize the object to.  \n    MemoryStream ms = new MemoryStream();  \n  \n    // Serializer the User object to the stream.  \n    DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(User));  \n    ser.WriteObject(ms, user);  \n    byte[] json = ms.ToArray();  \n    ms.Close();  \n    return Encoding.UTF8.GetString(json, 0, json.Length);  \n  \n}  \n  \n// Deserialize a JSON stream to a User object.  \npublic static User ReadToObject(string json)  \n{  \n    User deserializedUser = new User();  \n    MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));  \n    DataContractJsonSerializer ser = new DataContractJsonSerializer(deserializedUser.GetType());  \n    deserializedUser = ser.ReadObject(ms) as User;  \n    ms.Close();  \n    return deserializedUser;  \n}  \n  \n```  \n  \n> [!NOTE]\n>  The JSON serializer throws a serialization exception for data contracts that have multiple members with the same name, as shown in the following sample code.  \n  \n```  \n[DataContract]  \npublic class TestDuplicateDataBase  \n{  \n    [DataMember]  \n    public int field1 = 123;  \n}  \n[DataContract]  \npublic class TestDuplicateDataDerived : TestDuplicateDataBase  \n{  \n    [DataMember]  \n    public new int field1 = 999;  \n}  \n```  \n  \n## See Also  \n [Stand-Alone JSON Serialization](../../../../docs/framework/wcf/feature-details/stand-alone-json-serialization.md)   \n [Support for JSON and Other Data Transfer Formats](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md)","nodes":[{"pos":[12,72],"content":"How to: Serialize and Deserialize JSON Data | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Serialize and Deserialize JSON Data | Microsoft Docs","pos":[0,60]}]},{"pos":[371,414],"content":"How to: Serialize and Deserialize JSON Data","linkify":"How to: Serialize and Deserialize JSON Data","nodes":[{"content":"How to: Serialize and Deserialize JSON Data","pos":[0,43]}]},{"content":"JSON (JavaScript Object Notation) is an efficient data encoding format that enables fast exchanges of small amounts of data between client browsers and AJAX-enabled Web services.","pos":[415,593]},{"content":"This topic demonstrates how to serialize .NET type objects into JSON-encoded data and then deserialize data in the JSON format back into instances of .NET types using the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph>.","pos":[600,839],"source":"This topic demonstrates how to serialize .NET type objects into JSON-encoded data and then deserialize data in the JSON format back into instances of .NET types using the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>."},{"content":"This example uses a data contract to demonstrate serialization and deserialization of a user-defined <ph id=\"ph1\">`Person`</ph> type.","pos":[840,955],"source":" This example uses a data contract to demonstrate serialization and deserialization of a user-defined `Person` type."},{"content":"Normally, JSON serialization and deserialization is handled automatically by <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> when you use data contract types in service operations that are exposed over AJAX-enabled endpoints.","pos":[962,1195],"source":"Normally, JSON serialization and deserialization is handled automatically by [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] when you use data contract types in service operations that are exposed over AJAX-enabled endpoints."},{"content":"However, in some cases you may need to work with JSON data directly - this is the scenario that this topic demonstrates.","pos":[1196,1316]},{"pos":[1324,1525],"content":"[!NOTE]\n If an error occurs during serialization of an outgoing reply on the server or the reply operation throws an exception for some other reason, it may not get returned to the client as a fault.","leadings":["","> "],"nodes":[{"content":"If an error occurs during serialization of an outgoing reply on the server or the reply operation throws an exception for some other reason, it may not get returned to the client as a fault.","pos":[9,199]}]},{"pos":[1532,1649],"content":"This topic is based on the <bpt id=\"p1\">[</bpt>JSON Serialization<ept id=\"p1\">](../../../../docs/framework/wcf/samples/json-serialization.md)</ept> sample.","source":"This topic is based on the [JSON Serialization](../../../../docs/framework/wcf/samples/json-serialization.md) sample."},{"pos":[1659,1699],"content":"To define the data contract for a Person","linkify":"To define the data contract for a Person","nodes":[{"content":"To define the data contract for a Person","pos":[0,40]}]},{"content":"Define the data contract for <ph id=\"ph1\">`Person`</ph> by attaching the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> to the class and <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.DataMemberAttribute&gt;</ph> attribute to the members you want to serialize.","pos":[1709,1942],"source":"Define the data contract for `Person` by attaching the <xref:System.Runtime.Serialization.DataContractAttribute> to the class and <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to the members you want to serialize."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> data contracts, see <bpt id=\"p1\">[</bpt>Designing Service Contracts<ept id=\"p1\">](../../../../docs/framework/wcf/designing-service-contracts.md)</ept>.","pos":[1943,2112],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] data contracts, see [Designing Service Contracts](../../../../docs/framework/wcf/designing-service-contracts.md)."},{"pos":[2347,2394],"content":"To serialize an instance of type Person to JSON","linkify":"To serialize an instance of type Person to JSON","nodes":[{"content":"To serialize an instance of type Person to JSON","pos":[0,47]}]},{"pos":[2404,2444],"content":"Create an instance of the <ph id=\"ph1\">`Person`</ph> type.","source":"Create an instance of the `Person` type."},{"pos":[2549,2676],"content":"Serialize the <ph id=\"ph1\">`Person`</ph> object to a memory stream using the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph>.","source":"Serialize the `Person` object to a memory stream using the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>."},{"content":"Use the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer.WriteObject%2A&gt;</ph> method to write JSON data to the stream.","pos":[2845,2976],"source":"Use the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer.WriteObject%2A> method to write JSON data to the stream."},{"content":"Show the JSON output.","pos":[3044,3065]},{"pos":[3271,3322],"content":"To deserialize an instance of type Person from JSON","linkify":"To deserialize an instance of type Person from JSON","nodes":[{"content":"To deserialize an instance of type Person from JSON","pos":[0,51]}]},{"pos":[3332,3575],"content":"Deserialize the JSON-encoded data into a new instance of <ph id=\"ph1\">`Person`</ph> by using the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer.ReadObject%2A&gt;</ph> method of the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.Json.DataContractJsonSerializer&gt;</ph>.","source":"Deserialize the JSON-encoded data into a new instance of `Person` by using the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer.ReadObject%2A> method of the <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer>."},{"content":"Show the results.","pos":[3687,3704]},{"pos":[3883,3890],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4901,5069],"content":"[!NOTE]\n The JSON serializer throws a serialization exception for data contracts that have multiple members with the same name, as shown in the following sample code.","leadings":["","> "],"nodes":[{"content":"The JSON serializer throws a serialization exception for data contracts that have multiple members with the same name, as shown in the following sample code.","pos":[9,166]}]},{"pos":[5348,5356],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Stand-Alone JSON Serialization<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/stand-alone-json-serialization.md)</ept><ph id=\"ph1\"> </ph>","pos":[5360,5475],"source":"[Stand-Alone JSON Serialization](../../../../docs/framework/wcf/feature-details/stand-alone-json-serialization.md) "},{"content":"<bpt id=\"p1\"> [</bpt>Support for JSON and Other Data Transfer Formats<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md)</ept>","pos":[5478,5629],"source":" [Support for JSON and Other Data Transfer Formats](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md)"}]}