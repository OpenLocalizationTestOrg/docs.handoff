{"content":"---\ntitle: \"How to: Obtain Stores for Isolated Storage\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\n  - \"cpp\"\nhelpviewer_keywords: \n  - \"stores, obtaining\"\n  - \"storing data using isolated storage, obtaining stores\"\n  - \"isolated storage, obtaining stores\"\n  - \"data stores, obtaining\"\n  - \"data storage using isolated storage, obtaining stores\"\nms.assetid: fcb6b178-d526-47c4-b029-e946f880f9db\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# How to: Obtain Stores for Isolated Storage\nAn isolated store exposes a virtual file system within a data compartment. The <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class supplies a number of methods for interacting with an isolated store. To create and retrieve stores, <xref:System.IO.IsolatedStorage.IsolatedStorageFile> provides three static methods:  \n  \n-   <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A> returns storage that is isolated by user and assembly.  \n  \n-   <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A> returns storage that is isolated by domain and assembly.  \n  \n     Both methods retrieve a store that belongs to the code from which they are called.  \n  \n-   The static method <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> returns an isolated store that is specified by passing in a combination of scope parameters.  \n  \n The following code returns a store that is isolated by user, assembly, and domain.  \n  \n [!code-cpp[Conceptual.IsolatedStorage#6](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.isolatedstorage/cpp/source6.cpp#6)]\n [!code-csharp[Conceptual.IsolatedStorage#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.isolatedstorage/cs/source6.cs#6)]\n [!code-vb[Conceptual.IsolatedStorage#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.isolatedstorage/vb/source6.vb#6)]  \n  \n You can use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method to specify that a store should roam with a roaming user profile. For details on how to set this up, see [Types of Isolation](../../../docs/standard/io/types-of-isolation.md).  \n  \n Isolated stores obtained from within different assemblies are, by default, different stores. You can access the store of a different assembly or domain by passing in the assembly or domain evidence in the parameters of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method. This requires permission to access isolated storage by application domain identity. For more information, see the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method overloads.  \n  \n The <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A>, and <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> methods return an <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object. To help you decide which isolation type is most appropriate for your situation, see [Types of Isolation](../../../docs/standard/io/types-of-isolation.md). When you have an isolated storage file object, you can use the isolated storage methods to read, write, create, and delete files and directories.  \n  \n There is no mechanism that prevents code from passing an <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object to code that does not have sufficient access to get the store itself. Domain and assembly identities and isolated storage permissions are checked only when a reference to an <xref:System.IO.IsolatedStorage.IsolatedStorage> object is obtained, typically in the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A>, or <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method. Protecting references to <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objects is, therefore, the responsibility of the code that uses these references.  \n  \n## Example  \n The following code provides a simple example of a class obtaining a store that is isolated by user and assembly. The code can be changed to retrieve a store that is isolated by user, domain, and assembly by adding <xref:System.IO.IsolatedStorage.IsolatedStorageScope.Domain?displayProperty=nameWithType> to the arguments that the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method passes.  \n  \n After you run the code, you can confirm that a store was created by typing **StoreAdm /LIST** at the command line. This runs the [Isolated Storage tool (Storeadm.exe)](../../../docs/framework/tools/storeadm-exe-isolated-storage-tool.md) and lists all the current isolated stores for the user.  \n  \n [!code-cpp[Conceptual.IsolatedStorage#7](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.isolatedstorage/cpp/source6.cpp#7)]\n [!code-csharp[Conceptual.IsolatedStorage#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.isolatedstorage/cs/source6.cs#7)]\n [!code-vb[Conceptual.IsolatedStorage#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.isolatedstorage/vb/source6.vb#7)]  \n  \n## See also\n\n- <xref:System.IO.IsolatedStorage.IsolatedStorageFile>\n- <xref:System.IO.IsolatedStorage.IsolatedStorageScope>\n- [Isolated Storage](../../../docs/standard/io/isolated-storage.md)\n- [Types of Isolation](../../../docs/standard/io/types-of-isolation.md)\n- [Assemblies in the Common Language Runtime](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)\n","nodes":[{"pos":[4,474],"embed":true,"restype":"x-metadata","content":"title: \"How to: Obtain Stores for Isolated Storage\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\n  - \"cpp\"\nhelpviewer_keywords: \n  - \"stores, obtaining\"\n  - \"storing data using isolated storage, obtaining stores\"\n  - \"isolated storage, obtaining stores\"\n  - \"data stores, obtaining\"\n  - \"data storage using isolated storage, obtaining stores\"\nms.assetid: fcb6b178-d526-47c4-b029-e946f880f9db\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"How to: Obtain Stores for Isolated Storage","nodes":[{"pos":[0,42],"content":"How to: Obtain Stores for Isolated Storage","nodes":[{"content":"How to: Obtain Stores for Isolated Storage","pos":[0,42]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[481,523],"content":"How to: Obtain Stores for Isolated Storage","linkify":"How to: Obtain Stores for Isolated Storage","nodes":[{"content":"How to: Obtain Stores for Isolated Storage","pos":[0,42]}]},{"content":"An isolated store exposes a virtual file system within a data compartment.","pos":[524,598]},{"content":"The <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> class supplies a number of methods for interacting with an isolated store.","pos":[599,730],"source":" The <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class supplies a number of methods for interacting with an isolated store."},{"content":"To create and retrieve stores, <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> provides three static methods:","pos":[731,845],"source":" To create and retrieve stores, <xref:System.IO.IsolatedStorage.IsolatedStorageFile> provides three static methods:"},{"pos":[855,989],"content":"<ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A&gt;</ph> returns storage that is isolated by user and assembly.","source":"<xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A> returns storage that is isolated by user and assembly."},{"pos":[999,1133],"content":"<ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A&gt;</ph> returns storage that is isolated by domain and assembly.","source":"<xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A> returns storage that is isolated by domain and assembly."},{"content":"Both methods retrieve a store that belongs to the code from which they are called.","pos":[1144,1226]},{"pos":[1236,1411],"content":"The static method <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> returns an isolated store that is specified by passing in a combination of scope parameters.","source":"The static method <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> returns an isolated store that is specified by passing in a combination of scope parameters."},{"content":"The following code returns a store that is isolated by user, assembly, and domain.","pos":[1418,1500]},{"pos":[1507,1919],"content":"[!code-cpp[Conceptual.IsolatedStorage#6](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.isolatedstorage/cpp/source6.cpp#6)]\n[!code-csharp[Conceptual.IsolatedStorage#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.isolatedstorage/cs/source6.cs#6)]\n[!code-vb[Conceptual.IsolatedStorage#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.isolatedstorage/vb/source6.vb#6)]","leadings":[""," "," "],"nodes":[]},{"content":"You can use the <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> method to specify that a store should roam with a roaming user profile.","pos":[1926,2078],"source":"You can use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method to specify that a store should roam with a roaming user profile."},{"content":"For details on how to set this up, see <bpt id=\"p1\">[</bpt>Types of Isolation<ept id=\"p1\">](../../../docs/standard/io/types-of-isolation.md)</ept>.","pos":[2079,2188],"source":" For details on how to set this up, see [Types of Isolation](../../../docs/standard/io/types-of-isolation.md)."},{"content":"Isolated stores obtained from within different assemblies are, by default, different stores.","pos":[2195,2287]},{"content":"You can access the store of a different assembly or domain by passing in the assembly or domain evidence in the parameters of the <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> method.","pos":[2288,2490],"source":" You can access the store of a different assembly or domain by passing in the assembly or domain evidence in the parameters of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method."},{"content":"This requires permission to access isolated storage by application domain identity.","pos":[2491,2574]},{"content":"For more information, see the <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> method overloads.","pos":[2575,2687],"source":" For more information, see the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method overloads."},{"content":"The <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> methods return an <ph id=\"ph4\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> object.","pos":[2694,3005],"source":"The <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A>, and <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> methods return an <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object."},{"content":"To help you decide which isolation type is most appropriate for your situation, see <bpt id=\"p1\">[</bpt>Types of Isolation<ept id=\"p1\">](../../../docs/standard/io/types-of-isolation.md)</ept>.","pos":[3006,3160],"source":" To help you decide which isolation type is most appropriate for your situation, see [Types of Isolation](../../../docs/standard/io/types-of-isolation.md)."},{"content":"When you have an isolated storage file object, you can use the isolated storage methods to read, write, create, and delete files and directories.","pos":[3161,3306]},{"content":"There is no mechanism that prevents code from passing an <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> object to code that does not have sufficient access to get the store itself.","pos":[3313,3499],"source":"There is no mechanism that prevents code from passing an <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object to code that does not have sufficient access to get the store itself."},{"content":"Domain and assembly identities and isolated storage permissions are checked only when a reference to an <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorage&gt;</ph> object is obtained, typically in the <ph id=\"ph2\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A&gt;</ph>, <ph id=\"ph3\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A&gt;</ph>, or <ph id=\"ph4\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> method.","pos":[3500,3925],"source":" Domain and assembly identities and isolated storage permissions are checked only when a reference to an <xref:System.IO.IsolatedStorage.IsolatedStorage> object is obtained, typically in the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForAssembly%2A>, <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForDomain%2A>, or <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method."},{"content":"Protecting references to <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile&gt;</ph> objects is, therefore, the responsibility of the code that uses these references.","pos":[3926,4085],"source":" Protecting references to <xref:System.IO.IsolatedStorage.IsolatedStorageFile> objects is, therefore, the responsibility of the code that uses these references."},{"pos":[4094,4101],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following code provides a simple example of a class obtaining a store that is isolated by user and assembly.","pos":[4105,4217]},{"content":"The code can be changed to retrieve a store that is isolated by user, domain, and assembly by adding <ph id=\"ph1\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageScope.Domain?displayProperty=nameWithType&gt;</ph> to the arguments that the <ph id=\"ph2\">&lt;xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A&gt;</ph> method passes.","pos":[4218,4514],"source":" The code can be changed to retrieve a store that is isolated by user, domain, and assembly by adding <xref:System.IO.IsolatedStorage.IsolatedStorageScope.Domain?displayProperty=nameWithType> to the arguments that the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetStore%2A> method passes."},{"content":"After you run the code, you can confirm that a store was created by typing <bpt id=\"p1\">**</bpt>StoreAdm /LIST<ept id=\"p1\">**</ept> at the command line.","pos":[4521,4635],"source":"After you run the code, you can confirm that a store was created by typing **StoreAdm /LIST** at the command line."},{"content":"This runs the <bpt id=\"p1\">[</bpt>Isolated Storage tool (Storeadm.exe)<ept id=\"p1\">](../../../docs/framework/tools/storeadm-exe-isolated-storage-tool.md)</ept> and lists all the current isolated stores for the user.","pos":[4636,4813],"source":" This runs the [Isolated Storage tool (Storeadm.exe)](../../../docs/framework/tools/storeadm-exe-isolated-storage-tool.md) and lists all the current isolated stores for the user."},{"pos":[5241,5249],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5364,5429],"content":"<bpt id=\"p1\">[</bpt>Isolated Storage<ept id=\"p1\">](../../../docs/standard/io/isolated-storage.md)</ept>","source":"[Isolated Storage](../../../docs/standard/io/isolated-storage.md)"},{"pos":[5432,5501],"content":"<bpt id=\"p1\">[</bpt>Types of Isolation<ept id=\"p1\">](../../../docs/standard/io/types-of-isolation.md)</ept>","source":"[Types of Isolation](../../../docs/standard/io/types-of-isolation.md)"},{"pos":[5504,5629],"content":"<bpt id=\"p1\">[</bpt>Assemblies in the Common Language Runtime<ept id=\"p1\">](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)</ept>","source":"[Assemblies in the Common Language Runtime](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)"}]}