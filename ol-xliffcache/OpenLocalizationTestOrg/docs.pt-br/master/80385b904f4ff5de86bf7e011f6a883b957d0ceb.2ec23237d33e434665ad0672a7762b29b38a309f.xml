{"content":"---\ntitle: \"Creating an Ink Input Control\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"ink strokes [WPF], managing\"\n  - \"managing ink strokes [WPF]\"\n  - \"ink input control [WPF]\"\n  - \"input from mouse [WPF], accepting\"\n  - \"mouse input [WPF], accepting\"\n  - \"ink [WPF], rendering\"\n  - \"ink strokes [WPF], collecting\"\n  - \"rendering ink [WPF]\"\n  - \"collecting ink strokes [WPF]\"\n  - \"DynamicRenderer objects [WPF]\"\n  - \"StylusPlugIn objects [WPF]\"\nms.assetid: c31f3a67-cb3f-4ded-af9e-ed21f6575b26\n---\n# Creating an Ink Input Control\nYou can create a custom control that dynamically and statically renders ink. That is, render ink as a user draws a stroke, causing the ink to appear to \"flow\" from the tablet pen, and display ink after it is added to the control, either via the tablet pen, pasted from the Clipboard, or loaded from a file. To dynamically render ink, your control must use a <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer>. To statically render ink, you must override the stylus event methods (<xref:System.Windows.UIElement.OnStylusDown%2A>, <xref:System.Windows.UIElement.OnStylusMove%2A>, and <xref:System.Windows.UIElement.OnStylusUp%2A>) to collect <xref:System.Windows.Input.StylusPoint> data, create strokes, and add them to an <xref:System.Windows.Controls.InkPresenter> (which renders the ink on the control).  \n  \n This topic contains the following subsections:  \n  \n-   [How to: Collect Stylus Point Data and Create Ink Strokes](#CollectingStylusPointDataAndCreatingInkStrokes)  \n  \n-   [How to: Enable Your Control to Accept Input from the Mouse](#EnablingYourControlToAcceptInputTromTheMouse)  \n  \n-   [Putting it together](#PuttingItTogether)  \n  \n-   [Using Additional Plug-ins and DynamicRenderers](#UsingAdditionalPluginsAndDynamicRenderers)  \n  \n-   [Conclusion](#AdvancedInkHandling_Conclusion)  \n  \n<a name=\"CollectingStylusPointDataAndCreatingInkStrokes\"></a>   \n## How to: Collect Stylus Point Data and Create Ink Strokes  \n To create a control that collects and manages ink strokes do the following:  \n  \n1.  Derive a class from <xref:System.Windows.Controls.Control> or one of the classes derived from <xref:System.Windows.Controls.Control>, such as <xref:System.Windows.Controls.Label>.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#20](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#20)]  \n    [!code-csharp[AdvancedInkTopicsSamples#14](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#14)]  \n    [!code-csharp[AdvancedInkTopicsSamples#15](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#15)]  \n  \n2.  Add an <xref:System.Windows.Controls.InkPresenter> to the class and set the <xref:System.Windows.Controls.ContentControl.Content%2A> property to the new <xref:System.Windows.Controls.InkPresenter>.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#16](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#16)]  \n  \n3.  Attach the <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer.RootVisual%2A> of the <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> to the <xref:System.Windows.Controls.InkPresenter> by calling the <xref:System.Windows.Controls.InkPresenter.AttachVisuals%2A> method, and add the <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> to the <xref:System.Windows.UIElement.StylusPlugIns%2A> collection. This allows the <xref:System.Windows.Controls.InkPresenter> to display the ink as the stylus point data is collected by your control.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#17](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#17)]  \n    [!code-csharp[AdvancedInkTopicsSamples#18](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#18)]  \n  \n4.  Override the <xref:System.Windows.UIElement.OnStylusDown%2A> method.  In this method, capture the stylus with a call to <xref:System.Windows.Input.Stylus.Capture%2A>. By capturing the stylus, your control will to continue to receive <xref:System.Windows.UIElement.StylusMove> and <xref:System.Windows.UIElement.StylusUp> events even if the stylus leaves the control's boundaries. This is not strictly mandatory, but almost always desired for a good user experience. Create a new <xref:System.Windows.Input.StylusPointCollection> to gather <xref:System.Windows.Input.StylusPoint> data. Finally, add the initial set of <xref:System.Windows.Input.StylusPoint> data to the <xref:System.Windows.Input.StylusPointCollection>.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#7](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#7)]  \n  \n5.  Override the <xref:System.Windows.UIElement.OnStylusMove%2A> method and add the <xref:System.Windows.Input.StylusPoint> data to the <xref:System.Windows.Input.StylusPointCollection> object that you created earlier.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#8](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#8)]  \n  \n6.  Override the <xref:System.Windows.UIElement.OnStylusUp%2A> method and create a new <xref:System.Windows.Ink.Stroke> with the <xref:System.Windows.Input.StylusPointCollection> data. Add the new <xref:System.Windows.Ink.Stroke> you created to the <xref:System.Windows.Controls.InkPresenter.Strokes%2A> collection of the <xref:System.Windows.Controls.InkPresenter> and release stylus capture.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#10](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#10)]  \n  \n<a name=\"EnablingYourControlToAcceptInputTromTheMouse\"></a>   \n## How to: Enable Your Control to Accept Input from the Mouse  \n If you add the preceding control to your application, run it, and use the mouse as an input device, you will notice that the strokes are not persisted. To persist the strokes when the mouse is used as the input device do the following:  \n  \n1.  Override the <xref:System.Windows.UIElement.OnMouseLeftButtonDown%2A> and create a new <xref:System.Windows.Input.StylusPointCollection> Get the position of the mouse when the event occurred and create a <xref:System.Windows.Input.StylusPoint> using the point data and add the <xref:System.Windows.Input.StylusPoint> to the <xref:System.Windows.Input.StylusPointCollection>.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#11](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#11)]  \n  \n2.  Override the <xref:System.Windows.UIElement.OnMouseMove%2A> method. Get the position of the mouse when the event occurred and create a <xref:System.Windows.Input.StylusPoint> using the point data.  Add the <xref:System.Windows.Input.StylusPoint> to the <xref:System.Windows.Input.StylusPointCollection> object that you created earlier.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#12](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#12)]  \n  \n3.  Override the <xref:System.Windows.UIElement.OnMouseLeftButtonUp%2A> method.  Create a new <xref:System.Windows.Ink.Stroke> with the <xref:System.Windows.Input.StylusPointCollection> data, and add the new <xref:System.Windows.Ink.Stroke> you created to the <xref:System.Windows.Controls.InkPresenter.Strokes%2A> collection of the <xref:System.Windows.Controls.InkPresenter>.  \n  \n     [!code-csharp[AdvancedInkTopicsSamples#13](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#13)]  \n  \n<a name=\"PuttingItTogether\"></a>   \n## Putting it together  \n The following example is a custom control that collects ink when the user uses either the mouse or the pen.  \n  \n [!code-csharp[AdvancedInkTopicsSamples#20](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#20)]  \n[!code-csharp[AdvancedInkTopicsSamples#6](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#6)]  \n  \n<a name=\"UsingAdditionalPluginsAndDynamicRenderers\"></a>   \n## Using Additional Plug-ins and DynamicRenderers  \n Like the InkCanvas, your custom control can have custom <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> and additional <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> objects. Add these to the <xref:System.Windows.UIElement.StylusPlugIns%2A> collection. The order of the <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> objects in the <xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection> affects the appearance of the ink when it is rendered. Suppose you have a <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> called `dynamicRenderer` and a custom <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> called `translatePlugin` that offsets the ink from the tablet pen. If `translatePlugin` is the first <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> in the <xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection>, and `dynamicRenderer` is the second, the ink that \"flows\" will be offset as the user moves the pen. If `dynamicRenderer` is first, and `translatePlugin` is second, the ink will not be offset until the user lifts the pen.  \n  \n<a name=\"AdvancedInkHandling_Conclusion\"></a>   \n## Conclusion  \n You can create a control that collects and renders ink by overriding the stylus event methods. By creating your own control, deriving your own <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> classes, and inserting them the into <xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection>, you can implement virtually any behavior imaginable with digital ink. You have access to the <xref:System.Windows.Input.StylusPoint> data as it is generated, giving you the opportunity to  customize <xref:System.Windows.Input.Stylus> input and render it on the screen as appropriate for your application. Because you have such low-level access to the <xref:System.Windows.Input.StylusPoint> data, you can implement ink collection and render it with optimal performance for your application.  \n  \n## See also\n\n- [Advanced Ink Handling](advanced-ink-handling.md)\n- [Accessing and Manipulating Pen Input](https://go.microsoft.com/fwlink/?LinkId=50752&clcid=0x409)\n","nodes":[{"pos":[4,500],"embed":true,"restype":"x-metadata","content":"title: \"Creating an Ink Input Control\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"ink strokes [WPF], managing\"\n  - \"managing ink strokes [WPF]\"\n  - \"ink input control [WPF]\"\n  - \"input from mouse [WPF], accepting\"\n  - \"mouse input [WPF], accepting\"\n  - \"ink [WPF], rendering\"\n  - \"ink strokes [WPF], collecting\"\n  - \"rendering ink [WPF]\"\n  - \"collecting ink strokes [WPF]\"\n  - \"DynamicRenderer objects [WPF]\"\n  - \"StylusPlugIn objects [WPF]\"\nms.assetid: c31f3a67-cb3f-4ded-af9e-ed21f6575b26","nodes":[{"content":"Creating an Ink Input Control","nodes":[{"pos":[0,29],"content":"Creating an Ink Input Control","nodes":[{"content":"Creating an Ink Input Control","pos":[0,29]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[507,536],"content":"Creating an Ink Input Control","linkify":"Creating an Ink Input Control","nodes":[{"content":"Creating an Ink Input Control","pos":[0,29]}]},{"content":"You can create a custom control that dynamically and statically renders ink.","pos":[537,613]},{"content":"That is, render ink as a user draws a stroke, causing the ink to appear to \"flow\" from the tablet pen, and display ink after it is added to the control, either via the tablet pen, pasted from the Clipboard, or loaded from a file.","pos":[614,843]},{"content":"To dynamically render ink, your control must use a <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPlugIns.DynamicRenderer&gt;</ph>.","pos":[844,953],"source":" To dynamically render ink, your control must use a <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer>."},{"content":"To statically render ink, you must override the stylus event methods (<ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnStylusDown%2A&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.Windows.UIElement.OnStylusMove%2A&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.Windows.UIElement.OnStylusUp%2A&gt;</ph>) to collect <ph id=\"ph4\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> data, create strokes, and add them to an <ph id=\"ph5\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph> (which renders the ink on the control).","pos":[954,1348],"source":" To statically render ink, you must override the stylus event methods (<xref:System.Windows.UIElement.OnStylusDown%2A>, <xref:System.Windows.UIElement.OnStylusMove%2A>, and <xref:System.Windows.UIElement.OnStylusUp%2A>) to collect <xref:System.Windows.Input.StylusPoint> data, create strokes, and add them to an <xref:System.Windows.Controls.InkPresenter> (which renders the ink on the control)."},{"content":"This topic contains the following subsections:","pos":[1355,1401]},{"pos":[1411,1518],"content":"<bpt id=\"p1\">[</bpt>How to: Collect Stylus Point Data and Create Ink Strokes<ept id=\"p1\">](#CollectingStylusPointDataAndCreatingInkStrokes)</ept>","source":"[How to: Collect Stylus Point Data and Create Ink Strokes](#CollectingStylusPointDataAndCreatingInkStrokes)"},{"pos":[1528,1635],"content":"<bpt id=\"p1\">[</bpt>How to: Enable Your Control to Accept Input from the Mouse<ept id=\"p1\">](#EnablingYourControlToAcceptInputTromTheMouse)</ept>","source":"[How to: Enable Your Control to Accept Input from the Mouse](#EnablingYourControlToAcceptInputTromTheMouse)"},{"pos":[1645,1686],"content":"<bpt id=\"p1\">[</bpt>Putting it together<ept id=\"p1\">](#PuttingItTogether)</ept>","source":"[Putting it together](#PuttingItTogether)"},{"pos":[1696,1788],"content":"<bpt id=\"p1\">[</bpt>Using Additional Plug-ins and DynamicRenderers<ept id=\"p1\">](#UsingAdditionalPluginsAndDynamicRenderers)</ept>","source":"[Using Additional Plug-ins and DynamicRenderers](#UsingAdditionalPluginsAndDynamicRenderers)"},{"pos":[1798,1843],"content":"<bpt id=\"p1\">[</bpt>Conclusion<ept id=\"p1\">](#AdvancedInkHandling_Conclusion)</ept>","source":"[Conclusion](#AdvancedInkHandling_Conclusion)"},{"pos":[1917,1973],"content":"How to: Collect Stylus Point Data and Create Ink Strokes","linkify":"How to: Collect Stylus Point Data and Create Ink Strokes","nodes":[{"content":"How to: Collect Stylus Point Data and Create Ink Strokes","pos":[0,56]}]},{"content":"To create a control that collects and manages ink strokes do the following:","pos":[1977,2052]},{"pos":[2062,2241],"content":"Derive a class from <ph id=\"ph1\">&lt;xref:System.Windows.Controls.Control&gt;</ph> or one of the classes derived from <ph id=\"ph2\">&lt;xref:System.Windows.Controls.Control&gt;</ph>, such as <ph id=\"ph3\">&lt;xref:System.Windows.Controls.Label&gt;</ph>.","source":"Derive a class from <xref:System.Windows.Controls.Control> or one of the classes derived from <xref:System.Windows.Controls.Control>, such as <xref:System.Windows.Controls.Label>."},{"pos":[2252,2696],"content":"[!code-csharp[AdvancedInkTopicsSamples#20](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControl.cs#20)]  \n[!code-csharp[AdvancedInkTopicsSamples#14](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#14)]  \n[!code-csharp[AdvancedInkTopicsSamples#15](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#15)]","leadings":["","    ","    "],"nodes":[]},{"pos":[2706,2903],"content":"Add an <ph id=\"ph1\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph> to the class and set the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.ContentControl.Content%2A&gt;</ph> property to the new <ph id=\"ph3\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph>.","source":"Add an <xref:System.Windows.Controls.InkPresenter> to the class and set the <xref:System.Windows.Controls.ContentControl.Content%2A> property to the new <xref:System.Windows.Controls.InkPresenter>."},{"content":"Attach the <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPlugIns.DynamicRenderer.RootVisual%2A&gt;</ph> of the <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPlugIns.DynamicRenderer&gt;</ph> to the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph> by calling the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.InkPresenter.AttachVisuals%2A&gt;</ph> method, and add the <ph id=\"ph5\">&lt;xref:System.Windows.Input.StylusPlugIns.DynamicRenderer&gt;</ph> to the <ph id=\"ph6\">&lt;xref:System.Windows.UIElement.StylusPlugIns%2A&gt;</ph> collection.","pos":[3070,3490],"source":"Attach the <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer.RootVisual%2A> of the <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> to the <xref:System.Windows.Controls.InkPresenter> by calling the <xref:System.Windows.Controls.InkPresenter.AttachVisuals%2A> method, and add the <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> to the <xref:System.Windows.UIElement.StylusPlugIns%2A> collection."},{"content":"This allows the <ph id=\"ph1\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph> to display the ink as the stylus point data is collected by your control.","pos":[3491,3624],"source":" This allows the <xref:System.Windows.Controls.InkPresenter> to display the ink as the stylus point data is collected by your control."},{"pos":[3635,3934],"content":"[!code-csharp[AdvancedInkTopicsSamples#17](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#17)]  \n[!code-csharp[AdvancedInkTopicsSamples#18](~/samples/snippets/csharp/VS_Snippets_Wpf/AdvancedInkTopicsSamples/CSharp/StylusControlSnippets.cs#18)]","leadings":["","    "],"nodes":[]},{"content":"Override the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnStylusDown%2A&gt;</ph> method.","pos":[3944,4012],"source":"Override the <xref:System.Windows.UIElement.OnStylusDown%2A> method."},{"content":"In this method, capture the stylus with a call to <ph id=\"ph1\">&lt;xref:System.Windows.Input.Stylus.Capture%2A&gt;</ph>.","pos":[4014,4110],"source":"  In this method, capture the stylus with a call to <xref:System.Windows.Input.Stylus.Capture%2A>."},{"content":"By capturing the stylus, your control will to continue to receive <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.StylusMove&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.Windows.UIElement.StylusUp&gt;</ph> events even if the stylus leaves the control's boundaries.","pos":[4111,4323],"source":" By capturing the stylus, your control will to continue to receive <xref:System.Windows.UIElement.StylusMove> and <xref:System.Windows.UIElement.StylusUp> events even if the stylus leaves the control's boundaries."},{"content":"This is not strictly mandatory, but almost always desired for a good user experience.","pos":[4324,4409]},{"content":"Create a new <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph> to gather <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> data.","pos":[4410,4528],"source":" Create a new <xref:System.Windows.Input.StylusPointCollection> to gather <xref:System.Windows.Input.StylusPoint> data."},{"content":"Finally, add the initial set of <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> data to the <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph>.","pos":[4529,4663],"source":" Finally, add the initial set of <xref:System.Windows.Input.StylusPoint> data to the <xref:System.Windows.Input.StylusPointCollection>."},{"pos":[4820,5034],"content":"Override the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnStylusMove%2A&gt;</ph> method and add the <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> data to the <ph id=\"ph3\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph> object that you created earlier.","source":"Override the <xref:System.Windows.UIElement.OnStylusMove%2A> method and add the <xref:System.Windows.Input.StylusPoint> data to the <xref:System.Windows.Input.StylusPointCollection> object that you created earlier."},{"content":"Override the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnStylusUp%2A&gt;</ph> method and create a new <ph id=\"ph2\">&lt;xref:System.Windows.Ink.Stroke&gt;</ph> with the <ph id=\"ph3\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph> data.","pos":[5191,5371],"source":"Override the <xref:System.Windows.UIElement.OnStylusUp%2A> method and create a new <xref:System.Windows.Ink.Stroke> with the <xref:System.Windows.Input.StylusPointCollection> data."},{"content":"Add the new <ph id=\"ph1\">&lt;xref:System.Windows.Ink.Stroke&gt;</ph> you created to the <ph id=\"ph2\">&lt;xref:System.Windows.Controls.InkPresenter.Strokes%2A&gt;</ph> collection of the <ph id=\"ph3\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph> and release stylus capture.","pos":[5372,5580],"source":" Add the new <xref:System.Windows.Ink.Stroke> you created to the <xref:System.Windows.Controls.InkPresenter.Strokes%2A> collection of the <xref:System.Windows.Controls.InkPresenter> and release stylus capture."},{"pos":[5801,5859],"content":"How to: Enable Your Control to Accept Input from the Mouse","linkify":"How to: Enable Your Control to Accept Input from the Mouse","nodes":[{"content":"How to: Enable Your Control to Accept Input from the Mouse","pos":[0,58]}]},{"content":"If you add the preceding control to your application, run it, and use the mouse as an input device, you will notice that the strokes are not persisted.","pos":[5863,6014]},{"content":"To persist the strokes when the mouse is used as the input device do the following:","pos":[6015,6098]},{"pos":[6108,6482],"content":"Override the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnMouseLeftButtonDown%2A&gt;</ph> and create a new <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph> Get the position of the mouse when the event occurred and create a <ph id=\"ph3\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> using the point data and add the <ph id=\"ph4\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> to the <ph id=\"ph5\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph>.","source":"Override the <xref:System.Windows.UIElement.OnMouseLeftButtonDown%2A> and create a new <xref:System.Windows.Input.StylusPointCollection> Get the position of the mouse when the event occurred and create a <xref:System.Windows.Input.StylusPoint> using the point data and add the <xref:System.Windows.Input.StylusPoint> to the <xref:System.Windows.Input.StylusPointCollection>."},{"content":"Override the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnMouseMove%2A&gt;</ph> method.","pos":[6641,6708],"source":"Override the <xref:System.Windows.UIElement.OnMouseMove%2A> method."},{"content":"Get the position of the mouse when the event occurred and create a <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> using the point data.","pos":[6709,6837],"source":" Get the position of the mouse when the event occurred and create a <xref:System.Windows.Input.StylusPoint> using the point data."},{"content":"Add the <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> to the <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph> object that you created earlier.","pos":[6839,6976],"source":"  Add the <xref:System.Windows.Input.StylusPoint> to the <xref:System.Windows.Input.StylusPointCollection> object that you created earlier."},{"content":"Override the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.OnMouseLeftButtonUp%2A&gt;</ph> method.","pos":[7135,7210],"source":"Override the <xref:System.Windows.UIElement.OnMouseLeftButtonUp%2A> method."},{"content":"Create a new <ph id=\"ph1\">&lt;xref:System.Windows.Ink.Stroke&gt;</ph> with the <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPointCollection&gt;</ph> data, and add the new <ph id=\"ph3\">&lt;xref:System.Windows.Ink.Stroke&gt;</ph> you created to the <ph id=\"ph4\">&lt;xref:System.Windows.Controls.InkPresenter.Strokes%2A&gt;</ph> collection of the <ph id=\"ph5\">&lt;xref:System.Windows.Controls.InkPresenter&gt;</ph>.","pos":[7212,7508],"source":"  Create a new <xref:System.Windows.Ink.Stroke> with the <xref:System.Windows.Input.StylusPointCollection> data, and add the new <xref:System.Windows.Ink.Stroke> you created to the <xref:System.Windows.Controls.InkPresenter.Strokes%2A> collection of the <xref:System.Windows.Controls.InkPresenter>."},{"pos":[7702,7721],"content":"Putting it together","linkify":"Putting it together","nodes":[{"content":"Putting it together","pos":[0,19]}]},{"content":"The following example is a custom control that collects ink when the user uses either the mouse or the pen.","pos":[7725,7832]},{"pos":[8185,8231],"content":"Using Additional Plug-ins and DynamicRenderers","linkify":"Using Additional Plug-ins and DynamicRenderers","nodes":[{"content":"Using Additional Plug-ins and DynamicRenderers","pos":[0,46]}]},{"content":"Like the InkCanvas, your custom control can have custom <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugIn&gt;</ph> and additional <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPlugIns.DynamicRenderer&gt;</ph> objects.","pos":[8235,8427],"source":"Like the InkCanvas, your custom control can have custom <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> and additional <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> objects."},{"content":"Add these to the <ph id=\"ph1\">&lt;xref:System.Windows.UIElement.StylusPlugIns%2A&gt;</ph> collection.","pos":[8428,8505],"source":" Add these to the <xref:System.Windows.UIElement.StylusPlugIns%2A> collection."},{"content":"The order of the <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugIn&gt;</ph> objects in the <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection&gt;</ph> affects the appearance of the ink when it is rendered.","pos":[8506,8712],"source":" The order of the <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> objects in the <xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection> affects the appearance of the ink when it is rendered."},{"content":"Suppose you have a <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPlugIns.DynamicRenderer&gt;</ph> called <ph id=\"ph2\">`dynamicRenderer`</ph> and a custom <ph id=\"ph3\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugIn&gt;</ph> called <ph id=\"ph4\">`translatePlugin`</ph> that offsets the ink from the tablet pen.","pos":[8713,8949],"source":" Suppose you have a <xref:System.Windows.Input.StylusPlugIns.DynamicRenderer> called `dynamicRenderer` and a custom <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> called `translatePlugin` that offsets the ink from the tablet pen."},{"content":"If <ph id=\"ph1\">`translatePlugin`</ph> is the first <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugIn&gt;</ph> in the <ph id=\"ph3\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection&gt;</ph>, and <ph id=\"ph4\">`dynamicRenderer`</ph> is the second, the ink that \"flows\" will be offset as the user moves the pen.","pos":[8950,9211],"source":" If `translatePlugin` is the first <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> in the <xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection>, and `dynamicRenderer` is the second, the ink that \"flows\" will be offset as the user moves the pen."},{"content":"If <ph id=\"ph1\">`dynamicRenderer`</ph> is first, and <ph id=\"ph2\">`translatePlugin`</ph> is second, the ink will not be offset until the user lifts the pen.","pos":[9212,9332],"source":" If `dynamicRenderer` is first, and `translatePlugin` is second, the ink will not be offset until the user lifts the pen."},{"pos":[9390,9400],"content":"Conclusion","linkify":"Conclusion","nodes":[{"content":"Conclusion","pos":[0,10]}]},{"content":"You can create a control that collects and renders ink by overriding the stylus event methods.","pos":[9404,9498]},{"content":"By creating your own control, deriving your own <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugIn&gt;</ph> classes, and inserting them the into <ph id=\"ph2\">&lt;xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection&gt;</ph>, you can implement virtually any behavior imaginable with digital ink.","pos":[9499,9774],"source":" By creating your own control, deriving your own <xref:System.Windows.Input.StylusPlugIns.StylusPlugIn> classes, and inserting them the into <xref:System.Windows.Input.StylusPlugIns.StylusPlugInCollection>, you can implement virtually any behavior imaginable with digital ink."},{"content":"You have access to the <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> data as it is generated, giving you the opportunity to  customize <ph id=\"ph2\">&lt;xref:System.Windows.Input.Stylus&gt;</ph> input and render it on the screen as appropriate for your application.","pos":[9775,10009],"source":" You have access to the <xref:System.Windows.Input.StylusPoint> data as it is generated, giving you the opportunity to  customize <xref:System.Windows.Input.Stylus> input and render it on the screen as appropriate for your application."},{"content":"Because you have such low-level access to the <ph id=\"ph1\">&lt;xref:System.Windows.Input.StylusPoint&gt;</ph> data, you can implement ink collection and render it with optimal performance for your application.","pos":[10010,10195],"source":" Because you have such low-level access to the <xref:System.Windows.Input.StylusPoint> data, you can implement ink collection and render it with optimal performance for your application."},{"pos":[10204,10212],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10216,10265],"content":"<bpt id=\"p1\">[</bpt>Advanced Ink Handling<ept id=\"p1\">](advanced-ink-handling.md)</ept>","source":"[Advanced Ink Handling](advanced-ink-handling.md)"},{"pos":[10268,10365],"content":"<bpt id=\"p1\">[</bpt>Accessing and Manipulating Pen Input<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=50752&amp;clcid=0x409)</ept>","source":"[Accessing and Manipulating Pen Input](https://go.microsoft.com/fwlink/?LinkId=50752&clcid=0x409)"}]}