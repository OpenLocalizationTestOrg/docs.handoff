{"content":"---\ntitle: \"Principal and Identity Objects\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"WindowsIdentity objects\"\n  - \"GenericIdentity objects\"\n  - \"GenericPrincipal objects\"\n  - \"identity objects, about identity objects\"\n  - \"security [.NET Framework], identity objects\"\n  - \"principal objects, about principal objects\"\n  - \"security [.NET Framework], principals\"\n  - \"WindowsPrincipal objects\"\nms.assetid: aa5930ad-f3d7-40aa-b6f6-c6edcd5c64f7\nauthor: \"mairaw\"\nms.author: \"mairaw\"\n---\n# Principal and Identity Objects\nManaged code can discover the identity or the role of a principal through a <xref:System.Security.Principal.IPrincipal> object, which contains a reference to an <xref:System.Security.Principal.IIdentity> object. It might be helpful to compare identity and principal objects to familiar concepts like user and group accounts. In most network environments, user accounts represent people or programs, while group accounts represent certain categories of users and the rights they possess. Similarly, .NET Framework identity objects represent users, while roles represent memberships and security contexts. In the .NET Framework, the principal object encapsulates both an identity object and a role. .NET Framework applications grant rights to the principal based on its identity or, more commonly, its role membership.  \n  \n## Identity Objects  \n The identity object encapsulates information about the user or entity being validated. At their most basic level, identity objects contain a name and an authentication type. The name can either be a user's name or the name of a Windows account, while the authentication type can be either a supported logon protocol, such as Kerberos V5, or a custom value. The .NET Framework defines a <xref:System.Security.Principal.GenericIdentity> object that can be used for most custom logon scenarios and a more specialized <xref:System.Security.Principal.WindowsIdentity> object that can be used when you want your application to rely on Windows authentication. Additionally, you can define your own identity class that encapsulates custom user information.  \n  \n The <xref:System.Security.Principal.IIdentity> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM. All **Identity** classes implement the **IIdentity** interface. There is no required relationship between an **Identity** object and the Windows NT process token under which a thread is currently executing. However, if the **Identity** object is a **WindowsIdentity** object, the identity is assumed to represent a Windows NT security token.  \n  \n## Principal Objects  \n The principal object represents the security context under which code is running. Applications that implement role-based security grant rights based on the role associated with a principal object. Similar to identity objects, the .NET Framework provides a <xref:System.Security.Principal.GenericPrincipal> object and a <xref:System.Security.Principal.WindowsPrincipal> object. You can also define your own custom principal classes.  \n  \n The <xref:System.Security.Principal.IPrincipal> interface defines a property for accessing an associated **Identity** object as well as a method for determining whether the user identified by the **Principal** object is a member of a given role. All **Principal** classes implement the **IPrincipal** interface as well as any additional properties and methods that are necessary. For example, the common language runtime provides the **WindowsPrincipal** class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles.  \n  \n A **Principal** object is bound to a call context (<xref:System.Runtime.Remoting.Messaging.CallContext>) object within an application domain (<xref:System.AppDomain>). A default call context is always created with each new **AppDomain**, so there is always a call context available to accept the **Principal** object. When a new thread is created, a **CallContext** object is also created for the thread. The **Principal** object reference is automatically copied from the creating thread to the new thread's **CallContext**. If the runtime cannot determine which **Principal** object belongs to the creator of the thread, it follows the default policy for **Principal** and **Identity** object creation.  \n  \n A configurable application domain-specific policy defines the rules for deciding what type of **Principal** object to associate with a new application domain. Where security policy permits, the runtime can create **Principal** and **Identity** objects that reflect the operating system token associated with the current thread of execution. By default, the runtime uses **Principal** and **Identity** objects that represent unauthenticated users. The runtime does not create these default **Principal** and **Identity** objects until the code attempts to access them.  \n  \n Trusted code that creates an application domain can set the application domain policy that controls construction of the default **Principal** and **Identity** objects. This application domain-specific policy applies to all execution threads in that application domain. An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> for controlling domain policy.  \n  \n When transmitting a **Principal** object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the **Principal** object associated with the caller's context to the callee's context.  \n  \n## See also\n\n- [How to: Create a WindowsPrincipal Object](../../../docs/standard/security/how-to-create-a-windowsprincipal-object.md)\n- [How to: Create GenericPrincipal and GenericIdentity Objects](../../../docs/standard/security/how-to-create-genericprincipal-and-genericidentity-objects.md)\n- [Replacing a Principal Object](../../../docs/standard/security/replacing-a-principal-object.md)\n- [Impersonating and Reverting](../../../docs/standard/security/impersonating-and-reverting.md)\n- [Role-Based Security](../../../docs/standard/security/role-based-security.md)\n- [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md)\n","nodes":[{"pos":[4,516],"embed":true,"restype":"x-metadata","content":"title: \"Principal and Identity Objects\"\nms.date: \"03/30/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"WindowsIdentity objects\"\n  - \"GenericIdentity objects\"\n  - \"GenericPrincipal objects\"\n  - \"identity objects, about identity objects\"\n  - \"security [.NET Framework], identity objects\"\n  - \"principal objects, about principal objects\"\n  - \"security [.NET Framework], principals\"\n  - \"WindowsPrincipal objects\"\nms.assetid: aa5930ad-f3d7-40aa-b6f6-c6edcd5c64f7\nauthor: \"mairaw\"\nms.author: \"mairaw\"","nodes":[{"content":"Principal and Identity Objects","nodes":[{"pos":[0,30],"content":"Principal and Identity Objects","nodes":[{"content":"Principal and Identity Objects","pos":[0,30]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[523,553],"content":"Principal and Identity Objects","linkify":"Principal and Identity Objects","nodes":[{"content":"Principal and Identity Objects","pos":[0,30]}]},{"content":"Managed code can discover the identity or the role of a principal through a <ph id=\"ph1\">&lt;xref:System.Security.Principal.IPrincipal&gt;</ph> object, which contains a reference to an <ph id=\"ph2\">&lt;xref:System.Security.Principal.IIdentity&gt;</ph> object.","pos":[554,765],"source":"Managed code can discover the identity or the role of a principal through a <xref:System.Security.Principal.IPrincipal> object, which contains a reference to an <xref:System.Security.Principal.IIdentity> object."},{"content":"It might be helpful to compare identity and principal objects to familiar concepts like user and group accounts.","pos":[766,878]},{"content":"In most network environments, user accounts represent people or programs, while group accounts represent certain categories of users and the rights they possess.","pos":[879,1040]},{"content":"Similarly, .NET Framework identity objects represent users, while roles represent memberships and security contexts.","pos":[1041,1157]},{"content":"In the .NET Framework, the principal object encapsulates both an identity object and a role.","pos":[1158,1250]},{"content":".NET Framework applications grant rights to the principal based on its identity or, more commonly, its role membership.","pos":[1251,1370]},{"pos":[1379,1395],"content":"Identity Objects","linkify":"Identity Objects","nodes":[{"content":"Identity Objects","pos":[0,16]}]},{"content":"The identity object encapsulates information about the user or entity being validated.","pos":[1399,1485]},{"content":"At their most basic level, identity objects contain a name and an authentication type.","pos":[1486,1572]},{"content":"The name can either be a user's name or the name of a Windows account, while the authentication type can be either a supported logon protocol, such as Kerberos V5, or a custom value.","pos":[1573,1755]},{"content":"The .NET Framework defines a <ph id=\"ph1\">&lt;xref:System.Security.Principal.GenericIdentity&gt;</ph> object that can be used for most custom logon scenarios and a more specialized <ph id=\"ph2\">&lt;xref:System.Security.Principal.WindowsIdentity&gt;</ph> object that can be used when you want your application to rely on Windows authentication.","pos":[1756,2051],"source":" The .NET Framework defines a <xref:System.Security.Principal.GenericIdentity> object that can be used for most custom logon scenarios and a more specialized <xref:System.Security.Principal.WindowsIdentity> object that can be used when you want your application to rely on Windows authentication."},{"content":"Additionally, you can define your own identity class that encapsulates custom user information.","pos":[2052,2147]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Security.Principal.IIdentity&gt;</ph> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM.","pos":[2154,2307],"source":"The <xref:System.Security.Principal.IIdentity> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM."},{"content":"All <bpt id=\"p1\">**</bpt>Identity<ept id=\"p1\">**</ept> classes implement the <bpt id=\"p2\">**</bpt>IIdentity<ept id=\"p2\">**</ept> interface.","pos":[2308,2371],"source":" All **Identity** classes implement the **IIdentity** interface."},{"content":"There is no required relationship between an <bpt id=\"p1\">**</bpt>Identity<ept id=\"p1\">**</ept> object and the Windows NT process token under which a thread is currently executing.","pos":[2372,2514],"source":" There is no required relationship between an **Identity** object and the Windows NT process token under which a thread is currently executing."},{"content":"However, if the <bpt id=\"p1\">**</bpt>Identity<ept id=\"p1\">**</ept> object is a <bpt id=\"p2\">**</bpt>WindowsIdentity<ept id=\"p2\">**</ept> object, the identity is assumed to represent a Windows NT security token.","pos":[2515,2649],"source":" However, if the **Identity** object is a **WindowsIdentity** object, the identity is assumed to represent a Windows NT security token."},{"pos":[2658,2675],"content":"Principal Objects","linkify":"Principal Objects","nodes":[{"content":"Principal Objects","pos":[0,17]}]},{"content":"The principal object represents the security context under which code is running.","pos":[2679,2760]},{"content":"Applications that implement role-based security grant rights based on the role associated with a principal object.","pos":[2761,2875]},{"content":"Similar to identity objects, the .NET Framework provides a <ph id=\"ph1\">&lt;xref:System.Security.Principal.GenericPrincipal&gt;</ph> object and a <ph id=\"ph2\">&lt;xref:System.Security.Principal.WindowsPrincipal&gt;</ph> object.","pos":[2876,3055],"source":" Similar to identity objects, the .NET Framework provides a <xref:System.Security.Principal.GenericPrincipal> object and a <xref:System.Security.Principal.WindowsPrincipal> object."},{"content":"You can also define your own custom principal classes.","pos":[3056,3110]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Security.Principal.IPrincipal&gt;</ph> interface defines a property for accessing an associated <bpt id=\"p1\">**</bpt>Identity<ept id=\"p1\">**</ept> object as well as a method for determining whether the user identified by the <bpt id=\"p2\">**</bpt>Principal<ept id=\"p2\">**</ept> object is a member of a given role.","pos":[3117,3362],"source":"The <xref:System.Security.Principal.IPrincipal> interface defines a property for accessing an associated **Identity** object as well as a method for determining whether the user identified by the **Principal** object is a member of a given role."},{"content":"All <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> classes implement the <bpt id=\"p2\">**</bpt>IPrincipal<ept id=\"p2\">**</ept> interface as well as any additional properties and methods that are necessary.","pos":[3363,3496],"source":" All **Principal** classes implement the **IPrincipal** interface as well as any additional properties and methods that are necessary."},{"content":"For example, the common language runtime provides the <bpt id=\"p1\">**</bpt>WindowsPrincipal<ept id=\"p1\">**</ept> class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles.","pos":[3497,3686],"source":" For example, the common language runtime provides the **WindowsPrincipal** class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles."},{"content":"A <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object is bound to a call context (<ph id=\"ph1\">&lt;xref:System.Runtime.Remoting.Messaging.CallContext&gt;</ph>) object within an application domain (<ph id=\"ph2\">&lt;xref:System.AppDomain&gt;</ph>).","pos":[3693,3860],"source":"A **Principal** object is bound to a call context (<xref:System.Runtime.Remoting.Messaging.CallContext>) object within an application domain (<xref:System.AppDomain>)."},{"content":"A default call context is always created with each new <bpt id=\"p1\">**</bpt>AppDomain<ept id=\"p1\">**</ept>, so there is always a call context available to accept the <bpt id=\"p2\">**</bpt>Principal<ept id=\"p2\">**</ept> object.","pos":[3861,4010],"source":" A default call context is always created with each new **AppDomain**, so there is always a call context available to accept the **Principal** object."},{"content":"When a new thread is created, a <bpt id=\"p1\">**</bpt>CallContext<ept id=\"p1\">**</ept> object is also created for the thread.","pos":[4011,4097],"source":" When a new thread is created, a **CallContext** object is also created for the thread."},{"content":"The <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object reference is automatically copied from the creating thread to the new thread's <bpt id=\"p2\">**</bpt>CallContext<ept id=\"p2\">**</ept>.","pos":[4098,4218],"source":" The **Principal** object reference is automatically copied from the creating thread to the new thread's **CallContext**."},{"content":"If the runtime cannot determine which <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object belongs to the creator of the thread, it follows the default policy for <bpt id=\"p2\">**</bpt>Principal<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Identity<ept id=\"p3\">**</ept> object creation.","pos":[4219,4397],"source":" If the runtime cannot determine which **Principal** object belongs to the creator of the thread, it follows the default policy for **Principal** and **Identity** object creation."},{"content":"A configurable application domain-specific policy defines the rules for deciding what type of <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object to associate with a new application domain.","pos":[4404,4562],"source":"A configurable application domain-specific policy defines the rules for deciding what type of **Principal** object to associate with a new application domain."},{"content":"Where security policy permits, the runtime can create <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Identity<ept id=\"p2\">**</ept> objects that reflect the operating system token associated with the current thread of execution.","pos":[4563,4744],"source":" Where security policy permits, the runtime can create **Principal** and **Identity** objects that reflect the operating system token associated with the current thread of execution."},{"content":"By default, the runtime uses <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Identity<ept id=\"p2\">**</ept> objects that represent unauthenticated users.","pos":[4745,4850],"source":" By default, the runtime uses **Principal** and **Identity** objects that represent unauthenticated users."},{"content":"The runtime does not create these default <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Identity<ept id=\"p2\">**</ept> objects until the code attempts to access them.","pos":[4851,4971],"source":" The runtime does not create these default **Principal** and **Identity** objects until the code attempts to access them."},{"content":"Trusted code that creates an application domain can set the application domain policy that controls construction of the default <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Identity<ept id=\"p2\">**</ept> objects.","pos":[4978,5145],"source":"Trusted code that creates an application domain can set the application domain policy that controls construction of the default **Principal** and **Identity** objects."},{"content":"This application domain-specific policy applies to all execution threads in that application domain.","pos":[5146,5246]},{"content":"An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <ph id=\"ph1\">&lt;xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType&gt;</ph> for controlling domain policy.","pos":[5247,5487],"source":" An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> for controlling domain policy."},{"pos":[5494,5764],"content":"When transmitting a <bpt id=\"p1\">**</bpt>Principal<ept id=\"p1\">**</ept> object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the <bpt id=\"p2\">**</bpt>Principal<ept id=\"p2\">**</ept> object associated with the caller's context to the callee's context.","source":"When transmitting a **Principal** object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the **Principal** object associated with the caller's context to the callee's context."},{"pos":[5773,5781],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5785,5903],"content":"<bpt id=\"p1\">[</bpt>How to: Create a WindowsPrincipal Object<ept id=\"p1\">](../../../docs/standard/security/how-to-create-a-windowsprincipal-object.md)</ept>","source":"[How to: Create a WindowsPrincipal Object](../../../docs/standard/security/how-to-create-a-windowsprincipal-object.md)"},{"pos":[5906,6062],"content":"<bpt id=\"p1\">[</bpt>How to: Create GenericPrincipal and GenericIdentity Objects<ept id=\"p1\">](../../../docs/standard/security/how-to-create-genericprincipal-and-genericidentity-objects.md)</ept>","source":"[How to: Create GenericPrincipal and GenericIdentity Objects](../../../docs/standard/security/how-to-create-genericprincipal-and-genericidentity-objects.md)"},{"pos":[6065,6160],"content":"<bpt id=\"p1\">[</bpt>Replacing a Principal Object<ept id=\"p1\">](../../../docs/standard/security/replacing-a-principal-object.md)</ept>","source":"[Replacing a Principal Object](../../../docs/standard/security/replacing-a-principal-object.md)"},{"pos":[6163,6256],"content":"<bpt id=\"p1\">[</bpt>Impersonating and Reverting<ept id=\"p1\">](../../../docs/standard/security/impersonating-and-reverting.md)</ept>","source":"[Impersonating and Reverting](../../../docs/standard/security/impersonating-and-reverting.md)"},{"pos":[6259,6336],"content":"<bpt id=\"p1\">[</bpt>Role-Based Security<ept id=\"p1\">](../../../docs/standard/security/role-based-security.md)</ept>","source":"[Role-Based Security](../../../docs/standard/security/role-based-security.md)"},{"pos":[6339,6420],"content":"<bpt id=\"p1\">[</bpt>Key Security Concepts<ept id=\"p1\">](../../../docs/standard/security/key-security-concepts.md)</ept>","source":"[Key Security Concepts](../../../docs/standard/security/key-security-concepts.md)"}]}