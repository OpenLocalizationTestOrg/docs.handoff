{"content":"---\ntitle: \"Reliable Messaging Protocol version 1.0 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: a5509a5c-de24-4bc2-9a48-19138055dcce\ncaps.latest.revision: 5\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Reliable Messaging Protocol version 1.0\nThis topic covers [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] implementation details for the WS-Reliable Messaging February 2005 (version 1.0) protocol necessary for interoperation using the HTTP transport. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] follows the WS-Reliable Messaging specification with the constraints and clarifications explained in this topic. Note that the WS-ReliableMessaging version 1.0 protocol is implemented starting with the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].  \n  \n The WS-Reliable Messaging February 2005 protocol is implemented in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] by the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement>.  \n  \n For convenience, the topic uses the following roles:  \n  \n-   Initiator: the client that initiates WS-Reliable Message sequence creation  \n  \n-   Responder: the service that receives the initiator's requests  \n  \n This document uses the prefixes and namespaces in the following table.  \n  \n|Prefix|Namespace|  \n|------------|---------------|  \n|wsrm|http://schemas.xmlsoap.org/ws/2005/02/rm|  \n|netrm|http://schemas.microsoft.com/ws/2006/05/rm|  \n|s|http://www.w3.org/2003/05/soap-envelope|  \n|wsa|http://schemas.xmlsoap.org/ws/2005/08/addressing|  \n|wsse|http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssecurity-secext-1.0.xsd|  \n  \n## Messaging  \n  \n### Sequence Establishment Messages  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] implements `CreateSequence` and `CreateSequenceResponse` messages to establish a reliable message sequence. The following constraints apply:  \n  \n-   B1101: The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator does not generate the optional Expires element in the `CreateSequence` message or, in the cases when the `CreateSequence` message contains an `Offer` element, the optional `Expires` element in the `Offer` element.  \n  \n-   B1102: When accessing the `CreateSequence` message, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]`Responder` sends and receives both `Expires` elements if they exist, but does not use their values.  \n  \n WS-Reliable Messaging introduces the `Offer` mechanism to establish the two converse correlated sequences that form a session.  \n  \n-   R1103: If `CreateSequence` contains an `Offer` element, the Reliable Messaging Responder must either accept the sequence and respond with `CreateSequenceResponse` that contains a `wsrm:Accept` element, forming two correlated converse sequences or reject the `CreateSequence` request.  \n  \n-   R1104: `SequenceAcknowledgement` and application messages flowing on converse sequence must be sent to the `ReplyTo` endpoint reference of the `CreateSequence`.  \n  \n-   R1105: `AcksTo` and `ReplyTo` endpoint references in the `CreateSequence` must have address values that match the octet-wise.  \n  \n     The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder verifies that the URI portion of the `AcksTo` and `ReplyTo` EPRs are identical before creating a sequence.  \n  \n-   R1106: `AcksTo` and `ReplyTo` Endpoint References in the `CreateSequence` should have the same set of reference parameters.  \n  \n     [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not enforce but assumes that [reference parameters] of `AcksTo` and `ReplyTo` on `CreateSequence` are identical and uses [reference parameters] from `ReplyTo` endpoint reference for acknowledgements and converse sequence messages.  \n  \n-   R1107: When two converse sequences are established using the `Offer` mechanism, `SequenceAcknowledgement` and application messages flowing on converse sequences must be sent to the `ReplyTo` endpoint reference of the `CreateSequence`.  \n  \n-   R1108: When two converse sequences are established using the Offer mechanism, the `[address]` property of the `wsrm:AcksTo` Endpoint Reference child element of the `wsrm:Accept` element of the `CreateSequenceResponse` must match byte-wise the destination URI of the `CreateSequence`.  \n  \n-   R1109: When two converse sequences are established using the `Offer` mechanism, messages sent by initiator and acknowledgements to messages by responder must be sent to the same Endpoint Reference.  \n  \n     [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses WS-Reliable Messaging to establish reliable sessions between the Initiator and Responder. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s WS-Reliable Messaging implementation provides reliable session for one-way, request-reply and full duplex messaging patterns. The WS-Reliable Messaging `Offer` mechanism on `CreateSequence`/`CreateSequenceResponse` lets you establish two correlated converse sequences, and provides a session protocol that is suitable for all message endpoints. Because [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a security guarantee for such a session including end-to-end protection for session integrity, it is practical to ensure messages intended to the same party are arriving at the same destination. This also allows piggy-backing of sequence acknowledgements on application messages. Therefore, constraints R1104, R1105, and R1108 apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].  \n  \n An example of a `CreateSequence` message.  \n  \n```  \n<s:Envelope>  \n  <s:Header>  \n    <a:Action s:mustUnderstand=\"1\">  \n      http://schemas.xmlsoap.org/ws/2005/02/rm/CreateSequence  \n    </a:Action>  \n    <a:ReplyTo>  \n      <a:Address>          \n         http://Business456.com/clientA        \n      </a:Address>  \n    </a:ReplyTo>  \n    <a:MessageID>  \n      urn:uuid:addabbbf-60cb-44d3-8c5b-9e0841629a36  \n    </a:MessageID>  \n    <a:To s:mustUnderstand=\"1\">  \n      http://Business456.com/clientA  \n    </a:To>  \n  </s:Header>  \n  <s:Body>  \n    <wsrm:CreateSequence>  \n      <wsrm:AcksTo>  \n       <wsa:Address>  \n         http://Business456.com/clientA  \n       </wsa:Address>  \n     </wsrm:AcksTo>  \n     <wsrm:Offer>  \n      <wsrm:Identifier>  \n        urn:uuid:0afb8d36-bf26-4776-b8cf-8c91fddb5496  \n      </wsrm:Identifier>  \n     </wsrm:Offer>  \n   </wsrm:CreateSequence>  \n  </s:Body>  \n</s:Envelope>  \n```  \n  \n An example of a `CreateSequenceResponse` message.  \n  \n```  \n<s:Envelope>  \n  <s:Header>  \n    <a:Action s:mustUnderstand=\"1\">  \n      http://schemas.xmlsoap.org/ws/2005/02/rm/CreateSequenceResponse  \n    </a:Action>  \n    <a:RelatesTo>  \n      urn:uuid:addabbbf-60cb-44d3-8c5b-9e0841629a36  \n    </a:RelatesTo>  \n    <a:To s:mustUnderstand=\"1\">  \n      http://Business456.com/clientA  \n    </a:To>  \n  </s:Header>  \n  <s:Body>  \n   <wsrm:CreateSequenceResponse>  \n    <Identifier>  \n     urn:uuid:eea0a36c-b38a-43e8-8c76-2fabe2d76386  \n    </Identifier>  \n    <Accept>  \n    <AcksTo>  \n      <a:Address>  \n        http://BusinessABC.com/serviceA  \n      </a:Address>  \n    </AcksTo>  \n    </Accept>  \n   </wsrm:CreateSequenceResponse>  \n  </s:Body>  \n</s:Envelope>  \n```  \n  \n### Sequence  \n The following is a list of constraints that apply to sequences:  \n  \n-   B1201:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates and accesses sequence numbers no higher than `xs:long`’s maximum inclusive value, 9223372036854775807.  \n  \n-   B1202:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] always generates an empty-bodied last message with the action URI of http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage.  \n  \n-   B1203: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] receives and delivers a message with a Sequence header that contains a `LastMessage` element as long as the action URI is not http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage.  \n  \n An example of a Sequence Header.  \n  \n```  \n<wsrm:Sequence>  \n  <wsrm:Identifier>  \n    urn:uuid:addabbbf-60cb-44d3-8c5b-9e0841629a36  \n  </wsrm:Identifier>  \n  <wsrm:MessageNumber>  \n    10  \n  </wsrm:MessageNumber>  \n  <wsrm:LastMessage/>  \n </wsrm:Sequence>  \n```  \n  \n### AckRequested Header  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses `AckRequested` Header as a keep-alive mechanism. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not generate the optional `MessageNumber` element. Upon receiving a message with an `AckRequested` header that contains the `MessageNumber` element, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ignores the `MessageNumber` element’s value, as shown in the following example.  \n  \n```  \n<wsrm:AckRequested>  \n  <wsrm:Identifier>  \n    urn:uuid:addabbbf-60cb-44d3-8c5b-9e0841629a36  \n  </wsrm:Identifier>  \n</wsrm:AckRequested>  \n```  \n  \n### SequenceAcknowledgement Header  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses piggy-back mechanism for sequence acknowledgements provided in WS-Reliable Messaging.  \n  \n-   R1401: When two converse sequences are established using the `Offer` mechanism, the `SequenceAcknowledgement` header may be included in any application message transmitted to the intended recipient.  \n  \n-   B1402: When [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] must generate an acknowledgement prior to receiving any sequence messages (for example, to satisfy an `AckRequested` message), [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates a `SequenceAcknowledgement` header that contains the range 0-0, as shown in the following example.  \n  \n    ```  \n    <wsrm:SequenceAcknowledgement>  \n      <wsrm:Identifier>  \n        urn:uuid:addabbbf-60cb-44d3-8c5b-9e0841629a36  \n      </wsrm:Identifier>  \n      <wsrm:AcknowledgementRange Upper=\"0\" Lower=\"0\"/>  \n    </wsrm:SequenceAcknowledgement>  \n    ```  \n  \n-   B1403: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not generate `SequenceAcknowledgement` headers that contain a `Nack` element but supports `Nack` elements.  \n  \n### WS-ReliableMessaging Faults  \n The following is a list of constraints that apply to the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] implementation of WS-Reliable Messaging faults:  \n  \n-   B1501: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not generate `MessageNumberRollover` faults.  \n  \n-   B1502:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint may generate `CreateSequenceRefused` faults as described in the specification.  \n  \n-   B1503:When the service endpoint reaches its connection limit and cannot process new connections, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates an additional `CreateSequenceRefused` fault subcode, `netrm:ConnectionLimitReached`, as shown in the following example.  \n  \n    ```  \n    <s:Envelope>  \n      <s:Header>  \n        <wsa:Action>  \n          http://schemas.xmlsoap.org/ws/2005/08/addressing/fault  \n        </wsa:Action>  \n      </s:Header>  \n      <s:Body>  \n        <s:Fault>  \n          <s:Code>  \n            <s:Value>  \n              s:Receiver  \n            </s:Value>  \n            <s:Subcode>  \n              <s:Value>  \n                wsrm:CreateSequenceRefused  \n              </s:Value>  \n              <s:Subcode>  \n                <s:Value>  \n                  netrm:ConnectionLimitReached  \n                </s:Value>  \n              </s:Subcode>  \n            </s:Subcode>  \n          </s:Code>  \n          <s:Reason>  \n            <s:Text xml:lang=\"en\">  \n              [Reason]  \n            </s:Text>  \n          </s:Reason>  \n        </s:Fault>  \n      </s:Body>  \n    </s:Envelope>  \n    ```  \n  \n### WS-Addressing Faults  \n Because WS-Reliable Messaging uses WS-Addressing, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] WS-Reliable Messaging implementation may generate WS-Addressing faults. This section covers the WS-Addressing faults that [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitly generates at the WS-Reliable Messaging layer:  \n  \n-   B1601:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates the fault Message Addressing Header Required when one of the following is true:  \n  \n    -   A message is missing a `Sequence` header and an `Action` header.  \n  \n    -   A `CreateSequence` message is missing a `MessageId` header.  \n  \n    -   A `CreateSequence` message is missing a `ReplyTo` header.  \n  \n-   B1602:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates the fault Action Not Supported in reply to a message that is missing a `Sequence` header and has an `Action` header that is not a recognized in the WS-Reliable Messaging specification.  \n  \n-   B1603:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates the fault Endpoint Unavailable to indicate that the endpoint does not process the sequence based upon examination of the `CreateSequence` message’s addressing headers.  \n  \n## Protocol Composition  \n  \n### Composition with WS-Addressing  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports two versions of WS-Addressing: WS-Addressing 2004/08 [WS-ADDR] and W3C WS-Addressing 1.0 Recommendations [WS-ADDR-CORE] and [WS-ADDR-SOAP].  \n  \n While the WS-Reliable Messaging specification mentions only WS-Addressing 2004/08, it does not restrict the WS-Addressing version to be used. The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:  \n  \n-   R2101:Both WS-Addressing 2004/08 and WS-Addressing 1.0 can be used with WS-Reliable Messaging.  \n  \n-   R2102:A single version of WS-Addressing must be used throughout a given WS-Reliable Messaging sequence or a pair of converse sequences correlated by using the `wsrm:Offer` mechanism.  \n  \n### Composition with SOAP  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports use of both SOAP 1.1 and SOAP 1.2 with WS-Reliable Messaging.  \n  \n### Composition with WS-Security and WS-SecureConversation  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides protection for WS-Reliable Messaging sequences by using secure Transport (HTTPS), composition with WS-Security, and composition with WS-Secure Conversation. The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:  \n  \n-   R2301:To protect the integrity of a WS-Reliable Messaging sequence in addition to the integrity and confidentiality of individual messages, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requires that WS-Secure Conversation must be used.  \n  \n-   R2302:AWS-Secure Conversation session must be established prior to establishing WS-Reliable Messaging sequence(s).  \n  \n-   R2303: If the WS-Reliable Messaging sequence lifetime exceeds the WS-Secure Conversation session’s lifetime, the `SecurityContextToken` established by using WS-Secure Conversation must be renewed by using the corresponding WS-Secure Conversation Renewal binding.  \n  \n-   B2304:WS-Reliable Messaging sequence or a pair of correlated converse sequences are always bound to a single WS-SecureConversation session.  \n  \n     The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] source generates the `wsse:SecurityTokenReference` element in the element extensibility section of the `CreateSequence` message.  \n  \n-   R2305:When composed with WS-Secure Conversation, a `CreateSequence` message must contain the `wsse:SecurityTokenReference` element.  \n  \n## WS-Reliable Messaging WS-Policy Assertion  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses WS-Reliable Messaging WS-Policy Assertion `wsrm:RMAssertion` to describe endpoints capabilities. The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:  \n  \n-   B3001: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] attaches `wsrm:RMAssertion` WS-Policy Assertion to `wsdl:binding` elements. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports both attachments to `wsdl:binding` and `wsdl:port` elements.  \n  \n-   B3002: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports the following optional properties of WS-Reliable Messaging assertion and provides control over them on the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]`ReliableMessagingBindingElement`:  \n  \n    -   `wsrm:InactivityTimeout`  \n  \n    -   `wsrm:AcknowledgementInterval`  \n  \n     The following is an example.  \n  \n    ```  \n    <wsrm:RMAssertion>  \n      <wsrm:InactivityTimeout Milliseconds=\"600000\" />  \n      <wsrm:AcknowledgementInterval Milliseconds=\"200\" />  \n    </wsrm:RMAssertion>  \n    ```  \n  \n## Flow Control WS-Reliable Messaging Extension  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses WS-Reliable Messaging extensibility to provide optional additional tighter control over sequence message flow.  \n  \n Flow control is enabled by setting the `ReliableSessionBindingElement`’s `FlowControlEnabled``bool` property to `true`. The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:  \n  \n-   B4001: When Reliable Messaging Flow Control is enabled, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates a `netrm:BufferRemaining` element in the element extensibility of the `SequenceAcknowledgement` header.  \n  \n-   B4002: When Reliable Messaging Flow Control is enabled, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not require a `netrm:BufferRemaining` element to be present in `SequenceAcknowledgement` header, as shown in the following example.  \n  \n    ```  \n    <wsrm:SequenceAcknowledgement>  \n      <wsrm:Identifier>  \n        http://fabrikam123.com/abc  \n      </wsrm:Identifier>  \n      <wsrm:AcknowledgementRange Upper=\"1\" Lower=\"1\"/>             \n      <netrm:BufferRemaining>  \n        8  \n      </netrm:BufferRemaining>  \n    </wsrm:SequenceAcknowledgement>  \n  \n    ```  \n  \n-   B4003: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses `netrm:BufferRemaining` to indicate how many new messages the Reliable Messaging Destination can buffer.  \n  \n-   B4004:The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Reliable Messaging Service throttles the number of messages transmitted when the Reliable Messaging destination application cannot receive messages quickly. The Reliable Messaging destination buffers messages and the element’s value drops to 0.  \n  \n-   B4005: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates `netrm:BufferRemaining` integer values between 0 and 4096 inclusive, and reads integer values between 0 and `xs:int`’s `maxInclusive` value 214748364 inclusive.  \n  \n## Message Exchange Patterns  \n This section describes [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s behavior when WS-Reliable Messaging is used for different Message Exchange Patterns. For each Message Exchange Pattern the following two deployments scenarios are considered:  \n  \n-   Non-Addressable Initiator: Initiator is behind firewall; Responder can deliver messages to Initiator only on HTTP responses.  \n  \n-   Addressable Initiator: Initiator and Responder both can be sent HTTP requests; in other words, two converse HTTP connections can be established.  \n  \n### One-way, Non-addressable Initiator  \n  \n#### Binding  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a one-way message exchange pattern using one sequence over one HTTP channel. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages from the RMS to the RMD and the HTTP response to transmit all messages from the RMD to the RMS.  \n  \n#### CreateSequence Exchange  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with no offer. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures the `CreateSequence` has no offer before creating a sequence. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the `CreateSequence` request with a `CreateSequenceResponse` message.  \n  \n#### SequenceAcknowledgement  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator processes acknowledgements on the reply of all messages except the `CreateSequence` message and fault messages. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder always generates a stand-alone acknowledgement in the response to both sequence and `AckRequested` messages.  \n  \n#### TerminateSequence message  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] treats `TerminateSequence` as a one-way operation, meaning the HTTP response has an empty body and HTTP 202 status code.  \n  \n### One Way, Addressable Initiator  \n  \n#### Binding  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a one-way message exchange pattern using one sequence over an inbound and an outbound Http channel. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages. All HTTP responses have an empty body and HTTP 202 status code.  \n  \n#### CreateSequence Exchange  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with no offer. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has no offer before creating a sequence. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder transmits the `CreateSequenceResponse` message on an HTTP request addressed with the `ReplyTo` endpoint reference.  \n  \n### Duplex, Addressable Initiator  \n  \n#### Binding  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a fully asynchronous two-way message exchange pattern using two sequences over an inbound and an outbound HTTP channel. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages. All HTTP responses have an empty body and HTTP 202 status code.  \n  \n#### CreateSequence Exchange  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with an offer. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has an offer before creating a sequence. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sends the `CreateSequenceResponse` on the HTTP request addressed to the `CreateSequence`’s `ReplyTo` endpoint reference.  \n  \n#### Sequence Lifetime  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] treats the two sequences as one fully duplex session.  \n  \n Upon generating a fault that faults one sequence, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] expects the remote endpoint to fault both sequences. Upon reading a fault that faults one sequence, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] faults both sequences.  \n  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can close its outbound sequence and continue to process messages on its inbound sequence. Conversely, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can process the close of the inbound sequence and continue to send messages on its outbound sequence.  \n  \n### Request-Reply, Non-Addressable Initiator  \n  \n#### Binding  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a one-way and request-reply message exchange pattern using two sequences over one HTTP channel. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit the request sequence’s messages and uses the HTTP responses to transmit the reply sequence’s messages.  \n  \n#### CreateSequence Exchange  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with an offer. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has an offer before creating a sequence. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the `CreateSequence` request with a `CreateSequenceResponse` message.  \n  \n#### One-way Message  \n To complete a one-way message exchange protocol successfully, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator transmits a request sequence message on the HTTP request and receives a standalone `SequenceAcknowledgement` message on the HTTP response. The `SequenceAcknowledgement` must acknowledge the message transmitted.  \n  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder can reply to the request with an acknowledgement, a fault, or a response with an empty body and HTTP 202 status code.  \n  \n#### Two Way Messages  \n To complete a two way message exchange protocol successfully, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator transmits a request sequence message on the HTTP request and receives a reply sequence message on the HTTP response. The response must carry a `SequenceAcknowledgement` acknowledging the request sequence message transmitted.  \n  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder can reply to the request with an application reply, a fault or a response with an empty body and HTTP 202 status code.  \n  \n Because of the presence of one-way messages and the timing of application replies, the request sequence message’s sequence number and the response message’s sequence number have no correlation.  \n  \n#### Retrying Replies  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] relies on HTTP request-reply correlation for two-way message exchange protocol correlation. Because of this, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator does not stop retrying a request sequence message when the request sequence message is acknowledged but rather when the HTTP response carries an acknowledgement, user message, or fault. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder retries replies on the HTTP request leg of the request to which the reply is correlated.  \n  \n#### LastMessage Exchange  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates and transmits an empty bodied last message on the HTTP request leg. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requires a response but ignores the actual response message. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the request sequence’s empty-bodied last message with the reply sequence’s empty-bodied last message.  \n  \n If the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder receives a last message in which the action URI is not http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] replies with a last message. In the case of a two-way message exchange protocol, the last message carries the application message; in the case of a one-way message exchange protocol, the last message is empty.  \n  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder does not require an acknowledgement for the reply sequence’s empty-bodied last message.  \n  \n#### TerminateSequence Exchange  \n When all requests have received a valid reply, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates and transmits the request sequence’s `TerminateSequence` message on the HTTP request leg. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requires a response but ignores the actual response message. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the request sequence’s `TerminateSequence` message with the reply sequence’s `TerminateSequence` message.  \n  \n In a normal shutdown sequence, both `TerminateSequence` messages carry a full range `SequenceAcknowledgement`.  \n  \n### Request/Reply, Addressable Initiator  \n  \n#### Binding  \n [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a request-reply message exchange pattern using two sequences over an inbound and an outbound HTTP channel. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages. All HTTP responses have an empty body and HTTP 202 status code.  \n  \n#### CreateSequence Exchange  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with an offer. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has an offer before creating a sequence. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sends the `CreateSequenceResponse` on the HTTP request addressed to the `CreateSequence`’s `ReplyTo` endpoint reference.  \n  \n#### Request/Reply Correlation  \n The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator ensures all application request messages bear a `MessageId` and a `ReplyTo` endpoint reference. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator applies the `CreateSequence` message’s `ReplyTo` endpoint reference on each application request message. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder requires that incoming request messages bear a `MessageId` and a `ReplyTo`. The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the endpoint reference’s URI of both the `CreateSequence` and all application request messages are identical.","nodes":[{"pos":[4,359],"embed":true,"restype":"x-metadata","content":"title: \"Reliable Messaging Protocol version 1.0 | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: a5509a5c-de24-4bc2-9a48-19138055dcce\ncaps.latest.revision: 5\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","nodes":[{"content":"Reliable Messaging Protocol version 1.0 | Microsoft Docs","nodes":[{"pos":[0,56],"content":"Reliable Messaging Protocol version 1.0 | Microsoft Docs","nodes":[{"content":"Reliable Messaging Protocol version 1.0 | Microsoft Docs","pos":[0,56]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[366,405],"content":"Reliable Messaging Protocol version 1.0","linkify":"Reliable Messaging Protocol version 1.0","nodes":[{"content":"Reliable Messaging Protocol version 1.0","pos":[0,39]}]},{"content":"This topic covers <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> implementation details for the WS-Reliable Messaging February 2005 (version 1.0) protocol necessary for interoperation using the HTTP transport.","pos":[406,624],"source":"This topic covers [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] implementation details for the WS-Reliable Messaging February 2005 (version 1.0) protocol necessary for interoperation using the HTTP transport."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> follows the WS-Reliable Messaging specification with the constraints and clarifications explained in this topic.","pos":[625,793],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] follows the WS-Reliable Messaging specification with the constraints and clarifications explained in this topic."},{"content":"Note that the WS-ReliableMessaging version 1.0 protocol is implemented starting with the <ph id=\"ph1\">[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]</ph>.","pos":[794,945],"source":" Note that the WS-ReliableMessaging version 1.0 protocol is implemented starting with the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]."},{"pos":[952,1148],"content":"The WS-Reliable Messaging February 2005 protocol is implemented in <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> by the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.ReliableSessionBindingElement&gt;</ph>.","source":"The WS-Reliable Messaging February 2005 protocol is implemented in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] by the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement>."},{"content":"For convenience, the topic uses the following roles:","pos":[1155,1207]},{"content":"Initiator: the client that initiates WS-Reliable Message sequence creation","pos":[1217,1291]},{"content":"Responder: the service that receives the initiator's requests","pos":[1301,1362]},{"content":"This document uses the prefixes and namespaces in the following table.","pos":[1369,1439]},{"content":"Prefix","pos":[1446,1452]},{"content":"Namespace","pos":[1453,1462]},{"content":"wsrm","pos":[1500,1504]},{"content":"http://schemas.xmlsoap.org/ws/2005/02/rm","pos":[1505,1545]},{"content":"netrm","pos":[1550,1555]},{"content":"http://schemas.microsoft.com/ws/2006/05/rm","pos":[1556,1598]},{"content":"s","pos":[1603,1604]},{"content":"http://www.w3.org/2003/05/soap-envelope","pos":[1605,1644]},{"content":"wsa","pos":[1649,1652]},{"content":"http://schemas.xmlsoap.org/ws/2005/08/addressing","pos":[1653,1701]},{"content":"wsse","pos":[1706,1710]},{"content":"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssecurity-secext-1.0.xsd","pos":[1711,1788]},{"pos":[1798,1807],"content":"Messaging","linkify":"Messaging","nodes":[{"content":"Messaging","pos":[0,9]}]},{"pos":[1817,1848],"content":"Sequence Establishment Messages","linkify":"Sequence Establishment Messages","nodes":[{"content":"Sequence Establishment Messages","pos":[0,31]}]},{"content":"implements <ph id=\"ph1\">`CreateSequence`</ph> and <ph id=\"ph2\">`CreateSequenceResponse`</ph> messages to establish a reliable message sequence.","pos":[1908,2015],"source":" implements `CreateSequence` and `CreateSequenceResponse` messages to establish a reliable message sequence."},{"content":"The following constraints apply:","pos":[2016,2048]},{"pos":[2058,2348],"content":"B1101: The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator does not generate the optional Expires element in the <ph id=\"ph2\">`CreateSequence`</ph> message or, in the cases when the <ph id=\"ph3\">`CreateSequence`</ph> message contains an <ph id=\"ph4\">`Offer`</ph> element, the optional <ph id=\"ph5\">`Expires`</ph> element in the <ph id=\"ph6\">`Offer`</ph> element.","source":"B1101: The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator does not generate the optional Expires element in the `CreateSequence` message or, in the cases when the `CreateSequence` message contains an `Offer` element, the optional `Expires` element in the `Offer` element."},{"pos":[2358,2569],"content":"B1102: When accessing the <ph id=\"ph1\">`CreateSequence`</ph> message, the <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph><ph id=\"ph3\">`Responder`</ph> sends and receives both <ph id=\"ph4\">`Expires`</ph> elements if they exist, but does not use their values.","source":"B1102: When accessing the `CreateSequence` message, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]`Responder` sends and receives both `Expires` elements if they exist, but does not use their values."},{"pos":[2576,2702],"content":"WS-Reliable Messaging introduces the <ph id=\"ph1\">`Offer`</ph> mechanism to establish the two converse correlated sequences that form a session.","source":"WS-Reliable Messaging introduces the `Offer` mechanism to establish the two converse correlated sequences that form a session."},{"pos":[2712,2995],"content":"R1103: If <ph id=\"ph1\">`CreateSequence`</ph> contains an <ph id=\"ph2\">`Offer`</ph> element, the Reliable Messaging Responder must either accept the sequence and respond with <ph id=\"ph3\">`CreateSequenceResponse`</ph> that contains a <ph id=\"ph4\">`wsrm:Accept`</ph> element, forming two correlated converse sequences or reject the <ph id=\"ph5\">`CreateSequence`</ph> request.","source":"R1103: If `CreateSequence` contains an `Offer` element, the Reliable Messaging Responder must either accept the sequence and respond with `CreateSequenceResponse` that contains a `wsrm:Accept` element, forming two correlated converse sequences or reject the `CreateSequence` request."},{"pos":[3005,3165],"content":"R1104: <ph id=\"ph1\">`SequenceAcknowledgement`</ph> and application messages flowing on converse sequence must be sent to the <ph id=\"ph2\">`ReplyTo`</ph> endpoint reference of the <ph id=\"ph3\">`CreateSequence`</ph>.","source":"R1104: `SequenceAcknowledgement` and application messages flowing on converse sequence must be sent to the `ReplyTo` endpoint reference of the `CreateSequence`."},{"pos":[3175,3300],"content":"R1105: <ph id=\"ph1\">`AcksTo`</ph> and <ph id=\"ph2\">`ReplyTo`</ph> endpoint references in the <ph id=\"ph3\">`CreateSequence`</ph> must have address values that match the octet-wise.","source":"R1105: `AcksTo` and `ReplyTo` endpoint references in the `CreateSequence` must have address values that match the octet-wise."},{"pos":[3311,3487],"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder verifies that the URI portion of the <ph id=\"ph2\">`AcksTo`</ph> and <ph id=\"ph3\">`ReplyTo`</ph> EPRs are identical before creating a sequence.","source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder verifies that the URI portion of the `AcksTo` and `ReplyTo` EPRs are identical before creating a sequence."},{"pos":[3497,3620],"content":"R1106: <ph id=\"ph1\">`AcksTo`</ph> and <ph id=\"ph2\">`ReplyTo`</ph> Endpoint References in the <ph id=\"ph3\">`CreateSequence`</ph> should have the same set of reference parameters.","source":"R1106: `AcksTo` and `ReplyTo` Endpoint References in the `CreateSequence` should have the same set of reference parameters."},{"pos":[3687,3922],"content":"does not enforce but assumes that [reference parameters] of <ph id=\"ph1\">`AcksTo`</ph> and <ph id=\"ph2\">`ReplyTo`</ph> on <ph id=\"ph3\">`CreateSequence`</ph> are identical and uses [reference parameters] from <ph id=\"ph4\">`ReplyTo`</ph> endpoint reference for acknowledgements and converse sequence messages.","source":" does not enforce but assumes that [reference parameters] of `AcksTo` and `ReplyTo` on `CreateSequence` are identical and uses [reference parameters] from `ReplyTo` endpoint reference for acknowledgements and converse sequence messages."},{"pos":[3932,4166],"content":"R1107: When two converse sequences are established using the <ph id=\"ph1\">`Offer`</ph> mechanism, <ph id=\"ph2\">`SequenceAcknowledgement`</ph> and application messages flowing on converse sequences must be sent to the <ph id=\"ph3\">`ReplyTo`</ph> endpoint reference of the <ph id=\"ph4\">`CreateSequence`</ph>.","source":"R1107: When two converse sequences are established using the `Offer` mechanism, `SequenceAcknowledgement` and application messages flowing on converse sequences must be sent to the `ReplyTo` endpoint reference of the `CreateSequence`."},{"pos":[4176,4459],"content":"R1108: When two converse sequences are established using the Offer mechanism, the <ph id=\"ph1\">`[address]`</ph> property of the <ph id=\"ph2\">`wsrm:AcksTo`</ph> Endpoint Reference child element of the <ph id=\"ph3\">`wsrm:Accept`</ph> element of the <ph id=\"ph4\">`CreateSequenceResponse`</ph> must match byte-wise the destination URI of the <ph id=\"ph5\">`CreateSequence`</ph>.","source":"R1108: When two converse sequences are established using the Offer mechanism, the `[address]` property of the `wsrm:AcksTo` Endpoint Reference child element of the `wsrm:Accept` element of the `CreateSequenceResponse` must match byte-wise the destination URI of the `CreateSequence`."},{"pos":[4469,4666],"content":"R1109: When two converse sequences are established using the <ph id=\"ph1\">`Offer`</ph> mechanism, messages sent by initiator and acknowledgements to messages by responder must be sent to the same Endpoint Reference.","source":"R1109: When two converse sequences are established using the `Offer` mechanism, messages sent by initiator and acknowledgements to messages by responder must be sent to the same Endpoint Reference."},{"content":"uses WS-Reliable Messaging to establish reliable sessions between the Initiator and Responder.","pos":[4733,4827]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>'s WS-Reliable Messaging implementation provides reliable session for one-way, request-reply and full duplex messaging patterns.","pos":[4828,5011],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s WS-Reliable Messaging implementation provides reliable session for one-way, request-reply and full duplex messaging patterns."},{"content":"The WS-Reliable Messaging <ph id=\"ph1\">`Offer`</ph> mechanism on <ph id=\"ph2\">`CreateSequence`</ph><ph id=\"ph3\">/</ph><ph id=\"ph4\">`CreateSequenceResponse`</ph> lets you establish two correlated converse sequences, and provides a session protocol that is suitable for all message endpoints.","pos":[5012,5230],"source":" The WS-Reliable Messaging `Offer` mechanism on `CreateSequence`/`CreateSequenceResponse` lets you establish two correlated converse sequences, and provides a session protocol that is suitable for all message endpoints."},{"content":"Because <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> provides a security guarantee for such a session including end-to-end protection for session integrity, it is practical to ensure messages intended to the same party are arriving at the same destination.","pos":[5231,5498],"source":" Because [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides a security guarantee for such a session including end-to-end protection for session integrity, it is practical to ensure messages intended to the same party are arriving at the same destination."},{"content":"This also allows piggy-backing of sequence acknowledgements on application messages.","pos":[5499,5583]},{"content":"Therefore, constraints R1104, R1105, and R1108 apply to <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>.","pos":[5584,5696],"source":" Therefore, constraints R1104, R1105, and R1108 apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]."},{"pos":[5703,5744],"content":"An example of a <ph id=\"ph1\">`CreateSequence`</ph> message.","source":"An example of a `CreateSequence` message."},{"pos":[6630,6679],"content":"An example of a <ph id=\"ph1\">`CreateSequenceResponse`</ph> message.","source":"An example of a `CreateSequenceResponse` message."},{"pos":[7411,7419],"content":"Sequence","linkify":"Sequence","nodes":[{"content":"Sequence","pos":[0,8]}]},{"content":"The following is a list of constraints that apply to sequences:","pos":[7423,7486]},{"pos":[7496,7670],"content":"B1201:<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates and accesses sequence numbers no higher than <ph id=\"ph2\">`xs:long`</ph>’s maximum inclusive value, 9223372036854775807.","source":"B1201:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates and accesses sequence numbers no higher than `xs:long`’s maximum inclusive value, 9223372036854775807."},{"pos":[7680,7864],"content":"B1202:<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> always generates an empty-bodied last message with the action URI of http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage.","source":"B1202:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] always generates an empty-bodied last message with the action URI of http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage."},{"pos":[7874,8116],"content":"B1203: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> receives and delivers a message with a Sequence header that contains a <ph id=\"ph2\">`LastMessage`</ph> element as long as the action URI is not http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage.","source":"B1203: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] receives and delivers a message with a Sequence header that contains a `LastMessage` element as long as the action URI is not http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage."},{"content":"An example of a Sequence Header.","pos":[8123,8155]},{"pos":[8399,8418],"content":"AckRequested Header","linkify":"AckRequested Header","nodes":[{"content":"AckRequested Header","pos":[0,19]}]},{"content":"uses <ph id=\"ph1\">`AckRequested`</ph> Header as a keep-alive mechanism.","pos":[8478,8531],"source":" uses `AckRequested` Header as a keep-alive mechanism."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> does not generate the optional <ph id=\"ph2\">`MessageNumber`</ph> element.","pos":[8532,8643],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not generate the optional `MessageNumber` element."},{"content":"Upon receiving a message with an <ph id=\"ph1\">`AckRequested`</ph> header that contains the <ph id=\"ph2\">`MessageNumber`</ph> element, <ph id=\"ph3\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> ignores the <ph id=\"ph4\">`MessageNumber`</ph> element’s value, as shown in the following example.","pos":[8644,8877],"source":" Upon receiving a message with an `AckRequested` header that contains the `MessageNumber` element, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ignores the `MessageNumber` element’s value, as shown in the following example."},{"pos":[9044,9074],"content":"SequenceAcknowledgement Header","linkify":"SequenceAcknowledgement Header","nodes":[{"content":"SequenceAcknowledgement Header","pos":[0,30]}]},{"pos":[9134,9224],"content":"uses piggy-back mechanism for sequence acknowledgements provided in WS-Reliable Messaging."},{"pos":[9234,9432],"content":"R1401: When two converse sequences are established using the <ph id=\"ph1\">`Offer`</ph> mechanism, the <ph id=\"ph2\">`SequenceAcknowledgement`</ph> header may be included in any application message transmitted to the intended recipient.","source":"R1401: When two converse sequences are established using the `Offer` mechanism, the `SequenceAcknowledgement` header may be included in any application message transmitted to the intended recipient."},{"pos":[9442,9801],"content":"B1402: When <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> must generate an acknowledgement prior to receiving any sequence messages (for example, to satisfy an <ph id=\"ph2\">`AckRequested`</ph> message), <ph id=\"ph3\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates a <ph id=\"ph4\">`SequenceAcknowledgement`</ph> header that contains the range 0-0, as shown in the following example.","source":"B1402: When [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] must generate an acknowledgement prior to receiving any sequence messages (for example, to satisfy an `AckRequested` message), [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates a `SequenceAcknowledgement` header that contains the range 0-0, as shown in the following example."},{"pos":[10075,10249],"content":"B1403: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> does not generate <ph id=\"ph2\">`SequenceAcknowledgement`</ph> headers that contain a <ph id=\"ph3\">`Nack`</ph> element but supports <ph id=\"ph4\">`Nack`</ph> elements.","source":"B1403: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not generate `SequenceAcknowledgement` headers that contain a `Nack` element but supports `Nack` elements."},{"pos":[10259,10286],"content":"WS-ReliableMessaging Faults","linkify":"WS-ReliableMessaging Faults","nodes":[{"content":"WS-ReliableMessaging Faults","pos":[0,27]}]},{"pos":[10290,10450],"content":"The following is a list of constraints that apply to the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> implementation of WS-Reliable Messaging faults:","source":"The following is a list of constraints that apply to the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] implementation of WS-Reliable Messaging faults:"},{"pos":[10460,10572],"content":"B1501: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> does not generate <ph id=\"ph2\">`MessageNumberRollover`</ph> faults.","source":"B1501: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not generate `MessageNumberRollover` faults."},{"pos":[10582,10731],"content":"B1502:<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> endpoint may generate <ph id=\"ph2\">`CreateSequenceRefused`</ph> faults as described in the specification.","source":"B1502:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint may generate `CreateSequenceRefused` faults as described in the specification."},{"pos":[10741,11023],"content":"B1503:When the service endpoint reaches its connection limit and cannot process new connections, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates an additional <ph id=\"ph2\">`CreateSequenceRefused`</ph> fault subcode, <ph id=\"ph3\">`netrm:ConnectionLimitReached`</ph>, as shown in the following example.","source":"B1503:When the service endpoint reaches its connection limit and cannot process new connections, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates an additional `CreateSequenceRefused` fault subcode, `netrm:ConnectionLimitReached`, as shown in the following example."},{"pos":[11890,11910],"content":"WS-Addressing Faults","linkify":"WS-Addressing Faults","nodes":[{"content":"WS-Addressing Faults","pos":[0,20]}]},{"content":"Because WS-Reliable Messaging uses WS-Addressing, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> WS-Reliable Messaging implementation may generate WS-Addressing faults.","pos":[11914,12091],"source":"Because WS-Reliable Messaging uses WS-Addressing, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] WS-Reliable Messaging implementation may generate WS-Addressing faults."},{"content":"This section covers the WS-Addressing faults that <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> explicitly generates at the WS-Reliable Messaging layer:","pos":[12092,12254],"source":" This section covers the WS-Addressing faults that [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitly generates at the WS-Reliable Messaging layer:"},{"pos":[12264,12415],"content":"B1601:<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates the fault Message Addressing Header Required when one of the following is true:","source":"B1601:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates the fault Message Addressing Header Required when one of the following is true:"},{"pos":[12429,12493],"content":"A message is missing a <ph id=\"ph1\">`Sequence`</ph> header and an <ph id=\"ph2\">`Action`</ph> header.","source":"A message is missing a `Sequence` header and an `Action` header."},{"pos":[12507,12566],"content":"A <ph id=\"ph1\">`CreateSequence`</ph> message is missing a <ph id=\"ph2\">`MessageId`</ph> header.","source":"A `CreateSequence` message is missing a `MessageId` header."},{"pos":[12580,12637],"content":"A <ph id=\"ph1\">`CreateSequence`</ph> message is missing a <ph id=\"ph2\">`ReplyTo`</ph> header.","source":"A `CreateSequence` message is missing a `ReplyTo` header."},{"pos":[12647,12903],"content":"B1602:<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates the fault Action Not Supported in reply to a message that is missing a <ph id=\"ph2\">`Sequence`</ph> header and has an <ph id=\"ph3\">`Action`</ph> header that is not a recognized in the WS-Reliable Messaging specification.","source":"B1602:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates the fault Action Not Supported in reply to a message that is missing a `Sequence` header and has an `Action` header that is not a recognized in the WS-Reliable Messaging specification."},{"pos":[12913,13152],"content":"B1603:<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates the fault Endpoint Unavailable to indicate that the endpoint does not process the sequence based upon examination of the <ph id=\"ph2\">`CreateSequence`</ph> message’s addressing headers.","source":"B1603:[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates the fault Endpoint Unavailable to indicate that the endpoint does not process the sequence based upon examination of the `CreateSequence` message’s addressing headers."},{"pos":[13161,13181],"content":"Protocol Composition","linkify":"Protocol Composition","nodes":[{"content":"Protocol Composition","pos":[0,20]}]},{"pos":[13191,13221],"content":"Composition with WS-Addressing","linkify":"Composition with WS-Addressing","nodes":[{"content":"Composition with WS-Addressing","pos":[0,30]}]},{"pos":[13281,13429],"content":"supports two versions of WS-Addressing: WS-Addressing 2004/08 [WS-ADDR] and W3C WS-Addressing 1.0 Recommendations [WS-ADDR-CORE] and [WS-ADDR-SOAP]."},{"content":"While the WS-Reliable Messaging specification mentions only WS-Addressing 2004/08, it does not restrict the WS-Addressing version to be used.","pos":[13436,13577]},{"content":"The following is a list of constraints that apply to <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>:","pos":[13578,13687],"source":" The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:"},{"content":"R2101:Both WS-Addressing 2004/08 and WS-Addressing 1.0 can be used with WS-Reliable Messaging.","pos":[13697,13791]},{"pos":[13801,13983],"content":"R2102:A single version of WS-Addressing must be used throughout a given WS-Reliable Messaging sequence or a pair of converse sequences correlated by using the <ph id=\"ph1\">`wsrm:Offer`</ph> mechanism.","source":"R2102:A single version of WS-Addressing must be used throughout a given WS-Reliable Messaging sequence or a pair of converse sequences correlated by using the `wsrm:Offer` mechanism."},{"pos":[13993,14014],"content":"Composition with SOAP","linkify":"Composition with SOAP","nodes":[{"content":"Composition with SOAP","pos":[0,21]}]},{"pos":[14074,14144],"content":"supports use of both SOAP 1.1 and SOAP 1.2 with WS-Reliable Messaging."},{"pos":[14154,14208],"content":"Composition with WS-Security and WS-SecureConversation","linkify":"Composition with WS-Security and WS-SecureConversation","nodes":[{"content":"Composition with WS-Security and WS-SecureConversation","pos":[0,54]}]},{"content":"provides protection for WS-Reliable Messaging sequences by using secure Transport (HTTPS), composition with WS-Security, and composition with WS-Secure Conversation.","pos":[14268,14433]},{"content":"The following is a list of constraints that apply to <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>:","pos":[14434,14543],"source":" The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:"},{"pos":[14553,14799],"content":"R2301:To protect the integrity of a WS-Reliable Messaging sequence in addition to the integrity and confidentiality of individual messages, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> requires that WS-Secure Conversation must be used.","source":"R2301:To protect the integrity of a WS-Reliable Messaging sequence in addition to the integrity and confidentiality of individual messages, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requires that WS-Secure Conversation must be used."},{"content":"R2302:AWS-Secure Conversation session must be established prior to establishing WS-Reliable Messaging sequence(s).","pos":[14809,14923]},{"pos":[14933,15195],"content":"R2303: If the WS-Reliable Messaging sequence lifetime exceeds the WS-Secure Conversation session’s lifetime, the <ph id=\"ph1\">`SecurityContextToken`</ph> established by using WS-Secure Conversation must be renewed by using the corresponding WS-Secure Conversation Renewal binding.","source":"R2303: If the WS-Reliable Messaging sequence lifetime exceeds the WS-Secure Conversation session’s lifetime, the `SecurityContextToken` established by using WS-Secure Conversation must be renewed by using the corresponding WS-Secure Conversation Renewal binding."},{"content":"B2304:WS-Reliable Messaging sequence or a pair of correlated converse sequences are always bound to a single WS-SecureConversation session.","pos":[15205,15344]},{"pos":[15355,15543],"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> source generates the <ph id=\"ph2\">`wsse:SecurityTokenReference`</ph> element in the element extensibility section of the <ph id=\"ph3\">`CreateSequence`</ph> message.","source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] source generates the `wsse:SecurityTokenReference` element in the element extensibility section of the `CreateSequence` message."},{"pos":[15553,15684],"content":"R2305:When composed with WS-Secure Conversation, a <ph id=\"ph1\">`CreateSequence`</ph> message must contain the <ph id=\"ph2\">`wsse:SecurityTokenReference`</ph> element.","source":"R2305:When composed with WS-Secure Conversation, a `CreateSequence` message must contain the `wsse:SecurityTokenReference` element."},{"pos":[15693,15734],"content":"WS-Reliable Messaging WS-Policy Assertion","linkify":"WS-Reliable Messaging WS-Policy Assertion","nodes":[{"content":"WS-Reliable Messaging WS-Policy Assertion","pos":[0,41]}]},{"content":"uses WS-Reliable Messaging WS-Policy Assertion <ph id=\"ph1\">`wsrm:RMAssertion`</ph> to describe endpoints capabilities.","pos":[15794,15895],"source":" uses WS-Reliable Messaging WS-Policy Assertion `wsrm:RMAssertion` to describe endpoints capabilities."},{"content":"The following is a list of constraints that apply to <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>:","pos":[15896,16005],"source":" The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:"},{"content":"B3001: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> attaches <ph id=\"ph2\">`wsrm:RMAssertion`</ph> WS-Policy Assertion to <ph id=\"ph3\">`wsdl:binding`</ph> elements.","pos":[16015,16153],"source":"B3001: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] attaches `wsrm:RMAssertion` WS-Policy Assertion to `wsdl:binding` elements."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> supports both attachments to <ph id=\"ph2\">`wsdl:binding`</ph> and <ph id=\"ph3\">`wsdl:port`</ph> elements.","pos":[16154,16279],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports both attachments to `wsdl:binding` and `wsdl:port` elements."},{"pos":[16289,16557],"content":"B3002: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> supports the following optional properties of WS-Reliable Messaging assertion and provides control over them on the <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph><ph id=\"ph3\">`ReliableMessagingBindingElement`</ph>:","source":"B3002: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports the following optional properties of WS-Reliable Messaging assertion and provides control over them on the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]`ReliableMessagingBindingElement`:"},{"content":"The following is an example.","pos":[16650,16678]},{"pos":[16878,16922],"content":"Flow Control WS-Reliable Messaging Extension","linkify":"Flow Control WS-Reliable Messaging Extension","nodes":[{"content":"Flow Control WS-Reliable Messaging Extension","pos":[0,44]}]},{"pos":[16982,17097],"content":"uses WS-Reliable Messaging extensibility to provide optional additional tighter control over sequence message flow."},{"content":"Flow control is enabled by setting the <ph id=\"ph1\">`ReliableSessionBindingElement`</ph>’s <ph id=\"ph2\">`FlowControlEnabled``bool`</ph> property to <ph id=\"ph3\">`true`</ph>.","pos":[17104,17223],"source":"Flow control is enabled by setting the `ReliableSessionBindingElement`’s `FlowControlEnabled``bool` property to `true`."},{"content":"The following is a list of constraints that apply to <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>:","pos":[17224,17333],"source":" The following is a list of constraints that apply to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]:"},{"pos":[17343,17568],"content":"B4001: When Reliable Messaging Flow Control is enabled, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates a <ph id=\"ph2\">`netrm:BufferRemaining`</ph> element in the element extensibility of the <ph id=\"ph3\">`SequenceAcknowledgement`</ph> header.","source":"B4001: When Reliable Messaging Flow Control is enabled, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates a `netrm:BufferRemaining` element in the element extensibility of the `SequenceAcknowledgement` header."},{"pos":[17578,17826],"content":"B4002: When Reliable Messaging Flow Control is enabled, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> does not require a <ph id=\"ph2\">`netrm:BufferRemaining`</ph> element to be present in <ph id=\"ph3\">`SequenceAcknowledgement`</ph> header, as shown in the following example.","source":"B4002: When Reliable Messaging Flow Control is enabled, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] does not require a `netrm:BufferRemaining` element to be present in `SequenceAcknowledgement` header, as shown in the following example."},{"pos":[18172,18344],"content":"B4003: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> uses <ph id=\"ph2\">`netrm:BufferRemaining`</ph> to indicate how many new messages the Reliable Messaging Destination can buffer.","source":"B4003: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses `netrm:BufferRemaining` to indicate how many new messages the Reliable Messaging Destination can buffer."},{"content":"B4004:The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Reliable Messaging Service throttles the number of messages transmitted when the Reliable Messaging destination application cannot receive messages quickly.","pos":[18354,18576],"source":"B4004:The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Reliable Messaging Service throttles the number of messages transmitted when the Reliable Messaging destination application cannot receive messages quickly."},{"content":"The Reliable Messaging destination buffers messages and the element’s value drops to 0.","pos":[18577,18664]},{"pos":[18674,18907],"content":"B4005: <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> generates <ph id=\"ph2\">`netrm:BufferRemaining`</ph> integer values between 0 and 4096 inclusive, and reads integer values between 0 and <ph id=\"ph3\">`xs:int`</ph>’s <ph id=\"ph4\">`maxInclusive`</ph> value 214748364 inclusive.","source":"B4005: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] generates `netrm:BufferRemaining` integer values between 0 and 4096 inclusive, and reads integer values between 0 and `xs:int`’s `maxInclusive` value 214748364 inclusive."},{"pos":[18916,18941],"content":"Message Exchange Patterns","linkify":"Message Exchange Patterns","nodes":[{"content":"Message Exchange Patterns","pos":[0,25]}]},{"content":"This section describes <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph>'s behavior when WS-Reliable Messaging is used for different Message Exchange Patterns.","pos":[18945,19110],"source":"This section describes [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]'s behavior when WS-Reliable Messaging is used for different Message Exchange Patterns."},{"content":"For each Message Exchange Pattern the following two deployments scenarios are considered:","pos":[19111,19200]},{"content":"Non-Addressable Initiator: Initiator is behind firewall; Responder can deliver messages to Initiator only on HTTP responses.","pos":[19210,19334]},{"content":"Addressable Initiator: Initiator and Responder both can be sent HTTP requests; in other words, two converse HTTP connections can be established.","pos":[19344,19488]},{"pos":[19498,19532],"content":"One-way, Non-addressable Initiator","linkify":"One-way, Non-addressable Initiator","nodes":[{"content":"One-way, Non-addressable Initiator","pos":[0,34]}]},{"pos":[19543,19550],"content":"Binding","linkify":"Binding","nodes":[{"content":"Binding","pos":[0,7]}]},{"content":"provides a one-way message exchange pattern using one sequence over one HTTP channel.","pos":[19610,19695]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> uses the HTTP requests to transmit all messages from the RMS to the RMD and the HTTP response to transmit all messages from the RMD to the RMS.","pos":[19696,19895],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages from the RMS to the RMD and the HTTP response to transmit all messages from the RMD to the RMS."},{"pos":[19906,19929],"content":"CreateSequence Exchange","linkify":"CreateSequence Exchange","nodes":[{"content":"CreateSequence Exchange","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates a <ph id=\"ph2\">`CreateSequence`</ph> message with no offer.","pos":[19933,20054],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with no offer."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder ensures the <ph id=\"ph2\">`CreateSequence`</ph> has no offer before creating a sequence.","pos":[20055,20194],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures the `CreateSequence` has no offer before creating a sequence."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder replies to the <ph id=\"ph2\">`CreateSequence`</ph> request with a <ph id=\"ph3\">`CreateSequenceResponse`</ph> message.","pos":[20195,20345],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the `CreateSequence` request with a `CreateSequenceResponse` message."},{"pos":[20356,20379],"content":"SequenceAcknowledgement","linkify":"SequenceAcknowledgement","nodes":[{"content":"SequenceAcknowledgement","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator processes acknowledgements on the reply of all messages except the <ph id=\"ph2\">`CreateSequence`</ph> message and fault messages.","pos":[20383,20564],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator processes acknowledgements on the reply of all messages except the `CreateSequence` message and fault messages."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder always generates a stand-alone acknowledgement in the response to both sequence and <ph id=\"ph2\">`AckRequested`</ph> messages.","pos":[20565,20743],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder always generates a stand-alone acknowledgement in the response to both sequence and `AckRequested` messages."},{"pos":[20754,20779],"content":"TerminateSequence message","linkify":"TerminateSequence message","nodes":[{"content":"TerminateSequence message","pos":[0,25]}]},{"pos":[20839,20959],"content":"treats <ph id=\"ph1\">`TerminateSequence`</ph> as a one-way operation, meaning the HTTP response has an empty body and HTTP 202 status code.","source":" treats `TerminateSequence` as a one-way operation, meaning the HTTP response has an empty body and HTTP 202 status code."},{"pos":[20969,20999],"content":"One Way, Addressable Initiator","linkify":"One Way, Addressable Initiator","nodes":[{"content":"One Way, Addressable Initiator","pos":[0,30]}]},{"pos":[21010,21017],"content":"Binding","linkify":"Binding","nodes":[{"content":"Binding","pos":[0,7]}]},{"content":"provides a one-way message exchange pattern using one sequence over an inbound and an outbound Http channel.","pos":[21077,21185]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> uses the HTTP requests to transmit all messages.","pos":[21186,21290],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages."},{"content":"All HTTP responses have an empty body and HTTP 202 status code.","pos":[21291,21354]},{"pos":[21365,21388],"content":"CreateSequence Exchange","linkify":"CreateSequence Exchange","nodes":[{"content":"CreateSequence Exchange","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates a <ph id=\"ph2\">`CreateSequence`</ph> message with no offer.","pos":[21392,21513],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with no offer."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder ensures that the <ph id=\"ph2\">`CreateSequence`</ph> has no offer before creating a sequence.","pos":[21514,21658],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has no offer before creating a sequence."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder transmits the <ph id=\"ph2\">`CreateSequenceResponse`</ph> message on an HTTP request addressed with the <ph id=\"ph3\">`ReplyTo`</ph> endpoint reference.","pos":[21659,21843],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder transmits the `CreateSequenceResponse` message on an HTTP request addressed with the `ReplyTo` endpoint reference."},{"pos":[21853,21882],"content":"Duplex, Addressable Initiator","linkify":"Duplex, Addressable Initiator","nodes":[{"content":"Duplex, Addressable Initiator","pos":[0,29]}]},{"pos":[21893,21900],"content":"Binding","linkify":"Binding","nodes":[{"content":"Binding","pos":[0,7]}]},{"content":"provides a fully asynchronous two-way message exchange pattern using two sequences over an inbound and an outbound HTTP channel.","pos":[21960,22088]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> uses the HTTP requests to transmit all messages.","pos":[22089,22193],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages."},{"content":"All HTTP responses have an empty body and HTTP 202 status code.","pos":[22194,22257]},{"pos":[22268,22291],"content":"CreateSequence Exchange","linkify":"CreateSequence Exchange","nodes":[{"content":"CreateSequence Exchange","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates a <ph id=\"ph2\">`CreateSequence`</ph> message with an offer.","pos":[22295,22416],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with an offer."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder ensures that the <ph id=\"ph2\">`CreateSequence`</ph> has an offer before creating a sequence.","pos":[22417,22561],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has an offer before creating a sequence."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> sends the <ph id=\"ph2\">`CreateSequenceResponse`</ph> on the HTTP request addressed to the <ph id=\"ph3\">`CreateSequence`</ph>’s <ph id=\"ph4\">`ReplyTo`</ph> endpoint reference.","pos":[22562,22738],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sends the `CreateSequenceResponse` on the HTTP request addressed to the `CreateSequence`’s `ReplyTo` endpoint reference."},{"pos":[22749,22766],"content":"Sequence Lifetime","linkify":"Sequence Lifetime","nodes":[{"content":"Sequence Lifetime","pos":[0,17]}]},{"pos":[22826,22879],"content":"treats the two sequences as one fully duplex session."},{"content":"Upon generating a fault that faults one sequence, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> expects the remote endpoint to fault both sequences.","pos":[22886,23044],"source":"Upon generating a fault that faults one sequence, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] expects the remote endpoint to fault both sequences."},{"content":"Upon reading a fault that faults one sequence, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> faults both sequences.","pos":[23045,23170],"source":" Upon reading a fault that faults one sequence, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] faults both sequences."},{"content":"can close its outbound sequence and continue to process messages on its inbound sequence.","pos":[23233,23322]},{"content":"Conversely, <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> can process the close of the inbound sequence and continue to send messages on its outbound sequence.","pos":[23323,23492],"source":" Conversely, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can process the close of the inbound sequence and continue to send messages on its outbound sequence."},{"pos":[23502,23542],"content":"Request-Reply, Non-Addressable Initiator","linkify":"Request-Reply, Non-Addressable Initiator","nodes":[{"content":"Request-Reply, Non-Addressable Initiator","pos":[0,40]}]},{"pos":[23553,23560],"content":"Binding","linkify":"Binding","nodes":[{"content":"Binding","pos":[0,7]}]},{"content":"provides a one-way and request-reply message exchange pattern using two sequences over one HTTP channel.","pos":[23620,23724]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> uses the HTTP requests to transmit the request sequence’s messages and uses the HTTP responses to transmit the reply sequence’s messages.","pos":[23725,23918],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit the request sequence’s messages and uses the HTTP responses to transmit the reply sequence’s messages."},{"pos":[23929,23952],"content":"CreateSequence Exchange","linkify":"CreateSequence Exchange","nodes":[{"content":"CreateSequence Exchange","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates a <ph id=\"ph2\">`CreateSequence`</ph> message with an offer.","pos":[23956,24077],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with an offer."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder ensures that the <ph id=\"ph2\">`CreateSequence`</ph> has an offer before creating a sequence.","pos":[24078,24222],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has an offer before creating a sequence."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder replies to the <ph id=\"ph2\">`CreateSequence`</ph> request with a <ph id=\"ph3\">`CreateSequenceResponse`</ph> message.","pos":[24223,24373],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the `CreateSequence` request with a `CreateSequenceResponse` message."},{"pos":[24384,24399],"content":"One-way Message","linkify":"One-way Message","nodes":[{"content":"One-way Message","pos":[0,15]}]},{"content":"To complete a one-way message exchange protocol successfully, the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator transmits a request sequence message on the HTTP request and receives a standalone <ph id=\"ph2\">`SequenceAcknowledgement`</ph> message on the HTTP response.","pos":[24403,24673],"source":"To complete a one-way message exchange protocol successfully, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator transmits a request sequence message on the HTTP request and receives a standalone `SequenceAcknowledgement` message on the HTTP response."},{"content":"The <ph id=\"ph1\">`SequenceAcknowledgement`</ph> must acknowledge the message transmitted.","pos":[24674,24745],"source":" The `SequenceAcknowledgement` must acknowledge the message transmitted."},{"pos":[24752,24939],"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder can reply to the request with an acknowledgement, a fault, or a response with an empty body and HTTP 202 status code.","source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder can reply to the request with an acknowledgement, a fault, or a response with an empty body and HTTP 202 status code."},{"pos":[24950,24966],"content":"Two Way Messages","linkify":"Two Way Messages","nodes":[{"content":"Two Way Messages","pos":[0,16]}]},{"content":"To complete a two way message exchange protocol successfully, the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator transmits a request sequence message on the HTTP request and receives a reply sequence message on the HTTP response.","pos":[24970,25218],"source":"To complete a two way message exchange protocol successfully, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator transmits a request sequence message on the HTTP request and receives a reply sequence message on the HTTP response."},{"content":"The response must carry a <ph id=\"ph1\">`SequenceAcknowledgement`</ph> acknowledging the request sequence message transmitted.","pos":[25219,25326],"source":" The response must carry a `SequenceAcknowledgement` acknowledging the request sequence message transmitted."},{"pos":[25333,25521],"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder can reply to the request with an application reply, a fault or a response with an empty body and HTTP 202 status code.","source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder can reply to the request with an application reply, a fault or a response with an empty body and HTTP 202 status code."},{"content":"Because of the presence of one-way messages and the timing of application replies, the request sequence message’s sequence number and the response message’s sequence number have no correlation.","pos":[25528,25721]},{"pos":[25732,25748],"content":"Retrying Replies","linkify":"Retrying Replies","nodes":[{"content":"Retrying Replies","pos":[0,16]}]},{"content":"relies on HTTP request-reply correlation for two-way message exchange protocol correlation.","pos":[25808,25899]},{"content":"Because of this, the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator does not stop retrying a request sequence message when the request sequence message is acknowledged but rather when the HTTP response carries an acknowledgement, user message, or fault.","pos":[25900,26172],"source":" Because of this, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator does not stop retrying a request sequence message when the request sequence message is acknowledged but rather when the HTTP response carries an acknowledgement, user message, or fault."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder retries replies on the HTTP request leg of the request to which the reply is correlated.","pos":[26173,26331],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder retries replies on the HTTP request leg of the request to which the reply is correlated."},{"pos":[26342,26362],"content":"LastMessage Exchange","linkify":"LastMessage Exchange","nodes":[{"content":"LastMessage Exchange","pos":[0,20]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates and transmits an empty bodied last message on the HTTP request leg.","pos":[26366,26513],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates and transmits an empty bodied last message on the HTTP request leg."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> requires a response but ignores the actual response message.","pos":[26514,26630],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requires a response but ignores the actual response message."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder replies to the request sequence’s empty-bodied last message with the reply sequence’s empty-bodied last message.","pos":[26631,26813],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the request sequence’s empty-bodied last message with the reply sequence’s empty-bodied last message."},{"content":"If the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder receives a last message in which the action URI is not http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage, <ph id=\"ph2\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> replies with a last message.","pos":[26820,27086],"source":"If the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder receives a last message in which the action URI is not http://schemas.xmlsoap.org/ws/2005/02/rm/LastMessage, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] replies with a last message."},{"content":"In the case of a two-way message exchange protocol, the last message carries the application message; in the case of a one-way message exchange protocol, the last message is empty.","pos":[27087,27267]},{"pos":[27274,27431],"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder does not require an acknowledgement for the reply sequence’s empty-bodied last message.","source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder does not require an acknowledgement for the reply sequence’s empty-bodied last message."},{"pos":[27442,27468],"content":"TerminateSequence Exchange","linkify":"TerminateSequence Exchange","nodes":[{"content":"TerminateSequence Exchange","pos":[0,26]}]},{"content":"When all requests have received a valid reply, the <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates and transmits the request sequence’s <ph id=\"ph2\">`TerminateSequence`</ph> message on the HTTP request leg.","pos":[27472,27688],"source":"When all requests have received a valid reply, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates and transmits the request sequence’s `TerminateSequence` message on the HTTP request leg."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> requires a response but ignores the actual response message.","pos":[27689,27805],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] requires a response but ignores the actual response message."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder replies to the request sequence’s <ph id=\"ph2\">`TerminateSequence`</ph> message with the reply sequence’s <ph id=\"ph3\">`TerminateSequence`</ph> message.","pos":[27806,27992],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder replies to the request sequence’s `TerminateSequence` message with the reply sequence’s `TerminateSequence` message."},{"pos":[27999,28109],"content":"In a normal shutdown sequence, both <ph id=\"ph1\">`TerminateSequence`</ph> messages carry a full range <ph id=\"ph2\">`SequenceAcknowledgement`</ph>.","source":"In a normal shutdown sequence, both `TerminateSequence` messages carry a full range `SequenceAcknowledgement`."},{"pos":[28119,28155],"content":"Request/Reply, Addressable Initiator","linkify":"Request/Reply, Addressable Initiator","nodes":[{"content":"Request/Reply, Addressable Initiator","pos":[0,36]}]},{"pos":[28166,28173],"content":"Binding","linkify":"Binding","nodes":[{"content":"Binding","pos":[0,7]}]},{"content":"provides a request-reply message exchange pattern using two sequences over an inbound and an outbound HTTP channel.","pos":[28233,28348]},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> uses the HTTP requests to transmit all messages.","pos":[28349,28453],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the HTTP requests to transmit all messages."},{"content":"All HTTP responses have an empty body and HTTP 202 status code.","pos":[28454,28517]},{"pos":[28528,28551],"content":"CreateSequence Exchange","linkify":"CreateSequence Exchange","nodes":[{"content":"CreateSequence Exchange","pos":[0,23]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator generates a <ph id=\"ph2\">`CreateSequence`</ph> message with an offer.","pos":[28555,28676],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator generates a `CreateSequence` message with an offer."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder ensures that the <ph id=\"ph2\">`CreateSequence`</ph> has an offer before creating a sequence.","pos":[28677,28821],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the `CreateSequence` has an offer before creating a sequence."},{"content":"<ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> sends the <ph id=\"ph2\">`CreateSequenceResponse`</ph> on the HTTP request addressed to the <ph id=\"ph3\">`CreateSequence`</ph>’s <ph id=\"ph4\">`ReplyTo`</ph> endpoint reference.","pos":[28822,28998],"source":"[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sends the `CreateSequenceResponse` on the HTTP request addressed to the `CreateSequence`’s `ReplyTo` endpoint reference."},{"pos":[29009,29034],"content":"Request/Reply Correlation","linkify":"Request/Reply Correlation","nodes":[{"content":"Request/Reply Correlation","pos":[0,25]}]},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator ensures all application request messages bear a <ph id=\"ph2\">`MessageId`</ph> and a <ph id=\"ph3\">`ReplyTo`</ph> endpoint reference.","pos":[29038,29203],"source":"The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator ensures all application request messages bear a `MessageId` and a `ReplyTo` endpoint reference."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Initiator applies the <ph id=\"ph2\">`CreateSequence`</ph> message’s <ph id=\"ph3\">`ReplyTo`</ph> endpoint reference on each application request message.","pos":[29204,29378],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Initiator applies the `CreateSequence` message’s `ReplyTo` endpoint reference on each application request message."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder requires that incoming request messages bear a <ph id=\"ph2\">`MessageId`</ph> and a <ph id=\"ph3\">`ReplyTo`</ph>.","pos":[29379,29524],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder requires that incoming request messages bear a `MessageId` and a `ReplyTo`."},{"content":"The <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> Responder ensures that the endpoint reference’s URI of both the <ph id=\"ph2\">`CreateSequence`</ph> and all application request messages are identical.","pos":[29525,29717],"source":" The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Responder ensures that the endpoint reference’s URI of both the `CreateSequence` and all application request messages are identical."}]}