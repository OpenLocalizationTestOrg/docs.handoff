{"content":"---\ntitle: \"SQL Tracking | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: bcaebeb1-b9e5-49e8-881b-e49af66fd341\ncaps.latest.revision: 15\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# SQL Tracking\nThis sample demonstrates how to write a custom SQL tracking participant, that writes tracking records to a SQL database. [!INCLUDE[wf](../../../../includes/wf-md.md)] provides workflow tracking to gain visibility into the execution of a workflow instance. The tracking runtime emits workflow tracking records during the execution of the workflow. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] workflow tracking, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md).  \n  \n#### To use this sample  \n  \n1.  Verify you have SQL Server 2008, SQL Server 2008 Express or newer installed. The scripts packaged with the sample assume the use of a SQL Express instance on your local computer. If you have a different instance please modify the database-related scripts before running the sample.  \n  \n2.  Create the SQL Server tracking database by running Trackingsetup.cmd in the scripts directory (\\WF\\Basic\\Tracking\\SqlTracking\\CS\\Scripts). This creates a database called TrackingSample.  \n  \n    > [!NOTE]\n    >  The script creates the database on the default instance of SQL Express. If you want to install it on a different database instance, edit the Trackingsetup.cmd script.  \n  \n3.  Open SqlTrackingSample.sln in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n4.  Press CTRL+SHIFT+B to build the solution.  \n  \n5.  Press F5 to run the application.  \n  \n     The browser window opens and shows the directory listing for the application.  \n  \n6.  In the browser, click StockPriceService.xamlx.  \n  \n7.  The browser displays the StockPriceService page, which contains the local service WSDL address. Copy this address.  \n  \n     An example of the local service WSDL address is http://localhost:65193/StockPriceService.xamlx?wsdl.  \n  \n8.  Using [!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)], run the WCF test client (WcfTestClient.exe). It is located in the Microsoft Visual Studio 10.0\\Common7\\IDE directory.  \n  \n9. In the WCF test client, click the **File** menu and select **Add Service**. Paste the local service address in the textbox. Click **OK** to close the dialog.  \n  \n10. In the WCF test client, double click **GetStockPrice**. This opens the `GetStockPrice` operation that takes one parameter, type in the value `Contoso` and click **Invoke**.  \n  \n11. The emitted tracking records are written to a SQL database. To view the tracking records, open the TrackingSample database in SQL Management Studio and navigate to the tables. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] SQL Server Management Studio, see [Introducing SQL Server Management Studio](http://go.microsoft.com/fwlink/?LinkId=165645). SQL Server 2008 Management Studio Express can be downloaded [here](http://go.microsoft.com/fwlink/?LinkId=180520). Running a select query on the tables displays the data within the tracking records stored in the respective tables.  \n  \n#### To uninstall the sample  \n  \n1.  Run theTrackingcleanup.cmd script in the sample directory (\\WF\\Basic\\Tracking\\SqlTracking).  \n  \n    > [!NOTE]\n    >  The Trackingcleanup.cmd attempts to delete the database in your local computer SQL Express. If you are using another SQL server instance, edit Trackingcleanup.cmd.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\Tracking\\SqlTracking`  \n  \n## See Also  \n [AppFabric Monitoring Samples](http://go.microsoft.com/fwlink/?LinkId=193959)","nodes":[{"pos":[12,41],"content":"SQL Tracking | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"SQL Tracking | Microsoft Docs","pos":[0,29]}]},{"pos":[307,319],"content":"SQL Tracking","linkify":"SQL Tracking","nodes":[{"content":"SQL Tracking","pos":[0,12]}]},{"content":"This sample demonstrates how to write a custom SQL tracking participant, that writes tracking records to a SQL database.","pos":[320,440]},{"content":"<ph id=\"ph1\">[!INCLUDE[wf](../../../../includes/wf-md.md)]</ph> provides workflow tracking to gain visibility into the execution of a workflow instance.","pos":[441,575],"source":"[!INCLUDE[wf](../../../../includes/wf-md.md)] provides workflow tracking to gain visibility into the execution of a workflow instance."},{"content":"The tracking runtime emits workflow tracking records during the execution of the workflow.","pos":[576,666]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> workflow tracking, see <bpt id=\"p1\">[</bpt>Workflow Tracking and Tracing<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)</ept>.","pos":[667,867],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] workflow tracking, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)."},{"pos":[878,896],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"content":"Verify you have SQL Server 2008, SQL Server 2008 Express or newer installed.","pos":[906,982]},{"content":"The scripts packaged with the sample assume the use of a SQL Express instance on your local computer.","pos":[983,1084]},{"content":"If you have a different instance please modify the database-related scripts before running the sample.","pos":[1085,1187]},{"content":"Create the SQL Server tracking database by running Trackingsetup.cmd in the scripts directory (\\WF\\Basic\\Tracking\\SqlTracking\\CS\\Scripts).","pos":[1197,1335]},{"content":"This creates a database called TrackingSample.","pos":[1336,1382]},{"pos":[1394,1575],"content":"[!NOTE]\nThe script creates the database on the default instance of SQL Express. If you want to install it on a different database instance, edit the Trackingsetup.cmd script.","leadings":["","    >  "],"nodes":[{"content":"The script creates the database on the default instance of SQL Express. If you want to install it on a different database instance, edit the Trackingsetup.cmd script.","pos":[8,174],"nodes":[{"content":"The script creates the database on the default instance of SQL Express.","pos":[0,71]},{"content":"If you want to install it on a different database instance, edit the Trackingsetup.cmd script.","pos":[72,166]}]}]},{"pos":[1585,1669],"content":"Open SqlTrackingSample.sln in <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","source":"Open SqlTrackingSample.sln in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"content":"Press CTRL+SHIFT+B to build the solution.","pos":[1679,1720]},{"content":"Press F5 to run the application.","pos":[1730,1762]},{"content":"The browser window opens and shows the directory listing for the application.","pos":[1773,1850]},{"content":"In the browser, click StockPriceService.xamlx.","pos":[1860,1906]},{"content":"The browser displays the StockPriceService page, which contains the local service WSDL address.","pos":[1916,2011]},{"content":"Copy this address.","pos":[2012,2030]},{"content":"An example of the local service WSDL address is http://localhost:65193/StockPriceService.xamlx?wsdl.","pos":[2041,2141]},{"content":"Using <ph id=\"ph1\">[!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)]</ph>, run the WCF test client (WcfTestClient.exe).","pos":[2151,2268],"source":"Using [!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)], run the WCF test client (WcfTestClient.exe)."},{"content":"It is located in the Microsoft Visual Studio 10.0\\Common7\\IDE directory.","pos":[2269,2341]},{"content":"In the WCF test client, click the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu and select <bpt id=\"p2\">**</bpt>Add Service<ept id=\"p2\">**</ept>.","pos":[2350,2425],"source":"In the WCF test client, click the **File** menu and select **Add Service**."},{"content":"Paste the local service address in the textbox.","pos":[2426,2473]},{"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the dialog.","pos":[2474,2507],"source":" Click **OK** to close the dialog."},{"content":"In the WCF test client, double click <bpt id=\"p1\">**</bpt>GetStockPrice<ept id=\"p1\">**</ept>.","pos":[2517,2572],"source":"In the WCF test client, double click **GetStockPrice**."},{"content":"This opens the <ph id=\"ph1\">`GetStockPrice`</ph> operation that takes one parameter, type in the value <ph id=\"ph2\">`Contoso`</ph> and click <bpt id=\"p1\">**</bpt>Invoke<ept id=\"p1\">**</ept>.","pos":[2573,2689],"source":" This opens the `GetStockPrice` operation that takes one parameter, type in the value `Contoso` and click **Invoke**."},{"content":"The emitted tracking records are written to a SQL database.","pos":[2699,2758]},{"content":"To view the tracking records, open the TrackingSample database in SQL Management Studio and navigate to the tables.","pos":[2759,2874]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> SQL Server Management Studio, see <bpt id=\"p1\">[</bpt>Introducing SQL Server Management Studio<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=165645)</ept>.","pos":[2875,3055],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] SQL Server Management Studio, see [Introducing SQL Server Management Studio](http://go.microsoft.com/fwlink/?LinkId=165645)."},{"content":"SQL Server 2008 Management Studio Express can be downloaded <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=180520)</ept>.","pos":[3056,3170],"source":" SQL Server 2008 Management Studio Express can be downloaded [here](http://go.microsoft.com/fwlink/?LinkId=180520)."},{"content":"Running a select query on the tables displays the data within the tracking records stored in the respective tables.","pos":[3171,3286]},{"pos":[3297,3320],"content":"To uninstall the sample","linkify":"To uninstall the sample","nodes":[{"content":"To uninstall the sample","pos":[0,23]}]},{"content":"Run theTrackingcleanup.cmd script in the sample directory (\\WF\\Basic\\Tracking\\SqlTracking).","pos":[3330,3421]},{"pos":[3433,3611],"content":"[!NOTE]\nThe Trackingcleanup.cmd attempts to delete the database in your local computer SQL Express. If you are using another SQL server instance, edit Trackingcleanup.cmd.","leadings":["","    >  "],"nodes":[{"content":"The Trackingcleanup.cmd attempts to delete the database in your local computer SQL Express. If you are using another SQL server instance, edit Trackingcleanup.cmd.","pos":[8,171],"nodes":[{"content":"The Trackingcleanup.cmd attempts to delete the database in your local computer SQL Express.","pos":[0,91]},{"content":"If you are using another SQL server instance, edit Trackingcleanup.cmd.","pos":[92,163]}]}]},{"pos":[3619,3752],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing.","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[3806,4132],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[4133,4183]},{"pos":[4265,4273],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[4277,4354],"content":"<bpt id=\"p1\">[</bpt>AppFabric Monitoring Samples<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=193959)</ept>","source":"[AppFabric Monitoring Samples](http://go.microsoft.com/fwlink/?LinkId=193959)"}]}