{"content":"---\ntitle: \"How to: Use Multiple Security Tokens of the Same Type\"\nms.date: \"03/30/2017\"\nms.assetid: cf179f48-4ed4-4caa-86a5-ef8eecc231cd\n---\n# How to: Use Multiple Security Tokens of the Same Type\n-   In [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] 3.0, a client message only contained one token of any given type. Now client messages can contain multiple tokens of a type. This topic shows how to include multiple tokens of the same type in a client message.  \n  \n-   Note that you cannot configure a service in this way: a service can contain only one supporting token.  \n  \n### To use multiple security tokens of the same type  \n  \n1.  Create an empty binding element collection to be populated.  \n  \n     [!code-csharp[C_CustomBinding#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#9)]  \n  \n2.  Create a <xref:System.ServiceModel.Channels.SecurityBindingElement> by calling <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A>.  \n  \n     [!code-csharp[C_CustomBinding#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#10)]  \n  \n3.  Create a <xref:System.ServiceModel.Security.Tokens.SupportingTokenParameters> collection.  \n  \n     [!code-csharp[C_CustomBinding#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#11)]  \n  \n4.  Add SAML tokens to the collection.  \n  \n     [!code-csharp[C_CustomBinding#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#12)]  \n  \n5.  Add the collection to the <xref:System.ServiceModel.Channels.SecurityBindingElement>.  \n  \n     [!code-csharp[C_CustomBinding#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#13)]  \n  \n6.  Add binding elements to the binding element collection.  \n  \n     [!code-csharp[C_CustomBinding#14](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#14)]  \n  \n7.  Return a new custom binding created from the binding element collection.  \n  \n     [!code-csharp[C_CustomBinding#15](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#15)]  \n  \n## Example  \n The following is the entire method described by the preceding procedure.  \n  \n [!code-csharp[C_CustomBinding#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#7)]  \n","nodes":[{"pos":[4,137],"embed":true,"restype":"x-metadata","content":"title: \"How to: Use Multiple Security Tokens of the Same Type\"\nms.date: \"03/30/2017\"\nms.assetid: cf179f48-4ed4-4caa-86a5-ef8eecc231cd","nodes":[{"content":"How to: Use Multiple Security Tokens of the Same Type","nodes":[{"pos":[0,53],"content":"How to: Use Multiple Security Tokens of the Same Type","nodes":[{"content":"How to: Use Multiple Security Tokens of the Same Type","pos":[0,53]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[144,197],"content":"How to: Use Multiple Security Tokens of the Same Type","linkify":"How to: Use Multiple Security Tokens of the Same Type","nodes":[{"content":"How to: Use Multiple Security Tokens of the Same Type","pos":[0,53]}]},{"content":"In <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> 3.0, a client message only contained one token of any given type.","pos":[202,334],"source":"In [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] 3.0, a client message only contained one token of any given type."},{"content":"Now client messages can contain multiple tokens of a type.","pos":[335,393]},{"content":"This topic shows how to include multiple tokens of the same type in a client message.","pos":[394,479]},{"content":"Note that you cannot configure a service in this way: a service can contain only one supporting token.","pos":[489,591]},{"pos":[601,649],"content":"To use multiple security tokens of the same type","linkify":"To use multiple security tokens of the same type","nodes":[{"content":"To use multiple security tokens of the same type","pos":[0,48]}]},{"content":"Create an empty binding element collection to be populated.","pos":[659,718]},{"pos":[865,1044],"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> by calling <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A&gt;</ph>.","source":"Create a <xref:System.ServiceModel.Channels.SecurityBindingElement> by calling <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A>."},{"pos":[1193,1282],"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.Tokens.SupportingTokenParameters&gt;</ph> collection.","source":"Create a <xref:System.ServiceModel.Security.Tokens.SupportingTokenParameters> collection."},{"content":"Add SAML tokens to the collection.","pos":[1431,1465]},{"pos":[1614,1699],"content":"Add the collection to the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph>.","source":"Add the collection to the <xref:System.ServiceModel.Channels.SecurityBindingElement>."},{"content":"Add binding elements to the binding element collection.","pos":[1848,1903]},{"content":"Return a new custom binding created from the binding element collection.","pos":[2052,2124]},{"pos":[2272,2279],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following is the entire method described by the preceding procedure.","pos":[2283,2355]}]}