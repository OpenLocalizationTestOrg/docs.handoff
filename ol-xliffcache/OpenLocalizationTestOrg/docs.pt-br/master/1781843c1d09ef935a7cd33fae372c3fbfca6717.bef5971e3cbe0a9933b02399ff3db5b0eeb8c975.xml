{"content":"---\ntitle: \"How to:Determine the Discovery Version of a Probe Request | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: b3c4e2e2-2957-4074-ae6a-776a5ca84278\ncaps.latest.revision: 3\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to:Determine the Discovery Version of a Probe Request\nA discovery proxy may expose multiple discovery endpoints using different discovery versions. When a UDP multicast Probe request arrives at the proxy the proxy should respond with a multicast suppression message. In order to do this it would have to know the discovery version of the request.  \n  \n### To Determine the Discovery Version of a Probe Request  \n  \n1.  In the method that responds to a Probe request (for example <xref:System.ServiceModel.Discovery.DiscoveryProxy.OnBeginFind%2A>) use the static <xref:System.ServiceModel.OperationContext.Current%2A> property to search for a <xref:System.ServiceModel.Discovery.DiscoveryOperationContextExtension> as shown in the following code.  \n  \n    ```  \n    DiscoveryOperationContextExtension doce = OperationContext.Current.Extensions.Find<DiscoveryOperationContextExtension>();  \n    // Access the discovery version from the DiscoveryOperationContextExtension  \n    doce.DiscoveryVersion;  \n  \n    ```  \n  \n## See Also  \n <xref:System.ServiceModel.Discovery.Configuration.AnnouncementEndpointElement.DiscoveryVersion%2A>   \n [Implementing a Discovery Proxy](../../../../docs/framework/wcf/feature-details/implementing-a-discovery-proxy.md)   \n [Discovery Proxy Sample](../../../../docs/framework/wcf/samples/discovery-proxy-sample.md)","nodes":[{"pos":[4,377],"nodes":[{"content":"How to:Determine the Discovery Version of a Probe Request | Microsoft Docs","nodes":[{"pos":[0,74],"content":"How to:Determine the Discovery Version of a Probe Request | Microsoft Docs","nodes":[{"content":"How to:Determine the Discovery Version of a Probe Request | Microsoft Docs","pos":[0,74]}]}],"pos":[6,83],"yaml":true}],"content":"title: \"How to:Determine the Discovery Version of a Probe Request | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: b3c4e2e2-2957-4074-ae6a-776a5ca84278\ncaps.latest.revision: 3\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[384,441],"content":"How to:Determine the Discovery Version of a Probe Request","linkify":"How to:Determine the Discovery Version of a Probe Request","nodes":[{"content":"How to:Determine the Discovery Version of a Probe Request","pos":[0,57]}]},{"content":"A discovery proxy may expose multiple discovery endpoints using different discovery versions.","pos":[442,535]},{"content":"When a UDP multicast Probe request arrives at the proxy the proxy should respond with a multicast suppression message.","pos":[536,654]},{"content":"In order to do this it would have to know the discovery version of the request.","pos":[655,734]},{"pos":[744,797],"content":"To Determine the Discovery Version of a Probe Request","linkify":"To Determine the Discovery Version of a Probe Request","nodes":[{"content":"To Determine the Discovery Version of a Probe Request","pos":[0,53]}]},{"content":"In the method that responds to a Probe request (for example <ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.DiscoveryProxy.OnBeginFind%2A&gt;</ph>) use the static <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationContext.Current%2A&gt;</ph> property to search for a <ph id=\"ph3\">&lt;xref:System.ServiceModel.Discovery.DiscoveryOperationContextExtension&gt;</ph> as shown in the following code.","pos":[807,1133],"source":"In the method that responds to a Probe request (for example <xref:System.ServiceModel.Discovery.DiscoveryProxy.OnBeginFind%2A>) use the static <xref:System.ServiceModel.OperationContext.Current%2A> property to search for a <xref:System.ServiceModel.Discovery.DiscoveryOperationContextExtension> as shown in the following code."},{"pos":[1407,1415],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Discovery.Configuration.AnnouncementEndpointElement.DiscoveryVersion%2A&gt;</ph>","pos":[1419,1517],"source":"<xref:System.ServiceModel.Discovery.Configuration.AnnouncementEndpointElement.DiscoveryVersion%2A> "},{"content":"<bpt id=\"p1\">[</bpt>Implementing a Discovery Proxy<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/implementing-a-discovery-proxy.md)</ept><ph id=\"ph1\"> </ph>","pos":[1522,1637],"source":"[Implementing a Discovery Proxy](../../../../docs/framework/wcf/feature-details/implementing-a-discovery-proxy.md) "},{"content":"<bpt id=\"p1\">[</bpt>Discovery Proxy Sample<ept id=\"p1\">](../../../../docs/framework/wcf/samples/discovery-proxy-sample.md)</ept>","pos":[1641,1731],"source":"[Discovery Proxy Sample](../../../../docs/framework/wcf/samples/discovery-proxy-sample.md)"}]}