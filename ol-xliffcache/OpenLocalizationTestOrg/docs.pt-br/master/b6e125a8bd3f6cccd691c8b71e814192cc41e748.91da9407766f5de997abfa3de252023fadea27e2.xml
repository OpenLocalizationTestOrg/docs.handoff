{"content":"---\ntitle: \"Form Post | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: fa6f84f9-2e07-4e3c-92d0-a245308b7dff\ncaps.latest.revision: 9\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Form Post\nThis sample demonstrates how to extend the WCF REST programming model to support new incoming request formats. The sample also includes an implementation of a formatter that can deserialize a request from an HTML form post into a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type. In addition, the sample uses a T4 Template to return an HTML page, which provides the HTML form that users can post back to the WCF REST service.  \n  \n## Demonstrates  \n  \n-   Extending support for incoming request formats.  \n  \n-   Integrating T4 templates.  \n  \n## Discussion  \n This sample consists of two projects. One project is the HtmlFormProcessing library that includes a custom request formatter that can deserialize HTML form posts into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types. The second project is a console application that extends the Basic Resource Service sample to use the custom request formatter of the HtmlFormProcessing library.  \n  \n The custom formatter that can deserialize HTML form posts (HtmlFormRequestDispatchFormatter) accepts both [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types that can be converted from a string using the <xref:System.ServiceModel.Dispatcher.QueryStringConverter> and types marked with <xref:System.Runtime.Serialization.DataContractAttribute> that only have members that can be converted from a string using the QueryStringConverter.  \n  \n The HtmlFormProcessing library project also includes an abstract base class, `RequestBodyDispatchFormatter`, which can be used to create other custom request formatters. Deriving from the `RequestBodyDispatchFormatter` allows a developer to focus on the request body deserialization logic, which allows the base class to map the URI template parameters to the operation’s method parameters. Also in the HtmlFormProcessing library project is the `HtmlFormProcessingBehavior` class, which demonstrates how to derive from the <xref:System.ServiceModel.Description.WebHttpBehavior> to replace the default request formatter with a custom request formatter.  \n  \n This console application project extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample. The Basic Resource Service sample demonstrates how to expose a resource in a manner that uses the WCF REST programming model. In the Basic Resource Service sample, a customer collection resource is exposed such that customers in the collection can be created, retrieved, updated and deleted. The Basic Resource Service sample only uses the two natively supported incoming request formats, XML and JSON.  \n  \n The console application in this Form Post sample utilizes the custom formatter in the HtmlFormProcessing library, which allows users to create customers by sending a request from an HTML form post using a browser. It also adds an operation that returns an HTML page, which includes the form to be posted back to the service. This HTML page is generated using a preprocessed T4 template, which consists of a .tt file and an auto-generated .cs file. The .tt file allows a developer to write a response in a template form that contains variables and control structures. [!INCLUDE[crabout](../../../../includes/crabout-md.md)] T4, see [Generating Artifacts By Using Text Templates](http://go.microsoft.com/fwlink/?LinkId=178139).  \n  \n#### To run the sample  \n  \n1.  Open the solution for the Form Post Sample. When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully. Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing \"Run as Administrator\" from the context menu.  \n  \n2.  Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application FormPost project.  \n  \n3.  The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.  \n  \n4.  As the sample runs, the client writes the status of the current activity, whether it be adding a customer, updating a customer, deleting a customer or getting a list of current customers from the service to the console window.  \n  \n5.  You are then prompted to browse to the URI of the customer form. Open a browser and browse to the given URI. Type in a name and address for the customer and click the **Submit** button.  \n  \n6.  Press any key for the console window to continue running the sample.  \n  \n7.  As the sample completes, notice that the customer you created using the browser is included in the final list of customers.  \n  \n8.  Press any key to terminate the sample.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Extensibility\\Web\\FormPost`","nodes":[{"pos":[12,38],"content":"Form Post | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Form Post | Microsoft Docs","pos":[0,26]}]},{"pos":[336,345],"content":"Form Post","linkify":"Form Post","nodes":[{"content":"Form Post","pos":[0,9]}]},{"content":"This sample demonstrates how to extend the WCF REST programming model to support new incoming request formats.","pos":[346,456]},{"content":"The sample also includes an implementation of a formatter that can deserialize a request from an HTML form post into a <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> type.","pos":[457,645],"source":" The sample also includes an implementation of a formatter that can deserialize a request from an HTML form post into a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type."},{"content":"In addition, the sample uses a T4 Template to return an HTML page, which provides the HTML form that users can post back to the WCF REST service.","pos":[646,791]},{"pos":[800,812],"content":"Demonstrates","linkify":"Demonstrates","nodes":[{"content":"Demonstrates","pos":[0,12]}]},{"content":"Extending support for incoming request formats.","pos":[822,869]},{"content":"Integrating T4 templates.","pos":[879,904]},{"pos":[913,923],"content":"Discussion","linkify":"Discussion","nodes":[{"content":"Discussion","pos":[0,10]}]},{"content":"This sample consists of two projects.","pos":[927,964]},{"content":"One project is the HtmlFormProcessing library that includes a custom request formatter that can deserialize HTML form posts into <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> types.","pos":[965,1164],"source":" One project is the HtmlFormProcessing library that includes a custom request formatter that can deserialize HTML form posts into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types."},{"content":"The second project is a console application that extends the Basic Resource Service sample to use the custom request formatter of the HtmlFormProcessing library.","pos":[1165,1326]},{"pos":[1333,1784],"content":"The custom formatter that can deserialize HTML form posts (HtmlFormRequestDispatchFormatter) accepts both <ph id=\"ph1\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph> types that can be converted from a string using the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Dispatcher.QueryStringConverter&gt;</ph> and types marked with <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.DataContractAttribute&gt;</ph> that only have members that can be converted from a string using the QueryStringConverter.","source":"The custom formatter that can deserialize HTML form posts (HtmlFormRequestDispatchFormatter) accepts both [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types that can be converted from a string using the <xref:System.ServiceModel.Dispatcher.QueryStringConverter> and types marked with <xref:System.Runtime.Serialization.DataContractAttribute> that only have members that can be converted from a string using the QueryStringConverter."},{"content":"The HtmlFormProcessing library project also includes an abstract base class, <ph id=\"ph1\">`RequestBodyDispatchFormatter`</ph>, which can be used to create other custom request formatters.","pos":[1791,1960],"source":"The HtmlFormProcessing library project also includes an abstract base class, `RequestBodyDispatchFormatter`, which can be used to create other custom request formatters."},{"content":"Deriving from the <ph id=\"ph1\">`RequestBodyDispatchFormatter`</ph> allows a developer to focus on the request body deserialization logic, which allows the base class to map the URI template parameters to the operation’s method parameters.","pos":[1961,2181],"source":" Deriving from the `RequestBodyDispatchFormatter` allows a developer to focus on the request body deserialization logic, which allows the base class to map the URI template parameters to the operation’s method parameters."},{"content":"Also in the HtmlFormProcessing library project is the <ph id=\"ph1\">`HtmlFormProcessingBehavior`</ph> class, which demonstrates how to derive from the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Description.WebHttpBehavior&gt;</ph> to replace the default request formatter with a custom request formatter.","pos":[2182,2442],"source":" Also in the HtmlFormProcessing library project is the `HtmlFormProcessingBehavior` class, which demonstrates how to derive from the <xref:System.ServiceModel.Description.WebHttpBehavior> to replace the default request formatter with a custom request formatter."},{"content":"This console application project extends the <bpt id=\"p1\">[</bpt>Basic Resource Service<ept id=\"p1\">](../../../../docs/framework/wcf/samples/basic-resource-service.md)</ept> sample.","pos":[2449,2592],"source":"This console application project extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample."},{"content":"The Basic Resource Service sample demonstrates how to expose a resource in a manner that uses the WCF REST programming model.","pos":[2593,2718]},{"content":"In the Basic Resource Service sample, a customer collection resource is exposed such that customers in the collection can be created, retrieved, updated and deleted.","pos":[2719,2884]},{"content":"The Basic Resource Service sample only uses the two natively supported incoming request formats, XML and JSON.","pos":[2885,2995]},{"content":"The console application in this Form Post sample utilizes the custom formatter in the HtmlFormProcessing library, which allows users to create customers by sending a request from an HTML form post using a browser.","pos":[3002,3215]},{"content":"It also adds an operation that returns an HTML page, which includes the form to be posted back to the service.","pos":[3216,3326]},{"content":"This HTML page is generated using a preprocessed T4 template, which consists of a .tt file and an auto-generated .cs file.","pos":[3327,3449]},{"content":"The .tt file allows a developer to write a response in a template form that contains variables and control structures.","pos":[3450,3568]},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> T4, see <bpt id=\"p1\">[</bpt>Generating Artifacts By Using Text Templates<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=178139)</ept>.","pos":[3569,3727],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] T4, see [Generating Artifacts By Using Text Templates](http://go.microsoft.com/fwlink/?LinkId=178139)."},{"pos":[3738,3755],"content":"To run the sample","linkify":"To run the sample","nodes":[{"content":"To run the sample","pos":[0,17]}]},{"content":"Open the solution for the Form Post Sample.","pos":[3765,3808]},{"content":"When launching <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>, you must run as an administrator to execute the sample successfully.","pos":[3809,3965],"source":" When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully."},{"content":"Do this by right-clicking the <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph> icon and choosing \"Run as Administrator\" from the context menu.","pos":[3966,4131],"source":" Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing \"Run as Administrator\" from the context menu."},{"content":"Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application FormPost project.","pos":[4141,4253]},{"content":"The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.","pos":[4263,4392]},{"content":"As the sample runs, the client writes the status of the current activity, whether it be adding a customer, updating a customer, deleting a customer or getting a list of current customers from the service to the console window.","pos":[4402,4628]},{"content":"You are then prompted to browse to the URI of the customer form.","pos":[4638,4702]},{"content":"Open a browser and browse to the given URI.","pos":[4703,4746]},{"content":"Type in a name and address for the customer and click the <bpt id=\"p1\">**</bpt>Submit<ept id=\"p1\">**</ept> button.","pos":[4747,4823],"source":" Type in a name and address for the customer and click the **Submit** button."},{"content":"Press any key for the console window to continue running the sample.","pos":[4833,4901]},{"content":"As the sample completes, notice that the customer you created using the browser is included in the final list of customers.","pos":[4911,5034]},{"content":"Press any key to terminate the sample.","pos":[5044,5082]},{"pos":[5090,5222],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[5276,5602],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5603,5653]}]}