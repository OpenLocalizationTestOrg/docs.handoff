{"content":"---\ntitle: \"How to: Configure Tracking with WorkflowServiceHost | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: ed1485fe-7529-4351-bca3-8bb915260b17\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Configure Tracking with WorkflowServiceHost\nThis topic explains how to configure tracking for a [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] workflow hosted in <xref:System.ServiceModel.Activities.WorkflowServiceHost>. It is configured through a Web.config file by specifying a service behavior.  \n  \n### Configure Tracking in Configuration  \n  \n1.  Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <`behavior`> element in a configuration file, as shown in the following example.  \n  \n    ```  \n    <behaviors>  \n       <serviceBehaviors>  \n         <behavior>  \n           <etwTracking profileName=\"Sample Tracking Profile\" />  \n         </behavior>              \n       </serviceBehaviors>  \n    <behaviors>  \n  \n    ```  \n  \n    > [!NOTE]\n    >  The preceding configuration sample is using simplified configuration. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).  \n  \n     The preceding configuration sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name. Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element. The tracking profile contains tracking queries that permit a tracking participant to subscribe to workflow events that are emitted when the state of a workflow instance changes at runtime. The following example shows how to create a tracking profile.  \n  \n    ```xml  \n    <system.serviceModel>  \n        <tracking>   \n         <trackingProfile name=\"Sample Tracking Profile\">  \n            <workflow activityDefinitionId=\"*\">  \n               <workflowInstanceQueries>  \n                 <workflowInstanceQuery>  \n                    <states>  \n                       <state name=\"Started\"/>  \n                       <state name=\"Completed\"/>  \n                    </states>  \n                </workflowInstanceQuery>  \n             </workflowInstanceQueries>  \n           </workflow>  \n         </trackingProfile>   \n       </tracking>  \n    </system.serviceModel>  \n  \n    ```  \n  \n     [!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md).  \n  \n     [!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md).  \n  \n### Configure Tracking in Code  \n  \n1.  Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <xref:System.ServiceModel.Activities.Description.EtwTrackingBehavior> behavior in code, as shown in the following example.  \n  \n    ```csharp  \n    host.Description.Behaviors.Add(new EtwTrackingBehavior { ProfileName = \"Sample Tracking Profile\" });  \n    ```  \n  \n     The preceding code sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name. Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element as shown in the previous section.  \n  \n     [!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md).  \n  \n     [!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md). For an example of configuring tracking programmatically see [Configuring Tracking for a Workflow](../../../../docs/framework/windows-workflow-foundation/configuring-tracking-for-a-workflow.md).  \n  \n## See Also  \n [Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)   \n [Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md)   \n [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)\n","nodes":[{"pos":[4,372],"nodes":[{"content":"How to: Configure Tracking with WorkflowServiceHost | Microsoft Docs","nodes":[{"pos":[0,68],"content":"How to: Configure Tracking with WorkflowServiceHost | Microsoft Docs","nodes":[{"content":"How to: Configure Tracking with WorkflowServiceHost | Microsoft Docs","pos":[0,68]}]}],"pos":[6,77],"yaml":true}],"content":"title: \"How to: Configure Tracking with WorkflowServiceHost | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: ed1485fe-7529-4351-bca3-8bb915260b17\ncaps.latest.revision: 14\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"","yamlblock":true},{"pos":[379,430],"content":"How to: Configure Tracking with WorkflowServiceHost","linkify":"How to: Configure Tracking with WorkflowServiceHost","nodes":[{"content":"How to: Configure Tracking with WorkflowServiceHost","pos":[0,51]}]},{"content":"This topic explains how to configure tracking for a <ph id=\"ph1\">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]</ph> workflow hosted in <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.","pos":[431,638],"source":"This topic explains how to configure tracking for a [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] workflow hosted in <xref:System.ServiceModel.Activities.WorkflowServiceHost>."},{"content":"It is configured through a Web.config file by specifying a service behavior.","pos":[639,715]},{"pos":[725,760],"content":"Configure Tracking in Configuration","linkify":"Configure Tracking in Configuration","nodes":[{"content":"Configure Tracking in Configuration","pos":[0,35]}]},{"pos":[770,925],"content":"Add the <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> using the &lt;<ph id=\"ph2\">`behavior`</ph>&gt; element in a configuration file, as shown in the following example.","source":"Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <`behavior`> element in a configuration file, as shown in the following example."},{"pos":[1180,1411],"content":"[!NOTE]\nThe preceding configuration sample is using simplified configuration. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","leadings":["","    >  "],"nodes":[{"content":"The preceding configuration sample is using simplified configuration. [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md).","pos":[8,224],"nodes":[{"content":"The preceding configuration sample is using simplified configuration.","pos":[0,69]},{"content":"<ph id=\"ph1\">[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]</ph><bpt id=\"p1\">[</bpt>Simplified Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/simplified-configuration.md)</ept>.","pos":[70,216],"source":"[!INCLUDE[crdefault](../../../../includes/crdefault-md.md)][Simplified Configuration](../../../../docs/framework/wcf/simplified-configuration.md)."}]}]},{"content":"The preceding configuration sample adds a <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> and specifies a tracking profile name.","pos":[1422,1559],"source":"The preceding configuration sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name."},{"content":"Tracking profiles are created in a &lt;<ph id=\"ph1\">`trackingProfile`</ph>&gt; element within a &lt;<ph id=\"ph2\">`tracking`</ph>&gt; element.","pos":[1560,1653],"source":" Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element."},{"content":"The tracking profile contains tracking queries that permit a tracking participant to subscribe to workflow events that are emitted when the state of a workflow instance changes at runtime.","pos":[1654,1842]},{"content":"The following example shows how to create a tracking profile.","pos":[1843,1904]},{"pos":[2544,2720],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> tracking profiles, see <bpt id=\"p1\">[</bpt>Tracking Profiles<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)</ept>.","source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)."},{"pos":[2731,2933],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> tracking in general, see <bpt id=\"p1\">[</bpt>Workflow Tracking and Tracing<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)</ept>.","source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)."},{"pos":[2943,2969],"content":"Configure Tracking in Code","linkify":"Configure Tracking in Code","nodes":[{"content":"Configure Tracking in Code","pos":[0,26]}]},{"content":"Add the <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> using the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Activities.Description.EtwTrackingBehavior&gt;</ph> behavior in code, as shown in the following example.","pos":[2979,3176],"source":"Add the <xref:System.Activities.Tracking.EtwTrackingParticipant> using the <xref:System.ServiceModel.Activities.Description.EtwTrackingBehavior> behavior in code, as shown in the following example."},{"content":"The preceding code sample adds a <ph id=\"ph1\">&lt;xref:System.Activities.Tracking.EtwTrackingParticipant&gt;</ph> and specifies a tracking profile name.","pos":[3323,3451],"source":"The preceding code sample adds a <xref:System.Activities.Tracking.EtwTrackingParticipant> and specifies a tracking profile name."},{"content":"Tracking profiles are created in a &lt;<ph id=\"ph1\">`trackingProfile`</ph>&gt; element within a &lt;<ph id=\"ph2\">`tracking`</ph>&gt; element as shown in the previous section.","pos":[3452,3578],"source":" Tracking profiles are created in a <`trackingProfile`> element within a <`tracking`> element as shown in the previous section."},{"pos":[3589,3765],"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> tracking profiles, see <bpt id=\"p1\">[</bpt>Tracking Profiles<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)</ept>.","source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking profiles, see [Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)."},{"content":"<ph id=\"ph1\">[!INCLUDE[crabout](../../../../includes/crabout-md.md)]</ph> tracking in general, see <bpt id=\"p1\">[</bpt>Workflow Tracking and Tracing<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)</ept>.","pos":[3776,3978],"source":"[!INCLUDE[crabout](../../../../includes/crabout-md.md)] tracking in general, see [Workflow Tracking and Tracing](../../../../docs/framework/windows-workflow-foundation/workflow-tracking-and-tracing.md)."},{"content":"For an example of configuring tracking programmatically see <bpt id=\"p1\">[</bpt>Configuring Tracking for a Workflow<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/configuring-tracking-for-a-workflow.md)</ept>.","pos":[3979,4172],"source":" For an example of configuring tracking programmatically see [Configuring Tracking for a Workflow](../../../../docs/framework/windows-workflow-foundation/configuring-tracking-for-a-workflow.md)."},{"pos":[4181,4189],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Simplified Configuration for WCF Services<ept id=\"p1\">](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[4193,4322],"source":"[Simplified Configuration for WCF Services](../../../../docs/framework/wcf/samples/simplified-configuration-for-wcf-services.md) "},{"content":"<bpt id=\"p1\">[</bpt>Workflow Services<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/workflow-services.md)</ept><ph id=\"ph1\"> </ph>","pos":[4326,4415],"source":"[Workflow Services](../../../../docs/framework/wcf/feature-details/workflow-services.md) "},{"content":"<bpt id=\"p1\">[</bpt>Tracking Profiles<ept id=\"p1\">](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)</ept>","pos":[4419,4515],"source":"[Tracking Profiles](../../../../docs/framework/windows-workflow-foundation/tracking-profiles.md)"}]}