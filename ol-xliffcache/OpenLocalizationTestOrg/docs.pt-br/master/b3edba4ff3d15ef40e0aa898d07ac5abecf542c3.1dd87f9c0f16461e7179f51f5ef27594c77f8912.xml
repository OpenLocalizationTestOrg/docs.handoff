{"content":"---\ntitle: \"Hierarchical Configuration Model | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 28dcc698-226c-4b77-9e51-8bf45a36216c\ncaps.latest.revision: 12\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Hierarchical Configuration Model\nThis sample demonstrates how to implement a hierarchy of configuration files for services. It also shows how bindings, service behaviors, and endpoint behaviors are inherited from higher levels in the hierarchy.  \n  \n## Sample details  \n One of the features developed for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] is the improvement in the hierarchical configuration model. An example of a hierarchical configuration model would be the one defined by Machine.config -> Rootweb.config -> Web.config. In [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], those bindings and behaviors that are defined in upper levels in the configuration hierarchy are added to your services with no explicit configuration. This sample shows how it is possible to simplify your service configuration by relying on configuration elements defined at the computer or the application level.  \n  \n This sample consists of nine services, defined in three levels of hierarchy. `Service1` is at the root. `Service2` and `Service3` inherit the default elements from `Service1`. `Service4`, `Service5`, `Service6` and `Service7` are defined at a third level of the hierarchy, inheriting the default elements from `Service3`. Finally `Service10` and `Service11` are at a fourth level of the hierarchy.  \n  \n All the services implement the `IDesc` contract. The following is the definition of the `IDesc` interface that shows the methods exposed in this interface. The `IDesc` interface is defined in Service1.cs.  \n  \n```  \n// Define a service contract  \n[ServiceContract(Namespace=\"http://Microsoft.Samples.ConfigHierarchicalModel\")]  \npublic interface IDesc  \n{  \n    [OperationContract]  \n    List<string> ListEndpoints();  \n    [OperationContract]  \n    List<string> ListServiceBehaviors();  \n    [OperationContract]  \n    List<string> ListEndpointBehaviors();  \n}  \n  \n```  \n  \n The implementation of these methods by the services is straightforward. `ListEndpoints` iterates through all the service endpoints and returns a list of all the endpoints that the service has. `ListServiceBehaviors` iterates through all the behaviors added to the service and returns the list of all the service behaviors associated with the service. `ListEndpointBehaviors` behaves in a similar way to `ListServiceBehaviors`, but it returns the list of endpoint behaviors instead.  \n  \n This implementation allows the client to know how many endpoints the service is exposing and which service behaviors and endpoint behaviors have been added to the service. The client that has been implemented as part of the sample adds a service reference to all the services in the solution and shows these elements for each one of the services.  \n  \n## To use this sample  \n  \n#### To run the client  \n  \n1.  Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the ConfigHierarchicalModel.sln file.  \n  \n2.  The client project is not already set up as the start-up project, follow these steps.  \n  \n    1.  In **Solution Explorer**, right-click the solution and then select **Properties**.  \n  \n    2.  In **Common Properties**, select **Startup Project**, and then click **Single startup project**.  \n  \n    3.  From the **Single startup project** drop-down, select **Client**.  \n  \n    4.  Click **OK** to close the dialog.  \n  \n3.  To build the sample, press CTRL+SHIFT+B.  \n  \n4.  To run the client, press Ctrl+F5.  \n  \n> [!NOTE]\n>  If these steps do not work, then make sure that your environment has been properly set up, using the following steps.  \n>   \n>  1.  Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  \n> 2.  To build the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md).  \n> 3.  To run the sample in a single or multiple computer configurations, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md).  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your computer. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WCF\\Basic\\Services\\ConfigHierarchicalModel`  \n  \n## See Also  \n [AppFabric Management Samples](http://go.microsoft.com/fwlink/?LinkId=193960)","nodes":[{"pos":[12,61],"content":"Hierarchical Configuration Model | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Hierarchical Configuration Model | Microsoft Docs","pos":[0,49]}]},{"pos":[360,392],"content":"Hierarchical Configuration Model","linkify":"Hierarchical Configuration Model","nodes":[{"content":"Hierarchical Configuration Model","pos":[0,32]}]},{"content":"This sample demonstrates how to implement a hierarchy of configuration files for services.","pos":[393,483]},{"content":"It also shows how bindings, service behaviors, and endpoint behaviors are inherited from higher levels in the hierarchy.","pos":[484,604]},{"pos":[613,627],"content":"Sample details","linkify":"Sample details","nodes":[{"content":"Sample details","pos":[0,14]}]},{"content":"One of the features developed for <ph id=\"ph1\">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]</ph> in <ph id=\"ph2\">[!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)]</ph> is the improvement in the hierarchical configuration model.","pos":[631,849],"source":"One of the features developed for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)] is the improvement in the hierarchical configuration model."},{"content":"An example of a hierarchical configuration model would be the one defined by Machine.config -&gt; Rootweb.config -&gt; Web.config.","pos":[850,974],"source":" An example of a hierarchical configuration model would be the one defined by Machine.config -> Rootweb.config -> Web.config."},{"content":"In <ph id=\"ph1\">[!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)]</ph>, those bindings and behaviors that are defined in upper levels in the configuration hierarchy are added to your services with no explicit configuration.","pos":[975,1198],"source":" In [!INCLUDE[netfx40_short](../../../../includes/netfx40-short-md.md)], those bindings and behaviors that are defined in upper levels in the configuration hierarchy are added to your services with no explicit configuration."},{"content":"This sample shows how it is possible to simplify your service configuration by relying on configuration elements defined at the computer or the application level.","pos":[1199,1361]},{"content":"This sample consists of nine services, defined in three levels of hierarchy.","pos":[1368,1444]},{"content":"<ph id=\"ph1\">`Service1`</ph> is at the root.","pos":[1445,1471],"source":"`Service1` is at the root."},{"content":"<ph id=\"ph1\">`Service2`</ph> and <ph id=\"ph2\">`Service3`</ph> inherit the default elements from <ph id=\"ph3\">`Service1`</ph>.","pos":[1472,1543],"source":"`Service2` and `Service3` inherit the default elements from `Service1`."},{"content":"<ph id=\"ph1\">`Service4`</ph>, <ph id=\"ph2\">`Service5`</ph>, <ph id=\"ph3\">`Service6`</ph> and <ph id=\"ph4\">`Service7`</ph> are defined at a third level of the hierarchy, inheriting the default elements from <ph id=\"ph5\">`Service3`</ph>.","pos":[1544,1689],"source":"`Service4`, `Service5`, `Service6` and `Service7` are defined at a third level of the hierarchy, inheriting the default elements from `Service3`."},{"content":"Finally <ph id=\"ph1\">`Service10`</ph> and <ph id=\"ph2\">`Service11`</ph> are at a fourth level of the hierarchy.","pos":[1690,1765],"source":" Finally `Service10` and `Service11` are at a fourth level of the hierarchy."},{"content":"All the services implement the <ph id=\"ph1\">`IDesc`</ph> contract.","pos":[1772,1820],"source":"All the services implement the `IDesc` contract."},{"content":"The following is the definition of the <ph id=\"ph1\">`IDesc`</ph> interface that shows the methods exposed in this interface.","pos":[1821,1927],"source":" The following is the definition of the `IDesc` interface that shows the methods exposed in this interface."},{"content":"The <ph id=\"ph1\">`IDesc`</ph> interface is defined in Service1.cs.","pos":[1928,1976],"source":" The `IDesc` interface is defined in Service1.cs."},{"content":"The implementation of these methods by the services is straightforward.","pos":[2348,2419]},{"content":"<ph id=\"ph1\">`ListEndpoints`</ph> iterates through all the service endpoints and returns a list of all the endpoints that the service has.","pos":[2420,2540],"source":"`ListEndpoints` iterates through all the service endpoints and returns a list of all the endpoints that the service has."},{"content":"<ph id=\"ph1\">`ListServiceBehaviors`</ph> iterates through all the behaviors added to the service and returns the list of all the service behaviors associated with the service.","pos":[2541,2698],"source":"`ListServiceBehaviors` iterates through all the behaviors added to the service and returns the list of all the service behaviors associated with the service."},{"content":"<ph id=\"ph1\">`ListEndpointBehaviors`</ph> behaves in a similar way to <ph id=\"ph2\">`ListServiceBehaviors`</ph>, but it returns the list of endpoint behaviors instead.","pos":[2699,2829],"source":"`ListEndpointBehaviors` behaves in a similar way to `ListServiceBehaviors`, but it returns the list of endpoint behaviors instead."},{"content":"This implementation allows the client to know how many endpoints the service is exposing and which service behaviors and endpoint behaviors have been added to the service.","pos":[2836,3007]},{"content":"The client that has been implemented as part of the sample adds a service reference to all the services in the solution and shows these elements for each one of the services.","pos":[3008,3182]},{"pos":[3191,3209],"content":"To use this sample","linkify":"To use this sample","nodes":[{"content":"To use this sample","pos":[0,18]}]},{"pos":[3220,3237],"content":"To run the client","linkify":"To run the client","nodes":[{"content":"To run the client","pos":[0,17]}]},{"pos":[3247,3368],"content":"Using <ph id=\"ph1\">[!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)]</ph>, open the ConfigHierarchicalModel.sln file.","source":"Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open the ConfigHierarchicalModel.sln file."},{"content":"The client project is not already set up as the start-up project, follow these steps.","pos":[3378,3463]},{"pos":[3477,3559],"content":"In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the solution and then select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","source":"In **Solution Explorer**, right-click the solution and then select **Properties**."},{"pos":[3573,3669],"content":"In <bpt id=\"p1\">**</bpt>Common Properties<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Startup Project<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Single startup project<ept id=\"p3\">**</ept>.","source":"In **Common Properties**, select **Startup Project**, and then click **Single startup project**."},{"pos":[3683,3748],"content":"From the <bpt id=\"p1\">**</bpt>Single startup project<ept id=\"p1\">**</ept> drop-down, select <bpt id=\"p2\">**</bpt>Client<ept id=\"p2\">**</ept>.","source":"From the **Single startup project** drop-down, select **Client**."},{"pos":[3762,3795],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the dialog.","source":"Click **OK** to close the dialog."},{"content":"To build the sample, press CTRL+SHIFT+B.","pos":[3805,3845]},{"content":"To run the client, press Ctrl+F5.","pos":[3855,3888]},{"pos":[3896,4024],"content":"[!NOTE]\n If these steps do not work, then make sure that your environment has been properly set up, using the following steps.","leadings":["","> "],"nodes":[{"content":"If these steps do not work, then make sure that your environment has been properly set up, using the following steps.","pos":[9,126]}]},{"pos":[4039,4238],"content":"Ensure that you have performed the <bpt id=\"p1\">[</bpt>One-Time Setup Procedure for the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)</ept>.","source":"Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)."},{"pos":[4247,4417],"content":"To build the solution, follow the instructions in <bpt id=\"p1\">[</bpt>Building the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/building-the-samples.md)</ept>.","source":"To build the solution, follow the instructions in [Building the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/building-the-samples.md)."},{"pos":[4426,4638],"content":"To run the sample in a single or multiple computer configurations, follow the instructions in <bpt id=\"p1\">[</bpt>Running the Windows Communication Foundation Samples<ept id=\"p1\">](../../../../docs/framework/wcf/samples/running-the-samples.md)</ept>.","source":"To run the sample in a single or multiple computer configurations, follow the instructions in [Running the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/running-the-samples.md)."},{"pos":[4646,4779],"content":"[!IMPORTANT]\n The samples may already be installed on your computer. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your computer. Check for the following (default) directory before continuing.","pos":[13,131],"nodes":[{"content":"The samples may already be installed on your computer.","pos":[1,55]},{"content":"Check for the following (default) directory before continuing.","pos":[56,118]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[4833,5159],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[5160,5210]},{"pos":[5305,5313],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[5317,5394],"content":"<bpt id=\"p1\">[</bpt>AppFabric Management Samples<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=193960)</ept>","source":"[AppFabric Management Samples](http://go.microsoft.com/fwlink/?LinkId=193960)"}]}