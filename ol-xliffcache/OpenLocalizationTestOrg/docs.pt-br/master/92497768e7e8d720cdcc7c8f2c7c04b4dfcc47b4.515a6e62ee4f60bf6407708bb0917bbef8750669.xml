{"content":"---\ntitle: \"Workflow Tracing\"\nms.date: \"03/30/2017\"\nms.assetid: 18737989-0502-4367-b5f6-617ebfb77c96\n---\n# Workflow Tracing\nWorkflow tracing offers a way to capture diagnostic information using .NET Framework trace listeners. Tracing can be enabled if a problem is detected with the application and then disabled again once the problem is resolved. There are two ways you could enable debug tracing for workflows. You can configure it using the Event Trace viewer or you can use <xref:System.Diagnostics> to send trace events to a file.  \n  \n## Enabling Debug Tracing in ETW  \n To enable tracing using ETW, enable the Debug channel in Event Viewer:  \n  \n1.  Navigate to analytic and debug logs node in Event Viewer.  \n  \n2.  In the tree view in Event Viewer, navigate to **Event Viewer->Applications and Services Logs->Microsoft->Windows->Application Server-Applications**. Right-click **Application Server-Applications** and select **View->Show Analytic and Debug Logs**. Right-click **Debug** and select **Enable Log**.  \n  \n3.  When a workflow runs the debug and traces are emitted to ETW debug channel, they can be viewed in the Event Viewer. Navigate to **Event Viewer->Applications and Services Logs->Microsoft->Windows->Application Server-Applications**. Right-click **Debug** and select **Refresh**.  \n  \n4.  The default analytic trace buffer size is only 4 kilobytes (KB); it is recommended to increase the size to 32 KB. To do this, perform the following steps.  \n  \n    1.  Execute the following command in the current framework directory (for example, C:\\Windows\\Microsoft.NET\\Framework\\v4.0.21203): `wevtutil um Microsoft.Windows.ApplicationServer.Applications.man`  \n  \n    2.  Change the \\<bufferSize> value in the Windows.ApplicationServer.Applications.man file to 32.  \n  \n        ```xml  \n        <channel name=\"Microsoft-Windows-Application Server-Applications/Analytic\" chid=\"ANALYTIC_CHANNEL\" symbol=\"ANALYTIC_CHANNEL\" type=\"Analytic\" enabled=\"false\" isolation=\"Application\" message=\"$(string.MICROSOFT_WINDOWS_APPLICATIONSERVER_APPLICATIONS.channel.ANALYTIC_CHANNEL.message)\" >  \n                    <publishing>  \n                      <bufferSize>32</bufferSize>  \n                    </publishing>  \n                  </channel>  \n        ```  \n  \n    3.  Execute the following command in the current framework directory (for example, C:\\Windows\\Microsoft.NET\\Framework\\v4.0.21203): `wevtutil im Microsoft.Windows.ApplicationServer.Applications.man`  \n  \n> [!NOTE]\n>  If you are using the .NET Framework 4 Client Profile, you must first register the ETW manifest by running the following command from the .NET Framework 4 directory: `ServiceModelReg.exe –i –c:etw`  \n  \n## Enabling Debug Tracing using System.Diagnostics  \n These listeners can be configured in the App.config file of the workflow application, or the Web.config for a workflow service. In this example, a [TextWriterTraceListener](https://go.microsoft.com/fwlink/?LinkId=165424) is configured to save tracing information to the MyTraceLog.txt file in the current directory.  \n  \n```xml  \n<configuration>  \n  <system.diagnostics>  \n    <sources>  \n      <source name=\"System.Activities\" switchValue=\"Information\">  \n        <listeners>  \n          <add name=\"textListener\" />  \n          <remove name=\"Default\" />  \n        </listeners>  \n      </source>  \n    </sources>  \n    <sharedListeners>  \n      <add name=\"textListener\"  \n           type=\"System.Diagnostics.TextWriterTraceListener\"  \n           initializeData=\"MyTraceLog.txt\"  \n           traceOutputOptions=\"ProcessId, DateTime\" />  \n    </sharedListeners>  \n    <trace autoflush=\"true\" indentsize=\"4\">  \n      <listeners>  \n        <add name=\"textListener\" />  \n      </listeners>  \n    </trace>  \n  </system.diagnostics>  \n</configuration>  \n```  \n  \n## See also\n\n- [Windows Server App Fabric Monitoring](https://go.microsoft.com/fwlink/?LinkId=201273)\n- [Monitoring Applications with App Fabric](https://go.microsoft.com/fwlink/?LinkId=201275)\n","nodes":[{"pos":[4,100],"embed":true,"restype":"x-metadata","content":"title: \"Workflow Tracing\"\nms.date: \"03/30/2017\"\nms.assetid: 18737989-0502-4367-b5f6-617ebfb77c96","nodes":[{"content":"Workflow Tracing","nodes":[{"pos":[0,16],"content":"Workflow Tracing","nodes":[{"content":"Workflow Tracing","pos":[0,16]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[107,123],"content":"Workflow Tracing","linkify":"Workflow Tracing","nodes":[{"content":"Workflow Tracing","pos":[0,16]}]},{"content":"Workflow tracing offers a way to capture diagnostic information using .NET Framework trace listeners.","pos":[124,225]},{"content":"Tracing can be enabled if a problem is detected with the application and then disabled again once the problem is resolved.","pos":[226,348]},{"content":"There are two ways you could enable debug tracing for workflows.","pos":[349,413]},{"content":"You can configure it using the Event Trace viewer or you can use <ph id=\"ph1\">&lt;xref:System.Diagnostics&gt;</ph> to send trace events to a file.","pos":[414,536],"source":" You can configure it using the Event Trace viewer or you can use <xref:System.Diagnostics> to send trace events to a file."},{"pos":[545,574],"content":"Enabling Debug Tracing in ETW","linkify":"Enabling Debug Tracing in ETW","nodes":[{"content":"Enabling Debug Tracing in ETW","pos":[0,29]}]},{"content":"To enable tracing using ETW, enable the Debug channel in Event Viewer:","pos":[578,648]},{"content":"Navigate to analytic and debug logs node in Event Viewer.","pos":[658,715]},{"content":"In the tree view in Event Viewer, navigate to <bpt id=\"p1\">**</bpt>Event Viewer-&gt;Applications and Services Logs-&gt;Microsoft-&gt;Windows-&gt;Application Server-Applications<ept id=\"p1\">**</ept>.","pos":[725,873],"source":"In the tree view in Event Viewer, navigate to **Event Viewer->Applications and Services Logs->Microsoft->Windows->Application Server-Applications**."},{"content":"Right-click <bpt id=\"p1\">**</bpt>Application Server-Applications<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>View-&gt;Show Analytic and Debug Logs<ept id=\"p2\">**</ept>.","pos":[874,972],"source":" Right-click **Application Server-Applications** and select **View->Show Analytic and Debug Logs**."},{"content":"Right-click <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Enable Log<ept id=\"p2\">**</ept>.","pos":[973,1021],"source":" Right-click **Debug** and select **Enable Log**."},{"content":"When a workflow runs the debug and traces are emitted to ETW debug channel, they can be viewed in the Event Viewer.","pos":[1031,1146]},{"content":"Navigate to <bpt id=\"p1\">**</bpt>Event Viewer-&gt;Applications and Services Logs-&gt;Microsoft-&gt;Windows-&gt;Application Server-Applications<ept id=\"p1\">**</ept>.","pos":[1147,1261],"source":" Navigate to **Event Viewer->Applications and Services Logs->Microsoft->Windows->Application Server-Applications**."},{"content":"Right-click <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Refresh<ept id=\"p2\">**</ept>.","pos":[1262,1307],"source":" Right-click **Debug** and select **Refresh**."},{"content":"The default analytic trace buffer size is only 4 kilobytes (KB); it is recommended to increase the size to 32 KB.","pos":[1317,1430]},{"content":"To do this, perform the following steps.","pos":[1431,1471]},{"pos":[1485,1678],"content":"Execute the following command in the current framework directory (for example, C:\\Windows\\Microsoft.NET\\Framework\\v4.0.21203): <ph id=\"ph1\">`wevtutil um Microsoft.Windows.ApplicationServer.Applications.man`</ph>","source":"Execute the following command in the current framework directory (for example, C:\\Windows\\Microsoft.NET\\Framework\\v4.0.21203): `wevtutil um Microsoft.Windows.ApplicationServer.Applications.man`"},{"content":"Change the <ph id=\"ph1\">\\&lt;</ph>bufferSize&gt; value in the Windows.ApplicationServer.Applications.man file to 32.","pos":[1692,1784],"source":"Change the \\<bufferSize> value in the Windows.ApplicationServer.Applications.man file to 32."},{"pos":[2281,2474],"content":"Execute the following command in the current framework directory (for example, C:\\Windows\\Microsoft.NET\\Framework\\v4.0.21203): <ph id=\"ph1\">`wevtutil im Microsoft.Windows.ApplicationServer.Applications.man`</ph>","source":"Execute the following command in the current framework directory (for example, C:\\Windows\\Microsoft.NET\\Framework\\v4.0.21203): `wevtutil im Microsoft.Windows.ApplicationServer.Applications.man`"},{"pos":[2482,2689],"content":"[!NOTE]\n If you are using the .NET Framework 4 Client Profile, you must first register the ETW manifest by running the following command from the .NET Framework 4 directory: `ServiceModelReg.exe –i –c:etw`","leadings":["","> "],"nodes":[{"content":"If you are using the .NET Framework 4 Client Profile, you must first register the ETW manifest by running the following command from the .NET Framework 4 directory: <ph id=\"ph1\">`ServiceModelReg.exe –i –c:etw`</ph>","pos":[9,205],"source":"If you are using the .NET Framework 4 Client Profile, you must first register the ETW manifest by running the following command from the .NET Framework 4 directory: `ServiceModelReg.exe –i –c:etw`"}]},{"pos":[2698,2745],"content":"Enabling Debug Tracing using System.Diagnostics","linkify":"Enabling Debug Tracing using System.Diagnostics","nodes":[{"content":"Enabling Debug Tracing using System.Diagnostics","pos":[0,47]}]},{"content":"These listeners can be configured in the App.config file of the workflow application, or the Web.config for a workflow service.","pos":[2749,2876]},{"content":"In this example, a <bpt id=\"p1\">[</bpt>TextWriterTraceListener<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=165424)</ept> is configured to save tracing information to the MyTraceLog.txt file in the current directory.","pos":[2877,3064],"source":" In this example, a [TextWriterTraceListener](https://go.microsoft.com/fwlink/?LinkId=165424) is configured to save tracing information to the MyTraceLog.txt file in the current directory."},{"pos":[3808,3816],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3820,3906],"content":"<bpt id=\"p1\">[</bpt>Windows Server App Fabric Monitoring<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=201273)</ept>","source":"[Windows Server App Fabric Monitoring](https://go.microsoft.com/fwlink/?LinkId=201273)"},{"pos":[3909,3998],"content":"<bpt id=\"p1\">[</bpt>Monitoring Applications with App Fabric<ept id=\"p1\">](https://go.microsoft.com/fwlink/?LinkId=201275)</ept>","source":"[Monitoring Applications with App Fabric](https://go.microsoft.com/fwlink/?LinkId=201275)"}]}