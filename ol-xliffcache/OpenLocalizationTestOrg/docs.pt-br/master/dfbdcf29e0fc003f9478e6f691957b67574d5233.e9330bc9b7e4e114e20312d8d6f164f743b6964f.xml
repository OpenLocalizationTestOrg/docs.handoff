{"content":"---\ntitle: \"Exceptions and Exception Handling - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"exception handling [C#]\"\n  - \"exceptions [C#]\"\n  - \"C# language, exceptions\"\nms.assetid: 0001887f-4fa2-47e2-8034-2819477e2344\n---\n# Exceptions and Exception Handling (C# Programming Guide)\nThe C# language's exception handling features help you deal with any unexpected or exceptional situations that occur when a program is running. Exception handling uses the `try`, `catch`, and `finally` keywords to try actions that may not succeed, to handle failures when you decide that it is reasonable to do so, and to clean up resources afterward. Exceptions can be generated by the common language runtime (CLR), by the .NET Framework or any third-party libraries, or by application code. Exceptions are created by using the `throw` keyword.  \n  \n In many cases, an exception may be thrown not by a method that your code has called directly, but by another method further down in the call stack. When this happens, the CLR will unwind the stack, looking for a method with a `catch` block for the specific exception type, and it will execute the first such `catch` block that if finds. If it finds no appropriate `catch` block anywhere in the call stack, it will terminate the process and display a message to the user.  \n  \n In this example, a method tests for division by zero and catches the error. Without the exception handling, this program would terminate with a **DivideByZeroException was unhandled** error.  \n  \n [!code-csharp[csProgGuideExceptions#18](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideExceptions/CS/Exceptions.cs#18)]  \n  \n## Exceptions Overview  \n Exceptions have the following properties:  \n  \n-   Exceptions are types that all ultimately derive from `System.Exception`.  \n  \n-   Use a `try` block around the statements that might throw exceptions.  \n  \n-   Once an exception occurs in the `try` block, the flow of control jumps to the first associated exception handler that is present anywhere in the call stack. In C#, the `catch` keyword is used to define an exception handler.  \n  \n-   If no exception handler for a given exception is present, the program stops executing with an error message.  \n  \n-   Do not catch an exception unless you can handle it and leave the application in a known state. If you catch `System.Exception`, rethrow it using the `throw` keyword at the end of the `catch` block.  \n  \n-   If a `catch` block defines an exception variable, you can use it to obtain more information about the type of exception that occurred.  \n  \n-   Exceptions can be explicitly generated by a program by using the `throw` keyword.  \n  \n-   Exception objects contain detailed information about the error, such as the state of the call stack and a text description of the error.  \n  \n-   Code in a `finally` block is executed even if an exception is thrown. Use a `finally` block to release resources, for example to close any streams or files that were opened in the `try` block.  \n  \n-   Managed exceptions in the .NET Framework are implemented on top of the Win32 structured exception handling mechanism. For more information, see [Structured Exception Handling (C/C++)](/cpp/cpp/structured-exception-handling-c-cpp) and [A Crash Course on the Depths of Win32 Structured Exception Handling](https://bytepointer.com/resources/pietrek_crash_course_depths_of_win32_seh.htm).  \n  \n## Related Sections  \n See the following topics for more information about exceptions and exception handling:  \n  \n-   [Using Exceptions](../../../csharp/programming-guide/exceptions/using-exceptions.md)  \n  \n-   [Exception Handling](../../../csharp/programming-guide/exceptions/exception-handling.md)  \n  \n-   [Creating and Throwing Exceptions](../../../csharp/programming-guide/exceptions/creating-and-throwing-exceptions.md)  \n  \n-   [Compiler-Generated Exceptions](../../../csharp/programming-guide/exceptions/compiler-generated-exceptions.md)  \n  \n-   [How to: Handle an Exception Using try/catch (C# Programming Guide)](../../../csharp/programming-guide/exceptions/how-to-handle-an-exception-using-try-catch.md)  \n  \n-   [How to: Execute Cleanup Code Using finally](../../../csharp/programming-guide/exceptions/how-to-execute-cleanup-code-using-finally.md)  \n  \n## C# Language Specification  \n\nFor more information, see [Exceptions](~/_csharplang/spec/exceptions.md) in the [C# Language Specification](../../language-reference/language-specification/index.md). The language specification is the definitive source for C# syntax and usage.\n  \n## See also\n\n- <xref:System.SystemException>\n- [C# Programming Guide](../../../csharp/programming-guide/index.md)\n- [C# Keywords](../../../csharp/language-reference/keywords/index.md)\n- [throw](../../../csharp/language-reference/keywords/throw.md)\n- [try-catch](../../../csharp/language-reference/keywords/try-catch.md)\n- [try-finally](../../../csharp/language-reference/keywords/try-finally.md)\n- [try-catch-finally](../../../csharp/language-reference/keywords/try-catch-finally.md)\n- [Exceptions](../../../standard/exceptions/index.md)\n","nodes":[{"pos":[4,262],"embed":true,"restype":"x-metadata","content":"title: \"Exceptions and Exception Handling - C# Programming Guide\"\nms.custom: seodec18\nms.date: 07/20/2015\nhelpviewer_keywords: \n  - \"exception handling [C#]\"\n  - \"exceptions [C#]\"\n  - \"C# language, exceptions\"\nms.assetid: 0001887f-4fa2-47e2-8034-2819477e2344","nodes":[{"content":"Exceptions and Exception Handling - C# Programming Guide","nodes":[{"pos":[0,56],"content":"Exceptions and Exception Handling - C# Programming Guide","nodes":[{"content":"Exceptions and Exception Handling - C# Programming Guide","pos":[0,56]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[269,325],"content":"Exceptions and Exception Handling (C# Programming Guide)","linkify":"Exceptions and Exception Handling (C# Programming Guide)","nodes":[{"content":"Exceptions and Exception Handling (C# Programming Guide)","pos":[0,56]}]},{"content":"The C# language's exception handling features help you deal with any unexpected or exceptional situations that occur when a program is running.","pos":[326,469]},{"content":"Exception handling uses the <ph id=\"ph1\">`try`</ph>, <ph id=\"ph2\">`catch`</ph>, and <ph id=\"ph3\">`finally`</ph> keywords to try actions that may not succeed, to handle failures when you decide that it is reasonable to do so, and to clean up resources afterward.","pos":[470,677],"source":" Exception handling uses the `try`, `catch`, and `finally` keywords to try actions that may not succeed, to handle failures when you decide that it is reasonable to do so, and to clean up resources afterward."},{"content":"Exceptions can be generated by the common language runtime (CLR), by the .NET Framework or any third-party libraries, or by application code.","pos":[678,819]},{"content":"Exceptions are created by using the <ph id=\"ph1\">`throw`</ph> keyword.","pos":[820,872],"source":" Exceptions are created by using the `throw` keyword."},{"content":"In many cases, an exception may be thrown not by a method that your code has called directly, but by another method further down in the call stack.","pos":[879,1026]},{"content":"When this happens, the CLR will unwind the stack, looking for a method with a <ph id=\"ph1\">`catch`</ph> block for the specific exception type, and it will execute the first such <ph id=\"ph2\">`catch`</ph> block that if finds.","pos":[1027,1215],"source":" When this happens, the CLR will unwind the stack, looking for a method with a `catch` block for the specific exception type, and it will execute the first such `catch` block that if finds."},{"content":"If it finds no appropriate <ph id=\"ph1\">`catch`</ph> block anywhere in the call stack, it will terminate the process and display a message to the user.","pos":[1216,1349],"source":" If it finds no appropriate `catch` block anywhere in the call stack, it will terminate the process and display a message to the user."},{"content":"In this example, a method tests for division by zero and catches the error.","pos":[1356,1431]},{"content":"Without the exception handling, this program would terminate with a <bpt id=\"p1\">**</bpt>DivideByZeroException was unhandled<ept id=\"p1\">**</ept> error.","pos":[1432,1546],"source":" Without the exception handling, this program would terminate with a **DivideByZeroException was unhandled** error."},{"pos":[1692,1711],"content":"Exceptions Overview","linkify":"Exceptions Overview","nodes":[{"content":"Exceptions Overview","pos":[0,19]}]},{"content":"Exceptions have the following properties:","pos":[1715,1756]},{"pos":[1766,1838],"content":"Exceptions are types that all ultimately derive from <ph id=\"ph1\">`System.Exception`</ph>.","source":"Exceptions are types that all ultimately derive from `System.Exception`."},{"pos":[1848,1916],"content":"Use a <ph id=\"ph1\">`try`</ph> block around the statements that might throw exceptions.","source":"Use a `try` block around the statements that might throw exceptions."},{"content":"Once an exception occurs in the <ph id=\"ph1\">`try`</ph> block, the flow of control jumps to the first associated exception handler that is present anywhere in the call stack.","pos":[1926,2082],"source":"Once an exception occurs in the `try` block, the flow of control jumps to the first associated exception handler that is present anywhere in the call stack."},{"content":"In C#, the <ph id=\"ph1\">`catch`</ph> keyword is used to define an exception handler.","pos":[2083,2149],"source":" In C#, the `catch` keyword is used to define an exception handler."},{"content":"If no exception handler for a given exception is present, the program stops executing with an error message.","pos":[2159,2267]},{"content":"Do not catch an exception unless you can handle it and leave the application in a known state.","pos":[2277,2371]},{"content":"If you catch <ph id=\"ph1\">`System.Exception`</ph>, rethrow it using the <ph id=\"ph2\">`throw`</ph> keyword at the end of the <ph id=\"ph3\">`catch`</ph> block.","pos":[2372,2474],"source":" If you catch `System.Exception`, rethrow it using the `throw` keyword at the end of the `catch` block."},{"pos":[2484,2618],"content":"If a <ph id=\"ph1\">`catch`</ph> block defines an exception variable, you can use it to obtain more information about the type of exception that occurred.","source":"If a `catch` block defines an exception variable, you can use it to obtain more information about the type of exception that occurred."},{"pos":[2628,2709],"content":"Exceptions can be explicitly generated by a program by using the <ph id=\"ph1\">`throw`</ph> keyword.","source":"Exceptions can be explicitly generated by a program by using the `throw` keyword."},{"content":"Exception objects contain detailed information about the error, such as the state of the call stack and a text description of the error.","pos":[2719,2855]},{"content":"Code in a <ph id=\"ph1\">`finally`</ph> block is executed even if an exception is thrown.","pos":[2865,2934],"source":"Code in a `finally` block is executed even if an exception is thrown."},{"content":"Use a <ph id=\"ph1\">`finally`</ph> block to release resources, for example to close any streams or files that were opened in the <ph id=\"ph2\">`try`</ph> block.","pos":[2935,3057],"source":" Use a `finally` block to release resources, for example to close any streams or files that were opened in the `try` block."},{"content":"Managed exceptions in the .NET Framework are implemented on top of the Win32 structured exception handling mechanism.","pos":[3067,3184]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Structured Exception Handling (C/C++)<ept id=\"p1\">](/cpp/cpp/structured-exception-handling-c-cpp)</ept> and <bpt id=\"p2\">[</bpt>A Crash Course on the Depths of Win32 Structured Exception Handling<ept id=\"p2\">](https://bytepointer.com/resources/pietrek_crash_course_depths_of_win32_seh.htm)</ept>.","pos":[3185,3451],"source":" For more information, see [Structured Exception Handling (C/C++)](/cpp/cpp/structured-exception-handling-c-cpp) and [A Crash Course on the Depths of Win32 Structured Exception Handling](https://bytepointer.com/resources/pietrek_crash_course_depths_of_win32_seh.htm)."},{"pos":[3460,3476],"content":"Related Sections","linkify":"Related Sections","nodes":[{"content":"Related Sections","pos":[0,16]}]},{"content":"See the following topics for more information about exceptions and exception handling:","pos":[3480,3566]},{"pos":[3576,3660],"content":"<bpt id=\"p1\">[</bpt>Using Exceptions<ept id=\"p1\">](../../../csharp/programming-guide/exceptions/using-exceptions.md)</ept>","source":"[Using Exceptions](../../../csharp/programming-guide/exceptions/using-exceptions.md)"},{"pos":[3670,3758],"content":"<bpt id=\"p1\">[</bpt>Exception Handling<ept id=\"p1\">](../../../csharp/programming-guide/exceptions/exception-handling.md)</ept>","source":"[Exception Handling](../../../csharp/programming-guide/exceptions/exception-handling.md)"},{"pos":[3768,3884],"content":"<bpt id=\"p1\">[</bpt>Creating and Throwing Exceptions<ept id=\"p1\">](../../../csharp/programming-guide/exceptions/creating-and-throwing-exceptions.md)</ept>","source":"[Creating and Throwing Exceptions](../../../csharp/programming-guide/exceptions/creating-and-throwing-exceptions.md)"},{"pos":[3894,4004],"content":"<bpt id=\"p1\">[</bpt>Compiler-Generated Exceptions<ept id=\"p1\">](../../../csharp/programming-guide/exceptions/compiler-generated-exceptions.md)</ept>","source":"[Compiler-Generated Exceptions](../../../csharp/programming-guide/exceptions/compiler-generated-exceptions.md)"},{"pos":[4014,4174],"content":"<bpt id=\"p1\">[</bpt>How to: Handle an Exception Using try/catch (C# Programming Guide)<ept id=\"p1\">](../../../csharp/programming-guide/exceptions/how-to-handle-an-exception-using-try-catch.md)</ept>","source":"[How to: Handle an Exception Using try/catch (C# Programming Guide)](../../../csharp/programming-guide/exceptions/how-to-handle-an-exception-using-try-catch.md)"},{"pos":[4184,4319],"content":"<bpt id=\"p1\">[</bpt>How to: Execute Cleanup Code Using finally<ept id=\"p1\">](../../../csharp/programming-guide/exceptions/how-to-execute-cleanup-code-using-finally.md)</ept>","source":"[How to: Execute Cleanup Code Using finally](../../../csharp/programming-guide/exceptions/how-to-execute-cleanup-code-using-finally.md)"},{"pos":[4328,4353],"content":"C# Language Specification","linkify":"C# Language Specification","nodes":[{"content":"C# Language Specification","pos":[0,25]}]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Exceptions<ept id=\"p1\">](~/_csharplang/spec/exceptions.md)</ept> in the <bpt id=\"p2\">[</bpt>C# Language Specification<ept id=\"p2\">](../../language-reference/language-specification/index.md)</ept>.","pos":[4357,4523],"source":"For more information, see [Exceptions](~/_csharplang/spec/exceptions.md) in the [C# Language Specification](../../language-reference/language-specification/index.md)."},{"content":"The language specification is the definitive source for C# syntax and usage.","pos":[4524,4600]},{"pos":[4607,4615],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4651,4717],"content":"<bpt id=\"p1\">[</bpt>C# Programming Guide<ept id=\"p1\">](../../../csharp/programming-guide/index.md)</ept>","source":"[C# Programming Guide](../../../csharp/programming-guide/index.md)"},{"pos":[4720,4787],"content":"<bpt id=\"p1\">[</bpt>C# Keywords<ept id=\"p1\">](../../../csharp/language-reference/keywords/index.md)</ept>","source":"[C# Keywords](../../../csharp/language-reference/keywords/index.md)"},{"pos":[4790,4851],"content":"<bpt id=\"p1\">[</bpt>throw<ept id=\"p1\">](../../../csharp/language-reference/keywords/throw.md)</ept>","source":"[throw](../../../csharp/language-reference/keywords/throw.md)"},{"pos":[4854,4923],"content":"<bpt id=\"p1\">[</bpt>try-catch<ept id=\"p1\">](../../../csharp/language-reference/keywords/try-catch.md)</ept>","source":"[try-catch](../../../csharp/language-reference/keywords/try-catch.md)"},{"pos":[4926,4999],"content":"<bpt id=\"p1\">[</bpt>try-finally<ept id=\"p1\">](../../../csharp/language-reference/keywords/try-finally.md)</ept>","source":"[try-finally](../../../csharp/language-reference/keywords/try-finally.md)"},{"pos":[5002,5087],"content":"<bpt id=\"p1\">[</bpt>try-catch-finally<ept id=\"p1\">](../../../csharp/language-reference/keywords/try-catch-finally.md)</ept>","source":"[try-catch-finally](../../../csharp/language-reference/keywords/try-catch-finally.md)"},{"pos":[5090,5141],"content":"<bpt id=\"p1\">[</bpt>Exceptions<ept id=\"p1\">](../../../standard/exceptions/index.md)</ept>","source":"[Exceptions](../../../standard/exceptions/index.md)"}]}