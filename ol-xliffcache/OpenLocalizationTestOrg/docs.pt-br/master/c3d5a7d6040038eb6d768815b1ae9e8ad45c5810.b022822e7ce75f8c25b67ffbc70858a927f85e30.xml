{"content":"---\ntitle: \"Listening with Sockets\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"application protocols, sockets\"\n  - \"sending data, sockets\"\n  - \"sockets, listening with sockets\"\n  - \"data requests, sockets\"\n  - \"requesting data from Internet, sockets\"\n  - \"receiving data, sockets\"\n  - \"protocols, sockets\"\n  - \"listening with sockets\"\n  - \"Internet, sockets\"\nms.assetid: 40e426cc-13db-4371-95eb-f7388bd23ebf\n---\n# Listening with Sockets\nListener or server sockets open a port on the network and then wait for a client to connect to that port. Although other network address families and protocols exist, this example shows how to create remote service for a TCP/IP network.  \n  \n The unique address of a TCP/IP service is defined by combining the IP address of the host with the port number of the service to create an endpoint for the service. The <xref:System.Net.Dns> class provides methods that return information about the network addresses supported by the local network device. When the local network device has more than one network address, or if the local system supports more than one network device, the **Dns** class returns information about all network addresses, and the application must choose the proper address for the service. The Internet Assigned Numbers Authority (Iana) defines port numbers for common services; for more information, see [Service Name and Transport Protocol Port Number Registry](https://www.iana.org/assignments/port-numbers). Other services can have registered port numbers in the range 1,024 to 65,535.  \n  \n The following example creates an <xref:System.Net.IPEndPoint> for a server by combining the first IP address returned by **Dns** for the host computer with a port number chosen from the registered port numbers range.  \n  \n```vb  \nDim ipHostInfo As IPHostEntry = Dns.Resolve(Dns.GetHostName())  \nDim ipAddress As IPAddress = ipHostInfo.AddressList(0)  \nDim localEndPoint As New IPEndPoint(ipAddress, 11000)  \n```  \n  \n```csharp  \nIPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());  \nIPAddress ipAddress = ipHostInfo.AddressList[0];  \nIPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);  \n```  \n  \n After the local endpoint is determined, the <xref:System.Net.Sockets.Socket> must be associated with that endpoint using the <xref:System.Net.Sockets.Socket.Bind%2A> method and set to listen on the endpoint using the <xref:System.Net.Sockets.Socket.Listen%2A> method. **Bind** throws an exception if the specific address and port combination is already in use. The following example demonstrates associating a **Socket** with an **IPEndPoint**.  \n  \n```vb  \nDim listener As New Socket(ipAddress.AddressFamily, _  \n    SocketType.Stream, ProtocolType.Tcp) \nlistener.Bind(localEndPoint)  \nlistener.Listen(100)  \n```  \n  \n```csharp  \nSocket listener = new Socket(ipAddress.AddressFamily,\n    SocketType.Stream, ProtocolType.Tcp);\nlistener.Bind(localEndPoint);  \nlistener.Listen(100);  \n```  \n  \n The **Listen** method takes a single parameter that specifies how many pending connections to the **Socket** are allowed before a server busy error is returned to the connecting client. In this case, up to 100 clients are placed in the connection queue before a server busy response is returned to client number 101.  \n  \n## See also\n\n- [Using a Synchronous Server Socket](../../../docs/framework/network-programming/using-a-synchronous-server-socket.md)\n- [Using an Asynchronous Server Socket](../../../docs/framework/network-programming/using-an-asynchronous-server-socket.md)\n- [Using Client Sockets](../../../docs/framework/network-programming/using-client-sockets.md)\n- [How to: Create a Socket](../../../docs/framework/network-programming/how-to-create-a-socket.md)\n- [Sockets](../../../docs/framework/network-programming/sockets.md)\n","nodes":[{"pos":[4,447],"embed":true,"restype":"x-metadata","content":"title: \"Listening with Sockets\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"application protocols, sockets\"\n  - \"sending data, sockets\"\n  - \"sockets, listening with sockets\"\n  - \"data requests, sockets\"\n  - \"requesting data from Internet, sockets\"\n  - \"receiving data, sockets\"\n  - \"protocols, sockets\"\n  - \"listening with sockets\"\n  - \"Internet, sockets\"\nms.assetid: 40e426cc-13db-4371-95eb-f7388bd23ebf","nodes":[{"content":"Listening with Sockets","nodes":[{"pos":[0,22],"content":"Listening with Sockets","nodes":[{"content":"Listening with Sockets","pos":[0,22]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[454,476],"content":"Listening with Sockets","linkify":"Listening with Sockets","nodes":[{"content":"Listening with Sockets","pos":[0,22]}]},{"content":"Listener or server sockets open a port on the network and then wait for a client to connect to that port.","pos":[477,582]},{"content":"Although other network address families and protocols exist, this example shows how to create remote service for a TCP/IP network.","pos":[583,713]},{"content":"The unique address of a TCP/IP service is defined by combining the IP address of the host with the port number of the service to create an endpoint for the service.","pos":[720,884]},{"content":"The <ph id=\"ph1\">&lt;xref:System.Net.Dns&gt;</ph> class provides methods that return information about the network addresses supported by the local network device.","pos":[885,1024],"source":" The <xref:System.Net.Dns> class provides methods that return information about the network addresses supported by the local network device."},{"content":"When the local network device has more than one network address, or if the local system supports more than one network device, the <bpt id=\"p1\">**</bpt>Dns<ept id=\"p1\">**</ept> class returns information about all network addresses, and the application must choose the proper address for the service.","pos":[1025,1286],"source":" When the local network device has more than one network address, or if the local system supports more than one network device, the **Dns** class returns information about all network addresses, and the application must choose the proper address for the service."},{"content":"The Internet Assigned Numbers Authority (Iana) defines port numbers for common services; for more information, see <bpt id=\"p1\">[</bpt>Service Name and Transport Protocol Port Number Registry<ept id=\"p1\">](https://www.iana.org/assignments/port-numbers)</ept>.","pos":[1287,1508],"source":" The Internet Assigned Numbers Authority (Iana) defines port numbers for common services; for more information, see [Service Name and Transport Protocol Port Number Registry](https://www.iana.org/assignments/port-numbers)."},{"content":"Other services can have registered port numbers in the range 1,024 to 65,535.","pos":[1509,1586]},{"pos":[1593,1809],"content":"The following example creates an <ph id=\"ph1\">&lt;xref:System.Net.IPEndPoint&gt;</ph> for a server by combining the first IP address returned by <bpt id=\"p1\">**</bpt>Dns<ept id=\"p1\">**</ept> for the host computer with a port number chosen from the registered port numbers range.","source":"The following example creates an <xref:System.Net.IPEndPoint> for a server by combining the first IP address returned by **Dns** for the host computer with a port number chosen from the registered port numbers range."},{"content":"After the local endpoint is determined, the <ph id=\"ph1\">&lt;xref:System.Net.Sockets.Socket&gt;</ph> must be associated with that endpoint using the <ph id=\"ph2\">&lt;xref:System.Net.Sockets.Socket.Bind%2A&gt;</ph> method and set to listen on the endpoint using the <ph id=\"ph3\">&lt;xref:System.Net.Sockets.Socket.Listen%2A&gt;</ph> method.","pos":[2205,2472],"source":"After the local endpoint is determined, the <xref:System.Net.Sockets.Socket> must be associated with that endpoint using the <xref:System.Net.Sockets.Socket.Bind%2A> method and set to listen on the endpoint using the <xref:System.Net.Sockets.Socket.Listen%2A> method."},{"content":"<bpt id=\"p1\">**</bpt>Bind<ept id=\"p1\">**</ept> throws an exception if the specific address and port combination is already in use.","pos":[2473,2565],"source":"**Bind** throws an exception if the specific address and port combination is already in use."},{"content":"The following example demonstrates associating a <bpt id=\"p1\">**</bpt>Socket<ept id=\"p1\">**</ept> with an <bpt id=\"p2\">**</bpt>IPEndPoint<ept id=\"p2\">**</ept>.","pos":[2566,2649],"source":" The following example demonstrates associating a **Socket** with an **IPEndPoint**."},{"content":"The <bpt id=\"p1\">**</bpt>Listen<ept id=\"p1\">**</ept> method takes a single parameter that specifies how many pending connections to the <bpt id=\"p2\">**</bpt>Socket<ept id=\"p2\">**</ept> are allowed before a server busy error is returned to the connecting client.","pos":[2998,3183],"source":"The **Listen** method takes a single parameter that specifies how many pending connections to the **Socket** are allowed before a server busy error is returned to the connecting client."},{"content":"In this case, up to 100 clients are placed in the connection queue before a server busy response is returned to client number 101.","pos":[3184,3314]},{"pos":[3323,3331],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3335,3452],"content":"<bpt id=\"p1\">[</bpt>Using a Synchronous Server Socket<ept id=\"p1\">](../../../docs/framework/network-programming/using-a-synchronous-server-socket.md)</ept>","source":"[Using a Synchronous Server Socket](../../../docs/framework/network-programming/using-a-synchronous-server-socket.md)"},{"pos":[3455,3576],"content":"<bpt id=\"p1\">[</bpt>Using an Asynchronous Server Socket<ept id=\"p1\">](../../../docs/framework/network-programming/using-an-asynchronous-server-socket.md)</ept>","source":"[Using an Asynchronous Server Socket](../../../docs/framework/network-programming/using-an-asynchronous-server-socket.md)"},{"pos":[3579,3670],"content":"<bpt id=\"p1\">[</bpt>Using Client Sockets<ept id=\"p1\">](../../../docs/framework/network-programming/using-client-sockets.md)</ept>","source":"[Using Client Sockets](../../../docs/framework/network-programming/using-client-sockets.md)"},{"pos":[3673,3769],"content":"<bpt id=\"p1\">[</bpt>How to: Create a Socket<ept id=\"p1\">](../../../docs/framework/network-programming/how-to-create-a-socket.md)</ept>","source":"[How to: Create a Socket](../../../docs/framework/network-programming/how-to-create-a-socket.md)"},{"pos":[3772,3837],"content":"<bpt id=\"p1\">[</bpt>Sockets<ept id=\"p1\">](../../../docs/framework/network-programming/sockets.md)</ept>","source":"[Sockets](../../../docs/framework/network-programming/sockets.md)"}]}