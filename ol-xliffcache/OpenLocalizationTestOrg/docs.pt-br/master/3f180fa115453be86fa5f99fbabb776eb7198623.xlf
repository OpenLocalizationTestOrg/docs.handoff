<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="side-by-side-versioning-in-workflowservicehost.md" source-language="en-US" target-language="pt-br">
    <header>
      <tool tool-id="mdxliff" tool-name="mdxliff" tool-version="1.0-0a91294" tool-company="Microsoft" />
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">3f180fa115453be86fa5f99fbabb776eb7198623</xliffext:olfilehash>
      <xliffext:olfilepath xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">docs\framework\wcf\feature-details\side-by-side-versioning-in-workflowservicehost.md</xliffext:olfilepath>
      <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">net-med-mt</xliffext:oltranslationpriority>
      <xliffext:oltranslationtype xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">MT</xliffext:oltranslationtype>
      <xliffext:olskeletonhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">245c23a5d5297f37f88bca9fded526f6e6e5f04a</xliffext:olskeletonhash>
      <xliffext:olxliffhash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">4443efb0190f4d9ada7cc08766db324c1a81e59f</xliffext:olxliffhash>
    </header>
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve" restype="x-metadata">
          <source>Side by Side Versioning in WorkflowServiceHost</source>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>Side by Side Versioning in WorkflowServiceHost</source>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>The <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph> side-by-side versioning introduced in <ph id="ph2">[!INCLUDE[net_v45](../../../../includes/net-v45-md.md)]</ph> provides the capability to host multiple versions of a workflow service on a single endpoint.</source>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>The side-by-side functionality provided allows a workflow service to be configured so that new instances of the workflow service are created using the new workflow definition, while running instances complete using the existing definition.</source>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>This topic provides an overview of workflow service side-by-side execution using <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>To download a sample and watch a video walkthrough of workflow service side-by-side versioning, see <bpt id="p1">[</bpt>Side by Side Versioning with a Web-Hosted Xamlx Workflow Service<ept id="p1">](https://go.microsoft.com/fwlink/?LinkId=393746)</ept>.</source>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>Hosting Multiple Versions in a Workflow Service</source>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph> contains two properties that can be configured to allow multiple versions of a workflow to execute side-by-side: <ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> and <ph id="ph3">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> contains the supported versions of the workflow service, and <ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> is used to uniquely identify each workflow service.</source>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>This is done by associating a <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> with the workflow service.</source>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>A <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> contains three identifying pieces of information.</source>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity.Name%2A&gt;</ph> and <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity.Version%2A&gt;</ph> contain a name and a <ph id="ph3">&lt;xref:System.Version&gt;</ph> and are required, and <ph id="ph4">&lt;xref:System.Activities.WorkflowIdentity.Package%2A&gt;</ph> is optional and can be used to specify an additional string containing information such as assembly name or other desired information.</source>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>Each workflow service contained in the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> collection must have a unique <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>A <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> is unique if any of its three properties are different from another <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>A <ph id="ph1">`null`</ph> <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> is an allowable value for <ph id="ph3">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>, but only one previous version of a workflow service may have a <ph id="ph4">`null`</ph> <ph id="ph5">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>A <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> should not contain any personally identifiable information (PII).</source>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> is composed of three parts: a <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity.Name%2A&gt;</ph> (<ph id="ph3">&lt;xref:System.String&gt;</ph>), a <ph id="ph4">&lt;xref:System.Activities.WorkflowIdentity.Version%2A&gt;</ph> (<ph id="ph5">&lt;xref:System.Version&gt;</ph>), and a <ph id="ph6">&lt;xref:System.Activities.WorkflowIdentity.Package%2A&gt;</ph> (<ph id="ph7">&lt;xref:System.String&gt;</ph>).</source>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>Information about the <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> used to create an instance is emitted to any configured tracking services at several different points of the activity life-cycle by the runtime.</source>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>WF Tracking does not have any mechanism to hide PII (sensitive user data).</source>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>Therefore, a <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> instance should not contain any PII data as it will be emitted by the runtime in tracking records and may be visible to anyone with access to view the tracking records.</source>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>Rules for Hosting Multiple Versions of a Workflow Service</source>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>When a user adds an additional version to the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph>, there are several conditions that must be met in order for a workflow service to be hosted with the same set of endpoints and description.</source>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>If any of the additional versions fail to meet these conditions, the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph> throws an exception when <ph id="ph2">`Open`</ph> is called.</source>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>Each workflow definition provided to the host as an additional version must meet the following requirements (where the primary version is the workflow service definition that is provided to the host constructor).</source>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>The additional workflow version must:</source>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>Have the same the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.Name%2A&gt;</ph> as the primary version of the workflow service.</source>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>Must not have any <ph id="ph1">&lt;xref:System.ServiceModel.Activities.Receive&gt;</ph> or <ph id="ph2">&lt;xref:System.ServiceModel.Activities.SendReply&gt;</ph> activities in its <ph id="ph3">&lt;xref:System.ServiceModel.Activities.WorkflowService.Body%2A&gt;</ph> that are not in the primary version, and they must match the operation contract.</source>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source>Have a unique <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>One and only one workflow definition may have a <ph id="ph1">`null`</ph><ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>Some changes are permitted.</source>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>The following items may be different between the versions:</source>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>The <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> may have a different Name and Package than the primary version.</source>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>The <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.AllowBufferedReceive%2A&gt;</ph> value may be different than the primary version.</source>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>The <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.ConfigurationName%2A&gt;</ph> may be different than the primary version.</source>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>The <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.ImplementedContracts%2A&gt;</ph> may be different than the primary version.</source>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>Configuring the DefinitionIdentity</source>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>When a workflow service is created using the workflow designer, the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> is set using the <bpt id="p1">**</bpt>Properties<ept id="p1">**</ept> window.</source>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>Click outside of the service’s root activity in the designer to select the workflow service, and choose <bpt id="p1">**</bpt>Properties Window<ept id="p1">**</ept> from the <bpt id="p2">**</bpt>View<ept id="p2">**</ept> menu.</source>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>Select <bpt id="p1">**</bpt>WorkflowIdentity<ept id="p1">**</ept> from the drop-down list that appears beside the <bpt id="p2">**</bpt>DefinitionIdentity<ept id="p2">**</ept> property, and then expand and specify the desired <ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity&gt;</ph> properties.</source>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>In the following example the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> is configured with the <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity.Name%2A&gt;</ph> <ph id="ph3">`MortgageWorkflow`</ph> and a <ph id="ph4">&lt;xref:System.Activities.WorkflowIdentity.Version%2A&gt;</ph> of <ph id="ph5">`1.0.0.0`</ph>.</source>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source><ph id="ph1">&lt;xref:System.Activities.WorkflowIdentity.Package%2A&gt;</ph> is optional and in this example is <ph id="ph2">`null`</ph>.</source>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>Screenshot that shows the DefinitionIdentity property.</source>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>When a workflow service is self-hosted, the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> is configured when the workflow service is constructed.</source>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>In the following example, the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> is configured with the same values as the previous example, with the <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity.Name%2A&gt;</ph> <ph id="ph3">`MortgageWorkflow`</ph> and a <ph id="ph4">&lt;xref:System.Activities.WorkflowIdentity.Name%2A&gt;</ph> of <ph id="ph5">`1.0.0.0`</ph>.</source>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>A <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> is not required, although only one version of the workflow service may have a <bpt id="p1">**</bpt>null<ept id="p1">**</ept><ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>.</source>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>This is useful if the service was deployed initially without a <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> configured, and then an updated version is created.</source>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>Adding a New Version to a Web-hosted Workflow Service</source>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>The first step in configuring a new version of a workflow service in a web-hosted service is to create a new folder in the <ph id="ph1">`App_Code`</ph> folder that has the same name as the service file.</source>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>If the service’s <ph id="ph1">`xamlx`</ph> file is named <ph id="ph2">`MortgageWorkflow.xamlx`</ph>, then the folder must be named <ph id="ph3">`MortgageWorkflow`</ph>.</source>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>Place a copy of the original service’s <ph id="ph1">`xamlx`</ph> file into this folder and rename it to a new name, such as <ph id="ph2">`MortgageWorkflowV1.xamlx`</ph>.</source>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>Make the desired changes to the primary service, update its <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>, and then deploy the service.</source>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>In the following example the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> has been updated with a <ph id="ph2">&lt;xref:System.Activities.WorkflowIdentity.Name%2A&gt;</ph> of <ph id="ph3">`MortageWorkflow`</ph> and a <ph id="ph4">&lt;xref:System.Activities.WorkflowIdentity.Version%2A&gt;</ph> of <ph id="ph5">`2.0.0.0`</ph>.</source>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>Screenshot that shows DefinitionIdentity of WorkflowIdentity.</source>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>When the service restarts, the previous version will automatically be added to the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> collection because it is located in the designated <ph id="ph2">`App_Code`</ph> subfolder.</source>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>Note that if the primary version of the workflow service has a <ph id="ph1">`null`</ph> <ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> the previous versions will not be added.</source>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>One version may have a <ph id="ph1">`null`</ph><ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph>, but if there are multiple versions the primary version must not be the one with the <ph id="ph3">`null`</ph><ph id="ph4">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> or else the previous versions will not be added to the <ph id="ph5">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> collection.</source>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source>Adding a New Version to a Self-hosted Workflow Service</source>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source>When adding a new version to a self-hosted workflow service, the <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph> is configured with the primary version of the workflow service, and previous versions must be explicitly added to the <ph id="ph2">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> collection.</source>
        </trans-unit>
        <trans-unit id="159" translate="yes" xml:space="preserve">
          <source>In the following example, a <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost&gt;</ph> is configured with a primary workflow service that uses a <ph id="ph2">`MortgageWorkflowV2`</ph> workflow definition, and a workflow service configured with a <ph id="ph3">`MortgageWorkflowV1`</ph> workflow definition is added to the <ph id="ph4">&lt;xref:System.ServiceModel.Activities.WorkflowServiceHost.SupportedVersions%2A&gt;</ph> collection.</source>
        </trans-unit>
        <trans-unit id="160" translate="yes" xml:space="preserve">
          <source>Each workflow service is configured with a unique <ph id="ph1">&lt;xref:System.ServiceModel.Activities.WorkflowService.DefinitionIdentity%2A&gt;</ph> that reflects the version of the workflow definition.</source>
        </trans-unit>
      </group>
    </body>
  </file>
</xliff>