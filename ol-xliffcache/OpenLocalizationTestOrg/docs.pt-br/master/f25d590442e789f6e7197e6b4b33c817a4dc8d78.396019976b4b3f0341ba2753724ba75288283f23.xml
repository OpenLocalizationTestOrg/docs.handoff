{"content":"---\ntitle: \"How to: Create a Custom Binding Using the SecurityBindingElement\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"security [WCF], creating custom bindings\"\nms.assetid: 203a9f9e-3a73-427c-87aa-721c56265b29\n---\n# How to: Create a Custom Binding Using the SecurityBindingElement\nWindows Communication Foundation (WCF) includes several system-provided bindings that can be configured but do not provide full flexibility when configuring all the security options that WCF supports. This topic demonstrates how to create a custom binding directly from individual binding elements and highlights some of the security settings that can be specified when creating such a binding. For more information about creating custom bindings, see [Extending Bindings](../../../../docs/framework/wcf/extending/extending-bindings.md).  \n  \n> [!WARNING]\n>  <xref:System.ServiceModel.Channels.SecurityBindingElement> does not support the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> channel shape, which is the default channel shape use by the TCP transport when <xref:System.ServiceModel.TransferMode> is set to <xref:System.ServiceModel.TransferMode.Buffered>. You must set <xref:System.ServiceModel.TransferMode> to <xref:System.ServiceModel.TransferMode.Streamed> in order to use <xref:System.ServiceModel.Channels.SecurityBindingElement> in this scenario.  \n  \n## Creating a Custom Binding  \n In WCF all bindings are made up of *binding elements*. Each binding element derives from the <xref:System.ServiceModel.Channels.BindingElement> class. For the standard system-provided bindings, the binding elements are created and configured for you, although you can customize some of the property settings.  \n  \n In contrast, to create a custom binding, binding elements are created and configured and a <xref:System.ServiceModel.Channels.CustomBinding> is created from the binding elements.  \n  \n To do this, you add the individual binding elements to a collection represented by an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class, and then set the `Elements` property of the `CustomBinding` equal to that object. You must add the binding elements in the following order: Transaction Flow, Reliable Session, Security, Composite Duplex, One-way, Stream Security, Message Encoding, and Transport. Note that not all the binding elements listed are required in every binding.  \n  \n## SecurityBindingElement  \n Three binding elements relate to message level security, all of which derive from the <xref:System.ServiceModel.Channels.SecurityBindingElement> class. The three are <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>, and <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>. The <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> is used to provide Mixed mode security. The other two elements are used when the message layer provides security.  \n  \n Additional classes are used when transport level security is provided:  \n  \n-   <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>  \n  \n-   <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement>  \n  \n-   <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement>  \n  \n## Required Binding Elements  \n There are a large number of possible binding elements that can be combined into a binding. Not all of these combinations are valid. This section describes the required elements that must be present in a security binding.  \n  \n Valid security bindings depend on many factors, including the following:  \n  \n-   Security mode.  \n  \n-   Transport protocol.  \n  \n-   The message exchange pattern (MEP) specified in the contract.  \n  \n The following table shows the valid binding element stack configurations for each combination of the preceding factors. Note that these are minimal requirements. You can add additional binding elements to the binding, such as message encoding binding elements, transaction binding elements, and other binding elements.  \n  \n|Security Mode|Transport|Contract Message Exchange Pattern|Contract Message Exchange Pattern|Contract Message Exchange Pattern|  \n|-------------------|---------------|---------------------------------------|---------------------------------------|---------------------------------------|  \n|||`Datagram`|`Request Reply`|`Duplex`|  \n|Transport|Https||||  \n|||OneWayBindingElement|||  \n|||HttpsTransportBindingElement|HttpsTransportBindingElement||  \n||TCP||||  \n|||OneWayBindingElement|||  \n|||SSL or Windows StreamSecurityBindingElement|SSL or Windows StreamSecurityBindingElement|SSL or Windows StreamSecurityBindingElement|  \n|||TcpTransportBindingElement|TcpTransportBindingElement|TcpTransportBindingElement|  \n|Message|Http|SymmetricSecurityBindingElement|SymmetricSecurityBindingElement|SymmetricSecurityBindingElement (authentication mode = SecureConversation)|  \n|||||CompositeDuplexBindingElement|  \n|||OneWayBindingElement||OneWayBindingElement|  \n|||HttpTransportBindingElement|HttpTransportBindingElement|HttpTransportBindingElement|  \n||Tcp|SecurityBindingElement|SecurityBindingElement|SymmetricSecurityBindingElement (authentication mode = SecureConversation)|  \n|||TcpTransportBindingElement|TcpTransportBindingElement|TcpTransportBindingElement|  \n|Mixed (transport with message credentials)|Https|TransportSecurityBindingElement|TransportSecurityBindingElement||  \n|||OneWayBindingElement|||  \n|||HttpsTransportBindingElement|HttpsTransportBindingElement||  \n||TCP|TransportSecurityBindingElement|SymmetricSecurityBindingElement (authentication mode = SecureConversation)|SymmetricSecurityBindingElement (authentication mode = SecureConversation)|  \n|||OneWayBindingElement|||  \n|||SSL or Windows StreamSecurityBindingElement|SSL or Windows StreamSecurityBindingElement|SSL or Windows StreamSecurityBindingElement|  \n|||TcpTransportBindingElement|TcpTransportBindingElement|TcpTransportBindingElement|  \n  \n Note that there are many configurable settings on the SecurityBindingElements. For more information, see [SecurityBindingElement Authentication Modes](../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md).  \n  \n For more information, see [Secure Conversations and Secure Sessions](../../../../docs/framework/wcf/feature-details/secure-conversations-and-secure-sessions.md).  \n  \n## Procedures  \n  \n#### To create a custom binding that uses a SymmetricSecurityBindingElement  \n  \n1.  Create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class with the name `outputBec`.  \n  \n2.  Call the static method `M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)`, which returns an instance of the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> class.  \n  \n3.  Add the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the collection (`outputBec`) by calling the `Add` method of the <xref:System.Collections.ObjectModel.Collection%601> of <xref:System.ServiceModel.Channels.BindingElement> class.  \n  \n4.  Create an instance of the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> class and add it to the collection (`outputBec`). This specifies the encoding used by the binding.  \n  \n5.  Create a <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and add it to the collection (`outputBec`). This specifies that the binding uses the HTTP transport.  \n  \n6.  Create a new custom binding by creating an instance of the <xref:System.ServiceModel.Channels.CustomBinding> class and passing the collection `outputBec` to the constructor.  \n  \n7.  The resulting custom binding shares many of the same characteristics as the standard <xref:System.ServiceModel.WSHttpBinding>. It specifies message-level security and Windows credentials but disables secure sessions, requires that the service credential be specified out-of-band, and does not encrypt signatures. The last can be controlled only by setting the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A> property as shown in step 4. The other two can be controlled using settings on the standard binding.  \n  \n## Example  \n  \n### Description  \n The following example provides a complete function to create a custom binding that uses a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.  \n  \n### Code  \n [!code-csharp[c_CustomBinding#20](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#20)]\n [!code-vb[c_CustomBinding#20](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_custombinding/vb/source.vb#20)]  \n  \n## See also\n\n- <xref:System.ServiceModel.Channels.SecurityBindingElement>\n- <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>\n- <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>\n- <xref:System.ServiceModel.Channels.CustomBinding>\n- [Extending Bindings](../../../../docs/framework/wcf/extending/extending-bindings.md)\n- [System-Provided Bindings](../../../../docs/framework/wcf/system-provided-bindings.md)\n","nodes":[{"pos":[4,251],"embed":true,"restype":"x-metadata","content":"title: \"How to: Create a Custom Binding Using the SecurityBindingElement\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"security [WCF], creating custom bindings\"\nms.assetid: 203a9f9e-3a73-427c-87aa-721c56265b29","nodes":[{"content":"How to: Create a Custom Binding Using the SecurityBindingElement","nodes":[{"pos":[0,64],"content":"How to: Create a Custom Binding Using the SecurityBindingElement","nodes":[{"content":"How to: Create a Custom Binding Using the SecurityBindingElement","pos":[0,64]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[258,322],"content":"How to: Create a Custom Binding Using the SecurityBindingElement","linkify":"How to: Create a Custom Binding Using the SecurityBindingElement","nodes":[{"content":"How to: Create a Custom Binding Using the SecurityBindingElement","pos":[0,64]}]},{"content":"Windows Communication Foundation (WCF) includes several system-provided bindings that can be configured but do not provide full flexibility when configuring all the security options that WCF supports.","pos":[323,523]},{"content":"This topic demonstrates how to create a custom binding directly from individual binding elements and highlights some of the security settings that can be specified when creating such a binding.","pos":[524,717]},{"content":"For more information about creating custom bindings, see <bpt id=\"p1\">[</bpt>Extending Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/extending/extending-bindings.md)</ept>.","pos":[718,860],"source":" For more information about creating custom bindings, see [Extending Bindings](../../../../docs/framework/wcf/extending/extending-bindings.md)."},{"pos":[868,1397],"content":"[!WARNING]\n <xref:System.ServiceModel.Channels.SecurityBindingElement> does not support the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> channel shape, which is the default channel shape use by the TCP transport when <xref:System.ServiceModel.TransferMode> is set to <xref:System.ServiceModel.TransferMode.Buffered>. You must set <xref:System.ServiceModel.TransferMode> to <xref:System.ServiceModel.TransferMode.Streamed> in order to use <xref:System.ServiceModel.Channels.SecurityBindingElement> in this scenario.","leadings":["","> "],"nodes":[{"content":"<xref:System.ServiceModel.Channels.SecurityBindingElement> does not support the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> channel shape, which is the default channel shape use by the TCP transport when <xref:System.ServiceModel.TransferMode> is set to <xref:System.ServiceModel.TransferMode.Buffered>. You must set <xref:System.ServiceModel.TransferMode> to <xref:System.ServiceModel.TransferMode.Streamed> in order to use <xref:System.ServiceModel.Channels.SecurityBindingElement> in this scenario.","pos":[12,527],"nodes":[{"content":"<ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> does not support the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.IDuplexSessionChannel&gt;</ph> channel shape, which is the default channel shape use by the TCP transport when <ph id=\"ph3\">&lt;xref:System.ServiceModel.TransferMode&gt;</ph> is set to <ph id=\"ph4\">&lt;xref:System.ServiceModel.TransferMode.Buffered&gt;</ph>.","pos":[0,317],"source":"<xref:System.ServiceModel.Channels.SecurityBindingElement> does not support the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> channel shape, which is the default channel shape use by the TCP transport when <xref:System.ServiceModel.TransferMode> is set to <xref:System.ServiceModel.TransferMode.Buffered>."},{"content":"You must set <ph id=\"ph1\">&lt;xref:System.ServiceModel.TransferMode&gt;</ph> to <ph id=\"ph2\">&lt;xref:System.ServiceModel.TransferMode.Streamed&gt;</ph> in order to use <ph id=\"ph3\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> in this scenario.","pos":[318,515],"source":" You must set <xref:System.ServiceModel.TransferMode> to <xref:System.ServiceModel.TransferMode.Streamed> in order to use <xref:System.ServiceModel.Channels.SecurityBindingElement> in this scenario."}]}]},{"pos":[1406,1431],"content":"Creating a Custom Binding","linkify":"Creating a Custom Binding","nodes":[{"content":"Creating a Custom Binding","pos":[0,25]}]},{"content":"In WCF all bindings are made up of <bpt id=\"p1\">*</bpt>binding elements<ept id=\"p1\">*</ept>.","pos":[1435,1489],"source":"In WCF all bindings are made up of *binding elements*."},{"content":"Each binding element derives from the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.BindingElement&gt;</ph> class.","pos":[1490,1585],"source":" Each binding element derives from the <xref:System.ServiceModel.Channels.BindingElement> class."},{"content":"For the standard system-provided bindings, the binding elements are created and configured for you, although you can customize some of the property settings.","pos":[1586,1743]},{"pos":[1750,1928],"content":"In contrast, to create a custom binding, binding elements are created and configured and a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.CustomBinding&gt;</ph> is created from the binding elements.","source":"In contrast, to create a custom binding, binding elements are created and configured and a <xref:System.ServiceModel.Channels.CustomBinding> is created from the binding elements."},{"content":"To do this, you add the individual binding elements to a collection represented by an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.BindingElementCollection&gt;</ph> class, and then set the <ph id=\"ph2\">`Elements`</ph> property of the <ph id=\"ph3\">`CustomBinding`</ph> equal to that object.","pos":[1935,2186],"source":"To do this, you add the individual binding elements to a collection represented by an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class, and then set the `Elements` property of the `CustomBinding` equal to that object."},{"content":"You must add the binding elements in the following order: Transaction Flow, Reliable Session, Security, Composite Duplex, One-way, Stream Security, Message Encoding, and Transport.","pos":[2187,2367]},{"content":"Note that not all the binding elements listed are required in every binding.","pos":[2368,2444]},{"pos":[2453,2475],"content":"SecurityBindingElement","linkify":"SecurityBindingElement","nodes":[{"content":"SecurityBindingElement","pos":[0,22]}]},{"content":"Three binding elements relate to message level security, all of which derive from the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SecurityBindingElement&gt;</ph> class.","pos":[2479,2630],"source":"Three binding elements relate to message level security, all of which derive from the <xref:System.ServiceModel.Channels.SecurityBindingElement> class."},{"content":"The three are <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.TransportSecurityBindingElement&gt;</ph>, <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph>, and <ph id=\"ph3\">&lt;xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement&gt;</ph>.","pos":[2631,2856],"source":" The three are <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>, and <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>."},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.TransportSecurityBindingElement&gt;</ph> is used to provide Mixed mode security.","pos":[2857,2968],"source":" The <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> is used to provide Mixed mode security."},{"content":"The other two elements are used when the message layer provides security.","pos":[2969,3042]},{"content":"Additional classes are used when transport level security is provided:","pos":[3049,3119]},{"pos":[3360,3385],"content":"Required Binding Elements","linkify":"Required Binding Elements","nodes":[{"content":"Required Binding Elements","pos":[0,25]}]},{"content":"There are a large number of possible binding elements that can be combined into a binding.","pos":[3389,3479]},{"content":"Not all of these combinations are valid.","pos":[3480,3520]},{"content":"This section describes the required elements that must be present in a security binding.","pos":[3521,3609]},{"content":"Valid security bindings depend on many factors, including the following:","pos":[3616,3688]},{"content":"Security mode.","pos":[3698,3712]},{"content":"Transport protocol.","pos":[3722,3741]},{"content":"The message exchange pattern (MEP) specified in the contract.","pos":[3751,3812]},{"content":"The following table shows the valid binding element stack configurations for each combination of the preceding factors.","pos":[3819,3938]},{"content":"Note that these are minimal requirements.","pos":[3939,3980]},{"content":"You can add additional binding elements to the binding, such as message encoding binding elements, transaction binding elements, and other binding elements.","pos":[3981,4137]},{"content":"Security Mode","pos":[4144,4157]},{"content":"Transport","pos":[4158,4167]},{"content":"Contract Message Exchange Pattern","pos":[4168,4201]},{"content":"Contract Message Exchange Pattern","pos":[4202,4235]},{"content":"Contract Message Exchange Pattern","pos":[4236,4269]},{"content":"Transport","pos":[4476,4485]},{"content":"Https","pos":[4486,4491]},{"content":"OneWayBindingElement","pos":[4501,4521]},{"content":"HttpsTransportBindingElement","pos":[4530,4558]},{"content":"HttpsTransportBindingElement","pos":[4559,4587]},{"content":"TCP","pos":[4594,4597]},{"content":"OneWayBindingElement","pos":[4607,4627]},{"content":"SSL or Windows StreamSecurityBindingElement","pos":[4636,4679]},{"content":"SSL or Windows StreamSecurityBindingElement","pos":[4680,4723]},{"content":"SSL or Windows StreamSecurityBindingElement","pos":[4724,4767]},{"content":"TcpTransportBindingElement","pos":[4774,4800]},{"content":"TcpTransportBindingElement","pos":[4801,4827]},{"content":"TcpTransportBindingElement","pos":[4828,4854]},{"content":"Message","pos":[4859,4866]},{"content":"Http","pos":[4867,4871]},{"content":"SymmetricSecurityBindingElement","pos":[4872,4903]},{"content":"SymmetricSecurityBindingElement","pos":[4904,4935]},{"content":"SymmetricSecurityBindingElement (authentication mode = SecureConversation)","pos":[4936,5010]},{"content":"CompositeDuplexBindingElement","pos":[5019,5048]},{"content":"OneWayBindingElement","pos":[5055,5075]},{"content":"OneWayBindingElement","pos":[5077,5097]},{"content":"HttpTransportBindingElement","pos":[5104,5131]},{"content":"HttpTransportBindingElement","pos":[5132,5159]},{"content":"HttpTransportBindingElement","pos":[5160,5187]},{"content":"Tcp","pos":[5193,5196]},{"content":"SecurityBindingElement","pos":[5197,5219]},{"content":"SecurityBindingElement","pos":[5220,5242]},{"content":"SymmetricSecurityBindingElement (authentication mode = SecureConversation)","pos":[5243,5317]},{"content":"TcpTransportBindingElement","pos":[5324,5350]},{"content":"TcpTransportBindingElement","pos":[5351,5377]},{"content":"TcpTransportBindingElement","pos":[5378,5404]},{"content":"Mixed (transport with message credentials)","pos":[5409,5451]},{"content":"Https","pos":[5452,5457]},{"content":"TransportSecurityBindingElement","pos":[5458,5489]},{"content":"TransportSecurityBindingElement","pos":[5490,5521]},{"content":"OneWayBindingElement","pos":[5529,5549]},{"content":"HttpsTransportBindingElement","pos":[5558,5586]},{"content":"HttpsTransportBindingElement","pos":[5587,5615]},{"content":"TCP","pos":[5622,5625]},{"content":"TransportSecurityBindingElement","pos":[5626,5657]},{"content":"SymmetricSecurityBindingElement (authentication mode = SecureConversation)","pos":[5658,5732]},{"content":"SymmetricSecurityBindingElement (authentication mode = SecureConversation)","pos":[5733,5807]},{"content":"OneWayBindingElement","pos":[5814,5834]},{"content":"SSL or Windows StreamSecurityBindingElement","pos":[5843,5886]},{"content":"SSL or Windows StreamSecurityBindingElement","pos":[5887,5930]},{"content":"SSL or Windows StreamSecurityBindingElement","pos":[5931,5974]},{"content":"TcpTransportBindingElement","pos":[5981,6007]},{"content":"TcpTransportBindingElement","pos":[6008,6034]},{"content":"TcpTransportBindingElement","pos":[6035,6061]},{"content":"Note that there are many configurable settings on the SecurityBindingElements.","pos":[6069,6147]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>SecurityBindingElement Authentication Modes<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md)</ept>.","pos":[6148,6315],"source":" For more information, see [SecurityBindingElement Authentication Modes](../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md)."},{"pos":[6322,6483],"content":"For more information, see <bpt id=\"p1\">[</bpt>Secure Conversations and Secure Sessions<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/secure-conversations-and-secure-sessions.md)</ept>.","source":"For more information, see [Secure Conversations and Secure Sessions](../../../../docs/framework/wcf/feature-details/secure-conversations-and-secure-sessions.md)."},{"pos":[6492,6502],"content":"Procedures","linkify":"Procedures","nodes":[{"content":"Procedures","pos":[0,10]}]},{"pos":[6513,6583],"content":"To create a custom binding that uses a SymmetricSecurityBindingElement","linkify":"To create a custom binding that uses a SymmetricSecurityBindingElement","nodes":[{"content":"To create a custom binding that uses a SymmetricSecurityBindingElement","pos":[0,70]}]},{"pos":[6593,6712],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.BindingElementCollection&gt;</ph> class with the name <ph id=\"ph2\">`outputBec`</ph>.","source":"Create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class with the name `outputBec`."},{"pos":[6722,6951],"content":"Call the static method <ph id=\"ph1\">`M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)`</ph>, which returns an instance of the <ph id=\"ph2\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> class.","source":"Call the static method `M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)`, which returns an instance of the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> class."},{"pos":[6961,7217],"content":"Add the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph> to the collection (<ph id=\"ph2\">`outputBec`</ph>) by calling the <ph id=\"ph3\">`Add`</ph> method of the <ph id=\"ph4\">&lt;xref:System.Collections.ObjectModel.Collection%601&gt;</ph> of <ph id=\"ph5\">&lt;xref:System.ServiceModel.Channels.BindingElement&gt;</ph> class.","source":"Add the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the collection (`outputBec`) by calling the `Add` method of the <xref:System.Collections.ObjectModel.Collection%601> of <xref:System.ServiceModel.Channels.BindingElement> class."},{"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement&gt;</ph> class and add it to the collection (<ph id=\"ph2\">`outputBec`</ph>).","pos":[7227,7372],"source":"Create an instance of the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> class and add it to the collection (`outputBec`)."},{"content":"This specifies the encoding used by the binding.","pos":[7373,7421]},{"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.HttpTransportBindingElement&gt;</ph> and add it to the collection (<ph id=\"ph2\">`outputBec`</ph>).","pos":[7431,7547],"source":"Create a <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and add it to the collection (`outputBec`)."},{"content":"This specifies that the binding uses the HTTP transport.","pos":[7548,7604]},{"pos":[7614,7787],"content":"Create a new custom binding by creating an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.CustomBinding&gt;</ph> class and passing the collection <ph id=\"ph2\">`outputBec`</ph> to the constructor.","source":"Create a new custom binding by creating an instance of the <xref:System.ServiceModel.Channels.CustomBinding> class and passing the collection `outputBec` to the constructor."},{"content":"The resulting custom binding shares many of the same characteristics as the standard <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph>.","pos":[7797,7923],"source":"The resulting custom binding shares many of the same characteristics as the standard <xref:System.ServiceModel.WSHttpBinding>."},{"content":"It specifies message-level security and Windows credentials but disables secure sessions, requires that the service credential be specified out-of-band, and does not encrypt signatures.","pos":[7924,8109]},{"content":"The last can be controlled only by setting the <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A&gt;</ph> property as shown in step 4.","pos":[8110,8279],"source":" The last can be controlled only by setting the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A> property as shown in step 4."},{"content":"The other two can be controlled using settings on the standard binding.","pos":[8280,8351]},{"pos":[8360,8367],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[8377,8388],"content":"Description","linkify":"Description","nodes":[{"content":"Description","pos":[0,11]}]},{"pos":[8392,8550],"content":"The following example provides a complete function to create a custom binding that uses a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement&gt;</ph>.","source":"The following example provides a complete function to create a custom binding that uses a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>."},{"pos":[8560,8564],"content":"Code","linkify":"Code","nodes":[{"content":"Code","pos":[0,4]}]},{"pos":[8827,8835],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[9092,9176],"content":"<bpt id=\"p1\">[</bpt>Extending Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/extending/extending-bindings.md)</ept>","source":"[Extending Bindings](../../../../docs/framework/wcf/extending/extending-bindings.md)"},{"pos":[9179,9265],"content":"<bpt id=\"p1\">[</bpt>System-Provided Bindings<ept id=\"p1\">](../../../../docs/framework/wcf/system-provided-bindings.md)</ept>","source":"[System-Provided Bindings](../../../../docs/framework/wcf/system-provided-bindings.md)"}]}