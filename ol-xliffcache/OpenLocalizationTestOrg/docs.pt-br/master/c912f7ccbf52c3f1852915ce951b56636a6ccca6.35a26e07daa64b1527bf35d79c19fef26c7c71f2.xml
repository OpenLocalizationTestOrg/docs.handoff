{"content":"---\ntitle: \"ICorDebugModule2::ApplyChanges Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICorDebugModule2.ApplyChanges\"\napi_location: \n  - \"mscordbi.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICorDebugModule2::ApplyChanges\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ApplyChanges method [.NET Framework debugging]\"\n  - \"ICorDebugModule2::ApplyChanges method [.NET Framework debugging]\"\nms.assetid: 96fa3406-6a6f-41a1-88c6-d9bc5d1a16d1\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 16\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"\n---\n# ICorDebugModule2::ApplyChanges Method\nApplies the changes in the metadata and the changes in the Microsoft intermediate language (MSIL) code to the running process.  \n  \n## Syntax  \n  \n```  \nHRESULT ApplyChanges (  \n    [in] ULONG                       cbMetadata,  \n    [in, size_is(cbMetadata)] BYTE   pbMetadata[],  \n    [in] ULONG                       cbIL,  \n    [in, size_is(cbIL)] BYTE         pbIL[]  \n);  \n```  \n  \n#### Parameters  \n `cbMetadata`  \n [in] Size, in bytes, of the delta metadata.  \n  \n `pbMetadata`  \n [in] Buffer that contains the delta metadata. The address of the buffer is returned from the [IMetaDataEmit2::SaveDeltaToMemory](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-savedeltatomemory-method.md) method.  \n  \n The relative virtual addresses (RVAs) in the metadata should be relative to the start of the MSIL code.  \n  \n `cbIL`  \n [in] Size, in bytes, of the delta MSIL code.  \n  \n `pbIL`  \n [in] Buffer that contains the updated MSIL code.  \n  \n## Remarks  \n The `pbMetadata` parameter is in a special delta metadata format (as output by [IMetaDataEmit2::SaveDeltaToMemory](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-savedeltatomemory-method.md)). `pbMetadata` takes previous metadata as a base and describes individual changes to apply to that base.  \n  \n In contrast, the `pbIL[`] parameter contains the new MSIL for the updated method, and is meant to completely replace the previous MSIL for that method  \n  \n When the delta MSIL and the metadata have been created in the debugger’s memory, the debugger calls `ApplyChanges` to send the changes into the common language runtime (CLR). The runtime updates its metadata tables, places the new MSIL into the process, and sets up a just-in-time (JIT) compilation of the new MSIL. When the changes have been applied, the debugger should call [IMetaDataEmit2::ResetENCLog](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-resetenclog-method.md) to prepare for the next editing session. The debugger may then continue the process.  \n  \n Whenever the debugger calls `ApplyChanges` on a module that has delta metadata, it should also call [IMetaDataEmit::ApplyEditAndContinue](../../../../docs/framework/unmanaged-api/metadata/imetadataemit-applyeditandcontinue-method.md) with the same delta metadata on all of its copies of that module’s metadata except for the copy used to emit the changes. If a copy of the metadata somehow becomes out-of-sync with the actual metadata, the debugger can always throw away that copy and obtain a new copy.  \n  \n If the `ApplyChanges` method fails, the debug session is in an invalid state and must be restarted.  \n  \n## Requirements  \n **Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md).  \n  \n **Header:** CorDebug.idl, CorDebug.h  \n  \n **Library:** CorGuids.lib  \n  \n **.NET Framework Versions:** [!INCLUDE[net_current_v20plus](../../../../includes/net-current-v20plus-md.md)]","nodes":[{"pos":[4,712],"embed":true,"restype":"x-metadata","content":"title: \"ICorDebugModule2::ApplyChanges Method | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"reference\"\napi_name: \n  - \"ICorDebugModule2.ApplyChanges\"\napi_location: \n  - \"mscordbi.dll\"\napi_type: \n  - \"COM\"\nf1_keywords: \n  - \"ICorDebugModule2::ApplyChanges\"\ndev_langs: \n  - \"C++\"\nhelpviewer_keywords: \n  - \"ApplyChanges method [.NET Framework debugging]\"\n  - \"ICorDebugModule2::ApplyChanges method [.NET Framework debugging]\"\nms.assetid: 96fa3406-6a6f-41a1-88c6-d9bc5d1a16d1\ntopic_type: \n  - \"apiref\"\ncaps.latest.revision: 16\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\nmanager: \"wpickett\"","nodes":[{"content":"ICorDebugModule2::ApplyChanges Method | Microsoft Docs","nodes":[{"pos":[0,54],"content":"ICorDebugModule2::ApplyChanges Method | Microsoft Docs","nodes":[{"content":"ICorDebugModule2::ApplyChanges Method | Microsoft Docs","pos":[0,54]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[719,756],"content":"ICorDebugModule2::ApplyChanges Method","linkify":"ICorDebugModule2::ApplyChanges Method","nodes":[{"content":"ICorDebugModule2::ApplyChanges Method","pos":[0,37]}]},{"content":"Applies the changes in the metadata and the changes in the Microsoft intermediate language (MSIL) code to the running process.","pos":[757,883]},{"pos":[892,898],"content":"Syntax","linkify":"Syntax","nodes":[{"content":"Syntax","pos":[0,6]}]},{"pos":[1149,1159],"content":"Parameters","linkify":"Parameters","nodes":[{"content":"Parameters","pos":[0,10]}]},{"content":"[in] Size, in bytes, of the delta metadata.","pos":[1179,1222]},{"content":"[in] Buffer that contains the delta metadata.","pos":[1245,1290]},{"content":"The address of the buffer is returned from the <bpt id=\"p1\">[</bpt>IMetaDataEmit2::SaveDeltaToMemory<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-savedeltatomemory-method.md)</ept> method.","pos":[1291,1475],"source":" The address of the buffer is returned from the [IMetaDataEmit2::SaveDeltaToMemory](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-savedeltatomemory-method.md) method."},{"content":"The relative virtual addresses (RVAs) in the metadata should be relative to the start of the MSIL code.","pos":[1482,1585]},{"content":"[in] Size, in bytes, of the delta MSIL code.","pos":[1602,1646]},{"content":"[in] Buffer that contains the updated MSIL code.","pos":[1663,1711]},{"pos":[1720,1727],"content":"Remarks","linkify":"Remarks","nodes":[{"content":"Remarks","pos":[0,7]}]},{"content":"The <ph id=\"ph1\">`pbMetadata`</ph> parameter is in a special delta metadata format (as output by <bpt id=\"p1\">[</bpt>IMetaDataEmit2::SaveDeltaToMemory<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-savedeltatomemory-method.md)</ept>).","pos":[1731,1941],"source":"The `pbMetadata` parameter is in a special delta metadata format (as output by [IMetaDataEmit2::SaveDeltaToMemory](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-savedeltatomemory-method.md))."},{"content":"<ph id=\"ph1\">`pbMetadata`</ph> takes previous metadata as a base and describes individual changes to apply to that base.","pos":[1942,2044],"source":"`pbMetadata` takes previous metadata as a base and describes individual changes to apply to that base."},{"pos":[2051,2201],"content":"In contrast, the <ph id=\"ph1\">`pbIL[`</ph>] parameter contains the new MSIL for the updated method, and is meant to completely replace the previous MSIL for that method","source":"In contrast, the `pbIL[`] parameter contains the new MSIL for the updated method, and is meant to completely replace the previous MSIL for that method"},{"content":"When the delta MSIL and the metadata have been created in the debugger’s memory, the debugger calls <ph id=\"ph1\">`ApplyChanges`</ph> to send the changes into the common language runtime (CLR).","pos":[2208,2382],"source":"When the delta MSIL and the metadata have been created in the debugger’s memory, the debugger calls `ApplyChanges` to send the changes into the common language runtime (CLR)."},{"content":"The runtime updates its metadata tables, places the new MSIL into the process, and sets up a just-in-time (JIT) compilation of the new MSIL.","pos":[2383,2523]},{"content":"When the changes have been applied, the debugger should call <bpt id=\"p1\">[</bpt>IMetaDataEmit2::ResetENCLog<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-resetenclog-method.md)</ept> to prepare for the next editing session.","pos":[2524,2743],"source":" When the changes have been applied, the debugger should call [IMetaDataEmit2::ResetENCLog](../../../../docs/framework/unmanaged-api/metadata/imetadataemit2-resetenclog-method.md) to prepare for the next editing session."},{"content":"The debugger may then continue the process.","pos":[2744,2787]},{"content":"Whenever the debugger calls <ph id=\"ph1\">`ApplyChanges`</ph> on a module that has delta metadata, it should also call <bpt id=\"p1\">[</bpt>IMetaDataEmit::ApplyEditAndContinue<ept id=\"p1\">](../../../../docs/framework/unmanaged-api/metadata/imetadataemit-applyeditandcontinue-method.md)</ept> with the same delta metadata on all of its copies of that module’s metadata except for the copy used to emit the changes.","pos":[2794,3149],"source":"Whenever the debugger calls `ApplyChanges` on a module that has delta metadata, it should also call [IMetaDataEmit::ApplyEditAndContinue](../../../../docs/framework/unmanaged-api/metadata/imetadataemit-applyeditandcontinue-method.md) with the same delta metadata on all of its copies of that module’s metadata except for the copy used to emit the changes."},{"content":"If a copy of the metadata somehow becomes out-of-sync with the actual metadata, the debugger can always throw away that copy and obtain a new copy.","pos":[3150,3297]},{"pos":[3304,3403],"content":"If the <ph id=\"ph1\">`ApplyChanges`</ph> method fails, the debug session is in an invalid state and must be restarted.","source":"If the `ApplyChanges` method fails, the debug session is in an invalid state and must be restarted."},{"pos":[3412,3424],"content":"Requirements","linkify":"Requirements","nodes":[{"content":"Requirements","pos":[0,12]}]},{"pos":[3428,3532],"content":"<bpt id=\"p1\">**</bpt>Platforms:<ept id=\"p1\">**</ept> See <bpt id=\"p2\">[</bpt>System Requirements<ept id=\"p2\">](../../../../docs/framework/get-started/system-requirements.md)</ept>.","source":"**Platforms:** See [System Requirements](../../../../docs/framework/get-started/system-requirements.md)."},{"pos":[3539,3575],"content":"<bpt id=\"p1\">**</bpt>Header:<ept id=\"p1\">**</ept> CorDebug.idl, CorDebug.h","source":"**Header:** CorDebug.idl, CorDebug.h"},{"pos":[3582,3607],"content":"<bpt id=\"p1\">**</bpt>Library:<ept id=\"p1\">**</ept> CorGuids.lib","source":"**Library:** CorGuids.lib"},{"pos":[3614,3642],"content":"<bpt id=\"p1\">**</bpt>.NET Framework Versions:<ept id=\"p1\">**</ept>","source":"**.NET Framework Versions:**"}]}