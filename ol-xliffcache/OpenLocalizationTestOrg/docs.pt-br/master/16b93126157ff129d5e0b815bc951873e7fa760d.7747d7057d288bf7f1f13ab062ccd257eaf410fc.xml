{"content":"---\ntitle: \"How to: Create a WSFederationHttpBinding\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"WCF, federation\"\n  - \"federation\"\nms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10\n---\n# How to: Create a WSFederationHttpBinding\n\nIn Windows Communication Foundation (WCF), the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service. That is, a service that requires clients to authenticate using a security token issued by a security token service. This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration. Once the binding is created, you can set up an endpoint to use that binding.\n\n The basic steps are outlined as follows:\n\n1. Select a security mode. The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.\n\n    > [!NOTE]\n    > The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode. This mode is not secure and is provided for debugging purposes only. If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.\n\n     Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`. This is because the client credential type is always an issued token. WCF acquires a token from a specified issuer and presents that token to the service to authenticate the client.\n\n2. On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service. Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service.\n\n3. Optional. Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type. On federated services, specify the token type that the service expects. On federated clients, specify the token type the client requests from the security token service.\n\n     If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.\n\n     The URI for a SAML 1.1 token is `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.\n\n4. Optional. On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service. The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata. For more information about publishing metadata, see [Publishing Metadata](publishing-metadata.md).\n\n You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.\n\n> [!NOTE]\n>  The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`. If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.\n\n## To configure a WSFederationHttpBinding in code\n\n1. Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>.\n\n2. Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required. If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.\n\n3. Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate.\n\n4. Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey` as required.\n\n5. Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value. If no value is set, WCF defaults to `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, which indicates SAML 1.1 tokens.\n\n6. Required on the client if no local issuer is specified; optional on the service. Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property.\n\n7. Required on the client if no local issuer is specified; not used on the service. Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property.\n\n8. Not used on the client; optional on the service. Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property.\n\n9. Optional on both the client and the service. Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property.\n\n10. Optional on both the client and the service. Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property.\n\n## To create a federated endpoint in configuration\n\n1. Create a [\\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element in the application configuration file.\n\n2. Create a [\\<binding>](../../../../docs/framework/misc/binding.md) element as a child of [\\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value.\n\n3. Create a `<security>` element as a child of the [\\<binding>](../../../../docs/framework/misc/binding.md) element.\n\n4. Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required.\n\n5. Create a `<message>` element as a child of the `<security>` element.\n\n6. Optional. Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value. The default is `Basic256`.\n\n7. Optional. If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`. The default is `SymmetricKey`.\n\n8. Optional. Set the `issuedTokenType` attribute on the `<message>` element.\n\n9. Required on the client if no local issuer is specified; optional on the service. Create an `<issuer>` element as a child of the `<message>` element.\n\n10. Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests.\n\n11. Optional. Add an `<identity>` child element and specify the identity of the security token service\n\n12. For more information, see [Service Identity and Authentication](service-identity-and-authentication.md).\n\n13. Required on the client if no local issuer is specified; not used on the service. Create a [\\<binding>](../../../../docs/framework/misc/binding.md) element in the bindings section that can be used to communicate with the security token service. For more information about creating a binding, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).\n\n14. Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element.\n\n15. Not used on the client; optional on the service. Create an `<issuerMetadata>` element as a child of the <`message`> element. Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata. Optionally, add an `<identity>` child element and specify the identity of the security token service.\n\n16. Optional on both the client and the service. Add a `<claimTypeRequirements>` element as a child of the `<message>` element. Specify required and optional claims that the service relies on by adding [\\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute. Specify whether a given claim is required or optional by setting the `isOptional` attribute.\n\n## Example\n\nThe following code sample shows code for setting up a `WSFederationHttpBinding` imperatively.\n\n[!code-csharp[c_FederationBinding#2](~/samples/snippets/csharp/VS_Snippets_CFX/c_federationbinding/cs/source.cs#2)]\n[!code-vb[c_FederationBinding#2](~/samples/snippets/visualbasic/VS_Snippets_CFX/c_federationbinding/vb/source.vb#2)]\n\n## See also\n\n- [Federation](federation.md)\n- [Federation Sample](../../../../docs/framework/wcf/samples/federation-sample.md)\n- [How to: Disable Secure Sessions on a WSFederationHttpBinding](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)","nodes":[{"pos":[4,219],"embed":true,"restype":"x-metadata","content":"title: \"How to: Create a WSFederationHttpBinding\"\nms.date: \"03/30/2017\"\ndev_langs: \n  - \"csharp\"\n  - \"vb\"\nhelpviewer_keywords: \n  - \"WCF, federation\"\n  - \"federation\"\nms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10","nodes":[{"content":"How to: Create a WSFederationHttpBinding","nodes":[{"pos":[0,40],"content":"How to: Create a WSFederationHttpBinding","nodes":[{"content":"How to: Create a WSFederationHttpBinding","pos":[0,40]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[226,266],"content":"How to: Create a WSFederationHttpBinding","linkify":"How to: Create a WSFederationHttpBinding","nodes":[{"content":"How to: Create a WSFederationHttpBinding","pos":[0,40]}]},{"content":"In Windows Communication Foundation (WCF), the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpBinding&gt;</ph> class (<bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>wsFederationHttpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md)</ept> in configuration) provides a mechanism for exposing a federated service.","pos":[268,560],"source":"In Windows Communication Foundation (WCF), the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service."},{"content":"That is, a service that requires clients to authenticate using a security token issued by a security token service.","pos":[561,676]},{"content":"This topic shows how to set up a <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpBinding&gt;</ph> in both code and configuration.","pos":[677,792],"source":" This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration."},{"content":"Once the binding is created, you can set up an endpoint to use that binding.","pos":[793,869]},{"content":"The basic steps are outlined as follows:","pos":[872,912]},{"content":"Select a security mode.","pos":[917,940]},{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpBinding&gt;</ph> supports <ph id=\"ph2\">`Message`</ph>, which provides end-to-end security at the message level, even across multiple hops, and <ph id=\"ph3\">`TransportWithMessageCredential`</ph>, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.","pos":[941,1254],"source":" The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS."},{"pos":[1262,1829],"content":"[!NOTE]\nThe <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode. This mode is not secure and is provided for debugging purposes only. If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.","leadings":["","    > "],"nodes":[{"content":"The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode. This mode is not secure and is provided for debugging purposes only. If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.","pos":[8,561],"nodes":[{"content":"The <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpBinding&gt;</ph> also supports <ph id=\"ph2\">`None`</ph> as a security mode.","pos":[0,95],"source":"The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode."},{"content":"This mode is not secure and is provided for debugging purposes only.","pos":[96,164]},{"content":"If a service endpoint is deployed with a <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpBinding&gt;</ph> with its security mode set to <ph id=\"ph2\">`None`</ph>, the resulting client binding (generated by the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept>) is a <ph id=\"ph3\">&lt;xref:System.ServiceModel.WSHttpBinding&gt;</ph> with a security mode of <ph id=\"ph4\">`None`</ph>.","pos":[165,553],"source":" If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`."}]}]},{"content":"Unlike other system-provided bindings, it is not necessary to select a client credential type when using the <ph id=\"ph1\">`WSFederationHttpBinding`</ph>.","pos":[1836,1971],"source":"Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`."},{"content":"This is because the client credential type is always an issued token.","pos":[1972,2041]},{"content":"WCF acquires a token from a specified issuer and presents that token to the service to authenticate the client.","pos":[2042,2153]},{"content":"On federated clients, set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A&gt;</ph> property to the URL of the security token service.","pos":[2158,2315],"source":"On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A&gt;</ph> to the binding to use to communicate with the security token service.","pos":[2316,2470],"source":" Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service."},{"content":"Optional.","pos":[2475,2484]},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A&gt;</ph> property to the Uniform Resource Identifier (URI) of a token type.","pos":[2485,2638],"source":" Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type."},{"content":"On federated services, specify the token type that the service expects.","pos":[2639,2710]},{"content":"On federated clients, specify the token type the client requests from the security token service.","pos":[2711,2808]},{"content":"If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.","pos":[2815,3043]},{"pos":[3050,3157],"content":"The URI for a SAML 1.1 token is <ph id=\"ph1\">`http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`</ph>.","source":"The URI for a SAML 1.1 token is `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`."},{"content":"Optional.","pos":[3162,3171]},{"content":"On federated services, set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A&gt;</ph> property to the metadata URL of a security token service.","pos":[3172,3345],"source":" On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service."},{"content":"The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata.","pos":[3346,3496]},{"content":"For more information about publishing metadata, see <bpt id=\"p1\">[</bpt>Publishing Metadata<ept id=\"p1\">](publishing-metadata.md)</ept>.","pos":[3497,3595],"source":" For more information about publishing metadata, see [Publishing Metadata](publishing-metadata.md)."},{"content":"You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.","pos":[3598,4012]},{"pos":[4016,4251],"content":"[!NOTE]\n The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`. If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.","leadings":["","> "],"nodes":[{"content":"The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`. If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.","pos":[9,233],"nodes":[{"content":"The <ph id=\"ph1\">`NegotiateServiceCredential`</ph> property is only relevant when the <ph id=\"ph2\">`SecurityMode`</ph> is set to <ph id=\"ph3\">`Message`</ph>.","pos":[0,103],"source":"The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`."},{"content":"If <ph id=\"ph1\">`SecurityMode`</ph> is set to <ph id=\"ph2\">`TransportWithMessageCredential`</ph>, then the <ph id=\"ph3\">`NegotiateServiceCredential`</ph> property is ignored.","pos":[104,224],"source":" If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored."}]}]},{"pos":[4256,4302],"content":"To configure a WSFederationHttpBinding in code","linkify":"To configure a WSFederationHttpBinding in code","nodes":[{"content":"To configure a WSFederationHttpBinding in code","pos":[0,46]}]},{"pos":[4307,4384],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpBinding&gt;</ph>.","source":"Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.ServiceModel.WSFederationHttpSecurityMode&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.ServiceModel.WSFederationHttpSecurityMode.Message&gt;</ph> as required.","pos":[4389,4604],"source":"Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required."},{"content":"If an algorithm suite other than <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A&gt;</ph> is required, set the <ph id=\"ph2\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A&gt;</ph> property to a value taken from <ph id=\"ph3\">&lt;xref:System.ServiceModel.Security.SecurityAlgorithmSuite&gt;</ph>.","pos":[4605,4898],"source":" If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>."},{"pos":[4903,5025],"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A&gt;</ph> property as appropriate.","source":"Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate."},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A&gt;</ph> property to <ph id=\"ph2\">&lt;xref:System.IdentityModel.Tokens.SecurityKeyType&gt;</ph><ph id=\"ph3\">`SymmetricKey`</ph> or .<ph id=\"ph4\">`AsymmetricKey`</ph>","pos":[5030,5211],"source":"Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey`"},{"content":"as required.","pos":[5212,5224]},{"content":"Set the <ph id=\"ph1\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A&gt;</ph> property to the appropriate value.","pos":[5229,5350],"source":"Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value."},{"content":"If no value is set, WCF defaults to <ph id=\"ph1\">`http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`</ph>, which indicates SAML 1.1 tokens.","pos":[5351,5495],"source":" If no value is set, WCF defaults to `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, which indicates SAML 1.1 tokens."},{"content":"Required on the client if no local issuer is specified; optional on the service.","pos":[5500,5580]},{"content":"Create an <ph id=\"ph1\">&lt;xref:System.ServiceModel.EndpointAddress&gt;</ph> that contains the address and identity information of the security token service and assign the <ph id=\"ph2\">&lt;xref:System.ServiceModel.EndpointAddress&gt;</ph> instance to the <ph id=\"ph3\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A&gt;</ph> property.","pos":[5581,5875],"source":" Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property."},{"content":"Required on the client if no local issuer is specified; not used on the service.","pos":[5880,5960]},{"content":"Create a <ph id=\"ph1\">&lt;xref:System.ServiceModel.Channels.Binding&gt;</ph> for the <ph id=\"ph2\">`SecurityTokenService`</ph> and assign the <ph id=\"ph3\">&lt;xref:System.ServiceModel.Channels.Binding&gt;</ph> instance to the <ph id=\"ph4\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A&gt;</ph> property.","pos":[5961,6206],"source":" Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property."},{"content":"Not used on the client; optional on the service.","pos":[6211,6259]},{"content":"Create an <ph id=\"ph1\">&lt;xref:System.ServiceModel.EndpointAddress&gt;</ph> instance for the metadata of the security token service and assign it to the <ph id=\"ph2\">`IssuerMetadataAddress`</ph> property.","pos":[6260,6423],"source":" Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property."},{"content":"Optional on both the client and the service.","pos":[6428,6472]},{"content":"Create and add one or more <ph id=\"ph1\">&lt;xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement&gt;</ph> instances to the collection returned by the <ph id=\"ph2\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A&gt;</ph> property.","pos":[6473,6702],"source":" Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property."},{"content":"Optional on both the client and the service.","pos":[6708,6752]},{"content":"Create and add one or more <ph id=\"ph1\">&lt;xref:System.Xml.XmlElement&gt;</ph> instances to the collection returned by the <ph id=\"ph2\">&lt;xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A&gt;</ph> property.","pos":[6753,6948],"source":" Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property."},{"pos":[6953,7000],"content":"To create a federated endpoint in configuration","linkify":"To create a federated endpoint in configuration","nodes":[{"content":"To create a federated endpoint in configuration","pos":[0,47]}]},{"pos":[7005,7278],"content":"Create a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>wsFederationHttpBinding&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md)</ept> as a child of the <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>bindings&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md)</ept> element in the application configuration file.","source":"Create a [\\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element in the application configuration file."},{"pos":[7283,7539],"content":"Create a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept> element as a child of <bpt id=\"p2\">[</bpt><ph id=\"ph2\">\\&lt;</ph>wsFederationHttpBinding&gt;<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md)</ept> and set the <ph id=\"ph3\">`name`</ph> attribute to an appropriate value.","source":"Create a [\\<binding>](../../../../docs/framework/misc/binding.md) element as a child of [\\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value."},{"pos":[7544,7657],"content":"Create a <ph id=\"ph1\">`&lt;security&gt;`</ph> element as a child of the <bpt id=\"p1\">[</bpt><ph id=\"ph2\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept> element.","source":"Create a `<security>` element as a child of the [\\<binding>](../../../../docs/framework/misc/binding.md) element."},{"pos":[7662,7788],"content":"Set the <ph id=\"ph1\">`mode`</ph> attribute on the <ph id=\"ph2\">`&lt;security&gt;`</ph> element to a value of <ph id=\"ph3\">`Message`</ph> or <ph id=\"ph4\">`TransportWithMessageCredential`</ph>, as required.","source":"Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required."},{"pos":[7793,7861],"content":"Create a <ph id=\"ph1\">`&lt;message&gt;`</ph> element as a child of the <ph id=\"ph2\">`&lt;security&gt;`</ph> element.","source":"Create a `<message>` element as a child of the `<security>` element."},{"content":"Optional.","pos":[7866,7875]},{"content":"Set the <ph id=\"ph1\">`algorithmSuite`</ph> attribute on the <ph id=\"ph2\">`&lt;message&gt;`</ph> element with an appropriate value.","pos":[7876,7964],"source":" Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value."},{"content":"The default is <ph id=\"ph1\">`Basic256`</ph>.","pos":[7965,7991],"source":" The default is `Basic256`."},{"content":"Optional.","pos":[7996,8005]},{"content":"If an asymmetric proof key is required, set the <ph id=\"ph1\">`issuedKeyType`</ph> attribute of the <ph id=\"ph2\">`&lt;message&gt;`</ph> element to <ph id=\"ph3\">`AsymmetricKey`</ph>.","pos":[8006,8126],"source":" If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`."},{"content":"The default is <ph id=\"ph1\">`SymmetricKey`</ph>.","pos":[8127,8157],"source":" The default is `SymmetricKey`."},{"content":"Optional.","pos":[8162,8171]},{"content":"Set the <ph id=\"ph1\">`issuedTokenType`</ph> attribute on the <ph id=\"ph2\">`&lt;message&gt;`</ph> element.","pos":[8172,8235],"source":" Set the `issuedTokenType` attribute on the `<message>` element."},{"content":"Required on the client if no local issuer is specified; optional on the service.","pos":[8240,8320]},{"content":"Create an <ph id=\"ph1\">`&lt;issuer&gt;`</ph> element as a child of the <ph id=\"ph2\">`&lt;message&gt;`</ph> element.","pos":[8321,8388],"source":" Create an `<issuer>` element as a child of the `<message>` element."},{"pos":[8394,8531],"content":"Set the <ph id=\"ph1\">`address`</ph> attribute to the <ph id=\"ph2\">`&lt;issuer&gt;`</ph> element and specify the address at which the security token service accepts token requests.","source":"Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests."},{"content":"Optional.","pos":[8537,8546]},{"content":"Add an <ph id=\"ph1\">`&lt;identity&gt;`</ph> child element and specify the identity of the security token service","pos":[8547,8635],"source":" Add an `<identity>` child element and specify the identity of the security token service"},{"pos":[8641,8745],"content":"For more information, see <bpt id=\"p1\">[</bpt>Service Identity and Authentication<ept id=\"p1\">](service-identity-and-authentication.md)</ept>.","source":"For more information, see [Service Identity and Authentication](service-identity-and-authentication.md)."},{"content":"Required on the client if no local issuer is specified; not used on the service.","pos":[8751,8831]},{"content":"Create a <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept> element in the bindings section that can be used to communicate with the security token service.","pos":[8832,8994],"source":" Create a [\\<binding>](../../../../docs/framework/misc/binding.md) element in the bindings section that can be used to communicate with the security token service."},{"content":"For more information about creating a binding, see <bpt id=\"p1\">[</bpt>How to: Specify a Service Binding in Configuration<ept id=\"p1\">](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)</ept>.","pos":[8995,9184],"source":" For more information about creating a binding, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)."},{"pos":[9190,9328],"content":"Specify the binding created in the previous step by setting the <ph id=\"ph1\">`binding`</ph> and <ph id=\"ph2\">`bindingConfiguration`</ph> attributes of the <ph id=\"ph3\">`&lt;issuer&gt;`</ph> element.","source":"Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element."},{"content":"Not used on the client; optional on the service.","pos":[9334,9382]},{"content":"Create an <ph id=\"ph1\">`&lt;issuerMetadata&gt;`</ph> element as a child of the &lt;<ph id=\"ph2\">`message`</ph>&gt; element.","pos":[9383,9458],"source":" Create an `<issuerMetadata>` element as a child of the <`message`> element."},{"content":"Then, in an <ph id=\"ph1\">`address`</ph> attribute on the <ph id=\"ph2\">`&lt;issuerMetadata&gt;`</ph> element, specify the address at which the security token service is to publish its metadata.","pos":[9459,9609],"source":" Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata."},{"content":"Optionally, add an <ph id=\"ph1\">`&lt;identity&gt;`</ph> child element and specify the identity of the security token service.","pos":[9610,9711],"source":" Optionally, add an `<identity>` child element and specify the identity of the security token service."},{"content":"Optional on both the client and the service.","pos":[9717,9761]},{"content":"Add a <ph id=\"ph1\">`&lt;claimTypeRequirements&gt;`</ph> element as a child of the <ph id=\"ph2\">`&lt;message&gt;`</ph> element.","pos":[9762,9840],"source":" Add a `<claimTypeRequirements>` element as a child of the `<message>` element."},{"content":"Specify required and optional claims that the service relies on by adding <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>add&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md)</ept> elements to the <ph id=\"ph2\">`&lt;claimTypeRequirements&gt;`</ph> element and specifying the claim type with the <ph id=\"ph3\">`claimType`</ph> attribute.","pos":[9841,10126],"source":" Specify required and optional claims that the service relies on by adding [\\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute."},{"content":"Specify whether a given claim is required or optional by setting the <ph id=\"ph1\">`isOptional`</ph> attribute.","pos":[10127,10219],"source":" Specify whether a given claim is required or optional by setting the `isOptional` attribute."},{"pos":[10224,10231],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[10233,10326],"content":"The following code sample shows code for setting up a <ph id=\"ph1\">`WSFederationHttpBinding`</ph> imperatively.","source":"The following code sample shows code for setting up a `WSFederationHttpBinding` imperatively."},{"pos":[10565,10573],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[10577,10604],"content":"<bpt id=\"p1\">[</bpt>Federation<ept id=\"p1\">](federation.md)</ept>","source":"[Federation](federation.md)"},{"pos":[10607,10687],"content":"<bpt id=\"p1\">[</bpt>Federation Sample<ept id=\"p1\">](../../../../docs/framework/wcf/samples/federation-sample.md)</ept>","source":"[Federation Sample](../../../../docs/framework/wcf/samples/federation-sample.md)"},{"pos":[10690,10816],"content":"<bpt id=\"p1\">[</bpt>How to: Disable Secure Sessions on a WSFederationHttpBinding<ept id=\"p1\">](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)</ept>","source":"[How to: Disable Secure Sessions on a WSFederationHttpBinding](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)"}]}