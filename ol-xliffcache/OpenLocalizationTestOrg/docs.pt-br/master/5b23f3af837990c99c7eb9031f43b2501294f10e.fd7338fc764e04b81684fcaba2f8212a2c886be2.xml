{"content":"---\ntitle: \"Using AsyncOperationContext in an Activity Sample | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 0888a0bd-d227-4c00-ad6a-b654a01740e8\ncaps.latest.revision: 15\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# Using AsyncOperationContext in an Activity Sample\nThis sample demonstrates how to develop a custom <xref:System.Activities.CodeActivity> that uses <xref:System.Activities.AsyncCodeActivityContext> to perform work asynchronously outside of the workflow.  \n  \n## Sample Details  \n The sample activity uses the <xref:System.IO.FileStream.BeginWrite%2A> and <xref:System.IO.FileStream.EndWrite%2A> methods on the <xref:System.IO.FileStream> class to asynchronously write data to a file. The pattern introduced here can be adapted for use with other asynchronous methods. While the asynchronous operation is executing, other activities in the workflow can execute, but the workflow cannot be persisted.  \n  \n#### To set up, build, and run the sample  \n  \n1.  Open the Async.sln sample solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].  \n  \n2.  Build and run the solution.  \n  \n> [!IMPORTANT]\n>  The samples may already be installed on your machine. Check for the following (default) directory before continuing.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples`  \n>   \n>  If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples. This sample is located in the following directory.  \n>   \n>  `<InstallDrive>:\\WF_WCF_Samples\\WF\\Basic\\CustomActivities\\Code-Bodied\\Async`  \n  \n## See Also","nodes":[{"pos":[12,78],"content":"Using AsyncOperationContext in an Activity Sample | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"Using AsyncOperationContext in an Activity Sample | Microsoft Docs","pos":[0,66]}]},{"pos":[344,393],"content":"Using AsyncOperationContext in an Activity Sample","linkify":"Using AsyncOperationContext in an Activity Sample","nodes":[{"content":"Using AsyncOperationContext in an Activity Sample","pos":[0,49]}]},{"content":"This sample demonstrates how to develop a custom <ph id=\"ph1\">&lt;xref:System.Activities.CodeActivity&gt;</ph> that uses <ph id=\"ph2\">&lt;xref:System.Activities.AsyncCodeActivityContext&gt;</ph> to perform work asynchronously outside of the workflow.","pos":[394,596],"source":"This sample demonstrates how to develop a custom <xref:System.Activities.CodeActivity> that uses <xref:System.Activities.AsyncCodeActivityContext> to perform work asynchronously outside of the workflow."},{"pos":[605,619],"content":"Sample Details","linkify":"Sample Details","nodes":[{"content":"Sample Details","pos":[0,14]}]},{"content":"The sample activity uses the <ph id=\"ph1\">&lt;xref:System.IO.FileStream.BeginWrite%2A&gt;</ph> and <ph id=\"ph2\">&lt;xref:System.IO.FileStream.EndWrite%2A&gt;</ph> methods on the <ph id=\"ph3\">&lt;xref:System.IO.FileStream&gt;</ph> class to asynchronously write data to a file.","pos":[623,826],"source":"The sample activity uses the <xref:System.IO.FileStream.BeginWrite%2A> and <xref:System.IO.FileStream.EndWrite%2A> methods on the <xref:System.IO.FileStream> class to asynchronously write data to a file."},{"content":"The pattern introduced here can be adapted for use with other asynchronous methods.","pos":[827,910]},{"content":"While the asynchronous operation is executing, other activities in the workflow can execute, but the workflow cannot be persisted.","pos":[911,1041]},{"pos":[1052,1088],"content":"To set up, build, and run the sample","linkify":"To set up, build, and run the sample","nodes":[{"content":"To set up, build, and run the sample","pos":[0,36]}]},{"pos":[1098,1190],"content":"Open the Async.sln sample solution in <ph id=\"ph1\">[!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]</ph>.","source":"Open the Async.sln sample solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)]."},{"content":"Build and run the solution.","pos":[1200,1227]},{"pos":[1235,1367],"content":"[!IMPORTANT]\n The samples may already be installed on your machine. Check for the following (default) directory before continuing.","leadings":["","> "],"nodes":[{"content":" The samples may already be installed on your machine. Check for the following (default) directory before continuing.","pos":[13,130],"nodes":[{"content":"The samples may already be installed on your machine.","pos":[1,54]},{"content":"Check for the following (default) directory before continuing.","pos":[55,117]}]}]},{"content":"If this directory does not exist, go to <bpt id=\"p1\">[</bpt>Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=150780)</ept> to download all <ph id=\"ph1\">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]</ph> and <ph id=\"ph2\">[!INCLUDE[wf1](../../../../includes/wf1-md.md)]</ph> samples.","pos":[1421,1747],"source":"If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples."},{"content":"This sample is located in the following directory.","pos":[1748,1798]},{"pos":[1894,1902],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]}]}