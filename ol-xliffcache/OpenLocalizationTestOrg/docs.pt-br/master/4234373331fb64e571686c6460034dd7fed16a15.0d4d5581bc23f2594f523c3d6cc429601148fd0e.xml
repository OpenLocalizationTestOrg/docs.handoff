{"content":"---\ntitle: \"Synchronous Server Socket Example | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"synchronous server sockets\"\n  - \"sockets, code examples\"\n  - \"sockets, synchronous server sockets\"\nms.assetid: 5916c764-879f-4716-99fb-1d21c6237f1c\ncaps.latest.revision: 8\nauthor: \"mcleblanc\"\nms.author: \"markl\"\nmanager: \"markl\"\n---\n# Synchronous Server Socket Example\nThe following example program creates a server that receives connection requests from clients. The server is built with a synchronous socket, so execution of the server application is suspended while it waits for a connection from a client. The application receives a string from the client, displays the string on the console, and then echoes the string back to the client. The string from the client must contain the string \"\\<EOF>\" to signal the end of the message.  \n  \n```vb  \nImports System  \nImports System.Net  \nImports System.Net.Sockets  \nImports System.Text  \nImports Microsoft.VisualBasic  \n  \nPublic Class SynchronousSocketListener  \n  \n    ' Incoming data from the client.  \n    Public Shared data As String = Nothing  \n  \n    Public Shared Sub Main()  \n        ' Data buffer for incoming data.  \n        Dim bytes() As Byte = New [Byte](1024) {}  \n  \n        ' Establish the local endpoint for the socket.  \n        ' Dns.GetHostName returns the name of the   \n        ' host running the application.  \n        Dim ipHostInfo As IPHostEntry = Dns.Resolve(Dns.GetHostName())  \n        Dim ipAddress As IPAddress = ipHostInfo.AddressList(0)  \n        Dim localEndPoint As New IPEndPoint(ipAddress, 11000)  \n  \n        ' Create a TCP/IP socket.  \n        Dim listener As New Socket(AddressFamily.InterNetwork, _  \n            SocketType.Stream, ProtocolType.Tcp)  \n  \n        ' Bind the socket to the local endpoint and   \n        ' listen for incoming connections.  \n  \n        listener.Bind(localEndPoint)  \n        listener.Listen(10)  \n  \n        ' Start listening for connections.  \n        While True  \n            Console.WriteLine(\"Waiting for a connection...\")  \n            ' Program is suspended while waiting for an incoming connection.  \n            Dim handler As Socket = listener.Accept()  \n            data = Nothing  \n  \n            ' An incoming connection needs to be processed.  \n            While True  \n                bytes = New Byte(1024) {}  \n                Dim bytesRec As Integer = handler.Receive(bytes)  \n                data += Encoding.ASCII.GetString(bytes, 0, bytesRec)  \n                If data.IndexOf(\"<EOF>\") > -1 Then  \n                    Exit While  \n                End If  \n            End While  \n            ' Show the data on the console.  \n            Console.WriteLine(\"Text received : {0}\", data)  \n            ' Echo the data back to the client.  \n            Dim msg As Byte() = Encoding.ASCII.GetBytes(data)  \n            handler.Send(msg)  \n            handler.Shutdown(SocketShutdown.Both)  \n            handler.Close()  \n        End While  \n    End Sub  \n  \nEnd Class 'SynchronousSocketListener  \n  \n```  \n  \n```csharp  \nusing System;  \nusing System.Net;  \nusing System.Net.Sockets;  \nusing System.Text;  \n  \npublic class SynchronousSocketListener {  \n  \n    // Incoming data from the client.  \n    public static string data = null;  \n  \n    public static void StartListening() {  \n        // Data buffer for incoming data.  \n        byte[] bytes = new Byte[1024];  \n  \n        // Establish the local endpoint for the socket.  \n        // Dns.GetHostName returns the name of the   \n        // host running the application.  \n        IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());  \n        IPAddress ipAddress = ipHostInfo.AddressList[0];  \n        IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);  \n  \n        // Create a TCP/IP socket.  \n        Socket listener = new Socket(AddressFamily.InterNetwork,  \n            SocketType.Stream, ProtocolType.Tcp );  \n  \n        // Bind the socket to the local endpoint and   \n        // listen for incoming connections.  \n        try {  \n            listener.Bind(localEndPoint);  \n            listener.Listen(10);  \n  \n            // Start listening for connections.  \n            while (true) {  \n                Console.WriteLine(\"Waiting for a connection...\");  \n                // Program is suspended while waiting for an incoming connection.  \n                Socket handler = listener.Accept();  \n                data = null;  \n  \n                // An incoming connection needs to be processed.  \n                while (true) {  \n                    bytes = new byte[1024];  \n                    int bytesRec = handler.Receive(bytes);  \n                    data += Encoding.ASCII.GetString(bytes,0,bytesRec);  \n                    if (data.IndexOf(\"<EOF>\") > -1) {  \n                        break;  \n                    }  \n                }  \n  \n                // Show the data on the console.  \n                Console.WriteLine( \"Text received : {0}\", data);  \n  \n                // Echo the data back to the client.  \n                byte[] msg = Encoding.ASCII.GetBytes(data);  \n  \n                handler.Send(msg);  \n                handler.Shutdown(SocketShutdown.Both);  \n                handler.Close();  \n            }  \n  \n        } catch (Exception e) {  \n            Console.WriteLine(e.ToString());  \n        }  \n  \n        Console.WriteLine(\"\\nPress ENTER to continue...\");  \n        Console.Read();  \n  \n    }  \n  \n    public static int Main(String[] args) {  \n        StartListening();  \n        return 0;  \n    }  \n}  \n```  \n  \n## See Also  \n [Synchronous Client Socket Example](../../../docs/framework/network-programming/synchronous-client-socket-example.md)   \n [Using a Synchronous Server Socket](../../../docs/framework/network-programming/using-a-synchronous-server-socket.md)   \n [Socket Code Examples](../../../docs/framework/network-programming/socket-code-examples.md)","nodes":[{"pos":[4,504],"nodes":[{"content":"Synchronous Server Socket Example | Microsoft Docs","nodes":[{"pos":[0,50],"content":"Synchronous Server Socket Example | Microsoft Docs","nodes":[{"content":"Synchronous Server Socket Example | Microsoft Docs","pos":[0,50]}]}],"pos":[6,59],"yaml":true}],"content":"title: \"Synchronous Server Socket Example | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\ndev_langs: \n  - \"VB\"\n  - \"CSharp\"\n  - \"C++\"\n  - \"jsharp\"\nhelpviewer_keywords: \n  - \"synchronous server sockets\"\n  - \"sockets, code examples\"\n  - \"sockets, synchronous server sockets\"\nms.assetid: 5916c764-879f-4716-99fb-1d21c6237f1c\ncaps.latest.revision: 8\nauthor: \"mcleblanc\"\nms.author: \"markl\"\nmanager: \"markl\"","yamlblock":true},{"pos":[511,544],"content":"Synchronous Server Socket Example","linkify":"Synchronous Server Socket Example","nodes":[{"content":"Synchronous Server Socket Example","pos":[0,33]}]},{"content":"The following example program creates a server that receives connection requests from clients.","pos":[545,639]},{"content":"The server is built with a synchronous socket, so execution of the server application is suspended while it waits for a connection from a client.","pos":[640,785]},{"content":"The application receives a string from the client, displays the string on the console, and then echoes the string back to the client.","pos":[786,919]},{"content":"The string from the client must contain the string \"<ph id=\"ph1\">\\&lt;</ph>EOF&gt;\" to signal the end of the message.","pos":[920,1013],"source":" The string from the client must contain the string \"\\<EOF>\" to signal the end of the message."},{"pos":[5739,5747],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>Synchronous Client Socket Example<ept id=\"p1\">](../../../docs/framework/network-programming/synchronous-client-socket-example.md)</ept><ph id=\"ph1\"> </ph>","pos":[5751,5869],"source":"[Synchronous Client Socket Example](../../../docs/framework/network-programming/synchronous-client-socket-example.md) "},{"content":"<bpt id=\"p1\">[</bpt>Using a Synchronous Server Socket<ept id=\"p1\">](../../../docs/framework/network-programming/using-a-synchronous-server-socket.md)</ept><ph id=\"ph1\"> </ph>","pos":[5873,5991],"source":"[Using a Synchronous Server Socket](../../../docs/framework/network-programming/using-a-synchronous-server-socket.md) "},{"content":"<bpt id=\"p1\">[</bpt>Socket Code Examples<ept id=\"p1\">](../../../docs/framework/network-programming/socket-code-examples.md)</ept>","pos":[5995,6086],"source":"[Socket Code Examples](../../../docs/framework/network-programming/socket-code-examples.md)"}]}