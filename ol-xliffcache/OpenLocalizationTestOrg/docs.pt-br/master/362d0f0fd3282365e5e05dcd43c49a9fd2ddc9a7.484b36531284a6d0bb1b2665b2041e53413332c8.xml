{"content":"---\ntitle: \"Optimizing Performance: Application Resources\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"application resources [WPF], performance\"\n  - \"resources [WPF], performance\"\n  - \"static resources [WPF]\"\n  - \"sharing resources [WPF]\"\n  - \"brushes [WPF], performance\"\n  - \"sharing brushes without copying [WPF]\"\nms.assetid: 62b88488-c08e-4804-b7de-a1c34fbe929c\n---\n# Optimizing Performance: Application Resources\n[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] allows you to share application resources so that you can support a consistent look or behavior across similar-typed elements. This topic provides a few recommendations in this area that can help you improve the performance of your applications.  \n  \n For more information on resources, see [XAML Resources](xaml-resources.md).  \n  \n## Sharing resources  \n If your application uses custom controls and defines resources in a <xref:System.Windows.ResourceDictionary> (or XAML Resources node), it is recommended that you either define the resources at the <xref:System.Windows.Application> or <xref:System.Windows.Window> object level, or define them in the default theme for the custom controls. Defining resources in a custom control's <xref:System.Windows.ResourceDictionary> imposes a performance impact for every instance of that control. For example, if you have performance-intensive brush operations defined as part of the resource definition of a custom control and many instances of the custom control, the application's working set will increase significantly.  \n  \n To illustrate this point, consider the following. Let's say you are developing a card game using [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. For most card games, you need 52 cards with 52 different faces. You decide to implement a card custom control and you define 52 brushes (each representing a card face) in the resources of your card custom control. In your main application, you initially create 52 instances of this card custom control. Each instance of the card custom control generates 52 instances of <xref:System.Windows.Media.Brush> objects, which gives you a total of 52 * 52 <xref:System.Windows.Media.Brush> objects in your application. By moving the brushes out of the card custom control resources to the <xref:System.Windows.Application> or <xref:System.Windows.Window> object level, or defining them in the default theme for the custom control, you reduce the working set of the application, since you are now sharing the 52 brushes among 52 instances of the card control.  \n  \n## Sharing a Brush without Copying  \n If you have multiple elements using the same <xref:System.Windows.Media.Brush> object, define the brush as a resource and reference it, rather than defining the brush inline in [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)]. This method will create one instance and reuse it, whereas defining brushes inline in [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)] creates a new instance for each element.  \n  \n The following markup sample illustrates this point:  \n  \n [!code-xaml[Performance#PerformanceSnippet7](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/BrushResource.xaml#performancesnippet7)]  \n  \n## Use Static Resources when Possible  \n A static resource provides a value for any XAML property attribute by looking up a reference to an already defined resource. Lookup behavior for that resource is analogous to compile-time lookup.  \n  \n A dynamic resource, on the other hand, will create a temporary expression during the initial compilation and thus defer lookup for resources until the requested resource value is actually required in order to construct an object. Lookup behavior for that resource is analogous to run-time lookup, which imposes a performance impact. Use static resources whenever possible in your application, using dynamic resources only when necessary.  \n  \n The following markup sample shows the use of both types of resources:  \n  \n [!code-xaml[Performance#PerformanceSnippet8](~/samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/DynamicResource.xaml#performancesnippet8)]  \n  \n## See also\n\n- [Optimizing WPF Application Performance](optimizing-wpf-application-performance.md)\n- [Planning for Application Performance](planning-for-application-performance.md)\n- [Taking Advantage of Hardware](optimizing-performance-taking-advantage-of-hardware.md)\n- [Layout and Design](optimizing-performance-layout-and-design.md)\n- [2D Graphics and Imaging](optimizing-performance-2d-graphics-and-imaging.md)\n- [Object Behavior](optimizing-performance-object-behavior.md)\n- [Text](optimizing-performance-text.md)\n- [Data Binding](optimizing-performance-data-binding.md)\n- [Other Performance Recommendations](optimizing-performance-other-recommendations.md)\n","nodes":[{"pos":[4,369],"embed":true,"restype":"x-metadata","content":"title: \"Optimizing Performance: Application Resources\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"application resources [WPF], performance\"\n  - \"resources [WPF], performance\"\n  - \"static resources [WPF]\"\n  - \"sharing resources [WPF]\"\n  - \"brushes [WPF], performance\"\n  - \"sharing brushes without copying [WPF]\"\nms.assetid: 62b88488-c08e-4804-b7de-a1c34fbe929c","nodes":[{"content":"Optimizing Performance: Application Resources","nodes":[{"pos":[0,45],"content":"Optimizing Performance: Application Resources","nodes":[{"content":"Optimizing Performance: Application Resources","pos":[0,45]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[376,421],"content":"Optimizing Performance: Application Resources","linkify":"Optimizing Performance: Application Resources","nodes":[{"content":"Optimizing Performance: Application Resources","pos":[0,45]}]},{"content":"<ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph> allows you to share application resources so that you can support a consistent look or behavior across similar-typed elements.","pos":[422,630],"source":"[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] allows you to share application resources so that you can support a consistent look or behavior across similar-typed elements."},{"content":"This topic provides a few recommendations in this area that can help you improve the performance of your applications.","pos":[631,749]},{"pos":[756,831],"content":"For more information on resources, see <bpt id=\"p1\">[</bpt>XAML Resources<ept id=\"p1\">](xaml-resources.md)</ept>.","source":"For more information on resources, see [XAML Resources](xaml-resources.md)."},{"pos":[840,857],"content":"Sharing resources","linkify":"Sharing resources","nodes":[{"content":"Sharing resources","pos":[0,17]}]},{"content":"If your application uses custom controls and defines resources in a <ph id=\"ph1\">&lt;xref:System.Windows.ResourceDictionary&gt;</ph> (or XAML Resources node), it is recommended that you either define the resources at the <ph id=\"ph2\">&lt;xref:System.Windows.Application&gt;</ph> or <ph id=\"ph3\">&lt;xref:System.Windows.Window&gt;</ph> object level, or define them in the default theme for the custom controls.","pos":[861,1198],"source":"If your application uses custom controls and defines resources in a <xref:System.Windows.ResourceDictionary> (or XAML Resources node), it is recommended that you either define the resources at the <xref:System.Windows.Application> or <xref:System.Windows.Window> object level, or define them in the default theme for the custom controls."},{"content":"Defining resources in a custom control's <ph id=\"ph1\">&lt;xref:System.Windows.ResourceDictionary&gt;</ph> imposes a performance impact for every instance of that control.","pos":[1199,1345],"source":" Defining resources in a custom control's <xref:System.Windows.ResourceDictionary> imposes a performance impact for every instance of that control."},{"content":"For example, if you have performance-intensive brush operations defined as part of the resource definition of a custom control and many instances of the custom control, the application's working set will increase significantly.","pos":[1346,1573]},{"content":"To illustrate this point, consider the following.","pos":[1580,1629]},{"content":"Let's say you are developing a card game using <ph id=\"ph1\">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</ph>.","pos":[1630,1759],"source":" Let's say you are developing a card game using [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]."},{"content":"For most card games, you need 52 cards with 52 different faces.","pos":[1760,1823]},{"content":"You decide to implement a card custom control and you define 52 brushes (each representing a card face) in the resources of your card custom control.","pos":[1824,1973]},{"content":"In your main application, you initially create 52 instances of this card custom control.","pos":[1974,2062]},{"content":"Each instance of the card custom control generates 52 instances of <ph id=\"ph1\">&lt;xref:System.Windows.Media.Brush&gt;</ph> objects, which gives you a total of 52 * 52 <ph id=\"ph2\">&lt;xref:System.Windows.Media.Brush&gt;</ph> objects in your application.","pos":[2063,2270],"source":" Each instance of the card custom control generates 52 instances of <xref:System.Windows.Media.Brush> objects, which gives you a total of 52 * 52 <xref:System.Windows.Media.Brush> objects in your application."},{"content":"By moving the brushes out of the card custom control resources to the <ph id=\"ph1\">&lt;xref:System.Windows.Application&gt;</ph> or <ph id=\"ph2\">&lt;xref:System.Windows.Window&gt;</ph> object level, or defining them in the default theme for the custom control, you reduce the working set of the application, since you are now sharing the 52 brushes among 52 instances of the card control.","pos":[2271,2610],"source":" By moving the brushes out of the card custom control resources to the <xref:System.Windows.Application> or <xref:System.Windows.Window> object level, or defining them in the default theme for the custom control, you reduce the working set of the application, since you are now sharing the 52 brushes among 52 instances of the card control."},{"pos":[2619,2650],"content":"Sharing a Brush without Copying","linkify":"Sharing a Brush without Copying","nodes":[{"content":"Sharing a Brush without Copying","pos":[0,31]}]},{"content":"If you have multiple elements using the same <ph id=\"ph1\">&lt;xref:System.Windows.Media.Brush&gt;</ph> object, define the brush as a resource and reference it, rather than defining the brush inline in <ph id=\"ph2\">[!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)]</ph>.","pos":[2654,2911],"source":"If you have multiple elements using the same <xref:System.Windows.Media.Brush> object, define the brush as a resource and reference it, rather than defining the brush inline in [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)]."},{"content":"This method will create one instance and reuse it, whereas defining brushes inline in <ph id=\"ph1\">[!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)]</ph> creates a new instance for each element.","pos":[2912,3118],"source":" This method will create one instance and reuse it, whereas defining brushes inline in [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)] creates a new instance for each element."},{"content":"The following markup sample illustrates this point:","pos":[3125,3176]},{"pos":[3338,3372],"content":"Use Static Resources when Possible","linkify":"Use Static Resources when Possible","nodes":[{"content":"Use Static Resources when Possible","pos":[0,34]}]},{"content":"A static resource provides a value for any XAML property attribute by looking up a reference to an already defined resource.","pos":[3376,3500]},{"content":"Lookup behavior for that resource is analogous to compile-time lookup.","pos":[3501,3571]},{"content":"A dynamic resource, on the other hand, will create a temporary expression during the initial compilation and thus defer lookup for resources until the requested resource value is actually required in order to construct an object.","pos":[3578,3807]},{"content":"Lookup behavior for that resource is analogous to run-time lookup, which imposes a performance impact.","pos":[3808,3910]},{"content":"Use static resources whenever possible in your application, using dynamic resources only when necessary.","pos":[3911,4015]},{"content":"The following markup sample shows the use of both types of resources:","pos":[4022,4091]},{"pos":[4255,4263],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[4267,4350],"content":"<bpt id=\"p1\">[</bpt>Optimizing WPF Application Performance<ept id=\"p1\">](optimizing-wpf-application-performance.md)</ept>","source":"[Optimizing WPF Application Performance](optimizing-wpf-application-performance.md)"},{"pos":[4353,4432],"content":"<bpt id=\"p1\">[</bpt>Planning for Application Performance<ept id=\"p1\">](planning-for-application-performance.md)</ept>","source":"[Planning for Application Performance](planning-for-application-performance.md)"},{"pos":[4435,4521],"content":"<bpt id=\"p1\">[</bpt>Taking Advantage of Hardware<ept id=\"p1\">](optimizing-performance-taking-advantage-of-hardware.md)</ept>","source":"[Taking Advantage of Hardware](optimizing-performance-taking-advantage-of-hardware.md)"},{"pos":[4524,4588],"content":"<bpt id=\"p1\">[</bpt>Layout and Design<ept id=\"p1\">](optimizing-performance-layout-and-design.md)</ept>","source":"[Layout and Design](optimizing-performance-layout-and-design.md)"},{"pos":[4591,4667],"content":"<bpt id=\"p1\">[</bpt>2D Graphics and Imaging<ept id=\"p1\">](optimizing-performance-2d-graphics-and-imaging.md)</ept>","source":"[2D Graphics and Imaging](optimizing-performance-2d-graphics-and-imaging.md)"},{"pos":[4670,4730],"content":"<bpt id=\"p1\">[</bpt>Object Behavior<ept id=\"p1\">](optimizing-performance-object-behavior.md)</ept>","source":"[Object Behavior](optimizing-performance-object-behavior.md)"},{"pos":[4733,4771],"content":"<bpt id=\"p1\">[</bpt>Text<ept id=\"p1\">](optimizing-performance-text.md)</ept>","source":"[Text](optimizing-performance-text.md)"},{"pos":[4774,4828],"content":"<bpt id=\"p1\">[</bpt>Data Binding<ept id=\"p1\">](optimizing-performance-data-binding.md)</ept>","source":"[Data Binding](optimizing-performance-data-binding.md)"},{"pos":[4831,4915],"content":"<bpt id=\"p1\">[</bpt>Other Performance Recommendations<ept id=\"p1\">](optimizing-performance-other-recommendations.md)</ept>","source":"[Other Performance Recommendations](optimizing-performance-other-recommendations.md)"}]}