{"content":"---\ntitle: \"Application Security Scenarios in SQL Server | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 0164f3a4-406e-4693-bec3-03c8e18b46d7\ncaps.latest.revision: 5\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"\n---\n# Application Security Scenarios in SQL Server\nThere is no single correct way to create a secure SQL Server client application. Every application is unique in its requirements, deployment environment, and user population. An application that is reasonably secure when it is initially deployed can become less secure over time. It is impossible to predict with any accuracy what threats may emerge in the future.  \n  \n SQL Server, as a product, has evolved over many versions to incorporate the latest security features that enable developers to create secure database applications. However, security doesn't come in the box; it requires continual monitoring and updating.  \n  \n## Common Threats  \n Developers need to understand security threats, the tools provided to counter them, and how to avoid self-inflicted security holes. Security can best be thought of as a chain, where a break in any one link compromises the strength of the whole. The following list includes some common security threats that are discussed in more detail in the topics in this section.  \n  \n### SQL Injection  \n SQL Injection is the process by which a malicious user enters Transact-SQL statements instead of valid input. If the input is passed directly to the server without being validated and if the application inadvertently executes the injected code, then the attack has the potential to damage or destroy data. You can thwart SQL Server injection attacks by using stored procedures and parameterized commands, avoiding dynamic SQL, and restricting permissions on all users.  \n  \n### Elevation of Privilege  \n Elevation of privilege attacks occur when a user is able to assume the privileges of a trusted account, such as an owner or administrator. Always run under least-privileged user accounts and assign only needed permissions. Avoid using administrative or owner accounts for executing code. This limits the amount of damage that can occur if an attack succeeds. When performing tasks that require additional permissions, use procedure signing or impersonation only for the duration of the task. You can sign stored procedures with certificates or use impersonation to temporarily assign permissions.  \n  \n### Probing and Intelligent Observation  \n A probing attack can use error messages generated by an application to search for security vulnerabilities. Implement error handling in all procedural code to prevent SQL Server error information from being returned to the end user.  \n  \n### Authentication  \n A connection string injection attack can occur when using SQL Server logins if a connection string based on user input is constructed at run time. If the connection string is not checked for valid keyword pairs, an attacker can insert extra characters, potentially accessing sensitive data or other resources on the server. Use Windows authentication wherever possible. If you must use SQL Server logins, use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder> to create and validate connection strings at run time.  \n  \n### Passwords  \n Many attacks succeed because an intruder was able to obtain or guess a password for a privileged user. Passwords are your first line of defense against intruders, so setting strong passwords is essential to the security of your system. Create and enforce password policies for mixed mode authentication.  \n  \n Always assign a strong password to the `sa` account, even when using Windows Authentication.  \n  \n## In This Section  \n [Managing Permissions with Stored Procedures in SQL Server](../../../../../docs/framework/data/adonet/sql/managing-permissions-with-stored-procedures-in-sql-server.md)  \n Describes how to use stored procedures to manage permissions and control data access. Using stored procedures is an effective way to respond to many security threats.  \n  \n [Writing Secure Dynamic SQL in SQL Server](../../../../../docs/framework/data/adonet/sql/writing-secure-dynamic-sql-in-sql-server.md)  \n Describes techniques for writing secure dynamic SQL using stored procedures.  \n  \n [Signing Stored Procedures in SQL Server](../../../../../docs/framework/data/adonet/sql/signing-stored-procedures-in-sql-server.md)  \n Describes how to sign a stored procedure with a certificate to enable users to work with data they do not have direct access to. This enables stored procedures to perform operations that the caller does not have permissions to perform directly.  \n  \n [Customizing Permissions with Impersonation in SQL Server](../../../../../docs/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server.md)  \n Describes how to use the EXECUTE AS clause to impersonate another user. Impersonation switches the execution context from the caller to the specified user.  \n  \n [Granting Row-Level Permissions in SQL Server](../../../../../docs/framework/data/adonet/sql/granting-row-level-permissions-in-sql-server.md)  \n Describes how to implement row-level permissions to restrict data access.  \n  \n [Creating Application Roles in SQL Server](../../../../../docs/framework/data/adonet/sql/creating-application-roles-in-sql-server.md)  \n Describes features and functionality of application roles.  \n  \n [Enabling Cross-Database Access in SQL Server](../../../../../docs/framework/data/adonet/sql/enabling-cross-database-access-in-sql-server.md)  \n Describes how to enable cross-database access without jeopardizing security.  \n  \n## See Also  \n [SQL Server Security](../../../../../docs/framework/data/adonet/sql/sql-server-security.md)   \n [Overview of SQL Server Security](../../../../../docs/framework/data/adonet/sql/overview-of-sql-server-security.md)   \n [Securing ADO.NET Applications](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md)   \n [ADO.NET Managed Providers and DataSet Developer Center](http://go.microsoft.com/fwlink/?LinkId=217917)","nodes":[{"pos":[4,375],"nodes":[{"content":"Application Security Scenarios in SQL Server | Microsoft Docs","nodes":[{"pos":[0,61],"content":"Application Security Scenarios in SQL Server | Microsoft Docs","nodes":[{"content":"Application Security Scenarios in SQL Server | Microsoft Docs","pos":[0,61]}]}],"pos":[6,70],"yaml":true}],"content":"title: \"Application Security Scenarios in SQL Server | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-ado\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: 0164f3a4-406e-4693-bec3-03c8e18b46d7\ncaps.latest.revision: 5\nauthor: \"JennieHubbard\"\nms.author: \"jhubbard\"\nmanager: \"jhubbard\"","yamlblock":true},{"pos":[382,426],"content":"Application Security Scenarios in SQL Server","linkify":"Application Security Scenarios in SQL Server","nodes":[{"content":"Application Security Scenarios in SQL Server","pos":[0,44]}]},{"content":"There is no single correct way to create a secure SQL Server client application.","pos":[427,507]},{"content":"Every application is unique in its requirements, deployment environment, and user population.","pos":[508,601]},{"content":"An application that is reasonably secure when it is initially deployed can become less secure over time.","pos":[602,706]},{"content":"It is impossible to predict with any accuracy what threats may emerge in the future.","pos":[707,791]},{"content":"SQL Server, as a product, has evolved over many versions to incorporate the latest security features that enable developers to create secure database applications.","pos":[798,961]},{"content":"However, security doesn't come in the box; it requires continual monitoring and updating.","pos":[962,1051]},{"pos":[1060,1074],"content":"Common Threats","linkify":"Common Threats","nodes":[{"content":"Common Threats","pos":[0,14]}]},{"content":"Developers need to understand security threats, the tools provided to counter them, and how to avoid self-inflicted security holes.","pos":[1078,1209]},{"content":"Security can best be thought of as a chain, where a break in any one link compromises the strength of the whole.","pos":[1210,1322]},{"content":"The following list includes some common security threats that are discussed in more detail in the topics in this section.","pos":[1323,1444]},{"pos":[1454,1467],"content":"SQL Injection","linkify":"SQL Injection","nodes":[{"content":"SQL Injection","pos":[0,13]}]},{"content":"SQL Injection is the process by which a malicious user enters Transact-SQL statements instead of valid input.","pos":[1471,1580]},{"content":"If the input is passed directly to the server without being validated and if the application inadvertently executes the injected code, then the attack has the potential to damage or destroy data.","pos":[1581,1776]},{"content":"You can thwart SQL Server injection attacks by using stored procedures and parameterized commands, avoiding dynamic SQL, and restricting permissions on all users.","pos":[1777,1939]},{"pos":[1949,1971],"content":"Elevation of Privilege","linkify":"Elevation of Privilege","nodes":[{"content":"Elevation of Privilege","pos":[0,22]}]},{"content":"Elevation of privilege attacks occur when a user is able to assume the privileges of a trusted account, such as an owner or administrator.","pos":[1975,2113]},{"content":"Always run under least-privileged user accounts and assign only needed permissions.","pos":[2114,2197]},{"content":"Avoid using administrative or owner accounts for executing code.","pos":[2198,2262]},{"content":"This limits the amount of damage that can occur if an attack succeeds.","pos":[2263,2333]},{"content":"When performing tasks that require additional permissions, use procedure signing or impersonation only for the duration of the task.","pos":[2334,2466]},{"content":"You can sign stored procedures with certificates or use impersonation to temporarily assign permissions.","pos":[2467,2571]},{"pos":[2581,2616],"content":"Probing and Intelligent Observation","linkify":"Probing and Intelligent Observation","nodes":[{"content":"Probing and Intelligent Observation","pos":[0,35]}]},{"content":"A probing attack can use error messages generated by an application to search for security vulnerabilities.","pos":[2620,2727]},{"content":"Implement error handling in all procedural code to prevent SQL Server error information from being returned to the end user.","pos":[2728,2852]},{"pos":[2862,2876],"content":"Authentication","linkify":"Authentication","nodes":[{"content":"Authentication","pos":[0,14]}]},{"content":"A connection string injection attack can occur when using SQL Server logins if a connection string based on user input is constructed at run time.","pos":[2880,3026]},{"content":"If the connection string is not checked for valid keyword pairs, an attacker can insert extra characters, potentially accessing sensitive data or other resources on the server.","pos":[3027,3203]},{"content":"Use Windows authentication wherever possible.","pos":[3204,3249]},{"content":"If you must use SQL Server logins, use the <ph id=\"ph1\">&lt;xref:System.Data.SqlClient.SqlConnectionStringBuilder&gt;</ph> to create and validate connection strings at run time.","pos":[3250,3403],"source":" If you must use SQL Server logins, use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder> to create and validate connection strings at run time."},{"pos":[3413,3422],"content":"Passwords","linkify":"Passwords","nodes":[{"content":"Passwords","pos":[0,9]}]},{"content":"Many attacks succeed because an intruder was able to obtain or guess a password for a privileged user.","pos":[3426,3528]},{"content":"Passwords are your first line of defense against intruders, so setting strong passwords is essential to the security of your system.","pos":[3529,3661]},{"content":"Create and enforce password policies for mixed mode authentication.","pos":[3662,3729]},{"pos":[3736,3828],"content":"Always assign a strong password to the <ph id=\"ph1\">`sa`</ph> account, even when using Windows Authentication.","source":"Always assign a strong password to the `sa` account, even when using Windows Authentication."},{"pos":[3837,3852],"content":"In This Section","linkify":"In This Section","nodes":[{"content":"In This Section","pos":[0,15]}]},{"content":"<bpt id=\"p1\">[</bpt>Managing Permissions with Stored Procedures in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/managing-permissions-with-stored-procedures-in-sql-server.md)</ept>","pos":[3856,4023],"source":"[Managing Permissions with Stored Procedures in SQL Server](../../../../../docs/framework/data/adonet/sql/managing-permissions-with-stored-procedures-in-sql-server.md)"},{"content":"Describes how to use stored procedures to manage permissions and control data access.","pos":[4027,4112]},{"content":"Using stored procedures is an effective way to respond to many security threats.","pos":[4113,4193]},{"content":"<bpt id=\"p1\">[</bpt>Writing Secure Dynamic SQL in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/writing-secure-dynamic-sql-in-sql-server.md)</ept>","pos":[4200,4333],"source":"[Writing Secure Dynamic SQL in SQL Server](../../../../../docs/framework/data/adonet/sql/writing-secure-dynamic-sql-in-sql-server.md)"},{"content":"Describes techniques for writing secure dynamic SQL using stored procedures.","pos":[4337,4413]},{"content":"<bpt id=\"p1\">[</bpt>Signing Stored Procedures in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/signing-stored-procedures-in-sql-server.md)</ept>","pos":[4420,4551],"source":"[Signing Stored Procedures in SQL Server](../../../../../docs/framework/data/adonet/sql/signing-stored-procedures-in-sql-server.md)"},{"content":"Describes how to sign a stored procedure with a certificate to enable users to work with data they do not have direct access to.","pos":[4555,4683]},{"content":"This enables stored procedures to perform operations that the caller does not have permissions to perform directly.","pos":[4684,4799]},{"content":"<bpt id=\"p1\">[</bpt>Customizing Permissions with Impersonation in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server.md)</ept>","pos":[4806,4971],"source":"[Customizing Permissions with Impersonation in SQL Server](../../../../../docs/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server.md)"},{"content":"Describes how to use the EXECUTE AS clause to impersonate another user.","pos":[4975,5046]},{"content":"Impersonation switches the execution context from the caller to the specified user.","pos":[5047,5130]},{"content":"<bpt id=\"p1\">[</bpt>Granting Row-Level Permissions in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/granting-row-level-permissions-in-sql-server.md)</ept>","pos":[5137,5278],"source":"[Granting Row-Level Permissions in SQL Server](../../../../../docs/framework/data/adonet/sql/granting-row-level-permissions-in-sql-server.md)"},{"content":"Describes how to implement row-level permissions to restrict data access.","pos":[5282,5355]},{"content":"<bpt id=\"p1\">[</bpt>Creating Application Roles in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/creating-application-roles-in-sql-server.md)</ept>","pos":[5362,5495],"source":"[Creating Application Roles in SQL Server](../../../../../docs/framework/data/adonet/sql/creating-application-roles-in-sql-server.md)"},{"content":"Describes features and functionality of application roles.","pos":[5499,5557]},{"content":"<bpt id=\"p1\">[</bpt>Enabling Cross-Database Access in SQL Server<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/enabling-cross-database-access-in-sql-server.md)</ept>","pos":[5564,5705],"source":"[Enabling Cross-Database Access in SQL Server](../../../../../docs/framework/data/adonet/sql/enabling-cross-database-access-in-sql-server.md)"},{"content":"Describes how to enable cross-database access without jeopardizing security.","pos":[5709,5785]},{"pos":[5794,5802],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"content":"<bpt id=\"p1\">[</bpt>SQL Server Security<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/sql-server-security.md)</ept><ph id=\"ph1\"> </ph>","pos":[5806,5898],"source":"[SQL Server Security](../../../../../docs/framework/data/adonet/sql/sql-server-security.md) "},{"content":"<bpt id=\"p1\">[</bpt>Overview of SQL Server Security<ept id=\"p1\">](../../../../../docs/framework/data/adonet/sql/overview-of-sql-server-security.md)</ept><ph id=\"ph1\"> </ph>","pos":[5902,6018],"source":"[Overview of SQL Server Security](../../../../../docs/framework/data/adonet/sql/overview-of-sql-server-security.md) "},{"content":"<bpt id=\"p1\">[</bpt>Securing ADO.NET Applications<ept id=\"p1\">](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md)</ept><ph id=\"ph1\"> </ph>","pos":[6022,6130],"source":"[Securing ADO.NET Applications](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md) "},{"content":"<bpt id=\"p1\">[</bpt>ADO.NET Managed Providers and DataSet Developer Center<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=217917)</ept>","pos":[6134,6237],"source":"[ADO.NET Managed Providers and DataSet Developer Center](http://go.microsoft.com/fwlink/?LinkId=217917)"}]}