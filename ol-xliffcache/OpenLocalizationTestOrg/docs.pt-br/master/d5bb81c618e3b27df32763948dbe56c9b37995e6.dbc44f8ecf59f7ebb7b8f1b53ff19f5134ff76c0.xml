{"content":"---\ntitle: \"ServiceModel Transaction Configuration\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"transactions [WCF], ServiceModel configuration\"\nms.assetid: 5636067a-7fbd-4485-aaa2-8141c502acf3\n---\n# ServiceModel Transaction Configuration\nWindows Communication Foundation (WCF) provides three attributes for configuring transactions for a service: `transactionFlow`, `transactionProtocol`, and `transactionTimeout`.  \n  \n## Configuring transactionFlow  \n Most of the predefined bindings WCF provides contain the `transactionFlow` and `transactionProtocol` attributes, so that you can configure the binding to accept incoming transactions for a specific endpoint using a specific transaction flow protocol. In addition, you can use the `transactionFlow` element and its `transactionProtocol` attribute to build your own custom binding. For more information about setting the configuration elements, see [\\<binding>](../../../../docs/framework/misc/binding.md) and [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md).  \n  \n The `transactionFlow` attribute specifies whether transaction flow is enabled for service endpoints that use the binding.  \n  \n## Configuring transactionProtocol  \n The `transactionProtocol` attribute specifies the transaction protocol to use with service endpoints that use the binding.  \n  \n The following is an example of a configuration section that configures the specified binding to support transaction flow, as well as a use the WS-AtomicTransaction protocol.  \n  \n```xml  \n<netNamedPipeBinding>  \n   <binding name=\"test\"  \n      closeTimeout=\"00:00:10\"  \n      openTimeout=\"00:00:20\"   \n      receiveTimeout=\"00:00:30\"  \n      sendTimeout=\"00:00:40\"  \n      transactionFlow=\"true\"  \n      transactionProtocol=\"WSAtomicTransactionOctober2004\"  \n      hostNameComparisonMode=\"WeakWildcard\"  \n      maxBufferSize=\"1001\"  \n      maxConnections=\"123\"   \n      maxReceivedMessageSize=\"1000\">  \n   </binding>  \n</netNamedPipeBinding>  \n```  \n  \n## Configuring transactionTimeout  \n You can configure the `transactionTimeout` attribute for your WCF service in the `behavior` element of the configuration file. The following code demonstrates how to do this.  \n  \n```xml  \n<configuration>  \n   <system.serviceModel>  \n      <behaviors>  \n         <behavior name=\"NewBehavior\" transactionTimeout=\"00:01:00\" /> <!-- 1 minute timeout -->  \n      </behaviors>  \n   </system.serviceModel>  \n</configuration>  \n```  \n  \n The `transactionTimeout` attribute specifies the time period within which a new transaction created at the service must complete. It is used as the <xref:System.Transactions.TransactionScope> time-out for any operation that establishes a new transaction, and if <xref:System.ServiceModel.OperationBehaviorAttribute> is applied, the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`.  \n  \n The time-out specifies the duration of time from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.  \n  \n If this attribute is set within a `service` configuration section, you should apply at least one method of the corresponding service with <xref:System.ServiceModel.OperationBehaviorAttribute>, in which the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`.  \n  \n Note that the time-out value used is the smaller value between this `transactionTimeout` configuration setting and any <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property.  \n  \n## See also\n\n- [\\<binding>](../../../../docs/framework/misc/binding.md)\n- [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)\n","nodes":[{"pos":[4,197],"embed":true,"restype":"x-metadata","content":"title: \"ServiceModel Transaction Configuration\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"transactions [WCF], ServiceModel configuration\"\nms.assetid: 5636067a-7fbd-4485-aaa2-8141c502acf3","nodes":[{"content":"ServiceModel Transaction Configuration","nodes":[{"pos":[0,38],"content":"ServiceModel Transaction Configuration","nodes":[{"content":"ServiceModel Transaction Configuration","pos":[0,38]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[204,242],"content":"ServiceModel Transaction Configuration","linkify":"ServiceModel Transaction Configuration","nodes":[{"content":"ServiceModel Transaction Configuration","pos":[0,38]}]},{"pos":[243,419],"content":"Windows Communication Foundation (WCF) provides three attributes for configuring transactions for a service: <ph id=\"ph1\">`transactionFlow`</ph>, <ph id=\"ph2\">`transactionProtocol`</ph>, and <ph id=\"ph3\">`transactionTimeout`</ph>.","source":"Windows Communication Foundation (WCF) provides three attributes for configuring transactions for a service: `transactionFlow`, `transactionProtocol`, and `transactionTimeout`."},{"pos":[428,455],"content":"Configuring transactionFlow","linkify":"Configuring transactionFlow","nodes":[{"content":"Configuring transactionFlow","pos":[0,27]}]},{"content":"Most of the predefined bindings WCF provides contain the <ph id=\"ph1\">`transactionFlow`</ph> and <ph id=\"ph2\">`transactionProtocol`</ph> attributes, so that you can configure the binding to accept incoming transactions for a specific endpoint using a specific transaction flow protocol.","pos":[459,709],"source":"Most of the predefined bindings WCF provides contain the `transactionFlow` and `transactionProtocol` attributes, so that you can configure the binding to accept incoming transactions for a specific endpoint using a specific transaction flow protocol."},{"content":"In addition, you can use the <ph id=\"ph1\">`transactionFlow`</ph> element and its <ph id=\"ph2\">`transactionProtocol`</ph> attribute to build your own custom binding.","pos":[710,838],"source":" In addition, you can use the `transactionFlow` element and its `transactionProtocol` attribute to build your own custom binding."},{"content":"For more information about setting the configuration elements, see <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept> and <bpt id=\"p2\">[</bpt>WCF Configuration Schema<ept id=\"p2\">](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)</ept>.","pos":[839,1062],"source":" For more information about setting the configuration elements, see [\\<binding>](../../../../docs/framework/misc/binding.md) and [WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)."},{"pos":[1069,1190],"content":"The <ph id=\"ph1\">`transactionFlow`</ph> attribute specifies whether transaction flow is enabled for service endpoints that use the binding.","source":"The `transactionFlow` attribute specifies whether transaction flow is enabled for service endpoints that use the binding."},{"pos":[1199,1230],"content":"Configuring transactionProtocol","linkify":"Configuring transactionProtocol","nodes":[{"content":"Configuring transactionProtocol","pos":[0,31]}]},{"pos":[1234,1356],"content":"The <ph id=\"ph1\">`transactionProtocol`</ph> attribute specifies the transaction protocol to use with service endpoints that use the binding.","source":"The `transactionProtocol` attribute specifies the transaction protocol to use with service endpoints that use the binding."},{"content":"The following is an example of a configuration section that configures the specified binding to support transaction flow, as well as a use the WS-AtomicTransaction protocol.","pos":[1363,1536]},{"pos":[2019,2049],"content":"Configuring transactionTimeout","linkify":"Configuring transactionTimeout","nodes":[{"content":"Configuring transactionTimeout","pos":[0,30]}]},{"content":"You can configure the <ph id=\"ph1\">`transactionTimeout`</ph> attribute for your WCF service in the <ph id=\"ph2\">`behavior`</ph> element of the configuration file.","pos":[2053,2179],"source":"You can configure the `transactionTimeout` attribute for your WCF service in the `behavior` element of the configuration file."},{"content":"The following code demonstrates how to do this.","pos":[2180,2227]},{"content":"The <ph id=\"ph1\">`transactionTimeout`</ph> attribute specifies the time period within which a new transaction created at the service must complete.","pos":[2484,2613],"source":"The `transactionTimeout` attribute specifies the time period within which a new transaction created at the service must complete."},{"content":"It is used as the <ph id=\"ph1\">&lt;xref:System.Transactions.TransactionScope&gt;</ph> time-out for any operation that establishes a new transaction, and if <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph> is applied, the <ph id=\"ph3\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A&gt;</ph> property is set to <ph id=\"ph4\">`true`</ph>.","pos":[2614,2924],"source":" It is used as the <xref:System.Transactions.TransactionScope> time-out for any operation that establishes a new transaction, and if <xref:System.ServiceModel.OperationBehaviorAttribute> is applied, the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`."},{"content":"The time-out specifies the duration of time from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.","pos":[2931,3074]},{"pos":[3081,3395],"content":"If this attribute is set within a <ph id=\"ph1\">`service`</ph> configuration section, you should apply at least one method of the corresponding service with <ph id=\"ph2\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute&gt;</ph>, in which the <ph id=\"ph3\">&lt;xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A&gt;</ph> property is set to <ph id=\"ph4\">`true`</ph>.","source":"If this attribute is set within a `service` configuration section, you should apply at least one method of the corresponding service with <xref:System.ServiceModel.OperationBehaviorAttribute>, in which the <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> property is set to `true`."},{"pos":[3402,3604],"content":"Note that the time-out value used is the smaller value between this <ph id=\"ph1\">`transactionTimeout`</ph> configuration setting and any <ph id=\"ph2\">&lt;xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A&gt;</ph> property.","source":"Note that the time-out value used is the smaller value between this `transactionTimeout` configuration setting and any <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property."},{"pos":[3613,3621],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3625,3681],"content":"<bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept>","source":"[\\<binding>](../../../../docs/framework/misc/binding.md)"},{"pos":[3684,3778],"content":"<bpt id=\"p1\">[</bpt>WCF Configuration Schema<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)</ept>","source":"[WCF Configuration Schema](../../../../docs/framework/configure-apps/file-schema/wcf/index.md)"}]}