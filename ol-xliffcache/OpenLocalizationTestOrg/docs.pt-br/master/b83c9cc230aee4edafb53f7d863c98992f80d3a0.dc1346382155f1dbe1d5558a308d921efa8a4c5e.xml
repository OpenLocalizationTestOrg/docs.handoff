{"content":"---\ntitle: \"How to: Create a Custom Reliable Session Binding with HTTPS | Microsoft Docs\"\nms.custom: \"\"\nms.date: \"03/30/2017\"\nms.prod: \".net-framework\"\nms.reviewer: \"\"\nms.suite: \"\"\nms.technology: \n  - \"dotnet-clr\"\nms.tgt_pltfrm: \"\"\nms.topic: \"article\"\nms.assetid: fa772232-da1f-4c66-8c94-e36c0584b549\ncaps.latest.revision: 9\nauthor: \"Erikre\"\nms.author: \"erikre\"\nmanager: \"erikre\"\n---\n# How to: Create a Custom Reliable Session Binding with HTTPS\nThis topic demonstrates the use of Secure Sockets Layer (SSL) transport security with reliable sessions. To use a reliable session over HTTPS, you must create a custom binding that uses a reliable session and the HTTPS transport. You can enable the reliable session either imperatively by using code or declaratively in the configuration file. This procedure uses the client and service configuration files to enable the reliable session and the [\\<httpsTransport>](../../../../docs/framework/configure-apps/file-schema/wcf/httpstransport.md) element.  \n  \n The key part of this procedure is that the `endpoint` configuration element contain a `bindingConfiguration` attribute that references a custom binding configuration named \"reliableSessionOverHttps\". The [\\<binding>](../../../../docs/framework/misc/binding.md) configuration element can then reference this name to specify that a reliable session and the HTTPS transport are used by including `reliableSession` and `httpsTransport` elements.  \n  \n For the source copy of this example, see [Custom Binding Reliable Session over HTTPS](../../../../docs/framework/wcf/samples/custom-binding-reliable-session-over-https.md).  \n  \n### To configure the service with a CustomBinding to use a reliable session with HTTPS  \n  \n1.  Define a service contract for the type of service.  \n  \n     [!code-csharp[c_HowTo_CreateReliableSessionHTTPS#1121](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/service.cs#1121)]  \n  \n2.  Implement the service contract in a service class. Note that address or binding information is not specified inside the implementation of the service. Also, code does not have to be written to retrieve that information from the configuration file.  \n  \n     [!code-csharp[c_HowTo_CreateReliableSessionHTTPS#1122](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/service.cs#1122)]  \n  \n3.  Create a Web.config file to configure an endpoint for the `CalculatorService` with a custom binding named \"reliableSessionOverHttps\" that uses a reliable session and the HTTPS transport.  \n  \n     [!code-xml[c_HowTo_CreateReliableSessionHTTPS#2111](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/common/web.config#2111)]   \n  \n4.  Create a Service.svc file that contains the line:  \n  \n    ```  \n    <%@ServiceHost language=c# Service=\"CalculatorService\" %>   \n    ```  \n  \n5.  Place the Service.svc file in your Internet Information Services (IIS) virtual directory.  \n  \n### To configure the client with a CustomBinding to use a reliable session with HTTPS  \n  \n1.  Use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) from the command line to generate code from service metadata.  \n  \n    ```  \n    Svcutil.exe <service's Metadata Exchange (MEX) address or HTTP GET address>   \n    ```  \n  \n2.  The client that is generated contains the `ICalculator` interface that defines the service contract that the client implementation must satisfy.  \n  \n     [!code-csharp[C_HowTo_CreateReliableSessionHTTPS#1221](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1221)]  \n  \n3.  The generated client application also contains the implementation of the `ClientCalculator`. Note that the address and binding information is not specified anywhere inside the implementation of the service. Also, code does not have to be written to retrieve that information from the configuration file.  \n  \n     [!code-csharp[C_HowTo_CreateReliableSessionHTTPS#1222](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1222)]  \n  \n4.  Configure a custom binding named \"reliableSessionOverHttps\" to use the HTTPS transport and reliable sessions.  \n  \n     [!code-xml[C_HowTo_CreateReliableSessionHTTPS#2211](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/common/app.config#2211)]   \n  \n5.  Create an instance of the `ClientCalculator` in an application and then call the service operations.  \n  \n     [!code-csharp[C_HowTo_CreateReliableSessionHTTPS#1223](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1223)]  \n  \n6.  Compile and run the client.  \n  \n## Example  \n  \n## .NET Framework Security  \n Because the certificate used in this sample is a test certificate created with Makecert.exe, a security alert appears when you try to access an HTTPS address, such as https://localhost/servicemodelsamples/service.svc, from your browser.  \n  \n## See Also  \n [Reliable Sessions](../../../../docs/framework/wcf/feature-details/reliable-sessions.md)","nodes":[{"pos":[12,88],"content":"How to: Create a Custom Reliable Session Binding with HTTPS | Microsoft Docs","needQuote":false,"needEscape":true,"nodes":[{"content":"How to: Create a Custom Reliable Session Binding with HTTPS | Microsoft Docs","pos":[0,76]}]},{"pos":[386,445],"content":"How to: Create a Custom Reliable Session Binding with HTTPS","linkify":"How to: Create a Custom Reliable Session Binding with HTTPS","nodes":[{"content":"How to: Create a Custom Reliable Session Binding with HTTPS","pos":[0,59]}]},{"content":"This topic demonstrates the use of Secure Sockets Layer (SSL) transport security with reliable sessions.","pos":[446,550]},{"content":"To use a reliable session over HTTPS, you must create a custom binding that uses a reliable session and the HTTPS transport.","pos":[551,675]},{"content":"You can enable the reliable session either imperatively by using code or declaratively in the configuration file.","pos":[676,789]},{"content":"This procedure uses the client and service configuration files to enable the reliable session and the <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>httpsTransport&gt;<ept id=\"p1\">](../../../../docs/framework/configure-apps/file-schema/wcf/httpstransport.md)</ept> element.","pos":[790,997],"source":" This procedure uses the client and service configuration files to enable the reliable session and the [\\<httpsTransport>](../../../../docs/framework/configure-apps/file-schema/wcf/httpstransport.md) element."},{"content":"The key part of this procedure is that the <ph id=\"ph1\">`endpoint`</ph> configuration element contain a <ph id=\"ph2\">`bindingConfiguration`</ph> attribute that references a custom binding configuration named \"reliableSessionOverHttps\".","pos":[1004,1203],"source":"The key part of this procedure is that the `endpoint` configuration element contain a `bindingConfiguration` attribute that references a custom binding configuration named \"reliableSessionOverHttps\"."},{"content":"The <bpt id=\"p1\">[</bpt><ph id=\"ph1\">\\&lt;</ph>binding&gt;<ept id=\"p1\">](../../../../docs/framework/misc/binding.md)</ept> configuration element can then reference this name to specify that a reliable session and the HTTPS transport are used by including <ph id=\"ph2\">`reliableSession`</ph> and <ph id=\"ph3\">`httpsTransport`</ph> elements.","pos":[1204,1445],"source":" The [\\<binding>](../../../../docs/framework/misc/binding.md) configuration element can then reference this name to specify that a reliable session and the HTTPS transport are used by including `reliableSession` and `httpsTransport` elements."},{"pos":[1452,1624],"content":"For the source copy of this example, see <bpt id=\"p1\">[</bpt>Custom Binding Reliable Session over HTTPS<ept id=\"p1\">](../../../../docs/framework/wcf/samples/custom-binding-reliable-session-over-https.md)</ept>.","source":"For the source copy of this example, see [Custom Binding Reliable Session over HTTPS](../../../../docs/framework/wcf/samples/custom-binding-reliable-session-over-https.md)."},{"pos":[1634,1716],"content":"To configure the service with a CustomBinding to use a reliable session with HTTPS","linkify":"To configure the service with a CustomBinding to use a reliable session with HTTPS","nodes":[{"content":"To configure the service with a CustomBinding to use a reliable session with HTTPS","pos":[0,82]}]},{"content":"Define a service contract for the type of service.","pos":[1726,1776]},{"pos":[1787,1949],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_HowTo_CreateReliableSessionHTTPS#1121<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/service.cs#1121)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[c_HowTo_CreateReliableSessionHTTPS#1121](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/service.cs#1121)]"},{"content":"Implement the service contract in a service class.","pos":[1959,2009]},{"content":"Note that address or binding information is not specified inside the implementation of the service.","pos":[2010,2109]},{"content":"Also, code does not have to be written to retrieve that information from the configuration file.","pos":[2110,2206]},{"pos":[2217,2379],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>c_HowTo_CreateReliableSessionHTTPS#1122<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/service.cs#1122)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[c_HowTo_CreateReliableSessionHTTPS#1122](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/service.cs#1122)]"},{"pos":[2389,2575],"content":"Create a Web.config file to configure an endpoint for the <ph id=\"ph1\">`CalculatorService`</ph> with a custom binding named \"reliableSessionOverHttps\" that uses a reliable session and the HTTPS transport.","source":"Create a Web.config file to configure an endpoint for the `CalculatorService` with a custom binding named \"reliableSessionOverHttps\" that uses a reliable session and the HTTPS transport."},{"pos":[2586,2749],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>c_HowTo_CreateReliableSessionHTTPS#2111<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/common/web.config#2111)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[c_HowTo_CreateReliableSessionHTTPS#2111](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/common/web.config#2111)]"},{"content":"Create a Service.svc file that contains the line:","pos":[2760,2809]},{"content":"Place the Service.svc file in your Internet Information Services (IIS) virtual directory.","pos":[2907,2996]},{"pos":[3006,3087],"content":"To configure the client with a CustomBinding to use a reliable session with HTTPS","linkify":"To configure the client with a CustomBinding to use a reliable session with HTTPS","nodes":[{"content":"To configure the client with a CustomBinding to use a reliable session with HTTPS","pos":[0,81]}]},{"pos":[3097,3299],"content":"Use the <bpt id=\"p1\">[</bpt>ServiceModel Metadata Utility Tool (Svcutil.exe)<ept id=\"p1\">](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)</ept> from the command line to generate code from service metadata.","source":"Use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) from the command line to generate code from service metadata."},{"pos":[3415,3559],"content":"The client that is generated contains the <ph id=\"ph1\">`ICalculator`</ph> interface that defines the service contract that the client implementation must satisfy.","source":"The client that is generated contains the `ICalculator` interface that defines the service contract that the client implementation must satisfy."},{"pos":[3570,3731],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_HowTo_CreateReliableSessionHTTPS#1221<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1221)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[C_HowTo_CreateReliableSessionHTTPS#1221](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1221)]"},{"content":"The generated client application also contains the implementation of the <ph id=\"ph1\">`ClientCalculator`</ph>.","pos":[3741,3833],"source":"The generated client application also contains the implementation of the `ClientCalculator`."},{"content":"Note that the address and binding information is not specified anywhere inside the implementation of the service.","pos":[3834,3947]},{"content":"Also, code does not have to be written to retrieve that information from the configuration file.","pos":[3948,4044]},{"pos":[4055,4216],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_HowTo_CreateReliableSessionHTTPS#1222<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1222)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[C_HowTo_CreateReliableSessionHTTPS#1222](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1222)]"},{"content":"Configure a custom binding named \"reliableSessionOverHttps\" to use the HTTPS transport and reliable sessions.","pos":[4226,4335]},{"pos":[4346,4509],"content":"<bpt id=\"p1\">[!code-xml</bpt><bpt id=\"p2\">[</bpt>C_HowTo_CreateReliableSessionHTTPS#2211<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/common/app.config#2211)</ept><ept id=\"p1\">]</ept>","source":"[!code-xml[C_HowTo_CreateReliableSessionHTTPS#2211](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/common/app.config#2211)]"},{"pos":[4520,4620],"content":"Create an instance of the <ph id=\"ph1\">`ClientCalculator`</ph> in an application and then call the service operations.","source":"Create an instance of the `ClientCalculator` in an application and then call the service operations."},{"pos":[4631,4792],"content":"<bpt id=\"p1\">[!code-csharp</bpt><bpt id=\"p2\">[</bpt>C_HowTo_CreateReliableSessionHTTPS#1223<ept id=\"p2\">](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1223)</ept><ept id=\"p1\">]</ept>","source":"[!code-csharp[C_HowTo_CreateReliableSessionHTTPS#1223](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_howto_createreliablesessionhttps/cs/client.cs#1223)]"},{"content":"Compile and run the client.","pos":[4802,4829]},{"pos":[4838,4845],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"pos":[4854,4877],"content":".NET Framework Security","linkify":".NET Framework Security","nodes":[{"content":".NET Framework Security","pos":[0,23]}]},{"content":"Because the certificate used in this sample is a test certificate created with Makecert.exe, a security alert appears when you try to access an HTTPS address, such as https://localhost/servicemodelsamples/service.svc, from your browser.","pos":[4881,5117]},{"pos":[5126,5134],"content":"See Also","linkify":"See Also","nodes":[{"content":"See Also","pos":[0,8]}]},{"pos":[5138,5226],"content":"<bpt id=\"p1\">[</bpt>Reliable Sessions<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/reliable-sessions.md)</ept>","source":"[Reliable Sessions](../../../../docs/framework/wcf/feature-details/reliable-sessions.md)"}]}