{"content":"---\ntitle: \"How to: Let users resolve ambiguous times\"\nms.date: \"04/10/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"time zones [.NET Framework], ambiguous time\"\n  - \"ambiguous time [.NET Framework]\"\nms.assetid: bca874ee-5b68-4654-8bbd-3711220ef332\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"\n---\n# How to: Let users resolve ambiguous times\n\nAn ambiguous time is a time that maps to more than one Coordinated Universal Time (UTC). It occurs when the clock time is adjusted back in time, such as during the transition from a time zone's daylight saving time to its standard time. When handling an ambiguous time, you can do one of the following:\n\n* If the ambiguous time is an item of data entered by the user, you can leave it to the user to resolve the ambiguity.\n\n* Make an assumption about how the time maps to UTC. For example, you can assume that an ambiguous time is always expressed in the time zone's standard time.\n\nThis topic shows how to let a user resolve an ambiguous time.\n\n### To let a user resolve an ambiguous time\n\n1. Get the date and time input by the user.\n\n2. Call the <xref:System.TimeZoneInfo.IsAmbiguousTime%2A> method to determine whether the time is ambiguous.\n\n3. If the time is ambiguous, call the <xref:System.TimeZoneInfo.GetAmbiguousTimeOffsets%2A> method to retrieve an array of <xref:System.TimeSpan> objects. Each element in the array contains a UTC offset that the ambiguous time can map to.\n\n4. Let the user select the desired offset.\n\n5. Get the UTC date and time by subtracting the offset selected by the user from the local time.\n\n6. Call the `static` (`Shared` in Visual Basic .NET) <xref:System.DateTime.SpecifyKind%2A> method to set the UTC date and time value's <xref:System.DateTime.Kind%2A> property to <xref:System.DateTimeKind.Utc?displayProperty=nameWithType>.\n\n## Example\n\nThe following example prompts the user to enter a date and time and, if it is ambiguous, lets the user select the UTC time that the ambiguous time maps to.\n\n[!code-csharp[System.TimeZone2.Concepts#11](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#11)]\n[!code-vb[System.TimeZone2.Concepts#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#11)]\n\nThe core of the example code uses an array of <xref:System.TimeSpan> objects to indicate possible offsets of the ambiguous time from UTC. However, these offsets are unlikely to be meaningful to the user. To clarify the meaning of the offsets, the code also notes whether an offset represents the local time zone's standard time or its daylight saving time. The code determines which time is standard and which time is daylight by comparing the offset with the value of the <xref:System.TimeZoneInfo.BaseUtcOffset%2A> property. This property indicates the difference between the UTC and the time zone's standard time.\n\nIn this example, all references to the local time zone are made through the <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> property; the local time zone is never assigned to an object variable. This is a recommended practice because a call to the <xref:System.TimeZoneInfo.ClearCachedData%2A?displayProperty=nameWithType> method invalidates any objects that the local time zone is assigned to.\n\n## Compiling the code\n\nThis example requires:\n\n* That a reference to System.Core.dll be added to the project.\n\n* That the <xref:System> namespace be imported with the `using` statement (required in C# code).\n\n## See also\n\n- [Dates, times, and time zones](../../../docs/standard/datetime/index.md)\n- [How to: Resolve ambiguous times](../../../docs/standard/datetime/resolve-ambiguous-times.md)\n","nodes":[{"pos":[4,306],"embed":true,"restype":"x-metadata","content":"title: \"How to: Let users resolve ambiguous times\"\nms.date: \"04/10/2017\"\nms.technology: dotnet-standard\nhelpviewer_keywords: \n  - \"time zones [.NET Framework], ambiguous time\"\n  - \"ambiguous time [.NET Framework]\"\nms.assetid: bca874ee-5b68-4654-8bbd-3711220ef332\nauthor: \"rpetrusha\"\nms.author: \"ronpet\"","nodes":[{"content":"How to: Let users resolve ambiguous times","nodes":[{"pos":[0,41],"content":"How to: Let users resolve ambiguous times","nodes":[{"content":"How to: Let users resolve ambiguous times","pos":[0,41]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[313,354],"content":"How to: Let users resolve ambiguous times","linkify":"How to: Let users resolve ambiguous times","nodes":[{"content":"How to: Let users resolve ambiguous times","pos":[0,41]}]},{"content":"An ambiguous time is a time that maps to more than one Coordinated Universal Time (UTC).","pos":[356,444]},{"content":"It occurs when the clock time is adjusted back in time, such as during the transition from a time zone's daylight saving time to its standard time.","pos":[445,592]},{"content":"When handling an ambiguous time, you can do one of the following:","pos":[593,658]},{"content":"If the ambiguous time is an item of data entered by the user, you can leave it to the user to resolve the ambiguity.","pos":[662,778]},{"content":"Make an assumption about how the time maps to UTC.","pos":[782,832]},{"content":"For example, you can assume that an ambiguous time is always expressed in the time zone's standard time.","pos":[833,937]},{"content":"This topic shows how to let a user resolve an ambiguous time.","pos":[939,1000]},{"pos":[1006,1045],"content":"To let a user resolve an ambiguous time","linkify":"To let a user resolve an ambiguous time","nodes":[{"content":"To let a user resolve an ambiguous time","pos":[0,39]}]},{"content":"Get the date and time input by the user.","pos":[1050,1090]},{"pos":[1095,1200],"content":"Call the <ph id=\"ph1\">&lt;xref:System.TimeZoneInfo.IsAmbiguousTime%2A&gt;</ph> method to determine whether the time is ambiguous.","source":"Call the <xref:System.TimeZoneInfo.IsAmbiguousTime%2A> method to determine whether the time is ambiguous."},{"content":"If the time is ambiguous, call the <ph id=\"ph1\">&lt;xref:System.TimeZoneInfo.GetAmbiguousTimeOffsets%2A&gt;</ph> method to retrieve an array of <ph id=\"ph2\">&lt;xref:System.TimeSpan&gt;</ph> objects.","pos":[1205,1356],"source":"If the time is ambiguous, call the <xref:System.TimeZoneInfo.GetAmbiguousTimeOffsets%2A> method to retrieve an array of <xref:System.TimeSpan> objects."},{"content":"Each element in the array contains a UTC offset that the ambiguous time can map to.","pos":[1357,1440]},{"content":"Let the user select the desired offset.","pos":[1445,1484]},{"content":"Get the UTC date and time by subtracting the offset selected by the user from the local time.","pos":[1489,1582]},{"pos":[1587,1822],"content":"Call the <ph id=\"ph1\">`static`</ph> (<ph id=\"ph2\">`Shared`</ph> in Visual Basic .NET) <ph id=\"ph3\">&lt;xref:System.DateTime.SpecifyKind%2A&gt;</ph> method to set the UTC date and time value's <ph id=\"ph4\">&lt;xref:System.DateTime.Kind%2A&gt;</ph> property to <ph id=\"ph5\">&lt;xref:System.DateTimeKind.Utc?displayProperty=nameWithType&gt;</ph>.","source":"Call the `static` (`Shared` in Visual Basic .NET) <xref:System.DateTime.SpecifyKind%2A> method to set the UTC date and time value's <xref:System.DateTime.Kind%2A> property to <xref:System.DateTimeKind.Utc?displayProperty=nameWithType>."},{"pos":[1827,1834],"content":"Example","linkify":"Example","nodes":[{"content":"Example","pos":[0,7]}]},{"content":"The following example prompts the user to enter a date and time and, if it is ambiguous, lets the user select the UTC time that the ambiguous time maps to.","pos":[1836,1991]},{"content":"The core of the example code uses an array of <ph id=\"ph1\">&lt;xref:System.TimeSpan&gt;</ph> objects to indicate possible offsets of the ambiguous time from UTC.","pos":[2305,2442],"source":"The core of the example code uses an array of <xref:System.TimeSpan> objects to indicate possible offsets of the ambiguous time from UTC."},{"content":"However, these offsets are unlikely to be meaningful to the user.","pos":[2443,2508]},{"content":"To clarify the meaning of the offsets, the code also notes whether an offset represents the local time zone's standard time or its daylight saving time.","pos":[2509,2661]},{"content":"The code determines which time is standard and which time is daylight by comparing the offset with the value of the <ph id=\"ph1\">&lt;xref:System.TimeZoneInfo.BaseUtcOffset%2A&gt;</ph> property.","pos":[2662,2831],"source":" The code determines which time is standard and which time is daylight by comparing the offset with the value of the <xref:System.TimeZoneInfo.BaseUtcOffset%2A> property."},{"content":"This property indicates the difference between the UTC and the time zone's standard time.","pos":[2832,2921]},{"content":"In this example, all references to the local time zone are made through the <ph id=\"ph1\">&lt;xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType&gt;</ph> property; the local time zone is never assigned to an object variable.","pos":[2923,3134],"source":"In this example, all references to the local time zone are made through the <xref:System.TimeZoneInfo.Local%2A?displayProperty=nameWithType> property; the local time zone is never assigned to an object variable."},{"content":"This is a recommended practice because a call to the <ph id=\"ph1\">&lt;xref:System.TimeZoneInfo.ClearCachedData%2A?displayProperty=nameWithType&gt;</ph> method invalidates any objects that the local time zone is assigned to.","pos":[3135,3334],"source":" This is a recommended practice because a call to the <xref:System.TimeZoneInfo.ClearCachedData%2A?displayProperty=nameWithType> method invalidates any objects that the local time zone is assigned to."},{"pos":[3339,3357],"content":"Compiling the code","linkify":"Compiling the code","nodes":[{"content":"Compiling the code","pos":[0,18]}]},{"content":"This example requires:","pos":[3359,3381]},{"content":"That a reference to System.Core.dll be added to the project.","pos":[3385,3445]},{"pos":[3449,3543],"content":"That the <ph id=\"ph1\">&lt;xref:System&gt;</ph> namespace be imported with the <ph id=\"ph2\">`using`</ph> statement (required in C# code).","source":"That the <xref:System> namespace be imported with the `using` statement (required in C# code)."},{"pos":[3548,3556],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[3560,3632],"content":"<bpt id=\"p1\">[</bpt>Dates, times, and time zones<ept id=\"p1\">](../../../docs/standard/datetime/index.md)</ept>","source":"[Dates, times, and time zones](../../../docs/standard/datetime/index.md)"},{"pos":[3635,3728],"content":"<bpt id=\"p1\">[</bpt>How to: Resolve ambiguous times<ept id=\"p1\">](../../../docs/standard/datetime/resolve-ambiguous-times.md)</ept>","source":"[How to: Resolve ambiguous times](../../../docs/standard/datetime/resolve-ambiguous-times.md)"}]}