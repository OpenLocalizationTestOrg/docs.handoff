{"content":"---\ntitle: \"Exporting Schemas from Classes\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF, schema import and export\"\n  - \"schemas [WCF], exporting from classes\"\n  - \"schemas [WCF]\"\n  - \"XsdDataContractExporter class\"\n  - \"XsdDataContractImporter class\"\nms.assetid: bb57b962-70c1-45a9-93d5-e721e340a13f\n---\n# Exporting Schemas from Classes\nTo generate XML Schema definition language (XSD) schemas from classes that are used in the data contract model, use the <xref:System.Runtime.Serialization.XsdDataContractExporter> class. This topic describes the process for creating schemas.  \n  \n## The Export Process  \n The schema export process starts with one or more types and produces an <xref:System.Xml.Schema.XmlSchemaSet> that describes the XML projection of these types.  \n  \n The `XmlSchemaSet` is part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]’s Schema Object Model (SOM) that represents a set of XSD Schema documents. To create XSD documents from an `XmlSchemaSet`, use the collection of schemas from the <xref:System.Xml.Schema.XmlSchemaSet.Schemas%2A> property of the `XmlSchemaSet` class. Then serialize each <xref:System.Xml.Schema.XmlSchema> object using the <xref:System.Xml.Serialization.XmlSerializer>.  \n  \n#### To export schemas  \n  \n1.  Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractExporter>.  \n  \n2.  Optional. Pass an <xref:System.Xml.Schema.XmlSchemaSet> in the constructor. In this case, the schema generated during the schema export is added to this <xref:System.Xml.Schema.XmlSchemaSet> instance instead of starting with a blank <xref:System.Xml.Schema.XmlSchemaSet>.  \n  \n3.  Optional. Call one of the <xref:System.Runtime.Serialization.XsdDataContractExporter.CanExport%2A> methods. The method determines whether the specified type can be exported. The method has the same overloads as the `Export` method in the next step.  \n  \n4.  Call one of the <xref:System.Runtime.Serialization.XsdDataContractExporter.Export%2A> methods. There are three overloads taking a <xref:System.Type>, a <xref:System.Collections.Generic.List%601> of `Type` objects, or a <xref:System.Collections.Generic.List%601> of <xref:System.Reflection.Assembly> objects. In the last case, all types in all the given assemblies are exported.  \n  \n     Multiple calls to the `Export` method results in multiple items being added to the same `XmlSchemaSet`. A type is not generated into the `XmlSchemaSet` if it already exists there. Therefore, calling `Export` multiple times on the same `XsdDataContractExporter` is preferable to creating multiple instances of the `XsdDataContractExporter` class. This avoids duplicate schema types from being generated.  \n  \n    > [!NOTE]\n    >  If there is a failure during export, the `XmlSchemaSet` will be in an unpredictable state.  \n  \n5.  Access the <xref:System.Xml.Schema.XmlSchemaSet> through the <xref:System.Runtime.Serialization.XsdDataContractExporter.Schemas%2A> property.  \n  \n## Export Options  \n You can set the <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractExporter> to an instance of the <xref:System.Runtime.Serialization.ExportOptions> class to control various aspects of the export process. Specifically, you can set the following options:  \n  \n-   <xref:System.Runtime.Serialization.ExportOptions.KnownTypes%2A>. This collection of `Type` represents the known types for the types being exported. (For more information, see [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).) These known types are exported on every `Export` call in addition to the types passed to the `Export` method.  \n  \n-   <xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A>. An <xref:System.Runtime.Serialization.IDataContractSurrogate> can be supplied through this property that will customize the export process. For more information, see [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md). By default, no surrogate is used.  \n  \n## Helper Methods  \n In addition to its primary role of exporting schema, the `XsdDataContractExporter` provides several useful helper methods that provide information about types. These include:  \n  \n-   <xref:System.Runtime.Serialization.XsdDataContractExporter.GetRootElementName%2A> method. This method takes a `Type` and returns an <xref:System.Xml.XmlQualifiedName> that represents the root element name and namespace that would be used if this type were serialized as the root object.  \n  \n-   <xref:System.Runtime.Serialization.XsdDataContractExporter.GetSchemaTypeName%2A> method. This method takes a `Type` and returns an <xref:System.Xml.XmlQualifiedName> that represents the name of the XSD schema type that would be used if this type were exported to the schema. For <xref:System.Xml.Serialization.IXmlSerializable> types represented as anonymous types in the schema, this method returns `null`.  \n  \n-   <xref:System.Runtime.Serialization.XsdDataContractExporter.GetSchemaType%2A> method. This method works only with <xref:System.Xml.Serialization.IXmlSerializable> types that are represented as anonymous types in the schema, and returns `null` for all other types. For anonymous types, this method returns an <xref:System.Xml.Schema.XmlSchemaType> that represents a given `Type`.  \n  \n Export options affect all of these methods.  \n  \n## See also\n\n- <xref:System.Runtime.Serialization.DataContractSerializer>\n- <xref:System.Runtime.Serialization.XsdDataContractImporter>\n- <xref:System.Runtime.Serialization.XsdDataContractExporter>\n- [Schema Import and Export](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md)\n- [Importing Schema to Generate Classes](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md)\n","nodes":[{"pos":[4,308],"embed":true,"restype":"x-metadata","content":"title: \"Exporting Schemas from Classes\"\nms.date: \"03/30/2017\"\nhelpviewer_keywords: \n  - \"WCF, schema import and export\"\n  - \"schemas [WCF], exporting from classes\"\n  - \"schemas [WCF]\"\n  - \"XsdDataContractExporter class\"\n  - \"XsdDataContractImporter class\"\nms.assetid: bb57b962-70c1-45a9-93d5-e721e340a13f","nodes":[{"content":"Exporting Schemas from Classes","nodes":[{"pos":[0,30],"content":"Exporting Schemas from Classes","nodes":[{"content":"Exporting Schemas from Classes","pos":[0,30]}]}],"path":["title"],"nosxs":false}],"yml":true},{"pos":[315,345],"content":"Exporting Schemas from Classes","linkify":"Exporting Schemas from Classes","nodes":[{"content":"Exporting Schemas from Classes","pos":[0,30]}]},{"content":"To generate XML Schema definition language (XSD) schemas from classes that are used in the data contract model, use the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter&gt;</ph> class.","pos":[346,532],"source":"To generate XML Schema definition language (XSD) schemas from classes that are used in the data contract model, use the <xref:System.Runtime.Serialization.XsdDataContractExporter> class."},{"content":"This topic describes the process for creating schemas.","pos":[533,587]},{"pos":[596,614],"content":"The Export Process","linkify":"The Export Process","nodes":[{"content":"The Export Process","pos":[0,18]}]},{"pos":[618,777],"content":"The schema export process starts with one or more types and produces an <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> that describes the XML projection of these types.","source":"The schema export process starts with one or more types and produces an <xref:System.Xml.Schema.XmlSchemaSet> that describes the XML projection of these types."},{"content":"The <ph id=\"ph1\">`XmlSchemaSet`</ph> is part of the <ph id=\"ph2\">[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]</ph>’s Schema Object Model (SOM) that represents a set of XSD Schema documents.","pos":[784,956],"source":"The `XmlSchemaSet` is part of the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]’s Schema Object Model (SOM) that represents a set of XSD Schema documents."},{"content":"To create XSD documents from an <ph id=\"ph1\">`XmlSchemaSet`</ph>, use the collection of schemas from the <ph id=\"ph2\">&lt;xref:System.Xml.Schema.XmlSchemaSet.Schemas%2A&gt;</ph> property of the <ph id=\"ph3\">`XmlSchemaSet`</ph> class.","pos":[957,1130],"source":" To create XSD documents from an `XmlSchemaSet`, use the collection of schemas from the <xref:System.Xml.Schema.XmlSchemaSet.Schemas%2A> property of the `XmlSchemaSet` class."},{"content":"Then serialize each <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchema&gt;</ph> object using the <ph id=\"ph2\">&lt;xref:System.Xml.Serialization.XmlSerializer&gt;</ph>.","pos":[1131,1249],"source":" Then serialize each <xref:System.Xml.Schema.XmlSchema> object using the <xref:System.Xml.Serialization.XmlSerializer>."},{"pos":[1260,1277],"content":"To export schemas","linkify":"To export schemas","nodes":[{"content":"To export schemas","pos":[0,17]}]},{"pos":[1287,1373],"content":"Create an instance of the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter&gt;</ph>.","source":"Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractExporter>."},{"content":"Optional.","pos":[1383,1392]},{"content":"Pass an <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> in the constructor.","pos":[1393,1458],"source":" Pass an <xref:System.Xml.Schema.XmlSchemaSet> in the constructor."},{"content":"In this case, the schema generated during the schema export is added to this <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> instance instead of starting with a blank <ph id=\"ph2\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph>.","pos":[1459,1654],"source":" In this case, the schema generated during the schema export is added to this <xref:System.Xml.Schema.XmlSchemaSet> instance instead of starting with a blank <xref:System.Xml.Schema.XmlSchemaSet>."},{"content":"Optional.","pos":[1664,1673]},{"content":"Call one of the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.CanExport%2A&gt;</ph> methods.","pos":[1674,1771],"source":" Call one of the <xref:System.Runtime.Serialization.XsdDataContractExporter.CanExport%2A> methods."},{"content":"The method determines whether the specified type can be exported.","pos":[1772,1837]},{"content":"The method has the same overloads as the <ph id=\"ph1\">`Export`</ph> method in the next step.","pos":[1838,1912],"source":" The method has the same overloads as the `Export` method in the next step."},{"content":"Call one of the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.Export%2A&gt;</ph> methods.","pos":[1922,2016],"source":"Call one of the <xref:System.Runtime.Serialization.XsdDataContractExporter.Export%2A> methods."},{"content":"There are three overloads taking a <ph id=\"ph1\">&lt;xref:System.Type&gt;</ph>, a <ph id=\"ph2\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> of <ph id=\"ph3\">`Type`</ph> objects, or a <ph id=\"ph4\">&lt;xref:System.Collections.Generic.List%601&gt;</ph> of <ph id=\"ph5\">&lt;xref:System.Reflection.Assembly&gt;</ph> objects.","pos":[2017,2229],"source":" There are three overloads taking a <xref:System.Type>, a <xref:System.Collections.Generic.List%601> of `Type` objects, or a <xref:System.Collections.Generic.List%601> of <xref:System.Reflection.Assembly> objects."},{"content":"In the last case, all types in all the given assemblies are exported.","pos":[2230,2299]},{"content":"Multiple calls to the <ph id=\"ph1\">`Export`</ph> method results in multiple items being added to the same <ph id=\"ph2\">`XmlSchemaSet`</ph>.","pos":[2310,2413],"source":"Multiple calls to the `Export` method results in multiple items being added to the same `XmlSchemaSet`."},{"content":"A type is not generated into the <ph id=\"ph1\">`XmlSchemaSet`</ph> if it already exists there.","pos":[2414,2489],"source":" A type is not generated into the `XmlSchemaSet` if it already exists there."},{"content":"Therefore, calling <ph id=\"ph1\">`Export`</ph> multiple times on the same <ph id=\"ph2\">`XsdDataContractExporter`</ph> is preferable to creating multiple instances of the <ph id=\"ph3\">`XsdDataContractExporter`</ph> class.","pos":[2490,2655],"source":" Therefore, calling `Export` multiple times on the same `XsdDataContractExporter` is preferable to creating multiple instances of the `XsdDataContractExporter` class."},{"content":"This avoids duplicate schema types from being generated.","pos":[2656,2712]},{"pos":[2724,2829],"content":"[!NOTE]\nIf there is a failure during export, the `XmlSchemaSet` will be in an unpredictable state.","leadings":["","    >  "],"nodes":[{"content":"If there is a failure during export, the <ph id=\"ph1\">`XmlSchemaSet`</ph> will be in an unpredictable state.","pos":[8,98],"source":"If there is a failure during export, the `XmlSchemaSet` will be in an unpredictable state."}]},{"pos":[2839,2980],"content":"Access the <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaSet&gt;</ph> through the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.Schemas%2A&gt;</ph> property.","source":"Access the <xref:System.Xml.Schema.XmlSchemaSet> through the <xref:System.Runtime.Serialization.XsdDataContractExporter.Schemas%2A> property."},{"pos":[2989,3003],"content":"Export Options","linkify":"Export Options","nodes":[{"content":"Export Options","pos":[0,14]}]},{"content":"You can set the <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A&gt;</ph> property of the <ph id=\"ph2\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter&gt;</ph> to an instance of the <ph id=\"ph3\">&lt;xref:System.Runtime.Serialization.ExportOptions&gt;</ph> class to control various aspects of the export process.","pos":[3007,3297],"source":"You can set the <xref:System.Runtime.Serialization.XsdDataContractExporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractExporter> to an instance of the <xref:System.Runtime.Serialization.ExportOptions> class to control various aspects of the export process."},{"content":"Specifically, you can set the following options:","pos":[3298,3346]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ExportOptions.KnownTypes%2A&gt;</ph>.","pos":[3356,3420],"source":"<xref:System.Runtime.Serialization.ExportOptions.KnownTypes%2A>."},{"content":"This collection of <ph id=\"ph1\">`Type`</ph> represents the known types for the types being exported.","pos":[3421,3503],"source":" This collection of `Type` represents the known types for the types being exported."},{"content":"(For more information, see <bpt id=\"p1\">[</bpt>Data Contract Known Types<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)</ept>.) These known types are exported on every <ph id=\"ph1\">`Export`</ph> call in addition to the types passed to the <ph id=\"ph2\">`Export`</ph> method.","pos":[3504,3747],"source":" (For more information, see [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).) These known types are exported on every `Export` call in addition to the types passed to the `Export` method."},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A&gt;</ph>.","pos":[3757,3832],"source":"<xref:System.Runtime.Serialization.ExportOptions.DataContractSurrogate%2A>."},{"content":"An <ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.IDataContractSurrogate&gt;</ph> can be supplied through this property that will customize the export process.","pos":[3833,3972],"source":" An <xref:System.Runtime.Serialization.IDataContractSurrogate> can be supplied through this property that will customize the export process."},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Data Contract Surrogates<ept id=\"p1\">](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)</ept>.","pos":[3973,4096],"source":" For more information, see [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md)."},{"content":"By default, no surrogate is used.","pos":[4097,4130]},{"pos":[4139,4153],"content":"Helper Methods","linkify":"Helper Methods","nodes":[{"content":"Helper Methods","pos":[0,14]}]},{"content":"In addition to its primary role of exporting schema, the <ph id=\"ph1\">`XsdDataContractExporter`</ph> provides several useful helper methods that provide information about types.","pos":[4157,4316],"source":"In addition to its primary role of exporting schema, the `XsdDataContractExporter` provides several useful helper methods that provide information about types."},{"content":"These include:","pos":[4317,4331]},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.GetRootElementName%2A&gt;</ph> method.","pos":[4341,4430],"source":"<xref:System.Runtime.Serialization.XsdDataContractExporter.GetRootElementName%2A> method."},{"content":"This method takes a <ph id=\"ph1\">`Type`</ph> and returns an <ph id=\"ph2\">&lt;xref:System.Xml.XmlQualifiedName&gt;</ph> that represents the root element name and namespace that would be used if this type were serialized as the root object.","pos":[4431,4627],"source":" This method takes a `Type` and returns an <xref:System.Xml.XmlQualifiedName> that represents the root element name and namespace that would be used if this type were serialized as the root object."},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.GetSchemaTypeName%2A&gt;</ph> method.","pos":[4637,4725],"source":"<xref:System.Runtime.Serialization.XsdDataContractExporter.GetSchemaTypeName%2A> method."},{"content":"This method takes a <ph id=\"ph1\">`Type`</ph> and returns an <ph id=\"ph2\">&lt;xref:System.Xml.XmlQualifiedName&gt;</ph> that represents the name of the XSD schema type that would be used if this type were exported to the schema.","pos":[4726,4911],"source":" This method takes a `Type` and returns an <xref:System.Xml.XmlQualifiedName> that represents the name of the XSD schema type that would be used if this type were exported to the schema."},{"content":"For <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.IXmlSerializable&gt;</ph> types represented as anonymous types in the schema, this method returns <ph id=\"ph2\">`null`</ph>.","pos":[4912,5044],"source":" For <xref:System.Xml.Serialization.IXmlSerializable> types represented as anonymous types in the schema, this method returns `null`."},{"content":"<ph id=\"ph1\">&lt;xref:System.Runtime.Serialization.XsdDataContractExporter.GetSchemaType%2A&gt;</ph> method.","pos":[5054,5138],"source":"<xref:System.Runtime.Serialization.XsdDataContractExporter.GetSchemaType%2A> method."},{"content":"This method works only with <ph id=\"ph1\">&lt;xref:System.Xml.Serialization.IXmlSerializable&gt;</ph> types that are represented as anonymous types in the schema, and returns <ph id=\"ph2\">`null`</ph> for all other types.","pos":[5139,5316],"source":" This method works only with <xref:System.Xml.Serialization.IXmlSerializable> types that are represented as anonymous types in the schema, and returns `null` for all other types."},{"content":"For anonymous types, this method returns an <ph id=\"ph1\">&lt;xref:System.Xml.Schema.XmlSchemaType&gt;</ph> that represents a given <ph id=\"ph2\">`Type`</ph>.","pos":[5317,5431],"source":" For anonymous types, this method returns an <xref:System.Xml.Schema.XmlSchemaType> that represents a given `Type`."},{"content":"Export options affect all of these methods.","pos":[5438,5481]},{"pos":[5490,5498],"content":"See also","linkify":"See also","nodes":[{"content":"See also","pos":[0,8]}]},{"pos":[5687,5789],"content":"<bpt id=\"p1\">[</bpt>Schema Import and Export<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md)</ept>","source":"[Schema Import and Export](../../../../docs/framework/wcf/feature-details/schema-import-and-export.md)"},{"pos":[5792,5918],"content":"<bpt id=\"p1\">[</bpt>Importing Schema to Generate Classes<ept id=\"p1\">](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md)</ept>","source":"[Importing Schema to Generate Classes](../../../../docs/framework/wcf/feature-details/importing-schema-to-generate-classes.md)"}]}